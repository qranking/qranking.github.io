<html>
	<head><!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-110075493-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-110075493-1');
</script>
<!-- Google AdSense -->
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-6168511236629369",
    enable_page_level_ads: true
  });
</script>

		<meta charset="UTF-8" />
		<title>Qiita Ranking</title>
		<link rel="stylesheet" type="text/css" href="qranking.css">
	</head>
	<body>
<div class="headerContainer">
<h1>Qiitaいいね数ランキング (100位まで)</h1>
<h2>対象記事件数: 222,355件 (2011/09/16～2017/11/23)</h2>
</div><!--class="headerContainer"-->
<p>ランキングは毎日更新します。</p>
<p><i><img width="16" height="16" src="thumb-up-120px.png" /></i>が同じ値の場合は投稿日時の新しいものが上位としています。</p>
<table border="1" style="height:150px;">
<tr>
	<td rowspan="3">1位</td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="thumb-up-120px.png" /></i>5898</kbd>
		<a target="_blank" href="https://qiita.com/Qiita/items/c686397e4a0f4f11683d">Markdown記法 チートシート</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2011-11-04<br />23:58:21</center>
	</td>
	<td style="width:200px;">
		<!--投稿者-->
		<center>
			@<a href="user/88.html">Qiita</a>(4件の記事)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/88/profile-images/1509418928">
		</center>
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Qiita]</b> <b>[Markdown]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<!--
		<div style="width:350px;height:150px;overflow:scroll;">%s</div>
		-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>Markdown記法のチートシートです。<br>
本ページではQiitaで使用可能なMarkdownのみ掲載しているため、一部原文と異なります。<br>
Markdownの原文については、<a href="http://daringfireball.net/projects/markdown/syntax.php" rel="nofollow noopener" target="_blank">Daring Fireball: Markdown Syntax Documentation</a>をご覧下さい。<br>
また、コードに関する記法は<a href="http://github.github.com/github-flavored-markdown/" rel="nofollow noopener" target="_blank">GitHub Flavored Markdown</a>に準拠しています。<br>
Qiitaでシンタックスハイライト可能な言語一覧については、 <a href="http://qiita.com/Qiita/items/e84f5aad7757afce82ba" id="reference-d0063d1590f9c8d86c05">シンタックスハイライト可能な言語</a> をご覧下さい。</p>

<h2>
<span id="code---コードの挿入" class="fragment"></span><a href="#code---%E3%82%B3%E3%83%BC%E3%83%89%E3%81%AE%E6%8C%BF%E5%85%A5"><i class="fa fa-link"></i></a>Code - コードの挿入</h2>

<p>たとえば、Rubyで記述したコードをファイル名「qiita.rb」として投稿したいときは、 <strong>バッククオート</strong> を使用して以下のように投稿するとシンタックスハイライトが適用されます。<br>
<strong>コードブロック上下に空行を挿入しないと正しく表示されないことがあります。</strong></p>

<blockquote>
<p>(空行)<br>
```ruby:qiita.rb<br>
puts 'The best way to log and share programmers knowledge.'<br>
```<br>
(空行)</p>
</blockquote>

<p><strong>結果</strong></p>

<div class="code-frame" data-lang="ruby">
<div class="code-lang"><span class="bold">qiita.rb</span></div>
<div class="highlight"><pre><span></span><span class="nb">puts</span> <span class="s1">'The best way to log and share programmers knowledge.'</span>
</pre></div>
</div>

<p>また、コードをインライン表示することも可能です。</p>

<blockquote>
<p>` puts 'Qiita'` はプログラマのための技術情報共有サービスです。</p>
</blockquote>

<p><strong>結果</strong></p>

<p><code>puts 'Qiita'</code> はプログラマのための技術情報共有サービスです。</p>

<p>インラインコードがn個連続するバッククオートを含む場合、n+1連続のバッククオートで囲みます。</p>

<blockquote>
<p>`` `バッククオート` `` や ``` ``2連続バッククオート`` ``` も記述できます。</p>
</blockquote>

<p><strong>結果</strong></p>

<p><code>`バッククオート`</code> や <code>``2連続バッククオート``</code> も記述できます。</p>

<p>インラインコードの中身が <a href="https://developer.mozilla.org/ja/docs/Web/CSS/color_value" rel="nofollow noopener" target="_blank">CSS の <code>&lt;color&gt;</code> 型</a>の RGB 16進数表記, <code>rgb()</code>, <code>rgba()</code>, <code>hsl()</code>, <code>hsla()</code> 場合横にその色が表示されます。</p>

<blockquote>
<p>`#ffce44`<br>
`rgb(255,0,0)`<br>
`rgba(0,255,0,0.4)`<br>
`hsl(100, 10%, 10%)`<br>
`hsla(100, 24%, 40%, 0.5)`</p>
</blockquote>

<p><strong>結果</strong></p>

<p><code>#ffce44<span class="inline-code-color" style="background-color: #ffce44;"></span></code><br>
<code>rgb(255,0,0)<span class="inline-code-color" style="background-color: rgb(255,0,0);"></span></code><br>
<code>rgba(0,255,0,0.4)<span class="inline-code-color" style="background-color: rgba(0,255,0,0.4);"></span></code><br>
<code>hsl(100, 10%, 10%)<span class="inline-code-color" style="background-color: hsl(100, 10%, 10%);"></span></code><br>
<code>hsla(100, 24%, 40%, 0.5)<span class="inline-code-color" style="background-color: hsla(100, 24%, 40%, 0.5);"></span></code></p>

<h3>
<span id="gist連携について" class="fragment"></span><a href="#gist%E9%80%A3%E6%90%BA%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6"><i class="fa fa-link"></i></a>Gist連携について</h3>

<h5>
<span id="githubアカウントでqiitaにログインされている場合" class="fragment"></span><a href="#github%E3%82%A2%E3%82%AB%E3%82%A6%E3%83%B3%E3%83%88%E3%81%A7qiita%E3%81%AB%E3%83%AD%E3%82%B0%E3%82%A4%E3%83%B3%E3%81%95%E3%82%8C%E3%81%A6%E3%81%84%E3%82%8B%E5%A0%B4%E5%90%88"><i class="fa fa-link"></i></a>GitHubアカウントでQiitaにログインされている場合</h5>

<p>投稿時、Octocatアイコンにチェックを入れていただくと連携を行います。<br>
コードを含むアイテムを投稿するとコード部分を抽出し、同じ内容がGistにも投稿される仕組みになっています。</p>

<p>Gistとの連携は、</p>

<ul>
<li>コードの投稿</li>
<li>Qiita側でのコードの編集</li>
</ul>

<p>の２点について連携しています。<br>
Gist側でコードを編集されても、 <strong>Qiitaには反映されません</strong> のでご注意下さい。</p>

<h2>
<span id="format-text---テキストの装飾" class="fragment"></span><a href="#format-text---%E3%83%86%E3%82%AD%E3%82%B9%E3%83%88%E3%81%AE%E8%A3%85%E9%A3%BE"><i class="fa fa-link"></i></a>Format Text - テキストの装飾</h2>

<h3>
<span id="headers---見出し" class="fragment"></span><a href="#headers---%E8%A6%8B%E5%87%BA%E3%81%97"><i class="fa fa-link"></i></a>Headers - 見出し</h3>

<ul>
<li># これはH1タグです</li>
<li>## これはH2タグです</li>
<li>###### これはH6タグです</li>
</ul>

<h3>
<span id="emphasis---強調強勢" class="fragment"></span><a href="#emphasis---%E5%BC%B7%E8%AA%BF%E5%BC%B7%E5%8B%A2"><i class="fa fa-link"></i></a>Emphasis - 強調・強勢</h3>

<div class="code-frame" data-lang="markdown"><div class="highlight"><pre><span></span>_ か * で囲むとHTMLのemタグになります。Qiitaでは*イタリック体*になります。
__ か ** で囲むとHTMLのstrongタグになります。Qiitaでは**太字**になります。
</pre></div></div>

<p>_ か * で囲むとHTMLのemタグになります。Qiitaでは<em>イタリック体</em>になります。<br>
__ か ** で囲むとHTMLのstrongタグになります。Qiitaでは<strong>太字</strong>になります。</p>

<h3>
<span id="strikethrough---打ち消し線" class="fragment"></span><a href="#strikethrough---%E6%89%93%E3%81%A1%E6%B6%88%E3%81%97%E7%B7%9A"><i class="fa fa-link"></i></a>Strikethrough - 打ち消し線</h3>

<div class="code-frame" data-lang="markdown"><div class="highlight"><pre><span></span>打ち消し線を使うには ~~ で囲みます。 ~~打ち消し~~
</pre></div></div>

<p>打ち消し線を使うには ~~ で囲みます。 <del>打ち消し</del></p>

<p>イタリックや太文字と同様に前後に <strong>半角スペース</strong> か <strong>改行文字</strong> が必要です。</p>

<h3>
<span id="details---折りたたみ" class="fragment"></span><a href="#details---%E6%8A%98%E3%82%8A%E3%81%9F%E3%81%9F%E3%81%BF"><i class="fa fa-link"></i></a>Details - 折りたたみ</h3>

<div class="code-frame" data-lang="markdown"><div class="highlight"><pre><span></span>追加情報としたい内容を、detailsタグで囲みます。そして、要約として表示したい文章をsummaryタグで記載します。

Qiitaとは

&lt;details&gt;&lt;summary&gt;Qiita(キータ)は、プログラマのための技術情報共有サービスです。&lt;/summary&gt;プログラミングに関することをどんどん投稿して、知識を記録、共有しましょう。
Qiitaに投稿すると、自分のコードやノウハウを見やすい形で残すことができます。
技術情報はテキストファイルへのメモではなく、タグを付けた文章、シンタックスハイライトされたコードで保存することで初めて再利用可能な知識になる、そうQiitaでは考えています。&lt;/details&gt;
</pre></div></div>

<p>追加情報としたい内容を、detailsタグで囲みます。そして、要約として表示したい文章をsummaryタグで記載します。</p>

<p>Qiitaとは</p>

<p><details><summary>Qiita(キータ)は、プログラマのための技術情報共有サービスです。</summary><br>
プログラミングに関することをどんどん投稿して、知識を記録、共有しましょう。<br>
Qiitaに投稿すると、自分のコードやノウハウを見やすい形で残すことができます。<br>
技術情報はテキストファイルへのメモではなく、タグを付けた文章、シンタックスハイライトされたコードで保存することで初めて再利用可能な知識になる、そうQiitaでは考えています。</details></p>

<h2>
<span id="lists---リスト" class="fragment"></span><a href="#lists---%E3%83%AA%E3%82%B9%E3%83%88"><i class="fa fa-link"></i></a>Lists - リスト</h2>

<h3>
<span id="disc型" class="fragment"></span><a href="#disc%E5%9E%8B"><i class="fa fa-link"></i></a>Disc型</h3>

<ul>
<li>文頭に「*」「+」「-」のいずれかを入れるとDisc型リストになります</li>
<li>要点をまとめる際に便利です</li>
<li>リストを挿入する際は、 <strong>リストの上下に空行がないと正しく表示されません。また「*」「+」「-」の後にはスペースが必要です</strong>
</li>
</ul>

<h3>
<span id="decimal型" class="fragment"></span><a href="#decimal%E5%9E%8B"><i class="fa fa-link"></i></a>Decimal型</h3>

<ol>
<li> 文頭に「数字.」を入れるとDecimal型リストになります</li>
<li> 後からの挿入/移動を考慮して、1. 2. 3. と順番にするのではなく、1. 1. 1. という風に同じ数字にしておくといい具合です。</li>
<li> リストを挿入する際は、 <strong>リストの上下に空行がないと正しく表示されません。また「数字.」の後にはスペースが必要です</strong>
</li>
</ol>

<h3>
<span id="definition型" class="fragment"></span><a href="#definition%E5%9E%8B"><i class="fa fa-link"></i></a>Definition型</h3>

<p>HTMLの<code>&lt;dl&gt;</code>タグをそのまま使うことで実現できます。</p>

<div class="code-frame" data-lang="html"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">dl</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">dt</span><span class="p">&gt;</span>リンゴ<span class="p">&lt;/</span><span class="nt">dt</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">dd</span><span class="p">&gt;</span>赤いフルーツ<span class="p">&lt;/</span><span class="nt">dd</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">dt</span><span class="p">&gt;</span>オレンジ<span class="p">&lt;/</span><span class="nt">dt</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">dd</span><span class="p">&gt;</span>橙色のフルーツ<span class="p">&lt;/</span><span class="nt">dd</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">dl</span><span class="p">&gt;</span>
</pre></div></div>

<p>次のようになります。</p>

<dl>
<dt>リンゴ</dt>
<dd>赤いフルーツ</dd>
<dt>オレンジ</dt>
<dd>橙色フルーツ</dd>
</dl>

<p>注意するべきは、Definition型のリスト内ではMarkdown記法が使えないということです。例えば以下のように書いてはなりません。</p>

<div class="code-frame" data-lang="html"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">dl</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">dt</span><span class="p">&gt;</span>リンゴ<span class="p">&lt;/</span><span class="nt">dt</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">dd</span><span class="p">&gt;</span> とても **赤い** フルーツ <span class="p">&lt;/</span><span class="nt">dd</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">dl</span><span class="p">&gt;</span>
</pre></div></div>

<p>次のようになってしまいます。</p>

<dl>
  <dt>リンゴ</dt>
  <dd> とても **赤い** フルーツ </dd>
</dl>

<p>Definition型リスト内ではMarkdown記法ではなくて、HTMLタグを使って修飾しなければならないので、正しくは次のようになります。</p>

<div class="code-frame" data-lang="html"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">dl</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">dt</span><span class="p">&gt;</span>リンゴ<span class="p">&lt;/</span><span class="nt">dt</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">dd</span><span class="p">&gt;</span> とても<span class="p">&lt;</span><span class="nt">strong</span><span class="p">&gt;</span>赤い<span class="p">&lt;/</span><span class="nt">strong</span><span class="p">&gt;</span>フルーツ <span class="p">&lt;/</span><span class="nt">dd</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">dl</span><span class="p">&gt;</span>
</pre></div></div>

<dl>
  <dt>リンゴ</dt>
  <dd> とても<strong>赤い</strong>フルーツ</dd>
</dl>

<p>Markdown記法とHTMLタグの対応は次のようになっています。</p>

<table>
<thead>
<tr>
<th style="text-align: center">修飾</th>
<th style="text-align: center">Markdown</th>
<th style="text-align: center">HTML</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center">ボールド</td>
<td style="text-align: center"><code>**  **</code></td>
<td style="text-align: center"><code>&lt;strong&gt;&lt;/strong&gt;</code></td>
</tr>
<tr>
<td style="text-align: center">イタリック</td>
<td style="text-align: center"><code>_  _</code></td>
<td style="text-align: center"><code>&lt;em&gt;&lt;/em&gt;</code></td>
</tr>
<tr>
<td style="text-align: center">コード</td>
<td style="text-align: center"><code>``</code></td>
<td style="text-align: center"><code>&lt;code&gt;&lt;/code&gt;</code></td>
</tr>
<tr>
<td style="text-align: center">リンク</td>
<td style="text-align: center"><code>[text](url)</code></td>
<td style="text-align: center"><code>&lt;a href="url"&gt;text&lt;/a&gt;</code></td>
</tr>
</tbody>
</table>

<h3>
<span id="checkbox型" class="fragment"></span><a href="#checkbox%E5%9E%8B"><i class="fa fa-link"></i></a>Checkbox型</h3>

<p>Disc型の記述の後ろに[ ]を入れるとチェックボックスが生成されます。<br>
チェックが入った状態のボックスを生成する場合は[x]を入力します。<br>
<strong>前後にスペースが必要です。</strong></p>

<div class="code-frame" data-lang="md"><div class="highlight"><pre><span></span><span class="k">- [ ]</span> タスク1
<span class="k">- [x]</span> タスク2
</pre></div></div>

<ul>
<li class="task-list-item">
<input type="checkbox" class="task-list-item-checkbox" disabled>タスク1</li>
<li class="task-list-item">
<input type="checkbox" class="task-list-item-checkbox" checked disabled>タスク2</li>
</ul>

<h2>
<span id="blockquotes---引用" class="fragment"></span><a href="#blockquotes---%E5%BC%95%E7%94%A8"><i class="fa fa-link"></i></a>Blockquotes - 引用</h2>

<blockquote>
<p>&gt; 文頭に&gt;を置くことで引用になります。<br>
&gt; 複数行にまたがる場合、改行のたびにこの記号を置く必要があります。<br>
&gt; <strong>引用の上下にはリストと同じく空行がないと正しく表示されません</strong><br>
&gt; 引用の中に別のMarkdownを使用することも可能です。</p>

<blockquote>
<p>これはネストされた引用です。</p>
</blockquote>
</blockquote>

<h2>
<span id="horizontal-rules---水平線" class="fragment"></span><a href="#horizontal-rules---%E6%B0%B4%E5%B9%B3%E7%B7%9A"><i class="fa fa-link"></i></a>Horizontal rules - 水平線</h2>

<p>下記は全て水平線として表示されます</p>

<blockquote>
<p>* * *<br>
***<br>
*****<br>
- - -<br>
---------------------------------------</p>
</blockquote>

<h2>
<span id="links---リンク" class="fragment"></span><a href="#links---%E3%83%AA%E3%83%B3%E3%82%AF"><i class="fa fa-link"></i></a>Links - リンク</h2>

<ul>
<li>[リンクテキスト](URL "タイトル") 

<ul>
<li>タイトル付きのリンクを投稿できます。</li>
</ul>
</li>
</ul>

<p><strong>例</strong></p>

<blockquote>
<p><em>Markdown:</em> [Qiita](<a href="http://qiita.com" class="autolink">http://qiita.com</a> "Qiita")<br>
<em>結果:</em> <a href="http://qiita.com" title="Qiita">Qiita</a></p>
</blockquote>

<ul>
<li>[リンクテキスト](URL) 

<ul>
<li>こちらはタイトル無しのリンクになります。</li>
</ul>
</li>
</ul>

<p><strong>例</strong></p>

<blockquote>
<p><em>Markdown:</em> [Qiita](<a href="http://qiita.com" class="autolink">http://qiita.com</a>)<br>
<em>結果:</em> <a href="http://qiita.com">Qiita</a></p>
</blockquote>

<ul>
<li>[リンクテキスト][名前]</li>
<li>[名前]:URL

<ul>
<li>同じURLへのリンクを複数箇所に設定することができます</li>
</ul>
</li>
</ul>

<p><strong>例</strong></p>

<blockquote>
<p><em>Markdown:</em><br>
[ここ][link-1] と [この][link-1] リンクは同じになります。<br>
[link-1][] も可能です。<br>
[link-1]:<a href="http://qiita.com/drafts/c686397e4a0f4f11683d" class="autolink">http://qiita.com/drafts/c686397e4a0f4f11683d</a></p>

<p><em>結果:</em><br>
<a href="http://qiita.com/drafts/c686397e4a0f4f11683d">ここ</a> と <a href="http://qiita.com/drafts/c686397e4a0f4f11683d">この</a> リンクは同じになります。<br>
<a href="http://qiita.com/drafts/c686397e4a0f4f11683d">link-1</a> も可能です。</p>
</blockquote>

<h2>
<span id="images---画像埋め込み" class="fragment"></span><a href="#images---%E7%94%BB%E5%83%8F%E5%9F%8B%E3%82%81%E8%BE%BC%E3%81%BF"><i class="fa fa-link"></i></a>Images - 画像埋め込み</h2>

<ul>
<li>![代替テキスト](画像のURL)

<ul>
<li>タイトル無しの画像を埋め込む</li>
</ul>
</li>
<li>![代替テキスト](画像のURL "画像タイトル")

<ul>
<li>タイトル有りの画像を埋め込む</li>
</ul>
</li>
</ul>

<p><strong>例</strong></p>

<blockquote>
<p><em>Markdown:</em> ![Qiita](<a href="https://qiita-image-store.s3.amazonaws.com/0/45617/015bd058-7ea0-e6a5-b9cb-36a4fb38e59c.png" class="autolink" rel="nofollow noopener" target="_blank">https://qiita-image-store.s3.amazonaws.com/0/45617/015bd058-7ea0-e6a5-b9cb-36a4fb38e59c.png</a> "Qiita")</p>

<p><em>結果:</em></p>

<p><a href="https://camo.qiitausercontent.com/c6718430970d7f1756e60ef460da266a5476599a/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f34353631372f30313562643035382d376561302d653661352d623963622d3336613466623338653539632e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/c6718430970d7f1756e60ef460da266a5476599a/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f34353631372f30313562643035382d376561302d653661352d623963622d3336613466623338653539632e706e67" alt="Qiita" title="Qiita" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/45617/015bd058-7ea0-e6a5-b9cb-36a4fb38e59c.png"></a></p>
</blockquote>

<h2>
<span id="テーブル記法" class="fragment"></span><a href="#%E3%83%86%E3%83%BC%E3%83%96%E3%83%AB%E8%A8%98%E6%B3%95"><i class="fa fa-link"></i></a>テーブル記法</h2>

<h3>
<span id="入力補完を利用する場合" class="fragment"></span><a href="#%E5%85%A5%E5%8A%9B%E8%A3%9C%E5%AE%8C%E3%82%92%E5%88%A9%E7%94%A8%E3%81%99%E3%82%8B%E5%A0%B4%E5%90%88"><i class="fa fa-link"></i></a>入力補完を利用する場合</h3>

<p><a href="https://camo.qiitausercontent.com/549e42f1109e98edf58fdcc307a136e95c97628e/687474703a2f2f63646e2e71696974612e636f6d2f6173736574732f7461626c652d646435383739313230636532663830633834343335313564396638363465663365353263313033326330363832333333646161303030386233663239633536332e676966" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/549e42f1109e98edf58fdcc307a136e95c97628e/687474703a2f2f63646e2e71696974612e636f6d2f6173736574732f7461626c652d646435383739313230636532663830633834343335313564396638363465663365353263313033326330363832333333646161303030386233663239633536332e676966" alt="入力補完を利用する場合" data-canonical-src="http://cdn.qiita.com/assets/table-dd5879120ce2f80c8443515d9f864ef3e52c1032c0682333daa0008b3f29c563.gif"></a></p>

<h3>
<span id="手動で入力する場合" class="fragment"></span><a href="#%E6%89%8B%E5%8B%95%E3%81%A7%E5%85%A5%E5%8A%9B%E3%81%99%E3%82%8B%E5%A0%B4%E5%90%88"><i class="fa fa-link"></i></a>手動で入力する場合</h3>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>| Left align | Right align | Center align |
|:-----------|------------:|:------------:|
| This       | This        | This         |
| column     | column      | column       |
| will       | will        | will         |
| be         | be          | be           |
| left       | right       | center       |
| aligned    | aligned     | aligned      |
</pre></div></div>

<p>上記のように書くと，以下のように表示されます．</p>

<table>
<thead>
<tr>
<th style="text-align: left">Left align</th>
<th style="text-align: right">Right align</th>
<th style="text-align: center">Center align</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left">This</td>
<td style="text-align: right">This</td>
<td style="text-align: center">This</td>
</tr>
<tr>
<td style="text-align: left">column</td>
<td style="text-align: right">column</td>
<td style="text-align: center">column</td>
</tr>
<tr>
<td style="text-align: left">will</td>
<td style="text-align: right">will</td>
<td style="text-align: center">will</td>
</tr>
<tr>
<td style="text-align: left">be</td>
<td style="text-align: right">be</td>
<td style="text-align: center">be</td>
</tr>
<tr>
<td style="text-align: left">left</td>
<td style="text-align: right">right</td>
<td style="text-align: center">center</td>
</tr>
<tr>
<td style="text-align: left">aligned</td>
<td style="text-align: right">aligned</td>
<td style="text-align: center">aligned</td>
</tr>
</tbody>
</table>

<h2>
<span id="数式の挿入" class="fragment"></span><a href="#%E6%95%B0%E5%BC%8F%E3%81%AE%E6%8C%BF%E5%85%A5"><i class="fa fa-link"></i></a>数式の挿入</h2>

<p>コードブロックの言語指定に "math" を指定することでTeX記法を用いて数式を記述することができます。</p>

<blockquote>
<p>```math<br>
\left( \sum_{k=1}^n a_k b_k \right)^{!!2} \leq<br>
\left( \sum_{k=1}^n a_k^2 \right) \left( \sum_{k=1}^n b_k^2 \right)<br>
```</p>
</blockquote>

<div class="code-frame" data-lang="math"><div class="highlight"><pre><span></span>\left( \sum_{k=1}^n a_k b_k \right)^{\!\!2} \leq
\left( \sum_{k=1}^n a_k^2 \right) \left( \sum_{k=1}^n b_k^2 \right)
</pre></div></div>

<p><code>$2^3$</code> のように数式を "$" で挟むと行中に数式を埋め込むこともできます。</p>

<blockquote>
<p>x^2 + y^2 = 1 をインライン表示すると $x^2 + y^2 = 1$ になります。</p>
</blockquote>

<p>ただしインライン数式の中でコントロールシンボル（<code>\{</code>のような、バックスラッシュの後に記号が続くもの）を使うと、後述のバックスラッシュによるMarkdownのエスケープと衝突してしまいます。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$a = \{1, 2, 3\}$
</pre></div></div>

<blockquote>
<p>$a = {1, 2, 3}$</p>
</blockquote>

<p>なので次のように二つのバックスラッシュを使います。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$a = \\{1, 2, 3\\}$
</pre></div></div>

<blockquote>
<p>$a = \{1, 2, 3\}$</p>
</blockquote>

<h2>
<span id="目次tocの自動挿入" class="fragment"></span><a href="#%E7%9B%AE%E6%AC%A1toc%E3%81%AE%E8%87%AA%E5%8B%95%E6%8C%BF%E5%85%A5"><i class="fa fa-link"></i></a>目次(TOC)の自動挿入</h2>

<p>目次は記事内の見出しを元に自動生成し、右上に自動挿入されます。詳細は<a href="http://blog.qiita.com/post/77055935852/qiita-toc" rel="nofollow noopener" target="_blank">目次機能の紹介記事</a>をご覧ください。</p>

<h2>
<span id="注釈" class="fragment"></span><a href="#%E6%B3%A8%E9%87%88"><i class="fa fa-link"></i></a>注釈</h2>

<p>本文中に<code>[^1]</code>や<code>[^example]</code>のように文字列を記述することで、脚注へのリンクを表現できます。注釈内容は、同じく本文中に <code>[^1]: ...</code> というように記述します<sup id="fnref1"><a href="#fn1" rel="footnote" title="注釈内容を記述する位置は、本文の途中でも末尾でも構いません。">1</a></sup>。</p>

<h2>
<span id="絵文字" class="fragment"></span><a href="#%E7%B5%B5%E6%96%87%E5%AD%97"><i class="fa fa-link"></i></a>絵文字</h2>

<p>厳密には Markdown 記法の外ですが、<code>:</code> で囲って、絵文字を埋め込めます。</p>

<p><strong>例</strong></p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>\:kissing_closed_eyes: chu☆
</pre></div></div>

<blockquote>
<p><img alt=":kissing_closed_eyes:" class="emoji" height="20" src="https://cdn.qiita.com/emoji/twemoji/unicode/1f61a.png" title=":kissing_closed_eyes:" width="20"> chu☆</p>
</blockquote>

<p>絵文字チートシート<br>
<a href="http://www.emoji-cheat-sheet.com/" class="autolink" rel="nofollow noopener" target="_blank">http://www.emoji-cheat-sheet.com/</a></p>

<h2>
<span id="その他" class="fragment"></span><a href="#%E3%81%9D%E3%81%AE%E4%BB%96"><i class="fa fa-link"></i></a>その他</h2>

<p>バックスラッシュ[\]をMarkdownの前に挿入することで、Markdownをエスケープ(無効化)することができます。</p>

<p><strong>例</strong></p>

<blockquote>
<p># H1<br>
エスケープされています</p>
</blockquote>

<p>また本文では一部のHTMLタグも利用可能です。</p>

<div class="footnotes">
<hr>
<ol>

<li id="fn1">
<p>注釈内容を記述する位置は、本文の途中でも末尾でも構いません。 <a href="#fnref1">↩</a></p>
</li>

</ol>
</div>
</div>
	</td>
</tr>
</table>
<br />
<table border="1" style="height:150px;">
<tr>
	<td rowspan="3">2位</td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="thumb-up-120px.png" /></i>4309</kbd>
		<a target="_blank" href="https://qiita.com/suin/items/f570f057a0ff927b47dc">【まとめ】これ知らないプログラマって損してんなって思う汎用的なツール 100超</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2012-02-08<br />23:42:02</center>
	</td>
	<td style="width:200px;">
		<!--投稿者-->
		<center>
			@<a href="user/889.html">suin</a>(697件の記事)<br />(ShouldBee 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/889/profile-images/1473682133">
		</center>
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Ruby]</b> <b>[Python]</b> <b>[PHP]</b> <b>[HTML]</b> <b>[JavaScript]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<!--
		<div style="width:350px;height:150px;overflow:scroll;">%s</div>
		-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p><a href="http://qiita.com/puriketu99/items/f75d42f1ff669b924ec1" id="reference-9c1df87e823c122101fe">これ知らないプログラマって損してんなって思う汎用的なツール</a>のコメントに寄せられたツールを分類分けしてみました。</p>

<ul>
<li>解説は、ほぼコメントに寄せられた内容のコピペです。</li>
<li>URLのみの記述は公式サイト(か、ほぼ公式サイトと化しているサイト)</li>
<li>公式サイトとは別に、ページタイトルだけでツールを説明しきっているページへのリンクも付けておきました。類似ページが複数ある場合は、はてブのブックマーク数が多いものを選びました。</li>
<li>知らないツールもあるので、分類がいいかげんなところもあると思います。何か気づいたらコメントください。</li>
<li>解説が不十分なツールについても、補足（コピペで本文に取り込める体裁だとありがたい）を頂けると助かります！</li>
<li>元ネタの投稿は現在進行形なので、随時取り込んでいきたいと思います。</li>
</ul>

<hr>

<h1>
<span id="エディタ" class="fragment"></span><a href="#%E3%82%A8%E3%83%87%E3%82%A3%E3%82%BF"><i class="fa fa-link"></i></a>エディタ</h1>

<h3>
<span id="vim" class="fragment"></span><a href="#vim"><i class="fa fa-link"></i></a>vim</h3>

<p>自分はVimmerなんで、Vimを推しておきます。Vimがあれば大抵の事が出来ると思ってます。<br>
が、Vimは習得に時間がかかるという難点があります。</p>

<p>エディタプラグイン</p>

<ul>
<li>neocomplcache.vim</li>
<li>quickrun.vim</li>
<li>vimproc + quickrun</li>
<li>unite.vim</li>
</ul>

<h3>
<span id="macvim" class="fragment"></span><a href="#macvim"><i class="fa fa-link"></i></a>MacVim</h3>

<h3>
<span id="emacs" class="fragment"></span><a href="#emacs"><i class="fa fa-link"></i></a>Emacs</h3>

<p>VIM, Emacs は別格って感じですね・・・</p>

<p>エディタプラグイン</p>

<ul>
<li>anything.el</li>
</ul>

<h3>
<span id="cocoaemacs" class="fragment"></span><a href="#cocoaemacs"><i class="fa fa-link"></i></a>CocoaEmacs</h3>

<h3>
<span id="mou" class="fragment"></span><a href="#mou"><i class="fa fa-link"></i></a>Mou</h3>

<p>Markdownを書くためのエディタ。</p>

<ul>
<li><a href="http://mouapp.com/" class="autolink" rel="nofollow noopener" target="_blank">http://mouapp.com/</a></li>
<li><a href="http://veadardiary.blog29.fc2.com/blog-entry-3492.html" rel="nofollow noopener" target="_blank"> リアルタイムプレビューができるMarkdownエディタ『Mou』 | Macの手書き説明書</a></li>
</ul>

<h3>
<span id="sublime-text-3" class="fragment"></span><a href="#sublime-text-3"><i class="fa fa-link"></i></a>Sublime Text 3</h3>

<p><a href="https://sublimetext.com/3" class="autolink" rel="nofollow noopener" target="_blank">https://sublimetext.com/3</a></p>

<h3>
<span id="coteditor" class="fragment"></span><a href="#coteditor"><i class="fa fa-link"></i></a>CotEditor</h3>

<p>フリー。超軽量なエディター。<br>
簡単な文章修正とかに向いてる。</p>

<h3>
<span id="coda" class="fragment"></span><a href="#coda"><i class="fa fa-link"></i></a>Coda</h3>

<p><a href="https://panic.com/jp/coda/" class="autolink" rel="nofollow noopener" target="_blank">https://panic.com/jp/coda/</a><br>
シェア。エディター＋IDE的な感じ。デザインを確認しながら編集できる。FTPやSSHとかSVNとかも同梱されていてデザイナーはこれで十分。</p>

<h3>
<span id="textwrangler" class="fragment"></span><a href="#textwrangler"><i class="fa fa-link"></i></a>TextWrangler</h3>

<p><a href="https://itunes.apple.com/jp/app/textwrangler/id404010395" class="autolink" rel="nofollow noopener" target="_blank">https://itunes.apple.com/jp/app/textwrangler/id404010395</a></p>

<h3>
<span id="espresso" class="fragment"></span><a href="#espresso"><i class="fa fa-link"></i></a>Espresso</h3>

<p><a href="http://espressoapp.com/" class="autolink" rel="nofollow noopener" target="_blank">http://espressoapp.com/</a><br>
Espresso はリアルタイムでCSSをプレビューしながら書けたりするエディタ。</p>

<h3>
<span id="json-editor" class="fragment"></span><a href="#json-editor"><i class="fa fa-link"></i></a>JSON Editor</h3>

<p>サクっとJSONを整形してくれる</p>

<hr>

<h1>
<span id="ide統合開発環境" class="fragment"></span><a href="#ide%E7%B5%B1%E5%90%88%E9%96%8B%E7%99%BA%E7%92%B0%E5%A2%83"><i class="fa fa-link"></i></a>IDE(統合開発環境)</h1>

<h3>
<span id="xcode" class="fragment"></span><a href="#xcode"><i class="fa fa-link"></i></a>Xcode</h3>

<p>iPhoneアプリを開発する気がなくても入れておくと、差分を簡単に扱えるFileMergeアプリやopendiffコマンドなどおまけが付いてくるのでオススメ</p>

<ul>
<li><a href="https://developer.apple.com/xcode/" class="autolink" rel="nofollow noopener" target="_blank">https://developer.apple.com/xcode/</a></li>
</ul>

<h3>
<span id="eclipse" class="fragment"></span><a href="#eclipse"><i class="fa fa-link"></i></a>Eclipse</h3>

<p>Eclipse とか NetBeans とかもとりあえず使ってみる派。で、どっちがいいというのを決めるより「これは何が優れているか」をみて、シーンによって起動するのを変えてしまう。</p>

<ul>
<li><a href="http://www.eclipse.org/" class="autolink" rel="nofollow noopener" target="_blank">http://www.eclipse.org/</a></li>
</ul>

<h3>
<span id="netbeans" class="fragment"></span><a href="#netbeans"><i class="fa fa-link"></i></a>NetBeans</h3>

<p>Eclipse とか NetBeans とかもとりあえず使ってみる派。で、どっちがいいというのを決めるより「これは何が優れているか」をみて、シーンによって起動するのを変えてしまう。</p>

<ul>
<li><a href="http://ja.netbeans.org/" class="autolink" rel="nofollow noopener" target="_blank">http://ja.netbeans.org/</a></li>
</ul>

<h3>
<span id="phpstrom" class="fragment"></span><a href="#phpstrom"><i class="fa fa-link"></i></a>PhpStrom</h3>

<p>PHPやJavaScriptをはじめとしたウェブ向けのIDE。</p>

<ul>
<li><a href="http://www.jetbrains.com/phpstorm/" class="autolink" rel="nofollow noopener" target="_blank">http://www.jetbrains.com/phpstorm/</a></li>
<li><a href="http://havelog.ayumusato.com/computer/software/e173-phpstorm-best-ide.html" rel="nofollow noopener" target="_blank">最強のJavaScript IDE「WebStorm」の姉妹品「PhpStorm」はPHP IDEとして最高だった ::ハブろぐ</a></li>
</ul>

<h3>
<span id="cloud9" class="fragment"></span><a href="#cloud9"><i class="fa fa-link"></i></a>Cloud9</h3>

<p>まだ荒削りだけど、ブラウザで実行できるIDE。GitHubやBitbucketなんかと連動。</p>

<ul>
<li><a href="http://c9.io/" class="autolink" rel="nofollow noopener" target="_blank">http://c9.io/</a></li>
</ul>

<h3>
<span id="webstorm" class="fragment"></span><a href="#webstorm"><i class="fa fa-link"></i></a>WebStorm</h3>

<p>現行のIDEの中ではJavaScript回りの環境が最強。姉妹品のPHPStormも評判良いです。<br>
リファクタとか超簡単に出来たりします。が、有料です。その価値はあると思いますけど…。</p>

<ul>
<li><a href="http://www.jetbrains.com/webstorm/index.html" class="autolink" rel="nofollow noopener" target="_blank">http://www.jetbrains.com/webstorm/index.html</a></li>
<li><a href="http://efcl.info/2010/1027/res2023/" rel="nofollow noopener" target="_blank">最強のJavaScript IDE 「WebStorm」を使ってみた</a></li>
</ul>

<h3>
<span id="nide" class="fragment"></span><a href="#nide"><i class="fa fa-link"></i></a>Nide</h3>

<p>node.jsのIDE</p>

<ul>
<li><a href="http://coreh.github.com/nide/" class="autolink" rel="nofollow noopener" target="_blank">http://coreh.github.com/nide/</a></li>
<li><a href="http://sourceforge.jp/magazine/12/01/17/080233" rel="nofollow noopener" target="_blank">Node.js向けのWebベースIDE「Nide 0.2」がリリース - SourceForge.JP Magazine : オープンソースの話題満載</a></li>
</ul>

<hr>

<h1>
<span id="sql-db" class="fragment"></span><a href="#sql-db"><i class="fa fa-link"></i></a>SQL, DB</h1>

<h3>
<span id="sequel-pro" class="fragment"></span><a href="#sequel-pro"><i class="fa fa-link"></i></a>Sequel Pro</h3>

<p>MySQLクライアント。phpMyAdminがいらなくなりました。</p>

<ul>
<li><a href="http://www.sequelpro.com/" class="autolink" rel="nofollow noopener" target="_blank">http://www.sequelpro.com/</a></li>
<li><a href="http://www.moongift.jp/2008/06/sequel_pro/" rel="nofollow noopener" target="_blank">高機能なMySQLフロントエンド「Sequel Pro」 - MOONGIFT</a></li>
</ul>

<h3>
<span id="navicat" class="fragment"></span><a href="#navicat"><i class="fa fa-link"></i></a>Navicat</h3>

<p>MySQLクライアント。</p>

<ul>
<li><a href="http://www.navicat.jp/" class="autolink" rel="nofollow noopener" target="_blank">http://www.navicat.jp/</a></li>
<li><a href="http://www.moongift.jp/2008/02/navicat_for_mysql_lite/" rel="nofollow noopener" target="_blank">便利なGUIのMySQLフロントエンド「Navicat for MySQL Lite」 - MOONGIFT</a></li>
</ul>

<h3>
<span id="mysqlworkbench" class="fragment"></span><a href="#mysqlworkbench"><i class="fa fa-link"></i></a>MySQLWorkbench</h3>

<p>MySQLのクライアントは MySQLWorkbench を使っています。<br>
EER図も描けるからデータベースの設計にも使える。</p>

<ul>
<li><a href="http://www-jp.mysql.com/products/workbench/" class="autolink" rel="nofollow noopener" target="_blank">http://www-jp.mysql.com/products/workbench/</a></li>
</ul>

<h3>
<span id="heidisql" class="fragment"></span><a href="#heidisql"><i class="fa fa-link"></i></a>HeidiSQL</h3>

<p>Windows向けMySQLのクライアントですが、HeidiSQL<br>
JDBC/ODBC等なしにこれ単体で接続でき、スプレッドシートを順次開いていくかたちでのブラウジングができる。<br>
そのため、「実際にDBのデータを見ながらデータをいじる」というのが直感的にでき、非常に便利。<br>
SSHトンネル接続や、サーバ間のデータダンプ＆リストアもできるため、運用作業はだいたいこれで完結できる。<br>
ただ、若干不安定なので、ミッションクリティカルな作業には向いてないかも。<br>
（そういうのはサーバ上でやれよ、と言われそうですが…）</p>

<ul>
<li><a href="http://www.heidisql.com/" class="autolink" rel="nofollow noopener" target="_blank">http://www.heidisql.com/</a></li>
</ul>

<h3>
<span id="adminer" class="fragment"></span><a href="#adminer"><i class="fa fa-link"></i></a>adminer</h3>

<p>phpMyAdminと同じくブラウザベースのDBクライアント。<br>
1ファイルでphpが動く環境ならOK、なにより軽いから重宝してる。<br>
MySQL,PostgreSQL, SQLite, MS SQL,Oracleと意外に相手を問わないのになぜかマイナーなんだよな～。</p>

<ul>
<li><a href="http://www.adminer.org/" class="autolink" rel="nofollow noopener" target="_blank">http://www.adminer.org/</a></li>
</ul>

<h3>
<span id="sqleditor" class="fragment"></span><a href="#sqleditor"><i class="fa fa-link"></i></a>SQLEditor</h3>

<p>ER図作成ツール。生SQLやActiveRecord Modelを書き出せる</p>

<h3>
<span id="baseapp" class="fragment"></span><a href="#baseapp"><i class="fa fa-link"></i></a>Base.app</h3>

<p>SQlite用GUI管理ツール</p>

<h3>
<span id="ermaster" class="fragment"></span><a href="#ermaster"><i class="fa fa-link"></i></a>ERMaster</h3>

<p>DB管理ツール。<br>
EclipseのプラグインですがDB管理＋ドキュメント化が非常に楽になります。</p>

<h3>
<span id="the-sqlite-sorcerer" class="fragment"></span><a href="#the-sqlite-sorcerer"><i class="fa fa-link"></i></a>The SQLite Sorcerer</h3>

<p>SQLite用のクライアント。AIR製。</p>

<ul>
<li><a href="http://afoucal.free.fr/index.php/applications/sqlite-sorcerer/" class="autolink" rel="nofollow noopener" target="_blank">http://afoucal.free.fr/index.php/applications/sqlite-sorcerer/</a></li>
</ul>

<hr>

<h1>
<span id="php" class="fragment"></span><a href="#php"><i class="fa fa-link"></i></a>PHP</h1>

<h3>
<span id="mamp" class="fragment"></span><a href="#mamp"><i class="fa fa-link"></i></a>MAMP</h3>

<ul>
<li><a href="http://www.mamp.info/en/index.html" class="autolink" rel="nofollow noopener" target="_blank">http://www.mamp.info/en/index.html</a></li>
</ul>

<h3>
<span id="xhprof" class="fragment"></span><a href="#xhprof"><i class="fa fa-link"></i></a>xhprof</h3>

<p>php で書かれたWebアプリケーションのボトルネック調査に必須</p>

<h3>
<span id="xdebug" class="fragment"></span><a href="#xdebug"><i class="fa fa-link"></i></a>xdebug</h3>

<h3>
<span id="phpunit" class="fragment"></span><a href="#phpunit"><i class="fa fa-link"></i></a>PHPUnit</h3>

<p>使えるテストフレームワークがこれしかない…</p>

<h3>
<span id="phing" class="fragment"></span><a href="#phing"><i class="fa fa-link"></i></a>Phing</h3>

<p>php のビルドツール，テスト環境や本番などの環境ごとのブートストラップ指定や，結合テストの設定に</p>

<hr>

<h1>
<span id="ruby" class="fragment"></span><a href="#ruby"><i class="fa fa-link"></i></a>Ruby</h1>

<h3>
<span id="travisci" class="fragment"></span><a href="#travisci"><i class="fa fa-link"></i></a>travisCI</h3>

<p>継続インテグレーション</p>

<h3>
<span id="bundler" class="fragment"></span><a href="#bundler"><i class="fa fa-link"></i></a>bundler</h3>

<p>アプリケーション毎に必要な Gem を管理できる．デプロイ先の構築に便利</p>

<h3>
<span id="capistrano" class="fragment"></span><a href="#capistrano"><i class="fa fa-link"></i></a>Capistrano</h3>

<p>デプロイツール，PHP とか他の言語で書かれたアプリケーションも設定次第でこれでデプロイできる</p>

<h3>
<span id="pry" class="fragment"></span><a href="#pry"><i class="fa fa-link"></i></a>Pry</h3>

<p>irb から乗り換えた</p>

<h3>
<span id="watchr" class="fragment"></span><a href="#watchr"><i class="fa fa-link"></i></a>watchr</h3>

<h3>
<span id="guard" class="fragment"></span><a href="#guard"><i class="fa fa-link"></i></a>guard</h3>

<h3>
<span id="gist" class="fragment"></span><a href="#gist"><i class="fa fa-link"></i></a>gist</h3>

<hr>

<h1>
<span id="java" class="fragment"></span><a href="#java"><i class="fa fa-link"></i></a>Java</h1>

<p>JavaDecompiler</p>

<hr>

<h1>
<span id="javascript" class="fragment"></span><a href="#javascript"><i class="fa fa-link"></i></a>JavaScript</h1>

<h3>
<span id="nodejs" class="fragment"></span><a href="#nodejs"><i class="fa fa-link"></i></a>node.js</h3>

<p>JavaScriptの対話実行環境 とにかく速くJSの動作をチェックしたい時に便利</p>

<ul>
<li><a href="http://nodejs.org/" class="autolink" rel="nofollow noopener" target="_blank">http://nodejs.org/</a></li>
<li><a href="http://www.atmarkit.co.jp/fwcr/rensai2/nodejs01/01.html" rel="nofollow noopener" target="_blank">サーバサイドJavaScriptの本命「Node.js」の基礎知識（1/3）- ＠IT</a></li>
</ul>

<h3>
<span id="spidermonkey" class="fragment"></span><a href="#spidermonkey"><i class="fa fa-link"></i></a>SpiderMonkey</h3>

<p>JavaScriptの対話実行環境 とにかく速くJSの動作をチェックしたい時に便利</p>

<ul>
<li><a href="https://developer.mozilla.org/ja/SpiderMonkey" class="autolink" rel="nofollow noopener" target="_blank">https://developer.mozilla.org/ja/SpiderMonkey</a></li>
</ul>

<h3>
<span id="ringojs" class="fragment"></span><a href="#ringojs"><i class="fa fa-link"></i></a>ringo.js</h3>

<p>JavaScriptの対話実行環境 とにかく速くJSの動作をチェックしたい時に便利</p>

<ul>
<li><a href="http://ringojs.org/" class="autolink" rel="nofollow noopener" target="_blank">http://ringojs.org/</a></li>
</ul>

<h3>
<span id="jsperf" class="fragment"></span><a href="#jsperf"><i class="fa fa-link"></i></a>jsPerf</h3>

<p>JavaScriptのベンチマーク取れるサイト。jsのベンチマークをとって公開するのに便利。</p>

<ul>
<li><a href="http://jsperf.com/" class="autolink" rel="nofollow noopener" target="_blank">http://jsperf.com/</a></li>
</ul>

<h3>
<span id="jsfiddle" class="fragment"></span><a href="#jsfiddle"><i class="fa fa-link"></i></a>jsFiddle</h3>

<p>ブラウザ内でJavaScriptの実行・HTML/CSSのマークアップなんかが試せる</p>

<ul>
<li><a href="http://jsfiddle.net/" class="autolink" rel="nofollow noopener" target="_blank">http://jsfiddle.net/</a></li>
</ul>

<h3>
<span id="google-closure-compiler" class="fragment"></span><a href="#google-closure-compiler"><i class="fa fa-link"></i></a>Google Closure Compiler</h3>

<p>JavaScriptをミニファイすることがあれば、Google Closure Compiler</p>

<ul>
<li><a href="http://code.google.com/p/closure-compiler/" class="autolink" rel="nofollow noopener" target="_blank">http://code.google.com/p/closure-compiler/</a></li>
<li><a href="http://www.moongift.jp/2009/11/closure-compiler/" rel="nofollow noopener" target="_blank">Google製JavaScript最適化ツール「Closure Compiler」 - MOONGIFT</a></li>
</ul>

<h3>
<span id="yui-compressor" class="fragment"></span><a href="#yui-compressor"><i class="fa fa-link"></i></a>YUI Compressor</h3>

<p>JavaScriptもCSSもミニファイすることがあれば、YUI Compressor</p>

<ul>
<li><a href="http://developer.yahoo.com/yui/compressor/" class="autolink" rel="nofollow noopener" target="_blank">http://developer.yahoo.com/yui/compressor/</a></li>
<li><a href="http://d.hatena.ne.jp/cos31/20080116/1200504657" rel="nofollow noopener" target="_blank">YUI Compressorで簡単にjavascriptとCSSを圧縮 - Affirmative Way</a></li>
</ul>

<h3>
<span id="impressjs" class="fragment"></span><a href="#impressjs"><i class="fa fa-link"></i></a>impress.js</h3>

<ul>
<li><a href="http://bartaz.github.com/impress.js/" class="autolink" rel="nofollow noopener" target="_blank">http://bartaz.github.com/impress.js/</a></li>
<li><a href="http://kachibito.net/web-design/jmpress-js.html" rel="nofollow noopener" target="_blank">impress.jsライクなダイナミックなプレゼンテーションを作成するjQuery依存タイプのライブラリ・jmpress.js - かちびと. net</a></li>
</ul>

<h3>
<span id="enchantjs" class="fragment"></span><a href="#enchantjs"><i class="fa fa-link"></i></a>enchant.js</h3>

<ul>
<li><a href="http://enchantjs.com/ja/?s=ja" class="autolink" rel="nofollow noopener" target="_blank">http://enchantjs.com/ja/?s=ja</a></li>
<li><p><a href="http://blog.asial.co.jp/858" rel="nofollow noopener" target="_blank">Monaca + enchant.js でお手軽スマフォゲームアプリ開発 : アシアルブログ</a></p></li>
<li><p>gl.enchant.js</p></li>
<li><p><a href="http://wise9.jp/archives/6245" rel="nofollow noopener" target="_blank">wise9 › 3D野郎は寄ってたかれ!WebGLでグリグリ遊べるgl.enchant.jsがついにβ公開!</a></p></li>
</ul>

<h3>
<span id="npm" class="fragment"></span><a href="#npm"><i class="fa fa-link"></i></a>npm</h3>

<h3>
<span id="forever" class="fragment"></span><a href="#forever"><i class="fa fa-link"></i></a>forever</h3>

<h3>
<span id="coffee-script" class="fragment"></span><a href="#coffee-script"><i class="fa fa-link"></i></a>coffee-script</h3>

<h3>
<span id="rvm" class="fragment"></span><a href="#rvm"><i class="fa fa-link"></i></a>rvm</h3>

<h3>
<span id="nvm" class="fragment"></span><a href="#nvm"><i class="fa fa-link"></i></a>nvm</h3>

<h3>
<span id="nave" class="fragment"></span><a href="#nave"><i class="fa fa-link"></i></a>nave</h3>

<hr>

<h1>
<span id="python" class="fragment"></span><a href="#python"><i class="fa fa-link"></i></a>Python</h1>

<h3>
<span id="pypy" class="fragment"></span><a href="#pypy"><i class="fa fa-link"></i></a>pypy</h3>

<p>pythonで書いたプログラムがちょっと遅いなと思ったらとりあえず一回使ってみる(djangoが動くので関係してますよね？)。</p>

<ul>
<li><a href="http://pypy.org/" class="autolink" rel="nofollow noopener" target="_blank">http://pypy.org/</a></li>
</ul>

<h3>
<span id="virtualenv-virtualenvwrapper-pythonbrew" class="fragment"></span><a href="#virtualenv-virtualenvwrapper-pythonbrew"><i class="fa fa-link"></i></a>virtualenv, virtualenvwrapper, pythonbrew</h3>

<p>pythonだとvirtualenv, virtualenvwrapper。最近では代わりにpythonbrewは絶対入れる。</p>

<ul>
<li><a href="http://pypi.python.org/pypi/virtualenv" class="autolink" rel="nofollow noopener" target="_blank">http://pypi.python.org/pypi/virtualenv</a></li>
<li><a href="http://pypi.python.org/pypi/virtualenvwrapper" class="autolink" rel="nofollow noopener" target="_blank">http://pypi.python.org/pypi/virtualenvwrapper</a></li>
<li><a href="https://github.com/utahta/pythonbrew" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/utahta/pythonbrew</a></li>
<li><a href="http://www.ianlewis.org/jp/virtualenv-pip-fabric" rel="nofollow noopener" target="_blank">virtualenv, virtualenvwrapper, pip を使う方法 - Ian Lewis</a></li>
<li><a href="http://www.ninxit.com/blog/2010/10/04/python%E3%81%AE%E3%83%90%E3%83%BC%E3%82%B8%E3%83%A7%E3%83%B3%E3%82%92%E7%AE%A1%E7%90%86%E3%81%99%E3%82%8B%E3%83%84%E3%83%BC%E3%83%AB%E3%80%81pythonbrew%E3%82%92%E4%BD%9C%E3%81%A3%E3%81%A6%E3%81%BF/" rel="nofollow noopener" target="_blank">Pythonのバージョンを管理するツール、pythonbrewを作ってみた | ninxit.blog</a></li>
</ul>

<h3>
<span id="simplehttpserver" class="fragment"></span><a href="#simplehttpserver"><i class="fa fa-link"></i></a>SimpleHTTPServer</h3>

<p>Pythonだと、SimpleHTTPServerが便利だと思います。</p>

<ul>
<li><a href="http://mojix.org/2009/03/05/python_one_line_fileserver" rel="nofollow noopener" target="_blank">Pythonを使って、１行でファイル共有Webサーバを立ち上げる - モジログ</a></li>
</ul>

<h3>
<span id="pip" class="fragment"></span><a href="#pip"><i class="fa fa-link"></i></a>pip</h3>

<h3>
<span id="ipython" class="fragment"></span><a href="#ipython"><i class="fa fa-link"></i></a>ipython</h3>

<h3>
<span id="scipy" class="fragment"></span><a href="#scipy"><i class="fa fa-link"></i></a>scipy</h3>

<h3>
<span id="werkzeug" class="fragment"></span><a href="#werkzeug"><i class="fa fa-link"></i></a>werkzeug</h3>

<hr>

<h1>
<span id="css-html-less" class="fragment"></span><a href="#css-html-less"><i class="fa fa-link"></i></a>CSS, HTML, LESS</h1>

<h3>
<span id="lessapp" class="fragment"></span><a href="#lessapp"><i class="fa fa-link"></i></a>Less.app</h3>

<p>LESSを書くことがあれば LESS.app も便利です。 </p>

<ul>
<li><a href="http://incident57.com/less/" class="autolink" rel="nofollow noopener" target="_blank">http://incident57.com/less/</a></li>
<li><a href="http://havelog.ayumusato.com/computer/software/e218-less_better_css.html" rel="nofollow noopener" target="_blank">Sassよりラクチン，LESS.appで簡単CSSコンパイル生活！（Mac限定） ::ハブろぐ</a></li>
</ul>

<h3>
<span id="twitter-bootstrap" class="fragment"></span><a href="#twitter-bootstrap"><i class="fa fa-link"></i></a>Twitter Bootstrap</h3>

<p>自分はプログラムに集中したい、でも見た目もそれなりになってたほうがいい、というときにはTwitter Bootstrapでテンプレートをサクっと作っておくといいかもです。</p>

<ul>
<li><a href="http://twitter.github.com/bootstrap/" class="autolink" rel="nofollow noopener" target="_blank">http://twitter.github.com/bootstrap/</a></li>
<li><a href="http://www.ideaxidea.com/archives/2012/02/twitter_bootstrap_v2.html" rel="nofollow noopener" target="_blank">Twitter Bootstrapが大幅バージョンアップ！して凄まじいことに・・・ | IDEA*IDEA</a></li>
</ul>

<h3>
<span id="zen-coding" class="fragment"></span><a href="#zen-coding"><i class="fa fa-link"></i></a>zen-coding</h3>

<p>HTML/CSSの入力支援。IDEがサポートしてたり、エディタにプラグインで組み込めたりする。</p>

<ul>
<li><a href="https://github.com/sergeche/zen-coding" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/sergeche/zen-coding</a></li>
</ul>

<hr>

<h1>
<span id="テスト" class="fragment"></span><a href="#%E3%83%86%E3%82%B9%E3%83%88"><i class="fa fa-link"></i></a>テスト</h1>

<h3>
<span id="xunit-系" class="fragment"></span><a href="#xunit-%E7%B3%BB"><i class="fa fa-link"></i></a>xUnit 系</h3>

<p><a href="http://xunitpatterns.com/" rel="nofollow noopener" target="_blank">XUnitTestPatterns</a> とか読んでおくとどの言語の xUnit 系テストフレームワークへの理解が進む</p>

<h3>
<span id="xspec-系" class="fragment"></span><a href="#xspec-%E7%B3%BB"><i class="fa fa-link"></i></a>xSpec 系</h3>

<p>JBehave とか RSpec とか. PHP には無い．<a href="http://en.wikipedia.org/wiki/Behavior_Driven_Development" rel="nofollow noopener" target="_blank">Wikipedia英語版のBDDのページ</a>がわかりやすい</p>

<h3>
<span id="quickcheck-系" class="fragment"></span><a href="#quickcheck-%E7%B3%BB"><i class="fa fa-link"></i></a>QuickCheck 系</h3>

<p>プログラム仕様そのものを記述し，ランダムな引数を与えて検証するテストフレームワーク．<br>
オリジナルは Haskell からだが，<a href="http://en.wikipedia.org/wiki/QuickCheck" rel="nofollow noopener" target="_blank">メジャーな言語ではけっこう既に実装されている</a>．<br>
Haskell 以外の言語で意欲的に実装を開発している<a href="http://www.yellosoft.us/quickcheck" rel="nofollow noopener" target="_blank">YelloSoftのページ</a> がわかりやすいかと</p>

<hr>

<h1>
<span id="ネットワーク" class="fragment"></span><a href="#%E3%83%8D%E3%83%83%E3%83%88%E3%83%AF%E3%83%BC%E3%82%AF"><i class="fa fa-link"></i></a>ネットワーク</h1>

<h3>
<span id="hoster" class="fragment"></span><a href="#hoster"><i class="fa fa-link"></i></a>Hoster</h3>

<p>hostsファイルをGUIで設定するアプリ。</p>

<ul>
<li><a href="http://www.redwinder.com/macapp/hoster/" class="autolink" rel="nofollow noopener" target="_blank">http://www.redwinder.com/macapp/hoster/</a></li>
</ul>

<h3>
<span id="wireshark" class="fragment"></span><a href="#wireshark"><i class="fa fa-link"></i></a>wireshark</h3>

<p>あと wireshark, tshark は使い方覚えると超強力ですよ。</p>

<ul>
<li><a href="http://www.wireshark.org/" class="autolink" rel="nofollow noopener" target="_blank">http://www.wireshark.org/</a></li>
<li><a href="http://www.itbook.info/study/wireshark1.html" rel="nofollow noopener" target="_blank">パケットキャプチャツール「Wireshark」 - Wiresharkって？ - ネットワークエンジニアを目指して</a></li>
<li><a href="http://homepage2.nifty.com/protocol/tshark/index.html" rel="nofollow noopener" target="_blank">Tshark（キャプチャツール）</a></li>
</ul>

<h3>
<span id="http-client" class="fragment"></span><a href="#http-client"><i class="fa fa-link"></i></a>HTTP Client</h3>

<ul>
<li><a href="http://ditchnet.org/httpclient/" class="autolink" rel="nofollow noopener" target="_blank">http://ditchnet.org/httpclient/</a></li>
<li><a href="http://www.moongift.jp/2008/12/http_client/" rel="nofollow noopener" target="_blank">Mac OSXのWeb開発のお供に「HTTP Client」 - MOONGIFT</a></li>
</ul>

<h3>
<span id="mocksmtp" class="fragment"></span><a href="#mocksmtp"><i class="fa fa-link"></i></a>MockSMTP</h3>

<p>仮想ローカルSMTP。ネットに繋がっていなくてもSMTPの挙動がチェックできる</p>

<hr>

<h1>
<span id="ftp-ssh-scp" class="fragment"></span><a href="#ftp-ssh-scp"><i class="fa fa-link"></i></a>FTP, SSH, SCP</h1>

<h3>
<span id="sshconfig-sshまわりの設定をまとめておくと大変便利" class="fragment"></span><a href="#sshconfig-ssh%E3%81%BE%E3%82%8F%E3%82%8A%E3%81%AE%E8%A8%AD%E5%AE%9A%E3%82%92%E3%81%BE%E3%81%A8%E3%82%81%E3%81%A6%E3%81%8A%E3%81%8F%E3%81%A8%E5%A4%A7%E5%A4%89%E4%BE%BF%E5%88%A9"><i class="fa fa-link"></i></a>~/.ssh/config: SSHまわりの設定をまとめておくと大変便利</h3>

<ul>
<li><a href="http://d.hatena.ne.jp/superbrothers/20090730/1248971671" rel="nofollow noopener" target="_blank">~/.ssh/config で簡単に複数ホストへのSSH接続を管理する - すぱぶらの日記</a></li>
</ul>

<h3>
<span id="putty" class="fragment"></span><a href="#putty"><i class="fa fa-link"></i></a>PuTTY</h3>

<p>WindowsのSSHは PuTTY 派なんですが、人にすすめるのは Poderosa ですね。</p>

<ul>
<li><a href="http://yebisuya.dip.jp/Software/PuTTY/" class="autolink" rel="nofollow noopener" target="_blank">http://yebisuya.dip.jp/Software/PuTTY/</a></li>
</ul>

<h3>
<span id="poderosa" class="fragment"></span><a href="#poderosa"><i class="fa fa-link"></i></a>Poderosa</h3>

<p>WindowsのSSHは PuTTY 派なんですが、人にすすめるのは Poderosa ですね。</p>

<ul>
<li><a href="http://ja.poderosa.org/" class="autolink" rel="nofollow noopener" target="_blank">http://ja.poderosa.org/</a></li>
</ul>

<h3>
<span id="clusterssh" class="fragment"></span><a href="#clusterssh"><i class="fa fa-link"></i></a>ClusterSSH</h3>

<ul>
<li><a href="http://sourceforge.net/projects/clusterssh/" class="autolink" rel="nofollow noopener" target="_blank">http://sourceforge.net/projects/clusterssh/</a></li>
<li><a href="http://blog.livedoor.jp/hakin/archives/51564707.html" rel="nofollow noopener" target="_blank">しげふみメモ : Cluster SSHで複数ホストでコマンド同時実行</a></li>
</ul>

<h3>
<span id="transmit" class="fragment"></span><a href="#transmit"><i class="fa fa-link"></i></a>Transmit</h3>

<p>リモート上のファイルをダブルクリックでローカルに保存→開く、ファイル保存→自動的にアップロード なんてのが出来て、ちょっとした開発には結構便利。あと、接続先のディレクトリをFinderにマウント出来る恐怖の機能とかも。もちろんssh等にも対応。</p>

<hr>

<h1>
<span id="grep" class="fragment"></span><a href="#grep"><i class="fa fa-link"></i></a>grep</h1>

<h3>
<span id="rak" class="fragment"></span><a href="#rak"><i class="fa fa-link"></i></a>rak</h3>

<p>Ruby系のツールの rak コマンド。grep検索ツールです。</p>

<ul>
<li><a href="http://d.hatena.ne.jp/Seasons/20090615/1245091432" rel="nofollow noopener" target="_blank">コードスニペットを検索するのにとても便利な「rak」のご紹介 - Seasons.NET</a></li>
</ul>

<h3>
<span id="ack" class="fragment"></span><a href="#ack"><i class="fa fa-link"></i></a>ack</h3>

<p>better than grep</p>

<ul>
<li><a href="http://betterthangrep.com/" class="autolink" rel="nofollow noopener" target="_blank">http://betterthangrep.com/</a></li>
</ul>

<h3>
<span id="jvgrep" class="fragment"></span><a href="#jvgrep"><i class="fa fa-link"></i></a>jvgrep</h3>

<p>手前味噌ですがgrepでjvgrep。go言語で書かれているのでlinuxでもwindowsでも同じ動作。<br>
日本語のエンコーディングはだいたいサポートしてるので、いろんなエンコーディングのファイルが混じった時のgrepや、通称駄目文字を含んだ正規表現でも正しく動きます。</p>

<h3>
<span id="tips" class="fragment"></span><a href="#tips"><i class="fa fa-link"></i></a>Tips</h3>

<p><code>export GREP_OPTIONS='--color=auto'</code><br>
でfgrep/egrep/grepしたときにマッチしたとき単語がカラフルにハイライト表示されるようになる</p>

<p>grep/fgrep/egrepの-oオプション。マッチした単語のみ抽出出来る、これはワンライナー書くときに使える。egrepは拡張正規表現なのでPerlとかRubyみたいに便利な正規表現使える。fgrepは固定文字列検索するときに早い<br>
詳細: <a href="http://d.hatena.ne.jp/lurker/20070131/1170201200" rel="nofollow noopener" target="_blank">単語抽出するちょっとしたテクニック - 技術メモ帳</a></p>

<hr>

<h1>
<span id="統計処理" class="fragment"></span><a href="#%E7%B5%B1%E8%A8%88%E5%87%A6%E7%90%86"><i class="fa fa-link"></i></a>統計処理</h1>

<p>数万件程度のちょっとしたログをさくっと処理したい時に便利<br>
中央値、標準偏差なんかも一発で出せる。データを元にヒストグラム、3Dのグラフ描画とかも</p>

<h3>
<span id="r" class="fragment"></span><a href="#r"><i class="fa fa-link"></i></a>R</h3>

<ul>
<li><a href="http://www.r-project.org/" class="autolink" rel="nofollow noopener" target="_blank">http://www.r-project.org/</a></li>
</ul>

<h3>
<span id="octave" class="fragment"></span><a href="#octave"><i class="fa fa-link"></i></a>Octave</h3>

<ul>
<li><a href="http://www.gnu.org/software/octave/" class="autolink" rel="nofollow noopener" target="_blank">http://www.gnu.org/software/octave/</a></li>
</ul>

<hr>

<h1>
<span id="ターミナル" class="fragment"></span><a href="#%E3%82%BF%E3%83%BC%E3%83%9F%E3%83%8A%E3%83%AB"><i class="fa fa-link"></i></a>ターミナル</h1>

<h3>
<span id="totalterminal" class="fragment"></span><a href="#totalterminal"><i class="fa fa-link"></i></a>TotalTerminal</h3>

<p>Macのターミナルをショートカットキーですぐに呼び出せます。</p>

<ul>
<li><a href="http://totalterminal.binaryage.com/" class="autolink" rel="nofollow noopener" target="_blank">http://totalterminal.binaryage.com/</a></li>
<li><a href="http://veadardiary.blog29.fc2.com/blog-entry-3377.html" rel="nofollow noopener" target="_blank">ホットキーでターミナルを呼び出す『TotalTerminal』 | Macの手書き説明書</a></li>
</ul>

<h3>
<span id="iterm2" class="fragment"></span><a href="#iterm2"><i class="fa fa-link"></i></a>iTerm2</h3>

<ul>
<li><a href="http://www.iterm2.com/#/section/home" class="autolink" rel="nofollow noopener" target="_blank">http://www.iterm2.com/#/section/home</a></li>
<li><a href="http://www.lifehacker.jp/2011/11/111116maciterm2.html" rel="nofollow noopener" target="_blank">米LH編集部のイチオシのMacのターミナルエミュレータは『iTerm2』 : ライフハッカー［日本版］</a></li>
</ul>

<h3>
<span id="percol" class="fragment"></span><a href="#percol"><i class="fa fa-link"></i></a>percol</h3>

<p>percol がターミナルで使える汎用的で便利なツールです。どう使うかでこちらの知識/センスが試されている気分になります。</p>

<ul>
<li><a href="https://github.com/mooz/percol" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/mooz/percol</a></li>
</ul>

<hr>

<h1>
<span id="subversion" class="fragment"></span><a href="#subversion"><i class="fa fa-link"></i></a>Subversion</h1>

<h3>
<span id="cornerstone" class="fragment"></span><a href="#cornerstone"><i class="fa fa-link"></i></a>Cornerstone</h3>

<p>SVNクライアント。</p>

<h3>
<span id="versions" class="fragment"></span><a href="#versions"><i class="fa fa-link"></i></a>Versions</h3>

<p>SVNクライアント。</p>

<hr>

<h1>
<span id="git" class="fragment"></span><a href="#git"><i class="fa fa-link"></i></a>git</h1>

<h3>
<span id="smartgit-windows" class="fragment"></span><a href="#smartgit-windows"><i class="fa fa-link"></i></a>SmartGit (Windows)</h3>

<p>Git クライアント</p>

<ul>
<li><a href="http://www.syntevo.com/smartgit/index.html" class="autolink" rel="nofollow noopener" target="_blank">http://www.syntevo.com/smartgit/index.html</a></li>
</ul>

<h3>
<span id="sourcetree" class="fragment"></span><a href="#sourcetree"><i class="fa fa-link"></i></a>SourceTree</h3>

<p>Git クライアント</p>

<ul>
<li><a href="http://www.sourcetreeapp.com/" class="autolink" rel="nofollow noopener" target="_blank">http://www.sourcetreeapp.com/</a></li>
</ul>

<h3>
<span id="github" class="fragment"></span><a href="#github"><i class="fa fa-link"></i></a>GitHub</h3>

<p>自分の書いたソースコードを公開。</p>

<ul>
<li><a href="https://github.com/" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/</a></li>
<li><a href="http://d.hatena.ne.jp/keita_yamaguchi/20080409/1207752188" rel="nofollow noopener" target="_blank">とっても優しい github の使い方 - ￢￢日常日記</a></li>
</ul>

<h3>
<span id="tig" class="fragment"></span><a href="#tig"><i class="fa fa-link"></i></a>tig</h3>

<p>git使うならtigが無いと生きていけない。</p>

<ul>
<li><a href="http://subtech.g.hatena.ne.jp/secondlife/20101114/1289736508" rel="nofollow noopener" target="_blank">コンソールから使える git ブラウザ、tig が超便利 - #生存戦略 、それは - subtech</a></li>
</ul>

<h3>
<span id="gitx" class="fragment"></span><a href="#gitx"><i class="fa fa-link"></i></a>GitX</h3>

<ul>
<li><a href="http://gitx.frim.nl/" class="autolink" rel="nofollow noopener" target="_blank">http://gitx.frim.nl/</a></li>
<li><a href="http://d.hatena.ne.jp/kwatch/20081021/1224608591" rel="nofollow noopener" target="_blank">Git リポジトリを視覚化するツール「GitX」 - kなんとかの日記</a></li>
</ul>

<h3>
<span id="tower" class="fragment"></span><a href="#tower"><i class="fa fa-link"></i></a>Tower</h3>

<ul>
<li><a href="http://www.git-tower.com/" class="autolink" rel="nofollow noopener" target="_blank">http://www.git-tower.com/</a></li>
</ul>

<h3>
<span id="github-for-mac" class="fragment"></span><a href="#github-for-mac"><i class="fa fa-link"></i></a>github for mac</h3>

<ul>
<li><a href="http://mac.github.com/" class="autolink" rel="nofollow noopener" target="_blank">http://mac.github.com/</a></li>
</ul>

<hr>

<h1>
<span id="ブラウザ" class="fragment"></span><a href="#%E3%83%96%E3%83%A9%E3%82%A6%E3%82%B6"><i class="fa fa-link"></i></a>ブラウザ</h1>

<h3>
<span id="srware-iron" class="fragment"></span><a href="#srware-iron"><i class="fa fa-link"></i></a>SRWare Iron</h3>

<p>UserAgentが変えられるChrome的な使い方をしてます</p>

<hr>

<h1>
<span id="パッケージ管理" class="fragment"></span><a href="#%E3%83%91%E3%83%83%E3%82%B1%E3%83%BC%E3%82%B8%E7%AE%A1%E7%90%86"><i class="fa fa-link"></i></a>パッケージ管理</h1>

<h3>
<span id="macports" class="fragment"></span><a href="#macports"><i class="fa fa-link"></i></a>MacPorts</h3>

<p>フリー。パッケージ管理ツール。コンパイルに時間かかるけど昔から使ってるから手放せないツール。</p>

<h3>
<span id="homebrew" class="fragment"></span><a href="#homebrew"><i class="fa fa-link"></i></a>Homebrew</h3>

<p>UNIXのコマンドなどをサクっと入れられます。</p>

<ul>
<li><a href="http://mxcl.github.com/homebrew/" class="autolink" rel="nofollow noopener" target="_blank">http://mxcl.github.com/homebrew/</a></li>
<li><a href="http://tukaikta.blog135.fc2.com/blog-entry-183.html" rel="nofollow noopener" target="_blank">MacPortsより使いやすい！？パッケージ管理システムHomebrewの使い方 | Macとかの雑記帳</a></li>
</ul>

<hr>

<h1>
<span id="その他開発関係ツール" class="fragment"></span><a href="#%E3%81%9D%E3%81%AE%E4%BB%96%E9%96%8B%E7%99%BA%E9%96%A2%E4%BF%82%E3%83%84%E3%83%BC%E3%83%AB"><i class="fa fa-link"></i></a>その他開発関係ツール</h1>

<h3>
<span id="codekit" class="fragment"></span><a href="#codekit"><i class="fa fa-link"></i></a>codekit</h3>

<p>CodeKit automatically compiles Less, Sass, Stylus, CoffeeScript &amp; Haml files.</p>

<ul>
<li><a href="http://incident57.com/codekit/" class="autolink" rel="nofollow noopener" target="_blank">http://incident57.com/codekit/</a></li>
<li><a href="http://blog.h2o-space.com/post/12365214600" rel="nofollow noopener" target="_blank">H2O Blog., 新世代Web構築には必須になりそうな『CodeKit』</a></li>
</ul>

<h3>
<span id="pandoc" class="fragment"></span><a href="#pandoc"><i class="fa fa-link"></i></a>pandoc</h3>

<p>書き溜めたmarkdownメモを<br>
ドキュメントつくるときにpandoc使ってhtml化してる</p>

<ul>
<li><a href="http://johnmacfarlane.net/pandoc/" class="autolink" rel="nofollow noopener" target="_blank">http://johnmacfarlane.net/pandoc/</a></li>
<li><a href="http://www.moongift.jp/2007/12/pandoc/" rel="nofollow noopener" target="_blank">Markdown/HTML/LaTexを相互変換「Pandoc」 - MOONGIFT</a></li>
</ul>

<h3>
<span id="integrity" class="fragment"></span><a href="#integrity"><i class="fa fa-link"></i></a>Integrity</h3>

<p>高速リンクチェッカー。デプロイ前の必須アイテム</p>

<ul>
<li><a href="http://peacockmedia.co.uk/integrity/" class="autolink" rel="nofollow noopener" target="_blank">http://peacockmedia.co.uk/integrity/</a></li>
<li><a href="http://www.kotalog.net/archives/2566" rel="nofollow noopener" target="_blank">MacでWebサイトのリンク切れをチェックできるアプリケーション『Integrity』 | kotaログ</a></li>
</ul>

<h3>
<span id="omnigraffle" class="fragment"></span><a href="#omnigraffle"><i class="fa fa-link"></i></a>Omnigraffle</h3>

<p>シェア。ドキュメント作成ツール。これで仕様書を作るとめちゃくちゃ捗る。</p>

<h3>
<span id="osx-gcc-installer" class="fragment"></span><a href="#osx-gcc-installer"><i class="fa fa-link"></i></a>osx-gcc-installer</h3>

<p>Macで「xcodeは要らないけど、gccだけ欲しいわー」ってなったときに死ぬほど有り難いツール。とりあえずWatchかブクマ。</p>

<ul>
<li><a href="https://github.com/kennethreitz/osx-gcc-installer" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/kennethreitz/osx-gcc-installer</a></li>
</ul>

<h3>
<span id="vmware--gentoo-or-ubuntu-debian-etc" class="fragment"></span><a href="#vmware--gentoo-or-ubuntu-debian-etc"><i class="fa fa-link"></i></a>VMware + Gentoo (or Ubuntu, Debian, etc)</h3>

<h3>
<span id="imageoptim" class="fragment"></span><a href="#imageoptim"><i class="fa fa-link"></i></a>ImageOptim</h3>

<p>画像ファイルを軽量化</p>

<h3>
<span id="htmlサーバとしてのdropbox" class="fragment"></span><a href="#html%E3%82%B5%E3%83%BC%E3%83%90%E3%81%A8%E3%81%97%E3%81%A6%E3%81%AEdropbox"><i class="fa fa-link"></i></a>HTMLサーバとしてのDropbox</h3>

<p>HTML+CSS+JSをグローバルアクセスからデバッグしようと思ったら、結局DropboxのPublicフォルダが一番簡単なことに気がつきました（スマフォ向けサイトとかね）。</p>

<hr>

<h1>
<span id="その他作業効率化関係ツール" class="fragment"></span><a href="#%E3%81%9D%E3%81%AE%E4%BB%96%E4%BD%9C%E6%A5%AD%E5%8A%B9%E7%8E%87%E5%8C%96%E9%96%A2%E4%BF%82%E3%83%84%E3%83%BC%E3%83%AB"><i class="fa fa-link"></i></a>その他作業効率化関係ツール</h1>

<h3>
<span id="caffeine" class="fragment"></span><a href="#caffeine"><i class="fa fa-link"></i></a>Caffeine</h3>

<ul>
<li><a href="http://lightheadsw.com/caffeine/" class="autolink" rel="nofollow noopener" target="_blank">http://lightheadsw.com/caffeine/</a></li>
<li><a href="http://moongift.jp/2007/10/caffeine/" rel="nofollow noopener" target="_blank">Mac OSXのスリープ防止に「Caffeine」 - MOONGIFT</a></li>
</ul>

<h3>
<span id="bettertouchtool" class="fragment"></span><a href="#bettertouchtool"><i class="fa fa-link"></i></a>BetterTouchTool</h3>

<ul>
<li><a href="http://blog.boastr.net/" class="autolink" rel="nofollow noopener" target="_blank">http://blog.boastr.net/</a></li>
<li><a href="http://d.hatena.ne.jp/RyoAnna/20110731/1312100591" rel="nofollow noopener" target="_blank">Macのトラックパッド操作を快適にするBetterTouchToolの設定 - #RyoAnnaBlog</a></li>
</ul>

<h3>
<span id="clipmenu" class="fragment"></span><a href="#clipmenu"><i class="fa fa-link"></i></a>ClipMenu</h3>

<ul>
<li><a href="http://www.clipmenu.com/ja/" class="autolink" rel="nofollow noopener" target="_blank">http://www.clipmenu.com/ja/</a></li>
<li><a href="http://www.moongift.jp/2010/01/clipmenu/" rel="nofollow noopener" target="_blank">クリップボードを履歴管理する「ClipMenu」 - MOONGIFT</a></li>
</ul>

<h3>
<span id="limechat-for-mac-osx" class="fragment"></span><a href="#limechat-for-mac-osx"><i class="fa fa-link"></i></a>Limechat for mac osx</h3>

<p>Preferences -&gt; Log -&gt; Show image links in inlineを有効にすると<br>
ユーザー名に対応した画像をTwitterから引っ張ってきてインラインで展開してくれる。<br>
もちろん間違ってるプロフィール画像が展開されることもあるけど、有名人多いIRCとかだとだいたいあってる。</p>

<ul>
<li><a href="http://limechat.net/mac/ja.html" class="autolink" rel="nofollow noopener" target="_blank">http://limechat.net/mac/ja.html</a></li>
<li><a href="http://veadardiary.blog29.fc2.com/blog-entry-2672.html" rel="nofollow noopener" target="_blank">軽くてシンプルなIRCクライアント『LimeChat』 | Macの手書き説明書</a></li>
</ul>

<h3>
<span id="quicksilver" class="fragment"></span><a href="#quicksilver"><i class="fa fa-link"></i></a>QuickSilver</h3>

<p>Quicksilverは、アプリケーションの立ち上げ、コンピューター・ファイルの操作、e-mailの下書きと送信といった作業を、キーボードにより、手早く処理できる。</p>

<ul>
<li><a href="http://www.blacktree.com/" class="autolink" rel="nofollow noopener" target="_blank">http://www.blacktree.com/</a></li>
<li><a href="http://ja.wikipedia.org/wiki/Quicksilver" class="autolink" rel="nofollow noopener" target="_blank">http://ja.wikipedia.org/wiki/Quicksilver</a></li>
</ul>

<h3>
<span id="quix" class="fragment"></span><a href="#quix"><i class="fa fa-link"></i></a>Quix</h3>

<p>quix便利やけど使ってる人見たことない</p>

<ul>
<li><a href="http://www.quixapp.com/" class="autolink" rel="nofollow noopener" target="_blank">http://www.quixapp.com/</a></li>
<li><a href="http://kachibito.net/web-service/quix.html" rel="nofollow noopener" target="_blank">ライフハッカーお勧めの多機能ブックマークレットQuixを試したら本当に便利だった - かちびと. net</a></li>
</ul>

<h3>
<span id="skitch" class="fragment"></span><a href="#skitch"><i class="fa fa-link"></i></a>Skitch</h3>

<ul>
<li><a href="http://skitch.com/jp/" class="autolink" rel="nofollow noopener" target="_blank">http://skitch.com/jp/</a></li>
<li><a href="http://bloggingfrom.tv/wp/2010/05/05/3668" rel="nofollow noopener" target="_blank">Macのキャプチャ・編集ソフト「Skitch」が大変便利 - カイ士伝</a></li>
</ul>

<h3>
<span id="lingon" class="fragment"></span><a href="#lingon"><i class="fa fa-link"></i></a>Lingon</h3>

<p>フリーorシェア。自動起動の管理ツール。OSXの自動起動プログラムを視覚的に編集したりできる。</p>

<ul>
<li><a href="http://www.peterborgapps.com/lingon/" class="autolink" rel="nofollow noopener" target="_blank">http://www.peterborgapps.com/lingon/</a></li>
<li><a href="http://www.moongift.jp/2008/04/lingon/" rel="nofollow noopener" target="_blank">launchdの設定をGUIで編集「Lingon」 - MOONGIFT</a></li>
</ul>

<h3>
<span id="growl" class="fragment"></span><a href="#growl"><i class="fa fa-link"></i></a>Growl</h3>

<p>基本的なところでMacだとGrowl</p>

<h3>
<span id="alfred" class="fragment"></span><a href="#alfred"><i class="fa fa-link"></i></a>Alfred</h3>

<p>QuickSilverみたいなfuzzyな文字列による、アプリケーション検索 &amp; 実行ランチャ。QuickSilverよりも良いのは、マッチするアプリケーションがなかったときはGoogleで検索してくれること。</p>

<h3>
<span id="reeder" class="fragment"></span><a href="#reeder"><i class="fa fa-link"></i></a>Reeder</h3>

<p>RSSリーダーは Reeder がおすすめ。</p>

<ul>
<li><a href="http://reederapp.com/mac/" class="autolink" rel="nofollow noopener" target="_blank">http://reederapp.com/mac/</a></li>
</ul>

<h3>
<span id="cinch" class="fragment"></span><a href="#cinch"><i class="fa fa-link"></i></a>Cinch</h3>

<p>Macで簡単に画面2分割（Win7のあれ）をやってくれるツール。同僚に教えてもらってアディクトしてしまった。</p>

<ul>
<li><a href="http://www.irradiatedsoftware.com/cinch/" class="autolink" rel="nofollow noopener" target="_blank">http://www.irradiatedsoftware.com/cinch/</a></li>
</ul>

<h3>
<span id="fluid" class="fragment"></span><a href="#fluid"><i class="fa fa-link"></i></a>Fluid</h3>

<p>Webアプリを簡単にローカルアプリ化出来るヤツ。Webアプリで簡単に開発して、クライアントをブラウザにしなくなかったり、常駐させたいときに便利。</p>

<h3>
<span id="divvy" class="fragment"></span><a href="#divvy"><i class="fa fa-link"></i></a>DIVVY</h3>

<p>画面をショートカットキー1発で分割できる</p>

<h3>
<span id="a-better-finder-rename" class="fragment"></span><a href="#a-better-finder-rename"><i class="fa fa-link"></i></a>A Better Finder Rename</h3>

<p>バッチリネームが超絶簡単</p>

<h3>
<span id="skim" class="fragment"></span><a href="#skim"><i class="fa fa-link"></i></a>Skim</h3>

<p>軽量PDFリーダ。Adobe Acrobatよりも気持ちいい</p>

<h3>
<span id="bean" class="fragment"></span><a href="#bean"><i class="fa fa-link"></i></a>Bean</h3>

<p>Microsoft Wordよりも快適</p>

<hr>

<h1>
<span id="unixlinuxmacコマンド" class="fragment"></span><a href="#unixlinuxmac%E3%82%B3%E3%83%9E%E3%83%B3%E3%83%89"><i class="fa fa-link"></i></a>Unix/Linux/Macコマンド</h1>

<ul>
<li>gdb</li>
<li>lv</li>
<li>xargs</li>
<li>iotop</li>
<li>htop</li>
<li>iperf</li>
<li>htop</li>
<li>zsh</li>
<li>tree</li>
<li>make</li>
<li>bison</li>
<li>awk</li>
</ul>

<hr>

<ul>
<li>screen</li>
<li>byobu</li>
<li>tmux</li>
</ul>

<blockquote>
<p>これはサーバで長時間かかる作業を不安定な回線などで行うときに特に役立ちます。</p>
</blockquote>

<p>　</p>

<blockquote>
<p>screenは手軽にプロセスを長生きさせるのに便利です。<br>
sshで接続して何かしらの時間がかかるプロセスを実行しても、接続切ったらプロセスもカーネルに殺されてしまう。<br>
そこでscreenの中でプロセスを起動して、screenをデタッチしとくと、そのプロセスを生き長らえさせることができます。</p>
</blockquote>

<p>　</p>

<blockquote>
<p>最初にありがたいと思ったのはサーバー上で長い事作業する時<br>
通信がぶちっと切れてもscreenのプロセス自体は生き残るので、再度サーバーに接続して<br>
残ってるscreenのプロセスにアタッチすれば作業が即再開できる。<br>
vimの作業状態なんかもそのまま残っている<br>
byobuというのはscreenがいい感じにカスタマイズされた奴</p>
</blockquote>

<p>　</p>

<blockquote>
<p>screenは最近tmuxに置き換えました。まだ使いこなしてないけど。</p>
</blockquote>

<p>　</p>

<blockquote>
<p>screen/tmux がとっつきにくいという向けにはbyobu がお勧めです．<br>
とりあえず困らない設定になっています．</p>

<p>後は以下に沢山のtips が<br>
"ターミナルマルチプレクサ Advent Calendar 2011 : ATND" <a href="http://atnd.org/events/22320" class="autolink" rel="nofollow noopener" target="_blank">http://atnd.org/events/22320</a></p>
</blockquote>

<p>　</p>

<blockquote>
<p>ネイティブのバイナリ関連なら、od,file,nm,strings,strace,varglind</p>
</blockquote>

<p>　</p>

<blockquote>
<p>あと個人的にはvim/zsh/screen。この3つはどんな環境でも必ず入れる</p>
</blockquote>

<p>　</p>

<blockquote>
<p>find ./ -name *.php | xargs grep hoge とかはよく使いますね。Windowsは秀丸のgrepが強力です。</p>
</blockquote>

<h3>
<span id="git-よく使うコマンドとオプション-コマンド小ネタ-シェル小ネタ" class="fragment"></span><a href="#git-%E3%82%88%E3%81%8F%E4%BD%BF%E3%81%86%E3%82%B3%E3%83%9E%E3%83%B3%E3%83%89%E3%81%A8%E3%82%AA%E3%83%97%E3%82%B7%E3%83%A7%E3%83%B3-%E3%82%B3%E3%83%9E%E3%83%B3%E3%83%89%E5%B0%8F%E3%83%8D%E3%82%BF-%E3%82%B7%E3%82%A7%E3%83%AB%E5%B0%8F%E3%83%8D%E3%82%BF"><i class="fa fa-link"></i></a>git, よく使うコマンドとオプション, コマンド小ネタ, シェル小ネタ</h3>

<p><a href="http://qiita.com/items/2047#comment-2182" class="autolink">http://qiita.com/items/2047#comment-2182</a></p>

<h3>
<span id="寒い日にcpuが発熱してあったかくなるコマンド" class="fragment"></span><a href="#%E5%AF%92%E3%81%84%E6%97%A5%E3%81%ABcpu%E3%81%8C%E7%99%BA%E7%86%B1%E3%81%97%E3%81%A6%E3%81%82%E3%81%A3%E3%81%9F%E3%81%8B%E3%81%8F%E3%81%AA%E3%82%8B%E3%82%B3%E3%83%9E%E3%83%B3%E3%83%89"><i class="fa fa-link"></i></a>寒い日にCPUが発熱してあったかくなるコマンド</h3>

<p>寒い日は充電中のMacBook上で<code>ruby -r digest/sha1 -e 'loop{Digest::SHA1.hexdigest(Time.now.to_f.to_s)}'</code><br>
とかしてしばらく放置すると勝手にCPUが発熱してあったかくなる</p>

<hr>

<h1>
<span id="ウェブサービス" class="fragment"></span><a href="#%E3%82%A6%E3%82%A7%E3%83%96%E3%82%B5%E3%83%BC%E3%83%93%E3%82%B9"><i class="fa fa-link"></i></a>ウェブサービス</h1>

<h3>
<span id="qiita" class="fragment"></span><a href="#qiita"><i class="fa fa-link"></i></a>Qiita</h3>

<p>ここ</p>

<ul>
<li><a href="http://qiita.com/" class="autolink">http://qiita.com/</a></li>
</ul>

<h1>
<span id="未分類" class="fragment"></span><a href="#%E6%9C%AA%E5%88%86%E9%A1%9E"><i class="fa fa-link"></i></a>未分類</h1>

<h3>
<span id="mscgen" class="fragment"></span><a href="#mscgen"><i class="fa fa-link"></i></a>mscgen</h3>

<p>シーケンス図を書くのであればmscgenをお勧めします。<br>
日本語もフォントを指定すれば問題なくうごきます。</p>

<ul>
<li><a href="http://www.mcternan.me.uk/mscgen/" class="autolink" rel="nofollow noopener" target="_blank">http://www.mcternan.me.uk/mscgen/</a></li>
</ul>

<h3>
<span id="cheat" class="fragment"></span><a href="#cheat"><i class="fa fa-link"></i></a>cheat</h3>

<ul>
<li><a href="https://github.com/defunkt/cheat" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/defunkt/cheat</a></li>
</ul>

<h3>
<span id="yuml" class="fragment"></span><a href="#yuml"><i class="fa fa-link"></i></a>yUML</h3>

<p>UMLを描いて出力できるWebサービスです。ユニークなURLが発行されるのでブログに貼り付けたり出来ます</p>

<p>クラス図 / アクティビティ図 / ユースケース図</p>

<ul>
<li><a href="http://yuml.me/" class="autolink" rel="nofollow noopener" target="_blank">http://yuml.me/</a></li>
</ul>

<h3>
<span id="websequencediagramscom" class="fragment"></span><a href="#websequencediagramscom"><i class="fa fa-link"></i></a>WebSequenceDiagrams.com</h3>

<p>UMLを描いて出力できるWebサービスです。ユニークなURLが発行されるのでブログに貼り付けたり出来ます</p>

<p>シーケンス図</p>

<p><a href="http://www.websequencediagrams.com/" class="autolink" rel="nofollow noopener" target="_blank">http://www.websequencediagrams.com/</a></p>

<h3>
<span id="cacoo" class="fragment"></span><a href="#cacoo"><i class="fa fa-link"></i></a>Cacoo</h3>

<h3>
<span id="applek-for-vmware" class="fragment"></span><a href="#applek-for-vmware"><i class="fa fa-link"></i></a>AppleK for VMware</h3>

<p>Macで仮想マシン上のWindowsを使う場合にキー操作がMacと同じになるように設定してくれるアプリ。有料だけどVM上での作業効率が大きく上がるのでおすすめ。</p>

<ul>
<li>VMWare用
<a href="http://www.trinityworks.co.jp/software/AppleKforVMware3/index.php" class="autolink" rel="nofollow noopener" target="_blank">http://www.trinityworks.co.jp/software/AppleKforVMware3/index.php</a>
</li>
<li>Parallels用
<a href="http://www.trinityworks.co.jp/software/AppleKforParallels3/index.php" class="autolink" rel="nofollow noopener" target="_blank">http://www.trinityworks.co.jp/software/AppleKforParallels3/index.php</a>
</li>
</ul>

<h3>
<span id="keyremap4macbook" class="fragment"></span><a href="#keyremap4macbook"><i class="fa fa-link"></i></a>KeyRemap4Macbook</h3>

<p>なぜかまだ挙げられていないKeyRemap4Macbook。キー割り当てを自在にカスタマイズできる他、キーリピートやキーウェイトを標準仕様より高速化できる。Mac使いのプログラマにとっては定番のアプリ<br>
<a href="http://pqrs.org/macosx/keyremap4macbook/index.html.ja" class="autolink" rel="nofollow noopener" target="_blank">http://pqrs.org/macosx/keyremap4macbook/index.html.ja</a></p>

<h3>
<span id="bitnami" class="fragment"></span><a href="#bitnami"><i class="fa fa-link"></i></a>BitNami</h3>

<p>様々なOSSプラットフォーム/アプリをインストーラを使って簡単に導入し試すことの出来るソフト<br>
<a href="http://bitnami.org/stacks" class="autolink" rel="nofollow noopener" target="_blank">http://bitnami.org/stacks</a></p>

<h3>
<span id="ampps" class="fragment"></span><a href="#ampps"><i class="fa fa-link"></i></a>AMPPS</h3>

<p>様々なOSSプラットフォーム/アプリをインストーラを使って簡単に導入し試すことの出来るソフト<br>
<a href="http://www.ampps.com/" class="autolink" rel="nofollow noopener" target="_blank">http://www.ampps.com/</a></p>

<h3>
<span id="tekico" class="fragment"></span><a href="#tekico"><i class="fa fa-link"></i></a>TEKICO</h3>

<p>日本語・欧文のダミーテキストを生成するAIR製ソフト。Webサイトのプロトタイプ作成時に活躍。</p>

<ul>
<li><a href="http://www.uniteair.co.jp/app/air/pid_001.html" class="autolink" rel="nofollow noopener" target="_blank">http://www.uniteair.co.jp/app/air/pid_001.html</a></li>
</ul>

<hr>

<p>作業メモ <br>
2012/02/08 <br>
<a href="http://qiita.com/items/2047#comment-2159" class="autolink">http://qiita.com/items/2047#comment-2159</a> まで書き写した</p>

<p>2012/02/09 <br>
<a href="http://qiita.com/items/2047#comment-2215" class="autolink">http://qiita.com/items/2047#comment-2215</a> まで書き写した<br>
#comment-2219 まで取り込んだ<br>
Googleとかでタイトルの後ろがtruncateされて本家と区別つかないのでタイトル変更「これ知らないプログラマって損してんなって思う汎用的なツール 100超 まとめ」→「【まとめ】これ知らないプログラマって損してんなって思う汎用的なツール 100超」</p>

<p>2012/02/10<br>
<a href="http://qiita.com/items/2047#comment-2295" class="autolink">http://qiita.com/items/2047#comment-2295</a> まで書き写した<br>
未分類だったものをある程度分類した</p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1" style="height:150px;">
<tr>
	<td rowspan="3">3位</td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="thumb-up-120px.png" /></i>2570</kbd>
		<a target="_blank" href="https://qiita.com/ken_c_lo/items/4cb49f0fb74e8778804d">英語コミットコメントに使えるオシャレフレーズ集</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-10-10<br />15:59:24</center>
	</td>
	<td style="width:200px;">
		<!--投稿者-->
		<center>
			@<a href="user/2339.html">ken_c_lo</a>(8件の記事)<br />(esa, LLC 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/2339/profile-images/1473681430">
		</center>
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Git]</b> <b>[English]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<!--
		<div style="width:350px;height:150px;overflow:scroll;">%s</div>
		-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>英語コミットコメントに使えそうなオシャレフレーズを聞いたので、これを使ってドヤ顔コミットをしたくてやれるチャンスを虎視眈々と狙う毎日です <img alt=":shipit:" class="emoji" height="20" src="https://cdn.qiita.com/emoji/shipit.png" title=":shipit:" width="20"></p>

<p>v, x, g, z とかこのへんが入ってる単語だとなんかカッコ良さ増す。<br><br>
tweak とかデザイナーにはだいぶ便利。</p>

<table>
<thead>
<tr>
<th>単語</th>
<th>意味</th>
</tr>
</thead>
<tbody>
<tr>
<td>undesirable</td>
<td>好ましくない</td>
</tr>
<tr>
<td>avoid, circumvent</td>
<td>回避する</td>
</tr>
<tr>
<td>retrieve</td>
<td>取りに行く(fetch / 「受け取る」よりもっと能動的に「取りに行く」ニュアンスを示す)</td>
</tr>
<tr>
<td>revise</td>
<td>= fix</td>
</tr>
<tr>
<td>tweak</td>
<td>微調整する</td>
</tr>
<tr>
<td>in the sight of 〜</td>
<td>〜の視点で (point of view をわざと仰々しく言った感じ)</td>
</tr>
<tr>
<td>refer</td>
<td>参照する</td>
</tr>
<tr>
<td>disambiguate</td>
<td>曖昧さをなくす</td>
</tr>
<tr>
<td>quite</td>
<td>とても（veryのかわりにつかえる</td>
</tr>
<tr>
<td>literally</td>
<td>文字通り</td>
</tr>
<tr>
<td>exactly</td>
<td>まさに、確かに、イグザクトリー</td>
</tr>
<tr>
<td>resurrect</td>
<td>よみがえらせる</td>
</tr>
<tr>
<td>in favor of</td>
<td>〜に賛成して, 何かに沿って</td>
</tr>
<tr>
<td>get rid of</td>
<td>好ましくないものを取り除く</td>
</tr>
<tr>
<td>kick out</td>
<td>get rid of の強いバージョン、腹立たしさある</td>
</tr>
<tr>
<td>introduce</td>
<td>導入する</td>
</tr>
<tr>
<td>extract</td>
<td>抽出する</td>
</tr>
<tr>
<td>no longer used</td>
<td>もはや使われてない</td>
</tr>
<tr>
<td>R.I.P.</td>
<td>安らかに眠れ（もう使ってないコードを消す時などに。「Removeでは語りきれない思いがあるんだ」 by <a href="/idesaku" class="user-mention js-hovercard" title="idesaku" data-hovercard-target-type="user" data-hovercard-target-name="idesaku">@idesaku</a> ）</td>
</tr>
<tr>
<td>defeat</td>
<td>倒す、打ち負かす</td>
</tr>
<tr>
<td>
<img alt=":put_litter_in_its_place:" class="emoji" height="20" src="https://cdn.qiita.com/emoji/twemoji/unicode/1f6ae.png" title=":put_litter_in_its_place:" width="20"><code>:put_litter_in_its_place:</code>
</td>
<td>ゴミはゴミ箱へ（不要なコメントやwhitespaceを消したときなど）</td>
</tr>
<tr>
<td>cosmetic change, cosme</td>
<td>インデントを美しくした時など</td>
</tr>
<tr>
<td>fruitful</td>
<td>みのりの多い〜, fruitful discussion など</td>
</tr>
<tr>
<td>
<img alt=":golf:" class="emoji" height="20" src="https://cdn.qiita.com/emoji/twemoji/unicode/26f3-fe0f.png" title=":golf:" width="20"><code>:golf:</code>
</td>
<td>コードをより短くした（code golf）</td>
</tr>
<tr>
<td>Take a cup of coffee</td>
<td>JS を CoffeeScript 化した, またはCoffeeをよりCoffeeらしく書いた</td>
</tr>
<tr>
<td>kick in</td>
<td>効きはじめる, 適用される など（DHHが使っていたらしい。）</td>
</tr>
<tr>
<td>A in B out</td>
<td>Bの変わりにAを導入（サッカー的な感じ。Gemの差し替えなどに使う）</td>
</tr>
<tr>
<td>enable to work</td>
<td>動くようにした</td>
</tr>
<tr>
<td>wipe out</td>
<td>拭い去る（get rid of, kick out の亜種）</td>
</tr>
<tr>
<td>stop rendering 〜</td>
<td>〜を表示しない</td>
</tr>
<tr>
<td>aesthetic</td>
<td>cosmetic の亜種（多分）</td>
</tr>
<tr>
<td>Ooops! <img alt=":scream:" class="emoji" height="20" src="https://cdn.qiita.com/emoji/twemoji/unicode/1f631.png" title=":scream:" width="20">
</td>
<td>しょうもないミスした時などに。 <img alt=":scream_cat:" class="emoji" height="20" src="https://cdn.qiita.com/emoji/twemoji/unicode/1f640.png" title=":scream_cat:" width="20">  <code>:scream_cat:</code> 使うとかわいみでる。</td>
</tr>
</tbody>
</table>

<p>随時追加しています <img alt=":baby_chick:" class="emoji" height="20" src="https://cdn.qiita.com/emoji/twemoji/unicode/1f424.png" title=":baby_chick:" width="20"><br><br>
あと、ぷるりくとかもお待ちしてます <img alt=":bird:" class="emoji" height="20" src="https://cdn.qiita.com/emoji/twemoji/unicode/1f426.png" title=":bird:" width="20"></p>

<h3>
<span id="あわせて読みたい" class="fragment"></span><a href="#%E3%81%82%E3%82%8F%E3%81%9B%E3%81%A6%E8%AA%AD%E3%81%BF%E3%81%9F%E3%81%84"><i class="fa fa-link"></i></a>あわせて読みたい</h3>

<p>コミットコメントに対する心得がわかりやすく書いてありました。当記事の補完としてお読みいただけるとイイカンジ。<br>
<a href="http://qiita.com/tbaba/items/77224ad2046c918d061b" id="reference-9e0048711ccf7c668aee">初心者から一歩抜け出すためのGitの業 Vol.3</a></p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1" style="height:150px;">
<tr>
	<td rowspan="3">4位</td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="thumb-up-120px.png" /></i>2328</kbd>
		<a target="_blank" href="https://qiita.com/jnchito/items/dedb3b889ab226933ccf">[初心者向け] RubyやRailsでリファクタリングに使えそうなイディオムとか便利メソッドとか</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-11-05<br />08:05:13</center>
	</td>
	<td style="width:200px;">
		<!--投稿者-->
		<center>
			@<a href="user/7465.html">jnchito</a>(165件の記事)<br />(SonicGarden Inc. 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/7465/profile-images/1500323590">
		</center>
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Ruby]</b> <b>[Rails]</b> <b>[初心者]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<!--
		<div style="width:350px;height:150px;overflow:scroll;">%s</div>
		-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;">
<h2>
<span id="はじめに-遠回りせずに近道を探す" class="fragment"></span><a href="#%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB-%E9%81%A0%E5%9B%9E%E3%82%8A%E3%81%9B%E3%81%9A%E3%81%AB%E8%BF%91%E9%81%93%E3%82%92%E6%8E%A2%E3%81%99"><i class="fa fa-link"></i></a>はじめに: 遠回りせずに「近道」を探す</h2>

<p>RubyやRailsを始めたばかりの人は、もっと短く書く方法や便利な標準ライブラリの存在を知らずに遠回りした書き方をしてしまいがちです。</p>

<p>そこで、RubyやRails初心者の人によく見かける「遠回り(または車輪の再発明)」と、それを回避する「近道」をいろいろ集めてみました。</p>

<h3>
<span id="20131106-追記" class="fragment"></span><a href="#20131106-%E8%BF%BD%E8%A8%98"><i class="fa fa-link"></i></a>2013.11.06 追記</h3>

<p>この投稿を書くに至った経緯などを自分のブログに書きました。<br>
こちらも合わせてどうぞ！</p>

<ul>
<li><a href="http://blog.jnito.com/entry/2013/11/06/072831" rel="nofollow noopener" target="_blank">昨日Qiitaに投稿した記事は普段のコードレビューの副産物 - give IT a try</a></li>
</ul>

<h2>
<span id="ruby編" class="fragment"></span><a href="#ruby%E7%B7%A8"><i class="fa fa-link"></i></a>Ruby編</h2>

<p>以下はRubyの標準機能を使ったイディオムやメソッドです。<br>
Railsプロジェクトでもそれ以外でも使えます。(Ruby 1.9以上を想定)</p>

<h3>
<span id="後置ifで行数を減らす" class="fragment"></span><a href="#%E5%BE%8C%E7%BD%AEif%E3%81%A7%E8%A1%8C%E6%95%B0%E3%82%92%E6%B8%9B%E3%82%89%E3%81%99"><i class="fa fa-link"></i></a>後置ifで行数を減らす</h3>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="n">user</span><span class="o">.</span><span class="n">active?</span>
  <span class="n">send_mail_to</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>
<span class="k">end</span>
</pre></div></div>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="n">send_mail_to</span><span class="p">(</span><span class="n">user</span><span class="p">)</span> <span class="k">if</span> <span class="n">user</span><span class="o">.</span><span class="n">active?</span>
</pre></div></div>

<h3>
<span id="if--notではなくunlessを使う" class="fragment"></span><a href="#if--not%E3%81%A7%E3%81%AF%E3%81%AA%E3%81%8Funless%E3%82%92%E4%BD%BF%E3%81%86"><i class="fa fa-link"></i></a>if + notではなく、unlessを使う</h3>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="n">user</span><span class="o">.</span><span class="n">destroy</span> <span class="k">if</span> <span class="o">!</span><span class="n">user</span><span class="o">.</span><span class="n">active?</span>
</pre></div></div>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="n">user</span><span class="o">.</span><span class="n">destroy</span> <span class="k">unless</span> <span class="n">user</span><span class="o">.</span><span class="n">active?</span>
</pre></div></div>

<p>ただし、unlessの条件がandやorでつながっていたり、否定形の条件が入っていたりすると、読み手の脳に負担がかかるので、複雑な条件はifを使う方が良いです。</p>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="c1"># こんなunlessは理解するのに時間がかかるのでNG</span>
<span class="n">user</span><span class="o">.</span><span class="n">destroy</span> <span class="k">unless</span> <span class="p">(</span><span class="n">user</span><span class="o">.</span><span class="n">active?</span> <span class="o">||</span> <span class="n">user</span><span class="o">.</span><span class="n">admin?</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">user</span><span class="o">.</span><span class="n">spam?</span>
</pre></div></div>

<h3>
<span id="三項演算子を使って行数を減らす" class="fragment"></span><a href="#%E4%B8%89%E9%A0%85%E6%BC%94%E7%AE%97%E5%AD%90%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%A6%E8%A1%8C%E6%95%B0%E3%82%92%E6%B8%9B%E3%82%89%E3%81%99"><i class="fa fa-link"></i></a>三項演算子を使って行数を減らす</h3>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="n">user</span><span class="o">.</span><span class="n">admin?</span>
  <span class="s2">"I appreciate for that."</span>
<span class="k">else</span>
  <span class="s2">"Thanks."</span>
<span class="k">end</span>
</pre></div></div>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="n">user</span><span class="o">.</span><span class="n">admin?</span> <span class="p">?</span> <span class="s2">"I appreciate for that."</span> <span class="p">:</span> <span class="s2">"Thanks"</span>
</pre></div></div>

<p>ただし、三項演算子をネストさせたりすると極めて読みにくくなるのでやめておきましょう。</p>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="c1"># 三項演算子のネストは読みづらい</span>
<span class="n">user</span><span class="o">.</span><span class="n">admin?</span> <span class="p">?</span> <span class="n">user</span><span class="o">.</span><span class="n">active?</span> <span class="p">?</span> <span class="s2">"I appreciate for that."</span> <span class="p">:</span> <span class="s2">"Are you OK?"</span> <span class="p">:</span> <span class="s2">"Thanks."</span>
</pre></div></div>

<h3>
<span id="代入してからifで存在を確認をまとめて書く" class="fragment"></span><a href="#%E4%BB%A3%E5%85%A5%E3%81%97%E3%81%A6%E3%81%8B%E3%82%89if%E3%81%A7%E5%AD%98%E5%9C%A8%E3%82%92%E7%A2%BA%E8%AA%8D%E3%82%92%E3%81%BE%E3%81%A8%E3%82%81%E3%81%A6%E6%9B%B8%E3%81%8F"><i class="fa fa-link"></i></a>代入してからifで存在を確認、をまとめて書く</h3>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="n">user</span> <span class="o">=</span> <span class="n">find_user</span>
<span class="k">if</span> <span class="n">user</span>
  <span class="n">send_mail_to</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>
<span class="k">end</span>
</pre></div></div>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="n">user</span> <span class="o">=</span> <span class="n">find_user</span>
  <span class="n">send_mail_to</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>
<span class="k">end</span>
</pre></div></div>

<p>ただし、このイディオムは「<code>==</code>と<code>=</code>を書き間違えたんじゃないか？」と読み手に勘違いされる恐れもあるので、好き嫌いが分かれるのも事実です。</p>

<h3>
<span id="子どものオブジェクトが存在する場合にのみそのプロパティやメソッドを呼び出して条件を確認するをひとつのifで書く" class="fragment"></span><a href="#%E5%AD%90%E3%81%A9%E3%82%82%E3%81%AE%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%8C%E5%AD%98%E5%9C%A8%E3%81%99%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AB%E3%81%AE%E3%81%BF%E3%81%9D%E3%81%AE%E3%83%97%E3%83%AD%E3%83%91%E3%83%86%E3%82%A3%E3%82%84%E3%83%A1%E3%82%BD%E3%83%83%E3%83%89%E3%82%92%E5%91%BC%E3%81%B3%E5%87%BA%E3%81%97%E3%81%A6%E6%9D%A1%E4%BB%B6%E3%82%92%E7%A2%BA%E8%AA%8D%E3%81%99%E3%82%8B%E3%82%92%E3%81%B2%E3%81%A8%E3%81%A4%E3%81%AEif%E3%81%A7%E6%9B%B8%E3%81%8F"><i class="fa fa-link"></i></a>子どものオブジェクトが存在する場合にのみ、そのプロパティやメソッドを呼び出して条件を確認する、をひとつのifで書く</h3>

<p>以下のコードは、<code>parent.children</code>が<code>nil</code>になっている可能性があるので、<code>children</code>が存在するときだけ<code>children.singleton?</code>を呼び出したい、というようなケースです。</p>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="n">parent</span><span class="o">.</span><span class="n">children</span>
  <span class="k">if</span> <span class="n">parent</span><span class="o">.</span><span class="n">children</span><span class="o">.</span><span class="n">singleton?</span>
    <span class="n">singleton</span> <span class="o">=</span> <span class="n">parent</span><span class="o">.</span><span class="n">children</span><span class="o">.</span><span class="n">first</span>
    <span class="n">send_mail_to</span><span class="p">(</span><span class="n">singleton</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div></div>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="n">parent</span><span class="o">.</span><span class="n">children</span> <span class="o">&amp;&amp;</span> <span class="n">parent</span><span class="o">.</span><span class="n">children</span><span class="o">.</span><span class="n">singleton?</span>
  <span class="n">singleton</span> <span class="o">=</span> <span class="n">parent</span><span class="o">.</span><span class="n">children</span><span class="o">.</span><span class="n">first</span>
  <span class="n">send_mail_to</span><span class="p">(</span><span class="n">singleton</span><span class="p">)</span>
<span class="k">end</span>
</pre></div></div>

<p>Ruby 2.3では safe navigation operator という新しい演算子（<code>&amp;.</code>）が追加されました。<br>
これを使うと <code>nil</code> かもしれないオブジェクトにメソッド呼び出しを試すことができます。<br>
もしオブジェクトが <code>nil</code> であれば戻り値も <code>nil</code> になります。</p>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="c1"># Ruby 2.3以降（childrenがnilでもエラーにならず、nilが返る）</span>
<span class="k">if</span> <span class="n">parent</span><span class="o">.</span><span class="n">children</span><span class="o">&amp;.</span><span class="n">singleton?</span>
  <span class="n">singleton</span> <span class="o">=</span> <span class="n">parent</span><span class="o">.</span><span class="n">children</span><span class="o">.</span><span class="n">first</span>
  <span class="n">send_mail_to</span><span class="p">(</span><span class="n">singleton</span><span class="p">)</span>
<span class="k">end</span>
</pre></div></div>

<p>その他、Ruby 2.3の新機能についてはこちらの記事をご覧ください。</p>

<p><a href="http://qiita.com/jnchito/items/0faac073cb77417d61c7" id="reference-91a6faf0870a55f0e2c7">サンプルコードでわかる！Ruby 2.3の主な新機能 - Qiita</a></p>

<h3>
<span id="メソッドの戻り値を返すときにreturnを使わない" class="fragment"></span><a href="#%E3%83%A1%E3%82%BD%E3%83%83%E3%83%89%E3%81%AE%E6%88%BB%E3%82%8A%E5%80%A4%E3%82%92%E8%BF%94%E3%81%99%E3%81%A8%E3%81%8D%E3%81%ABreturn%E3%82%92%E4%BD%BF%E3%82%8F%E3%81%AA%E3%81%84"><i class="fa fa-link"></i></a>メソッドの戻り値を返すときにreturnを使わない</h3>

<p>他の言語からやってきた人はついつい<code>return</code>を使いたくなりますが、<code>return</code>を使わない書き方の方がRubyっぽいです。</p>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">build_message</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>
  <span class="n">message</span> <span class="o">=</span> <span class="s1">'hello'</span>
  <span class="n">message</span> <span class="o">+=</span> <span class="s1">'!!'</span> <span class="k">if</span> <span class="n">user</span><span class="o">.</span><span class="n">admin?</span>
  <span class="k">return</span> <span class="n">message</span>
<span class="k">end</span>
</pre></div></div>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">build_message</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>
  <span class="n">message</span> <span class="o">=</span> <span class="s1">'hello'</span>
  <span class="n">message</span> <span class="o">+=</span> <span class="s1">'!!'</span> <span class="k">if</span> <span class="n">user</span><span class="o">.</span><span class="n">admin?</span>
  <span class="n">message</span>
<span class="k">end</span>
</pre></div></div>

<h3>
<span id="初期化プロパティセット戻り値として返すの代わりにobjecttapを使う" class="fragment"></span><a href="#%E5%88%9D%E6%9C%9F%E5%8C%96%E3%83%97%E3%83%AD%E3%83%91%E3%83%86%E3%82%A3%E3%82%BB%E3%83%83%E3%83%88%E6%88%BB%E3%82%8A%E5%80%A4%E3%81%A8%E3%81%97%E3%81%A6%E8%BF%94%E3%81%99%E3%81%AE%E4%BB%A3%E3%82%8F%E3%82%8A%E3%81%ABobjecttap%E3%82%92%E4%BD%BF%E3%81%86"><i class="fa fa-link"></i></a>「初期化、プロパティセット、戻り値として返す」の代わりにObject#tapを使う</h3>

<p>tapを使わなくても行数は同じですが、ローカル変数の宣言や値を返却するためだけに書く最後の行がいらなくなります。</p>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">build_user</span>
  <span class="n">user</span> <span class="o">=</span> <span class="no">User</span><span class="o">.</span><span class="n">new</span>
  <span class="n">user</span><span class="o">.</span><span class="n">email</span> <span class="o">=</span> <span class="s2">"hoge@hoge.com"</span>
  <span class="n">user</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">"Taro Yamada"</span>
  <span class="n">user</span>
<span class="k">end</span>
</pre></div></div>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">build_user</span>
  <span class="no">User</span><span class="o">.</span><span class="n">new</span><span class="o">.</span><span class="n">tap</span> <span class="k">do</span> <span class="o">|</span><span class="n">user</span><span class="o">|</span>
    <span class="n">user</span><span class="o">.</span><span class="n">email</span> <span class="o">=</span> <span class="s2">"hoge@hoge.com"</span>
    <span class="n">user</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">"Taro Yamada"</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div></div>

<h3>
<span id="ではなく-で文字列を連結する" class="fragment"></span><a href="#%E3%81%A7%E3%81%AF%E3%81%AA%E3%81%8F-%E3%81%A7%E6%96%87%E5%AD%97%E5%88%97%E3%82%92%E9%80%A3%E7%B5%90%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>"+”ではなく"#{ }"で文字列を連結する</h3>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="s2">"Hello, "</span> <span class="o">+</span> <span class="n">user</span><span class="o">.</span><span class="n">name</span> <span class="o">+</span> <span class="s2">"!"</span>
</pre></div></div>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="s2">"Hello, </span><span class="si">#{</span><span class="n">user</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">!"</span>
</pre></div></div>

<h3>
<span id="複数行にわたる文字列はヒアドキュメントを使う" class="fragment"></span><a href="#%E8%A4%87%E6%95%B0%E8%A1%8C%E3%81%AB%E3%82%8F%E3%81%9F%E3%82%8B%E6%96%87%E5%AD%97%E5%88%97%E3%81%AF%E3%83%92%E3%82%A2%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%82%92%E4%BD%BF%E3%81%86"><i class="fa fa-link"></i></a>複数行にわたる文字列はヒアドキュメントを使う</h3>

<div class="code-frame" data-lang="rb"><div class="highlight"><pre><span></span><span class="n">text</span> <span class="o">=</span> <span class="s2">"Hello, world!</span><span class="se">\n</span><span class="s2">Good-bye, world!"</span>
</pre></div></div>

<div class="code-frame" data-lang="rb"><div class="highlight"><pre><span></span><span class="n">text</span> <span class="o">=</span> <span class="o">&lt;&lt;-</span><span class="dl">TEXT</span>
<span class="sh">Hello, world!</span>
<span class="sh">Good-bye, world!</span>
<span class="dl">TEXT</span>
</pre></div></div>

<p>Rubyのヒアドキュメントは高機能なので、もっと詳しく知りたい方は公式ドキュメントやネット上の情報を参考にしてください。</p>

<p><a href="http://docs.ruby-lang.org/ja/2.3.0/doc/spec=2fliteral.html#here" rel="nofollow noopener" target="_blank">ヒアドキュメント (行指向文字列リテラル)</a></p>

<h3>
<span id="定数はfreezeさせる" class="fragment"></span><a href="#%E5%AE%9A%E6%95%B0%E3%81%AFfreeze%E3%81%95%E3%81%9B%E3%82%8B"><i class="fa fa-link"></i></a>定数はfreezeさせる</h3>

<p>文字列であれ、配列であれ、ハッシュであれ、定数宣言した値は<code>freeze</code>しておく方が無難です。万一変更されると困るので。</p>

<h4>
<span id="文字列の場合" class="fragment"></span><a href="#%E6%96%87%E5%AD%97%E5%88%97%E3%81%AE%E5%A0%B4%E5%90%88"><i class="fa fa-link"></i></a>文字列の場合</h4>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="no">CONTACT_PHONE_NUMBER</span> <span class="o">=</span> <span class="s2">"03-1234-5678"</span>
<span class="no">CONTACT_PHONE_NUMBER</span> <span class="o">&lt;&lt;</span> <span class="s2">"@#$%^"</span>
<span class="nb">puts</span> <span class="no">CONTACT_PHONE_NUMBER</span> <span class="c1"># =&gt; 03-1234-5678@#$%^</span>
</pre></div></div>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="no">CONTACT_PHONE_NUMBER</span> <span class="o">=</span> <span class="s2">"03-1234-5678"</span><span class="o">.</span><span class="n">freeze</span>
<span class="no">CONTACT_PHONE_NUMBER</span> <span class="o">&lt;&lt;</span> <span class="s2">"@#$%^"</span> <span class="c1"># =&gt; RuntimeError: can't modify frozen String</span>
</pre></div></div>

<h4>
<span id="配列の場合" class="fragment"></span><a href="#%E9%85%8D%E5%88%97%E3%81%AE%E5%A0%B4%E5%90%88"><i class="fa fa-link"></i></a>配列の場合</h4>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="no">ADMIN_NAMES</span> <span class="o">=</span> <span class="o">[</span><span class="s2">"Tom"</span><span class="p">,</span> <span class="s2">"Alice"</span><span class="o">]</span>
<span class="no">ADMIN_NAMES</span> <span class="o">&lt;&lt;</span> <span class="s2">"Taro"</span>
<span class="no">ADMIN_NAMES</span><span class="o">[</span><span class="mi">0</span><span class="o">].</span><span class="n">downcase!</span>
<span class="nb">puts</span> <span class="no">ADMIN_NAMES</span> <span class="c1"># =&gt; ["tom", "Alice"]</span>
</pre></div></div>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="no">ADMIN_NAMES</span> <span class="o">=</span> <span class="o">[</span><span class="s2">"Tom"</span><span class="p">,</span> <span class="s2">"Alice"</span><span class="o">].</span><span class="n">freeze</span><span class="o">.</span><span class="n">each</span><span class="p">(</span><span class="o">&amp;</span><span class="ss">:freeze</span><span class="p">)</span>
<span class="no">ADMIN_NAMES</span> <span class="o">&lt;&lt;</span> <span class="s2">"Taro"</span> <span class="c1"># =&gt; RuntimeError: can't modify frozen Array</span>
<span class="no">ADMIN_NAMES</span><span class="o">[</span><span class="mi">0</span><span class="o">].</span><span class="n">downcase!</span> <span class="c1"># =&gt; RuntimeError: can't modify frozen String</span>
</pre></div></div>

<h4>
<span id="整数の場合" class="fragment"></span><a href="#%E6%95%B4%E6%95%B0%E3%81%AE%E5%A0%B4%E5%90%88"><i class="fa fa-link"></i></a>整数の場合</h4>

<p>整数(<code>FixNum</code>)は変更不能なので<code>freeze</code>しなくても問題ありません。</p>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="c1"># エラーにはならないが、あまり意味が無い</span>
<span class="no">ITEM_LIMIT</span> <span class="o">=</span> <span class="mi">500</span><span class="o">.</span><span class="n">freeze</span>
</pre></div></div>

<h3>
<span id="配列やハッシュを初期化する際最後の要素をあえてカンマ付きで書いておく" class="fragment"></span><a href="#%E9%85%8D%E5%88%97%E3%82%84%E3%83%8F%E3%83%83%E3%82%B7%E3%83%A5%E3%82%92%E5%88%9D%E6%9C%9F%E5%8C%96%E3%81%99%E3%82%8B%E9%9A%9B%E6%9C%80%E5%BE%8C%E3%81%AE%E8%A6%81%E7%B4%A0%E3%82%92%E3%81%82%E3%81%88%E3%81%A6%E3%82%AB%E3%83%B3%E3%83%9E%E4%BB%98%E3%81%8D%E3%81%A7%E6%9B%B8%E3%81%84%E3%81%A6%E3%81%8A%E3%81%8F"><i class="fa fa-link"></i></a>配列やハッシュを初期化する際、最後の要素をあえてカンマ付きで書いておく</h3>

<p>配列やハッシュを初期化する場合は、カンマで要素を区切ります。</p>

<div class="code-frame" data-lang="rb"><div class="highlight"><pre><span></span><span class="n">countries</span> <span class="o">=</span> <span class="o">[</span>
  <span class="ss">:japan</span><span class="p">,</span>
  <span class="ss">:italy</span><span class="p">,</span>
  <span class="ss">:uk</span>
<span class="o">]</span>

<span class="n">capitals</span> <span class="o">=</span> <span class="p">{</span>
  <span class="ss">japan</span><span class="p">:</span> <span class="s1">'Tokyo'</span><span class="p">,</span>
  <span class="ss">italy</span><span class="p">:</span> <span class="s1">'Rome'</span><span class="p">,</span>
  <span class="ss">uk</span><span class="p">:</span> <span class="s1">'London'</span>
<span class="p">}</span>
</pre></div></div>

<p>Rubyでは次のように、最後の要素にカンマを付けても文法上エラーになりません。 </p>

<div class="code-frame" data-lang="rb"><div class="highlight"><pre><span></span><span class="n">countries</span> <span class="o">=</span> <span class="o">[</span>
  <span class="ss">:japan</span><span class="p">,</span>
  <span class="ss">:italy</span><span class="p">,</span>
  <span class="ss">:uk</span><span class="p">,</span>
<span class="o">]</span>

<span class="n">capitals</span> <span class="o">=</span> <span class="p">{</span>
  <span class="ss">japan</span><span class="p">:</span> <span class="s1">'Tokyo'</span><span class="p">,</span>
  <span class="ss">italy</span><span class="p">:</span> <span class="s1">'Rome'</span><span class="p">,</span>
  <span class="ss">uk</span><span class="p">:</span> <span class="s1">'London'</span><span class="p">,</span>
<span class="p">}</span>
</pre></div></div>

<p>将来的に要素が追加される可能性が高い配列やハッシュであれば、1つ前の行を修正せずに新しい要素を追加できるので、プログラム修正の手間が少し省けます。</p>

<div class="code-frame" data-lang="rb"><div class="highlight"><pre><span></span><span class="n">countries</span> <span class="o">=</span> <span class="o">[</span>
  <span class="ss">:japan</span><span class="p">,</span>
  <span class="ss">:italy</span><span class="p">,</span>
  <span class="ss">:uk</span><span class="p">,</span>
  <span class="ss">:india</span><span class="p">,</span> <span class="c1"># &lt;= 1つ前の行を修正せずに追加</span>
<span class="o">]</span>

<span class="n">capitals</span> <span class="o">=</span> <span class="p">{</span>
  <span class="ss">japan</span><span class="p">:</span> <span class="s1">'Tokyo'</span><span class="p">,</span>
  <span class="ss">italy</span><span class="p">:</span> <span class="s1">'Rome'</span><span class="p">,</span>
  <span class="ss">uk</span><span class="p">:</span> <span class="s1">'London'</span><span class="p">,</span>
  <span class="ss">india</span><span class="p">:</span> <span class="s1">'New Delhi'</span><span class="p">,</span> <span class="c1"># &lt;= 1つ前の行を修正せずに追加</span>
<span class="p">}</span>
</pre></div></div>

<p>また、すべての要素にカンマを付けておけば、要素の順番を入れ替えたいときも行単位の単純なカット＆ペーストで修正できますね。</p>

<h3>
<span id="配列を作るとき-の代わりにw-i-を使う" class="fragment"></span><a href="#%E9%85%8D%E5%88%97%E3%82%92%E4%BD%9C%E3%82%8B%E3%81%A8%E3%81%8D-%E3%81%AE%E4%BB%A3%E3%82%8F%E3%82%8A%E3%81%ABw-i-%E3%82%92%E4%BD%BF%E3%81%86"><i class="fa fa-link"></i></a>配列を作るとき、[ ]の代わりに%w( )、%i( )を使う</h3>

<p>文字列だけの配列を作りたい場合は<code>%w( )</code>を使うと少し短く書けます。</p>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="n">actions</span> <span class="o">=</span> <span class="o">[</span><span class="s1">'index'</span><span class="p">,</span> <span class="s1">'new'</span><span class="p">,</span> <span class="s1">'create'</span><span class="o">]</span>
</pre></div></div>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="n">actions</span> <span class="o">=</span> <span class="sx">%w(index new create)</span> <span class="c1"># =&gt; ['index', 'new', 'create']</span>
</pre></div></div>

<p>Ruby 2.0なら<code>%i( )</code>でシンボルの配列も作れます。</p>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="n">actions</span> <span class="o">=</span> <span class="o">%</span><span class="n">i</span><span class="p">(</span><span class="n">index</span> <span class="kp">new</span> <span class="n">create</span><span class="p">)</span> <span class="c1"># =&gt; [:index, :new, :create]</span>
</pre></div></div>

<h3>
<span id="配列を順番に処理するときobjectmethodの代わりにmethodを使う" class="fragment"></span><a href="#%E9%85%8D%E5%88%97%E3%82%92%E9%A0%86%E7%95%AA%E3%81%AB%E5%87%A6%E7%90%86%E3%81%99%E3%82%8B%E3%81%A8%E3%81%8Dobjectmethod%E3%81%AE%E4%BB%A3%E3%82%8F%E3%82%8A%E3%81%ABmethod%E3%82%92%E4%BD%BF%E3%81%86"><i class="fa fa-link"></i></a>配列を順番に処理するとき、"object.method"の代わりに"&amp;:method"を使う</h3>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="n">names</span> <span class="o">=</span> <span class="n">users</span><span class="o">.</span><span class="n">map</span><span class="p">{</span><span class="o">|</span><span class="n">user</span><span class="o">|</span> <span class="n">user</span><span class="o">.</span><span class="n">name</span> <span class="p">}</span>
</pre></div></div>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="n">names</span> <span class="o">=</span> <span class="n">users</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="o">&amp;</span><span class="ss">:name</span><span class="p">)</span>
</pre></div></div>

<p><code>map</code>に限らず、<code>each</code>や<code>select</code>などブロックで配列の中身を受け取るようなメソッドは同じように<code>&amp;:method</code>で処理できます。</p>

<h3>
<span id="nilか配列かを区別せずarray-で処理してしまう" class="fragment"></span><a href="#nil%E3%81%8B%E9%85%8D%E5%88%97%E3%81%8B%E3%82%92%E5%8C%BA%E5%88%A5%E3%81%9B%E3%81%9Aarray-%E3%81%A7%E5%87%A6%E7%90%86%E3%81%97%E3%81%A6%E3%81%97%E3%81%BE%E3%81%86"><i class="fa fa-link"></i></a>nilか配列かを区別せず、Array( )で処理してしまう</h3>

<p>基本的に配列だが、nilが渡される場合もある変数を処理する場合、<code>Array()</code>（<code>Kernel#Array</code>）を使うと条件分岐を無くせます。</p>

<div class="code-frame" data-lang="rb"><div class="highlight"><pre><span></span><span class="c1"># usersはnilが渡される場合もあるので分岐する</span>
<span class="k">if</span> <span class="n">users</span>
  <span class="n">users</span><span class="o">.</span><span class="n">each</span><span class="p">{</span><span class="o">|</span><span class="n">user</span><span class="o">|</span> <span class="n">send_direct_mail</span><span class="p">(</span><span class="n">user</span><span class="p">)</span> <span class="p">}</span>
<span class="k">end</span> 
</pre></div></div>

<div class="code-frame" data-lang="rb"><div class="highlight"><pre><span></span><span class="c1"># Array()を使うと、nilの場合は空の配列（[])が、それ以外は元の配列が返されるので分岐が不要 </span>
<span class="nb">Array</span><span class="p">(</span><span class="n">users</span><span class="p">)</span><span class="o">.</span><span class="n">each</span><span class="p">{</span><span class="o">|</span><span class="n">user</span><span class="o">|</span> <span class="n">send_direct_mail</span><span class="p">(</span><span class="n">user</span><span class="p">)</span> <span class="p">}</span>
</pre></div></div>

<h3>
<span id="大きな数値を宣言する場合_を入れて読みやすくする" class="fragment"></span><a href="#%E5%A4%A7%E3%81%8D%E3%81%AA%E6%95%B0%E5%80%A4%E3%82%92%E5%AE%A3%E8%A8%80%E3%81%99%E3%82%8B%E5%A0%B4%E5%90%88_%E3%82%92%E5%85%A5%E3%82%8C%E3%81%A6%E8%AA%AD%E3%81%BF%E3%82%84%E3%81%99%E3%81%8F%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>大きな数値を宣言する場合、"_"を入れて読みやすくする</h3>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="no">ITEM_LIMIT</span> <span class="o">=</span> <span class="mi">1000000000</span>
</pre></div></div>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="no">ITEM_LIMIT</span> <span class="o">=</span> <span class="mi">1_000_000_000</span>
</pre></div></div>

<h3>
<span id="単純なgetterメソッドを定義する代わりにattr_readerを使う" class="fragment"></span><a href="#%E5%8D%98%E7%B4%94%E3%81%AAgetter%E3%83%A1%E3%82%BD%E3%83%83%E3%83%89%E3%82%92%E5%AE%9A%E7%BE%A9%E3%81%99%E3%82%8B%E4%BB%A3%E3%82%8F%E3%82%8A%E3%81%ABattr_reader%E3%82%92%E4%BD%BF%E3%81%86"><i class="fa fa-link"></i></a>単純なgetterメソッドを定義する代わりに、attr_readerを使う</h3>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Person</span>
  <span class="k">def</span> <span class="nf">initialize</span>
    <span class="vi">@name</span> <span class="o">=</span> <span class="s2">"No name"</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">name</span>
    <span class="vi">@name</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div></div>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Person</span>
  <span class="kp">attr_reader</span> <span class="ss">:name</span>

  <span class="k">def</span> <span class="nf">initialize</span>
    <span class="vi">@name</span> <span class="o">=</span> <span class="s2">"No name"</span>
  <span class="k">end</span>

  <span class="c1"># いらない</span>
  <span class="c1"># def name</span>
  <span class="c1">#   @name</span>
  <span class="c1"># end</span>
<span class="k">end</span>
</pre></div></div>

<h3>
<span id="要素の順番に意味がある配列は同時に別々の変数で受け取る" class="fragment"></span><a href="#%E8%A6%81%E7%B4%A0%E3%81%AE%E9%A0%86%E7%95%AA%E3%81%AB%E6%84%8F%E5%91%B3%E3%81%8C%E3%81%82%E3%82%8B%E9%85%8D%E5%88%97%E3%81%AF%E5%90%8C%E6%99%82%E3%81%AB%E5%88%A5%E3%80%85%E3%81%AE%E5%A4%89%E6%95%B0%E3%81%A7%E5%8F%97%E3%81%91%E5%8F%96%E3%82%8B"><i class="fa fa-link"></i></a>要素の順番に意味がある配列は、同時に別々の変数で受け取る</h3>

<p><code>変数 = 配列</code>のように書くと変数には配列が格納されますが、<code>変数, 変数 = 配列</code>のように書くと配列の各要素を別々の変数に格納できます。</p>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="n">ans_array</span> <span class="o">=</span> <span class="mi">14</span><span class="o">.</span><span class="n">divmod</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="nb">puts</span> <span class="s2">"商は</span><span class="si">#{</span><span class="n">ans_array</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span><span class="si">}</span><span class="s2">"</span>     <span class="c1"># =&gt; 商は4</span>
<span class="nb">puts</span> <span class="s2">"あまりは</span><span class="si">#{</span><span class="n">ans_array</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span><span class="si">}</span><span class="s2">"</span> <span class="c1"># =&gt; あまりは2</span>
</pre></div></div>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="n">quotient</span><span class="p">,</span> <span class="n">remainder</span> <span class="o">=</span> <span class="mi">14</span><span class="o">.</span><span class="n">divmod</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="nb">puts</span> <span class="s2">"商は</span><span class="si">#{</span><span class="n">quotient</span><span class="si">}</span><span class="s2">"</span>      <span class="c1"># =&gt; 商は4</span>
<span class="nb">puts</span> <span class="s2">"あまりは</span><span class="si">#{</span><span class="n">remainder</span><span class="si">}</span><span class="s2">"</span> <span class="c1"># =&gt; あまりは2</span>
</pre></div></div>

<p>ハッシュを<code>each</code>で回したときに、ブロックが受け取る引数も同じですね。</p>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="c1"># keyとvalueを配列として受け取る</span>
<span class="p">{</span><span class="nb">name</span><span class="p">:</span> <span class="s1">'Tom'</span><span class="p">,</span> <span class="ss">email</span><span class="p">:</span> <span class="s1">'hoge@hoge.com'</span><span class="p">}</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">key_and_value</span><span class="o">|</span>
  <span class="nb">puts</span> <span class="s2">"key: </span><span class="si">#{</span><span class="n">key_and_value</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span><span class="si">}</span><span class="s2">"</span>
  <span class="nb">puts</span> <span class="s2">"value: </span><span class="si">#{</span><span class="n">key_and_value</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span><span class="si">}</span><span class="s2">"</span>
<span class="k">end</span>
</pre></div></div>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="c1"># keyとvalueを別々の変数で受け取る</span>
<span class="p">{</span><span class="nb">name</span><span class="p">:</span> <span class="s1">'Tom'</span><span class="p">,</span> <span class="ss">email</span><span class="p">:</span> <span class="s1">'hoge@hoge.com'</span><span class="p">}</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="o">|</span>
  <span class="nb">puts</span> <span class="s2">"key: </span><span class="si">#{</span><span class="n">key</span><span class="si">}</span><span class="s2">"</span>
  <span class="nb">puts</span> <span class="s2">"value: </span><span class="si">#{</span><span class="n">value</span><span class="si">}</span><span class="s2">"</span>
<span class="k">end</span>
</pre></div></div>

<h3>
<span id="配列を連結するのにではなくsplatを使う" class="fragment"></span><a href="#%E9%85%8D%E5%88%97%E3%82%92%E9%80%A3%E7%B5%90%E3%81%99%E3%82%8B%E3%81%AE%E3%81%AB%E3%81%A7%E3%81%AF%E3%81%AA%E3%81%8Fsplat%E3%82%92%E4%BD%BF%E3%81%86"><i class="fa fa-link"></i></a>配列を連結するのに+ではなく、*(splat)を使う</h3>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="n">numbers</span> <span class="o">=</span> <span class="o">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="o">]</span>
<span class="n">numbers_with_zero_and_100</span> <span class="o">=</span> <span class="o">[</span><span class="mi">0</span><span class="o">]</span> <span class="o">+</span> <span class="n">numbers</span> <span class="o">+</span> <span class="o">[</span><span class="mi">100</span><span class="o">]</span> <span class="c1"># =&gt; [0, 1, 2, 3, 100]</span>
</pre></div></div>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="n">numbers</span> <span class="o">=</span> <span class="o">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="o">]</span>
<span class="n">numbers_with_zero_and_100</span> <span class="o">=</span> <span class="o">[</span><span class="mi">0</span><span class="p">,</span> <span class="o">*</span><span class="n">numbers</span><span class="p">,</span> <span class="mi">100</span><span class="o">]</span> <span class="c1"># =&gt; [0, 1, 2, 3, 100]</span>
</pre></div></div>

<p>ちなみに<code>*</code>がないと、こうなります。(配列が展開されない)</p>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="o">[</span><span class="mi">0</span><span class="p">,</span> <span class="n">numbers</span><span class="p">,</span> <span class="mi">100</span><span class="o">]</span> <span class="c1"># =&gt; [0, [1, 2, 3], 100]</span>
</pre></div></div>

<h3>
<span id="nilだったら初期化の代わりに--を使う" class="fragment"></span><a href="#nil%E3%81%A0%E3%81%A3%E3%81%9F%E3%82%89%E5%88%9D%E6%9C%9F%E5%8C%96%E3%81%AE%E4%BB%A3%E3%82%8F%E3%82%8A%E3%81%AB--%E3%82%92%E4%BD%BF%E3%81%86"><i class="fa fa-link"></i></a>nilだったら初期化、の代わりに ||= を使う</h3>

<p>いわゆる遅延初期化のイディオムですね。</p>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">twitter_client</span>
  <span class="vi">@twitter_client</span> <span class="o">=</span> <span class="no">Twitter</span><span class="o">::</span><span class="no">REST</span><span class="o">::</span><span class="no">Client</span><span class="o">.</span><span class="n">new</span> <span class="k">if</span> <span class="vi">@twitter_client</span><span class="o">.</span><span class="n">nil?</span>
  <span class="vi">@twitter_client</span>
<span class="k">end</span>
</pre></div></div>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">twitter_client</span>
  <span class="vi">@twitter_client</span> <span class="o">||=</span> <span class="no">Twitter</span><span class="o">::</span><span class="no">REST</span><span class="o">::</span><span class="no">Client</span><span class="o">.</span><span class="n">new</span> 
<span class="k">end</span>
</pre></div></div>

<p>初期化の処理が複数行にわたる場合は<code>begin/end</code>を使うことができます。（<a href="http://blog.honeybadger.io/rubyist_guide_to_memoization/" rel="nofollow noopener" target="_blank">参考</a>）</p>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">twitter_client</span>
  <span class="k">return</span> <span class="vi">@twitter_client</span> <span class="k">if</span> <span class="vi">@twitter_client</span>
  <span class="vi">@twitter_client</span> <span class="o">=</span> <span class="no">Twitter</span><span class="o">::</span><span class="no">REST</span><span class="o">::</span><span class="no">Client</span><span class="o">.</span><span class="n">new</span>
  <span class="c1"># 初期化に必要な処理</span>
  <span class="c1"># ...</span>
  <span class="vi">@twitter_client</span>
<span class="k">end</span>
</pre></div></div>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">twitter_client</span>
  <span class="vi">@twitter_client</span> <span class="o">||=</span> <span class="k">begin</span>
    <span class="n">client</span> <span class="o">=</span> <span class="no">Twitter</span><span class="o">::</span><span class="no">REST</span><span class="o">::</span><span class="no">Client</span><span class="o">.</span><span class="n">new</span>
    <span class="c1"># 初期化に必要な処理</span>
    <span class="c1"># ...</span>
    <span class="n">client</span> 
  <span class="k">end</span>
<span class="k">end</span>
</pre></div></div>

<h3>
<span id="ハッシュのキーには文字列ではなくシンボルを使う" class="fragment"></span><a href="#%E3%83%8F%E3%83%83%E3%82%B7%E3%83%A5%E3%81%AE%E3%82%AD%E3%83%BC%E3%81%AB%E3%81%AF%E6%96%87%E5%AD%97%E5%88%97%E3%81%A7%E3%81%AF%E3%81%AA%E3%81%8F%E3%82%B7%E3%83%B3%E3%83%9C%E3%83%AB%E3%82%92%E4%BD%BF%E3%81%86"><i class="fa fa-link"></i></a>ハッシュのキーには文字列ではなくシンボルを使う</h3>

<p>ハッシュに値をセットする場合、キーには文字列よりもシンボルを使う方がベターです。</p>

<div class="code-frame" data-lang="rb"><div class="highlight"><pre><span></span><span class="c1"># キーに文字列を使う</span>
<span class="n">currencies</span> <span class="o">=</span> <span class="p">{</span> <span class="s1">'japan'</span> <span class="o">=&gt;</span> <span class="s1">'yen'</span><span class="p">,</span> <span class="s1">'america'</span> <span class="o">=&gt;</span> <span class="s1">'dollar'</span><span class="p">,</span> <span class="s1">'italy'</span> <span class="o">=&gt;</span> <span class="s1">'euro'</span> <span class="p">}</span> 
<span class="n">currencies</span><span class="o">[</span><span class="s1">'japan'</span><span class="o">]</span> <span class="c1"># =&gt; 'yen'</span>
</pre></div></div>

<div class="code-frame" data-lang="rb"><div class="highlight"><pre><span></span><span class="c1"># キーにシンボルを使う</span>
<span class="n">currencies</span> <span class="o">=</span> <span class="p">{</span> <span class="ss">japan</span><span class="p">:</span> <span class="s1">'yen'</span><span class="p">,</span> <span class="ss">america</span><span class="p">:</span> <span class="s1">'dollar'</span><span class="p">,</span> <span class="ss">italy</span><span class="p">:</span> <span class="s1">'euro'</span> <span class="p">}</span> 
<span class="n">currencies</span><span class="o">[</span><span class="ss">:japan</span><span class="o">]</span> <span class="c1"># =&gt; 'yen'</span>
</pre></div></div>

<p>シンボルを使うと以下のようなメリットがあります。</p>

<ul>
<li>
<code>{ key: value }</code> のように簡潔なリテラルで書ける。</li>
<li>文字列よりも速い。</li>
<li>文字列よりもメモリの使用効率が良い。</li>
</ul>

<p>参考： <a href="http://stackoverflow.com/questions/8189416/why-use-symbols-as-hash-keys-in-ruby" rel="nofollow noopener" target="_blank">Why use symbols as hash keys in Ruby? - Stack Overflow</a></p>

<h3>
<span id="メソッド全体rescueの対象にするときはbeginendを省く" class="fragment"></span><a href="#%E3%83%A1%E3%82%BD%E3%83%83%E3%83%89%E5%85%A8%E4%BD%93rescue%E3%81%AE%E5%AF%BE%E8%B1%A1%E3%81%AB%E3%81%99%E3%82%8B%E3%81%A8%E3%81%8D%E3%81%AFbeginend%E3%82%92%E7%9C%81%E3%81%8F"><i class="fa fa-link"></i></a>メソッド全体rescueの対象にするときはbegin/endを省く</h3>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">process_user</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>
  <span class="k">begin</span>
    <span class="n">send_to_mail</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>
  <span class="k">rescue</span>
    <span class="c1"># 例外処理</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div></div>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">process_user</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>
  <span class="n">send_to_mail</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>
<span class="k">rescue</span>
  <span class="c1"># 例外処理</span>
<span class="k">end</span>
</pre></div></div>

<h3>
<span id="exceptionをrescueするのではなくstandarderrorをrescueする" class="fragment"></span><a href="#exception%E3%82%92rescue%E3%81%99%E3%82%8B%E3%81%AE%E3%81%A7%E3%81%AF%E3%81%AA%E3%81%8Fstandarderror%E3%82%92rescue%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>Exceptionをrescueするのではなく、StandardErrorをrescueする</h3>

<p>JavaやC#をやっていた人は「すべての例外を捕捉したい = Exceptionを捕捉する」と考えがちです。<br>
しかし、Rubyで<code>Exception</code>を捕捉すると、<code>NoMemoryError</code>等の致命的な例外も捕捉してしまいます。</p>

<p>実行時エラーを表すRubyの例外クラスは<code>Exception</code>のサブクラスである<code>StandardError</code>です。<br>
rescueでデフォルトで捕捉するのは<code>StandardError</code>とそのサブクラスなので、すべての実行時エラーを捕捉したい場合は<code>rescue</code>節に具体的な例外クラス名を書く必要はありません。</p>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">process_user</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>
  <span class="n">send_to_mail</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>
<span class="k">rescue</span> <span class="no">Exception</span> <span class="o">=&gt;</span> <span class="n">ex</span>
  <span class="c1"># NoMemoryError等の致命的な例外まで捕捉してしまうので良くない</span>
<span class="k">end</span>
</pre></div></div>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">process_user</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>
  <span class="n">send_to_mail</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>
<span class="k">rescue</span> <span class="o">=&gt;</span> <span class="n">ex</span>
  <span class="c1"># すべての実行時エラー(＝ StandardErrorとそのサブクラス)が捕捉される</span>
<span class="k">end</span>
</pre></div></div>

<ul>
<li>参考: <a href="http://qiita.com/jnchito/items/a6046733dd5683ff35b7" class="autolink" id="reference-4781ab71b7949ba981b4">http://qiita.com/jnchito/items/a6046733dd5683ff35b7</a>
</li>
</ul>

<h3>
<span id="一度rescueした例外をもう一度再raiseする" class="fragment"></span><a href="#%E4%B8%80%E5%BA%A6rescue%E3%81%97%E3%81%9F%E4%BE%8B%E5%A4%96%E3%82%92%E3%82%82%E3%81%86%E4%B8%80%E5%BA%A6%E5%86%8Draise%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>一度rescueした例外をもう一度再raiseする</h3>

<p>「ある特定の例外クラス」だけでなく、「例外メッセージの中身」も確認して条件に合致すればrescue、そうでなければ対象外のエラーなのでそのままシステムエラーにしたい、というケースがたまにあります。</p>

<p>その場合はrescue節の中で<code>raise</code>を呼ぶと元のエラーを再raiseできます。</p>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">process_user</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>
  <span class="n">send_to_mail</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>
<span class="k">rescue</span> <span class="no">ArgumentError</span> <span class="o">=&gt;</span> <span class="n">ex</span>
  <span class="k">if</span> <span class="n">ex</span><span class="o">.</span><span class="n">message</span> <span class="o">=~</span> <span class="sr">/blah blah blah/</span>
    <span class="c1"># ArgumentErrorかつ、メッセージも条件に合致すれば</span>
    <span class="c1"># 別の処理を実行してそのまま続行する</span>
    <span class="n">send_to_admin</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> <span class="n">ex</span><span class="p">)</span>
  <span class="k">else</span>
    <span class="c1"># メッセージが条件に合致しなかった場合は対処不能なエラーとして</span>
    <span class="c1"># 元のエラーを再度raiseする</span>
    <span class="k">raise</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div></div>

<h3>
<span id="private-以下の行にクラスメソッドを定義してprivateなクラスメソッドを作ったと勘違いしない" class="fragment"></span><a href="#private-%E4%BB%A5%E4%B8%8B%E3%81%AE%E8%A1%8C%E3%81%AB%E3%82%AF%E3%83%A9%E3%82%B9%E3%83%A1%E3%82%BD%E3%83%83%E3%83%89%E3%82%92%E5%AE%9A%E7%BE%A9%E3%81%97%E3%81%A6private%E3%81%AA%E3%82%AF%E3%83%A9%E3%82%B9%E3%83%A1%E3%82%BD%E3%83%83%E3%83%89%E3%82%92%E4%BD%9C%E3%81%A3%E3%81%9F%E3%81%A8%E5%8B%98%E9%81%95%E3%81%84%E3%81%97%E3%81%AA%E3%81%84"><i class="fa fa-link"></i></a>private 以下の行にクラスメソッドを定義して、privateなクラスメソッドを作ったと勘違いしない</h3>

<p>以下のようにprivateの下にインスタンスメソッドとクラスメソッドを定義したとします。</p>

<div class="code-frame" data-lang="rb"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">User</span>
  <span class="kp">private</span>

  <span class="k">def</span> <span class="nf">secret_name</span>
    <span class="c1"># 外部から呼ばれたくないインスタンスメソッド</span>
    <span class="s2">"secret!"</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">secret_data</span>
    <span class="c1"># 外部から呼ばれたくないクラスメソッド！？</span>
    <span class="s2">"secret!!"</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div></div>

<p>上のコードを実行すると、<code>secret_name</code>は呼び出せませんが、<code>self.secret_data</code>呼び出すことが可能です。</p>

<div class="code-frame" data-lang="rb"><div class="highlight"><pre><span></span><span class="n">user</span> <span class="o">=</span> <span class="no">User</span><span class="o">.</span><span class="n">new</span>

<span class="c1"># 呼び出せない</span>
<span class="n">user</span><span class="o">.</span><span class="n">secret_name</span>
<span class="c1"># =&gt; NoMethodError: private method `secret_name' called for #&lt;User:0x007fa90c1e7cd0&gt;</span>

<span class="c1"># 呼び出せる</span>
<span class="no">User</span><span class="o">.</span><span class="n">secret_data</span>
<span class="c1"># =&gt; "secret!!"</span>
</pre></div></div>

<p>以下のように<code>private_class_method</code>を付けると、外部から呼び出せなくなります。</p>

<div class="code-frame" data-lang="rb"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">User</span>
  <span class="kp">private</span>

  <span class="k">def</span> <span class="nf">secret_name</span>
    <span class="c1"># 外部から呼ばれたくないインスタンスメソッド</span>
    <span class="s2">"secret!"</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">secret_data</span>
    <span class="c1"># 外部から呼ばれたくないクラスメソッド</span>
    <span class="s2">"secret!!"</span>
  <span class="k">end</span>

  <span class="c1"># secret_dataをprivateなクラスメソッドにする</span>
  <span class="nb">private_class_method</span> <span class="ss">:secret_data</span>
<span class="k">end</span>
</pre></div></div>

<div class="code-frame" data-lang="rb"><div class="highlight"><pre><span></span><span class="no">User</span><span class="o">.</span><span class="n">secret_data</span>
<span class="c1"># =&gt; NoMethodError: private method `secret_data' called for User:Class</span>
</pre></div></div>

<p>ですが、privateなインスタンスメソッドを作るときに比べると手間がかかるので、「どうしても」という場合以外は「クラスメソッドはpublicのままにしておく」という選択肢もアリかもしれません。<br>
（そもそもクラスメソッドを多用しすぎている場合は、クラス設計に何か問題がある可能性が高いです）</p>

<p>参考： <a href="http://tmtms.hatenablog.com/entry/20100629/ruby_private_class_method" rel="nofollow noopener" target="_blank">クラスメソッドのprivate化 - @tmtms のメモ</a></p>

<h3>
<span id="privateメソッドはそのクラスでしか呼び出せないと勘違いしない" class="fragment"></span><a href="#private%E3%83%A1%E3%82%BD%E3%83%83%E3%83%89%E3%81%AF%E3%81%9D%E3%81%AE%E3%82%AF%E3%83%A9%E3%82%B9%E3%81%A7%E3%81%97%E3%81%8B%E5%91%BC%E3%81%B3%E5%87%BA%E3%81%9B%E3%81%AA%E3%81%84%E3%81%A8%E5%8B%98%E9%81%95%E3%81%84%E3%81%97%E3%81%AA%E3%81%84"><i class="fa fa-link"></i></a>privateメソッドはそのクラスでしか呼び出せない、と勘違いしない</h3>

<p>以下のようにprivateなインスタンスメソッド（<code>secret_price</code>）を定義したとします。</p>

<div class="code-frame" data-lang="rb"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Item</span>
  <span class="kp">private</span>

  <span class="k">def</span> <span class="nf">secret_price</span>
    <span class="mi">1000</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div></div>

<p>さらに、上の<code>Item</code>クラスを継承したクラスを定義します。この中で<code>secret_price</code>メソッドを呼び出すようにします。</p>

<div class="code-frame" data-lang="rb"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Book</span> <span class="o">&lt;</span> <span class="no">Item</span>
  <span class="k">def</span> <span class="nf">public_price</span>
    <span class="n">secret_price</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div></div>

<p>すると、<code>Book</code>クラスのインスタンスから問題なく（<code>public_price</code>メソッド経由で）<code>secret_price</code>メソッドを呼び出すことができます。 </p>

<div class="code-frame" data-lang="rb"><div class="highlight"><pre><span></span><span class="n">book</span> <span class="o">=</span> <span class="no">Book</span><span class="o">.</span><span class="n">new</span>
<span class="n">book</span><span class="o">.</span><span class="n">public_price</span>
<span class="c1"># =&gt; 1000</span>
</pre></div></div>

<p>Javaや.NETの経験が長いと、privateメソッドはそのクラスでしか呼び出せないと思ってしまいがちですが、Rubyでは継承先でprivateメソッドが呼ばれる可能性があります。<br>
そのクラスの中で呼び出されていないからといって安易にprivateメソッドを削除すると、継承先のクラスで呼び出されたときにエラーが発生するかもしれないので気をつけてください。</p>

<p>参考：<a href="http://blog.jnito.com/entry/20120315/1331754912" rel="nofollow noopener" target="_blank">JavaやC#の常識が通用しないRubyのprivateメソッド - give IT a try</a> </p>

<h3>
<span id="size---1ではなくマイナスのインデックスで最後の文字や要素を指定する" class="fragment"></span><a href="#size---1%E3%81%A7%E3%81%AF%E3%81%AA%E3%81%8F%E3%83%9E%E3%82%A4%E3%83%8A%E3%82%B9%E3%81%AE%E3%82%A4%E3%83%B3%E3%83%87%E3%83%83%E3%82%AF%E3%82%B9%E3%81%A7%E6%9C%80%E5%BE%8C%E3%81%AE%E6%96%87%E5%AD%97%E3%82%84%E8%A6%81%E7%B4%A0%E3%82%92%E6%8C%87%E5%AE%9A%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>size - 1ではなく、マイナスのインデックスで最後の文字や要素を指定する</h3>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="n">numbers</span> <span class="o">=</span> <span class="o">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="o">]</span>
<span class="nb">name</span> <span class="o">=</span> <span class="s1">'Taro Yamada'</span>

<span class="n">numbers</span><span class="o">[</span><span class="n">numbers</span><span class="o">.</span><span class="n">size</span> <span class="o">-</span> <span class="mi">1</span><span class="o">]</span> <span class="c1"># =&gt; 5</span>
<span class="nb">name</span><span class="o">[</span><span class="nb">name</span><span class="o">.</span><span class="n">size</span> <span class="o">-</span> <span class="mi">1</span><span class="o">]</span> <span class="c1"># =&gt; 'a'</span>

<span class="n">numbers</span><span class="o">[</span><span class="mi">1</span><span class="o">..</span><span class="n">numbers</span><span class="o">.</span><span class="n">size</span> <span class="o">-</span> <span class="mi">2</span><span class="o">]</span> <span class="c1"># =&gt; [2, 3, 4]</span>
<span class="nb">name</span><span class="o">[</span><span class="mi">1</span><span class="o">..</span><span class="n">name</span><span class="o">.</span><span class="n">size</span> <span class="o">-</span> <span class="mi">2</span><span class="o">]</span> <span class="c1"># =&gt; "aro Yamad"</span>
</pre></div></div>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="n">numbers</span> <span class="o">=</span> <span class="o">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="o">]</span>
<span class="nb">name</span> <span class="o">=</span> <span class="s1">'Taro Yamada'</span>

<span class="n">numbers</span><span class="o">[-</span><span class="mi">1</span><span class="o">]</span> <span class="c1"># =&gt; 5</span>
<span class="nb">name</span><span class="o">[-</span><span class="mi">1</span><span class="o">]</span> <span class="c1"># =&gt; 'a'</span>

<span class="n">numbers</span><span class="o">[</span><span class="mi">1</span><span class="o">..-</span><span class="mi">2</span><span class="o">]</span> <span class="c1"># =&gt; [2, 3, 4]</span>
<span class="nb">name</span><span class="o">[</span><span class="mi">1</span><span class="o">..-</span><span class="mi">2</span><span class="o">]</span> <span class="c1"># =&gt; "aro Yamad"</span>
</pre></div></div>

<h3>
<span id="配列の便利なメソッドいろいろ" class="fragment"></span><a href="#%E9%85%8D%E5%88%97%E3%81%AE%E4%BE%BF%E5%88%A9%E3%81%AA%E3%83%A1%E3%82%BD%E3%83%83%E3%83%89%E3%81%84%E3%82%8D%E3%81%84%E3%82%8D"><i class="fa fa-link"></i></a>配列の便利なメソッドいろいろ</h3>

<h4>
<span id="find-最初に見つかったものを返す" class="fragment"></span><a href="#find-%E6%9C%80%E5%88%9D%E3%81%AB%E8%A6%8B%E3%81%A4%E3%81%8B%E3%81%A3%E3%81%9F%E3%82%82%E3%81%AE%E3%82%92%E8%BF%94%E3%81%99"><i class="fa fa-link"></i></a>find: 最初に見つかったものを返す</h4>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">find_admin</span><span class="p">(</span><span class="n">users</span><span class="p">)</span>
  <span class="n">users</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">user</span><span class="o">|</span>
    <span class="k">return</span> <span class="n">user</span> <span class="k">if</span> <span class="n">user</span><span class="o">.</span><span class="n">admin?</span>
  <span class="k">end</span>
  <span class="kp">nil</span>
<span class="k">end</span>
</pre></div></div>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">find_admin</span><span class="p">(</span><span class="n">users</span><span class="p">)</span>
  <span class="n">users</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="o">&amp;</span><span class="ss">:admin?</span><span class="p">)</span>
<span class="k">end</span>
</pre></div></div>

<p>最初の見つかった要素のインデックスを返す場合は<code>find_index</code>。</p>

<h4>
<span id="select-条件に合うものすべてを返す" class="fragment"></span><a href="#select-%E6%9D%A1%E4%BB%B6%E3%81%AB%E5%90%88%E3%81%86%E3%82%82%E3%81%AE%E3%81%99%E3%81%B9%E3%81%A6%E3%82%92%E8%BF%94%E3%81%99"><i class="fa fa-link"></i></a>select: 条件に合うものすべてを返す</h4>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">find_admins</span><span class="p">(</span><span class="n">users</span><span class="p">)</span>
  <span class="n">admins</span> <span class="o">=</span> <span class="o">[]</span>
  <span class="n">users</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">user</span><span class="o">|</span>
    <span class="n">admins</span> <span class="o">&lt;&lt;</span> <span class="n">user</span> <span class="k">if</span> <span class="n">user</span><span class="o">.</span><span class="n">admin?</span>
  <span class="k">end</span>
  <span class="n">admins</span>
<span class="k">end</span>
</pre></div></div>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">find_admins</span><span class="p">(</span><span class="n">users</span><span class="p">)</span>
  <span class="n">users</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="o">&amp;</span><span class="ss">:admin?</span><span class="p">)</span>
<span class="k">end</span>
</pre></div></div>

<p><code>select</code>とは反対で<code>false</code>になる要素だけを集める場合は<code>reject</code>。</p>

<h4>
<span id="count-条件に合う要素の数を返す" class="fragment"></span><a href="#count-%E6%9D%A1%E4%BB%B6%E3%81%AB%E5%90%88%E3%81%86%E8%A6%81%E7%B4%A0%E3%81%AE%E6%95%B0%E3%82%92%E8%BF%94%E3%81%99"><i class="fa fa-link"></i></a>count: 条件に合う要素の数を返す</h4>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">count_admin</span><span class="p">(</span><span class="n">users</span><span class="p">)</span>
  <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
  <span class="n">users</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">user</span><span class="o">|</span>
    <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span> <span class="k">if</span> <span class="n">user</span><span class="o">.</span><span class="n">admin?</span>
  <span class="k">end</span>
  <span class="n">count</span>
<span class="k">end</span>
</pre></div></div>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">count_admin</span><span class="p">(</span><span class="n">users</span><span class="p">)</span>
  <span class="n">users</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="o">&amp;</span><span class="ss">:admin?</span><span class="p">)</span>
<span class="k">end</span>
</pre></div></div>

<h4>
<span id="map-ある配列から別の配列を作る" class="fragment"></span><a href="#map-%E3%81%82%E3%82%8B%E9%85%8D%E5%88%97%E3%81%8B%E3%82%89%E5%88%A5%E3%81%AE%E9%85%8D%E5%88%97%E3%82%92%E4%BD%9C%E3%82%8B"><i class="fa fa-link"></i></a>map: ある配列から別の配列を作る</h4>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">user_names</span><span class="p">(</span><span class="n">users</span><span class="p">)</span>
  <span class="n">names</span> <span class="o">=</span> <span class="o">[]</span>
  <span class="n">users</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">user</span><span class="o">|</span>
    <span class="n">names</span> <span class="o">&lt;&lt;</span> <span class="n">user</span><span class="o">.</span><span class="n">name</span>
  <span class="k">end</span>
  <span class="n">names</span>
<span class="k">end</span>
</pre></div></div>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">user_names</span><span class="p">(</span><span class="n">users</span><span class="p">)</span>
  <span class="n">users</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="o">&amp;</span><span class="ss">:name</span><span class="p">)</span>
<span class="k">end</span>
</pre></div></div>

<h4>
<span id="flat_map-mapの結果をネストしないフラットな配列として受け取る" class="fragment"></span><a href="#flat_map-map%E3%81%AE%E7%B5%90%E6%9E%9C%E3%82%92%E3%83%8D%E3%82%B9%E3%83%88%E3%81%97%E3%81%AA%E3%81%84%E3%83%95%E3%83%A9%E3%83%83%E3%83%88%E3%81%AA%E9%85%8D%E5%88%97%E3%81%A8%E3%81%97%E3%81%A6%E5%8F%97%E3%81%91%E5%8F%96%E3%82%8B"><i class="fa fa-link"></i></a>flat_map: mapの結果をネストしないフラットな配列として受け取る</h4>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="n">nested_array</span> <span class="o">=</span> <span class="o">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="o">]</span><span class="p">,</span> <span class="o">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="o">]]</span>
<span class="n">mapped_array</span> <span class="o">=</span> <span class="n">nested_array</span><span class="o">.</span><span class="n">map</span> <span class="p">{</span><span class="o">|</span><span class="n">array</span><span class="o">|</span> <span class="n">array</span><span class="o">.</span><span class="n">map</span> <span class="p">{</span><span class="o">|</span><span class="n">n</span><span class="o">|</span> <span class="n">n</span> <span class="o">*</span> <span class="mi">10</span> <span class="p">}</span> <span class="p">}</span>
<span class="c1"># =&gt; [[10, 20, 30], [40, 50, 60]]</span>
<span class="n">flat_array</span> <span class="o">=</span> <span class="n">mapped_array</span><span class="o">.</span><span class="n">flatten</span>
<span class="c1"># =&gt; [10, 20, 30, 40, 50, 60]</span>
</pre></div></div>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="n">nested_array</span> <span class="o">=</span> <span class="o">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="o">]</span><span class="p">,</span> <span class="o">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="o">]]</span>
<span class="n">flat_array</span> <span class="o">=</span> <span class="n">nested_array</span><span class="o">.</span><span class="n">flat_map</span> <span class="p">{</span><span class="o">|</span><span class="n">array</span><span class="o">|</span> <span class="n">array</span><span class="o">.</span><span class="n">map</span> <span class="p">{</span><span class="o">|</span><span class="n">n</span><span class="o">|</span> <span class="n">n</span> <span class="o">*</span> <span class="mi">10</span> <span class="p">}</span> <span class="p">}</span>
<span class="c1"># =&gt; [10, 20, 30, 40, 50, 60]</span>
</pre></div></div>

<h4>
<span id="compact-nil以外の要素を集める" class="fragment"></span><a href="#compact-nil%E4%BB%A5%E5%A4%96%E3%81%AE%E8%A6%81%E7%B4%A0%E3%82%92%E9%9B%86%E3%82%81%E3%82%8B"><i class="fa fa-link"></i></a>compact: nil以外の要素を集める</h4>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="n">numbmers_and_nil</span> <span class="o">=</span> <span class="o">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="kp">nil</span><span class="p">,</span> <span class="kp">nil</span><span class="p">,</span> <span class="mi">6</span><span class="o">]</span>
<span class="n">only_numbers</span> <span class="o">=</span> <span class="n">numbmers_and_nil</span><span class="o">.</span><span class="n">reject</span><span class="p">(</span><span class="o">&amp;</span><span class="ss">:nil?</span><span class="p">)</span> <span class="c1"># =&gt; [1, 2, 3, 6]</span>
</pre></div></div>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="n">numbers_and_nil</span> <span class="o">=</span> <span class="o">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="kp">nil</span><span class="p">,</span> <span class="kp">nil</span><span class="p">,</span> <span class="mi">6</span><span class="o">]</span>
<span class="n">only_numbers</span> <span class="o">=</span> <span class="n">numbers_and_nil</span><span class="o">.</span><span class="n">compact</span> <span class="c1"># =&gt; [1, 2, 3, 6]</span>
</pre></div></div>

<h4>
<span id="any-最低でも1つ条件に合う要素があればtrueを返す" class="fragment"></span><a href="#any-%E6%9C%80%E4%BD%8E%E3%81%A7%E3%82%821%E3%81%A4%E6%9D%A1%E4%BB%B6%E3%81%AB%E5%90%88%E3%81%86%E8%A6%81%E7%B4%A0%E3%81%8C%E3%81%82%E3%82%8C%E3%81%B0true%E3%82%92%E8%BF%94%E3%81%99"><i class="fa fa-link"></i></a>any?: 最低でも1つ条件に合う要素があればtrueを返す</h4>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">contains_nil?</span><span class="p">(</span><span class="n">users</span><span class="p">)</span>
  <span class="n">users</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">user</span><span class="o">|</span>
    <span class="k">return</span> <span class="kp">true</span> <span class="k">if</span> <span class="n">user</span><span class="o">.</span><span class="n">nil?</span>
  <span class="k">end</span>
  <span class="kp">false</span>
<span class="k">end</span>
</pre></div></div>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">contains_nil?</span><span class="p">(</span><span class="n">users</span><span class="p">)</span>
  <span class="n">users</span><span class="o">.</span><span class="n">any?</span><span class="p">(</span><span class="o">&amp;</span><span class="ss">:nil?</span><span class="p">)</span>
<span class="k">end</span>
</pre></div></div>

<p>すべての要素が条件に合っている場合に<code>true</code>を返す場合は<code>all?</code>。</p>

<h4>
<span id="empty-1件もなければtrueを返す" class="fragment"></span><a href="#empty-1%E4%BB%B6%E3%82%82%E3%81%AA%E3%81%91%E3%82%8C%E3%81%B0true%E3%82%92%E8%BF%94%E3%81%99"><i class="fa fa-link"></i></a>empty?: 1件もなければtrueを返す</h4>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="nb">puts</span> <span class="s2">"empty!"</span> <span class="k">if</span> <span class="n">users</span><span class="o">.</span><span class="n">size</span> <span class="o">==</span> <span class="mi">0</span>
</pre></div></div>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="nb">puts</span> <span class="s2">"empty!"</span> <span class="k">if</span> <span class="n">users</span><span class="o">.</span><span class="n">empty?</span>
</pre></div></div>

<h4>
<span id="firstlast-最初と最後の要素を返す" class="fragment"></span><a href="#firstlast-%E6%9C%80%E5%88%9D%E3%81%A8%E6%9C%80%E5%BE%8C%E3%81%AE%E8%A6%81%E7%B4%A0%E3%82%92%E8%BF%94%E3%81%99"><i class="fa fa-link"></i></a>first/last: 最初と最後の要素を返す</h4>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="n">first_user</span> <span class="o">=</span> <span class="n">users</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span>
<span class="n">last_user</span> <span class="o">=</span> <span class="n">users</span><span class="o">[</span><span class="n">users</span><span class="o">.</span><span class="n">size</span> <span class="o">-</span> <span class="mi">1</span><span class="o">]</span>
</pre></div></div>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="n">first_user</span> <span class="o">=</span> <span class="n">users</span><span class="o">.</span><span class="n">first</span>
<span class="n">last_user</span> <span class="o">=</span> <span class="n">users</span><span class="o">.</span><span class="n">last</span>
</pre></div></div>

<h4>
<span id="sample-任意の要素を返す" class="fragment"></span><a href="#sample-%E4%BB%BB%E6%84%8F%E3%81%AE%E8%A6%81%E7%B4%A0%E3%82%92%E8%BF%94%E3%81%99"><i class="fa fa-link"></i></a>sample: 任意の要素を返す</h4>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="n">users</span><span class="o">[</span><span class="nb">rand</span><span class="p">(</span><span class="n">users</span><span class="o">.</span><span class="n">size</span><span class="p">)</span><span class="o">]</span>
</pre></div></div>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="n">users</span><span class="o">.</span><span class="n">sample</span>
</pre></div></div>

<h4>
<span id="each_with_index-eachでループしつつカウンタも同時に取得する" class="fragment"></span><a href="#each_with_index-each%E3%81%A7%E3%83%AB%E3%83%BC%E3%83%97%E3%81%97%E3%81%A4%E3%81%A4%E3%82%AB%E3%82%A6%E3%83%B3%E3%82%BF%E3%82%82%E5%90%8C%E6%99%82%E3%81%AB%E5%8F%96%E5%BE%97%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>each_with_index: eachでループしつつ、カウンタも同時に取得する</h4>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="n">counter</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">users</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">user</span><span class="o">|</span>
  <span class="nb">puts</span> <span class="s2">", "</span> <span class="k">if</span> <span class="n">counter</span> <span class="o">&gt;</span> <span class="mi">0</span>
  <span class="nb">puts</span> <span class="n">user</span><span class="o">.</span><span class="n">name</span>
  <span class="n">counter</span> <span class="o">+=</span> <span class="mi">1</span>
<span class="k">end</span>
</pre></div></div>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="n">users</span><span class="o">.</span><span class="n">each_with_index</span> <span class="o">|</span><span class="n">user</span><span class="p">,</span> <span class="n">counter</span><span class="o">|</span>
  <span class="nb">puts</span> <span class="s2">", "</span> <span class="k">if</span> <span class="n">counter</span> <span class="o">&gt;</span> <span class="mi">0</span>
  <span class="nb">puts</span> <span class="n">user</span><span class="o">.</span><span class="n">name</span>
<span class="k">end</span>
</pre></div></div>

<h4>
<span id="ループ処理系のメソッド--with_index-カウンタ付きで元のループ処理を実行する" class="fragment"></span><a href="#%E3%83%AB%E3%83%BC%E3%83%97%E5%87%A6%E7%90%86%E7%B3%BB%E3%81%AE%E3%83%A1%E3%82%BD%E3%83%83%E3%83%89--with_index-%E3%82%AB%E3%82%A6%E3%83%B3%E3%82%BF%E4%BB%98%E3%81%8D%E3%81%A7%E5%85%83%E3%81%AE%E3%83%AB%E3%83%BC%E3%83%97%E5%87%A6%E7%90%86%E3%82%92%E5%AE%9F%E8%A1%8C%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>ループ処理系のメソッド + with_index: カウンタ付きで元のループ処理を実行する</h4>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="n">counter</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">users_with_index</span> <span class="o">=</span> <span class="n">users</span><span class="o">.</span><span class="n">map</span> <span class="k">do</span> <span class="o">|</span><span class="n">user</span><span class="o">|</span>
  <span class="o">[</span><span class="n">counter</span><span class="p">,</span> <span class="n">user</span><span class="o">]</span>
  <span class="n">counter</span> <span class="o">+=</span> <span class="mi">1</span>
<span class="k">end</span>
</pre></div></div>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="n">users_with_index</span> <span class="o">=</span> <span class="n">users</span><span class="o">.</span><span class="n">map</span><span class="o">.</span><span class="n">with_index</span> <span class="k">do</span> <span class="o">|</span><span class="n">user</span><span class="p">,</span> <span class="n">counter</span><span class="o">|</span>
  <span class="o">[</span><span class="n">counter</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">user</span><span class="o">]</span>
<span class="k">end</span>
</pre></div></div>

<p><code>with_index</code>はカウンタの初期値を指定できます。（デフォルトはゼロ）<br>
なので、上のコードは次のように書いても同じです。</p>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="n">users_with_index</span> <span class="o">=</span> <span class="n">users</span><span class="o">.</span><span class="n">map</span><span class="o">.</span><span class="n">with_index</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">user</span><span class="p">,</span> <span class="n">counter</span><span class="o">|</span>
  <span class="o">[</span><span class="n">counter</span><span class="p">,</span> <span class="n">user</span><span class="o">]</span>
<span class="k">end</span>
</pre></div></div>

<h4>
<span id="join-配列を1つの文字列として返す" class="fragment"></span><a href="#join-%E9%85%8D%E5%88%97%E3%82%921%E3%81%A4%E3%81%AE%E6%96%87%E5%AD%97%E5%88%97%E3%81%A8%E3%81%97%E3%81%A6%E8%BF%94%E3%81%99"><i class="fa fa-link"></i></a>join: 配列を1つの文字列として返す</h4>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">numbers_text</span><span class="p">(</span><span class="n">numbers</span><span class="p">)</span>
  <span class="n">text</span> <span class="o">=</span> <span class="s1">''</span>
  <span class="n">numbers</span><span class="o">.</span><span class="n">each_with_index</span> <span class="k">do</span> <span class="o">|</span><span class="n">number</span><span class="p">,</span> <span class="n">i</span><span class="o">|</span>
    <span class="n">text</span> <span class="o">+=</span> <span class="s1">', '</span> <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="mi">0</span>
    <span class="n">text</span> <span class="o">+=</span> <span class="n">number</span><span class="o">.</span><span class="n">to_s</span>
  <span class="k">end</span>
  <span class="n">text</span>
<span class="k">end</span>
</pre></div></div>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">numbers_text</span><span class="p">(</span><span class="n">numbers</span><span class="p">)</span>
  <span class="n">numbers</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">', '</span><span class="p">)</span> <span class="c1"># [1, 2, 3] =&gt; "1, 2, 3"</span>
<span class="k">end</span>
</pre></div></div>

<h4>
<span id="maxmax_by-最大の要素を返す" class="fragment"></span><a href="#maxmax_by-%E6%9C%80%E5%A4%A7%E3%81%AE%E8%A6%81%E7%B4%A0%E3%82%92%E8%BF%94%E3%81%99"><i class="fa fa-link"></i></a>max/max_by: 最大の要素を返す</h4>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">oldest_user</span><span class="p">(</span><span class="n">users</span><span class="p">)</span>
  <span class="n">oldest</span> <span class="o">=</span> <span class="kp">nil</span>
  <span class="n">users</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">user</span><span class="o">|</span>
    <span class="n">oldest</span> <span class="o">=</span> <span class="n">user</span> <span class="k">if</span> <span class="n">oldest</span><span class="o">.</span><span class="n">nil?</span> <span class="o">||</span> <span class="n">user</span><span class="o">.</span><span class="n">age</span> <span class="o">&gt;</span> <span class="n">oldest</span><span class="o">.</span><span class="n">age</span>
  <span class="k">end</span>
  <span class="n">oldet</span>
<span class="k">end</span>
</pre></div></div>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">oldest_user</span><span class="p">(</span><span class="n">users</span><span class="p">)</span>
  <span class="n">users</span><span class="o">.</span><span class="n">max_by</span><span class="p">(</span><span class="o">&amp;</span><span class="ss">:age</span><span class="p">)</span>
<span class="k">end</span>
</pre></div></div>

<p>単純な数値や文字列の配列なら<code>numbers.max</code>だけでもOK。<br>
最小の要素を返す場合は<code>min</code>や<code>min_by</code>を使う。</p>

<h4>
<span id="each_with_object-ループを回しつつ別のオブジェクトを組み立ててそれを返す" class="fragment"></span><a href="#each_with_object-%E3%83%AB%E3%83%BC%E3%83%97%E3%82%92%E5%9B%9E%E3%81%97%E3%81%A4%E3%81%A4%E5%88%A5%E3%81%AE%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%82%92%E7%B5%84%E3%81%BF%E7%AB%8B%E3%81%A6%E3%81%A6%E3%81%9D%E3%82%8C%E3%82%92%E8%BF%94%E3%81%99"><i class="fa fa-link"></i></a>each_with_object: ループを回しつつ、別のオブジェクトを組み立ててそれを返す</h4>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">admin_names</span><span class="p">(</span><span class="n">users</span><span class="p">)</span>
  <span class="n">ret</span> <span class="o">=</span> <span class="o">[]</span>
  <span class="n">users</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">user</span><span class="o">|</span>
    <span class="n">ret</span> <span class="o">&lt;&lt;</span> <span class="n">user</span><span class="o">.</span><span class="n">name</span> <span class="k">if</span> <span class="n">user</span><span class="o">.</span><span class="n">admin?</span>
  <span class="k">end</span>
  <span class="n">ret</span>
<span class="k">end</span>
</pre></div></div>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">admin_names</span><span class="p">(</span><span class="n">users</span><span class="p">)</span>
  <span class="n">users</span><span class="o">.</span><span class="n">each_with_object</span><span class="p">(</span><span class="o">[]</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">user</span><span class="p">,</span> <span class="n">names</span><span class="o">|</span>
    <span class="n">names</span> <span class="o">&lt;&lt;</span> <span class="n">user</span><span class="o">.</span><span class="n">name</span> <span class="k">if</span> <span class="n">user</span><span class="o">.</span><span class="n">admin?</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div></div>

<p>まあ、上のサンプルのような場合は<code>users.select(&amp;:admin?).map(&amp;:name)</code>って書けばいいんですけどね。</p>

<h4>
<span id="その他の情報源" class="fragment"></span><a href="#%E3%81%9D%E3%81%AE%E4%BB%96%E3%81%AE%E6%83%85%E5%A0%B1%E6%BA%90"><i class="fa fa-link"></i></a>その他の情報源</h4>

<p>全部挙げていくとキリがないので、配列を操作するロジックを書く前にまず、<code>Array</code>や<code>Enumerable</code>のAPIドキュメントを読んで「車輪の再発明」をしていないかチェックしてください。</p>

<ul>
<li><a href="http://ruby-doc.org/core-2.0.0/Array.html" class="autolink" rel="nofollow noopener" target="_blank">http://ruby-doc.org/core-2.0.0/Array.html</a></li>
<li><a href="http://ruby-doc.org/core-2.0.0/Enumerable.html" class="autolink" rel="nofollow noopener" target="_blank">http://ruby-doc.org/core-2.0.0/Enumerable.html</a></li>
</ul>

<h3>
<span id="英語の文法や品詞を意識する" class="fragment"></span><a href="#%E8%8B%B1%E8%AA%9E%E3%81%AE%E6%96%87%E6%B3%95%E3%82%84%E5%93%81%E8%A9%9E%E3%82%92%E6%84%8F%E8%AD%98%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>英語の文法や品詞を意識する</h3>

<p>ケースバイケースで原則から外れる場合は十分ありえますが、文法や品詞の使いわけに明らかな逸脱(間違い)があると読み手が混乱します。</p>

<h4>
<span id="配列の変数名や配列を返すメソッド名は原則複数形にする" class="fragment"></span><a href="#%E9%85%8D%E5%88%97%E3%81%AE%E5%A4%89%E6%95%B0%E5%90%8D%E3%82%84%E9%85%8D%E5%88%97%E3%82%92%E8%BF%94%E3%81%99%E3%83%A1%E3%82%BD%E3%83%83%E3%83%89%E5%90%8D%E3%81%AF%E5%8E%9F%E5%89%87%E8%A4%87%E6%95%B0%E5%BD%A2%E3%81%AB%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>配列の変数名や配列を返すメソッド名は原則複数形にする</h4>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="c1"># number = [1, 2, 3]</span>
<span class="n">numbers</span> <span class="o">=</span> <span class="o">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="o">]</span>
</pre></div></div>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="c1"># def find_even_number(numbers)</span>
<span class="c1">#   numbers.select(&amp;:even?)</span>
<span class="c1"># end</span>

<span class="k">def</span> <span class="nf">find_even_numbers</span><span class="p">(</span><span class="n">numbers</span><span class="p">)</span>
  <span class="n">numbers</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="o">&amp;</span><span class="ss">:even?</span><span class="p">)</span>
<span class="k">end</span>
</pre></div></div>

<h4>
<span id="プロパティや変数名クラス名は原則名詞や形容詞に何かを操作するメソッドは原則動詞にする" class="fragment"></span><a href="#%E3%83%97%E3%83%AD%E3%83%91%E3%83%86%E3%82%A3%E3%82%84%E5%A4%89%E6%95%B0%E5%90%8D%E3%82%AF%E3%83%A9%E3%82%B9%E5%90%8D%E3%81%AF%E5%8E%9F%E5%89%87%E5%90%8D%E8%A9%9E%E3%82%84%E5%BD%A2%E5%AE%B9%E8%A9%9E%E3%81%AB%E4%BD%95%E3%81%8B%E3%82%92%E6%93%8D%E4%BD%9C%E3%81%99%E3%82%8B%E3%83%A1%E3%82%BD%E3%83%83%E3%83%89%E3%81%AF%E5%8E%9F%E5%89%87%E5%8B%95%E8%A9%9E%E3%81%AB%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>プロパティや変数名、クラス名は原則名詞や形容詞に、何かを操作するメソッドは原則動詞にする</h4>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="c1"># reserve=予約する(動詞)、reserved=予約済みである(形容詞)</span>

<span class="c1"># chair.reserve?</span>
<span class="n">chair</span><span class="o">.</span><span class="n">reserved?</span> <span class="c1"># =&gt; false</span>

<span class="c1"># chair.reserved('Tom')</span>
<span class="n">chair</span><span class="o">.</span><span class="n">reserve</span><span class="p">(</span><span class="s1">'Tom'</span><span class="p">)</span>

<span class="n">chair</span><span class="o">.</span><span class="n">reserved?</span> <span class="c1"># =&gt; true</span>
</pre></div></div>

<p>その他、英語の使い方については以下の記事も参考になると思うので、あわせて読んでみてください。</p>

<p><a href="http://qiita.com/jnchito/items/459d58ba652bf4763820" id="reference-07d52428bc467bd2ade9">モデルやメソッドに名前を付けるときは英語の品詞に気をつけよう</a></p>

<h2>
<span id="rails編" class="fragment"></span><a href="#rails%E7%B7%A8"><i class="fa fa-link"></i></a>Rails編</h2>

<p>以下はRails開発時にのみ使えるイディオムやメソッドです。<br>
標準のRubyでは用意されていないので使えません。</p>

<p>ただし、大半のメソッドはActiveSupportのGemを導入することで使えるようになります。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ gem install active_support
</pre></div></div>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="nb">require</span> <span class="s1">'active_support/all'</span>

<span class="kp">nil</span><span class="o">.</span><span class="n">blank?</span> <span class="c1"># =&gt; true</span>
</pre></div></div>

<h3>
<span id="nilチェックの代わりにobjecttrymethod_nameを使う" class="fragment"></span><a href="#nil%E3%83%81%E3%82%A7%E3%83%83%E3%82%AF%E3%81%AE%E4%BB%A3%E3%82%8F%E3%82%8A%E3%81%ABobjecttrymethod_name%E3%82%92%E4%BD%BF%E3%81%86"><i class="fa fa-link"></i></a>nilチェックの代わりにObject#try(:method_name)を使う</h3>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="n">parent</span><span class="o">.</span><span class="n">children</span> <span class="o">&amp;&amp;</span> <span class="n">parent</span><span class="o">.</span><span class="n">children</span><span class="o">.</span><span class="n">singleton?</span>
  <span class="n">singleton</span> <span class="o">=</span> <span class="n">parent</span><span class="o">.</span><span class="n">children</span><span class="o">.</span><span class="n">first</span>
  <span class="n">send_mail_to</span><span class="p">(</span><span class="n">singleton</span><span class="p">)</span>
<span class="k">end</span>
</pre></div></div>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="c1"># childrenがnilならtry(:singleton?)はnilを返す</span>
<span class="c1"># nilでなければ、children.singleton?が普通に呼ばれる</span>
<span class="k">if</span> <span class="n">parent</span><span class="o">.</span><span class="n">children</span><span class="o">.</span><span class="n">try</span><span class="p">(</span><span class="ss">:singleton?</span><span class="p">)</span>
  <span class="n">singleton</span> <span class="o">=</span> <span class="n">parent</span><span class="o">.</span><span class="n">children</span><span class="o">.</span><span class="n">first</span>
  <span class="n">send_mail_to</span><span class="p">(</span><span class="n">singleton</span><span class="p">)</span>
<span class="k">end</span>
</pre></div></div>

<h3>
<span id="nilもしくは空っぽい値のチェックにblankpresentを使う" class="fragment"></span><a href="#nil%E3%82%82%E3%81%97%E3%81%8F%E3%81%AF%E7%A9%BA%E3%81%A3%E3%81%BD%E3%81%84%E5%80%A4%E3%81%AE%E3%83%81%E3%82%A7%E3%83%83%E3%82%AF%E3%81%ABblankpresent%E3%82%92%E4%BD%BF%E3%81%86"><i class="fa fa-link"></i></a>「nil、もしくは空っぽい値」のチェックにblank?/present?を使う</h3>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="c1"># String</span>
<span class="nb">name</span> <span class="o">=</span> <span class="kp">nil</span>
<span class="nb">name</span><span class="o">.</span><span class="n">blank?</span> <span class="c1"># =&gt; true</span>
<span class="nb">name</span> <span class="o">=</span> <span class="s2">""</span>
<span class="nb">name</span><span class="o">.</span><span class="n">blank?</span> <span class="c1"># =&gt; true</span>
<span class="nb">name</span> <span class="o">=</span> <span class="s2">" "</span>
<span class="nb">name</span><span class="o">.</span><span class="n">blank?</span> <span class="c1"># =&gt; true</span>
<span class="nb">name</span> <span class="o">=</span> <span class="s2">"Tom"</span>
<span class="nb">name</span><span class="o">.</span><span class="n">blank?</span> <span class="c1"># =&gt; false</span>

<span class="c1"># Array</span>
<span class="n">numbers</span> <span class="o">=</span> <span class="kp">nil</span>
<span class="n">numbers</span><span class="o">.</span><span class="n">blank?</span> <span class="c1"># =&gt; true</span>
<span class="n">numbers</span> <span class="o">=</span> <span class="o">[]</span>
<span class="n">numbers</span><span class="o">.</span><span class="n">blank?</span> <span class="c1"># =&gt; true</span>
<span class="n">numbers</span> <span class="o">=</span> <span class="o">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="o">]</span>
<span class="n">numbers</span><span class="o">.</span><span class="n">blank?</span> <span class="c1"># =&gt; false</span>

<span class="c1"># Hash</span>
<span class="n">params</span> <span class="o">=</span> <span class="kp">nil</span>
<span class="n">params</span><span class="o">.</span><span class="n">blank?</span> <span class="c1"># =&gt; true</span>
<span class="n">params</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">params</span><span class="o">.</span><span class="n">blank?</span> <span class="c1"># =&gt; true</span>
<span class="n">params</span> <span class="o">=</span> <span class="p">{</span> <span class="nb">name</span><span class="p">:</span> <span class="s2">"Tom"</span><span class="p">,</span> <span class="ss">email</span><span class="p">:</span> <span class="s2">"hoge@hoge.com"</span> <span class="p">}</span>
<span class="n">params</span><span class="o">.</span><span class="n">blank?</span> <span class="c1"># =&gt; false</span>
</pre></div></div>

<p><code>present?</code>は<code>blank?</code>の反対で、「空ではない値」のときに<code>true</code>を返します。</p>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="c1"># String</span>
<span class="nb">name</span> <span class="o">=</span> <span class="s2">""</span>
<span class="nb">name</span><span class="o">.</span><span class="n">present?</span> <span class="c1"># =&gt; false</span>
<span class="nb">name</span> <span class="o">=</span> <span class="s2">"Tom"</span>
<span class="nb">name</span><span class="o">.</span><span class="n">present?</span> <span class="c1"># =&gt; true</span>
</pre></div></div>

<h3>
<span id="空なら別の値を代入の代わりにpresenceを使う" class="fragment"></span><a href="#%E7%A9%BA%E3%81%AA%E3%82%89%E5%88%A5%E3%81%AE%E5%80%A4%E3%82%92%E4%BB%A3%E5%85%A5%E3%81%AE%E4%BB%A3%E3%82%8F%E3%82%8A%E3%81%ABpresence%E3%82%92%E4%BD%BF%E3%81%86"><i class="fa fa-link"></i></a>「空なら別の値を代入」の代わりにpresenceを使う</h3>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="n">user</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">blank?</span>
  <span class="nb">name</span> <span class="o">=</span> <span class="s2">"What's your name?"</span>
<span class="k">else</span>
  <span class="nb">name</span> <span class="o">=</span> <span class="n">user</span><span class="o">.</span><span class="n">name</span>
<span class="k">end</span>
</pre></div></div>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="nb">name</span> <span class="o">=</span> <span class="n">user</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">presence</span> <span class="o">||</span> <span class="s2">"What's your name?"</span>
</pre></div></div>

<p><code>"".presence</code>や<code>[].presence</code>は<code>nil</code>を返すので注意してください。(<code>blank?</code>かどうかを判別しているため)</p>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="nb">name</span> <span class="o">=</span> <span class="s2">""</span>
<span class="nb">puts</span> <span class="nb">name</span><span class="o">.</span><span class="n">presence</span> <span class="o">||</span> <span class="s2">"What's your name?"</span> <span class="c1"># =&gt; What's your name?</span>
</pre></div></div>

<p><strong>2014.11.12 追記</strong><br>
<code>presence</code> を使うと便利なイディオムがありました。</p>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="c1"># Newsが1件でも存在すればメール送信＆ツイート発信</span>
<span class="n">good_news</span> <span class="o">=</span> <span class="n">company</span><span class="o">.</span><span class="n">good_news</span>
<span class="k">if</span> <span class="n">good_news</span><span class="o">.</span><span class="n">count</span> <span class="o">&gt;</span> <span class="mi">0</span>
  <span class="n">send_mail</span><span class="p">(</span><span class="n">good_news</span><span class="p">)</span>
  <span class="n">tweet</span><span class="p">(</span><span class="n">good_news</span><span class="p">)</span>
<span class="k">end</span>
</pre></div></div>

<p>上のようなコードはpresenceを使うと一行で代入と条件判断ができます。</p>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="n">good_news</span> <span class="o">=</span> <span class="n">company</span><span class="o">.</span><span class="n">good_news</span><span class="o">.</span><span class="n">presence</span>
  <span class="n">send_mail</span><span class="p">(</span><span class="n">good_news</span><span class="p">)</span>
  <span class="n">tweet</span><span class="p">(</span><span class="n">good_news</span><span class="p">)</span>
<span class="k">end</span>
</pre></div></div>

<p><code>company.good_news.presence</code> は <code>company.good_news</code> が0件だと <code>nil</code> が返るので <code>false</code> 扱いになり、if文の中が実行されません。</p>

<p>同様に、「文字列に何かしらの値が入っている場合」を分岐させるケースでも役立ちます。</p>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="c1"># nameがnilや空文字列（""）だったらメッセージを表示したくない</span>
<span class="nb">name</span> <span class="o">=</span> <span class="n">blog</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">name</span>
<span class="k">if</span> <span class="nb">name</span><span class="o">.</span><span class="n">present?</span>
  <span class="n">show_message</span><span class="p">(</span><span class="s2">"Hello, </span><span class="si">#{</span><span class="nb">name</span><span class="si">}</span><span class="s2">!"</span><span class="p">)</span>
<span class="k">end</span>
</pre></div></div>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="nb">name</span> <span class="o">=</span> <span class="n">blog</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">presence</span>
  <span class="n">show_message</span><span class="p">(</span><span class="s2">"Hello, </span><span class="si">#{</span><span class="nb">name</span><span class="si">}</span><span class="s2">!"</span><span class="p">)</span>
<span class="k">end</span>
</pre></div></div>

<h3>
<span id="存在の有無を確認する場合はblankpresentを積極的に使う" class="fragment"></span><a href="#%E5%AD%98%E5%9C%A8%E3%81%AE%E6%9C%89%E7%84%A1%E3%82%92%E7%A2%BA%E8%AA%8D%E3%81%99%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AFblankpresent%E3%82%92%E7%A9%8D%E6%A5%B5%E7%9A%84%E3%81%AB%E4%BD%BF%E3%81%86"><i class="fa fa-link"></i></a>存在の有無を確認する場合はblank?/present?を積極的に使う</h3>

<p>Rubyの標準APIでは<code>nil?</code>や<code>empty?</code>のように「無い」を表すメソッドしかないので、「もしあるなら」をコードで表現するとぎこちなくなります。</p>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="n">user</span>
  <span class="c1"># userがいれば、何かを実行する</span>
  <span class="c1"># =&gt;「もしuserがいれば」ではなく「もしuserなら」と読めてしまう</span>
<span class="k">end</span>

<span class="k">unless</span> <span class="n">users</span><span class="o">.</span><span class="n">empty?</span>
  <span class="c1"># usersが空ではないなら、何かを実行する</span>
  <span class="c1"># =&gt; empty?の逆がないので、否定形で条件を書かざるを得ない</span>
<span class="k">end</span>
</pre></div></div>

<p>Railsであれば、<code>present?</code>を使って「もしあれば」を明示的に書くことができます。</p>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="n">user</span><span class="o">.</span><span class="n">present?</span>
  <span class="c1"># userがいれば、何かを実行する</span>
  <span class="c1"># =&gt;「もしuserがいれば」と明示的に読める</span>
<span class="k">end</span>

<span class="k">if</span> <span class="n">users</span><span class="o">.</span><span class="n">present?</span>
  <span class="c1"># usersに1つ以上の要素があれば、何かを実行する</span>
  <span class="c1"># =&gt; 肯定形で条件が書ける</span>
<span class="k">end</span>
</pre></div></div>

<h3>
<span id="文字列の存在チェックはnilではなくblankを積極的に使う" class="fragment"></span><a href="#%E6%96%87%E5%AD%97%E5%88%97%E3%81%AE%E5%AD%98%E5%9C%A8%E3%83%81%E3%82%A7%E3%83%83%E3%82%AF%E3%81%AFnil%E3%81%A7%E3%81%AF%E3%81%AA%E3%81%8Fblank%E3%82%92%E7%A9%8D%E6%A5%B5%E7%9A%84%E3%81%AB%E4%BD%BF%E3%81%86"><i class="fa fa-link"></i></a>文字列の存在チェックはnil?ではなく、blank?を積極的に使う</h3>

<p>「文字列に値が入っていない」状態は<code>nil</code>と<code>""</code>の区別をしないことが多いと思います。<br>
(<code>nil</code>は空白だが<code>""</code>は空白ではない、とわざわざ区別することはほとんどないはず)</p>

<p><code>nil?</code>を使うと<code>""</code>は入力済みであるというような条件文を書いてしまう恐れがあります。<br>
なのでRailsでは<code>nil?</code>の代わりに<code>blank?</code>を使う癖を付けておく方が良いです。</p>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="n">email</span><span class="o">.</span><span class="n">nil?</span>
  <span class="c1"># =&gt; emailが "" なら入力済みとして扱われてしまい、コールされない</span>
  <span class="nb">puts</span> <span class="s2">"Please input email!"</span>
<span class="k">end</span>
</pre></div></div>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="n">email</span><span class="o">.</span><span class="n">blank?</span>
  <span class="c1"># =&gt; emailが "" や " " の場合でも未入力と扱われるので、コールされる</span>
  <span class="nb">puts</span> <span class="s2">"Please input email!"</span>
<span class="k">end</span>
</pre></div></div>

<p>同じ理由でModelの<code>validates</code>で指定するオプションも、特別な理由が無い限り<code>allow_nil: true</code>ではなく、<code>allow_blank: true</code>を使うようにしましょう。</p>

<ul>
<li>参考: <a href="http://edgeguides.rubyonrails.org/active_record_validations.html#common-validation-options" class="autolink" rel="nofollow noopener" target="_blank">http://edgeguides.rubyonrails.org/active_record_validations.html#common-validation-options</a>
</li>
</ul>

<h3>
<span id="ロジックではなくクエリでフィルタリングする" class="fragment"></span><a href="#%E3%83%AD%E3%82%B8%E3%83%83%E3%82%AF%E3%81%A7%E3%81%AF%E3%81%AA%E3%81%8F%E3%82%AF%E3%82%A8%E3%83%AA%E3%81%A7%E3%83%95%E3%82%A3%E3%83%AB%E3%82%BF%E3%83%AA%E3%83%B3%E3%82%B0%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>ロジックではなく、クエリでフィルタリングする</h3>

<p>Ruby編で配列の便利なメソッドをいろいろ紹介しましたが、RailsのModelをフィルタリングしたい場合は配列を操作するのではなく、データベース(SQL)上でフィルタリングした方が効率的です。</p>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">admin_users</span>
  <span class="no">User</span><span class="o">.</span><span class="n">all</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="o">&amp;</span><span class="ss">:admin?</span><span class="p">)</span>
<span class="k">end</span>
</pre></div></div>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">admin_users</span>
  <span class="no">User</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="ss">admin</span><span class="p">:</span> <span class="kp">true</span><span class="p">)</span>
<span class="k">end</span>
</pre></div></div>

<h3>
<span id="mapではなくpluckを使う" class="fragment"></span><a href="#map%E3%81%A7%E3%81%AF%E3%81%AA%E3%81%8Fpluck%E3%82%92%E4%BD%BF%E3%81%86"><i class="fa fa-link"></i></a>mapではなく、pluckを使う</h3>

<p><code>pluck</code>を使うと必要なカラムだけをデータベースから取得するので処理効率が良くなります。</p>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">admin_user_ids</span>
  <span class="no">User</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="ss">admin</span><span class="p">:</span> <span class="kp">true</span><span class="p">)</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="o">&amp;</span><span class="ss">:id</span><span class="p">)</span>
<span class="k">end</span>
</pre></div></div>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">admin_user_ids</span>
  <span class="no">User</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="ss">admin</span><span class="p">:</span> <span class="kp">true</span><span class="p">)</span><span class="o">.</span><span class="n">pluck</span><span class="p">(</span><span class="ss">:id</span><span class="p">)</span>
<span class="k">end</span>
</pre></div></div>

<h3>
<span id="tap-の代わりに-new--ブロックを使う" class="fragment"></span><a href="#tap-%E3%81%AE%E4%BB%A3%E3%82%8F%E3%82%8A%E3%81%AB-new--%E3%83%96%E3%83%AD%E3%83%83%E3%82%AF%E3%82%92%E4%BD%BF%E3%81%86"><i class="fa fa-link"></i></a>tap の代わりに new + ブロックを使う</h3>

<p>ActiveRecordであれば <code>new</code> に直接ブロックを渡して、プロパティをセットすることができます。<br>
（ <a href="/sachin21" class="user-mention js-hovercard" title="sachin21" data-hovercard-target-type="user" data-hovercard-target-name="sachin21">@sachin21</a> さん、コメントありがとうございます！ ）</p>

<div class="code-frame" data-lang="rb"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">build_user</span>
  <span class="no">User</span><span class="o">.</span><span class="n">new</span><span class="o">.</span><span class="n">tap</span> <span class="k">do</span> <span class="o">|</span><span class="n">user</span><span class="o">|</span>
    <span class="n">user</span><span class="o">.</span><span class="n">email</span> <span class="o">=</span> <span class="s2">"hoge@hoge.com"</span>
    <span class="n">user</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">"Taro Yamada"</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div></div>

<div class="code-frame" data-lang="rb"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">build_user</span>
  <span class="no">User</span><span class="o">.</span><span class="n">new</span> <span class="k">do</span> <span class="o">|</span><span class="n">user</span><span class="o">|</span>
    <span class="n">user</span><span class="o">.</span><span class="n">email</span> <span class="o">=</span> <span class="s2">"hoge@hoge.com"</span>
    <span class="n">user</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">"Taro Yamada"</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div></div>

<h3>
<span id="railsにおけるタイムゾーンの扱いを理解する" class="fragment"></span><a href="#rails%E3%81%AB%E3%81%8A%E3%81%91%E3%82%8B%E3%82%BF%E3%82%A4%E3%83%A0%E3%82%BE%E3%83%BC%E3%83%B3%E3%81%AE%E6%89%B1%E3%81%84%E3%82%92%E7%90%86%E8%A7%A3%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>Railsにおけるタイムゾーンの扱いを理解する</h3>

<p>Railsの場合、application.rbに設定したタイムゾーンが使われる場合と、環境変数 TZ に設定されたタイムゾーンが使われる場合の2パターンがあります。<br>
両者のタイムゾーン設定が異なる場合、予期せぬ不具合が生まれる恐れがあります。</p>

<p>そうした不具合を防ぐため、コード内ではapplication.rbに設定されたタイムゾーンを使うように統一することが望ましいです。<br>
具体的には、<code>Date.today</code>ではなく<code>Date.current</code>を、<code>Time.now</code>ではなく<code>Time.current</code>（または<code>Time.zone.now</code>）を使うようにしてください。</p>

<p>詳しい内容はこちらの記事にまとめてあるので読んでみてください。</p>

<p><a href="http://qiita.com/jnchito/items/cae89ee43c30f5d6fa2c" id="reference-736e0eb36801122e7fea">RubyとRailsにおけるTime, Date, DateTime, TimeWithZoneの違い</a></p>

<h3>
<span id="日付や日時の便利メソッドを活用する" class="fragment"></span><a href="#%E6%97%A5%E4%BB%98%E3%82%84%E6%97%A5%E6%99%82%E3%81%AE%E4%BE%BF%E5%88%A9%E3%83%A1%E3%82%BD%E3%83%83%E3%83%89%E3%82%92%E6%B4%BB%E7%94%A8%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>日付や日時の便利メソッドを活用する</h3>

<h4>
<span id="システム日付から見た昨日明日を求める" class="fragment"></span><a href="#%E3%82%B7%E3%82%B9%E3%83%86%E3%83%A0%E6%97%A5%E4%BB%98%E3%81%8B%E3%82%89%E8%A6%8B%E3%81%9F%E6%98%A8%E6%97%A5%E6%98%8E%E6%97%A5%E3%82%92%E6%B1%82%E3%82%81%E3%82%8B"><i class="fa fa-link"></i></a>システム日付から見た昨日/明日を求める</h4>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="no">Date</span><span class="o">.</span><span class="n">current</span> <span class="c1"># =&gt; Tue, 05 Nov 2013</span>

<span class="no">Date</span><span class="o">.</span><span class="n">yesterday</span>  <span class="c1"># =&gt; Tue, 04 Nov 2013</span>
<span class="no">Date</span><span class="o">.</span><span class="n">tomorrow</span> <span class="c1"># =&gt;  # =&gt; Tue, 06 Nov 2013</span>
</pre></div></div>

<h4>
<span id="システム日時から見たxx年前後xxヶ月前後xx週間前後xx日前後etcを求める" class="fragment"></span><a href="#%E3%82%B7%E3%82%B9%E3%83%86%E3%83%A0%E6%97%A5%E6%99%82%E3%81%8B%E3%82%89%E8%A6%8B%E3%81%9Fxx%E5%B9%B4%E5%89%8D%E5%BE%8Cxx%E3%83%B6%E6%9C%88%E5%89%8D%E5%BE%8Cxx%E9%80%B1%E9%96%93%E5%89%8D%E5%BE%8Cxx%E6%97%A5%E5%89%8D%E5%BE%8Cetc%E3%82%92%E6%B1%82%E3%82%81%E3%82%8B"><i class="fa fa-link"></i></a>システム日時から見たxx年前/後、xxヶ月前/後、xx週間前/後、xx日前/後、etcを求める</h4>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="no">Date</span><span class="o">.</span><span class="n">current</span> <span class="c1"># =&gt; 2013-11-05</span>

<span class="mi">2</span><span class="o">.</span><span class="n">years</span><span class="o">.</span><span class="n">ago</span>   <span class="c1"># =&gt; 2011-11-05 06:21:40 +0900</span>
<span class="mi">2</span><span class="o">.</span><span class="n">years</span><span class="o">.</span><span class="n">since</span> <span class="c1"># =&gt; 2015-11-05 06:21:40 +0900</span>

<span class="mi">2</span><span class="o">.</span><span class="n">months</span><span class="o">.</span><span class="n">ago</span>   <span class="c1"># =&gt; 2013-09-05 06:21:40 +0900</span>
<span class="mi">2</span><span class="o">.</span><span class="n">months</span><span class="o">.</span><span class="n">since</span> <span class="c1"># =&gt; 2014-01-05 06:21:40 +0900</span>
</pre></div></div>

<p>weeks, days, hours, minutes, secondsでも同じように使えます。</p>

<h4>
<span id="特定の日付日時から見た昨日明日先週来週xx日前後etcを求める" class="fragment"></span><a href="#%E7%89%B9%E5%AE%9A%E3%81%AE%E6%97%A5%E4%BB%98%E6%97%A5%E6%99%82%E3%81%8B%E3%82%89%E8%A6%8B%E3%81%9F%E6%98%A8%E6%97%A5%E6%98%8E%E6%97%A5%E5%85%88%E9%80%B1%E6%9D%A5%E9%80%B1xx%E6%97%A5%E5%89%8D%E5%BE%8Cetc%E3%82%92%E6%B1%82%E3%82%81%E3%82%8B"><i class="fa fa-link"></i></a>特定の日付/日時から見た昨日/明日、先週/来週、xx日前/後、etcを求める</h4>

<p>結果を求める方法は一つだけでなく、いろいろな書き方があります。</p>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="n">date</span> <span class="o">=</span> <span class="no">Date</span><span class="o">.</span><span class="n">current</span> <span class="c1"># =&gt; 2013-11-05</span>

<span class="n">date</span><span class="o">.</span><span class="n">yesterday</span> <span class="c1"># =&gt; 2013-11-04</span>
<span class="n">date</span><span class="o">.</span><span class="n">tomoroow</span>  <span class="c1"># =&gt; 2013-11-06</span>

<span class="n">date</span><span class="o">.</span><span class="n">prev_day</span> <span class="c1"># =&gt; 2013-11-04</span>
<span class="n">date</span><span class="o">.</span><span class="n">next_day</span> <span class="c1"># =&gt; 2013-11-06</span>

<span class="n">date</span><span class="o">.</span><span class="n">prev_day</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="c1"># =&gt; 2013-11-03</span>
<span class="n">date</span><span class="o">.</span><span class="n">next_day</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="c1"># =&gt; 2013-11-07</span>

<span class="n">date</span> <span class="o">-</span> <span class="mi">2</span><span class="o">.</span><span class="n">days</span> <span class="c1"># =&gt; 2013-11-03</span>
<span class="n">date</span> <span class="o">+</span> <span class="mi">2</span><span class="o">.</span><span class="n">days</span> <span class="c1"># =&gt; 2013-11-07</span>

<span class="n">date</span><span class="o">.</span><span class="n">ago</span><span class="p">(</span><span class="mi">2</span><span class="o">.</span><span class="n">days</span><span class="p">)</span>   <span class="c1"># =&gt; 2013-11-03</span>
<span class="n">date</span><span class="o">.</span><span class="n">since</span><span class="p">(</span><span class="mi">2</span><span class="o">.</span><span class="n">days</span><span class="p">)</span> <span class="c1"># =&gt; 2013-11-07</span>

<span class="n">date</span><span class="o">.</span><span class="n">prev_month</span> <span class="c1"># =&gt; 2013-10-05</span>
<span class="n">date</span><span class="o">.</span><span class="n">next_month</span> <span class="c1"># =&gt; 2013-12-05</span>

<span class="n">date</span><span class="o">.</span><span class="n">prev_month</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="c1"># =&gt; 2013-09-05</span>
<span class="n">date</span><span class="o">.</span><span class="n">next_month</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="c1"># =&gt; 2014-01-05</span>

<span class="n">date</span> <span class="o">-</span> <span class="mi">2</span><span class="o">.</span><span class="n">months</span> <span class="c1"># =&gt; 2013-09-05</span>
<span class="n">date</span> <span class="o">+</span> <span class="mi">2</span><span class="o">.</span><span class="n">months</span> <span class="c1"># =&gt; 2014-01-05</span>

<span class="n">date</span><span class="o">.</span><span class="n">months_ago</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>   <span class="c1"># =&gt; 2013-09-05</span>
<span class="n">date</span><span class="o">.</span><span class="n">months_since</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="c1"># =&gt; 2014-01-05</span>

<span class="n">date</span><span class="o">.</span><span class="n">ago</span><span class="p">(</span><span class="mi">2</span><span class="o">.</span><span class="n">months</span><span class="p">)</span>   <span class="c1"># =&gt; 2013-09-05</span>
<span class="n">date</span><span class="o">.</span><span class="n">since</span><span class="p">(</span><span class="mi">2</span><span class="o">.</span><span class="n">months</span><span class="p">)</span> <span class="c1"># =&gt; 2014-01-05</span>
</pre></div></div>

<p>week, year等でも考え方は同じです。<br>
Time型でも使えます。</p>

<h4>
<span id="ある日付日時から見た始まりと終わりの日付日時を求める" class="fragment"></span><a href="#%E3%81%82%E3%82%8B%E6%97%A5%E4%BB%98%E6%97%A5%E6%99%82%E3%81%8B%E3%82%89%E8%A6%8B%E3%81%9F%E5%A7%8B%E3%81%BE%E3%82%8A%E3%81%A8%E7%B5%82%E3%82%8F%E3%82%8A%E3%81%AE%E6%97%A5%E4%BB%98%E6%97%A5%E6%99%82%E3%82%92%E6%B1%82%E3%82%81%E3%82%8B"><i class="fa fa-link"></i></a>ある日付/日時から見た始まりと終わりの日付/日時を求める</h4>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="n">date</span> <span class="o">=</span> <span class="no">Date</span><span class="o">.</span><span class="n">current</span> <span class="c1"># =&gt; 2013-11-05</span>

<span class="n">date</span><span class="o">.</span><span class="n">beginning_of_month</span> <span class="c1"># =&gt; 2013-11-01</span>
<span class="n">date</span><span class="o">.</span><span class="n">end_of_month</span>       <span class="c1"># =&gt; 2013-11-30</span>

<span class="n">date</span><span class="o">.</span><span class="n">beginning_of_day</span> <span class="c1"># =&gt; 2013-11-05 00:00:00 +0900</span>
<span class="n">date</span><span class="o">.</span><span class="n">end_of_day</span>       <span class="c1"># =&gt; 2013-11-05 23:59:59 +0900</span>

<span class="n">datetime</span> <span class="o">=</span> <span class="no">Time</span><span class="o">.</span><span class="n">current</span> <span class="c1"># =&gt; 2013-11-05T06:43:53+09:00</span>

<span class="n">datetime</span><span class="o">.</span><span class="n">beginning_of_hour</span> <span class="c1"># =&gt; 2013-11-05T06:00:00+09:00</span>
<span class="n">datetime</span><span class="o">.</span><span class="n">end_of_hour</span>       <span class="c1"># =&gt; 2013-11-05T06:59:59+09:00</span>
</pre></div></div>

<p>week, year等でも考え方は同じです。<br>
Time型でも使えます。</p>

<h4>
<span id="1日の初めから終わりまで月の初めから終わりまでといった範囲を求める" class="fragment"></span><a href="#1%E6%97%A5%E3%81%AE%E5%88%9D%E3%82%81%E3%81%8B%E3%82%89%E7%B5%82%E3%82%8F%E3%82%8A%E3%81%BE%E3%81%A7%E6%9C%88%E3%81%AE%E5%88%9D%E3%82%81%E3%81%8B%E3%82%89%E7%B5%82%E3%82%8F%E3%82%8A%E3%81%BE%E3%81%A7%E3%81%A8%E3%81%84%E3%81%A3%E3%81%9F%E7%AF%84%E5%9B%B2%E3%82%92%E6%B1%82%E3%82%81%E3%82%8B"><i class="fa fa-link"></i></a>1日の初めから終わりまで、月の初めから終わりまで、といった範囲を求める</h4>

<p><code>all_xxx</code> メソッドを使うと、「xxxの始めから終わりまで」をRangeオブジェクトとして取得できます。</p>

<div class="code-frame" data-lang="rb"><div class="highlight"><pre><span></span><span class="n">time</span> <span class="o">=</span> <span class="no">Time</span><span class="o">.</span><span class="n">current</span>
<span class="c1"># =&gt; Mon, 23 Nov 2015 16:45:23 JST +09:00</span>

<span class="c1"># その日の始まりと終わりの日時を取得</span>
<span class="n">time</span><span class="o">.</span><span class="n">all_day</span>
<span class="c1"># =&gt; Mon, 23 Nov 2015 00:00:00 JST +09:00..Mon, 23 Nov 2015 23:59:59 JST +09:00</span>

<span class="c1"># その日から見た月の始まりと、月の終わりの日時を取得する</span>
<span class="n">time</span><span class="o">.</span><span class="n">all_month</span>
<span class="c1"># =&gt; Sun, 01 Nov 2015 00:00:00 JST +09:00..Mon, 30 Nov 2015 23:59:59 JST +09:00</span>

<span class="c1"># その日から見た年の始まりと、年の終わりの日時を取得する</span>
<span class="n">time</span><span class="o">.</span><span class="n">all_year</span>
<span class="c1"># =&gt; Thu, 01 Jan 2015 00:00:00 JST +09:00..Thu, 31 Dec 2015 23:59:59 JST +09:00</span>
</pre></div></div>

<p>他にも<code>all_week</code>や<code>all_quarter</code>といったメソッドが定義されています。</p>

<h4>
<span id="ある日付から見た先週来週のxx曜日を求める" class="fragment"></span><a href="#%E3%81%82%E3%82%8B%E6%97%A5%E4%BB%98%E3%81%8B%E3%82%89%E8%A6%8B%E3%81%9F%E5%85%88%E9%80%B1%E6%9D%A5%E9%80%B1%E3%81%AExx%E6%9B%9C%E6%97%A5%E3%82%92%E6%B1%82%E3%82%81%E3%82%8B"><i class="fa fa-link"></i></a>ある日付から見た先週/来週のxx曜日を求める</h4>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="n">date</span> <span class="o">=</span> <span class="no">Date</span><span class="o">.</span><span class="n">current</span> <span class="c1"># =&gt; 2013-11-05</span>
<span class="n">date</span><span class="o">.</span><span class="n">tuesday?</span>     <span class="c1"># =&gt; true</span>

<span class="n">date</span><span class="o">.</span><span class="n">prev_week</span><span class="p">(</span><span class="ss">:monday</span><span class="p">)</span> <span class="c1"># =&gt; 2013-10-28</span>
<span class="n">date</span><span class="o">.</span><span class="n">next_week</span><span class="p">(</span><span class="ss">:monday</span><span class="p">)</span> <span class="c1"># =&gt; 2013-11-11</span>
</pre></div></div>

<p>他の曜日でも考え方は同じです。</p>

<h4>
<span id="その他の情報源-1" class="fragment"></span><a href="#%E3%81%9D%E3%81%AE%E4%BB%96%E3%81%AE%E6%83%85%E5%A0%B1%E6%BA%90-1"><i class="fa fa-link"></i></a>その他の情報源</h4>

<p>日付、日時の操作例を挙げ始めるとキリがないので、詳しくはActiveSupportのAPIを参照してください。</p>

<ul>
<li><a href="http://guides.rubyonrails.org/active_support_core_extensions.html" class="autolink" rel="nofollow noopener" target="_blank">http://guides.rubyonrails.org/active_support_core_extensions.html</a></li>
</ul>

<h3>
<span id="語形やフォーマットを変える-20131114追記" class="fragment"></span><a href="#%E8%AA%9E%E5%BD%A2%E3%82%84%E3%83%95%E3%82%A9%E3%83%BC%E3%83%9E%E3%83%83%E3%83%88%E3%82%92%E5%A4%89%E3%81%88%E3%82%8B-20131114%E8%BF%BD%E8%A8%98"><i class="fa fa-link"></i></a>語形やフォーマットを変える (2013.11.14追記)</h3>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="c1"># キャメルケースにする</span>
<span class="s2">"my_book"</span><span class="o">.</span><span class="n">camelize</span> <span class="c1"># =&gt; "MyBook"</span>

<span class="c1"># アンダースコア区切り(スネークケース)にする</span>
<span class="s2">"MyBook"</span><span class="o">.</span><span class="n">underscore</span> <span class="c1"># =&gt; "my_book"</span>

<span class="c1"># ダッシュ(ハイフン)区切りにする</span>
<span class="s2">"my_book"</span><span class="o">.</span><span class="n">dasherize</span> <span class="c1"># =&gt; "my-book"</span>

<span class="c1"># 複数形にする</span>
<span class="s2">"book"</span><span class="o">.</span><span class="n">pluralize</span>            <span class="c1"># =&gt; "books"</span>
<span class="s2">"person"</span><span class="o">.</span><span class="n">pluralize</span>          <span class="c1"># =&gt; "people"</span>
<span class="s2">"fish"</span><span class="o">.</span><span class="n">pluralize</span>            <span class="c1"># =&gt; "fish"</span>
<span class="s2">"book_and_person"</span><span class="o">.</span><span class="n">pluralize</span> <span class="c1"># =&gt; "book_and_people"</span>
<span class="s2">"book and person"</span><span class="o">.</span><span class="n">pluralize</span> <span class="c1"># =&gt; "book and people"</span>
<span class="s2">"BookAndPerson"</span><span class="o">.</span><span class="n">pluralize</span>   <span class="c1"># =&gt; "BookAndPeople"</span>

<span class="c1"># 単数形にする</span>
<span class="s2">"books"</span><span class="o">.</span><span class="n">singularize</span>            <span class="c1"># =&gt; "book"</span>
<span class="s2">"people"</span><span class="o">.</span><span class="n">singularize</span>           <span class="c1"># =&gt; "person"</span>
<span class="s2">"books_and_people"</span><span class="o">.</span><span class="n">singularize</span> <span class="c1"># =&gt; "books_and_person"</span>
<span class="s2">"books and people"</span><span class="o">.</span><span class="n">singularize</span> <span class="c1"># =&gt; "books and person"</span>
<span class="s2">"BooksAndPeople"</span><span class="o">.</span><span class="n">singularize</span>   <span class="c1"># =&gt; "BooksAndPerson"</span>

<span class="c1"># 人間が読みやすくする(一文字目は大文字 + スペース区切り)</span>
<span class="s2">"my_books"</span><span class="o">.</span><span class="n">humanize</span> <span class="c1"># =&gt; "My books"</span>

<span class="c1"># タイトル形式にする(各単語の一文字目が大文字 + スペース区切り)</span>
<span class="s2">"my_books"</span><span class="o">.</span><span class="n">titleize</span> <span class="c1"># =&gt; "My Books"</span>

<span class="c1"># クラス名にする(キャメルケース + 単数形)</span>
<span class="s2">"my_book"</span><span class="o">.</span><span class="n">classify</span>  <span class="c1"># =&gt; "MyBook"</span>
<span class="s2">"my_books"</span><span class="o">.</span><span class="n">classify</span> <span class="c1"># =&gt; "MyBook"</span>

<span class="c1"># テーブル名にする(アンダースコア区切り + 複数形)</span>
<span class="s2">"my_book"</span><span class="o">.</span><span class="n">tableize</span> <span class="c1"># =&gt; "my_books"</span>
<span class="s2">"MyBook"</span><span class="o">.</span><span class="n">tableize</span>  <span class="c1"># =&gt; "my_books"</span>
</pre></div></div>

<h4>
<span id="その他の情報源-2" class="fragment"></span><a href="#%E3%81%9D%E3%81%AE%E4%BB%96%E3%81%AE%E6%83%85%E5%A0%B1%E6%BA%90-2"><i class="fa fa-link"></i></a>その他の情報源</h4>

<p><code>constantize</code>や<code>demodulize</code>など、個人的に使用頻度が低そうだなと思ったメソッドは紹介しませんでした。<br>
他のメソッドも気になる方はRailsのAPIドキュメントを参照して下さい。</p>

<ul>
<li><a href="http://apidock.com/rails/String" class="autolink" rel="nofollow noopener" target="_blank">http://apidock.com/rails/String</a></li>
</ul>

<h3>
<span id="余分なスペースや改行を取り除く-20131114追記" class="fragment"></span><a href="#%E4%BD%99%E5%88%86%E3%81%AA%E3%82%B9%E3%83%9A%E3%83%BC%E3%82%B9%E3%82%84%E6%94%B9%E8%A1%8C%E3%82%92%E5%8F%96%E3%82%8A%E9%99%A4%E3%81%8F-20131114%E8%BF%BD%E8%A8%98"><i class="fa fa-link"></i></a>余分なスペースや改行を取り除く (2013.11.14追記)</h3>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="s2">"    My    </span><span class="se">\r\n</span><span class="s2">  </span><span class="se">\t</span><span class="s2">   </span><span class="se">\n</span><span class="s2">   books       "</span><span class="o">.</span><span class="n">squish</span> <span class="c1"># =&gt; "My books"</span>
</pre></div></div>

<h2>
<span id="まとめ-良いコードを書くために" class="fragment"></span><a href="#%E3%81%BE%E3%81%A8%E3%82%81-%E8%89%AF%E3%81%84%E3%82%B3%E3%83%BC%E3%83%89%E3%82%92%E6%9B%B8%E3%81%8F%E3%81%9F%E3%82%81%E3%81%AB"><i class="fa fa-link"></i></a>まとめ: 良いコードを書くために</h2>

<h3>
<span id="魚ではなく魚の釣り方を覚える" class="fragment"></span><a href="#%E9%AD%9A%E3%81%A7%E3%81%AF%E3%81%AA%E3%81%8F%E9%AD%9A%E3%81%AE%E9%87%A3%E3%82%8A%E6%96%B9%E3%82%92%E8%A6%9A%E3%81%88%E3%82%8B"><i class="fa fa-link"></i></a>魚ではなく、「魚の釣り方」を覚える</h3>

<p>「遠回り」や「車輪の再発明」をする前に、もっと良い書き方はないか、すでに同じメソッドが用意されていないか、書籍やAPIドキュメントをしっかり読みましょう。</p>

<ul>
<li>
<a href="http://goo.gl/ItJeDc" rel="nofollow noopener" target="_blank">プログラミング言語 Ruby</a> - オライリージャパン</li>
<li>
<a href="http://goo.gl/iu1Tc4" rel="nofollow noopener" target="_blank">Rails3レシピブック 190の技</a> - ソフトバンククリエイティブ</li>
<li>
<a href="http://ruby-doc.org" rel="nofollow noopener" target="_blank">ruby-doc.org</a>

<ul>
<li><a href="http://ruby-doc.org/core-2.0.0/String.html" rel="nofollow noopener" target="_blank">String</a></li>
<li><a href="http://ruby-doc.org/core-2.0.0/Array.html" rel="nofollow noopener" target="_blank">Array</a></li>
<li><a href="http://ruby-doc.org/core-2.0.0/Hash.html" rel="nofollow noopener" target="_blank">Hash</a></li>
<li><a href="http://ruby-doc.org/core-2.0.0/Enumerable.html" rel="nofollow noopener" target="_blank">Enumerable</a></li>
</ul>
</li>
<li>
<a href="http://guides.rubyonrails.org/" rel="nofollow noopener" target="_blank">RailsGuides</a>

<ul>
<li><a href="http://guides.rubyonrails.org/active_support_core_extensions.html" rel="nofollow noopener" target="_blank">Active Support Core Extensions</a></li>
<li><a href="http://guides.rubyonrails.org/active_record_querying.html" rel="nofollow noopener" target="_blank">Active Record Query Interface</a></li>
</ul>
</li>
</ul>

<h3>
<span id="チーム内でコードレビューをする" class="fragment"></span><a href="#%E3%83%81%E3%83%BC%E3%83%A0%E5%86%85%E3%81%A7%E3%82%B3%E3%83%BC%E3%83%89%E3%83%AC%E3%83%93%E3%83%A5%E3%83%BC%E3%82%92%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>チーム内でコードレビューをする</h3>

<p>書籍やAPIドキュメントだけでなく、同僚の知見も有効な情報源です。<br>
チーム内で定期的にコードレビューを行い、お互いの知見を交換しあいましょう。</p>

<p>また、コードの短さや簡潔さに凝りすぎると、独りよがりでわかりにくいコードを書いてしまう恐れもあるため、コードレビューを通じてチーム内で「わかりやすいコード」「わかりにくいコード」の判断基準を共有しておくことも重要です。</p>

<h2>
<span id="おまけ-トリビア的なテクニック" class="fragment"></span><a href="#%E3%81%8A%E3%81%BE%E3%81%91-%E3%83%88%E3%83%AA%E3%83%93%E3%82%A2%E7%9A%84%E3%81%AA%E3%83%86%E3%82%AF%E3%83%8B%E3%83%83%E3%82%AF"><i class="fa fa-link"></i></a>おまけ: トリビア的なテクニック</h2>

<p>こういう書き方もあるけど無理して使わなくても良いかも、と思うような記法も紹介しておきます。</p>

<h3>
<span id="1文字を表すのに文字を使う" class="fragment"></span><a href="#1%E6%96%87%E5%AD%97%E3%82%92%E8%A1%A8%E3%81%99%E3%81%AE%E3%81%AB%E6%96%87%E5%AD%97%E3%82%92%E4%BD%BF%E3%81%86"><i class="fa fa-link"></i></a>「1文字」を表すのに「?+文字」を使う</h3>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="s2">"index,new,create"</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">','</span><span class="p">)</span> <span class="c1"># =&gt; ["index", "new", "create"]</span>
</pre></div></div>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="s2">"index,new,create"</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="sc">?,</span><span class="p">)</span> <span class="c1"># =&gt; ["index", "new", "create"]</span>
</pre></div></div>

<p>タイプ量は減りますが、直感的なわかりやすさに関しては微妙かも・・・。</p>

<h3>
<span id="配列を順番に処理するとき直接メソッドを呼ぶ代わりにmethodnameを使う" class="fragment"></span><a href="#%E9%85%8D%E5%88%97%E3%82%92%E9%A0%86%E7%95%AA%E3%81%AB%E5%87%A6%E7%90%86%E3%81%99%E3%82%8B%E3%81%A8%E3%81%8D%E7%9B%B4%E6%8E%A5%E3%83%A1%E3%82%BD%E3%83%83%E3%83%89%E3%82%92%E5%91%BC%E3%81%B6%E4%BB%A3%E3%82%8F%E3%82%8A%E3%81%ABmethodname%E3%82%92%E4%BD%BF%E3%81%86"><i class="fa fa-link"></i></a>配列を順番に処理するとき、直接メソッドを呼ぶ代わりに"&amp;method(:name)"を使う</h3>

<p>普通にブロックを書く方が一般的ですが、<code>&amp;method(:name)</code>みたいな引数を渡すこともできます。</p>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">process_users</span>
  <span class="n">users</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">user</span><span class="o">|</span>
    <span class="n">process_user</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="k">def</span> <span class="nf">process_user</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>
  <span class="n">send_mail_to</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>
  <span class="n">user</span><span class="o">.</span><span class="n">mail_sent_at</span> <span class="o">=</span> <span class="no">Time</span><span class="o">.</span><span class="n">now</span>
  <span class="n">user</span><span class="o">.</span><span class="n">save</span>
<span class="k">end</span>
</pre></div></div>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">process_users</span>
  <span class="n">users</span><span class="o">.</span><span class="n">each</span><span class="p">(</span><span class="o">&amp;</span><span class="nb">method</span><span class="p">(</span><span class="ss">:process_user</span><span class="p">))</span>
<span class="k">end</span>

<span class="k">def</span> <span class="nf">process_user</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>
  <span class="n">send_mail_to</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>
  <span class="n">user</span><span class="o">.</span><span class="n">mail_sent_at</span> <span class="o">=</span> <span class="no">Time</span><span class="o">.</span><span class="n">now</span>
  <span class="n">user</span><span class="o">.</span><span class="n">save</span>
<span class="k">end</span>
</pre></div></div>

<h3>
<span id="配列を順番に処理するときブロックを直接書く代わりにlambdaを使う" class="fragment"></span><a href="#%E9%85%8D%E5%88%97%E3%82%92%E9%A0%86%E7%95%AA%E3%81%AB%E5%87%A6%E7%90%86%E3%81%99%E3%82%8B%E3%81%A8%E3%81%8D%E3%83%96%E3%83%AD%E3%83%83%E3%82%AF%E3%82%92%E7%9B%B4%E6%8E%A5%E6%9B%B8%E3%81%8F%E4%BB%A3%E3%82%8F%E3%82%8A%E3%81%ABlambda%E3%82%92%E4%BD%BF%E3%81%86"><i class="fa fa-link"></i></a>配列を順番に処理するとき、ブロックを直接書く代わりにlambdaを使う</h3>

<p>複雑な条件式とかをlambdaにして明示的な名前を付けておくと多少読みやすくなるかも、です。</p>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">destroy_aged_admins</span><span class="p">(</span><span class="n">users</span><span class="p">,</span> <span class="n">limit_age</span><span class="p">)</span>
  <span class="n">users</span><span class="o">.</span><span class="n">select</span><span class="p">{</span><span class="o">|</span><span class="n">user</span><span class="o">|</span> <span class="n">user</span><span class="o">.</span><span class="n">admin?</span> <span class="o">&amp;&amp;</span>  <span class="n">user</span><span class="o">.</span><span class="n">age</span> <span class="o">&gt;</span> <span class="n">limit_age</span> <span class="p">}</span><span class="o">.</span><span class="n">each</span><span class="p">(</span><span class="o">&amp;</span><span class="ss">:destroy</span><span class="p">)</span>
<span class="k">end</span>
</pre></div></div>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">destroy_aged_admins</span><span class="p">(</span><span class="n">users</span><span class="p">,</span> <span class="n">limit_age</span><span class="p">)</span>
  <span class="n">aged_admin</span> <span class="o">=</span> <span class="o">-&gt;</span><span class="p">(</span><span class="n">user</span><span class="p">){</span> <span class="n">user</span><span class="o">.</span><span class="n">admin?</span> <span class="o">&amp;&amp;</span> <span class="n">user</span><span class="o">.</span><span class="n">age</span> <span class="o">&gt;</span> <span class="n">limit_age</span> <span class="p">}</span>

  <span class="n">users</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="o">&amp;</span><span class="n">aged_admin</span><span class="p">)</span><span class="o">.</span><span class="n">each</span><span class="p">(</span><span class="o">&amp;</span><span class="ss">:destroy</span><span class="p">)</span>
<span class="k">end</span>
</pre></div></div>

<p>でも上のサンプルだとこう書いた方がわかりやすいかな。。。</p>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">destroy_aged_admins</span><span class="p">(</span><span class="n">users</span><span class="p">,</span> <span class="n">limit_age</span><span class="p">)</span>
  <span class="n">aged_admins</span> <span class="o">=</span> <span class="n">users</span><span class="o">.</span><span class="n">select</span><span class="p">{</span><span class="o">|</span><span class="n">user</span><span class="o">|</span> <span class="n">user</span><span class="o">.</span><span class="n">admin?</span> <span class="o">&amp;&amp;</span> <span class="n">user</span><span class="o">.</span><span class="n">age</span> <span class="o">&gt;</span> <span class="n">limit_age</span> <span class="p">}</span>
  <span class="n">aged_admins</span><span class="o">.</span><span class="n">each</span><span class="p">(</span><span class="o">&amp;</span><span class="ss">:destroy</span><span class="p">)</span>
<span class="k">end</span>
</pre></div></div>

<h3>
<span id="何が何でもtrueかfalseで条件分岐させたいときを使う" class="fragment"></span><a href="#%E4%BD%95%E3%81%8C%E4%BD%95%E3%81%A7%E3%82%82true%E3%81%8Bfalse%E3%81%A7%E6%9D%A1%E4%BB%B6%E5%88%86%E5%B2%90%E3%81%95%E3%81%9B%E3%81%9F%E3%81%84%E3%81%A8%E3%81%8D%E3%82%92%E4%BD%BF%E3%81%86"><i class="fa fa-link"></i></a>何が何でもtrueかfalseで条件分岐させたいとき、!!を使う</h3>

<p>Rubyでは<code>false</code>と<code>nil</code>が<code>false</code>、それ以外の値がすべて<code>true</code>と評価されます。<br>
JavaやC#を長くやっていたので最初は僕も違和感がありましたが、使っているうちにこれはこれで良くできてるなと感じてきました。</p>

<p>しかし、世の中には「わしゃtrueかfalseで条件分岐させなきゃイヤなんぢゃ！！」というプログラマもいるかもしれません。<br>
そんな人は「イヤなんぢゃ！！」の<code>!!</code>を値の前に付ければ、Rubyが必ず<code>true</code>か<code>false</code>を返してくれます。</p>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="o">!!</span><span class="kp">nil</span>   <span class="c1"># =&gt; false</span>
<span class="o">!!</span><span class="kp">false</span> <span class="c1"># =&gt; false</span>
<span class="o">!!</span><span class="mi">0</span>     <span class="c1"># =&gt; true</span>
<span class="o">!![]</span>    <span class="c1"># =&gt; true</span>
<span class="o">!!</span><span class="kp">true</span>  <span class="c1"># =&gt; true</span>
</pre></div></div>

<p>実は<code>BasicObject</code>クラスには<code>!</code>というメソッドが用意されているので、こんな書き方もできます。</p>

<div class="code-frame" data-lang="rb"><div class="highlight"><pre><span></span><span class="kp">nil</span><span class="o">.!.!</span>   <span class="c1"># =&gt; false</span>
<span class="kp">false</span><span class="o">.!.!</span> <span class="c1"># =&gt; false</span>
<span class="mi">0</span><span class="o">.!.!</span>     <span class="c1"># =&gt; true</span>
<span class="o">[].!.!</span>    <span class="c1"># =&gt; true</span>
<span class="kp">true</span><span class="o">.!.!</span>  <span class="c1"># =&gt; true</span>
</pre></div></div>

<p>このメソッドを使えば、<code>nil?</code>や<code>empty?</code>の逆も作れます。</p>

<div class="code-frame" data-lang="rb"><div class="highlight"><pre><span></span><span class="nb">puts</span> <span class="s2">"User exists!"</span> <span class="k">if</span> <span class="n">user</span><span class="o">.</span><span class="n">nil?</span><span class="o">.!</span>
<span class="nb">puts</span> <span class="s2">"Some users exist!"</span> <span class="k">if</span> <span class="n">users</span><span class="o">.</span><span class="n">empty?</span><span class="o">.!</span>
</pre></div></div>

<p>・・・が、何もそこまでがんばる必要はないんじゃないかと僕は思います ^^;</p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1" style="height:150px;">
<tr>
	<td rowspan="3">5位</td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="thumb-up-120px.png" /></i>2276</kbd>
		<a target="_blank" href="https://qiita.com/kuni-nakaji/items/5118b23bf2ea44fed96e">httpsだからというだけで安全？調べたら怖くなってきたSSLの話!？</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2014-03-14<br />16:18:11</center>
	</td>
	<td style="width:200px;">
		<!--投稿者-->
		<center>
			@<a href="user/8726.html">kuni-nakaji</a>(17件の記事)<br><img width="80" height="80" src="https://gravatar.com/avatar/616811c1dbc547b20370eb444106d841?d=https%3A%2F%2Fidenticons.github.com%2F9c6a6d1079bb1facaa63a8f0aaa5e195.png&r=x">
		</center>
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[iPhone]</b> <b>[Linux]</b> <b>[nginx]</b> <b>[CentOS]</b> <b>[Apache]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<!--
		<div style="width:350px;height:150px;overflow:scroll;">%s</div>
		-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;">
<h1>
<span id="課題" class="fragment"></span><a href="#%E8%AA%B2%E9%A1%8C"><i class="fa fa-link"></i></a>課題</h1>

<p>サイトをを立ち上げるときに当然のごとくSSL証明書をベンダーから購入して設置していたが、いざセキュリティ診断等でチェックしてもらうとSSLについての指摘を何件か受けてみた。なんでだろうと思いながらも、さらに最適なSSL設定は？と聞かれてそういえばあまり昔から手を入れたことなかったなと思い調べてみた</p>

<h1>
<span id="ssl通信が確立するまでの概要フロー" class="fragment"></span><a href="#ssl%E9%80%9A%E4%BF%A1%E3%81%8C%E7%A2%BA%E7%AB%8B%E3%81%99%E3%82%8B%E3%81%BE%E3%81%A7%E3%81%AE%E6%A6%82%E8%A6%81%E3%83%95%E3%83%AD%E3%83%BC"><i class="fa fa-link"></i></a>SSL通信が確立するまでの概要フロー</h1>

<p>SSL通信について再度おさらい</p>

<p><a href="https://camo.qiitausercontent.com/be738ffeae068d63bc67e2c99d6968202ab2d9d0/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f383732362f37626164633364322d643164612d386565332d333064612d3438343730613335336437302e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/be738ffeae068d63bc67e2c99d6968202ab2d9d0/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f383732362f37626164633364322d643164612d386565332d333064612d3438343730613335336437302e706e67" alt="ssl2.png" title="ssl2.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/8726/7badc3d2-d1da-8ee3-30da-48470a353d70.png"></a></p>

<h1>
<span id="nginxを元にしたsslの設定" class="fragment"></span><a href="#nginx%E3%82%92%E5%85%83%E3%81%AB%E3%81%97%E3%81%9Fssl%E3%81%AE%E8%A8%AD%E5%AE%9A"><i class="fa fa-link"></i></a>Nginxを元にしたSSLの設定</h1>

<p>nginxの<a href="http://nginx.org/ja/docs/http/configuring_https_servers.html" rel="nofollow noopener" target="_blank">HTTPS サーバの設定</a>を参考に、たった２行だけどSSLを考えてみる。書き方は違えどもapacheも概念は一緒のはず。</p>

<div class="code-frame" data-lang="Nginx"><div class="highlight"><pre><span></span><span class="k">ssl_protocols</span>        <span class="s">SSLv3</span> <span class="s">TLSv1</span><span class="p">;</span>
<span class="k">ssl_ciphers</span>          <span class="s">HIGH:!ADH:!MD5</span><span class="p">;</span>
</pre></div></div>

<h1>
<span id="sslプロトコルの種類を確認" class="fragment"></span><a href="#ssl%E3%83%97%E3%83%AD%E3%83%88%E3%82%B3%E3%83%AB%E3%81%AE%E7%A8%AE%E9%A1%9E%E3%82%92%E7%A2%BA%E8%AA%8D"><i class="fa fa-link"></i></a>SSLプロトコルの種類を確認</h1>

<p><a href="http://ja.wikipedia.org/wiki/Transport_Layer_Security" rel="nofollow noopener" target="_blank">wiki</a>よりプロトコルの種類を確認してみる。</p>

<table>
<thead>
<tr>
<th>略称</th>
<th>正式名称</th>
<th>開発元</th>
</tr>
</thead>
<tbody>
<tr>
<td>SSL</td>
<td>Secure Socket Layer</td>
<td>ネットスケープコミュニケーション</td>
</tr>
<tr>
<td>TLS</td>
<td>Transport Layer Security</td>
<td>IETF</td>
</tr>
</tbody>
</table>

<p>バージョン毎の概要を確認してみる。</p>

<table>
<thead>
<tr>
<th>バージョン</th>
<th style="text-align: center">安全性</th>
<th>概要</th>
</tr>
</thead>
<tbody>
<tr>
<td>SSL1.0</td>
<td style="text-align: center">✕</td>
<td>最初のSSLとして設計したが、設計レビューの時点でプロトコルの脆弱性が発見されたため破棄されている。</td>
</tr>
<tr>
<td><a href="https://tools.ietf.org/html/rfc6176" rel="nofollow noopener" target="_blank">SSL2.0</a></td>
<td style="text-align: center">✕</td>
<td>SSL1.0の問題を修正して設計後、1994年にSSL2.0として発表。その後、いくつか脆弱性が発見されてSSL3.0が登場するが、未使用でもSSL2.0が有効な状態の場合に提示する最弱のアルゴリズムを使用させるダウングレード攻撃などを受ける可能性があるので、明示的に無効にする必要がある。</td>
</tr>
<tr>
<td><a href="https://tools.ietf.org/html/rfc7568" rel="nofollow noopener" target="_blank">SSL3.0</a></td>
<td style="text-align: center">✕</td>
<td>SSL2.0の問題を修正して機能追加も行い1995年にSSL3.0として発表。ただ、古くなってきている。CVE-2014-3566で脆弱性が発生したため明示的に無効にする必要がある。</td>
</tr>
<tr>
<td><a href="https://tools.ietf.org/html/rfc2246" rel="nofollow noopener" target="_blank">TLS1.0</a></td>
<td style="text-align: center">△</td>
<td>SSL3.0とTLS1.0の両者間には正確な互換性はないがほぼ同じ。CVE-2011-3389(BEAST)による一部脆弱性を含む。</td>
</tr>
<tr>
<td><a href="https://tools.ietf.org/html/rfc4346" rel="nofollow noopener" target="_blank">TLS1.1</a></td>
<td style="text-align: center">◯</td>
<td>TLS 1.0からの変更点は、新しく発見された攻撃手法に対する耐性の強化が中心である。</td>
</tr>
<tr>
<td><a href="https://tools.ietf.org/html/rfc5246" rel="nofollow noopener" target="_blank">TLS1.2</a></td>
<td style="text-align: center">◎</td>
<td>ハッシュのアルゴリズムにSHA-256が追加されたほか、ブロック暗号について、従来のCBCモードだけではなく、GCM、CCMといった認証付き暗号が利用可能となった。</td>
</tr>
<tr>
<td><a href="https://tlswg.github.io/tls13-spec/" rel="nofollow noopener" target="_blank">TLS1.3</a></td>
<td style="text-align: center">?</td>
<td>[ドラフト]インターネット環境の変化とTLS1.2までの暗号化強度不足を改善するため2016年中に仕様化完了を目指している(らしい)</td>
</tr>
</tbody>
</table>

<p>そのため、SSLv1 / SSLv2 / SSLv3 は脆弱性があるので、 <strong>現時点で使用できるものはTLSv1以上</strong></p>

<h1>
<span id="ssl_ciphersについて調べてみる" class="fragment"></span><a href="#ssl_ciphers%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E8%AA%BF%E3%81%B9%E3%81%A6%E3%81%BF%E3%82%8B"><i class="fa fa-link"></i></a>SSL_Ciphersについて調べてみる...</h1>

<p><code>HIGH:!ADH:!MD5;</code>と書いてはあるものの、「HIGHグループでADHとMD5を使わない」という読み方であってるのか？調べてみると<a href="https://www.openssl.org/docs/apps/ciphers.html" rel="nofollow noopener" target="_blank">OpenSSL</a>で確認出来るらしい</p>

<p><code>$ openssl ciphers -v 'HIGH:!ADH:!MD5;'</code></p>

<div class="code-frame" data-lang="bash">
<div class="code-lang"><span class="bold">result</span></div>
<div class="highlight"><pre><span></span>DHE-RSA-AES256-SHA      SSLv3 <span class="nv">Kx</span><span class="o">=</span>DH       <span class="nv">Au</span><span class="o">=</span>RSA  <span class="nv">Enc</span><span class="o">=</span>AES<span class="o">(</span><span class="m">256</span><span class="o">)</span>  <span class="nv">Mac</span><span class="o">=</span>SHA1
DHE-DSS-AES256-SHA      SSLv3 <span class="nv">Kx</span><span class="o">=</span>DH       <span class="nv">Au</span><span class="o">=</span>DSS  <span class="nv">Enc</span><span class="o">=</span>AES<span class="o">(</span><span class="m">256</span><span class="o">)</span>  <span class="nv">Mac</span><span class="o">=</span>SHA1
DHE-RSA-CAMELLIA256-SHA SSLv3 <span class="nv">Kx</span><span class="o">=</span>DH       <span class="nv">Au</span><span class="o">=</span>RSA  <span class="nv">Enc</span><span class="o">=</span>Camellia<span class="o">(</span><span class="m">256</span><span class="o">)</span> <span class="nv">Mac</span><span class="o">=</span>SHA1
DHE-DSS-CAMELLIA256-SHA SSLv3 <span class="nv">Kx</span><span class="o">=</span>DH       <span class="nv">Au</span><span class="o">=</span>DSS  <span class="nv">Enc</span><span class="o">=</span>Camellia<span class="o">(</span><span class="m">256</span><span class="o">)</span> <span class="nv">Mac</span><span class="o">=</span>SHA1
AES256-SHA              SSLv3 <span class="nv">Kx</span><span class="o">=</span>RSA      <span class="nv">Au</span><span class="o">=</span>RSA  <span class="nv">Enc</span><span class="o">=</span>AES<span class="o">(</span><span class="m">256</span><span class="o">)</span>  <span class="nv">Mac</span><span class="o">=</span>SHA1
CAMELLIA256-SHA         SSLv3 <span class="nv">Kx</span><span class="o">=</span>RSA      <span class="nv">Au</span><span class="o">=</span>RSA  <span class="nv">Enc</span><span class="o">=</span>Camellia<span class="o">(</span><span class="m">256</span><span class="o">)</span> <span class="nv">Mac</span><span class="o">=</span>SHA1
PSK-AES256-CBC-SHA      SSLv3 <span class="nv">Kx</span><span class="o">=</span>PSK      <span class="nv">Au</span><span class="o">=</span>PSK  <span class="nv">Enc</span><span class="o">=</span>AES<span class="o">(</span><span class="m">256</span><span class="o">)</span>  <span class="nv">Mac</span><span class="o">=</span>SHA1
EDH-RSA-DES-CBC3-SHA    SSLv3 <span class="nv">Kx</span><span class="o">=</span>DH       <span class="nv">Au</span><span class="o">=</span>RSA  <span class="nv">Enc</span><span class="o">=</span>3DES<span class="o">(</span><span class="m">168</span><span class="o">)</span> <span class="nv">Mac</span><span class="o">=</span>SHA1
EDH-DSS-DES-CBC3-SHA    SSLv3 <span class="nv">Kx</span><span class="o">=</span>DH       <span class="nv">Au</span><span class="o">=</span>DSS  <span class="nv">Enc</span><span class="o">=</span>3DES<span class="o">(</span><span class="m">168</span><span class="o">)</span> <span class="nv">Mac</span><span class="o">=</span>SHA1
DES-CBC3-SHA            SSLv3 <span class="nv">Kx</span><span class="o">=</span>RSA      <span class="nv">Au</span><span class="o">=</span>RSA  <span class="nv">Enc</span><span class="o">=</span>3DES<span class="o">(</span><span class="m">168</span><span class="o">)</span> <span class="nv">Mac</span><span class="o">=</span>SHA1
PSK-3DES-EDE-CBC-SHA    SSLv3 <span class="nv">Kx</span><span class="o">=</span>PSK      <span class="nv">Au</span><span class="o">=</span>PSK  <span class="nv">Enc</span><span class="o">=</span>3DES<span class="o">(</span><span class="m">168</span><span class="o">)</span> <span class="nv">Mac</span><span class="o">=</span>SHA1
KRB5-DES-CBC3-SHA       SSLv3 <span class="nv">Kx</span><span class="o">=</span>KRB5     <span class="nv">Au</span><span class="o">=</span>KRB5 <span class="nv">Enc</span><span class="o">=</span>3DES<span class="o">(</span><span class="m">168</span><span class="o">)</span> <span class="nv">Mac</span><span class="o">=</span>SHA1
DHE-RSA-AES128-SHA      SSLv3 <span class="nv">Kx</span><span class="o">=</span>DH       <span class="nv">Au</span><span class="o">=</span>RSA  <span class="nv">Enc</span><span class="o">=</span>AES<span class="o">(</span><span class="m">128</span><span class="o">)</span>  <span class="nv">Mac</span><span class="o">=</span>SHA1
DHE-DSS-AES128-SHA      SSLv3 <span class="nv">Kx</span><span class="o">=</span>DH       <span class="nv">Au</span><span class="o">=</span>DSS  <span class="nv">Enc</span><span class="o">=</span>AES<span class="o">(</span><span class="m">128</span><span class="o">)</span>  <span class="nv">Mac</span><span class="o">=</span>SHA1
DHE-RSA-CAMELLIA128-SHA SSLv3 <span class="nv">Kx</span><span class="o">=</span>DH       <span class="nv">Au</span><span class="o">=</span>RSA  <span class="nv">Enc</span><span class="o">=</span>Camellia<span class="o">(</span><span class="m">128</span><span class="o">)</span> <span class="nv">Mac</span><span class="o">=</span>SHA1
DHE-DSS-CAMELLIA128-SHA SSLv3 <span class="nv">Kx</span><span class="o">=</span>DH       <span class="nv">Au</span><span class="o">=</span>DSS  <span class="nv">Enc</span><span class="o">=</span>Camellia<span class="o">(</span><span class="m">128</span><span class="o">)</span> <span class="nv">Mac</span><span class="o">=</span>SHA1
AES128-SHA              SSLv3 <span class="nv">Kx</span><span class="o">=</span>RSA      <span class="nv">Au</span><span class="o">=</span>RSA  <span class="nv">Enc</span><span class="o">=</span>AES<span class="o">(</span><span class="m">128</span><span class="o">)</span>  <span class="nv">Mac</span><span class="o">=</span>SHA1
CAMELLIA128-SHA         SSLv3 <span class="nv">Kx</span><span class="o">=</span>RSA      <span class="nv">Au</span><span class="o">=</span>RSA  <span class="nv">Enc</span><span class="o">=</span>Camellia<span class="o">(</span><span class="m">128</span><span class="o">)</span> <span class="nv">Mac</span><span class="o">=</span>SHA1
PSK-AES128-CBC-SHA      SSLv3 <span class="nv">Kx</span><span class="o">=</span>PSK      <span class="nv">Au</span><span class="o">=</span>PSK  <span class="nv">Enc</span><span class="o">=</span>AES<span class="o">(</span><span class="m">128</span><span class="o">)</span>  <span class="nv">Mac</span><span class="o">=</span>SHA1
</pre></div>
</div>

<p>なんかいっぱい出てきた</p>

<h1>
<span id="暗号方法の内容を１つ１つ確認" class="fragment"></span><a href="#%E6%9A%97%E5%8F%B7%E6%96%B9%E6%B3%95%E3%81%AE%E5%86%85%E5%AE%B9%E3%82%92%EF%BC%91%E3%81%A4%EF%BC%91%E3%81%A4%E7%A2%BA%E8%AA%8D"><i class="fa fa-link"></i></a>暗号方法の内容を１つ１つ確認</h1>

<p>まずは１行目の <code>DHE-RSA-AES256-SHA　　      SSLv3 　Kx=DH　       Au=RSA　  Enc=AES(256)　  Mac=SHA1</code> を読み解いてみる。<a href="http://nzbget.net/Choosing_a_cipher" rel="nofollow noopener" target="_blank">このサイト</a>によると下記のようだ。</p>

<table>
<thead>
<tr>
<th>Column</th>
<th>内容</th>
<th>原文</th>
</tr>
</thead>
<tbody>
<tr>
<td>DHE-RSA-AES256-SHA</td>
<td>暗号化スイート</td>
<td>cipher suite name</td>
</tr>
<tr>
<td>kx</td>
<td>鍵交換をする時のアルゴリズム</td>
<td>the algorithm used for key exchange</td>
</tr>
<tr>
<td>Au</td>
<td>鍵認証のためのアルゴリズム</td>
<td>the algorithm for authentication</td>
</tr>
<tr>
<td>Enc</td>
<td>暗号化通信に使われる一括暗号化アルゴリズム</td>
<td>the bulk encryption algorithm</td>
</tr>
<tr>
<td>Mac</td>
<td>メッセージ認証符号</td>
<td>the message authentication code (MAC) algorithm</td>
</tr>
</tbody>
</table>

<p>いろいろアルゴリズムを使ってるのはわかったもののどこで使ってるんだ？</p>

<h1>
<span id="それぞれどこで使ってるの" class="fragment"></span><a href="#%E3%81%9D%E3%82%8C%E3%81%9E%E3%82%8C%E3%81%A9%E3%81%93%E3%81%A7%E4%BD%BF%E3%81%A3%E3%81%A6%E3%82%8B%E3%81%AE"><i class="fa fa-link"></i></a>それぞれどこで使ってるの？</h1>

<p><a href="https://camo.qiitausercontent.com/920a5aeba1effc4604078a930ed7c0091ec802bb/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f383732362f37333262303165342d343030342d333832632d393761662d6635396539623461633064342e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/920a5aeba1effc4604078a930ed7c0091ec802bb/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f383732362f37333262303165342d343030342d333832632d393761662d6635396539623461633064342e706e67" alt="ssl_alg.png" title="ssl_alg.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/8726/732b01e4-4004-382c-97af-f59e9b4ac0d4.png"></a></p>

<h1>
<span id="主な暗号化アルゴリズム" class="fragment"></span><a href="#%E4%B8%BB%E3%81%AA%E6%9A%97%E5%8F%B7%E5%8C%96%E3%82%A2%E3%83%AB%E3%82%B4%E3%83%AA%E3%82%BA%E3%83%A0"><i class="fa fa-link"></i></a>主な暗号化アルゴリズム</h1>

<p>種類がたくさんありますが、一部集めてみました。</p>

<table>
<thead>
<tr>
<th>アルゴリズム</th>
<th>用途</th>
<th>ブロック長</th>
<th>鍵長</th>
<th>概要</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="http://ja.wikipedia.org/wiki/RSA%E6%9A%97%E5%8F%B7" rel="nofollow noopener" target="_blank">RSA</a></td>
<td>Au:公開鍵暗号[署名]</td>
<td></td>
<td>1024-4096 bit</td>
<td>[主流] 桁数が大きい合成数の素因数分解問題が困難であることを安全性の根拠とした公開鍵暗号の一つである</td>
</tr>
<tr>
<td><a href="http://ja.wikipedia.org/wiki/Digital_Signature_Algorithm" rel="nofollow noopener" target="_blank">DSA</a></td>
<td>Au:公開鍵暗号[署名]</td>
<td></td>
<td>1024bit</td>
<td>[まだ少ない?] OpensslでみるとDSSと表記されている。有限体上の離散対数問題の困難性を安全性の根拠としており、現仕様においては有効な攻撃方法が示されたことはないものの、理論上はいまだ署名としての最も高い安全性を満たすことが証明されていない。</td>
</tr>
<tr>
<td><a href="http://ja.wikipedia.org/wiki/%E6%A5%95%E5%86%86%E6%9B%B2%E7%B7%9A%E6%9A%97%E5%8F%B7" rel="nofollow noopener" target="_blank">ECC</a></td>
<td>Au:公開鍵暗号[署名]</td>
<td></td>
<td></td>
<td>[注目株] EC-DLPを解く準指数関数時間アルゴリズムがまだ見つかっていないため、それが見つかるまでの間は、<a href="http://www.atmarkit.co.jp/ait/articles/1303/21/news005.html" rel="nofollow noopener" target="_blank">ベリサイン</a>によると12分の1の鍵長で、現在主流のRSA 2048の1.5倍の強度を実現できるため同レベルの安全性をより短い鍵で実現でき、処理速度も速いことをメリットとして、ポストRSA暗号として注目されている。</td>
</tr>
<tr>
<td><a href="https://www.ipa.go.jp/security/rfc/RFC2631JA.html" rel="nofollow noopener" target="_blank">DH</a></td>
<td>Kx:公開鍵暗号[鍵交換]</td>
<td></td>
<td></td>
<td>[主流] DHパラメータは証明書に書かれている物を使う。よって、static DHとも呼ばれる。</td>
</tr>
<tr>
<td><a href="http://en.wikipedia.org/wiki/Diffie-Hellman_key_exchange" rel="nofollow noopener" target="_blank">ECDH</a></td>
<td>Kx:公開鍵暗号[鍵交換]</td>
<td></td>
<td></td>
<td>[注目株] Elliptic curve Diffie–Hellmanの略。楕円曲線上でDiffie-Hellman(DH)鍵共有を⾏う楕円DH(ECDH)⽅式。PFS(perfect forward secrecy)をサポートしていない。</td>
</tr>
<tr>
<td><a href="http://en.wikipedia.org/wiki/Elliptic_Curve_DSA" rel="nofollow noopener" target="_blank">ECDSA</a></td>
<td>Kx:公開鍵暗号[鍵交換]</td>
<td></td>
<td></td>
<td>[注目株] Elliptic Curve Digital Signature Algorithmの略。楕円曲線上でDigital Signature Algorithm(DSA)を実現する楕円DSA（ECDSA）⽅式。PFS(perfect forward secrecy)をサポートしていない。</td>
</tr>
<tr>
<td><a href="http://vincent.bernat.im/en/blog/2011-ssl-perfect-forward-secrecy.html" rel="nofollow noopener" target="_blank">ECDHE</a></td>
<td>Kx:公開鍵暗号[鍵交換]</td>
<td></td>
<td></td>
<td>[注目株]  Ephemeral Elliptic curve Diffie–Hellmanの略。DHパラメータを通信時に動的に作成する。楕円曲線上でDiffie-Hellman(DH)鍵共有を⾏う楕円DH(ECDH)⽅式。EはEphemeral(一時的）を意味している。PFS(perfect forward secrecy)をサポートしている。</td>
</tr>
<tr>
<td><a href="http://en.wikipedia.org/wiki/Data_Encryption_Standard" rel="nofollow noopener" target="_blank">DES</a></td>
<td>Enc:共通鍵暗号</td>
<td>64bit</td>
<td>56bit</td>
<td>[強度弱] 現代においては十分な強度とは言えなくなっています。並列処理可能なDES破り専用プロセッサも存在し、 資金さえ投入すれば数時間～数日というレベルで解読することができます。</td>
</tr>
<tr>
<td><a href="http://en.wikipedia.org/wiki/Advanced_Encryption_Standard" rel="nofollow noopener" target="_blank">AES</a></td>
<td>Enc:共通鍵暗号</td>
<td>128bit</td>
<td>128/192/256bit</td>
<td>[注目株] DESに代わる次世代の暗号標準。暗号強度、高速性に優れてます。</td>
</tr>
<tr>
<td><a href="http://en.wikipedia.org/wiki/RC4" rel="nofollow noopener" target="_blank">RC4</a></td>
<td>Enc:共通鍵暗号</td>
<td>可変長</td>
<td>ストリーム暗号</td>
<td>[脆弱性あり] RC4はストリーム暗号としては大変広く使われていますが、同時にいろんな脆弱性があることでも知られてきている。WEPやSSL/TLSで広く使われてますが、WEPが脆弱であることが広く知られているのに比べ、SSL/TLSでのRC4はそれほど恐れられていませんでした。</td>
</tr>
<tr>
<td><a href="http://en.wikipedia.org/wiki/MD5" rel="nofollow noopener" target="_blank">MD5</a></td>
<td>Mac:ハッシュ関数</td>
<td></td>
<td></td>
<td>[脆弱性あり] 任意長メッセージから128ビットの一方向ハッシュ値を生成します。SLOTH攻撃(CVE-2015-7575)による影響があります。</td>
</tr>
<tr>
<td><a href="http://ja.wikipedia.org/wiki/SHA-1" rel="nofollow noopener" target="_blank">SHA-1</a></td>
<td>Mac:ハッシュ関数</td>
<td></td>
<td></td>
<td>[脆弱性あり] 160ビットメッセージダイジェストアルゴリズム。SLOTH攻撃(CVE-2015-7575)による影響があります。</td>
</tr>
<tr>
<td><a href="https://jp.globalsign.com/sha256/" rel="nofollow noopener" target="_blank">SHA-2</a></td>
<td>Mac:ハッシュ関数</td>
<td></td>
<td></td>
<td>[主流] 224ビット・256ビット・384ビット・512ビットのメッセージダイジェストアルゴリズム</td>
</tr>
<tr>
<td><a href="https://ja.wikipedia.org/wiki/SHA-3" rel="nofollow noopener" target="_blank">SHA-3</a></td>
<td>Mac:ハッシュ関数</td>
<td></td>
<td></td>
<td>[次世代?]米国の国立標準技術研究所(NIST)は，2012年10月2日に次世代の暗号学的ハッシュ関数の標準を決めるSHA-3として Keccak を選定した。しかし、その後、SHA-2への有望な攻撃法は2015年8月現在発表されていないため結果としてSHA-2の代替の用意が重要ではなくなるなど、状況が変化している</td>
</tr>
</tbody>
</table>

<h1>
<span id="暗号化利用モード" class="fragment"></span><a href="#%E6%9A%97%E5%8F%B7%E5%8C%96%E5%88%A9%E7%94%A8%E3%83%A2%E3%83%BC%E3%83%89"><i class="fa fa-link"></i></a>暗号化利用モード</h1>

<p><a href="http://en.wikipedia.org/wiki/Block_cipher_modes_of_operation" rel="nofollow noopener" target="_blank">暗号化利用モード</a>とは、ブロック長よりも長いメッセージを暗号化するための方式。</p>

<table>
<thead>
<tr>
<th>略称</th>
<th>名称</th>
<th>利用モード</th>
<th>概要</th>
</tr>
</thead>
<tbody>
<tr>
<td>ECB</td>
<td>Electronic CodeBook</td>
<td>秘匿用</td>
<td>[強度弱]各ブロックを１つずつ暗号化処理をする。最もシンプルな方式</td>
</tr>
<tr>
<td><a href="http://j-net21.smrj.go.jp/develop/digital/entry/001-20120229-01.html" rel="nofollow noopener" target="_blank">CBC</a></td>
<td>Cipher Block Chaining</td>
<td>秘匿用</td>
<td>[脆弱性あり]各平文のブロックは暗号化される前に、前の暗号化ブロックでXORすることを繰り返す。最初のブロックは暗号と無関係なIV(Initialization Vector)を使用して暗号化する。BEAST攻撃によりデータが復号化される可能性あり。</td>
</tr>
<tr>
<td>CTR</td>
<td>CounTeR</td>
<td>秘匿用</td>
<td>[主流]IVではなくカウンターの値をインクリメントしつつブロック暗号処理したものに平文ブロックをXORする。</td>
</tr>
<tr>
<td><a href="http://en.wikipedia.org/wiki/CCM_mode" rel="nofollow noopener" target="_blank">CCM</a></td>
<td>Counter with CBC-MAC</td>
<td>認証用</td>
<td>TLS1.2で使用可能。カウンター (CTR)モードとCBC-MACモードを組み合わせたものであり、前者が暗号化に、後者が認証に用いられる。同一の鍵を暗号化と認証の双方に用いることができることができ、暗号化に用いられたカウンター値が認証で用いられる初期化ベクトルと衝突することがない</td>
</tr>
<tr>
<td><a href="http://en.wikipedia.org/wiki/Galois/Counter_Mode" rel="nofollow noopener" target="_blank">GCM</a></td>
<td>Galois/Counter Mode</td>
<td>認証用</td>
<td>[主流]TLS1.2で使用可能。GCMは認証付き暗号の一つであり、データ保護と認証（完全性確認）の双方に利用できる。遅延、オーバーヘッドが少ないことから、パケット化されたデータの保護に適している。</td>
</tr>
</tbody>
</table>

<h1>
<span id="pfsperfect-forward-secrecyについて" class="fragment"></span><a href="#pfsperfect-forward-secrecy%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6"><i class="fa fa-link"></i></a>PFS(Perfect Forward Secrecy)について</h1>

<p><a href="http://vincent.bernat.im/en/blog/2011-ssl-perfect-forward-secrecy.html" rel="nofollow noopener" target="_blank">SSL/TLS &amp; Perfect Forward Secrecy</a></p>

<table>
<thead>
<tr>
<th>名称</th>
<th>略称</th>
<th>概要</th>
<th>Kx</th>
<th>例</th>
</tr>
</thead>
<tbody>
<tr>
<td>Without forward secrecy</td>
<td>-</td>
<td>認証と同じ公開暗号を使用した場合に、攻撃者が暗号化した通信を全部記録していたとすると、後に認証に使用していた秘密鍵が漏洩してしまうと復号化が出来てしまう。</td>
<td>FS・PFS以外</td>
<td>AES128-SHA</td>
</tr>
<tr>
<td>Forward Secrecy</td>
<td>FS</td>
<td>認証用の鍵と鍵交換用の鍵が異なるので、通信の漏洩の可能性が低くなります。RSA 2048bitと比べるとサーバへのCPU負荷が3.1倍程度に増加するようです。</td>
<td>DH / ECDH</td>
<td>DH-RSA-AES128-SHA</td>
</tr>
<tr>
<td>Perfect Forward Secrecy</td>
<td>PFS</td>
<td>FSに比べて、一定時間後に定期的に異なる鍵交換を行うため、より漏洩の可能性を低く出来ます。また、RSA 2048bitと比べてもサーバへのCPU負荷は微増のようです。</td>
<td>DHE / ECDHE</td>
<td>DHE-RSA-AES128-SHA</td>
</tr>
</tbody>
</table>

<h1>
<span id="暗号化方法はたくさんあるけどナニを選べばいいの" class="fragment"></span><a href="#%E6%9A%97%E5%8F%B7%E5%8C%96%E6%96%B9%E6%B3%95%E3%81%AF%E3%81%9F%E3%81%8F%E3%81%95%E3%82%93%E3%81%82%E3%82%8B%E3%81%91%E3%81%A9%E3%83%8A%E3%83%8B%E3%82%92%E9%81%B8%E3%81%B9%E3%81%B0%E3%81%84%E3%81%84%E3%81%AE"><i class="fa fa-link"></i></a>暗号化方法はたくさんあるけどナニを選べばいいの？</h1>

<p><a href="https://www.ssllabs.com/projects/best-practices/index.html" rel="nofollow noopener" target="_blank">SSL/TLS Deployment Best Practices</a> というのがある</p>

<blockquote>
<p>Use Secure Protocols</p>

<ul>
<li><p>SSL v2 is insecure and must not be used.</p></li>
<li><p>SSL v3 is very old and obsolete. Because it lacks some key features and because virtually all clients support TLS 1.0 and better, you should not support SSL v3 unless you have a very good reason.</p></li>
<li><p>TLS v1.0 is largely still secure; we do not know of major security ﬂaws when they are used for protocols other than HTTP. When used with HTTP, it can almost be made secure with careful conﬁguration.</p></li>
<li><p>TLS v1.1 and v1.2 are without known security issues.</p></li>
</ul>
</blockquote>

<p><strong><em>SSLプロトコル</em></strong></p>

<ul>
<li>SSLv2は使用しない</li>
<li>SSLv3は非常に古く廃止されています。いくつかの主要機能が不足しており、事実上すべてのクライアントがTLS1.0をサポートしている。そのため、よっぽど良い理由がない限りはSSLv3をサポートするべきではない</li>
<li>TLS v1.0の大部分はまだ安全です。HTTPを使用するときに、キチンと設定をすればセキュアに出来る</li>
<li>TLS v1.1 とTLS v1.2はセキュリティに関する問題が発見されていない</li>
</ul>

<blockquote>
<p>Use Secure Cipher Suites</p>

<ul>
<li><p>Anonymous Difﬁe-Hellman (ADH) suites do not provide authentication.</p></li>
<li><p>NULL cipher suites provide no encryption.</p></li>
<li><p>Export key exchange suites use authentication that can easily be broken.</p></li>
<li><p>Suites with weak ciphers (typically of 40 and 56 bits) use encryption that can easily be broken.</p></li>
<li><p>RC4 is weaker than previously thought. You should remove support for this cipher in the near future.</p></li>
<li><p>3DES provides only 108 bits of security (or 112, depending on the source), which is below the<br>
recommended minimum of 128 bits. You should remove support for this cipher in the near future.</p></li>
</ul>
</blockquote>

<p><strong><em>暗号化スイート</em></strong></p>

<ul>
<li>ADH(Anonymous Diffie-Hellman)は認証機能を提供していない</li>
<li>Null暗号化スイートは暗号化しない</li>
<li>Export鍵交換は簡単に解除される認証機能を使っている</li>
<li>特に40, 56bitの弱い暗号スイートは簡単に暗号化を解除される</li>
<li>RC4は以前考えられてたよりも弱い。近い将来、サポート対象外にするべき。</li>
<li>3DESは108または112bitsしか提供していない。最低でも128bits以上が推奨されるので、近い将来サポート対象外にするべき。</li>
</ul>

<h1>
<span id="セキュリティに余念のない有名企業はどうしているのか" class="fragment"></span><a href="#%E3%82%BB%E3%82%AD%E3%83%A5%E3%83%AA%E3%83%86%E3%82%A3%E3%81%AB%E4%BD%99%E5%BF%B5%E3%81%AE%E3%81%AA%E3%81%84%E6%9C%89%E5%90%8D%E4%BC%81%E6%A5%AD%E3%81%AF%E3%81%A9%E3%81%86%E3%81%97%E3%81%A6%E3%81%84%E3%82%8B%E3%81%AE%E3%81%8B"><i class="fa fa-link"></i></a>セキュリティに余念のない有名企業はどうしているのか？</h1>

<p><a href="http://news.netcraft.com/archives/2013/06/25/ssl-intercepted-today-decrypted-tomorrow.html" rel="nofollow noopener" target="_blank">Netcraft</a>が2013年9月に調査した情報によると下記のような対応状況です。2014年3月にwww.facebook.comを確認したところ、ECDHE-RSA-AES128-GCM-SHAになっていたので各社変わっている可能性はありそうです。</p>

<p><a href="https://camo.qiitausercontent.com/b398a12902c43ed892a419331d0d6376d32b3ed7/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f383732362f30393130373862622d626136362d363663342d366536362d3731626333386566333737312e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/b398a12902c43ed892a419331d0d6376d32b3ed7/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f383732362f30393130373862622d626136362d363663342d366536362d3731626333386566333737312e706e67" alt="ssl_list.png" title="ssl_list.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/8726/091078bb-ba66-66c4-6e66-71bc38ef3771.png"></a></p>

<h1>
<span id="最近発生した主なsslの脆弱性" class="fragment"></span><a href="#%E6%9C%80%E8%BF%91%E7%99%BA%E7%94%9F%E3%81%97%E3%81%9F%E4%B8%BB%E3%81%AAssl%E3%81%AE%E8%84%86%E5%BC%B1%E6%80%A7"><i class="fa fa-link"></i></a>最近発生した主なSSLの脆弱性</h1>

<table>
<thead>
<tr>
<th>名称</th>
<th>CVE</th>
<th>発生日</th>
<th>概要</th>
<th>対応概要</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="http://blog.zoller.lu/2011/09/beast-summary-tls-cbc-countermeasures.html" rel="nofollow noopener" target="_blank">Beast</a></td>
<td><a href="http://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2011-3389" rel="nofollow noopener" target="_blank">CVE-2011-3389</a></td>
<td>2011/9/6</td>
<td>CBC mode脆弱性</td>
<td></td>
</tr>
<tr>
<td><a href="http://d.hatena.ne.jp/Kango/20140410/1397139257" rel="nofollow noopener" target="_blank">TLS heartbleed</a></td>
<td><a href="https://www.openssl.org/news/secadv_20140407.txt" rel="nofollow noopener" target="_blank">CVE-2014-0160</a></td>
<td>2014/4/7</td>
<td>TLS脆弱性</td>
<td>opensslをupdate</td>
</tr>
<tr>
<td><a href="http://d.hatena.ne.jp/Kango/touch/20140605/1401978480" rel="nofollow noopener" target="_blank">CCS injection</a></td>
<td><a href="https://www.openssl.org/news/secadv_20140605.txt" rel="nofollow noopener" target="_blank">CVE-2014-0224</a></td>
<td>2014/6/5</td>
<td>CCS脆弱性</td>
<td>opensslをupdate</td>
</tr>
<tr>
<td><a href="http://googleonlinesecurity.blogspot.jp/2014/10/this-poodle-bites-exploiting-ssl-30.html" rel="nofollow noopener" target="_blank">POODLE</a></td>
<td><a href="https://access.redhat.com/security/cve/CVE-2014-3566" rel="nofollow noopener" target="_blank">CVE-2014-3566</a></td>
<td>2014/10/14</td>
<td>SSLv3脆弱性</td>
<td>SSLv3を無効にする</td>
</tr>
<tr>
<td><a href="https://jvn.jp/vu/JVNVU95877131/index.html" rel="nofollow noopener" target="_blank">複数脆弱性</a></td>
<td><a href="https://www.openssl.org/news/secadv_20150319.txt" rel="nofollow noopener" target="_blank">CVE-2015-0291等(全14個)</a></td>
<td>2015/3/19</td>
<td>複数脆弱性対応</td>
<td>opensslをupdate</td>
</tr>
<tr>
<td><a href="http://d.hatena.ne.jp/jovi0608/20150710/1436521488" rel="nofollow noopener" target="_blank">Altチェイン証明書偽造</a></td>
<td><a href="https://mta.openssl.org/pipermail/openssl-announce/2015-July/000037.html" rel="nofollow noopener" target="_blank">CVE-2015-1793</a></td>
<td>2015/7/6</td>
<td>証明書偽造</td>
<td>opensslをupdate</td>
</tr>
<tr>
<td><a href="http://d.hatena.ne.jp/jovi0608/20160113/1452649563" rel="nofollow noopener" target="_blank">SLOTH攻撃</a></td>
<td><a href="https://access.redhat.com/articles/2112261" rel="nofollow noopener" target="_blank">CVE-2015-7575</a></td>
<td>2016/1/8</td>
<td>TLS脆弱性(ハッシュ衝突)</td>
<td><a href="https://nakedsecurity.sophos.com/2016/01/08/the-sloth-attacks-why-laziness-about-cryptography-puts-security-at-risk/" rel="nofollow noopener" target="_blank">MD5とSHA-1を使用しない</a></td>
</tr>
<tr>
<td><a href="http://d.hatena.ne.jp/Kango/20160301/1456849603" rel="nofollow noopener" target="_blank">DROWN</a></td>
<td><a href="https://mta.openssl.org/pipermail/openssl-announce/2016-March/000066.html" rel="nofollow noopener" target="_blank">CVE-2016-0800</a></td>
<td>2016/3/1</td>
<td>クロスプロトコル攻撃</td>
<td>SSLv2を無効にする</td>
</tr>
<tr>
<td><a href="https://sweet32.info/" rel="nofollow noopener" target="_blank">SWEET32</a></td>
<td><a href="https://access.redhat.com/security/cve/cve-2016-2183" rel="nofollow noopener" target="_blank">CVE-2016-2183</a></td>
<td>2016/8/24</td>
<td><a href="https://ja.wikipedia.org/wiki/%E8%AA%95%E7%94%9F%E6%97%A5%E6%94%BB%E6%92%83" rel="nofollow noopener" target="_blank">誕生日攻撃</a></td>
<td>3DESなど64bitsブロック暗号の停止</td>
</tr>
<tr>
<td><a href="https://security.googleblog.com/2017/02/announcing-first-sha1-collision.html" rel="nofollow noopener" target="_blank">SHAttered</a></td>
<td><a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2005-4900" rel="nofollow noopener" target="_blank">CVE-2005-4900</a></td>
<td>2017/2/23</td>
<td><a href="https://shattered.io/" rel="nofollow noopener" target="_blank">ハッシュ衝突攻撃</a></td>
<td>SHA-256, SHA-3への移行</td>
</tr>
</tbody>
</table>

<h1>
<span id="結局今のところどのような設定が良さそうか" class="fragment"></span><a href="#%E7%B5%90%E5%B1%80%E4%BB%8A%E3%81%AE%E3%81%A8%E3%81%93%E3%82%8D%E3%81%A9%E3%81%AE%E3%82%88%E3%81%86%E3%81%AA%E8%A8%AD%E5%AE%9A%E3%81%8C%E8%89%AF%E3%81%95%E3%81%9D%E3%81%86%E3%81%8B"><i class="fa fa-link"></i></a>結局今のところどのような設定が良さそうか</h1>

<p>最初に記載したNginxの公式にサイトに書いてあったよりも、脆弱性があるまたは弱い暗号化を除いて、明示的に使用する暗号化スイートを設定するのが良さそう。 <strong><em>あくまで例なのでサイトに合ったものを設定してください。</em></strong></p>

<ul>
<li>最新版のopenssl [CVE-2014-0160 / CVE-2014-0224]</li>
<li>128bit以上</li>
<li>Enc: AES</li>
<li>Au: RSA</li>
<li>Kx: DH/ECDH/ECDHE (FS以上)</li>
<li>暗号化利用モード: GCM</li>
<li>SSLv3以下を無効 [CVE-2014-3566]</li>
</ul>

<div class="code-frame" data-lang="Nginx"><div class="highlight"><pre><span></span><span class="k">ssl</span> <span class="no">on</span><span class="p">;</span>
<span class="k">ssl_prefer_server_ciphers</span> <span class="no">on</span><span class="p">;</span>
<span class="k">ssl_protocols</span> <span class="s">TLSv1</span> <span class="s">TLSv1.1</span> <span class="s">TLSv1.2</span><span class="p">;</span>
<span class="k">ssl_ciphers</span> <span class="s">ECDHE+RSAGCM:ECDH+AESGCM:</span>
            <span class="s">DH+AESGCM:ECDH+AES256:DH+AES256:</span>
            <span class="s">ECDH+AES128:DH+AES:</span>
            <span class="s">!EXPORT:!DES:!3DES:!MD5:!DSS</span><span class="p">;</span>
</pre></div></div>

<h3>
<span id="対応暗号スイートを確認" class="fragment"></span><a href="#%E5%AF%BE%E5%BF%9C%E6%9A%97%E5%8F%B7%E3%82%B9%E3%82%A4%E3%83%BC%E3%83%88%E3%82%92%E7%A2%BA%E8%AA%8D"><i class="fa fa-link"></i></a>対応暗号スイートを確認</h3>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$openssl ciphers -v 'ECDHE+RSAGCM:ECDH+AESGCM:DH+AESGCM:ECDH+AES256:DH+AES256:ECDH+AES128:DH+AES:!EXPORT:!DES:!3DES:!MD5:!DSS'
</pre></div></div>

<p>ローカルだとこのような感じで出てきた</p>

<div class="code-frame" data-lang="bash">
<div class="code-lang"><span class="bold">result</span></div>
<div class="highlight"><pre><span></span>ECDHE-RSA-AES256-GCM-SHA384   TLSv1.2 <span class="nv">Kx</span><span class="o">=</span>ECDH       <span class="nv">Au</span><span class="o">=</span>RSA   <span class="nv">Enc</span><span class="o">=</span>AESGCM<span class="o">(</span><span class="m">256</span><span class="o">)</span> <span class="nv">Mac</span><span class="o">=</span>AEAD
ECDHE-ECDSA-AES256-GCM-SHA384 TLSv1.2 <span class="nv">Kx</span><span class="o">=</span>ECDH       <span class="nv">Au</span><span class="o">=</span>ECDSA <span class="nv">Enc</span><span class="o">=</span>AESGCM<span class="o">(</span><span class="m">256</span><span class="o">)</span> <span class="nv">Mac</span><span class="o">=</span>AEAD
ECDH-RSA-AES256-GCM-SHA384    TLSv1.2 <span class="nv">Kx</span><span class="o">=</span>ECDH/RSA   <span class="nv">Au</span><span class="o">=</span>ECDH  <span class="nv">Enc</span><span class="o">=</span>AESGCM<span class="o">(</span><span class="m">256</span><span class="o">)</span> <span class="nv">Mac</span><span class="o">=</span>AEAD
ECDH-ECDSA-AES256-GCM-SHA384  TLSv1.2 <span class="nv">Kx</span><span class="o">=</span>ECDH/ECDSA <span class="nv">Au</span><span class="o">=</span>ECDH  <span class="nv">Enc</span><span class="o">=</span>AESGCM<span class="o">(</span><span class="m">256</span><span class="o">)</span> <span class="nv">Mac</span><span class="o">=</span>AEAD
ECDHE-RSA-AES128-GCM-SHA256   TLSv1.2 <span class="nv">Kx</span><span class="o">=</span>ECDH       <span class="nv">Au</span><span class="o">=</span>RSA   <span class="nv">Enc</span><span class="o">=</span>AESGCM<span class="o">(</span><span class="m">128</span><span class="o">)</span> <span class="nv">Mac</span><span class="o">=</span>AEAD
ECDHE-ECDSA-AES128-GCM-SHA256 TLSv1.2 <span class="nv">Kx</span><span class="o">=</span>ECDH       <span class="nv">Au</span><span class="o">=</span>ECDSA <span class="nv">Enc</span><span class="o">=</span>AESGCM<span class="o">(</span><span class="m">128</span><span class="o">)</span> <span class="nv">Mac</span><span class="o">=</span>AEAD
ECDH-RSA-AES128-GCM-SHA256    TLSv1.2 <span class="nv">Kx</span><span class="o">=</span>ECDH/RSA   <span class="nv">Au</span><span class="o">=</span>ECDH  <span class="nv">Enc</span><span class="o">=</span>AESGCM<span class="o">(</span><span class="m">128</span><span class="o">)</span> <span class="nv">Mac</span><span class="o">=</span>AEAD
ECDH-ECDSA-AES128-GCM-SHA256  TLSv1.2 <span class="nv">Kx</span><span class="o">=</span>ECDH/ECDSA <span class="nv">Au</span><span class="o">=</span>ECDH  <span class="nv">Enc</span><span class="o">=</span>AESGCM<span class="o">(</span><span class="m">128</span><span class="o">)</span> <span class="nv">Mac</span><span class="o">=</span>AEAD
DHE-RSA-AES256-GCM-SHA384     TLSv1.2 <span class="nv">Kx</span><span class="o">=</span>DH         <span class="nv">Au</span><span class="o">=</span>RSA   <span class="nv">Enc</span><span class="o">=</span>AESGCM<span class="o">(</span><span class="m">256</span><span class="o">)</span> <span class="nv">Mac</span><span class="o">=</span>AEAD
DHE-RSA-AES128-GCM-SHA256     TLSv1.2 <span class="nv">Kx</span><span class="o">=</span>DH         <span class="nv">Au</span><span class="o">=</span>RSA   <span class="nv">Enc</span><span class="o">=</span>AESGCM<span class="o">(</span><span class="m">128</span><span class="o">)</span> <span class="nv">Mac</span><span class="o">=</span>AEAD
ECDHE-RSA-AES256-SHA384       TLSv1.2 <span class="nv">Kx</span><span class="o">=</span>ECDH       <span class="nv">Au</span><span class="o">=</span>RSA   <span class="nv">Enc</span><span class="o">=</span>AES<span class="o">(</span><span class="m">256</span><span class="o">)</span>    <span class="nv">Mac</span><span class="o">=</span>SHA384
ECDHE-ECDSA-AES256-SHA384     TLSv1.2 <span class="nv">Kx</span><span class="o">=</span>ECDH       <span class="nv">Au</span><span class="o">=</span>ECDSA <span class="nv">Enc</span><span class="o">=</span>AES<span class="o">(</span><span class="m">256</span><span class="o">)</span>    <span class="nv">Mac</span><span class="o">=</span>SHA384
ECDHE-RSA-AES256-SHA          SSLv3   <span class="nv">Kx</span><span class="o">=</span>ECDH       <span class="nv">Au</span><span class="o">=</span>RSA   <span class="nv">Enc</span><span class="o">=</span>AES<span class="o">(</span><span class="m">256</span><span class="o">)</span>    <span class="nv">Mac</span><span class="o">=</span>SHA1
ECDHE-ECDSA-AES256-SHA        SSLv3   <span class="nv">Kx</span><span class="o">=</span>ECDH       <span class="nv">Au</span><span class="o">=</span>ECDSA <span class="nv">Enc</span><span class="o">=</span>AES<span class="o">(</span><span class="m">256</span><span class="o">)</span>    <span class="nv">Mac</span><span class="o">=</span>SHA1
ECDH-RSA-AES256-SHA384        TLSv1.2 <span class="nv">Kx</span><span class="o">=</span>ECDH/RSA   <span class="nv">Au</span><span class="o">=</span>ECDH  <span class="nv">Enc</span><span class="o">=</span>AES<span class="o">(</span><span class="m">256</span><span class="o">)</span>    <span class="nv">Mac</span><span class="o">=</span>SHA384
ECDH-ECDSA-AES256-SHA384      TLSv1.2 <span class="nv">Kx</span><span class="o">=</span>ECDH/ECDSA <span class="nv">Au</span><span class="o">=</span>ECDH  <span class="nv">Enc</span><span class="o">=</span>AES<span class="o">(</span><span class="m">256</span><span class="o">)</span>    <span class="nv">Mac</span><span class="o">=</span>SHA384
ECDH-RSA-AES256-SHA           SSLv3   <span class="nv">Kx</span><span class="o">=</span>ECDH/RSA   <span class="nv">Au</span><span class="o">=</span>ECDH  <span class="nv">Enc</span><span class="o">=</span>AES<span class="o">(</span><span class="m">256</span><span class="o">)</span>    <span class="nv">Mac</span><span class="o">=</span>SHA1
ECDH-ECDSA-AES256-SHA         SSLv3   <span class="nv">Kx</span><span class="o">=</span>ECDH/ECDSA <span class="nv">Au</span><span class="o">=</span>ECDH  <span class="nv">Enc</span><span class="o">=</span>AES<span class="o">(</span><span class="m">256</span><span class="o">)</span>    <span class="nv">Mac</span><span class="o">=</span>SHA1
DHE-RSA-AES256-SHA256         TLSv1.2 <span class="nv">Kx</span><span class="o">=</span>DH         <span class="nv">Au</span><span class="o">=</span>RSA   <span class="nv">Enc</span><span class="o">=</span>AES<span class="o">(</span><span class="m">256</span><span class="o">)</span>    <span class="nv">Mac</span><span class="o">=</span>SHA256
DHE-RSA-AES256-SHA            SSLv3   <span class="nv">Kx</span><span class="o">=</span>DH         <span class="nv">Au</span><span class="o">=</span>RSA   <span class="nv">Enc</span><span class="o">=</span>AES<span class="o">(</span><span class="m">256</span><span class="o">)</span>    <span class="nv">Mac</span><span class="o">=</span>SHA1
ECDHE-RSA-AES128-SHA256       TLSv1.2 <span class="nv">Kx</span><span class="o">=</span>ECDH       <span class="nv">Au</span><span class="o">=</span>RSA   <span class="nv">Enc</span><span class="o">=</span>AES<span class="o">(</span><span class="m">128</span><span class="o">)</span>    <span class="nv">Mac</span><span class="o">=</span>SHA256
ECDHE-ECDSA-AES128-SHA256     TLSv1.2 <span class="nv">Kx</span><span class="o">=</span>ECDH       <span class="nv">Au</span><span class="o">=</span>ECDSA <span class="nv">Enc</span><span class="o">=</span>AES<span class="o">(</span><span class="m">128</span><span class="o">)</span>    <span class="nv">Mac</span><span class="o">=</span>SHA256
ECDHE-RSA-AES128-SHA          SSLv3   <span class="nv">Kx</span><span class="o">=</span>ECDH       <span class="nv">Au</span><span class="o">=</span>RSA   <span class="nv">Enc</span><span class="o">=</span>AES<span class="o">(</span><span class="m">128</span><span class="o">)</span>    <span class="nv">Mac</span><span class="o">=</span>SHA1
ECDHE-ECDSA-AES128-SHA        SSLv3   <span class="nv">Kx</span><span class="o">=</span>ECDH       <span class="nv">Au</span><span class="o">=</span>ECDSA <span class="nv">Enc</span><span class="o">=</span>AES<span class="o">(</span><span class="m">128</span><span class="o">)</span>    <span class="nv">Mac</span><span class="o">=</span>SHA1
ECDH-RSA-AES128-SHA256        TLSv1.2 <span class="nv">Kx</span><span class="o">=</span>ECDH/RSA   <span class="nv">Au</span><span class="o">=</span>ECDH  <span class="nv">Enc</span><span class="o">=</span>AES<span class="o">(</span><span class="m">128</span><span class="o">)</span>    <span class="nv">Mac</span><span class="o">=</span>SHA256
ECDH-ECDSA-AES128-SHA256      TLSv1.2 <span class="nv">Kx</span><span class="o">=</span>ECDH/ECDSA <span class="nv">Au</span><span class="o">=</span>ECDH  <span class="nv">Enc</span><span class="o">=</span>AES<span class="o">(</span><span class="m">128</span><span class="o">)</span>    <span class="nv">Mac</span><span class="o">=</span>SHA256
ECDH-RSA-AES128-SHA           SSLv3   <span class="nv">Kx</span><span class="o">=</span>ECDH/RSA   <span class="nv">Au</span><span class="o">=</span>ECDH  <span class="nv">Enc</span><span class="o">=</span>AES<span class="o">(</span><span class="m">128</span><span class="o">)</span>    <span class="nv">Mac</span><span class="o">=</span>SHA1
ECDH-ECDSA-AES128-SHA         SSLv3   <span class="nv">Kx</span><span class="o">=</span>ECDH/ECDSA <span class="nv">Au</span><span class="o">=</span>ECDH  <span class="nv">Enc</span><span class="o">=</span>AES<span class="o">(</span><span class="m">128</span><span class="o">)</span>    <span class="nv">Mac</span><span class="o">=</span>SHA1
DHE-RSA-AES128-SHA256         TLSv1.2 <span class="nv">Kx</span><span class="o">=</span>DH         <span class="nv">Au</span><span class="o">=</span>RSA   <span class="nv">Enc</span><span class="o">=</span>AES<span class="o">(</span><span class="m">128</span><span class="o">)</span>    <span class="nv">Mac</span><span class="o">=</span>SHA256
DHE-RSA-AES128-SHA            SSLv3   <span class="nv">Kx</span><span class="o">=</span>DH         <span class="nv">Au</span><span class="o">=</span>RSA   <span class="nv">Enc</span><span class="o">=</span>AES<span class="o">(</span><span class="m">128</span><span class="o">)</span>    <span class="nv">Mac</span><span class="o">=</span>SHA1
</pre></div>
</div>

<p>Apacheの場合はこのような感じになると思う(Apache 2.4以降ではSSLv2が除外)</p>

<div class="code-frame" data-lang="Apache"><div class="highlight"><pre><span></span><span class="nb">SSLProtocol</span> <span class="k">ALL</span> -SSLv3
<span class="nb">SSLHonorCipherOrder</span> <span class="k">On</span>
<span class="nb">SSLCipherSuite</span> ECDHE+RSAGCM:ECDH+AESGCM:
               <span class="err">DH+AESGCM:ECDH+AES256:DH+AES256:</span>
               <span class="err">ECDH+AES128:DH+AES:</span>
               <span class="err">!EXPORT:!DES:!3DES:!MD5:!</span><span class="nb">DSS</span>
</pre></div></div>

<h3>
<span id="設定を生成してくれるサービスもある" class="fragment"></span><a href="#%E8%A8%AD%E5%AE%9A%E3%82%92%E7%94%9F%E6%88%90%E3%81%97%E3%81%A6%E3%81%8F%E3%82%8C%E3%82%8B%E3%82%B5%E3%83%BC%E3%83%93%E3%82%B9%E3%82%82%E3%81%82%E3%82%8B"><i class="fa fa-link"></i></a>設定を生成してくれるサービスもある!</h3>

<ul>
<li><a href="https://mozilla.github.io/server-side-tls/ssl-config-generator/" rel="nofollow noopener" target="_blank">Mozilla SSL Configuration Generator</a></li>
</ul>

<h1>
<span id="sslがキチンと設定されているかテストするには" class="fragment"></span><a href="#ssl%E3%81%8C%E3%82%AD%E3%83%81%E3%83%B3%E3%81%A8%E8%A8%AD%E5%AE%9A%E3%81%95%E3%82%8C%E3%81%A6%E3%81%84%E3%82%8B%E3%81%8B%E3%83%86%E3%82%B9%E3%83%88%E3%81%99%E3%82%8B%E3%81%AB%E3%81%AF"><i class="fa fa-link"></i></a>SSLがキチンと設定されているかテストするには</h1>

<p><a href="https://www.ssllabs.com/ssltest/" rel="nofollow noopener" target="_blank">SSL Server Test</a>または<a href="https://sslcheck.globalsign.com/ja" rel="nofollow noopener" target="_blank">GlobalSign SSL チェック</a>で暗号化強度やブラウザのサポート具合などもチェックできます。また、コンソールでチェックするのに<a href="https://testssl.sh/" rel="nofollow noopener" target="_blank">testssl.sh: Testing TLS/SSL encryption</a>も便利です。<br>
簡易的には下記でもSSLの状態が確認出来る</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ openssl s_client -host [URL/HOST NAME] -port 443 -ssl3
</pre></div></div>

<h1>
<span id="まとめ" class="fragment"></span><a href="#%E3%81%BE%E3%81%A8%E3%82%81"><i class="fa fa-link"></i></a>まとめ</h1>

<p>たかが２行設定するのにここまで色々あるとは...まだ関連する技術がありそうなので日々精進が必要そうです。ただ、今回わかったことは単にコピペで設定すると、かなりのセキュリティホールになりそうなのでちゃんとテストして設定しようと。</p>

<h1>
<span id="参考資料" class="fragment"></span><a href="#%E5%8F%82%E8%80%83%E8%B3%87%E6%96%99"><i class="fa fa-link"></i></a>参考資料</h1>

<blockquote>
<p>電子政府における調達のために参照すべき暗号のリスト（ＣＲＹＰＴＲＥＣ暗号リスト） <br>
<a href="http://www.cryptrec.go.jp/list.html" class="autolink" rel="nofollow noopener" target="_blank">http://www.cryptrec.go.jp/list.html</a><br>
<a href="http://search.e-gov.go.jp/servlet/PcmFileDownload?seqNo=0000097652" class="autolink" rel="nofollow noopener" target="_blank">http://search.e-gov.go.jp/servlet/PcmFileDownload?seqNo=0000097652</a></p>

<p>Hardening Your Web Server’s SSL Ciphers<br>
<a href="https://hynek.me/articles/hardening-your-web-servers-ssl-ciphers/" class="autolink" rel="nofollow noopener" target="_blank">https://hynek.me/articles/hardening-your-web-servers-ssl-ciphers/</a></p>

<p>IE使うならVista以降が無難、SSLの暗号強度調査結果から<br>
<a href="http://internet.watch.impress.co.jp/docs/event/iw2009/20091126_331592.html" class="autolink" rel="nofollow noopener" target="_blank">http://internet.watch.impress.co.jp/docs/event/iw2009/20091126_331592.html</a></p>

<p>SSL/TLSでBEASTを恐れてRC4を優先するのは危ない<br>
<a href="http://tetsutalow.hateblo.jp/entry/2013/04/02/053927" class="autolink" rel="nofollow noopener" target="_blank">http://tetsutalow.hateblo.jp/entry/2013/04/02/053927</a></p>
</blockquote>
</div>
	</td>
</tr>
</table>
<br />
<table border="1" style="height:150px;">
<tr>
	<td rowspan="3">6位</td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="thumb-up-120px.png" /></i>2099</kbd>
		<a target="_blank" href="https://qiita.com/uasi/items/86c3a09d17792ab62dfe">英語のコメントや issue で頻出する略語の意味 (FYI, AFAIK, ...)</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-05-18<br />15:21:53</center>
	</td>
	<td style="width:200px;">
		<!--投稿者-->
		<center>
			@<a href="user/735.html">uasi</a>(117件の記事)<br />(Increments 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/735/profile-images/1473681692">
		</center>
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Qiita]</b> <b>[Git]</b> <b>[English]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<!--
		<div style="width:350px;height:150px;overflow:scroll;">%s</div>
		-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>コメント／編集リクエスト歓迎します。載っていない語があればぜひ追加してください。</p>

<table>
<thead>
<tr>
<th>略語</th>
<th>元の語</th>
<th>意味</th>
</tr>
</thead>
<tbody>
<tr>
<td>AFAICT</td>
<td>As far as I can tell</td>
<td>分かる限りでは○○</td>
</tr>
<tr>
<td>AFAIK</td>
<td>As far as I know</td>
<td>知る限りでは○○</td>
</tr>
<tr>
<td>AKA, aka, a.k.a.</td>
<td>Also known as</td>
<td>○○としても知られる</td>
</tr>
<tr>
<td>ASAP</td>
<td>As soon as possible</td>
<td>できる限り早く</td>
</tr>
<tr>
<td>BTW</td>
<td>By the way</td>
<td>ところで</td>
</tr>
<tr>
<td>c.f., cf.</td>
<td>ラテン語 confer / 英語 compare</td>
<td>○○を参照</td>
</tr>
<tr>
<td>e.g., E.g.</td>
<td>ラテン語 exempli gratia / 英語 for example</td>
<td>たとえば</td>
</tr>
<tr>
<td>ETA</td>
<td>Estimated time of arrival</td>
<td>（作業の）完了予定時刻　（用例は<a href="http://qiita.com/items/86c3a09d17792ab62dfe#comment-54f3d7872ba953941e7d">コメントを参照</a>）</td>
</tr>
<tr>
<td>FTW</td>
<td>For the win</td>
<td>〔何か良い案を挙げて〕これで決まり；これでよし</td>
</tr>
<tr>
<td>FWIW</td>
<td>For what it's worth</td>
<td>役に立つかどうかは分からないが</td>
</tr>
<tr>
<td>FYA</td>
<td>For your action</td>
<td>要対応；要返信</td>
</tr>
<tr>
<td>FYI</td>
<td>For your information</td>
<td>参考；ご参考までに</td>
</tr>
<tr>
<td>HTH</td>
<td>Happy to help</td>
<td>（用例は<a href="http://qiita.com/items/86c3a09d17792ab62dfe#comment-54f3d7872ba953941e7d">コメントを参照</a>）</td>
</tr>
<tr>
<td>i.e., I.e.</td>
<td>ラテン語 id est / 英語 that is</td>
<td>すなわち</td>
</tr>
<tr>
<td>IIRC</td>
<td>If I remember [recall] correctly</td>
<td>記憶が正しければ○○</td>
</tr>
<tr>
<td>IIUC</td>
<td>If I understand correctly</td>
<td>〔相手の発言を受けて〕私の理解が正しければ</td>
</tr>
<tr>
<td>IMO, IMHO</td>
<td>In my (humble) opinion</td>
<td>〔ていねいに〕○○だと思います</td>
</tr>
<tr>
<td>LGTM</td>
<td>Looks good to me</td>
<td>〔提案に対して〕いいと思う；問題ないと思う；〔コードレビュアーが、問題ないコードに対して〕レビュー終了；（コードの）承認</td>
</tr>
<tr>
<td>LOL, lol</td>
<td>Laugh out loud</td>
<td>〔くだけて〕www；（笑）</td>
</tr>
<tr>
<td>NA, N/A</td>
<td>Not applicable; not available</td>
<td>〔表などで、項目の組み合わせが無効な欄に記載して〕該当なし；〔表などで、まだ値がない欄に記載して〕該当値なし</td>
</tr>
<tr>
<td>NB, N.B.</td>
<td>ラテン語 nota bene / 英語 note well</td>
<td>〔通例コメントの先頭で〕特に注意せよ</td>
</tr>
<tr>
<td>NP, np</td>
<td>No problem</td>
<td>〔依頼・謝罪などに対してくだけて〕（問題ないから）気にしないで；大丈夫〔感謝に対してくだけて〕どういたしまして</td>
</tr>
<tr>
<td>OTOH</td>
<td>On the other hand</td>
<td>もう一方では、これに反して</td>
</tr>
<tr>
<td>PTAL</td>
<td>Please take another look</td>
<td>〔再レビューの要求などで〕再度ご確認ください</td>
</tr>
<tr>
<td>PR</td>
<td>Pull request</td>
<td>プルリクエスト</td>
</tr>
<tr>
<td>RFC</td>
<td>Request for comments</td>
<td>〔おもに issue のタグとして〕意見募集</td>
</tr>
<tr>
<td>ROFL, rofl</td>
<td>Rolling on the floor laughing</td>
<td>〔くだけて〕www；（笑）</td>
</tr>
<tr>
<td>RTFM</td>
<td>Read the fucking manual</td>
<td>〔乱暴に〕マニュアルを読め</td>
</tr>
<tr>
<td>TBA</td>
<td>To be advised</td>
<td>あとで連絡する</td>
</tr>
<tr>
<td>TBA</td>
<td>To be announced</td>
<td>あとで発表する</td>
</tr>
<tr>
<td>TBD</td>
<td>To be determined</td>
<td>あとで決める</td>
</tr>
<tr>
<td>TLDR, tldr, TL;DR, tl;dr, TL/DR, tl/dr</td>
<td>Too long, didn't read</td>
<td>長すぎるので読んでいない；（長い文を読みたくない人向けの）要約</td>
</tr>
<tr>
<td>UTSL</td>
<td>Use the source, Luke</td>
<td>〔くだけて〕ソースを読め（スター・ウォーズのセリフとかけた言葉遊び）</td>
</tr>
<tr>
<td>w/</td>
<td>with</td>
<td>（with の省略形）</td>
</tr>
<tr>
<td>w/o</td>
<td>without</td>
<td>（without の省略形）</td>
</tr>
<tr>
<td>WIP</td>
<td>Work in progress</td>
<td>作業中</td>
</tr>
<tr>
<td>WTF, wtf</td>
<td>What the fuck</td>
<td>〔想定外の事・ものにくだけて〕なんてこった；どうすりゃいいんだ；マジかよ</td>
</tr>
<tr>
<td>XD</td>
<td>顔文字：90度右に回すと、目をつぶって大きく口を開けた笑顔に見える</td>
<td>〔くだけたコメントで〕(≧▽≦)</td>
</tr>
</tbody>
</table>

<h1>
<span id="おまけ" class="fragment"></span><a href="#%E3%81%8A%E3%81%BE%E3%81%91"><i class="fa fa-link"></i></a>おまけ</h1>

<p>ソフトウェアのバージョン：</p>

<table>
<thead>
<tr>
<th>略語</th>
<th>元の語</th>
<th>意味</th>
</tr>
</thead>
<tbody>
<tr>
<td>GA</td>
<td>General availability</td>
<td>一般向け提供；正式リリース版</td>
</tr>
<tr>
<td>GM</td>
<td>Golden master</td>
<td>（CD プレスの）原盤；正式リリース版</td>
</tr>
<tr>
<td>RC</td>
<td>Release candidate</td>
<td>リリース候補版</td>
</tr>
<tr>
<td>RTM</td>
<td>Ready to manufacturing</td>
<td>量産可能；正式リリース版</td>
</tr>
</tbody>
</table>

<p>慣用表現：</p>

<table>
<thead>
<tr>
<th>語</th>
<th>直訳</th>
<th>意味</th>
</tr>
</thead>
<tbody>
<tr>
<td>Bikeshed, Bikeshedding</td>
<td>自転車置き場</td>
<td>重要でない議論に時間を取られること（家のペンキを塗り終える前に自転車置き場を何色で塗るか揉めることから）</td>
</tr>
<tr>
<td>Yak shaving</td>
<td>ヤクの毛刈り</td>
<td>ある大きな問題を解決するために、 一見無関係な小さい問題をいくつも片付けること。転じて、大きな問題を解決するつもりが、一見関係しているように見えて実は無用な小さい問題に気を取られること（長く固いヤクの毛を刈ってウールにするには多くの下準備が必要なことから）</td>
</tr>
</tbody>
</table>

<p>略語関連サイト：</p>

<ul>
<li><a href="http://www.abbreviations.com/category/COMPUTING" rel="nofollow noopener" target="_blank">Abbreviations.com - Computing Abbreviations</a></li>
<li><a href="http://www.acronymfinder.com" rel="nofollow noopener" target="_blank">Acronym Finder</a></li>
</ul>
</div>
	</td>
</tr>
</table>
<br />
<table border="1" style="height:150px;">
<tr>
	<td rowspan="3">7位</td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="thumb-up-120px.png" /></i>2069</kbd>
		<a target="_blank" href="https://qiita.com/appwatcher/items/b02255026a3ee6d95142">iOSでこんなアプリ,こんな機能を作りたかったらこれを見ろ！作りたいアプリに対応するクラス、フレームワーク、ライブラリのまとめ！</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2014-02-22<br />13:58:37</center>
	</td>
	<td style="width:200px;">
		<!--投稿者-->
		<center>
			@<a href="user/37731.html">appwatcher</a>(60件の記事)<br />(フリーランス 所属)<br><img width="80" height="80" src="https://pbs.twimg.com/profile_images/550671854591954946/pM9bAKf0_normal.jpeg">
		</center>
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Objective-C]</b> <b>[iPhone]</b> <b>[Xcode]</b> <b>[iOS]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<!--
		<div style="width:350px;height:150px;overflow:scroll;">%s</div>
		-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>by <a href="/mixiappwchr" class="user-mention js-hovercard" title="mixiappwchr" data-hovercard-target-type="user" data-hovercard-target-name="mixiappwchr">@mixiappwchr</a></p>

<p>iOSでこんな感じアプリを作ろうと思うんだけど、こんなの作る場合何をみればいいの？というときの、<br>
最初の一歩がわからない場合や、みんながはまりそうなポイントなどを中心に、皆さんのアプリ開発がこれでスタートダッシュ決めれれば幸いです。</p>

<p>Androidの方はこちらをどうぞ<br>
<a href="http://qiita.com/appwatcher/items/7d270de99d63bb9f2be4" id="reference-6b28516b752407f087a6">iOSとの比較つき!Androidでこんなアプリ,こんな機能を作りたかったらこれを見ろ！作りたいアプリに対応するクラス、ライブラリのまとめ！</a></p>

<p><a href="https://camo.qiitausercontent.com/feefc30b450145a12707ca3a1207360f91dd6ae6/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f33373733312f39363835653534342d353133332d646162612d356139662d3465326565343963366163632e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/feefc30b450145a12707ca3a1207360f91dd6ae6/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f33373733312f39363835653534342d353133332d646162612d356139662d3465326565343963366163632e706e67" alt="スクリーンショット 2014-02-23 21.18.01_240.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/37731/9685e544-5133-daba-5a9f-4e2ee49c6acc.png"></a></p>

<h1>
<span id="twitterfacebookみたいなタイムラインのアプリを作りたい" class="fragment"></span><a href="#twitterfacebook%E3%81%BF%E3%81%9F%E3%81%84%E3%81%AA%E3%82%BF%E3%82%A4%E3%83%A0%E3%83%A9%E3%82%A4%E3%83%B3%E3%81%AE%E3%82%A2%E3%83%97%E3%83%AA%E3%82%92%E4%BD%9C%E3%82%8A%E3%81%9F%E3%81%84"><i class="fa fa-link"></i></a>Twitter,Facebookみたいなタイムラインのアプリを作りたい！</h1>

<p><a href="https://camo.qiitausercontent.com/493b514439848548df0e09f357c36b15b5faf257/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f33373733312f65383439623861332d366366342d626538332d313733372d6466313035386233353561382e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/493b514439848548df0e09f357c36b15b5faf257/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f33373733312f65383439623861332d366366342d626538332d313733372d6466313035386233353561382e706e67" alt="IMG_2491.PNG" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/37731/e849b8a3-6cf4-be83-1737-df1058b355a8.png"></a></p>

<p>まずは一番作りたいものとして思い浮かぶのがTwitterやFacebookみたいなタイムライン、フィードなどを閲覧するアプリでしょう。</p>

<h2>
<span id="ここがポイント" class="fragment"></span><a href="#%E3%81%93%E3%81%93%E3%81%8C%E3%83%9D%E3%82%A4%E3%83%B3%E3%83%88"><i class="fa fa-link"></i></a>ここがポイント</h2>

<p>iOS開発で一番使うと言っても過言でないUITableViewControllerの使い方でしょう。</p>

<h3>
<span id="一行一行の高さを変えたいんだけれども" class="fragment"></span><a href="#%E4%B8%80%E8%A1%8C%E4%B8%80%E8%A1%8C%E3%81%AE%E9%AB%98%E3%81%95%E3%82%92%E5%A4%89%E3%81%88%E3%81%9F%E3%81%84%E3%82%93%E3%81%A0%E3%81%91%E3%82%8C%E3%81%A9%E3%82%82"><i class="fa fa-link"></i></a>一行一行の高さを変えたいんだけれども？</h3>

<p>(CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPathを実装する</p>

<div class="code-frame" data-lang="objc">
<div class="code-lang"><span class="bold">tableviewの高さを動的に</span></div>
<div class="highlight"><pre><span></span><span class="p">-</span> <span class="p">(</span><span class="n">CGFloat</span><span class="p">)</span><span class="nf">tableView:</span><span class="p">(</span><span class="bp">UITableView</span> <span class="o">*</span><span class="p">)</span><span class="nv">tableView</span> <span class="nf">heightForRowAtIndexPath:</span><span class="p">(</span><span class="bp">NSIndexPath</span> <span class="o">*</span><span class="p">)</span><span class="nv">indexPath</span> <span class="p">{</span>

  <span class="k">return</span> <span class="c1">//高さを返す;</span>
<span class="p">}</span>
</pre></div>
</div>

<h3>
<span id="セクションの見た目を思いっきり変えたいんだけれども" class="fragment"></span><a href="#%E3%82%BB%E3%82%AF%E3%82%B7%E3%83%A7%E3%83%B3%E3%81%AE%E8%A6%8B%E3%81%9F%E7%9B%AE%E3%82%92%E6%80%9D%E3%81%84%E3%81%A3%E3%81%8D%E3%82%8A%E5%A4%89%E3%81%88%E3%81%9F%E3%81%84%E3%82%93%E3%81%A0%E3%81%91%E3%82%8C%E3%81%A9%E3%82%82"><i class="fa fa-link"></i></a>セクションの見た目を思いっきり変えたいんだけれども？</h3>

<ul>
<li>(UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)sectionで自由にカスタムしたUIViewを返すとokです。</li>
</ul>

<div class="code-frame" data-lang="objc">
<div class="code-lang"><span class="bold">tableviewの高さを動的に</span></div>
<div class="highlight"><pre><span></span><span class="p">-</span> <span class="p">(</span><span class="bp">UIView</span> <span class="o">*</span><span class="p">)</span><span class="nf">tableView:</span><span class="p">(</span><span class="bp">UITableView</span> <span class="o">*</span><span class="p">)</span><span class="nv">tableView</span> <span class="nf">viewForHeaderInSection:</span><span class="p">(</span><span class="n">NSInteger</span><span class="p">)</span><span class="nv">section</span>
  <span class="c1">// コードで生成したり とかXib ,Storyboard内から生成とか</span>
  <span class="k">return</span> <span class="c1">//UIViewを返す;</span>
<span class="p">}</span>
</pre></div>
</div>

<h3>
<span id="画像を表示しようとしたら遅いよ" class="fragment"></span><a href="#%E7%94%BB%E5%83%8F%E3%82%92%E8%A1%A8%E7%A4%BA%E3%81%97%E3%82%88%E3%81%86%E3%81%A8%E3%81%97%E3%81%9F%E3%82%89%E9%81%85%E3%81%84%E3%82%88"><i class="fa fa-link"></i></a>画像を表示しようとしたら遅いよ！</h3>

<p>外部データを取ってきて表示するときにまずはまるのが画像の処理だと思います。非同期で必ず処理しましょう。<br>
画像の非同期ロードはライブラリを使った方が早いと思います。</p>

<h3>
<span id="ヘッダーやフッタをつけたいよ" class="fragment"></span><a href="#%E3%83%98%E3%83%83%E3%83%80%E3%83%BC%E3%82%84%E3%83%95%E3%83%83%E3%82%BF%E3%82%92%E3%81%A4%E3%81%91%E3%81%9F%E3%81%84%E3%82%88"><i class="fa fa-link"></i></a>ヘッダーやフッタをつけたいよ！</h3>

<p>tableView.tableHeaderView  tableView.tableFooterView に突っ込む方法を書いてあるのが多いんですが、今回はもっと簡単な方法としてStoryboardなどでこれらのビューを直接突っ込んで管理できるのでおすすめ。<br>
テーブルビューの上や下にUIViewをドラッグすると<br>
<a href="https://camo.qiitausercontent.com/e122ac377a31a49a362955a57c2923f53d4ca0c2/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f33373733312f31623431353666352d623662622d353863362d666163632d6636643939653866323565622e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/e122ac377a31a49a362955a57c2923f53d4ca0c2/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f33373733312f31623431353666352d623662622d353863362d666163632d6636643939653866323565622e706e67" alt="スクリーンショット 2014-02-22 12.51.32.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/37731/1b4156f5-b6bb-58c6-facc-f6d99e8f25eb.png"></a></p>

<p>UIViewをIB上で直接追加できます。<br>
<a href="https://camo.qiitausercontent.com/e44ea8d70fac8b36d048a343505d0aa9fc1657cd/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f33373733312f66363031616465362d663037622d303339662d613631342d3032353333666338323734642e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/e44ea8d70fac8b36d048a343505d0aa9fc1657cd/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f33373733312f66363031616465362d663037622d303339662d613631342d3032353333666338323734642e706e67" alt="スクリーンショット 2014-02-22 12.57.00.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/37731/f601ade6-f07b-039f-a614-02533fc8274d.png"></a></p>

<p>後はIBでレイアウトをくめばok<br>
<a href="https://camo.qiitausercontent.com/c4ccfaa584c0bc85e15c8f1d5768a39d6440538c/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f33373733312f65366238653162662d326335352d356231382d633064302d6239346635656566343430642e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/c4ccfaa584c0bc85e15c8f1d5768a39d6440538c/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f33373733312f65366238653162662d326335352d356231382d633064302d6239346635656566343430642e706e67" alt="スクリーンショット 2014-02-22 12.58.18.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/37731/e6b8e1bf-2c55-5b18-c0d0-b94f5eef440d.png"></a></p>

<h2>
<span id="使用するクラスフレームワークライブラリ" class="fragment"></span><a href="#%E4%BD%BF%E7%94%A8%E3%81%99%E3%82%8B%E3%82%AF%E3%83%A9%E3%82%B9%E3%83%95%E3%83%AC%E3%83%BC%E3%83%A0%E3%83%AF%E3%83%BC%E3%82%AF%E3%83%A9%E3%82%A4%E3%83%96%E3%83%A9%E3%83%AA"><i class="fa fa-link"></i></a>使用するクラス、フレームワーク、ライブラリ</h2>

<h3>
<span id="ビュー" class="fragment"></span><a href="#%E3%83%93%E3%83%A5%E3%83%BC"><i class="fa fa-link"></i></a>ビュー</h3>

<p>UITableViewController<br>
<a href="https://developer.apple.com/library/ios/documentation/uikit/reference/UITableView_Class/Reference/Reference.html" class="autolink" rel="nofollow noopener" target="_blank">https://developer.apple.com/library/ios/documentation/uikit/reference/UITableView_Class/Reference/Reference.html</a></p>

<h3>
<span id="画像非同期読み込み" class="fragment"></span><a href="#%E7%94%BB%E5%83%8F%E9%9D%9E%E5%90%8C%E6%9C%9F%E8%AA%AD%E3%81%BF%E8%BE%BC%E3%81%BF"><i class="fa fa-link"></i></a>画像非同期読み込み</h3>

<p>AFNetworking<br>
<a href="https://github.com/AFNetworking/AFNetworking" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/AFNetworking/AFNetworking</a><br>
AFNetworkingにもUIImageViewのカテゴリがあります。cacheの実装上version2を使うのが吉。</p>

<p>SDWebImage<br>
<a href="https://github.com/rs/SDWebImage" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/rs/SDWebImage</a></p>

<h3>
<span id="キャッシュ" class="fragment"></span><a href="#%E3%82%AD%E3%83%A3%E3%83%83%E3%82%B7%E3%83%A5"><i class="fa fa-link"></i></a>キャッシュ</h3>

<p>NSCache<br>
<a href="https://developer.apple.com/library/mac/documentation/Cocoa/Reference/NSCache_Class/Reference/Reference.html" class="autolink" rel="nofollow noopener" target="_blank">https://developer.apple.com/library/mac/documentation/Cocoa/Reference/NSCache_Class/Reference/Reference.html</a></p>

<p>TMCache<br>
<a href="https://github.com/tumblr/TMCache" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/tumblr/TMCache</a><br>
tumblr製のキャッシュ. ほかでも使えそうです。</p>

<h2>
<span id="ui参考" class="fragment"></span><a href="#ui%E5%8F%82%E8%80%83"><i class="fa fa-link"></i></a>UI参考</h2>

<p><a href="http://pttrns.com/categories/1-activity-feeds" class="autolink" rel="nofollow noopener" target="_blank">http://pttrns.com/categories/1-activity-feeds</a></p>

<h1>
<span id="instagramみたいなカメラアプリを作りたいんだ" class="fragment"></span><a href="#instagram%E3%81%BF%E3%81%9F%E3%81%84%E3%81%AA%E3%82%AB%E3%83%A1%E3%83%A9%E3%82%A2%E3%83%97%E3%83%AA%E3%82%92%E4%BD%9C%E3%82%8A%E3%81%9F%E3%81%84%E3%82%93%E3%81%A0"><i class="fa fa-link"></i></a>Instagramみたいなカメラアプリを作りたいんだ！</h1>

<p><a href="https://camo.qiitausercontent.com/d4a6d5eabaa3d2294c5ae77bbd64fe351316111a/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f33373733312f34373431623132362d666236382d653334302d336166372d3437363764653165306362622e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/d4a6d5eabaa3d2294c5ae77bbd64fe351316111a/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f33373733312f34373431623132362d666236382d653334302d336166372d3437363764653165306362622e706e67" alt="IMG_2002.PNG" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/37731/4741b126-fb68-e340-3af7-4767de1e0cbb.png"></a></p>

<p>アプリを作り始めるとやっぱりカメラや写真などを扱うアプリを作りたくなるはずです。</p>

<h2>
<span id="ここがポイント-1" class="fragment"></span><a href="#%E3%81%93%E3%81%93%E3%81%8C%E3%83%9D%E3%82%A4%E3%83%B3%E3%83%88-1"><i class="fa fa-link"></i></a>ここがポイント</h2>

<h3>
<span id="写真の向きが何かおかしいよ" class="fragment"></span><a href="#%E5%86%99%E7%9C%9F%E3%81%AE%E5%90%91%E3%81%8D%E3%81%8C%E4%BD%95%E3%81%8B%E3%81%8A%E3%81%8B%E3%81%97%E3%81%84%E3%82%88"><i class="fa fa-link"></i></a>写真の向きが何かおかしいよ！</h3>

<p>写真の向きは、保存されている向きと表示されてる向きは違うため、処理する場合にそこを意識する場面が多々あります。</p>

<h3>
<span id="かっこいいフィルターをつけたりデコったりしたいよ" class="fragment"></span><a href="#%E3%81%8B%E3%81%A3%E3%81%93%E3%81%84%E3%81%84%E3%83%95%E3%82%A3%E3%83%AB%E3%82%BF%E3%83%BC%E3%82%92%E3%81%A4%E3%81%91%E3%81%9F%E3%82%8A%E3%83%87%E3%82%B3%E3%81%A3%E3%81%9F%E3%82%8A%E3%81%97%E3%81%9F%E3%81%84%E3%82%88"><i class="fa fa-link"></i></a>かっこいいフィルターをつけたり、デコったりしたいよ！</h3>

<p>自前実装は難しいので簡単にやるならライブラリを使いましょう</p>

<p>フィルター処理ならGPUImageを使うのと、<br>
<a href="https://github.com/BradLarson/GPUImage" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/BradLarson/GPUImage</a><br>
フル機能の編集機能を簡単に組み込みたい場合はAviaryを入れるとよいでしょう<br>
<a href="http://developers.aviary.com/" class="autolink" rel="nofollow noopener" target="_blank">http://developers.aviary.com/</a></p>

<p>パフォーマンスはGPUImageの方がいいですが、CoreImageも場面によっては使えそうです。</p>

<h3>
<span id="自分でカメラロールのデータを処理したいんだけど" class="fragment"></span><a href="#%E8%87%AA%E5%88%86%E3%81%A7%E3%82%AB%E3%83%A1%E3%83%A9%E3%83%AD%E3%83%BC%E3%83%AB%E3%81%AE%E3%83%87%E3%83%BC%E3%82%BF%E3%82%92%E5%87%A6%E7%90%86%E3%81%97%E3%81%9F%E3%81%84%E3%82%93%E3%81%A0%E3%81%91%E3%81%A9"><i class="fa fa-link"></i></a>自分でカメラロールのデータを処理したいんだけど！</h3>

<p>AssetsLibaryを使いましょう。扱うのがちょっと難しいかもしれませんが、必須です。 <br>
取得した写真をきれいに並べたい場合はUICollectionViewControllerで表示すればいいですね</p>

<h2>
<span id="使用するクラスフレームワークライブラリ-1" class="fragment"></span><a href="#%E4%BD%BF%E7%94%A8%E3%81%99%E3%82%8B%E3%82%AF%E3%83%A9%E3%82%B9%E3%83%95%E3%83%AC%E3%83%BC%E3%83%A0%E3%83%AF%E3%83%BC%E3%82%AF%E3%83%A9%E3%82%A4%E3%83%96%E3%83%A9%E3%83%AA-1"><i class="fa fa-link"></i></a>使用するクラス、フレームワーク、ライブラリ</h2>

<h3>
<span id="ビュー-1" class="fragment"></span><a href="#%E3%83%93%E3%83%A5%E3%83%BC-1"><i class="fa fa-link"></i></a>ビュー</h3>

<p>UIImagePickerViewController<br>
<a href="https://developer.apple.com/library/ios/documentation/uikit/reference/UIImagePickerController_Class/UIImagePickerController/UIImagePickerController.html" class="autolink" rel="nofollow noopener" target="_blank">https://developer.apple.com/library/ios/documentation/uikit/reference/UIImagePickerController_Class/UIImagePickerController/UIImagePickerController.html</a></p>

<p>UICollectionViewController<br>
<a href="https://developer.apple.com/library/ios/documentation/uikit/reference/UICollectionViewController_clas/Reference/Reference.html" class="autolink" rel="nofollow noopener" target="_blank">https://developer.apple.com/library/ios/documentation/uikit/reference/UICollectionViewController_clas/Reference/Reference.html</a></p>

<h2>
<span id="画像処理" class="fragment"></span><a href="#%E7%94%BB%E5%83%8F%E5%87%A6%E7%90%86"><i class="fa fa-link"></i></a>画像処理</h2>

<p>AssetsLibrary<br>
<a href="https://developer.apple.com/library/ios/documentation/AssetsLibrary/Reference/AssetsLibraryFramework/_index.html" class="autolink" rel="nofollow noopener" target="_blank">https://developer.apple.com/library/ios/documentation/AssetsLibrary/Reference/AssetsLibraryFramework/_index.html</a></p>

<p>GPUImage<br>
<a href="https://github.com/BradLarson/GPUImage" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/BradLarson/GPUImage</a></p>

<p>Aviary<br>
<a href="http://developers.aviary.com/" class="autolink" rel="nofollow noopener" target="_blank">http://developers.aviary.com/</a></p>

<p>CoreImage<br>
<a href="https://developer.apple.com/library/ios/documentation/graphicsimaging/reference/CoreImageFilterReference/Reference/reference.html" class="autolink" rel="nofollow noopener" target="_blank">https://developer.apple.com/library/ios/documentation/graphicsimaging/reference/CoreImageFilterReference/Reference/reference.html</a></p>

<h2>
<span id="ui参考-1" class="fragment"></span><a href="#ui%E5%8F%82%E8%80%83-1"><i class="fa fa-link"></i></a>UI参考</h2>

<p><a href="http://pttrns.com/categories/7-capture" class="autolink" rel="nofollow noopener" target="_blank">http://pttrns.com/categories/7-capture</a></p>

<p><a href="http://pttrns.com/categories/5-photos" class="autolink" rel="nofollow noopener" target="_blank">http://pttrns.com/categories/5-photos</a></p>

<h1>
<span id="ページをめくったりする電子書籍アプリ作りたいんだけど" class="fragment"></span><a href="#%E3%83%9A%E3%83%BC%E3%82%B8%E3%82%92%E3%82%81%E3%81%8F%E3%81%A3%E3%81%9F%E3%82%8A%E3%81%99%E3%82%8B%E9%9B%BB%E5%AD%90%E6%9B%B8%E7%B1%8D%E3%82%A2%E3%83%97%E3%83%AA%E4%BD%9C%E3%82%8A%E3%81%9F%E3%81%84%E3%82%93%E3%81%A0%E3%81%91%E3%81%A9"><i class="fa fa-link"></i></a>ページをめくったりする電子書籍アプリ作りたいんだけど！</h1>

<p><a href="https://camo.qiitausercontent.com/83c599ac17d10f27a75d6bddde04414cc708cc56/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f33373733312f61393736343264332d653838352d393763382d656365342d6437393835373761313566642e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/83c599ac17d10f27a75d6bddde04414cc708cc56/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f33373733312f61393736343264332d653838352d393763382d656365342d6437393835373761313566642e706e67" alt="iBooks_Books.PNG" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/37731/a97642d3-e885-97c8-ece4-d798577a15fd.png"></a></p>

<p>例えば本を読むようなアプリを作りたい！といった場合,iOSでは実現は簡単にできます。</p>

<h2>
<span id="ここがポイント-2" class="fragment"></span><a href="#%E3%81%93%E3%81%93%E3%81%8C%E3%83%9D%E3%82%A4%E3%83%B3%E3%83%88-2"><i class="fa fa-link"></i></a>ここがポイント</h2>

<h2>
<span id="ページの遷移のアニメーションを変えたいよ" class="fragment"></span><a href="#%E3%83%9A%E3%83%BC%E3%82%B8%E3%81%AE%E9%81%B7%E7%A7%BB%E3%81%AE%E3%82%A2%E3%83%8B%E3%83%A1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E3%82%92%E5%A4%89%E3%81%88%E3%81%9F%E3%81%84%E3%82%88"><i class="fa fa-link"></i></a>ページの遷移のアニメーションを変えたいよ！</h2>

<p>iOS6.0以降よりページめくり以外に通常のスクロールも増えているので活用できる場面がちょっとだけふえました。<br>
UIPageViewControllerTransitionStylePageCurl<br>
UIPageViewControllerTransitionStyleScroll</p>

<h2>
<span id="使用するクラスフレームワークライブラリ-2" class="fragment"></span><a href="#%E4%BD%BF%E7%94%A8%E3%81%99%E3%82%8B%E3%82%AF%E3%83%A9%E3%82%B9%E3%83%95%E3%83%AC%E3%83%BC%E3%83%A0%E3%83%AF%E3%83%BC%E3%82%AF%E3%83%A9%E3%82%A4%E3%83%96%E3%83%A9%E3%83%AA-2"><i class="fa fa-link"></i></a>使用するクラス、フレームワーク、ライブラリ</h2>

<p>UIPageViewController<br>
<a href="https://developer.apple.com/library/ios/documentation/uikit/reference/UIPageViewControllerClassReferenceClassRef/UIPageViewControllerClassReference.html" class="autolink" rel="nofollow noopener" target="_blank">https://developer.apple.com/library/ios/documentation/uikit/reference/UIPageViewControllerClassReferenceClassRef/UIPageViewControllerClassReference.html</a></p>

<h1>
<span id="vineみたいな動画のアプリを作ってみたいんだけど" class="fragment"></span><a href="#vine%E3%81%BF%E3%81%9F%E3%81%84%E3%81%AA%E5%8B%95%E7%94%BB%E3%81%AE%E3%82%A2%E3%83%97%E3%83%AA%E3%82%92%E4%BD%9C%E3%81%A3%E3%81%A6%E3%81%BF%E3%81%9F%E3%81%84%E3%82%93%E3%81%A0%E3%81%91%E3%81%A9"><i class="fa fa-link"></i></a>vineみたいな動画のアプリを作ってみたいんだけど</h1>

<p><a href="https://camo.qiitausercontent.com/c701a44bbb7416b931f28b73f361bf4521fcf800/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f33373733312f63656132373336322d383939652d613766312d656635352d3230313532373162623036642e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/c701a44bbb7416b931f28b73f361bf4521fcf800/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f33373733312f63656132373336322d383939652d613766312d656635352d3230313532373162623036642e706e67" alt="IMG_3858.PNG" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/37731/cea27362-899e-a7f1-ef55-2015271bb06d.png"></a></p>

<p>写真アプリの次のフェーズとして動画のアプリがここ最近増えてます。今がその流れに乗り時です！</p>

<h2>
<span id="ここがポイント-3" class="fragment"></span><a href="#%E3%81%93%E3%81%93%E3%81%8C%E3%83%9D%E3%82%A4%E3%83%B3%E3%83%88-3"><i class="fa fa-link"></i></a>ここがポイント</h2>

<h3>
<span id="動画を撮影したい-動画を加工したい" class="fragment"></span><a href="#%E5%8B%95%E7%94%BB%E3%82%92%E6%92%AE%E5%BD%B1%E3%81%97%E3%81%9F%E3%81%84-%E5%8B%95%E7%94%BB%E3%82%92%E5%8A%A0%E5%B7%A5%E3%81%97%E3%81%9F%E3%81%84"><i class="fa fa-link"></i></a>動画を撮影したい! 動画を加工したい！</h3>

<p>AVFoundationフレームワークを使うと色々できます<br>
<a href="https://developer.apple.com/library/ios/documentation/AVFoundation/Reference/AVFoundationFramework/_index.html" class="autolink" rel="nofollow noopener" target="_blank">https://developer.apple.com/library/ios/documentation/AVFoundation/Reference/AVFoundationFramework/_index.html</a></p>

<p>またまたGPUImageにお世話になるのが簡単です。撮影の機能もあり、フィルターもかけれます。<br>
<a href="https://github.com/BradLarson/GPUImage" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/BradLarson/GPUImage</a></p>

<h3>
<span id="動画の向きが何かおかしいよ" class="fragment"></span><a href="#%E5%8B%95%E7%94%BB%E3%81%AE%E5%90%91%E3%81%8D%E3%81%8C%E4%BD%95%E3%81%8B%E3%81%8A%E3%81%8B%E3%81%97%E3%81%84%E3%82%88"><i class="fa fa-link"></i></a>動画の向きが何かおかしいよ！</h3>

<p>動画も写真と同じく表示の向きと保存の向きが違うので注意が必要です。</p>

<h3>
<span id="カメラロールから動画だけとりたいんだけど" class="fragment"></span><a href="#%E3%82%AB%E3%83%A1%E3%83%A9%E3%83%AD%E3%83%BC%E3%83%AB%E3%81%8B%E3%82%89%E5%8B%95%E7%94%BB%E3%81%A0%E3%81%91%E3%81%A8%E3%82%8A%E3%81%9F%E3%81%84%E3%82%93%E3%81%A0%E3%81%91%E3%81%A9"><i class="fa fa-link"></i></a>カメラロールから動画だけとりたいんだけど</h3>

<p>UIImagePickerControllerならmediaTypeにpublic.movieをセット</p>

<div class="code-frame" data-lang="objc"><div class="highlight"><pre><span></span>    <span class="n">_imagePickerController</span><span class="p">.</span><span class="n">mediaTypes</span> <span class="o">=</span> <span class="p">[</span><span class="bp">NSArray</span> <span class="nl">arrayWithObjects</span><span class="p">:</span><span class="s">@"public.movie"</span><span class="p">,</span> <span class="nb">nil</span><span class="p">];</span>
</pre></div></div>

<p>AssetsLibraryで処理する場合はfilterにallvidesoをセット</p>

<div class="code-frame" data-lang="objc"><div class="highlight"><pre><span></span>    <span class="p">[</span><span class="n">assetsGroup</span> <span class="nl">setAssetsFilter</span><span class="p">:[</span><span class="bp">ALAssetsFilter</span> <span class="n">allVideos</span><span class="p">]];</span>
</pre></div></div>

<h2>
<span id="使用するクラスフレームワークライブラリ-3" class="fragment"></span><a href="#%E4%BD%BF%E7%94%A8%E3%81%99%E3%82%8B%E3%82%AF%E3%83%A9%E3%82%B9%E3%83%95%E3%83%AC%E3%83%BC%E3%83%A0%E3%83%AF%E3%83%BC%E3%82%AF%E3%83%A9%E3%82%A4%E3%83%96%E3%83%A9%E3%83%AA-3"><i class="fa fa-link"></i></a>使用するクラス、フレームワーク、ライブラリ</h2>

<p>AVFoundation<br>
<a href="https://developer.apple.com/library/ios/documentation/AVFoundation/Reference/AVFoundationFramework/_index.html" class="autolink" rel="nofollow noopener" target="_blank">https://developer.apple.com/library/ios/documentation/AVFoundation/Reference/AVFoundationFramework/_index.html</a></p>

<p>AssetsLibrary<br>
<a href="https://developer.apple.com/library/ios/documentation/AssetsLibrary/Reference/AssetsLibraryFramework/_index.html" class="autolink" rel="nofollow noopener" target="_blank">https://developer.apple.com/library/ios/documentation/AssetsLibrary/Reference/AssetsLibraryFramework/_index.html</a></p>

<p>GPUImage<br>
<a href="https://github.com/BradLarson/GPUImage" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/BradLarson/GPUImage</a></p>

<h1>
<span id="ミュージックアプリを作りたいよ" class="fragment"></span><a href="#%E3%83%9F%E3%83%A5%E3%83%BC%E3%82%B8%E3%83%83%E3%82%AF%E3%82%A2%E3%83%97%E3%83%AA%E3%82%92%E4%BD%9C%E3%82%8A%E3%81%9F%E3%81%84%E3%82%88"><i class="fa fa-link"></i></a>ミュージックアプリを作りたいよ！</h1>

<p><a href="https://camo.qiitausercontent.com/0596837b3b25f3c88415ffffe7db7e0b619365e1/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f33373733312f34366139353538322d653130622d303232352d393937342d3565343438316139633433662e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/0596837b3b25f3c88415ffffe7db7e0b619365e1/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f33373733312f34366139353538322d653130622d303232352d393937342d3565343438316139633433662e706e67" alt="IMG_1402.PNG" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/37731/46a95582-e10b-0225-9974-5e4481a9c43f.png"></a></p>

<p>音楽プレーヤーとしても便利なiPhoneだからこそ、音楽との連携はまだまだ可能性がありますね。</p>

<h2>
<span id="ここがポイント-4" class="fragment"></span><a href="#%E3%81%93%E3%81%93%E3%81%8C%E3%83%9D%E3%82%A4%E3%83%B3%E3%83%88-4"><i class="fa fa-link"></i></a>ここがポイント</h2>

<h3>
<span id="iphoneに入っている音楽を取得したいんだけど" class="fragment"></span><a href="#iphone%E3%81%AB%E5%85%A5%E3%81%A3%E3%81%A6%E3%81%84%E3%82%8B%E9%9F%B3%E6%A5%BD%E3%82%92%E5%8F%96%E5%BE%97%E3%81%97%E3%81%9F%E3%81%84%E3%82%93%E3%81%A0%E3%81%91%E3%81%A9"><i class="fa fa-link"></i></a>iPhoneに入っている音楽を取得したいんだけど</h3>

<p>組み込みのPickerを使いたい場合はMPMediaPickerControllerをつかえばok</p>

<div class="code-frame" data-lang="objc"><div class="highlight"><pre><span></span>
<span class="c1">// 呼び出し</span>
     <span class="bp">MPMediaPickerController</span> <span class="o">*</span><span class="n">mediaPickerController</span> <span class="o">=</span> <span class="p">[[</span><span class="bp">MPMediaPickerController</span> <span class="n">alloc</span><span class="p">]</span> <span class="n">init</span><span class="p">];</span>
    <span class="n">mediaPickerController</span><span class="p">.</span><span class="n">delegate</span> <span class="o">=</span> <span class="nb">self</span><span class="p">;</span>
    <span class="n">mediaPickerController</span><span class="p">.</span><span class="n">allowsPickingMultipleItems</span> <span class="o">=</span> <span class="nb">NO</span><span class="p">;</span>
   <span class="p">[</span><span class="nb">self</span> <span class="nl">presentModalViewController</span><span class="p">:</span><span class="n">_mediaPickerController</span> <span class="nl">animated</span><span class="p">:</span><span class="nb">YES</span><span class="p">];</span>


<span class="c1">// delegate</span>
<span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">mediaPickerDidCancel:</span><span class="p">(</span><span class="bp">MPMediaPickerController</span> <span class="o">*</span><span class="p">)</span><span class="nv">mediaPicker</span><span class="p">{</span>
     <span class="p">[</span><span class="nb">self</span> <span class="nl">dismissModalViewControllerAnimated</span><span class="p">:</span><span class="nb">YES</span><span class="p">];</span>
<span class="p">}</span>

<span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="nf">mediaPicker:</span> <span class="p">(</span><span class="bp">MPMediaPickerController</span> <span class="o">*</span><span class="p">)</span> <span class="nv">mediaPicker</span>
   <span class="nf">didPickMediaItems:</span> <span class="p">(</span><span class="bp">MPMediaItemCollection</span> <span class="o">*</span><span class="p">)</span> <span class="nv">collection</span>
<span class="p">{</span>
    <span class="c1">// 取得したメディアアイテム</span>
    <span class="bp">MPMediaItem</span> <span class="o">*</span><span class="n">item</span> <span class="o">=</span> <span class="p">[</span><span class="n">collection</span> <span class="n">representativeItem</span><span class="p">];</span>

    <span class="c1">// media itemにたいして プロパティ取得</span>

    <span class="bp">NSString</span> <span class="o">*</span><span class="n">title</span> <span class="o">=</span> <span class="p">[</span><span class="n">_item</span> <span class="nl">valueForProperty</span><span class="p">:</span> <span class="n">MPMediaItemPropertyTitle</span><span class="p">];</span>
    <span class="bp">NSString</span> <span class="o">*</span><span class="n">artistName</span> <span class="o">=</span> <span class="p">[</span><span class="n">_item</span> <span class="nl">valueForProperty</span><span class="p">:</span> <span class="n">MPMediaItemPropertyArtist</span><span class="p">];</span>
    <span class="bp">NSString</span> <span class="o">*</span><span class="n">albumName</span> <span class="o">=</span> <span class="p">[</span><span class="n">_item</span> <span class="nl">valueForProperty</span><span class="p">:</span> <span class="n">MPMediaItemPropertyAlbumTitle</span><span class="p">];</span>
    <span class="bp">NSString</span> <span class="o">*</span><span class="n">totalPlaybackTime</span> <span class="o">=</span><span class="p">[</span><span class="n">_item</span>  <span class="nl">valueForProperty</span><span class="p">:</span><span class="n">MPMediaItemPropertyPlaybackDuration</span><span class="p">];</span>

    <span class="bp">MPMediaItemArtwork</span> <span class="o">*</span><span class="n">artwork</span> <span class="o">=</span> <span class="p">[</span><span class="n">_item</span> <span class="nl">valueForProperty</span><span class="p">:</span> <span class="n">MPMediaItemPropertyArtwork</span><span class="p">];</span>

<span class="p">}</span>
</pre></div></div>

<h3>
<span id="アプリを閉じても音楽を再生させたい" class="fragment"></span><a href="#%E3%82%A2%E3%83%97%E3%83%AA%E3%82%92%E9%96%89%E3%81%98%E3%81%A6%E3%82%82%E9%9F%B3%E6%A5%BD%E3%82%92%E5%86%8D%E7%94%9F%E3%81%95%E3%81%9B%E3%81%9F%E3%81%84"><i class="fa fa-link"></i></a>アプリを閉じても音楽を再生させたい！</h3>

<p>再生するときは MPMusicPlayerControllerを使うのですが、注意点としてアプリをとじでも再生したままにしたい場合はiPodMusicPlayerのinstanceを取得します。</p>

<div class="code-frame" data-lang="objc"><div class="highlight"><pre><span></span>   <span class="bp">MPMusicPlayerController</span> <span class="o">*</span><span class="n">player</span> <span class="o">=</span> <span class="p">[</span><span class="bp">MPMusicPlayerController</span> <span class="n">iPodMusicPlayer</span><span class="p">];</span>
   <span class="p">[</span><span class="n">player</span> <span class="nl">setNowPlayingItem</span><span class="p">:</span><span class="n">item</span><span class="p">];</span>
   <span class="p">[</span><span class="n">player</span> <span class="n">play</span><span class="p">];</span>
</pre></div></div>

<h3>
<span id="今聞いてる音楽を取得したいんだけど" class="fragment"></span><a href="#%E4%BB%8A%E8%81%9E%E3%81%84%E3%81%A6%E3%82%8B%E9%9F%B3%E6%A5%BD%E3%82%92%E5%8F%96%E5%BE%97%E3%81%97%E3%81%9F%E3%81%84%E3%82%93%E3%81%A0%E3%81%91%E3%81%A9"><i class="fa fa-link"></i></a>今聞いてる音楽を取得したいんだけど</h3>

<p>NSNotificationCenterでMPMusicPlayerControllerNowPlayingItemDidChangeNotificationをobserveします。</p>

<div class="code-frame" data-lang="objc"><div class="highlight"><pre><span></span>    <span class="bp">MPMusicPlayerController</span> <span class="o">*</span><span class="n">player</span> <span class="o">=</span> <span class="p">[</span><span class="bp">MPMusicPlayerController</span> <span class="n">iPodMusicPlayer</span><span class="p">];</span>

    <span class="bp">NSNotificationCenter</span> <span class="o">*</span><span class="n">noteCenter</span> <span class="o">=</span> <span class="p">[</span><span class="bp">NSNotificationCenter</span> <span class="n">defaultCenter</span><span class="p">];</span>

    <span class="c1">//　再生曲が変化した時の通知先を登録</span>
    <span class="p">[</span><span class="n">noteCenter</span> <span class="nl">addObserver</span><span class="p">:</span><span class="nb">self</span> <span class="nl">selector</span><span class="p">:</span><span class="k">@selector</span><span class="p">(</span><span class="nl">didItemChanged</span><span class="p">:)</span> <span class="nl">name</span><span class="p">:</span><span class="n">MPMusicPlayerControllerNowPlayingItemDidChangeNotification</span> <span class="nl">object</span><span class="p">:</span><span class="n">_player</span><span class="p">];</span>

<span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">didItemChanged:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">object</span>
<span class="p">{</span>
    <span class="c1">// playerからitemを取得</span>
    <span class="bp">MPMediaItem</span> <span class="o">*</span><span class="n">currentItem</span> <span class="o">=</span> <span class="p">[</span><span class="n">player</span> <span class="n">nowPlayingItem</span><span class="p">];</span>

<span class="p">}</span>
</pre></div></div>

<h3>
<span id="音楽の情報を引っ張ってきたいなあ" class="fragment"></span><a href="#%E9%9F%B3%E6%A5%BD%E3%81%AE%E6%83%85%E5%A0%B1%E3%82%92%E5%BC%95%E3%81%A3%E5%BC%B5%E3%81%A3%E3%81%A6%E3%81%8D%E3%81%9F%E3%81%84%E3%81%AA%E3%81%82"><i class="fa fa-link"></i></a>音楽の情報を引っ張ってきたいなあ</h3>

<p>MPMediaQueryで操作すればOK</p>

<div class="code-frame" data-lang="objc"><div class="highlight"><pre><span></span><span class="c1">// 例：アルバム取得</span>
 <span class="bp">MPMediaQuery</span> <span class="o">*</span><span class="n">query</span> <span class="o">=</span> <span class="p">[</span><span class="bp">MPMediaQuery</span> <span class="n">albumsQuery</span><span class="p">];</span>
    <span class="bp">NSMutableArray</span> <span class="o">*</span><span class="n">list</span> <span class="o">=</span> <span class="p">[[</span><span class="bp">NSMutableArray</span> <span class="n">alloc</span><span class="p">]</span> <span class="n">init</span> <span class="p">];</span>
    <span class="k">for</span><span class="p">(</span><span class="bp">MPMediaItemCollection</span> <span class="o">*</span><span class="n">collection</span> <span class="k">in</span> <span class="p">[</span><span class="n">query</span> <span class="n">collections</span><span class="p">]</span> <span class="p">){</span>
        <span class="p">[</span><span class="n">list</span> <span class="nl">addObject</span><span class="p">:</span>
                    <span class="p">[</span><span class="bp">NSMutableDictionary</span> <span class="nl">dictionaryWithObjectsAndKeys</span><span class="p">:</span>
                                 <span class="p">[[</span><span class="n">collection</span> <span class="n">representativeItem</span><span class="p">]</span> <span class="nl">valueForProperty</span><span class="p">:</span><span class="n">MPMediaItemPropertyAlbumTitle</span><span class="p">],</span><span class="s">@"title"</span><span class="p">,</span>
                                  <span class="p">[[</span><span class="n">collection</span> <span class="n">representativeItem</span><span class="p">]</span> <span class="nl">valueForProperty</span><span class="p">:</span><span class="n">MPMediaItemPropertyAlbumPersistentID</span><span class="p">],</span><span class="s">@"id"</span><span class="p">,</span>
                     <span class="nb">nil</span><span class="p">]</span>
         <span class="p">];</span>
    <span class="p">}</span>
</pre></div></div>

<h3>
<span id="使用するクラスフレームワークライブラリ-4" class="fragment"></span><a href="#%E4%BD%BF%E7%94%A8%E3%81%99%E3%82%8B%E3%82%AF%E3%83%A9%E3%82%B9%E3%83%95%E3%83%AC%E3%83%BC%E3%83%A0%E3%83%AF%E3%83%BC%E3%82%AF%E3%83%A9%E3%82%A4%E3%83%96%E3%83%A9%E3%83%AA-4"><i class="fa fa-link"></i></a>使用するクラス、フレームワーク、ライブラリ</h3>

<p>MediaPlayer<br>
<a href="https://developer.apple.com/library/ios/documentation/MediaPlayer/Reference/MediaPlayer_Framework/_index.html" class="autolink" rel="nofollow noopener" target="_blank">https://developer.apple.com/library/ios/documentation/MediaPlayer/Reference/MediaPlayer_Framework/_index.html</a></p>

<p>ざっくりと説明をしたので、ここもっと深堀って欲しいとかあれば別で書きたいと思います。</p>

<h1>
<span id="最近の記事" class="fragment"></span><a href="#%E6%9C%80%E8%BF%91%E3%81%AE%E8%A8%98%E4%BA%8B"><i class="fa fa-link"></i></a>最近の記事</h1>

<p><a href="http://qiita.com/appwatcher/items/bc6d97a80c847206ba8e" id="reference-4a39d44a978d8597309f">限界までUXを向上させる! Facebook paperのようなアプリを最新UIライブラリAsyncDisplayKitでヌルヌルな操作感を実現しよう！</a></p>

<p><a href="http://qiita.com/appwatcher/items/c6e7e5767ba26aa6558e" id="reference-bb53128b71ed434d71c5">あらゆる「モノ」との連携するIoT時代に向けて。iOS と AndroidのBluetooth LE対応状況を確認しておこう</a></p>

<p><a href="http://qiita.com/appwatcher/items/da77b66cce3c60e50d22" id="reference-46cde9e0f2f4a2ff051d">作ったアプリをブラウザ即見せでモチベーションアップ！！TestFlightよりお手軽なアプリ配布サービスappetize.io</a></p>

<h5>
<span id="appwchr-post" class="fragment"></span><a href="#appwchr-post"><i class="fa fa-link"></i></a>appwchr post</h5>

<hr>

<p><a href="http://qiita.com/appwatcher/items/05513e170b42b09ecd9a" id="reference-0ac0dc1c54dfac5f7f89">次世代のスーパーエンジニアたちも学ぶ！マインクラフトで触れる技術たちその1</a></p>

<p><a href="http://qiita.com/appwatcher/items/00faadbf02f691186a54" id="reference-1b41ea02ae278a34c8c5">あんなすごいエンジニアともであえるかも？？Qiitaユーザーが集まるSlack Teamを作ってみたよ！</a></p>

<p><a href="http://qiita.com/appwatcher/items/6c0280cda9c4c8b3c65f" id="reference-cd72c4d421431a40aac8">goからiOSまで一人でアプリ開発をしてたらいつの間にかマインクラフトエンジニアになった話</a></p>

<p><a href="http://qiita.com/appwatcher/items/49807e72d9600db7196d" id="reference-01e710d7097ebad1784b">API開発の効率化の架け橋！APIのStubサーバーを導入して,API開発に効率化、スピード化、柔軟性を手に入れよう！</a></p>

<p><a href="http://qiita.com/appwatcher/items/4a0dd09c393cc70d961a" id="reference-e84749f214302a0267e7">アプリエンジニアから見てAPI設計において気をつけてもらえるとうれしいこと</a></p>

<p><a href="http://qiita.com/appwatcher/items/4cdf39804d6e46ab7af5" id="reference-4861b819b7b9a546eacc">Goodbye... Jenkins... Jenkinsを卒業してお手軽CI! iOSもAndroidもCircle CIでアプリのCIを回そう</a></p>

<p><a href="http://qiita.com/appwatcher/items/632460e15fbdb81b7a71" id="reference-c72c6c3d4d57ca05bfcc">まだTestFlight使ってたの？急げ！終了目前のTestFlightから,今すぐにiOSもDeployGateに移行しよう！移行パターンも紹介するよ。</a></p>

<p><a href="http://qiita.com/appwatcher/items/50295e82ab0095902aaa" id="reference-44ad7f39c5a3b548f9fb">Swiftを使ってみて直面した闇。現時点で現場でSwiftを採用すべきかどうかの判断材料</a></p>

<p><a href="http://qiita.com/appwatcher/items/07a3babcb9b6cefb307e" id="reference-07fe7e4219e5e23e206f">iOSの開発をする上で絶対に使うべき！外せない！webサービス、開発ツール集【完全版】</a></p>

<p><a href="http://qiita.com/appwatcher/items/7491beffd7260b713542" id="reference-d51460aedff85d5ef025">注目のiBeacomなどの波に乗り遅れないために！iOSのBluetooth開発を容易にするライブラリを書きました。</a></p>

<p><a href="http://qiita.com/appwatcher/items/f0024fe2ac34da345f04" id="reference-391ae3b0f8cff62b5501">まだまだあった！iOSの開発を劇的に改善する最新のwebサービス、開発ツール集１</a></p>

<p><a href="http://qiita.com/appwatcher/items/c15d7311e71b4c2b77f1" id="reference-fbaf93a477065161a225">さらに快適なアプリ開発を！iOSの開発をもっと劇的に改善する最新のwebサービス、開発ツール集2</a></p>

<p><a href="http://qiita.com/appwatcher/items/259e8d13fff0547e90af" id="reference-c7140407f07dd04c8545">スパゲッティから脱出！iOS開発における遷移の問題をすっきり解決する便利ルーティングライブラリをご紹介</a></p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1" style="height:150px;">
<tr>
	<td rowspan="3">8位</td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="thumb-up-120px.png" /></i>2051</kbd>
		<a target="_blank" href="https://qiita.com/mpyw/items/b00b72c5c95aac573b71">PHPでデータベースに接続するときのまとめ</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-08-26<br />21:52:59</center>
	</td>
	<td style="width:200px;">
		<!--投稿者-->
		<center>
			@<a href="user/25060.html">mpyw</a>(255件の記事)<br />(シナプス株式会社 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/25060/profile-images/1473684251">
		</center>
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[PHP]</b> <b>[MySQL]</b> <b>[PDO]</b> <b>[データベース]</b> <b>[セキュリティ]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<!--
		<div style="width:350px;height:150px;overflow:scroll;">%s</div>
		-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;">
<h1>
<span id="あらかじめ読んでおきたい記事" class="fragment"></span><a href="#%E3%81%82%E3%82%89%E3%81%8B%E3%81%98%E3%82%81%E8%AA%AD%E3%82%93%E3%81%A7%E3%81%8A%E3%81%8D%E3%81%9F%E3%81%84%E8%A8%98%E4%BA%8B"><i class="fa fa-link"></i></a>あらかじめ読んでおきたい記事</h1>

<ul>
<li>
<a href="http://qiita.com/7968/items/6f089fec8dde676abb5b" id="reference-d1bd8c285818d9fe20ce">Qiita - 【PHP超入門】クラス～例外処理～PDOの基礎</a> by <a href="/7968" class="user-mention js-hovercard" title="7968" data-hovercard-target-type="user" data-hovercard-target-name="7968">@7968</a> </li>
</ul>

<h1>
<span id="初心者がやりがちなミス" class="fragment"></span><a href="#%E5%88%9D%E5%BF%83%E8%80%85%E3%81%8C%E3%82%84%E3%82%8A%E3%81%8C%E3%81%A1%E3%81%AA%E3%83%9F%E3%82%B9"><i class="fa fa-link"></i></a>初心者がやりがちなミス</h1>

<p>以下のどれかに1つでも当てはまるコードは見直す必要があります．付録にリンクを貼っておきましたので，「該当するかも？」という人はクリックして飛んで読んでください．太字にしてあるものは<ins>脆弱性に直結する危険度の高いもの</ins>です．</p>

<ul>
<li><a href="#mysql_query-%E3%81%AA%E3%81%A9%E3%81%AE%E9%9D%9E%E6%8E%A8%E5%A5%A8%E9%96%A2%E6%95%B0%E3%82%92%E5%88%A9%E7%94%A8%E3%81%97%E3%81%A6%E3%81%84%E3%82%8B"><code>mysql_query</code> などの非推奨関数を利用している</a></li>
<li><a href="#set-names-%E3%81%82%E3%82%8B%E3%81%84%E3%81%AF-set-character-set-%E3%81%AA%E3%81%A9%E3%81%A7%E6%96%87%E5%AD%97%E3%82%B3%E3%83%BC%E3%83%89%E3%82%92%E6%8C%87%E5%AE%9A%E3%81%97%E3%81%A6%E3%81%84%E3%82%8B%E3%81%9D%E3%82%82%E3%81%9D%E3%82%82%E3%83%87%E3%83%BC%E3%82%BF%E3%83%99%E3%83%BC%E3%82%B9%E3%81%A7%E4%BD%BF%E7%94%A8%E3%81%99%E3%82%8B%E6%96%87%E5%AD%97%E3%82%B3%E3%83%BC%E3%83%89%E3%81%AE%E6%8C%87%E5%AE%9A%E3%82%92%E3%81%97%E3%81%A6%E3%81%84%E3%81%AA%E3%81%84"><code>SET NAMES</code> あるいは <code>SET CHARACTER SET</code> などで文字コードを指定している<br>そもそもデータベースで使用する文字コードの指定をしていない</a></li>
<li><strong><a href="#select--from-users-where-id--id-%E3%81%AE%E3%82%88%E3%81%86%E3%81%AB%E5%A4%89%E6%95%B0%E5%B1%95%E9%96%8B%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%A6sql%E6%96%87%E3%82%92%E7%B5%84%E3%81%BF%E7%AB%8B%E3%81%A6%E3%81%A6%E3%81%84%E3%82%8B"><code>"SELECT * FROM users WHERE id = '$id'"</code> のように変数展開を使ってSQL文を組み立てている</a></strong></li>
<li><a href="#_postid-%E3%81%AA%E3%81%A9%E3%81%AE%E5%A4%96%E9%83%A8%E5%85%A5%E5%8A%9B%E3%81%8B%E3%82%89%E3%81%8D%E3%81%9F%E5%A4%89%E6%95%B0%E3%81%8C%E5%AE%9A%E7%BE%A9%E3%81%95%E3%82%8C%E3%81%A6%E3%81%84%E3%82%8B%E3%81%8B%E3%81%A9%E3%81%86%E3%81%8B%E7%A2%BA%E8%AA%8D%E3%81%97%E3%81%A6%E3%81%84%E3%81%AA%E3%81%84%E3%81%9D%E3%82%8C%E3%82%89%E3%81%8C%E6%96%87%E5%AD%97%E5%88%97%E3%81%A7%E3%81%82%E3%82%8B%E3%81%8B%E3%81%A9%E3%81%86%E3%81%8B%E3%81%AE%E7%A2%BA%E8%AA%8D%E3%82%92%E3%81%97%E3%81%A6%E3%81%84%E3%81%AA%E3%81%84%E3%81%9D%E3%82%8C%E3%82%89%E3%82%92%E5%87%BA%E5%8A%9B%E3%81%99%E3%82%8B%E9%9A%9B%E3%81%AB-htmlspecialchars-%E9%96%A2%E6%95%B0%E3%82%92%E5%88%A9%E7%94%A8%E3%81%97%E3%81%A6%E3%81%84%E3%81%AA%E3%81%84"><code>$_POST['id']</code> などの外部入力からきた変数が定義されているかどうか確認していない<br>それらが文字列であるかどうかの確認をしていない<br><strong>それらを出力する際に <code>htmlspecialchars</code> 関数を利用していない</strong></a></li>
<li><a href="#sql%E3%81%AE-like-%E6%BC%94%E7%AE%97%E5%AD%90%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%A6%E3%81%84%E3%82%8B%E3%81%AE%E3%81%AB--_--%E3%81%AE%E3%82%A8%E3%82%B9%E3%82%B1%E3%83%BC%E3%83%97%E3%82%92%E3%81%97%E3%81%A6%E3%81%84%E3%81%AA%E3%81%84">SQLの <code>LIKE</code> 演算子を使っているのに <code>%</code> <code>_</code> <code>\</code> のエスケープをしていない</a></li>
<li><a href="#html%E3%81%AE-bodybody-%E3%81%AE%E4%B8%AD%E3%81%AB%E3%83%87%E3%83%BC%E3%82%BF%E3%83%99%E3%83%BC%E3%82%B9%E6%8E%A5%E7%B6%9A%E5%87%A6%E7%90%86%E3%82%92%E6%9B%B8%E3%81%84%E3%81%A6%E3%81%84%E3%82%8Becho-%E3%82%84-print-%E3%82%92%E3%83%99%E3%82%BF%E6%9B%B8%E3%81%8D%E3%81%97%E3%81%A6%E3%81%84%E3%82%8Bcontent-type%E3%82%92-textplain-%E3%81%AB%E5%A4%89%E6%9B%B4%E3%81%9B%E3%81%9A%E3%81%AB-exit-%E3%82%84-die-%E3%81%A7%E5%BC%B7%E5%88%B6%E7%B5%82%E4%BA%86%E5%87%A6%E7%90%86%E3%82%92%E8%A8%98%E8%BF%B0%E3%81%97%E3%81%A6%E3%81%84%E3%82%8B">HTMLの <code>&lt;body&gt;&lt;/body&gt;</code> の中にデータベース接続処理を書いている<br><code>echo()</code> や <code>print()</code> をベタ書きしている<br>Content-Typeを <code>text/plain</code> に変更せずに <code>exit()</code> や <code>die()</code> で強制終了処理を記述している</a></li>
</ul>

<h1>
<span id="pdoの基本" class="fragment"></span><a href="#pdo%E3%81%AE%E5%9F%BA%E6%9C%AC"><i class="fa fa-link"></i></a>PDOの基本</h1>

<p>PHPでデータベースに接続するためには，現在はPDOを使う方法が主流であると言えるでしょう．PDOの基本的な使い方を確認していきます．内容によって，「前でさらっと書いてあることの定義が後で出てくる」など，どうしても多少前後してしまう部分はありますが，特に気にせずに読み流してください．</p>

<h2>
<span id="データベースに接続" class="fragment"></span><a href="#%E3%83%87%E3%83%BC%E3%82%BF%E3%83%99%E3%83%BC%E3%82%B9%E3%81%AB%E6%8E%A5%E7%B6%9A"><i class="fa fa-link"></i></a>データベースに接続</h2>

<p><a href="http://php.net/manual/ja/pdo.construct.php" rel="nofollow noopener" target="_blank">PDO::__construct</a> メソッドを使用してインスタンスを生成します．コンストラクタなので，実際には直接これを呼び出すコードは書かずに， <strong>new演算子</strong> を用います．</p>

<div class="code-frame" data-lang="php"><div class="highlight"><pre><span></span><span class="nv">$pdo</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PDO</span><span class="p">(</span><span class="nv">$dsn</span><span class="p">,</span> <span class="nv">$username</span><span class="p">,</span> <span class="nv">$password</span><span class="p">,</span> <span class="nv">$driver_options</span><span class="p">);</span>
</pre></div></div>

<p>引数は以下の通りです．</p>

<h3>
<span id="dsn" class="fragment"></span><a href="#dsn"><i class="fa fa-link"></i></a><code>$dsn</code>
</h3>

<p>データベースに接続するために必要な情報です． (Data Source Name)<br>
以下に各データベース製品に応じたDSNの書き方が掲載されています．</p>

<ul>
<li><a href="http://www.php.net/manual/ja/pdo.drivers.php" rel="nofollow noopener" target="_blank">PHP Manual - PDOクラスのデータベース別DSN一覧</a></li>
</ul>

<p>MySQLの基本的な書き方を例に挙げます．</p>

<p><strong><code>mysql:dbname=test;host=localhost;charset=utf8mb4</code></strong></p>

<ul>
<li>頭にデータベースの種類を指定して <code>:</code> で区切る．</li>
<li>各項目は <code>項目名=値</code> とし， <code>;</code> で区切る．</li>
</ul>

<h4>
<span id="dbname" class="fragment"></span><a href="#dbname"><i class="fa fa-link"></i></a><font color="silver">dbname</font>
</h4>

<p>データベース名を指定します．基本的には必須です．但し，データベースを後で <code>USE test</code> のようにSQL文で選択する場合，省略することができます．</p>

<h4>
<span id="host" class="fragment"></span><a href="#host"><i class="fa fa-link"></i></a><font color="silver">host</font>
</h4>

<p>ホスト名またはIPアドレスを指定します．ローカル環境で動かす場合，省略しても問題ない場合が多いです．<code>localhost</code> は自分自身のホスト名， <code>127.0.0.1</code> は自分自身のIPアドレスを指します．どちらを用いても問題が発生する可能性があるので，適宜問題のない方を選択してください．</p>

<ul>
<li>Linux環境はホスト名推奨

<ul>
<li><a href="http://qiita.com/mpyw/items/b00b72c5c95aac573b71#comment-e9db50fff9bffa1dd6f8">upsilonさん: MySQLではlocalhostと127.0.0.1で接続方法が変わるため注意が必要</a></li>
</ul>
</li>
<li>Windows環境はIPアドレス推奨

<ul>
<li><a href="http://www.ah-2.com/2012/01/28/win_localhost_slow.html" rel="nofollow noopener" target="_blank">AH-2 - Windowsでlocalhostへの接続が遅い(解決方法)</a></li>
</ul>
</li>
</ul>

<h4>
<span id="charset" class="fragment"></span><a href="#charset"><i class="fa fa-link"></i></a><font color="silver">charset</font>
</h4>

<p>文字セットを指定します．<code>SET NAMES</code>は避けて，ここで指定するべきです．<code>UTF-8</code>ではなく<code>utf8</code>であることに注意してください．ハイフンは入りません．</p>

<p><strong>【2016/12/17 追記】</strong><br>
<strong>MySQL5.5.3以降の場合は，4バイトからなる絵文字なども正常に取り扱える<code>utf8mb4</code>を使用することを強く推奨します。</strong></p>

<h3>
<span id="username" class="fragment"></span><a href="#username"><i class="fa fa-link"></i></a><code>$username</code>
</h3>

<p>ユーザー名．ルート権限を使う場合，デフォルトでは <code>root</code> です．</p>

<h3>
<span id="password" class="fragment"></span><a href="#password"><i class="fa fa-link"></i></a><code>$password</code>
</h3>

<p>パスワード．ルート権限を使う場合，デフォルトでは空白です．</p>

<h3>
<span id="driver_options" class="fragment"></span><a href="#driver_options"><i class="fa fa-link"></i></a><code>$driver_options</code>
</h3>

<p>接続時のオプションを連想配列で渡します．</p>

<ul>
<li>キーはあらかじめ用意されている定数を取る．</li>
<li>値はあらかじめ用意されている定数以外に，論理値・文字列などの一般的な値も取り得る．</li>
</ul>

<div class="code-frame" data-lang="php"><div class="highlight"><pre><span></span><span class="p">[</span>
    <span class="nx">PDO</span><span class="o">::</span><span class="na">ATTR_ERRMODE</span> <span class="o">=&gt;</span> <span class="nx">PDO</span><span class="o">::</span><span class="na">ERRMODE_EXCEPTION</span><span class="p">,</span>
    <span class="nx">PDO</span><span class="o">::</span><span class="na">ATTR_EMULATE_PREPARES</span> <span class="o">=&gt;</span> <span class="k">false</span><span class="p">,</span>
<span class="p">]</span>
</pre></div></div>

<p>オプションの内容については後で触れます．</p>

<h2>
<span id="接続後にオプションを指定" class="fragment"></span><a href="#%E6%8E%A5%E7%B6%9A%E5%BE%8C%E3%81%AB%E3%82%AA%E3%83%97%E3%82%B7%E3%83%A7%E3%83%B3%E3%82%92%E6%8C%87%E5%AE%9A"><i class="fa fa-link"></i></a>接続後にオプションを指定</h2>

<p><a href="http://www.php.net/manual/ja/pdo.setattribute.php" rel="nofollow noopener" target="_blank">PDO::setAttribute</a> メソッドを使用します．多くのオプションはコンストラクタの <code>$driver_options</code> で指定してもこちらで指定しても大差はありませんが， <code>PDO::MYSQL_ATTR_INIT_COMMAND</code> <code>PDO::ATTR_PERSISTENT</code> など，一部コンストラクタ専用のものがあります．</p>

<div class="code-frame" data-lang="php"><div class="highlight"><pre><span></span><span class="nv">$pdo</span><span class="o">-&gt;</span><span class="na">setAttribute</span><span class="p">(</span><span class="nx">PDO</span><span class="o">::</span><span class="na">ATTR_ERRMODE</span><span class="p">,</span> <span class="nx">PDO</span><span class="o">::</span><span class="na">ERRMODE_EXCEPTION</span><span class="p">);</span>
<span class="nv">$pdo</span><span class="o">-&gt;</span><span class="na">setAttribute</span><span class="p">(</span><span class="nx">PDO</span><span class="o">::</span><span class="na">ATTR_EMULATE_PREPARES</span><span class="p">,</span> <span class="k">false</span><span class="p">);</span>
</pre></div></div>

<h2>
<span id="よく使われるドライバオプションとその値" class="fragment"></span><a href="#%E3%82%88%E3%81%8F%E4%BD%BF%E3%82%8F%E3%82%8C%E3%82%8B%E3%83%89%E3%83%A9%E3%82%A4%E3%83%90%E3%82%AA%E3%83%97%E3%82%B7%E3%83%A7%E3%83%B3%E3%81%A8%E3%81%9D%E3%81%AE%E5%80%A4"><i class="fa fa-link"></i></a>よく使われるドライバオプションとその値</h2>

<h3>
<span id="pdoattr_errmode" class="fragment"></span><a href="#pdoattr_errmode"><i class="fa fa-link"></i></a><code>PDO::ATTR_ERRMODE</code>
</h3>

<p>SQL実行でエラーが起こった際にどう処理するかを指定します．デフォルトは <code>PDO::ERRMODE_SILENT</code> です．</p>

<ul>
<li>
<strong><code>PDO::ERRMODE_EXCEPTION</code></strong> を設定すると例外をスローしてくれる．これを選択しておくのが一番無難．</li>
<li>
<code>PDO::ERRMODE_WARNING</code> はSQLで発生したエラーをPHPのWarningとして報告する．<br><ins><a href="http://www.php.net/manual/ja/pdostatement.execute.php" rel="nofollow noopener" target="_blank">PDOStatement::execute</a> メソッドの返り値が <code>false</code> でないかを毎回のように確認する必要がある</ins>．</li>
<li>
<code>PDO::ERRMODE_SILENT</code> は何も報告しない．<br><ins><a href="http://www.php.net/manual/ja/pdostatement.execute.php" rel="nofollow noopener" target="_blank">PDOStatement::execute</a> メソッドの返り値が <code>false</code> でないかを毎回のように確認する必要がある</ins>．</li>
</ul>

<h3>
<span id="pdoattr_default_fetch_mode" class="fragment"></span><a href="#pdoattr_default_fetch_mode"><i class="fa fa-link"></i></a><code>PDO::ATTR_DEFAULT_FETCH_MODE</code>
</h3>

<p><a href="http://www.php.net/manual/ja/pdostatement.fetch.php" rel="nofollow noopener" target="_blank">PDOStatement::fetch</a> メソッドや <a href="http://www.php.net/manual/ja/pdostatement.fetchall.php" rel="nofollow noopener" target="_blank">PDOStatement::fetchAll</a> メソッドで引数が省略された場合や，ステートメントがforeach文に直接かけられた場合のフェッチスタイルを設定します．デフォルトは<code>PDO::FETCH_BOTH</code>です．</p>

<ul>
<li>
<code>PDO::FETCH_BOTH</code><br>
カラム番号とカラム名の両方をキーとする連想配列で取得する．</li>
<li>
<code>PDO::FETCH_NUM</code><br>
カラム番号をキーとする配列で取得する．</li>
<li>
<strong><code>PDO::FETCH_ASSOC</code></strong><br>
カラム名をキーとする連想配列で取得する．これが一番ポピュラーな設定．</li>
<li>
<code>PDO::FETCH_OBJ</code><br>
カラム名をプロパティとする基本オブジェクトで取得する．</li>
</ul>

<h3>
<span id="pdoattr_emulate_prepares" class="fragment"></span><a href="#pdoattr_emulate_prepares"><i class="fa fa-link"></i></a><code>PDO::ATTR_EMULATE_PREPARES</code>
</h3>

<p>データベース側が持つ「プリペアドステートメント」という機能のエミュレーションをPDO側で行うかどうかを設定します．</p>

<ul>
<li>PHP5.1のデフォルトは <code>false</code>
</li>
<li><ins>PHP5.2以降のデフォルトは <code>true</code></ins></li>
</ul>

<p>この設定で，いくつかPDOの挙動に違いが表れます．</p>

<ul>
<li>プリペアドステートメントのためにデータベースサーバと通信する必要が無くなるため，エミュレーションを行ったほうがパフォーマンスは向上する．</li>
<li>存在しないテーブル名やカラム名をSQL文に持つプリペアドステートメントを発行したとき，エミュレーションOFFの場合はすぐにエラーが発生するが，エミュレーションONの場合は実際にクエリを実行するまでエラーが発生するかどうかわからない．</li>
<li>エミュレーションがONの場合のみ， <code>;</code> 区切りで複数のSQL文を1つのクエリで実行することができる．</li>
</ul>

<p>その他，どちらにも利点と欠点があるので，違いは追って見ていき，最後に表にまとめることにします．</p>

<div class="code-frame" data-lang="php">
<div class="code-lang"><span class="bold">PDOクラスのエミュレーションを無効にする</span></div>
<div class="highlight"><pre><span></span><span class="nv">$pdo</span><span class="o">-&gt;</span><span class="na">setAttribute</span><span class="p">(</span><span class="nx">PDO</span><span class="o">::</span><span class="na">ATTR_EMULATE_PREPARES</span><span class="p">,</span> <span class="k">false</span><span class="p">);</span>
</pre></div>
</div>

<h3>
<span id="pdoattr_persistent-コンストラクタ専用" class="fragment"></span><a href="#pdoattr_persistent-%E3%82%B3%E3%83%B3%E3%82%B9%E3%83%88%E3%83%A9%E3%82%AF%E3%82%BF%E5%B0%82%E7%94%A8"><i class="fa fa-link"></i></a><code>PDO::ATTR_PERSISTENT</code> (コンストラクタ専用)</h3>

<p><code>true</code> を設定すると，スクリプトが終了してもデータベースへの接続を維持し，次回に再利用します．規模が大きくなってくると設定する恩恵が大きくなりますが，ほそぼそと練習用サイトを作っているうちは役に立たないでしょう．</p>

<h3>
<span id="pdomysql_attr_use_buffered_query-mysql専用" class="fragment"></span><a href="#pdomysql_attr_use_buffered_query-mysql%E5%B0%82%E7%94%A8"><i class="fa fa-link"></i></a><code>PDO::MYSQL_ATTR_USE_BUFFERED_QUERY</code> (MySQL専用)</h3>

<p><code>true</code> のとき， バッファクエリを使用します．デフォルト値はバージョンによって異なるようで，不明です．PHP5.3の時代には既にデフォルトが <code>true</code> で今も変わっていない…？少なくとも，私が確認できる限りの最近バージョンではデフォルトは <code>true</code> です．</p>

<ul>
<li>
<strong>バッファクエリ</strong>:<br>全ての情報をデータベースサーバから取得してきておいて，PHPに1件ずつ取り出させる</li>
<li>
<strong>非バッファクエリ</strong>:<br>1件ごとにデータベースサーバと通信を行って，PHPに取り出させる</li>
</ul>

<p>取得してくる情報がメモリに収まりきらない莫大な量である，といった非常に特殊なケースを除けば，バッファクエリを選択しておく方が無難です．サーバ負荷も軽減され，途中までフェッチしたところで突然例外が発生するような事態も避けられます．また，非バッファクエリには複数同時にクエリを実行できないなどの大きな欠点もあります．基本的にこれは，データベースから取得したデータでHTMLを表示する用途ではなく，<ins>コマンドラインからバッチ処理を実行する</ins>用途で使われます．</p>

<h3>
<span id="pdomysql_attr_init_command-mysql専用-コンストラクタ専用" class="fragment"></span><a href="#pdomysql_attr_init_command-mysql%E5%B0%82%E7%94%A8-%E3%82%B3%E3%83%B3%E3%82%B9%E3%83%88%E3%83%A9%E3%82%AF%E3%82%BF%E5%B0%82%E7%94%A8"><i class="fa fa-link"></i></a><code>PDO::MYSQL_ATTR_INIT_COMMAND</code> (MySQL専用) (コンストラクタ専用)</h3>

<p>接続した直後に実行されるクエリをここに書きます．</p>

<h2>
<span id="基本コーディング" class="fragment"></span><a href="#%E5%9F%BA%E6%9C%AC%E3%82%B3%E3%83%BC%E3%83%87%E3%82%A3%E3%83%B3%E3%82%B0"><i class="fa fa-link"></i></a>基本コーディング</h2>

<p>書き方のテンプレです．</p>

<div class="code-frame" data-lang="html+php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>

<span class="k">try</span> <span class="p">{</span>

    <span class="cm">/* リクエストから得たスーパーグローバル変数をチェックするなどの処理 */</span>

    <span class="c1">// データベースに接続</span>
    <span class="nv">$pdo</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PDO</span><span class="p">(</span>
        <span class="s1">'mysql:dbname=testdb;host=localhost;charset=utf8mb4'</span><span class="p">,</span>
        <span class="s1">'root'</span><span class="p">,</span>
        <span class="s1">''</span><span class="p">,</span>
        <span class="p">[</span>
            <span class="nx">PDO</span><span class="o">::</span><span class="na">ATTR_ERRMODE</span> <span class="o">=&gt;</span> <span class="nx">PDO</span><span class="o">::</span><span class="na">ERRMODE_EXCEPTION</span><span class="p">,</span>
            <span class="nx">PDO</span><span class="o">::</span><span class="na">ATTR_DEFAULT_FETCH_MODE</span> <span class="o">=&gt;</span> <span class="nx">PDO</span><span class="o">::</span><span class="na">FETCH_ASSOC</span><span class="p">,</span>
        <span class="p">]</span>
    <span class="p">);</span>

    <span class="cm">/* データベースから値を取ってきたり， データを挿入したりする処理 */</span>

<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">PDOException</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>

    <span class="c1">// エラーが発生した場合は「500 Internal Server Error」でテキストとして表示して終了する</span>
    <span class="c1">// - もし手抜きしたくない場合は普通にHTMLの表示を継続する</span>
    <span class="c1">// - ここではエラー内容を表示しているが， 実際の商用環境ではログファイルに記録して， Webブラウザには出さないほうが望ましい</span>
    <span class="nb">header</span><span class="p">(</span><span class="s1">'Content-Type: text/plain; charset=UTF-8'</span><span class="p">,</span> <span class="k">true</span><span class="p">,</span> <span class="mi">500</span><span class="p">);</span>
    <span class="k">exit</span><span class="p">(</span><span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">());</span> 

<span class="p">}</span>

<span class="c1">// Webブラウザにこれから表示するものがUTF-8で書かれたHTMLであることを伝える</span>
<span class="c1">// (これか &lt;meta charset="utf-8"&gt; の最低限どちらか1つがあればいい． 両方あっても良い．)</span>
<span class="nb">header</span><span class="p">(</span><span class="s1">'Content-Type: text/html; charset=utf-8'</span><span class="p">);</span>

<span class="cp">?&gt;</span>
<span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">"utf-8"</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Example<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
        <span class="c">&lt;!-- ここではHTMLを書く以外のことは一切しない --&gt;</span>
    <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div></div>

<h3>
<span id="参考-コンストラクタでのエラーモードってどうなるの" class="fragment"></span><a href="#%E5%8F%82%E8%80%83-%E3%82%B3%E3%83%B3%E3%82%B9%E3%83%88%E3%83%A9%E3%82%AF%E3%82%BF%E3%81%A7%E3%81%AE%E3%82%A8%E3%83%A9%E3%83%BC%E3%83%A2%E3%83%BC%E3%83%89%E3%81%A3%E3%81%A6%E3%81%A9%E3%81%86%E3%81%AA%E3%82%8B%E3%81%AE"><i class="fa fa-link"></i></a>参考: コンストラクタでのエラーモードってどうなるの？</h3>

<p>PDOのコンストラクタは <code>PDO::ERRMODE_EXCEPTION</code> の有無に関わらず <strong>PDOException</strong> をスローしますが， <ins>ホストに接続できなかった</ins>場合などに <strong>Warning</strong> を発生します．普通は気に留める必要はありませんが，ホストを動的に指定させるようなプログラムを書いているならば， <a href="http://www.php.net/manual/ja/function.set-error-handler.php" rel="nofollow noopener" target="_blank">set_error_handler</a> 関数を使って <strong>ErrorException</strong> に変換しなければ，例外処理を行うことができません．</p>

<h2>
<span id="pdoquery-メソッドで直接クエリを実行する" class="fragment"></span><a href="#pdoquery-%E3%83%A1%E3%82%BD%E3%83%83%E3%83%89%E3%81%A7%E7%9B%B4%E6%8E%A5%E3%82%AF%E3%82%A8%E3%83%AA%E3%82%92%E5%AE%9F%E8%A1%8C%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a><a href="http://www.php.net/manual/ja/pdo.query.php" rel="nofollow noopener" target="_blank">PDO::query</a> メソッドで直接クエリを実行する</h2>

<p>ユーザー入力を伴わないクエリに関しては単に <a href="http://www.php.net/manual/ja/pdo.query.php" rel="nofollow noopener" target="_blank">PDO::query</a> メソッドを実行すればいいだけです．返り値は <strong>PDOStatement</strong> となります．</p>

<div class="code-frame" data-lang="php">
<div class="code-lang"><span class="bold">全員を取得する</span></div>
<div class="highlight"><pre><span></span><span class="nv">$stmt</span> <span class="o">=</span> <span class="nv">$pdo</span><span class="o">-&gt;</span><span class="na">query</span><span class="p">(</span><span class="s1">'SELECT * FROM users'</span><span class="p">);</span>
</pre></div>
</div>

<h2>
<span id="pdoexec-メソッドで直接クエリを実行する" class="fragment"></span><a href="#pdoexec-%E3%83%A1%E3%82%BD%E3%83%83%E3%83%89%E3%81%A7%E7%9B%B4%E6%8E%A5%E3%82%AF%E3%82%A8%E3%83%AA%E3%82%92%E5%AE%9F%E8%A1%8C%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a><a href="http://www.php.net/manual/ja/pdo.exec.php" rel="nofollow noopener" target="_blank">PDO::exec</a> メソッドで直接クエリを実行する</h2>

<p>ユーザー入力を伴わないクエリで， <strong>INSERT</strong> や <strong>UPDATE</strong> 等で作用した件数を直接返り値に欲しい場合は <a href="http://www.php.net/manual/ja/pdo.exec.php" rel="nofollow noopener" target="_blank">PDO::exec</a> メソッドを代わりに使います．特に結果を必要としない場合においてもこちらを使用すべきです．後に登場する <a href="http://www.php.net/manual/ja/pdostatement.execute.php" rel="nofollow noopener" target="_blank">PDOStatement::execute</a> と紛らわしいので注意してください．</p>

<div class="code-frame" data-lang="php">
<div class="code-lang"><span class="bold">全員の年齢を+1し，その対象となった人数を返り値として取得する</span></div>
<div class="highlight"><pre><span></span><span class="nv">$count</span> <span class="o">=</span> <span class="nv">$pdo</span><span class="o">-&gt;</span><span class="na">exec</span><span class="p">(</span><span class="s1">'UPDATE users SET age = age + 1'</span><span class="p">);</span>
</pre></div>
</div>

<h2>
<span id="pdoprepare--pdostatementbindvalue--pdostatementexecute-の3ステップでクエリを実行する" class="fragment"></span><a href="#pdoprepare--pdostatementbindvalue--pdostatementexecute-%E3%81%AE3%E3%82%B9%E3%83%86%E3%83%83%E3%83%97%E3%81%A7%E3%82%AF%E3%82%A8%E3%83%AA%E3%82%92%E5%AE%9F%E8%A1%8C%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a><a href="http://www.php.net/manual/ja/pdo.prepare.php" rel="nofollow noopener" target="_blank">PDO::prepare</a> → <a href="http://www.php.net/manual/ja/pdostatement.bindvalue.php" rel="nofollow noopener" target="_blank">PDOStatement::bindValue</a> → <a href="http://www.php.net/manual/ja/pdostatement.execute.php" rel="nofollow noopener" target="_blank">PDOStatement::execute</a> の3ステップでクエリを実行する</h2>

<p>ユーザー入力を受け取ってSQL文を動的に生成する場合は <strong>プリペアドステートメント</strong> と <strong>プレースホルダ</strong> を使わなければなりません．</p>

<ul>
<li>
<strong>プレースホルダ</strong>:<br>直訳すると「場所取り」．何かユーザ入力を当てはめる場所としてあらかじめ確保しておくもの．</li>
<li>
<strong>プリペアドステートメント</strong>:<br>直訳すると「予約文」．文を予約したもの．通常，「予約文」は「場所取り」を使うために作られる．もし「場所取り」が無ければ普通に <a href="http://www.php.net/manual/ja/pdo.query.php" rel="nofollow noopener" target="_blank">PDO::query</a> などで実行するだけで十分なためである．</li>
</ul>

<p>プレースホルダには2種類あり，<strong>疑問符プレースホルダ</strong> を使う方法と， <strong>名前付きプレースホルダ</strong> を使う方法があります．もしこれらが混ざってしまうと</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>SQLSTATE[HY093]: Invalid parameter number: mixed named and positional parameters
</pre></div></div>

<p>が発生するので，どちらか一方のみを選択してください．</p>

<h3>
<span id="疑問符プレースホルダ" class="fragment"></span><a href="#%E7%96%91%E5%95%8F%E7%AC%A6%E3%83%97%E3%83%AC%E3%83%BC%E3%82%B9%E3%83%9B%E3%83%AB%E3%83%80"><i class="fa fa-link"></i></a>疑問符プレースホルダ</h3>

<ul>
<li>
<code>?</code> の「番目」は <strong>1</strong> から始まる．</li>
<li>
<code>PDO::PARAM_STR</code> は省略することが出来る．</li>
<li>エミュレーションがONの場合には正しくキャストしてくれないバグのようなものが仕様として存在するため，<ins>文字列以外のものを扱う際に明示的なキャストが必要</ins>．</li>
<li>
<code>NULL</code> 値に関しては <code>PDO::PARAM_NULL</code> が暗黙的に使用される．</li>
</ul>

<div class="code-frame" data-lang="php">
<div class="code-lang"><span class="bold">エミュレーションがONの場合はこうする必要がある</span></div>
<div class="highlight"><pre><span></span><span class="nv">$stmt</span> <span class="o">=</span> <span class="nv">$pdo</span><span class="o">-&gt;</span><span class="na">prepare</span><span class="p">(</span><span class="s1">'SELECT * FROM users WHERE gender = ? AND age = ?'</span><span class="p">);</span>
<span class="nv">$stmt</span><span class="o">-&gt;</span><span class="na">bindValue</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nv">$gender</span><span class="p">);</span>
<span class="nv">$stmt</span><span class="o">-&gt;</span><span class="na">bindValue</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="p">(</span><span class="nx">int</span><span class="p">)</span><span class="nv">$age</span><span class="p">,</span> <span class="nx">PDO</span><span class="o">::</span><span class="na">PARAM_INT</span><span class="p">);</span>
<span class="nv">$stmt</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">();</span>
</pre></div>
</div>

<div class="code-frame" data-lang="php">
<div class="code-lang"><span class="bold">エミュレーションがOFFの場合はこれでもOK</span></div>
<div class="highlight"><pre><span></span><span class="nv">$stmt</span> <span class="o">=</span> <span class="nv">$pdo</span><span class="o">-&gt;</span><span class="na">prepare</span><span class="p">(</span><span class="s1">'SELECT * FROM users WHERE gender = ? AND age = ?'</span><span class="p">);</span>
<span class="nv">$stmt</span><span class="o">-&gt;</span><span class="na">bindValue</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nv">$gender</span><span class="p">);</span>
<span class="nv">$stmt</span><span class="o">-&gt;</span><span class="na">bindValue</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="nv">$age</span><span class="p">,</span> <span class="nx">PDO</span><span class="o">::</span><span class="na">PARAM_INT</span><span class="p">);</span>
<span class="nv">$stmt</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">();</span>
</pre></div>
</div>

<ul>
<li>番目で整数以外を指定した場合，適当な変換が行われる． (但し，こんなコードは書くべきではない)</li>
</ul>

<div class="code-frame" data-lang="php">
<div class="code-lang"><span class="bold">良い例</span></div>
<div class="highlight"><pre><span></span><span class="nv">$stmt</span><span class="o">-&gt;</span><span class="na">bindValue</span><span class="p">(</span><span class="s1">'2'</span><span class="p">,</span> <span class="nv">$age</span><span class="p">,</span> <span class="nx">PDO</span><span class="o">::</span><span class="na">PARAM_INT</span><span class="p">);</span>
<span class="nv">$stmt</span><span class="o">-&gt;</span><span class="na">bindValue</span><span class="p">(</span><span class="s1">'02'</span><span class="p">,</span> <span class="nv">$age</span><span class="p">,</span> <span class="nx">PDO</span><span class="o">::</span><span class="na">PARAM_INT</span><span class="p">);</span>
<span class="nv">$stmt</span><span class="o">-&gt;</span><span class="na">bindValue</span><span class="p">(</span><span class="s1">'+02'</span><span class="p">,</span> <span class="nv">$age</span><span class="p">,</span> <span class="nx">PDO</span><span class="o">::</span><span class="na">PARAM_INT</span><span class="p">);</span>
<span class="nv">$stmt</span><span class="o">-&gt;</span><span class="na">bindValue</span><span class="p">(</span><span class="s1">'2e0'</span><span class="p">,</span> <span class="nv">$age</span><span class="p">,</span> <span class="nx">PDO</span><span class="o">::</span><span class="na">PARAM_INT</span><span class="p">);</span>
<span class="nv">$stmt</span><span class="o">-&gt;</span><span class="na">bindValue</span><span class="p">(</span><span class="s1">'00002.9999'</span><span class="p">,</span> <span class="nv">$age</span><span class="p">,</span> <span class="nx">PDO</span><span class="o">::</span><span class="na">PARAM_INT</span><span class="p">);</span>
</pre></div>
</div>

<div class="code-frame" data-lang="php">
<div class="code-lang"><span class="bold">悪い例</span></div>
<div class="highlight"><pre><span></span><span class="c1">// SQLSTATE[HY093]: Invalid parameter number: Columns/Parameters are 1-based</span>
<span class="nv">$stmt</span><span class="o">-&gt;</span><span class="na">bindValue</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="nv">$age</span><span class="p">,</span> <span class="nx">PDO</span><span class="o">::</span><span class="na">PARAM_INT</span><span class="p">);</span>

<span class="c1">// オーバーフローして3になる</span>
<span class="c1">// SQLSTATE[HY093]: Invalid parameter number: parameter was not defined</span>
<span class="nv">$stmt</span><span class="o">-&gt;</span><span class="na">bindValue</span><span class="p">(</span><span class="s1">'00002.999999999999999999999999999'</span><span class="p">,</span> <span class="nv">$age</span><span class="p">,</span> <span class="nx">PDO</span><span class="o">::</span><span class="na">PARAM_INT</span><span class="p">);</span>

<span class="c1">// Notice: A non well formed numeric value encountered</span>
<span class="nv">$stmt</span><span class="o">-&gt;</span><span class="na">bindValue</span><span class="p">(</span><span class="s1">'2a'</span><span class="p">,</span> <span class="nv">$age</span><span class="p">,</span> <span class="nx">PDO</span><span class="o">::</span><span class="na">PARAM_INT</span><span class="p">);</span>
</pre></div>
</div>

<h3>
<span id="名前付きプレースホルダ" class="fragment"></span><a href="#%E5%90%8D%E5%89%8D%E4%BB%98%E3%81%8D%E3%83%97%E3%83%AC%E3%83%BC%E3%82%B9%E3%83%9B%E3%83%AB%E3%83%80"><i class="fa fa-link"></i></a>名前付きプレースホルダ</h3>

<ul>
<li>
<code>:</code> を頭につけ，半角英数字とアンダースコアにて構成する．</li>
<li>バインド時の頭の <code>:</code> は省略することが出来る．</li>
</ul>

<div class="code-frame" data-lang="php">
<div class="code-lang"><span class="bold">こちらも同様にエミュレーションがONならば明示的なキャストを忘れない</span></div>
<div class="highlight"><pre><span></span><span class="nv">$stmt</span> <span class="o">=</span> <span class="nv">$pdo</span><span class="o">-&gt;</span><span class="na">prepare</span><span class="p">(</span><span class="s1">'SELECT * FROM users WHERE age = :age AND gender = :gender'</span><span class="p">);</span>
<span class="nv">$stmt</span><span class="o">-&gt;</span><span class="na">bindValue</span><span class="p">(</span><span class="s1">':age'</span><span class="p">,</span> <span class="p">(</span><span class="nx">int</span><span class="p">)</span><span class="nv">$age</span><span class="p">,</span> <span class="nx">PDO</span><span class="o">::</span><span class="na">PARAM_INT</span><span class="p">);</span>
<span class="nv">$stmt</span><span class="o">-&gt;</span><span class="na">bindValue</span><span class="p">(</span><span class="s1">':gender'</span><span class="p">,</span> <span class="nv">$gender</span><span class="p">);</span>
</pre></div>
</div>

<div class="code-frame" data-lang="php">
<div class="code-lang"><span class="bold">頭のコロンを省略したケース</span></div>
<div class="highlight"><pre><span></span><span class="nv">$stmt</span><span class="o">-&gt;</span><span class="na">bindValue</span><span class="p">(</span><span class="s1">'gender'</span><span class="p">,</span> <span class="nv">$gender</span><span class="p">);</span>
</pre></div>
</div>

<ul>
<li>
<ins>エミュレーションがONの場合のみ</ins>，同名のプレースホルダを複数使うことが出来る．</li>
</ul>

<div class="code-frame" data-lang="php">
<div class="code-lang"><span class="bold">IDが20で年齢も20歳の人を取得</span></div>
<div class="highlight"><pre><span></span><span class="nv">$n</span> <span class="o">=</span> <span class="mi">20</span><span class="p">;</span>
<span class="nv">$stmt</span> <span class="o">=</span> <span class="nv">$pdo</span><span class="o">-&gt;</span><span class="na">prepare</span><span class="p">(</span><span class="s1">'SELECT * FROM users WHERE age = :n AND id = :n'</span><span class="p">);</span>
<span class="nv">$stmt</span><span class="o">-&gt;</span><span class="na">bindValue</span><span class="p">(</span><span class="s1">':n'</span><span class="p">,</span> <span class="p">(</span><span class="nx">int</span><span class="p">)</span><span class="nv">$age</span><span class="p">,</span> <span class="nx">PDO</span><span class="o">::</span><span class="na">PARAM_INT</span><span class="p">);</span>
<span class="nv">$stmt</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">();</span>
</pre></div>
</div>

<p>なお， 値を即時にバインドするのではなく，変数を参照的にバインドしておき，実際に値をバインドするのは実行時になる <a href="http://www.php.net/manual/ja/pdostatement.bindparam.php" rel="nofollow noopener" target="_blank">PDOStatement::bindParam</a> メソッドもありますが，原則的にこちらを使う必要はありません．<ins>エミュレーションがONの場合</ins>，実行後にバインドした変数が文字列型にされる仕様もあるので注意してください．</p>

<ul>
<li><a href="http://qiita.com/_dozen_/items/e3c00a0a581378a4cc70" id="reference-7d3adea71261d1a0d1b9">Qiita - 最近PDOを使っていてハマったこと2つ．</a></li>
</ul>

<h2>
<span id="pdoprepare--pdostatementexecute-の2ステップでクエリを実行する" class="fragment"></span><a href="#pdoprepare--pdostatementexecute-%E3%81%AE2%E3%82%B9%E3%83%86%E3%83%83%E3%83%97%E3%81%A7%E3%82%AF%E3%82%A8%E3%83%AA%E3%82%92%E5%AE%9F%E8%A1%8C%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a><a href="http://www.php.net/manual/ja/pdo.prepare.php" rel="nofollow noopener" target="_blank">PDO::prepare</a> → <a href="http://www.php.net/manual/ja/pdostatement.execute.php" rel="nofollow noopener" target="_blank">PDOStatement::execute</a> の2ステップでクエリを実行する</h2>

<p><a href="http://www.php.net/manual/ja/pdostatement.execute.php" rel="nofollow noopener" target="_blank">PDOStatement::execute</a> メソッドの引数に配列を渡すと，それらを全てバインドしたあとそのままSQLを実行してくれます．但し，以下の条件に注意してください．</p>

<ul>
<li>
<ins><code>NULL</code> 値以外は全て <code>PDO::PARAM_STR</code> 扱いになる</ins> ．もし間違った型でバインドをしても，MySQL/SQLiteはデータベース側で自動的にキャストし直してくれるが，パフォーマンスの低下やバグの原因になるので，可能な限り避けたほうがいい．<ins>PostgreSQLの場合はエラーになる</ins>．</li>
<li>また， <ins>既に <a href="http://www.php.net/manual/ja/pdostatement.bindvalue.php" rel="nofollow noopener" target="_blank">PDOStatement::bindValue</a> メソッドで値がバインドされていた場合でも，それらは全て無視される</ins>．これを用いる場合，全てのバインドをこの引数で行わなければならない．</li>
</ul>

<h3>
<span id="疑問符プレースホルダ-1" class="fragment"></span><a href="#%E7%96%91%E5%95%8F%E7%AC%A6%E3%83%97%E3%83%AC%E3%83%BC%E3%82%B9%E3%83%9B%E3%83%AB%E3%83%80-1"><i class="fa fa-link"></i></a>疑問符プレースホルダ</h3>

<p><a href="http://www.php.net/manual/ja/pdostatement.bindvalue.php" rel="nofollow noopener" target="_blank">PDOStatement::bindValue</a> メソッドを用いたときと異なり，<code>?</code> の「番目」が <strong>0</strong> から始まることに注意してください．</p>

<div class="code-frame" data-lang="php"><div class="highlight"><pre><span></span><span class="nv">$stmt</span> <span class="o">=</span> <span class="nv">$pdo</span><span class="o">-&gt;</span><span class="na">prepare</span><span class="p">(</span><span class="s1">'SELECT * FROM users WHERE city = ? AND gender = ?'</span><span class="p">);</span>
<span class="nv">$stmt</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">([</span><span class="nv">$city</span><span class="p">,</span> <span class="nv">$gender</span><span class="p">]);</span>
</pre></div></div>

<div class="code-frame" data-lang="php">
<div class="code-lang"><span class="bold">キーを適切に設定すれば順番を変えて指定することも可能</span></div>
<div class="highlight"><pre><span></span><span class="nv">$stmt</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">([</span><span class="mi">1</span> <span class="o">=&gt;</span> <span class="nv">$gender</span><span class="p">,</span> <span class="mi">0</span> <span class="o">=&gt;</span> <span class="nv">$city</span><span class="p">]);</span>
</pre></div>
</div>

<h3>
<span id="名前付きプレースホルダ-1" class="fragment"></span><a href="#%E5%90%8D%E5%89%8D%E4%BB%98%E3%81%8D%E3%83%97%E3%83%AC%E3%83%BC%E3%82%B9%E3%83%9B%E3%83%AB%E3%83%80-1"><i class="fa fa-link"></i></a>名前付きプレースホルダ</h3>

<div class="code-frame" data-lang="php"><div class="highlight"><pre><span></span><span class="nv">$stmt</span> <span class="o">=</span> <span class="nv">$pdo</span><span class="o">-&gt;</span><span class="na">prepare</span><span class="p">(</span><span class="s1">'SELECT * FROM users WHERE city = :city AND gender = :gender'</span><span class="p">);</span>
<span class="nv">$stmt</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">([</span><span class="s1">':city'</span> <span class="o">=&gt;</span> <span class="nv">$city</span><span class="p">,</span> <span class="s1">':gender'</span> <span class="o">=&gt;</span> <span class="nv">$gender</span><span class="p">]);</span>
</pre></div></div>

<div class="code-frame" data-lang="php">
<div class="code-lang"><span class="bold">頭のコロンは省略することが出来る</span></div>
<div class="highlight"><pre><span></span><span class="nv">$stmt</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">([</span><span class="s1">'city'</span> <span class="o">=&gt;</span> <span class="nv">$city</span><span class="p">,</span> <span class="s1">'gender'</span> <span class="o">=&gt;</span> <span class="nv">$gender</span><span class="p">]);</span>
</pre></div>
</div>

<div class="code-frame" data-lang="php">
<div class="code-lang"><span class="bold">compact関数を活用する例</span></div>
<div class="highlight"><pre><span></span><span class="nv">$stmt</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">(</span><span class="nb">compact</span><span class="p">(</span><span class="s1">'city'</span><span class="p">,</span> <span class="s1">'gender'</span><span class="p">));</span>
</pre></div>
</div>

<h2>
<span id="select-の結果を取得する" class="fragment"></span><a href="#select-%E3%81%AE%E7%B5%90%E6%9E%9C%E3%82%92%E5%8F%96%E5%BE%97%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a><code>SELECT</code> の結果を取得する</h2>

<h3>
<span id="結果の型" class="fragment"></span><a href="#%E7%B5%90%E6%9E%9C%E3%81%AE%E5%9E%8B"><i class="fa fa-link"></i></a>結果の型</h3>

<h4>
<span id="mysql" class="fragment"></span><a href="#mysql"><i class="fa fa-link"></i></a><font color="silver">MySQL</font>
</h4>

<table>
<thead>
<tr>
<th style="text-align: center">データベース</th>
<th style="text-align: center">PHP<br>(エミュレーション無しmysqlnd)</th>
<th style="text-align: center">PHP<br>(libmysqlclient)<br>(エミュレーション有りmysqlnd)<br>
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center">NULL</td>
<td style="text-align: center">NULL</td>
<td style="text-align: center">NULL</td>
</tr>
<tr>
<td style="text-align: center">文字列</td>
<td style="text-align: center">String</td>
<td style="text-align: center">String</td>
</tr>
<tr>
<td style="text-align: center">日付</td>
<td style="text-align: center">String</td>
<td style="text-align: center">String</td>
</tr>
<tr>
<td style="text-align: center">タイムスタンプ</td>
<td style="text-align: center">Integer</td>
<td style="text-align: center">String</td>
</tr>
<tr>
<td style="text-align: center">論理値</td>
<td style="text-align: center"><strong>Integer</strong></td>
<td style="text-align: center">String</td>
</tr>
<tr>
<td style="text-align: center">PHPで扱える<ins>値の</ins>整数</td>
<td style="text-align: center">Integer</td>
<td style="text-align: center">String</td>
</tr>
<tr>
<td style="text-align: center">PHPで扱えない<ins>値の</ins>整数</td>
<td style="text-align: center">String</td>
<td style="text-align: center">String</td>
</tr>
<tr>
<td style="text-align: center">浮動小数点数</td>
<td style="text-align: center">Float</td>
<td style="text-align: center">String</td>
</tr>
</tbody>
</table>

<p>エミュレーションに関するオプションは <code>PDO::ATTR_EMULATE_PREPARES</code> という命名ではありますが，<ins>プリペアドステートメントを使用しない場合にも影響が及ぶ</ins>ことに注意してください．</p>

<h4>
<span id="postgresql" class="fragment"></span><a href="#postgresql"><i class="fa fa-link"></i></a><font color="silver">PostgreSQL</font>
</h4>

<table>
<thead>
<tr>
<th style="text-align: center">データベース</th>
<th style="text-align: center">PHP</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center">NULL</td>
<td style="text-align: center">NULL</td>
</tr>
<tr>
<td style="text-align: center">文字列</td>
<td style="text-align: center">String</td>
</tr>
<tr>
<td style="text-align: center">日付</td>
<td style="text-align: center">String</td>
</tr>
<tr>
<td style="text-align: center">タイムスタンプ</td>
<td style="text-align: center">Integer</td>
</tr>
<tr>
<td style="text-align: center">論理値</td>
<td style="text-align: center">Boolean</td>
</tr>
<tr>
<td style="text-align: center">PHPで扱える<ins>型の</ins>整数</td>
<td style="text-align: center">Integer</td>
</tr>
<tr>
<td style="text-align: center">PHPで扱えない<ins>型の</ins>整数</td>
<td style="text-align: center">String</td>
</tr>
<tr>
<td style="text-align: center">浮動小数点数</td>
<td style="text-align: center"><strong>String</strong></td>
</tr>
</tbody>
</table>

<h4>
<span id="sqlite" class="fragment"></span><a href="#sqlite"><i class="fa fa-link"></i></a><font color="silver">SQLite</font>
</h4>

<table>
<thead>
<tr>
<th style="text-align: center">データベース</th>
<th style="text-align: center">PHP</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center">NULL</td>
<td style="text-align: center">NULL</td>
</tr>
<tr>
<td style="text-align: center">その他</td>
<td style="text-align: center">String</td>
</tr>
</tbody>
</table>

<h3>
<span id="pdosetattribute-で取得する型を変更できるケース" class="fragment"></span><a href="#pdosetattribute-%E3%81%A7%E5%8F%96%E5%BE%97%E3%81%99%E3%82%8B%E5%9E%8B%E3%82%92%E5%A4%89%E6%9B%B4%E3%81%A7%E3%81%8D%E3%82%8B%E3%82%B1%E3%83%BC%E3%82%B9"><i class="fa fa-link"></i></a><a href="http://www.php.net/manual/ja/pdo.setattribute.php" rel="nofollow noopener" target="_blank">PDO::setAttribute</a> で取得する型を変更できるケース</h3>

<h4>
<span id="pdoattr_oracle_nulls" class="fragment"></span><a href="#pdoattr_oracle_nulls"><i class="fa fa-link"></i></a><code>PDO::ATTR_ORACLE_NULLS</code>
</h4>

<table>
<thead>
<tr>
<th style="text-align: center">データベース上</th>
<th style="text-align: center"><strong><code>PDO::NULL_EMPTY_STRING</code></strong></th>
<th style="text-align: center"><strong><code>PDO::NULL_TO_STRING</code></strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center">NULL</td>
<td style="text-align: center">NULL</td>
<td style="text-align: center">""</td>
</tr>
<tr>
<td style="text-align: center">""</td>
<td style="text-align: center">NULL</td>
<td style="text-align: center">""</td>
</tr>
</tbody>
</table>

<p>オプション名に <code>ORACLE</code> という名前が入っていますが，Oracle以外のデータベースでも利用することができます．</p>

<h4>
<span id="pdoattr_stringify_fetches" class="fragment"></span><a href="#pdoattr_stringify_fetches"><i class="fa fa-link"></i></a><code>PDO::ATTR_STRINGIFY_FETCHES</code>
</h4>

<p><code>true</code> に設定すると，エミュレーションがOFFの場合に数値が文字列化されます．<ins>エミュレーションがONの場合は，この設定に関わらず常に文字列化されます</ins>．</p>

<h3>
<span id="pdostatementfetch" class="fragment"></span><a href="#pdostatementfetch"><i class="fa fa-link"></i></a><a href="http://www.php.net/manual/ja/pdostatement.fetch.php" rel="nofollow noopener" target="_blank">PDOStatement::fetch</a>
</h3>

<p>カーソルをずらしながら，指定したフェッチモードで1行ずつ取得していきます．</p>

<ul>
<li>引数を省略した場合はデフォルトフェッチモードが使用される．</li>
<li>全ての取得が終わると常に <code>false</code> を返す．</li>
</ul>

<p>デフォルトフェッチモードを <code>PDO::FETCH_ASSOC</code> に設定した際の例を示します．</p>

<div class="code-frame" data-lang="php">
<div class="code-lang"><span class="bold">一番基本的な方法</span></div>
<div class="highlight"><pre><span></span><span class="k">while</span> <span class="p">(</span><span class="nv">$row</span> <span class="o">=</span> <span class="nv">$stmt</span><span class="o">-&gt;</span><span class="na">fetch</span><span class="p">())</span> <span class="p">{</span>
    <span class="nb">printf</span><span class="p">(</span><span class="s2">"%s lives in %s&lt;br /&gt;</span><span class="se">\n</span><span class="s2">"</span><span class="p">,</span> <span class="nv">$row</span><span class="p">[</span><span class="s1">'name'</span><span class="p">],</span> <span class="nv">$row</span><span class="p">[</span><span class="s1">'city'</span><span class="p">]);</span>
<span class="p">}</span>
</pre></div>
</div>

<div class="code-frame" data-lang="php">
<div class="code-lang"><span class="bold">vprintf()関数を使った応用</span></div>
<div class="highlight"><pre><span></span><span class="k">while</span> <span class="p">(</span><span class="nv">$row</span> <span class="o">=</span> <span class="nv">$stmt</span><span class="o">-&gt;</span><span class="na">fetch</span><span class="p">())</span> <span class="p">{</span>
    <span class="nb">vprintf</span><span class="p">(</span><span class="s2">"%s lives in %s&lt;br /&gt;</span><span class="se">\n</span><span class="s2">"</span><span class="p">,</span> <span class="nv">$row</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>

<p>PDOStatementクラスはTraversableインターフェースを実装しているため，デフォルトフェッチモードを使う場合，while文の代わりにforeach文でもっとスマートに書くことができます．但し，<ins>HTML表示のために変数を準備する場合には，多くは配列として持っておく方が都合がいいので，後に紹介する <a href="http://www.php.net/manual/ja/pdostatement.fetchall.php" rel="nofollow noopener" target="_blank">PDOStatement::fetchAll</a> メソッドの使用を検討してください</ins>．</p>

<div class="code-frame" data-lang="php"><div class="highlight"><pre><span></span><span class="k">foreach</span> <span class="p">(</span><span class="nv">$stmt</span> <span class="k">as</span> <span class="nv">$row</span><span class="p">)</span> <span class="p">{</span>
    <span class="nb">printf</span><span class="p">(</span><span class="s2">"%s lives in %s&lt;br /&gt;</span><span class="se">\n</span><span class="s2">"</span><span class="p">,</span> <span class="nv">$row</span><span class="p">[</span><span class="s1">'name'</span><span class="p">],</span> <span class="nv">$row</span><span class="p">[</span><span class="s1">'city'</span><span class="p">]);</span>
<span class="p">}</span>
</pre></div></div>

<div class="code-frame" data-lang="php">
<div class="code-lang"><span class="bold">0から始まるオフセットを取り出すことも出来る</span></div>
<div class="highlight"><pre><span></span><span class="k">foreach</span> <span class="p">(</span><span class="nv">$stmt</span> <span class="k">as</span> <span class="nv">$i</span> <span class="o">=&gt;</span> <span class="nv">$row</span><span class="p">)</span> <span class="p">{</span>
    <span class="nb">printf</span><span class="p">(</span><span class="s2">"[%d] %s lives in %s&lt;br /&gt;</span><span class="se">\n</span><span class="s2">"</span><span class="p">,</span> <span class="nv">$i</span><span class="p">,</span> <span class="nv">$row</span><span class="p">[</span><span class="s1">'name'</span><span class="p">],</span> <span class="nv">$row</span><span class="p">[</span><span class="s1">'city'</span><span class="p">]);</span>
<span class="p">}</span>
</pre></div>
</div>

<h3>
<span id="pdostatementfetchobject" class="fragment"></span><a href="#pdostatementfetchobject"><i class="fa fa-link"></i></a><a href="http://www.php.net/manual/ja/pdostatement.fetchobject.php" rel="nofollow noopener" target="_blank">PDOStatement::fetchObject</a>
</h3>

<p>連想配列の代わりにstdClassオブジェクトとして取得します．<a href="http://www.php.net/manual/ja/pdostatement.fetch.php" rel="nofollow noopener" target="_blank">PDOStatement::fetch</a> で <code>PDO::FETCH_OBJ</code> を指定するケースと等価ですが，こちらの方が短く書くことができます．</p>

<div class="code-frame" data-lang="php"><div class="highlight"><pre><span></span><span class="k">while</span> <span class="p">(</span><span class="nv">$row</span> <span class="o">=</span> <span class="nv">$stmt</span><span class="o">-&gt;</span><span class="na">fetchObject</span><span class="p">())</span> <span class="p">{</span>
    <span class="nb">printf</span><span class="p">(</span><span class="s2">"%s lives in %s&lt;br /&gt;</span><span class="se">\n</span><span class="s2">"</span><span class="p">,</span> <span class="nv">$row</span><span class="o">-&gt;</span><span class="na">name</span><span class="p">,</span> <span class="nv">$row</span><span class="o">-&gt;</span><span class="na">city</span><span class="p">);</span>
<span class="p">}</span>
</pre></div></div>

<h3>
<span id="pdostatementfetchcolumn" class="fragment"></span><a href="#pdostatementfetchcolumn"><i class="fa fa-link"></i></a><a href="http://www.php.net/manual/ja/pdostatement.fetchcolumn.php" rel="nofollow noopener" target="_blank">PDOStatement::fetchColumn</a>
</h3>

<p>特定の1カラムのみを文字列として取得します．<a href="http://www.php.net/manual/ja/pdostatement.fetch.php" rel="nofollow noopener" target="_blank">PDOStatement::fetch</a> で <code>PDO::FETCH_COLUMN</code> を指定するケースと等価ですが，こちらの方が短く書くことができます．</p>

<ul>
<li>先頭から数えてそのカラムが何番目にあるかを第1引数として渡す．「番目」は <strong>0</strong> から始まる．省略した場合は 0 を指定したとみなされる．</li>
<li>値に <code>0</code> が含まれる可能性がある場合は， <strong><code>false !==</code></strong> の条件判定をしなければならない．</li>
</ul>

<div class="code-frame" data-lang="php"><div class="highlight"><pre><span></span><span class="k">while</span> <span class="p">(</span><span class="k">false</span> <span class="o">!==</span> <span class="nv">$value</span> <span class="o">=</span> <span class="nv">$stmt</span><span class="o">-&gt;</span><span class="na">fetchColumn</span><span class="p">())</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">"</span><span class="si">{</span><span class="nv">$value</span><span class="si">}</span><span class="s2">&lt;br /&gt;</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="p">}</span>
</pre></div></div>

<h3>
<span id="pdostatementfetchall" class="fragment"></span><a href="#pdostatementfetchall"><i class="fa fa-link"></i></a><a href="http://www.php.net/manual/ja/pdostatement.fetchall.php" rel="nofollow noopener" target="_blank">PDOStatement::fetchAll</a>
</h3>

<p>一気に全件取得して2次元配列とします．</p>

<ul>
<li>引数を省略した場合はデフォルトフェッチモードが使用される．</li>
</ul>

<div class="code-frame" data-lang="php"><div class="highlight"><pre><span></span><span class="nv">$rows</span> <span class="o">=</span> <span class="nv">$stmt</span><span class="o">-&gt;</span><span class="na">fetchAll</span><span class="p">();</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$rows</span><span class="p">);</span>
</pre></div></div>

<ul>
<li>特定のカラムだけ一気に全件取得して1次元配列としたい場合，第1引数に <strong><code>PDO::FETCH_COLUMN</code></strong> を指定し，第2引数にカラムの「番目」を渡す．「番目」は <strong>0</strong> から始まる．省略した場合は 0 を指定したとみなされる．</li>
</ul>

<div class="code-frame" data-lang="php"><div class="highlight"><pre><span></span><span class="nv">$values</span> <span class="o">=</span> <span class="nv">$stmt</span><span class="o">-&gt;</span><span class="na">fetchAll</span><span class="p">(</span><span class="nx">PDO</span><span class="o">::</span><span class="na">FETCH_COLUMN</span><span class="p">);</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$values</span><span class="p">);</span>
</pre></div></div>

<h3>
<span id="pdostatementsetfetchmode" class="fragment"></span><a href="#pdostatementsetfetchmode"><i class="fa fa-link"></i></a><a href="http://www.php.net/manual/ja/pdostatement.setfetchmode.php" rel="nofollow noopener" target="_blank">PDOStatement::setFetchMode</a>
</h3>

<p>PDOオブジェクト自体にデフォルトフェッチモードを指定する方法を紹介しましたが，このメソッドを利用すれば個別に発行されたPDOStatementオブジェクトに対して後からフェッチモードを指定することができます．引数の渡し方がモードによって異なるので，詳しくはマニュアルを参照してください．</p>

<div class="code-frame" data-lang="php">
<div class="code-lang"><span class="bold">0番目のカラムをforeachで取得していくケース</span></div>
<div class="highlight"><pre><span></span><span class="nv">$stmt</span><span class="o">-&gt;</span><span class="na">setFetchMode</span><span class="p">(</span><span class="nx">PDO</span><span class="o">::</span><span class="na">FETCH_COLUMN</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
<span class="k">foreach</span> <span class="p">(</span><span class="nv">$stmt</span> <span class="k">as</span> <span class="nv">$i</span> <span class="o">=&gt;</span> <span class="nv">$name</span><span class="p">)</span> <span class="p">{</span> <span class="o">...</span> <span class="p">}</span>
</pre></div>
</div>

<p>実は… <a href="http://www.php.net/manual/ja/pdo.query.php" rel="nofollow noopener" target="_blank">PDO::query</a> を用いる場合にも同じ形式でフェッチモードを指定することができます．</p>

<div class="code-frame" data-lang="php">
<div class="code-lang"><span class="bold">0番目のカラムをforeachで取得していくケース</span></div>
<div class="highlight"><pre><span></span><span class="k">foreach</span> <span class="p">(</span><span class="nv">$pdo</span><span class="o">-&gt;</span><span class="na">query</span><span class="p">(</span><span class="nv">$sql</span><span class="p">,</span> <span class="nx">PDO</span><span class="o">::</span><span class="na">FETCH_COLUMN</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="k">as</span> <span class="nv">$i</span> <span class="o">=&gt;</span> <span class="nv">$name</span><span class="p">)</span> <span class="p">{</span> <span class="o">...</span> <span class="p">}</span>
</pre></div>
</div>

<h2>
<span id="update-insert-で作用した行数を取得する" class="fragment"></span><a href="#update-insert-%E3%81%A7%E4%BD%9C%E7%94%A8%E3%81%97%E3%81%9F%E8%A1%8C%E6%95%B0%E3%82%92%E5%8F%96%E5%BE%97%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a><code>UPDATE</code>, <code>INSERT</code> で作用した行数を取得する</h2>

<p>こちらの結果に対してフェッチしようとした場合，<code>SQLSTATE[HY000]: General error</code> が発生します．こちらに対して用いることができるのは <a href="http://www.php.net/manual/ja/pdostatement.rowcount.php" rel="nofollow noopener" target="_blank">PDOStatement::rowCount</a> メソッドのみです．</p>

<div class="code-frame" data-lang="php"><div class="highlight"><pre><span></span><span class="nb">printf</span><span class="p">(</span><span class="s2">"%d行に作用しました&lt;br &gt;</span><span class="se">\n</span><span class="s2">"</span><span class="p">,</span> <span class="nv">$stmt</span><span class="o">-&gt;</span><span class="na">rowCount</span><span class="p">());</span>
</pre></div></div>

<h2>
<span id="select-で該当した行数を取得する" class="fragment"></span><a href="#select-%E3%81%A7%E8%A9%B2%E5%BD%93%E3%81%97%E3%81%9F%E8%A1%8C%E6%95%B0%E3%82%92%E5%8F%96%E5%BE%97%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a><code>SELECT</code> で該当した行数を取得する</h2>

<p>基本的に，以下の方法に従います．</p>

<ul>
<li>件数だけでなく結果セットも一緒に欲しい場合， <a href="http://www.php.net/manual/ja/pdostatement.fetchall.php" rel="nofollow noopener" target="_blank">PDOStatement::fetchAll</a> メソッドで一気に配列として取得し，それに対してPHPの <a href="http://www.php.net/manual/ja/function.count.php" rel="nofollow noopener" target="_blank">count</a> 関数を使う．</li>
<li>件数だけが欲しい場合は， <code>SELECT COUNT(*) WHERE ...</code> といったクエリを発行し，その結果を <a href="http://www.php.net/manual/ja/pdostatement.fetchcolumn.php" rel="nofollow noopener" target="_blank">PDOStatement::fetchColumn</a> メソッドで得る．</li>
</ul>

<p>これらの方法が最も推奨されますが，他の方法が無いわけではありません．以下に補足説明を示します．但しこれらはMySQLやPostgreSQLについてのみ当てはまり，<ins>SQLiteには当てはまりません</ins>．</p>

<h3>
<span id="バッファクエリ使用時" class="fragment"></span><a href="#%E3%83%90%E3%83%83%E3%83%95%E3%82%A1%E3%82%AF%E3%82%A8%E3%83%AA%E4%BD%BF%E7%94%A8%E6%99%82"><i class="fa fa-link"></i></a>バッファクエリ使用時</h3>

<ul>
<li>
<strong>SELECT</strong> に対しても常に <a href="http://www.php.net/manual/ja/pdostatement.rowcount.php" rel="nofollow noopener" target="_blank">PDOStatement::rowCount</a> メソッドを使うことができる．</li>
</ul>

<h3>
<span id="非バッファクエリ使用時" class="fragment"></span><a href="#%E9%9D%9E%E3%83%90%E3%83%83%E3%83%95%E3%82%A1%E3%82%AF%E3%82%A8%E3%83%AA%E4%BD%BF%E7%94%A8%E6%99%82"><i class="fa fa-link"></i></a>非バッファクエリ使用時</h3>

<ul>
<li>
<a href="http://www.php.net/manual/ja/pdostatement.fetchall.php" rel="nofollow noopener" target="_blank">PDOStatement::fetchAll</a> メソッドを実行した後，つまり<ins>全てのフェッチが終わった後</ins>であれば <strong>SELECT</strong> に対しても <a href="http://www.php.net/manual/ja/pdostatement.rowcount.php" rel="nofollow noopener" target="_blank">PDOStatement::rowCount</a> メソッドを使うことができる．</li>
<li>結果のフェッチを途中で中断したまま次のクエリ実行に移行するときは， <a href="http://www.php.net/manual/ja/pdostatement.closecursor.php" rel="nofollow noopener" target="_blank">PDOStatement::closeCursor</a> メソッドを使ってカーソルを閉じる必要がある．1つ目の結果セットをPDOStatementに保持したまま2つ目のSQLを実行することはできないので，その場合はあらかじめ <a href="http://www.php.net/manual/ja/pdostatement.fetchall.php" rel="nofollow noopener" target="_blank">PDOStatement::fetchAll</a> メソッドでデータを退避させておく必要がある．</li>
</ul>

<h2>
<span id="データベース接続の切断" class="fragment"></span><a href="#%E3%83%87%E3%83%BC%E3%82%BF%E3%83%99%E3%83%BC%E3%82%B9%E6%8E%A5%E7%B6%9A%E3%81%AE%E5%88%87%E6%96%AD"><i class="fa fa-link"></i></a>データベース接続の切断</h2>

<p>データベース処理の最後に</p>

<div class="code-frame" data-lang="php"><div class="highlight"><pre><span></span><span class="nv">$pdo</span> <span class="o">=</span> <span class="k">null</span><span class="p">;</span>
</pre></div></div>

<p>と書いているコードが散見されますが，ほとんどの場合ではこの記述は不要です．必要になるのは，非バッファクエリを使うようなバッチ処理のシーンのみです．</p>

<h1>
<span id="エミュレーションに関するまとめ" class="fragment"></span><a href="#%E3%82%A8%E3%83%9F%E3%83%A5%E3%83%AC%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E3%81%AB%E9%96%A2%E3%81%99%E3%82%8B%E3%81%BE%E3%81%A8%E3%82%81"><i class="fa fa-link"></i></a>エミュレーションに関するまとめ</h1>

<p>これまでに何度か登場した，エミュレーションの有無に関する差異を表にまとめます．</p>

<table>
<thead>
<tr>
<th style="text-align: left">項目</th>
<th style="text-align: center">エミュレーションON</th>
<th style="text-align: center">エミュレーションOFF</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left">パフォーマンス</td>
<td style="text-align: center">○</td>
<td style="text-align: center">△</td>
</tr>
<tr>
<td style="text-align: left">
<code>SET NAMES</code> による安全性</td>
<td style="text-align: center">△</td>
<td style="text-align: center">○</td>
</tr>
<tr>
<td style="text-align: left">NULL値をそのままの型で受け取る</td>
<td style="text-align: center">○</td>
<td style="text-align: center">○</td>
</tr>
<tr>
<td style="text-align: left">
<strong>数値をそのままの型で受け取る</strong><br>( <strong>mysqlnd</strong> のみが対象)</td>
<td style="text-align: center">×</td>
<td style="text-align: center">○</td>
</tr>
<tr>
<td style="text-align: left"><strong>複数の同名プレースホルダ</strong></td>
<td style="text-align: center">○</td>
<td style="text-align: center">×</td>
</tr>
<tr>
<td style="text-align: left"><strong><code>PDO::PARAM_*</code> 定数による正しいキャスト</strong></td>
<td style="text-align: center">×</td>
<td style="text-align: center">○</td>
</tr>
<tr>
<td style="text-align: left">
<strong><a href="http://www.php.net/manual/ja/pdostatement.bindparam.php" rel="nofollow noopener" target="_blank">PDOStatement::bindParam</a></strong> メソッドによる副作用問題</td>
<td style="text-align: center">×</td>
<td style="text-align: center">○</td>
</tr>
<tr>
<td style="text-align: left"><strong>複文の実行</strong></td>
<td style="text-align: center">○</td>
<td style="text-align: center">✕</td>
</tr>
</tbody>
</table>

<h1>
<span id="pdoの応用" class="fragment"></span><a href="#pdo%E3%81%AE%E5%BF%9C%E7%94%A8"><i class="fa fa-link"></i></a>PDOの応用</h1>

<h2>
<span id="pdostatementのデータ取得形式を極める" class="fragment"></span><a href="#pdostatement%E3%81%AE%E3%83%87%E3%83%BC%E3%82%BF%E5%8F%96%E5%BE%97%E5%BD%A2%E5%BC%8F%E3%82%92%E6%A5%B5%E3%82%81%E3%82%8B"><i class="fa fa-link"></i></a>PDOStatementのデータ取得形式を極める</h2>

<ul>
<li><a href="http://qiita.com/mpyw/items/d52351bd1a8068344cc2" id="reference-0e9b0d741f515319f71e">Qiita - PDOフェッチパターン大全</a></li>
</ul>

<h2>
<span id="mysqlの暗黙的な型変換を防止する" class="fragment"></span><a href="#mysql%E3%81%AE%E6%9A%97%E9%BB%99%E7%9A%84%E3%81%AA%E5%9E%8B%E5%A4%89%E6%8F%9B%E3%82%92%E9%98%B2%E6%AD%A2%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>MySQLの暗黙的な型変換を防止する</h2>

<p>既に述べたとおり，MySQLは暗黙的な型変換を行います．</p>

<div class="code-frame" data-lang="php">
<div class="code-lang"><span class="bold">もしageが整数型でも，MySQLはエラーを発生しない</span></div>
<div class="highlight"><pre><span></span><span class="nv">$stmt</span> <span class="o">=</span> <span class="nv">$pdo</span><span class="o">-&gt;</span><span class="na">prepare</span><span class="p">(</span><span class="s1">'SELECT * FROM users WHERE age = ?'</span><span class="p">);</span>
<span class="nv">$stmt</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">([</span><span class="s1">'20'</span><span class="p">]);</span>
</pre></div>
</div>

<p>もしPostgreSQLのように厳密さを与えたいならば，あらかじめ以下のクエリを実行しておきます．</p>

<div class="code-frame" data-lang="php"><div class="highlight"><pre><span></span><span class="nv">$pdo</span><span class="o">-&gt;</span><span class="na">exec</span><span class="p">(</span><span class="s2">"SET SESSION sql_mode='TRADITIONAL'"</span><span class="p">);</span>
</pre></div></div>

<ul>
<li><a href="http://qiita.com/yukix/items/c9ad1e38bb98b7c924f3" id="reference-7250ad69a201e99bea7f">Qiita - MySQLの自動変換が厄介な時の設定</a></li>
</ul>

<h2>
<span id="like検索" class="fragment"></span><a href="#like%E6%A4%9C%E7%B4%A2"><i class="fa fa-link"></i></a>LIKE検索</h2>

<p>部分一致のあいまいな検索を行いたい場合，LIKE演算子を使用します．LIKE検索で使われる特殊文字には</p>

<ul>
<li>
<code>%</code> … 任意の0文字以上の文字列</li>
<li>
<code>_</code> … 任意の1文字</li>
</ul>

<p>があるため，これらの文字を普通に検索したい場合にはエスケープが必要となります．MySQLの場合はエスケープ用の文字を省略して <code>\</code> にすることが出来ますが，SQLiteなど他のデータベースとの互換性を考慮する場合，エスケープに使用する文字を明示すべきです．例えば <code>!</code> を用いる場合は <code>ESCAPE '!'</code> とします．なお，エスケープ用の文字が文字列中に含まれているケースにも対応するために，そのエスケープ用の文字自体のエスケープも必要です．</p>

<div class="code-frame" data-lang="php">
<div class="code-lang"><span class="bold">どんなデータベースにも広く使える方法</span></div>
<div class="highlight"><pre><span></span><span class="nv">$stmt</span> <span class="o">=</span> <span class="nv">$pdo</span><span class="o">-&gt;</span><span class="na">prepare</span><span class="p">(</span><span class="s2">"SELECT * FROM users WHERE name LIKE ? ESCAPE '!'"</span><span class="p">);</span>
<span class="nv">$stmt</span><span class="o">-&gt;</span><span class="na">bindValue</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s1">'%'</span> <span class="o">.</span> <span class="nb">preg_replace</span><span class="p">(</span><span class="s1">'/(?=[!_%])/'</span><span class="p">,</span> <span class="s1">'!'</span><span class="p">,</span> <span class="nv">$name</span><span class="p">)</span> <span class="o">.</span> <span class="s1">'%'</span><span class="p">,</span> <span class="nx">PDO</span><span class="o">::</span><span class="na">PARAM_STR</span><span class="p">);</span>
</pre></div>
</div>

<div class="code-frame" data-lang="php">
<div class="code-lang"><span class="bold">MySQL専用の方法</span></div>
<div class="highlight"><pre><span></span><span class="nv">$stmt</span> <span class="o">=</span> <span class="nv">$pdo</span><span class="o">-&gt;</span><span class="na">prepare</span><span class="p">(</span><span class="s1">'SELECT * FROM users WHERE name LIKE ?'</span><span class="p">);</span>
<span class="nv">$stmt</span><span class="o">-&gt;</span><span class="na">bindValue</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s1">'%'</span> <span class="o">.</span> <span class="nb">addcslashes</span><span class="p">(</span><span class="nv">$name</span><span class="p">,</span> <span class="s1">'\_%'</span><span class="p">)</span> <span class="o">.</span> <span class="s1">'%'</span><span class="p">,</span> <span class="nx">PDO</span><span class="o">::</span><span class="na">PARAM_STR</span><span class="p">);</span>
</pre></div>
</div>

<h2>
<span id="ブール全文検索" class="fragment"></span><a href="#%E3%83%96%E3%83%BC%E3%83%AB%E5%85%A8%E6%96%87%E6%A4%9C%E7%B4%A2"><i class="fa fa-link"></i></a>ブール全文検索</h2>

<p>MySQLでブール全文検索を行いたい場合，IN BOOLEAN MODE修飾子を使用します．全文検索関数で使われる特殊文字には</p>

<ul>
<li>
<code>+</code> … 各行に存在しなければならない</li>
<li>
<code>-</code> … 各行に存在してはならない</li>
<li>
<code>@</code> … 距離</li>
<li>
<code>&lt;</code>, <code>&gt;</code> … 単語の貢献度</li>
<li>
<code>(</code>, <code>)</code> … グループ化</li>
<li>
<code>~</code> … 否定演算子</li>
<li>
<code>*</code> … 切り捨てまたはワイルドカード</li>
<li>
<code>"</code> … フレーズ検索</li>
</ul>

<p>があるため，これらの文字を普通に検索したい場合にはエスケープが必要となります．</p>

<div class="code-frame" data-lang="php">
<div class="code-lang"><span class="bold">MySQL専用の方法</span></div>
<div class="highlight"><pre><span></span><span class="nv">$stmt</span> <span class="o">=</span> <span class="nv">$pdo</span><span class="o">-&gt;</span><span class="na">prepare</span><span class="p">(</span><span class="s1">'SELECT * FROM users WHERE MATCH (description) AGAINST (? IN BOOLEAN MODE)'</span><span class="p">);</span>
<span class="nv">$stmt</span><span class="o">-&gt;</span><span class="na">bindValue</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">addcslashes</span><span class="p">(</span><span class="nv">$name</span><span class="p">,</span> <span class="s1">'\+-@&lt;&gt;()~*"'</span><span class="p">),</span> <span class="nx">PDO</span><span class="o">::</span><span class="na">PARAM_STR</span><span class="p">);</span>
</pre></div>
</div>

<h2>
<span id="可変長プレースホルダ" class="fragment"></span><a href="#%E5%8F%AF%E5%A4%89%E9%95%B7%E3%83%97%E3%83%AC%E3%83%BC%E3%82%B9%E3%83%9B%E3%83%AB%E3%83%80"><i class="fa fa-link"></i></a>可変長プレースホルダ</h2>

<h3>
<span id="固定長プレースホルダではどうなるか" class="fragment"></span><a href="#%E5%9B%BA%E5%AE%9A%E9%95%B7%E3%83%97%E3%83%AC%E3%83%BC%E3%82%B9%E3%83%9B%E3%83%AB%E3%83%80%E3%81%A7%E3%81%AF%E3%81%A9%E3%81%86%E3%81%AA%E3%82%8B%E3%81%8B"><i class="fa fa-link"></i></a>固定長プレースホルダではどうなるか</h3>

<p>例えば，検索キーワードを複数受け取って特定のカラムがそれらすべてに部分一致するかどうかの検索を行う場合を考えましょう．キーワードの数が2個の場合，実行の流れは次のようになります．</p>

<div class="code-frame" data-lang="php"><div class="highlight"><pre><span></span><span class="nv">$keywords</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'foo'</span><span class="p">,</span> <span class="s1">'bar'</span><span class="p">];</span>
<span class="k">foreach</span> <span class="p">(</span><span class="nv">$keywords</span> <span class="k">as</span> <span class="nv">$keyword</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// LIKE検索のために「%キーワード%」の形式にする</span>
    <span class="nv">$values</span><span class="p">[]</span> <span class="o">=</span> <span class="s1">'%'</span> <span class="o">.</span> <span class="nb">preg_replace</span><span class="p">(</span><span class="s1">'/(?=[!_%])/'</span><span class="p">,</span> <span class="s1">'!'</span><span class="p">,</span> <span class="nv">$keyword</span><span class="p">)</span> <span class="o">.</span> <span class="s1">'%'</span><span class="p">;</span>
<span class="p">}</span>
<span class="nv">$sql</span> <span class="o">=</span> <span class="s2">"SELECT * FROM books WHERE ((summary LIKE ? ESCAPE '!') AND (summary LIKE ? ESCAPE '!'))"</span><span class="p">;</span>
<span class="nv">$stmt</span> <span class="o">=</span> <span class="nv">$pdo</span><span class="o">-&gt;</span><span class="na">prepare</span><span class="p">(</span><span class="nv">$sql</span><span class="p">);</span>
<span class="nv">$stmt</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">(</span><span class="nv">$values</span><span class="p">);</span>
</pre></div></div>

<h3>
<span id="可変長プレースホルダの導入" class="fragment"></span><a href="#%E5%8F%AF%E5%A4%89%E9%95%B7%E3%83%97%E3%83%AC%E3%83%BC%E3%82%B9%E3%83%9B%E3%83%AB%E3%83%80%E3%81%AE%E5%B0%8E%E5%85%A5"><i class="fa fa-link"></i></a>可変長プレースホルダの導入</h3>

<p>ところが，実際は検索キーワードの数が不定個数となるのが一般的です．このような場合にはどうすればいいか？そこで必要になってくるのが，動的にプレースホルダを生成することです．具体例を下に示します．</p>

<div class="code-frame" data-lang="php"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="p">(</span><span class="nv">$keywords</span><span class="p">)</span> <span class="p">{</span>
    <span class="cm">/* キーワードが1つ以上のときだけ実行 */</span>
    <span class="k">foreach</span> <span class="p">(</span><span class="nv">$keywords</span> <span class="k">as</span> <span class="nv">$keyword</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// プレースホルダのLIKE部分を用意</span>
        <span class="nv">$holders</span><span class="p">[]</span> <span class="o">=</span> <span class="s2">"(summary LIKE ? ESCAPE '!')"</span><span class="p">;</span>
        <span class="c1">// LIKE検索のために「%キーワード%」の形式にする</span>
        <span class="nv">$values</span><span class="p">[]</span> <span class="o">=</span> <span class="s1">'%'</span> <span class="o">.</span> <span class="nb">preg_replace</span><span class="p">(</span><span class="s1">'/(?=[!_%])/'</span><span class="p">,</span> <span class="s1">'!'</span><span class="p">,</span> <span class="nv">$keyword</span><span class="p">)</span> <span class="o">.</span> <span class="s1">'%'</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="c1">// AND条件で結合する</span>
    <span class="nv">$sql</span> <span class="o">=</span> <span class="s1">'SELECT * FROM books WHERE ('</span> <span class="o">.</span> <span class="nb">implode</span><span class="p">(</span><span class="s1">' AND '</span><span class="p">,</span> <span class="nv">$holders</span><span class="p">)</span> <span class="o">.</span> <span class="s1">')'</span><span class="p">;</span>
    <span class="c1">// 実行</span>
    <span class="nv">$stmt</span> <span class="o">=</span> <span class="nv">$pdo</span><span class="o">-&gt;</span><span class="na">prepare</span><span class="p">(</span><span class="nv">$sql</span><span class="p">);</span>
    <span class="nv">$stmt</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">(</span><span class="nv">$values</span><span class="p">);</span>
<span class="p">}</span>
</pre></div></div>

<p>検索対象のカラムが2つあり， <em>summary1</em> と <em>summary2</em> の<ins>どちらかに</ins>一致すればOKと見なす場合は次のようにします．OR条件とAND条件を両方用いていることに注意してください．</p>

<div class="code-frame" data-lang="php"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="p">(</span><span class="nv">$keywords</span><span class="p">)</span> <span class="p">{</span>
    <span class="cm">/* キーワードが1つ以上のときだけ実行 */</span>
    <span class="k">foreach</span> <span class="p">(</span><span class="nv">$keywords</span> <span class="k">as</span> <span class="nv">$keyword</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// プレースホルダのLIKE部分を用意</span>
        <span class="nv">$holders</span><span class="p">[]</span> <span class="o">=</span> <span class="s2">"((summary1 LIKE ? ESCAPE '!') OR (summary2 LIKE ? ESCAPE '!'))"</span><span class="p">;</span>
        <span class="c1">// LIKE検索のために「%キーワード%」の形式にする</span>
        <span class="nv">$values</span><span class="p">[]</span> <span class="o">=</span> <span class="nv">$values</span><span class="p">[]</span> <span class="o">=</span> <span class="s1">'%'</span> <span class="o">.</span> <span class="nb">preg_replace</span><span class="p">(</span><span class="s1">'/(?=[!_%])/'</span><span class="p">,</span> <span class="s1">'!'</span><span class="p">,</span> <span class="nv">$keyword</span><span class="p">)</span> <span class="o">.</span> <span class="s1">'%'</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="c1">// AND条件で結合する</span>
    <span class="nv">$sql</span> <span class="o">=</span> <span class="s1">'SELECT * FROM books WHERE ('</span> <span class="o">.</span> <span class="nb">implode</span><span class="p">(</span><span class="s1">' AND '</span><span class="p">,</span> <span class="nv">$holders</span><span class="p">)</span> <span class="o">.</span> <span class="s1">')'</span><span class="p">;</span>
    <span class="c1">// 実行</span>
    <span class="nv">$stmt</span> <span class="o">=</span> <span class="nv">$pdo</span><span class="o">-&gt;</span><span class="na">prepare</span><span class="p">(</span><span class="nv">$sql</span><span class="p">);</span>
    <span class="nv">$stmt</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">(</span><span class="nv">$values</span><span class="p">);</span>
<span class="p">}</span>
</pre></div></div>

<h3>
<span id="検索キーワードを単語単位に分解する" class="fragment"></span><a href="#%E6%A4%9C%E7%B4%A2%E3%82%AD%E3%83%BC%E3%83%AF%E3%83%BC%E3%83%89%E3%82%92%E5%8D%98%E8%AA%9E%E5%8D%98%E4%BD%8D%E3%81%AB%E5%88%86%E8%A7%A3%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>検索キーワードを単語単位に分解する</h3>

<p>実際に検索システムを実装するときに，どのようにして検索キーワードを <code>$keywords</code> に配列でセットするかどうかが問題となりますが，これは半角スペースで分割させることが一般的であると考えられます．しかし，ここでは半角スペースだけでなく…</p>

<ul>
<li><strong>全てのASCII制御文字</strong></li>
<li>全角スペース</li>
<li>ハードスペース(&amp;nbsp;)</li>
</ul>

<p>正規表現を活用して，これらすべてを対象にしてみます．</p>

<div class="code-frame" data-lang="php"><div class="highlight"><pre><span></span><span class="nv">$q</span> <span class="o">=</span> <span class="p">(</span><span class="nx">string</span><span class="p">)</span><span class="nb">filter_input</span><span class="p">(</span><span class="nx">INPUT_GET</span><span class="p">,</span> <span class="s1">'q'</span><span class="p">);</span>
<span class="nv">$regex</span> <span class="o">=</span> <span class="s2">"/[</span><span class="se">\\</span><span class="s2">x0-</span><span class="se">\x20\x7f\xc2\xa0\xe3\x80\x80</span><span class="s2">]++/u"</span><span class="p">;</span>
<span class="nv">$keywords</span> <span class="o">=</span> <span class="nb">preg_split</span><span class="p">(</span><span class="nv">$regex</span><span class="p">,</span> <span class="nv">$q</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="nx">PREG_SPLIT_NO_EMPTY</span><span class="p">);</span>
</pre></div></div>

<p><strong><code>PREG_SPLIT_NO_EMPTY</code></strong> フラグを用いることで，空文字列の要素を自動的に除外できるのも <a href="http://www.php.net/manual/ja/function.preg-split.php" rel="nofollow noopener" target="_blank">preg_split</a> 関数の強みです．</p>

<h2>
<span id="トランザクション処理" class="fragment"></span><a href="#%E3%83%88%E3%83%A9%E3%83%B3%E3%82%B6%E3%82%AF%E3%82%B7%E3%83%A7%E3%83%B3%E5%87%A6%E7%90%86"><i class="fa fa-link"></i></a>トランザクション処理</h2>

<p>連続的なSQL実行に一貫性・信頼性を持たせたい場合，「トランザクション」という機能を利用します．</p>

<ul>
<li><a href="http://ja.wikipedia.org/wiki/%E3%83%88%E3%83%A9%E3%83%B3%E3%82%B6%E3%82%AF%E3%82%B7%E3%83%A7%E3%83%B3%E5%87%A6%E7%90%86" rel="nofollow noopener" target="_blank">Wikipedia - トランザクション処理</a></li>
</ul>

<h3>
<span id="トランザクションの基本的な利用法" class="fragment"></span><a href="#%E3%83%88%E3%83%A9%E3%83%B3%E3%82%B6%E3%82%AF%E3%82%B7%E3%83%A7%E3%83%B3%E3%81%AE%E5%9F%BA%E6%9C%AC%E7%9A%84%E3%81%AA%E5%88%A9%E7%94%A8%E6%B3%95"><i class="fa fa-link"></i></a>トランザクションの基本的な利用法</h3>

<h4>
<span id="使用されるメソッド" class="fragment"></span><a href="#%E4%BD%BF%E7%94%A8%E3%81%95%E3%82%8C%E3%82%8B%E3%83%A1%E3%82%BD%E3%83%83%E3%83%89"><i class="fa fa-link"></i></a>使用されるメソッド</h4>

<p>処理の実体はデータベースごとに固有の実装が為されていますが，インタフェースはPDOのメソッドとして抽象化されており，SQL文をデータベースごとに書き分けたりする必要はなくなります．</p>

<ul>
<li><a href="http://www.php.net/manual/ja/pdo.begintransaction.php" rel="nofollow noopener" target="_blank">PDO::beginTransaction</a></li>
<li><a href="http://www.php.net/manual/ja/pdo.commit.php" rel="nofollow noopener" target="_blank">PDO::commit</a></li>
<li><a href="http://www.php.net/manual/ja/pdo.rollback.php" rel="nofollow noopener" target="_blank">PDO::rollBack</a></li>
<li>
<a href="http://www.php.net/manual/ja/pdo.lastinsertid.php" rel="nofollow noopener" target="_blank">PDO::lastInsertId</a> (必要に応じて)</li>
</ul>

<h4>
<span id="ポイント" class="fragment"></span><a href="#%E3%83%9D%E3%82%A4%E3%83%B3%E3%83%88"><i class="fa fa-link"></i></a>ポイント</h4>

<ul>
<li>Tryブロックを <strong>2重</strong> に設け，例外発生時にはロールバックを実行し，捕捉した例外を必要に応じて<ins>外側のTryブロックに向けてスロー</ins>する．</li>
<li>同じ形式のプリペアドステートメントの生成は1回だけにして，それを使いまわすようにした方がパフォーマンスは向上する．</li>
</ul>

<div class="code-frame" data-lang="php">
<div class="code-lang"><span class="bold">例</span></div>
<div class="highlight"><pre><span></span><span class="k">try</span> <span class="p">{</span>

    <span class="c1">// データベースに接続</span>
    <span class="nv">$pdo</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PDO</span><span class="p">(</span>
        <span class="s1">'mysql:dbname=testdb;host=localhost;charset=utf8mb4'</span><span class="p">,</span>
        <span class="s1">'root'</span><span class="p">,</span>
        <span class="s1">''</span><span class="p">,</span>
        <span class="p">[</span>
            <span class="nx">PDO</span><span class="o">::</span><span class="na">ATTR_ERRMODE</span> <span class="o">=&gt;</span> <span class="nx">PDO</span><span class="o">::</span><span class="na">ERRMODE_EXCEPTION</span><span class="p">,</span>
            <span class="nx">PDO</span><span class="o">::</span><span class="na">ATTR_DEFAULT_FETCH_MODE</span> <span class="o">=&gt;</span> <span class="nx">PDO</span><span class="o">::</span><span class="na">FETCH_ASSOC</span><span class="p">,</span>
        <span class="p">]</span>
    <span class="p">);</span>

    <span class="c1">// パラメータ</span>
    <span class="nv">$from</span> <span class="o">=</span> <span class="s1">'A'</span><span class="p">;</span>
    <span class="nv">$to</span> <span class="o">=</span> <span class="s1">'B'</span><span class="p">;</span>
    <span class="nv">$transfer_amount</span> <span class="o">=</span> <span class="mi">12000</span><span class="p">;</span>

    <span class="c1">// プリペアドステートメントを用意</span>
    <span class="nv">$stmt</span> <span class="o">=</span> <span class="nv">$pdo</span><span class="o">-&gt;</span><span class="na">prepare</span><span class="p">(</span><span class="s1">'UPDATE account SET credit = credit + (?) WHERE id = ?'</span><span class="p">);</span>

    <span class="c1">// トランザクション処理を開始</span>
    <span class="nv">$pdo</span><span class="o">-&gt;</span><span class="na">beginTransaction</span><span class="p">();</span>
    <span class="k">try</span> <span class="p">{</span>
        <span class="c1">// Aの預金残高を減らす</span>
        <span class="nv">$stmt</span><span class="o">-&gt;</span><span class="na">bindValue</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span> <span class="o">*</span> <span class="nv">$transfer_amount</span><span class="p">,</span> <span class="nx">PDO</span><span class="o">::</span><span class="na">PARAM_INT</span><span class="p">);</span>
        <span class="nv">$stmt</span><span class="o">-&gt;</span><span class="na">bindValue</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="nv">$from</span><span class="p">);</span>
        <span class="nv">$stmt</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">();</span>
        <span class="c1">// Bの預金残高を増やす</span>
        <span class="nv">$stmt</span><span class="o">-&gt;</span><span class="na">bindValue</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="o">+</span><span class="mi">1</span> <span class="o">*</span> <span class="nv">$transfer_amount</span><span class="p">,</span> <span class="nx">PDO</span><span class="o">::</span><span class="na">PARAM_INT</span><span class="p">);</span>
        <span class="nv">$stmt</span><span class="o">-&gt;</span><span class="na">bindValue</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="nv">$to</span><span class="p">);</span>
        <span class="nv">$stmt</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">();</span>
        <span class="c1">// コミット</span>
        <span class="nv">$pdo</span><span class="o">-&gt;</span><span class="na">commit</span><span class="p">();</span>
    <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">PDOException</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// ロールバック</span>
        <span class="nv">$pdo</span><span class="o">-&gt;</span><span class="na">rollBack</span><span class="p">();</span>
        <span class="c1">// 外側のTryブロックに対してスロー</span>
        <span class="k">throw</span> <span class="nv">$e</span><span class="p">;</span>
    <span class="p">}</span>

<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">PDOException</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>

    <span class="c1">// 例外メッセージを表示</span>
    <span class="nb">header</span><span class="p">(</span><span class="s1">'Content-Type: text/plain; charset=UTF-8'</span><span class="p">,</span> <span class="k">true</span><span class="p">,</span> <span class="mi">500</span><span class="p">);</span>
    <span class="k">exit</span><span class="p">(</span><span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">());</span>

<span class="p">}</span>
</pre></div>
</div>

<h3>
<span id="トランザクションの種類" class="fragment"></span><a href="#%E3%83%88%E3%83%A9%E3%83%B3%E3%82%B6%E3%82%AF%E3%82%B7%E3%83%A7%E3%83%B3%E3%81%AE%E7%A8%AE%E9%A1%9E"><i class="fa fa-link"></i></a>トランザクションの種類</h3>

<p>秀逸な記事は太字にして紹介します．</p>

<ul>
<li><strong><a href="http://tree-tips.appspot.com/mysql/transaction_isoration/" rel="nofollow noopener" target="_blank">tree-tips - MySQLのトランザクション分離レベル</a></strong></li>
<li><strong><a href="http://www.techscore.com/tech/sql/SQL11/11_03.html" rel="nofollow noopener" target="_blank">TECHSCORE - トランザクションの定義</a></strong></li>
<li><strong><a href="http://d.hatena.ne.jp/language_and_engineering/20110104/p1" rel="nofollow noopener" target="_blank">主に言語とシステム開発に関して - DBの「トランザクション分離レベル」が必要な理由</a></strong></li>
<li><a href="http://ja.wikipedia.org/wiki/%E3%83%88%E3%83%A9%E3%83%B3%E3%82%B6%E3%82%AF%E3%82%B7%E3%83%A7%E3%83%B3%E5%88%86%E9%9B%A2%E3%83%AC%E3%83%99%E3%83%AB" rel="nofollow noopener" target="_blank">Wikipedia - トランザクション分離レベル</a></li>
<li><a href="http://momijiame.tumblr.com/post/41512778756/mysql" rel="nofollow noopener" target="_blank">CUBE SUGAR STORAGE - MySQL を使ってトランザクション分離レベルの違いを試す</a></li>
<li><a href="http://d.hatena.ne.jp/sekom/20081115/p1" rel="nofollow noopener" target="_blank">ソフト開発お仕事メモ - [DB]H2, Derby, SQLiteの仕様の調査メモ（ロック周り）</a></li>
</ul>

<h4>
<span id="推奨場面まとめ" class="fragment"></span><a href="#%E6%8E%A8%E5%A5%A8%E5%A0%B4%E9%9D%A2%E3%81%BE%E3%81%A8%E3%82%81"><i class="fa fa-link"></i></a>推奨場面まとめ</h4>

<p><a href="https://camo.qiitausercontent.com/57a7f0b834ed2d360796815b7af2838172b8bf98/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f32353036302f66663364616463322d323831392d323335662d656232612d3866313262613562393430352e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/57a7f0b834ed2d360796815b7af2838172b8bf98/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f32353036302f66663364616463322d323831392d323335662d656232612d3866313262613562393430352e706e67" alt="ss (2014-03-26 at 01.47.23).png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/25060/ff3dadc2-2819-235f-eb2a-8f12ba5b9405.png"></a></p>

<h4>
<span id="各データベース製品のデフォルト" class="fragment"></span><a href="#%E5%90%84%E3%83%87%E3%83%BC%E3%82%BF%E3%83%99%E3%83%BC%E3%82%B9%E8%A3%BD%E5%93%81%E3%81%AE%E3%83%87%E3%83%95%E3%82%A9%E3%83%AB%E3%83%88"><i class="fa fa-link"></i></a>各データベース製品のデフォルト</h4>

<ul>
<li>
<strong>MySQL</strong> のInnoDBのデフォルトは <strong><code>REPEATABLE READ</code></strong> である．</li>
<li>
<strong>PostgreSQL</strong> のデフォルトは <strong><code>READ COMMITTED</code></strong> である．</li>
<li>
<strong>SQLite</strong> のデフォルトは <strong><code>DEFERRED</code></strong> であり，これは <code>READ COMMITTED</code> に相当する．</li>
</ul>

<h4>
<span id="分離レベルを設定するsqlの実行" class="fragment"></span><a href="#%E5%88%86%E9%9B%A2%E3%83%AC%E3%83%99%E3%83%AB%E3%82%92%E8%A8%AD%E5%AE%9A%E3%81%99%E3%82%8Bsql%E3%81%AE%E5%AE%9F%E8%A1%8C"><i class="fa fa-link"></i></a>分離レベルを設定するSQLの実行</h4>

<div class="code-frame" data-lang="php">
<div class="code-lang"><span class="bold">MySQLでの例</span></div>
<div class="highlight"><pre><span></span><span class="nv">$pdo</span><span class="o">-&gt;</span><span class="na">exec</span><span class="p">(</span><span class="s1">'SET SESSION TRANSACTION ISOLATION LEVEL SERIALIZABLE'</span><span class="p">);</span>
</pre></div>
</div>

<div class="code-frame" data-lang="php">
<div class="code-lang"><span class="bold">PostgreSQLでの例</span></div>
<div class="highlight"><pre><span></span><span class="nv">$pdo</span><span class="o">-&gt;</span><span class="na">exec</span><span class="p">(</span><span class="s1">'SET SESSION CHARACTERISTICS AS TRANSACTION SERIALIZABLE'</span><span class="p">);</span>
</pre></div>
</div>

<h2>
<span id="テーブル名カラム名のエスケープ処理" class="fragment"></span><a href="#%E3%83%86%E3%83%BC%E3%83%96%E3%83%AB%E5%90%8D%E3%82%AB%E3%83%A9%E3%83%A0%E5%90%8D%E3%81%AE%E3%82%A8%E3%82%B9%E3%82%B1%E3%83%BC%E3%83%97%E5%87%A6%E7%90%86"><i class="fa fa-link"></i></a>テーブル名・カラム名のエスケープ処理</h2>

<p>設計としてはあまり宜しくありませんが， <strong>「ユーザーに任意のテーブル名やカラム名を指定させたい」</strong> というケースも考えられなくはないです．PDOクラスにこういったものをエスケープする機能は含まれていないので，自前でエスケープを行わなければなりません．</p>

<ul>
<li>NULLバイトを除外する．</li>
<li>バッククオートを<ins>2つ連ねて</ins>エスケープさせる．</li>
<li>最終的にバッククオートでくくる．</li>
</ul>

<div class="code-frame" data-lang="php">
<div class="code-lang"><span class="bold">テーブル名をエスケープして動的に指定する例</span></div>
<div class="highlight"><pre><span></span><span class="nv">$sql</span> <span class="o">=</span> <span class="nb">sprintf</span><span class="p">(</span>
    <span class="s2">"CREATE TABLE `%s`(id int, name text)"</span><span class="p">,</span>
    <span class="nb">str_replace</span><span class="p">([</span><span class="s2">"</span><span class="se">\0</span><span class="s2">"</span><span class="p">,</span> <span class="s2">"`"</span><span class="p">],</span> <span class="p">[</span><span class="s2">""</span><span class="p">,</span> <span class="s2">"``"</span><span class="p">],</span> <span class="nv">$table_name</span><span class="p">)</span>
<span class="p">);</span>
</pre></div>
</div>

<h2>
<span id="pdoクラスの継承" class="fragment"></span><a href="#pdo%E3%82%AF%E3%83%A9%E3%82%B9%E3%81%AE%E7%B6%99%E6%89%BF"><i class="fa fa-link"></i></a>PDOクラスの継承</h2>

<ul>
<li><a href="http://qiita.com/k-holy/items/ce829a60cafe48bd1f81" id="reference-fa8d32222fea57c24d32">Qiita - PDOでオブジェクトをフェッチ＆JSONとCSVファイル出力</a></li>
<li><a href="http://blog.tojiru.net/article/277021312.html" rel="nofollow noopener" target="_blank">Architect Note - PDOの真の力を開放する - PHPでデータベースを扱う(3)</a></li>
</ul>

<hr>

<hr>

<h1>
<span id="付録" class="fragment"></span><a href="#%E4%BB%98%E9%8C%B2"><i class="fa fa-link"></i></a>付録</h1>

<h2>
<span id="初心者がやりがちなミスの解説" class="fragment"></span><a href="#%E5%88%9D%E5%BF%83%E8%80%85%E3%81%8C%E3%82%84%E3%82%8A%E3%81%8C%E3%81%A1%E3%81%AA%E3%83%9F%E3%82%B9%E3%81%AE%E8%A7%A3%E8%AA%AC"><i class="fa fa-link"></i></a>初心者がやりがちなミスの解説</h2>

<h3>
<span id="mysql_query-などの非推奨関数を利用している" class="fragment"></span><a href="#mysql_query-%E3%81%AA%E3%81%A9%E3%81%AE%E9%9D%9E%E6%8E%A8%E5%A5%A8%E9%96%A2%E6%95%B0%E3%82%92%E5%88%A9%E7%94%A8%E3%81%97%E3%81%A6%E3%81%84%E3%82%8B"><i class="fa fa-link"></i></a><code>mysql_query</code> などの非推奨関数を利用している</h3>

<div class="code-frame" data-lang="php"><div class="highlight"><pre><span></span><span class="nv">$link</span> <span class="o">=</span> <span class="nb">mysql_connect</span><span class="p">(</span><span class="s1">'localhost'</span><span class="p">,</span> <span class="s1">'root'</span><span class="p">,</span> <span class="s1">'password'</span><span class="p">);</span>
<span class="nb">mysql_select_db</span><span class="p">(</span><span class="s1">'test'</span><span class="p">);</span>
<span class="nv">$result</span> <span class="o">=</span> <span class="nb">mysql_query</span><span class="p">(</span><span class="s1">'SELECT * FROM users'</span><span class="p">);</span>
<span class="nv">$rows</span> <span class="o">=</span> <span class="p">[];</span>
<span class="k">while</span> <span class="p">(</span><span class="nv">$row</span> <span class="o">=</span> <span class="nb">mysql_fetch_assoc</span><span class="p">(</span><span class="nv">$result</span><span class="p">))</span> <span class="p">{</span>
    <span class="nv">$rows</span><span class="p">[]</span> <span class="o">=</span> <span class="nv">$row</span><span class="p">;</span>
<span class="p">}</span>
</pre></div></div>

<p>あなたが参考にしている情報は古すぎます． <code>mysql_</code> で始まる関数は，PHP5.5で非推奨になり，PHP7.0で完全に削除されて使えなくなっています．この記事で解説しているように，PDOを使う方法を覚えてください．</p>

<h3>
<span id="set-names-あるいは-set-character-set-などで文字コードを指定しているそもそもデータベースで使用する文字コードの指定をしていない" class="fragment"></span><a href="#set-names-%E3%81%82%E3%82%8B%E3%81%84%E3%81%AF-set-character-set-%E3%81%AA%E3%81%A9%E3%81%A7%E6%96%87%E5%AD%97%E3%82%B3%E3%83%BC%E3%83%89%E3%82%92%E6%8C%87%E5%AE%9A%E3%81%97%E3%81%A6%E3%81%84%E3%82%8B%E3%81%9D%E3%82%82%E3%81%9D%E3%82%82%E3%83%87%E3%83%BC%E3%82%BF%E3%83%99%E3%83%BC%E3%82%B9%E3%81%A7%E4%BD%BF%E7%94%A8%E3%81%99%E3%82%8B%E6%96%87%E5%AD%97%E3%82%B3%E3%83%BC%E3%83%89%E3%81%AE%E6%8C%87%E5%AE%9A%E3%82%92%E3%81%97%E3%81%A6%E3%81%84%E3%81%AA%E3%81%84"><i class="fa fa-link"></i></a><code>SET NAMES</code> あるいは <code>SET CHARACTER SET</code> などで文字コードを指定している<br>そもそもデータベースで使用する文字コードの指定をしていない</h3>

<p>文字コードの指定が無いのは論外として，<code>SET NAMES</code>などを用いるのは可能な限り避けるべきです．このクエリは，データベース側の文字セットを操作するだけで，PDOドライバの文字セットにはノータッチです．入力側と出力側で文字セットが異なると，脆弱性が発生する原因になります．</p>

<ul>
<li>文字コードの性質上， <code>SET NAMES sjis</code> や <code>SET CHARACTER SET sjis</code> とした場合，顕著に脆弱性が現れる．</li>
<li>
<code>SET NAMES utf8</code> や <code>SET CHARACTER SET utf8</code> は基本的には安全だが，例外もあるので注意．  MySQLにおいては，libmysqlclientのコンパイルオプションに <code>--with-charset=cp932</code> や <code>--with-charset=sjis</code> を指定している場合が該当． mysqlndを利用している場合は問題ない．

<ul>
<li><a href="http://blog.everqueue.com/chiba/2009/02/05/129/" rel="nofollow noopener" target="_blank">へぼい日記 - libmysqlclientを使うプログラムはset namesをutf8であっても使ってはいけない</a></li>
</ul>
</li>
</ul>

<p>PDOクラスでの正しい指定方法は，以下のようになります．</p>

<ul>
<li>コンストラクタの <a href="http://www.php.net/manual/ja/ref.pdo-mysql.connection.php" rel="nofollow noopener" target="_blank">DSN(Data Source Name)</a> で指定する．</li>
</ul>

<div class="code-frame" data-lang="php"><div class="highlight"><pre><span></span><span class="nv">$pdo</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PDO</span><span class="p">(</span><span class="s1">'mysql:dbname=test;host=localhost;charset=utf8'</span><span class="p">);</span>
</pre></div></div>

<ul>
<li>PHP5.3.5以前のPDOではDSNで文字セット指定が出来ないため， <code>SET NAMES</code> や <code>SET CHARACTER SET</code> に頼らざるを得ない．但しLinux版では，cnfファイルを利用する選択肢がある．

<ul>
<li><a href="http://qiita.com/ngyuki/items/d88a4df860abb51eb714" id="reference-ab278c62c9b30bc90069">Qiita - PHP 5.3.6より前のバージョンの PDO MySQL で charset を指定する</a></li>
</ul>
</li>
<li>PHP5.3.6Windows版のPDOではDSNで文字セット指定が出来るが，バグがあるため， <code>SET NAMES utf8</code> や <code>SET CHARACTER SET utf8</code> を使う場合と同じ結果になる．</li>
<li>やむを得ず <code>SET NAMES</code> を使うにしても， <code>SET CHARACTER SET</code> は避けるべき．

<ul>
<li><a href="http://dev.mysql.com/doc/refman/4.1/ja/charset-connection.html" rel="nofollow noopener" target="_blank">MySQLマニュアル - SET NAMES と SET CHARACTER SET の違い</a></li>
</ul>
</li>
</ul>

<p>MySQL以外では以下のようになります．</p>

<ul>
<li>PostgreSQLでは，DSNに <code>options='--client_encoding=UTF8'"</code> を含める．</li>
<li>SQLiteでは特に指定する必要が無く，暗黙的にUTF-8が使用される．</li>
</ul>

<h3>
<span id="select--from-users-where-id--id-のように変数展開を使ってsql文を組み立てている" class="fragment"></span><a href="#select--from-users-where-id--id-%E3%81%AE%E3%82%88%E3%81%86%E3%81%AB%E5%A4%89%E6%95%B0%E5%B1%95%E9%96%8B%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%A6sql%E6%96%87%E3%82%92%E7%B5%84%E3%81%BF%E7%AB%8B%E3%81%A6%E3%81%A6%E3%81%84%E3%82%8B"><i class="fa fa-link"></i></a><strong><code>"SELECT * FROM users WHERE id = '$id'"</code> のように変数展開を使ってSQL文を組み立てている</strong>
</h3>

<p>Wikipediaを読むのがてっとり早いです．</p>

<ul>
<li><a href="http://ja.wikipedia.org/wiki/SQL%E3%82%A4%E3%83%B3%E3%82%B8%E3%82%A7%E3%82%AF%E3%82%B7%E3%83%A7%E3%83%B3" rel="nofollow noopener" target="_blank">Wikipedia - SQLインジェクション</a></li>
</ul>

<div class="code-frame" data-lang="php"><div class="highlight"><pre><span></span><span class="nv">$id</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'id'</span><span class="p">];</span>
<span class="nv">$sql</span> <span class="o">=</span> <span class="s2">"SELECT * FROM users WHERE id = '</span><span class="si">$id</span><span class="s2">'"</span><span class="p">;</span>
</pre></div></div>

<p>このようなコードは， <strong>SQLインジェクション攻撃</strong> の格好の標的になってしまうどころか，それを意図せずとも <code>'</code> を含めたクエリで検索を行おうとしたときにも正常な処理が行えなくなってしまいます．これを防ぐために，SQL文中で特別な意味を持つ<code>'</code>をエスケープし，<code>\'</code>に変換する必要があります．</p>

<p><a href="http://php.net/manual/ja/function.mysql-query.php" rel="nofollow noopener" target="_blank">mysql_query</a> 関数を使っていた頃は，以下のような手段でSQL文を組み立てるのが主流でした．</p>

<ol>
<li>
<a href="http://php.net/manual/ja/function.mysql-real-escape-string.php" rel="nofollow noopener" target="_blank">mysql_real_escape_string</a> 関数で文字列をあらかじめエスケープする</li>
<li>変数展開して埋め込む</li>
</ol>

<div class="code-frame" data-lang="php"><div class="highlight"><pre><span></span><span class="nv">$id</span> <span class="o">=</span> <span class="nb">mysql_real_escape_string</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'id'</span><span class="p">]);</span>
<span class="nv">$sql</span> <span class="o">=</span> <span class="s2">"SELECT * FROM users WHERE id = '</span><span class="si">$id</span><span class="s2">'"</span><span class="p">;</span>
</pre></div></div>

<p>但し，もしこの2行の間にたくさんのコードが入っていたらどうでしょうか？</p>

<ul>
<li>あなたは <code>$id</code> がエスケープ済みかそうでないか， <code>$sql</code> を書くところまでしっかり覚えていられますか？</li>
<li>「エスケープ忘れ」「多重エスケープ」という人為的なミスを生んでしまうリスクはないでしょうか？</li>
</ul>

<p>また，手動エスケープにはこんな罠もあります．</p>

<ul>
<li>
<a href="http://www.php.net/manual/ja/function.htmlspecialchars.php" rel="nofollow noopener" target="_blank">htmlspecialchars</a> 関数は <strong>「HTMLの特殊文字」</strong> をエスケープする関数であり， <strong>「SQLの特殊文字」</strong> をエスケープする関数ではない．全く目的が異なる上に，これを通してしまうとHTML特殊文字をデータベースにそのまま格納できないというバグも発生してしまう．</li>
<li>
<a href="http://www.php.net/manual/ja/function.addslashes.php" rel="nofollow noopener" target="_blank">addslashes</a> 関数は一応それっぽくSQL文に対してエスケープが行えるが，本当にそれがデータベースに合わせて正しくエスケープされているかどうかの保証は無い．マニュアルにもそういった注意書きがある．<strong>例えばSQLiteは<code>'</code>を<code>\'</code>ではなく<code>''</code>にエスケープしなければならない．</strong>
</li>
</ul>

<p>PDOを使う方法では，このようなリスクから開放されます．PDOには，<strong>「プリペアドステートメント」</strong>および<strong>「プレースホルダ」</strong>という仕組みが取り入れられています．詳細については本文中で紹介しているので，付録から戻って読んでみてください．</p>

<div class="code-frame" data-lang="php"><div class="highlight"><pre><span></span><span class="nv">$id</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'id'</span><span class="p">];</span>
<span class="nv">$stmt</span> <span class="o">=</span> <span class="nv">$pdo</span><span class="o">-&gt;</span><span class="na">prepare</span><span class="p">(</span><span class="s2">"SELECT * FROM users WHERE id = ?"</span><span class="p">);</span>
<span class="nv">$stmt</span><span class="o">-&gt;</span><span class="na">bindValue</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nv">$id</span><span class="p">,</span> <span class="nx">PDO</span><span class="o">::</span><span class="na">PARAM_STR</span><span class="p">);</span>
</pre></div></div>

<h3>
<span id="_postid-などの外部入力からきた変数が定義されているかどうか確認していないそれらが文字列であるかどうかの確認をしていないそれらを出力する際に-htmlspecialchars-関数を利用していない" class="fragment"></span><a href="#_postid-%E3%81%AA%E3%81%A9%E3%81%AE%E5%A4%96%E9%83%A8%E5%85%A5%E5%8A%9B%E3%81%8B%E3%82%89%E3%81%8D%E3%81%9F%E5%A4%89%E6%95%B0%E3%81%8C%E5%AE%9A%E7%BE%A9%E3%81%95%E3%82%8C%E3%81%A6%E3%81%84%E3%82%8B%E3%81%8B%E3%81%A9%E3%81%86%E3%81%8B%E7%A2%BA%E8%AA%8D%E3%81%97%E3%81%A6%E3%81%84%E3%81%AA%E3%81%84%E3%81%9D%E3%82%8C%E3%82%89%E3%81%8C%E6%96%87%E5%AD%97%E5%88%97%E3%81%A7%E3%81%82%E3%82%8B%E3%81%8B%E3%81%A9%E3%81%86%E3%81%8B%E3%81%AE%E7%A2%BA%E8%AA%8D%E3%82%92%E3%81%97%E3%81%A6%E3%81%84%E3%81%AA%E3%81%84%E3%81%9D%E3%82%8C%E3%82%89%E3%82%92%E5%87%BA%E5%8A%9B%E3%81%99%E3%82%8B%E9%9A%9B%E3%81%AB-htmlspecialchars-%E9%96%A2%E6%95%B0%E3%82%92%E5%88%A9%E7%94%A8%E3%81%97%E3%81%A6%E3%81%84%E3%81%AA%E3%81%84"><i class="fa fa-link"></i></a><code>$_POST['id']</code> などの外部入力からきた変数が定義されているかどうか確認していない<br>それらが文字列であるかどうかの確認をしていない<br><strong>それらを出力する際に <code>htmlspecialchars</code> 関数を利用していない</strong>
</h3>

<p>以下の記事をお読みください．</p>

<ul>
<li><a href="http://qiita.com/mpyw/items/2f9955db1c02eeef43ea" id="reference-83d61b6e0eacee1212f7">Qiita - $_GET, $_POSTなどを受け取る際の処理</a></li>
</ul>

<p>別の場所でも指摘していますが，ただ思考停止して <a href="http://www.php.net/manual/ja/function.htmlspecialchars.php" rel="nofollow noopener" target="_blank">htmlspecialchars</a> 関数を使えばいいというものでもありません．「<ins>出力する際に</ins>」というのがネックです．例えば以下のコードは間違いです．</p>

<div class="code-frame" data-lang="php">
<div class="code-lang"><span class="bold">データベースに挿入する前にhtmlspecialchars関数を適用している間違った例</span></div>
<div class="highlight"><pre><span></span><span class="nv">$stmt</span> <span class="o">=</span> <span class="nv">$pdo</span><span class="o">-&gt;</span><span class="na">prepare</span><span class="p">(</span><span class="s1">'INSERT INTO users(name) VALUES(?)'</span><span class="p">);</span>
<span class="nv">$stmt</span><span class="o">-&gt;</span><span class="na">bindValue</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">htmlspecialchars</span><span class="p">(</span><span class="nv">$name</span><span class="p">),</span> <span class="nx">PDO</span><span class="o">::</span><span class="na">PARAM_STR</span><span class="p">);</span>
</pre></div>
</div>

<h3>
<span id="sqlの-like-演算子を使っているのに--_--のエスケープをしていない" class="fragment"></span><a href="#sql%E3%81%AE-like-%E6%BC%94%E7%AE%97%E5%AD%90%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%A6%E3%81%84%E3%82%8B%E3%81%AE%E3%81%AB--_--%E3%81%AE%E3%82%A8%E3%82%B9%E3%82%B1%E3%83%BC%E3%83%97%E3%82%92%E3%81%97%E3%81%A6%E3%81%84%E3%81%AA%E3%81%84"><i class="fa fa-link"></i></a>SQLの <code>LIKE</code> 演算子を使っているのに <code>%</code> <code>_</code> <code>\</code> のエスケープをしていない</h3>

<p>以下のようなコードを書いていたらアウトです．</p>

<div class="code-frame" data-lang="php"><div class="highlight"><pre><span></span><span class="nv">$stmt</span> <span class="o">=</span> <span class="nv">$pdo</span><span class="o">-&gt;</span><span class="na">prepare</span><span class="p">(</span><span class="s2">"SELECT * FROM users WHERE name LIKE ?"</span><span class="p">);</span>
<span class="nv">$stmt</span><span class="o">-&gt;</span><span class="na">bindValue</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s2">"%</span><span class="si">{</span><span class="nv">$name</span><span class="si">}</span><span class="s2">%"</span><span class="p">,</span> <span class="nx">PDO</span><span class="o">::</span><span class="na">PARAM_STR</span><span class="p">);</span>
</pre></div></div>

<p>プレースホルダを使っているので脆弱性こそありませんが，LIKE演算子による正しい検索が保証されません．正しい実装方法は本文中に記載しています．</p>

<h3>
<span id="htmlの-bodybody-の中にデータベース接続処理を書いているecho-や-print-をベタ書きしているcontent-typeを-textplain-に変更せずに-exit-や-die-で強制終了処理を記述している" class="fragment"></span><a href="#html%E3%81%AE-bodybody-%E3%81%AE%E4%B8%AD%E3%81%AB%E3%83%87%E3%83%BC%E3%82%BF%E3%83%99%E3%83%BC%E3%82%B9%E6%8E%A5%E7%B6%9A%E5%87%A6%E7%90%86%E3%82%92%E6%9B%B8%E3%81%84%E3%81%A6%E3%81%84%E3%82%8Becho-%E3%82%84-print-%E3%82%92%E3%83%99%E3%82%BF%E6%9B%B8%E3%81%8D%E3%81%97%E3%81%A6%E3%81%84%E3%82%8Bcontent-type%E3%82%92-textplain-%E3%81%AB%E5%A4%89%E6%9B%B4%E3%81%9B%E3%81%9A%E3%81%AB-exit-%E3%82%84-die-%E3%81%A7%E5%BC%B7%E5%88%B6%E7%B5%82%E4%BA%86%E5%87%A6%E7%90%86%E3%82%92%E8%A8%98%E8%BF%B0%E3%81%97%E3%81%A6%E3%81%84%E3%82%8B"><i class="fa fa-link"></i></a>HTMLの <code>&lt;body&gt;&lt;/body&gt;</code> の中にデータベース接続処理を書いている<br><code>echo()</code> や <code>print()</code> をベタ書きしている<br>Content-Typeを <code>text/plain</code> に変更せずに <code>exit()</code> や <code>die()</code> で強制終了処理を記述している</h3>

<p>以下のようなコードを書いていたらアウトです．</p>

<div class="code-frame" data-lang="html+php"><div class="highlight"><pre><span></span><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">"utf-8"</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Example<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
<span class="cp">&lt;?php</span>

<span class="k">try</span> <span class="p">{</span>

    <span class="nv">$pdo</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PDO</span><span class="p">(</span><span class="s1">'mysql: ... '</span><span class="p">,</span> <span class="s1">'root'</span><span class="p">,</span> <span class="s1">'password'</span><span class="p">,</span> <span class="p">[</span>
        <span class="nx">PDO</span><span class="o">::</span><span class="na">ATTR_ERRMODE</span> <span class="o">=&gt;</span> <span class="nx">PDO</span><span class="o">::</span><span class="na">ERRMODE_EXCEPTION</span><span class="p">,</span>
    <span class="p">]);</span>
    <span class="nv">$stmt</span> <span class="o">=</span> <span class="nv">$pdo</span><span class="o">-&gt;</span><span class="na">query</span><span class="p">(</span><span class="s1">'SELECT * FROM users'</span><span class="p">);</span>
    <span class="k">while</span> <span class="p">(</span><span class="nv">$row</span> <span class="o">=</span> <span class="nv">$stmt</span><span class="o">-&gt;</span><span class="na">fetch</span><span class="p">(</span><span class="nx">PDO</span><span class="o">::</span><span class="na">FETCH_ASSOC</span><span class="p">))</span> <span class="p">{</span>
        <span class="k">echo</span> <span class="s1">'&lt;li&gt;'</span> <span class="o">.</span> <span class="nb">htmlspecialchars</span><span class="p">(</span><span class="nv">$row</span><span class="p">[</span><span class="s1">'name'</span><span class="p">])</span> <span class="o">.</span> <span class="s1">'&lt;/li&gt;'</span><span class="p">;</span>
    <span class="p">}</span>

<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">PDOException</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>

    <span class="k">exit</span><span class="p">(</span><span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">());</span>    

<span class="p">}</span>

<span class="cp">?&gt;</span>
        <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div></div>

<p>もし，PDOに接続するところで失敗してしまった場合にどうなるでしょうか？きっと，出力されるHTMLはこんな感じになるはずです．</p>

<div class="code-frame" data-lang="html"><div class="highlight"><pre><span></span><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">"utf-8"</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Example<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>No such file or directory
</pre></div></div>

<p>もし，あなたがこんな壊れたHTMLをWebサイト利用者に見られて恥も何も感じないのであれば私は止めませんが，多くの人は気にすると思います．…というよりも，まずこのコードは非常に読みにくいので<strong>「ロジックとテンプレートの分離」</strong>は行いましょう．</p>

<ul>
<li>頭のほうですべてのロジックを書き，そこを過ぎたら<ins>用意された変数を使ってHTMLを出力する以外のことは行ってはいけません</ins>． （理想を言えば，ファイルも分けるべき） </li>
<li>広々と確保した <code>&lt;?php ... ?&gt;</code> 中で <a href="http://www.php.net/manual/ja/function.echo.php" rel="nofollow noopener" target="_blank">echo</a> や <a href="http://www.php.net/manual/ja/function.print.php" rel="nofollow noopener" target="_blank">print</a> を連呼してHTMLを生成するのは，初心者が陥りやすい典型的な間違ったPHPの使い方です．PHPはこれでも<strong>テンプレートエンジン</strong>的な役割を持つ言語なので，上記で指摘したロジックとテンプレートの分離を行った後は，<ins>PHPの中にHTMLを埋め込むのではなく，<strong>HTMLの中にPHPを埋め込む</strong>感覚で書きましょう</ins>．</li>
</ul>

<p>上記2点に関して，以下に修正した例を示します．</p>

<div class="code-frame" data-lang="html+php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>

<span class="k">try</span> <span class="p">{</span>

    <span class="nv">$pdo</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PDO</span><span class="p">(</span><span class="s1">'mysql: ... '</span><span class="p">,</span> <span class="s1">'root'</span><span class="p">,</span> <span class="s1">'password'</span><span class="p">,</span> <span class="p">[</span>
        <span class="nx">PDO</span><span class="o">::</span><span class="na">ATTR_ERRMODE</span> <span class="o">=&gt;</span> <span class="nx">PDO</span><span class="o">::</span><span class="na">ERRMODE_EXCEPTION</span><span class="p">,</span>
    <span class="p">]);</span>
    <span class="nv">$rows</span> <span class="o">=</span> <span class="nv">$pdo</span><span class="o">-&gt;</span><span class="na">query</span><span class="p">(</span><span class="s1">'SELECT * FROM users'</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">fetchAll</span><span class="p">(</span><span class="nx">PDO</span><span class="o">::</span><span class="na">FETCH_ASSOC</span><span class="p">);</span>

<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">PDOException</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>

    <span class="k">exit</span><span class="p">(</span><span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">());</span>    

<span class="p">}</span>

<span class="k">function</span> <span class="nf">h</span><span class="p">(</span><span class="nv">$str</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="nb">htmlspecialchars</span><span class="p">(</span><span class="nv">$str</span><span class="p">,</span> <span class="nx">ENT_QUOTES</span><span class="p">,</span> <span class="s1">'UTF-8'</span><span class="p">);</span>
<span class="p">}</span>

<span class="cp">?&gt;</span>
<span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">"utf-8"</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Example<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
<span class="cp">&lt;?php</span> <span class="k">foreach</span> <span class="p">(</span><span class="nv">$rows</span> <span class="k">as</span> <span class="nv">$row</span><span class="p">)</span><span class="o">:</span> <span class="cp">?&gt;</span>
            <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span><span class="cp">&lt;?</span><span class="o">=</span><span class="nx">h</span><span class="p">(</span><span class="nv">$row</span><span class="p">)</span><span class="cp">?&gt;</span><span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
<span class="cp">&lt;?php</span> <span class="k">endforeach</span><span class="p">;</span> <span class="cp">?&gt;</span>
        <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div></div>

<p><strong><a href="http://www.php.net/manual/ja/function.echo.php" rel="nofollow noopener" target="_blank">echo</a>短縮構文</strong> および <strong><a href="http://php.net/manual/ja/control-structures.alternative-syntax.php" rel="nofollow noopener" target="_blank">制御構造に関する別の構文</a></strong> を用いてみました．この2つはHTMLを出力する際に適用するとコードが非常に読みやすくなります．これで，エラー時に出力されるHTMLは以下のようになります．</p>

<div class="code-frame" data-lang="html"><div class="highlight"><pre><span></span>No such file or directory
</pre></div></div>

<p>ただ，これってもはやHTMLではないですよね？もしエラー時にも丁寧にエラー画面用のHTMLを用意するのであればそれで構わないのですが， <a href="http://www.php.net/manual/ja/function.exit.php" rel="nofollow noopener" target="_blank">exit</a> や <a href="http://www.php.net/manual/ja/function.die.php" rel="nofollow noopener" target="_blank">die</a> で手抜きしたい場合はWebブラウザに<strong>「これはただのテキストです」</strong>と伝えるようにしましょう． <a href="http://www.php.net/manual/ja/function.exit.php" rel="nofollow noopener" target="_blank">exit</a> の前にこの1行を入れてください．</p>

<div class="code-frame" data-lang="php"><div class="highlight"><pre><span></span><span class="nb">header</span><span class="p">(</span><span class="s1">'Content-Type: text/plain; charset=UTF-8'</span><span class="p">,</span> <span class="k">true</span><span class="p">,</span> <span class="mi">500</span><span class="p">);</span>
</pre></div></div>

<p>500は「500 Internal Server Error」の意味で，サーバ側が原因でエラーになってしまったことを表します．</p>

<h2>
<span id="pdoとmysqliの比較" class="fragment"></span><a href="#pdo%E3%81%A8mysqli%E3%81%AE%E6%AF%94%E8%BC%83"><i class="fa fa-link"></i></a>PDOとmysqliの比較</h2>

<h3>
<span id="mysqliクラス-またはmysqli関数" class="fragment"></span><a href="#mysqli%E3%82%AF%E3%83%A9%E3%82%B9-%E3%81%BE%E3%81%9F%E3%81%AFmysqli%E9%96%A2%E6%95%B0"><i class="fa fa-link"></i></a><a href="http://www.php.net/manual/ja/book.mysqli.php" rel="nofollow noopener" target="_blank">mysqliクラス (またはmysqli関数)</a>
</h3>

<p>手続き型(関数)とオブジェクト指向型(クラス)を両方ともサポートしています．</p>

<h4>
<span id="メリット" class="fragment"></span><a href="#%E3%83%A1%E3%83%AA%E3%83%83%E3%83%88"><i class="fa fa-link"></i></a><font color="silver">メリット</font>
</h4>

<ul>
<li>動作が <strong>非常に</strong> 速い．</li>
<li>(手続き型の場合は) mysql関数からの書き換えが容易．</li>
<li>プリペアドステートメントで型を指定しながら複数のバインドが同時に <strong>できる</strong> ．</li>
<li>
<strong>マルチクエリ</strong> を使用できる．1回の関数コールで複数のクエリが実行できるため，普通に2回コールする場合に比べてパフォーマンスは向上する．</li>
<li>エラーを例外としてスローさせることができる．2種類の設定方法があるが，これに関しては<ins>他の記述がオブジェクト指向型でも手続き型を採用すべき</ins>であると言える．明らかに手続き型の方がスッキリと書ける．</li>
</ul>

<div class="code-frame" data-lang="php">
<div class="code-lang"><span class="bold">オブジェクト指向型</span></div>
<div class="highlight"><pre><span></span><span class="nv">$driver</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">mysqli_driver</span><span class="p">();</span>
<span class="nv">$driver</span><span class="o">-&gt;</span><span class="na">report_mode</span> <span class="o">=</span> <span class="nx">MYSQLI_REPORT_ERROR</span> <span class="o">|</span> <span class="nx">MYSQLI_REPORT_STRICT</span><span class="p">;</span>
</pre></div>
</div>

<div class="code-frame" data-lang="php">
<div class="code-lang"><span class="bold">手続き型</span></div>
<div class="highlight"><pre><span></span><span class="nb">mysqli_report</span><span class="p">(</span><span class="nx">MYSQLI_REPORT_ERROR</span> <span class="o">|</span> <span class="nx">MYSQLI_REPORT_STRICT</span><span class="p">);</span>
</pre></div>
</div>

<ul>
<li>不適切なインデックスを含むクエリに対しても，例外をスローさせることができる．開発段階でデータベースに負荷をかけてしまうクエリを潰すことが出来る利点がある．これを有効化するためには，下記のようにする． <code>MYSQLI_REPORT_ALL</code> でまとめる手もある．</li>
</ul>

<div class="code-frame" data-lang="php"><div class="highlight"><pre><span></span><span class="nb">mysqli_report</span><span class="p">(</span><span class="nx">MYSQLI_REPORT_ERROR</span> <span class="o">|</span> <span class="nx">MYSQLI_REPORT_STRICT</span> <span class="o">|</span> <span class="nx">MYSQLI_REPORT_INDEX</span><span class="p">);</span>
</pre></div></div>

<div class="code-frame" data-lang="php"><div class="highlight"><pre><span></span><span class="nb">mysqli_report</span><span class="p">(</span><span class="nx">MYSQLI_REPORT_ALL</span><span class="p">);</span>
</pre></div></div>

<ul>
<li><a href="http://d.hatena.ne.jp/kiyo560808/20101117/1289952549" rel="nofollow noopener" target="_blank">久保清隆の成長ノート - MySQLパフォーマンスチューニングのためのインデックスの基礎知識</a></li>
</ul>

<h4>
<span id="デメリット" class="fragment"></span><a href="#%E3%83%87%E3%83%A1%E3%83%AA%E3%83%83%E3%83%88"><i class="fa fa-link"></i></a><font color="silver">デメリット</font>
</h4>

<ul>
<li>プリペアドステートメントで名前付きプレースホルダが <strong>使えない</strong> ．</li>
<li>
<strong>「プリペアドステートメント ≠ 結果セット」</strong> であり，SQL実行後にプリペアドステートメントから結果セットを取り出す必要がある．この点は次に紹介するPDOクラスと大きく異なる．</li>
<li>その他の点でも多機能すぎる為，初心者が混乱しやすい．</li>
</ul>

<h3>
<span id="pdoクラス" class="fragment"></span><a href="#pdo%E3%82%AF%E3%83%A9%E3%82%B9"><i class="fa fa-link"></i></a><a href="http://php.net/manual/ja/book.pdo.php" rel="nofollow noopener" target="_blank">PDOクラス</a>
</h3>

<p>オブジェクト指向型のみをサポートしています．</p>

<h4>
<span id="メリット-1" class="fragment"></span><a href="#%E3%83%A1%E3%83%AA%E3%83%83%E3%83%88-1"><i class="fa fa-link"></i></a><font color="silver">メリット</font>
</h4>

<ul>
<li>動作が速い．</li>
<li>エラーを例外としてスローさせることが出来る．但し，一部の特例を除き，<ins>コンストラクタは常に例外をスローする</ins>．</li>
</ul>

<div class="code-frame" data-lang="php">
<div class="code-lang"><span class="bold">PDOクラスで例外をスローさせる</span></div>
<div class="highlight"><pre><span></span><span class="nv">$pdo</span><span class="o">-&gt;</span><span class="na">setAttribute</span><span class="p">(</span><span class="nx">PDO</span><span class="o">::</span><span class="na">ATTR_ERRMODE</span><span class="p">,</span> <span class="nx">PDO</span><span class="o">::</span><span class="na">ERRMODE_EXCEPTION</span><span class="p">);</span>
</pre></div>
</div>

<ul>
<li>
<strong>「プリペアドステートメント ＝ 結果セット」</strong> であり，mysqliクラスに比べると初心者にも分かりやすい．</li>
<li>プリペアドステートメントで名前付きプレースホルダが <strong>使える</strong> ．</li>
<li>プリペアドステートメントのエミュレーションを行う場合は <strong>同名の名前付きプレースホルダを複数回使える</strong> ．但し，エミュレーションを設定していないと <code>SQLSTATE[HY093]: Invalid parameter number</code> が発生する．</li>
<li>他のデータベースへ乗り換える際，書き換えが容易．PDOクラスの使い方だけを覚えておけばドライバが存在するあらゆるデータベースに対応が出来るようになる．</li>
</ul>

<h4>
<span id="デメリット-1" class="fragment"></span><a href="#%E3%83%87%E3%83%A1%E3%83%AA%E3%83%83%E3%83%88-1"><i class="fa fa-link"></i></a><font color="silver">デメリット</font>
</h4>

<ul>
<li>プリペアドステートメントで型を指定しながら複数のバインドが同時に <strong>できない</strong> ．</li>
<li>
<code>SET NAMES sjis</code> や <code>SET CHARACTER SET sjis</code> を設定している場合，プリペアドステートメントのエミュレーションを無効にしておかないと脆弱性が発生する．</li>
<li>プリペアドステートメントのエミュレーションを行う場合は <a href="http://www.php.net/manual/ja/pdostatement.bindvalue.php" rel="nofollow noopener" target="_blank">PDOStatement::bindValue</a>, <a href="http://www.php.net/manual/ja/pdostatement.bindparam.php" rel="nofollow noopener" target="_blank">PDOStatement::bindParam</a> メソッドで，<ins>指定した型と実際の型が一致しない場合，全て文字列としてバインドされる</ins>．</li>
</ul>

<p><a href="http://pear.php.net/manual/ja/package.database.db.php" rel="nofollow noopener" target="_blank">PEAR::DB</a> や <a href="http://pear.php.net/manual/ja/package.database.mdb2.php" rel="nofollow noopener" target="_blank">PEAR::MDB2</a> に関しては,PDOが安定してきたPHP5.4系以降で使う必要性は皆無でしょう．PHPで実装された抽象化レイヤは，C言語で実装されたPDOよりも明らかにパフォーマンスが悪くなります．</p>

<ul>
<li><a href="http://zapanet.info/blog/item/972" rel="nofollow noopener" target="_blank">[Z]ZAPAブロ～グ2.0 - PDO，PEAR::DB，Mysql関数の速度比較</a></li>
</ul>
</div>
	</td>
</tr>
</table>
<br />
<table border="1" style="height:150px;">
<tr>
	<td rowspan="3">9位</td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="thumb-up-120px.png" /></i>1963</kbd>
		<a target="_blank" href="https://qiita.com/tadsan/items/99d816e78ca429093b75">ライセンスの選択を恐れる必要はありません</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-09-07<br />01:12:52</center>
	</td>
	<td style="width:200px;">
		<!--投稿者-->
		<center>
			@<a href="user/4121.html">tadsan</a>(165件の記事)<br />(Zonu.me 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/4121/profile-images/1473683797">
		</center>
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[ライセンス]</b> <b>[GPL]</b> <b>[MIT-License]</b> <b>[ApacheLicense]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<!--
		<div style="width:350px;height:150px;overflow:scroll;">%s</div>
		-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p><del>この記事は<a href="http://creativecommons.org/licenses/by/3.0/" rel="nofollow noopener" target="_blank">CC BY 3.0</a>に基いて公開されてゐるWebサイト<a href="http://choosealicense.com/" rel="nofollow noopener" target="_blank">Choosing an OSS license doesn’t need to be scary - ChooseALicense.com</a>のコンテンツ各ページを翻訳し、単一記事として再構成、訳者による補足を追加したものです</del>。</p>

<div class=""><ins datetime="2017-05-09T20:45:00+09:00">2017年5月9日に<a href="http://blog.qiita.com/post/160423117339/communityguideline" rel="nofollow noopener" target="_blank">開示</a>された<a href="http://help.qiita.com/ja/articles/qiita-community-guideline" rel="nofollow noopener" target="_blank">コミュニティガイドライン</a>に伴って、本記事の翻訳部分につきましては削除いたしました。 (この記事が削除または非公開化されない限り、<a href="http://qiita.com/tadsan/items/99d816e78ca429093b75/revisions">編集履歴</a>からお読みいただくことは可能です。)</ins></div>

<div class="">日本語での自由ソフトウェア/オープンソースライセンスについての紹介については、<a href="http://www.catch.jp/" rel="nofollow noopener" target="_blank">可知豊</a>(@<a href="https://twitter.com/y_catch" rel="nofollow noopener" target="_blank">y_catch</a>)先生の<a href="http://www.catch.jp/oss-license/2013/09/10/github/" rel="nofollow noopener" target="_blank">Githubによる、オープンソースライセンスの選び方 | オープンソース・ライセンスの談話室</a>をオススメします。</div>

<p><em>(訳註:  この「はじめに」及び末尾の「訳者による補足」の章は原文にはなく、翻訳者(<a href="/tadsan" class="user-mention js-hovercard" title="tadsan" data-hovercard-target-type="user" data-hovercard-target-name="tadsan">@tadsan</a>)によるものです。記事の著作権表示及び元Webサイトの利用規約、免責事項、そしてこの記事についての訳者の見解について記します)</em></p>

<p><a rel="nofollow noopener" href="http://creativecommons.org/licenses/by/3.0/" target="_blank"><img alt="Creative Commons Attribution-ShareAlike 3.0 Unported License" src="https://camo.qiitausercontent.com/baa8e523109b47427ff02f2c286e94ea8e8c43d7/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f343132312f62363630633461342d336435352d653664362d343130382d3061363933396561376165652e706e67" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/4121/b660c4a4-3d55-e6d6-4108-0a6939ea7aee.png"></a></p>

<p>(この記事の一部または全て ——ただしコメント欄は含まれない—— はCC BY-SA 3.0に則る限り、自由に利用することができます。<del>翻訳と「はじめに」「訳註」については独自の著作権は主張しません。</del> 改竄しても二次利用は独自の責任にて行ってください。)</p>

<blockquote>
<p>Please consult a legal expert before adopting a software license for your project.<br>
This site is licensed under the Creative Commons Attribution 3.0 Unported License.</p>

<p>Demystified with &lt;3 by GitHub, Inc.</p>
</blockquote>

<p>元サイトには利用規約として<a href="http://choosealicense.com/terms-of-service/" rel="nofollow noopener" target="_blank">Terms of Service - ChooseALicense.com</a>が存在します。この利用規約の有効性及び有効範囲について、訳者(<a href="/tadsan" class="user-mention js-hovercard" title="tadsan" data-hovercard-target-type="user" data-hovercard-target-name="tadsan">@tadsan</a>)は <strong>言及しません</strong>。参考として、見出しのみを抜萃し、()内に訳者による参考訳を補ひました。</p>

<blockquote>

<h3>
<span id="terms-of-service---choosealicensecom" class="fragment"></span><a href="#terms-of-service---choosealicensecom"><i class="fa fa-link"></i></a><a href="http://choosealicense.com/terms-of-service/" rel="nofollow noopener" target="_blank">Terms of Service - ChooseALicense.com</a>
</h3>

<ol>
<li>Introduction (はじめに)</li>
<li>Agreement to the Terms (規約に同意すること)</li>
<li>No legal advice is being provided (法的な助言をするものではない)</li>
<li>DISCLAIMER OF WARRANTIES (保証の抛棄)</li>
<li>LIMITATION OF LIABILITY (責任の制限)</li>
<li>Indemnification for breach of the Terms (規約違反の補償)</li>
<li>Termination of this Agreement (契約の終了)</li>
<li>Miscellaneous Terms (雑則)</li>
</ol>
</blockquote>

<p>この記事において「ライセンス」とは、特に断りのない限りはフリーソフトウェア(自由ソフトウェア)・オープンソースライセンスと呼ばれる形態のライセンスのことです(<a href="https://ja.wikipedia.org/wiki/FLOSS" rel="nofollow noopener" target="_blank">FLOSS - Wikipedia</a>)。</p>

<p>もとのWebサイト(<a href="http://creativecommons.org" rel="nofollow noopener" target="_blank">creativecommons.org</a>)及びこの翻訳記事は、あなたに <strong>法的な助言</strong> を与へるものではありません。ライセンス問題及び各ライセンスが日本及び外国の法律・条約・条例に基いて有効・適法な契約であるかについては、必ず弁護士などの法律専門家の判断を仰いでください。上記の "Term of Service" の解釈についても同様とします。</p>

<p>翻訳は直訳よりは日本語として解釈しやすいように意訳してあります。原文との見解の相違がないように注意して訳しますが、英語及びライセンスへの認識の差により、原文と矛盾した意味になってしまってゐるリスクもあります。 <em>(訳註:</em> から始まる文章は、訳者(<a href="/tadsan" class="user-mention js-hovercard" title="tadsan" data-hovercard-target-type="user" data-hovercard-target-name="tadsan">@tadsan</a>)が <strong>独自の見解により</strong> 本文の内容を註釈・補足するものです。</p>

<p>筆者は翻訳及び訳註により原文と異った意味に改変することを望まないので、もし誤訳及びライセンス見解の誤り、その他ミスなどを発見した場合には訳者(<a href="/tadsan" class="user-mention js-hovercard" title="tadsan" data-hovercard-target-type="user" data-hovercard-target-name="tadsan">@tadsan</a>)にコメントなどでフィードバックをいただけると幸ひです。</p>

<p>翻訳にあたって法律の専門家や法律智識を持った翻訳家の助言を受けたものではありません。また、この記事はあくまでライセンス原文を解釈し、要約を試みたものなので、優先されるべきは常に原文です。 <em>(本記事のみならず、ほかの翻訳・ライセンス解説についても同様に解釈するべきです)</em></p>

<p>繰り返しますが、この記事は専門家による法律判断ではありません。法律問題への対処には専門家によるアドバイスを受けてください。元サイト及び本記事を参考にしたことで受けた全ての利益・損害について、原著者及び翻訳者は一切の権利・責任を負ひません。</p>

<p><em>(以下より記事本文です)</em></p>

<hr>

<p><a href="https://choosealicense.com/" rel="nofollow noopener" target="_blank">Choose an open source license (choosealicense.com)</a>をお読みください。</p>

<p><a href="https://qiita-image-store.s3.amazonaws.com/0/4121/2aa5eda8-c273-9d9f-df07-b2b2500bc78a.png" rel="nofollow noopener" target="_blank"><img src="https://camo.qiitausercontent.com/36f52a9b1c7ba318450636c12c5e58bcde8619b0/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f343132312f32616135656461382d633237332d396439662d646630372d6232623235303062633738612e706e67" alt="Choose an open source license {Which of the following best describes your situation?}" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/4121/2aa5eda8-c273-9d9f-df07-b2b2500bc78a.png"></a></p>

<ins datetime="2017-05-09T20:45:00+09:00">(日本語訳文は削除されました。原文または「<a href="http://www.catch.jp/oss-license/2013/09/10/github/" rel="nofollow noopener" target="_blank">Githubによる、オープンソースライセンスの選び方</a>」をお読みください。</ins>

<hr>

<p><em>(翻訳による内容は、ここまで)</em></p>

<h2>
<span id="訳者による補足" class="fragment"></span><a href="#%E8%A8%B3%E8%80%85%E3%81%AB%E3%82%88%E3%82%8B%E8%A3%9C%E8%B6%B3"><i class="fa fa-link"></i></a>訳者による補足</h2>

<h3>
<span id="補足1-ライセンスを宣言する方法" class="fragment"></span><a href="#%E8%A3%9C%E8%B6%B31-%E3%83%A9%E3%82%A4%E3%82%BB%E3%83%B3%E3%82%B9%E3%82%92%E5%AE%A3%E8%A8%80%E3%81%99%E3%82%8B%E6%96%B9%E6%B3%95"><i class="fa fa-link"></i></a>補足1. ライセンスを宣言する方法</h3>

<p>最善の方法はソースコードすべてにライセンスを明示することです。</p>

<p>そして、<code>README</code> などと同じディレクトリに <code>LICENSE.txt</code> または <code>COPYING</code> などのファイルを用意して、そこにライセンスの本文や要約をコピーします。</p>

<p>ライセンスの本文の上部に <code>Copyright (c) [year] [fullname]</code> のような形式の穴埋めテンプレートがある場合は、そこ「だけ」を現在の年と自分の名前に変更します。いくつかのライセンスは、本文を「改変しない限り再配布して良い」と許諾してゐること、そして不用意に本文を変更したり条件を追加することで利用者に混乱をきたすことがその理由です。</p>

<p>GitHubではリポジトリ作成時にライセンスを選択して、自動で作成させることもできます(<a href="https://help.github.com/articles/open-source-licensing" rel="nofollow noopener" target="_blank">Open source licensing · GitHub Help</a>)。</p>

<p>ただし、Webで使用されるJavaScriptなどファイル単位で読み込まれる場合、当然ながら <code>README</code> や <code>LICENSE</code> などのテキストファイルは添付しにくくなります。参考までに、そのような場合のライセンス表示のサンプルを紹介します。</p>

<p><a href="https://ajax.googleapis.com/ajax/libs/prototype/1.7.1.0/prototype.js" rel="nofollow noopener" target="_blank">prototype.js</a>の先頭には以下の記述があります。</p>

<div class="code-frame" data-lang="javascript">
<div class="code-lang"><span class="bold">prototype.js</span></div>
<div class="highlight"><pre><span></span><span class="cm">/*  Prototype JavaScript framework, version 1.7.1</span>
<span class="cm"> *  (c) 2005-2010 Sam Stephenson</span>
<span class="cm"> *</span>
<span class="cm"> *  Prototype is freely distributable under the terms of an MIT-style license.</span>
<span class="cm"> *  For details, see the Prototype web site: http://www.prototypejs.org/</span>
<span class="cm"> *</span>
<span class="cm"> *--------------------------------------------------------------------------*/</span>
</pre></div>
</div>

<p>また、jQuery の場合はもっと簡潔です。 (<a href="http://code.jquery.com/jquery-2.0.3.min.js" rel="nofollow noopener" target="_blank">jquery-2.0.3.min.js</a>)</p>

<div class="code-frame" data-lang="javascript">
<div class="code-lang"><span class="bold">jquery-2.0.3.min.js</span></div>
<div class="highlight"><pre><span></span><span class="cm">/*! jQuery v2.0.3 | (c) 2005, 2013 jQuery Foundation, Inc. | jquery.org/license</span>
<span class="cm">*/</span>
</pre></div>
</div>

<p>どちらの場合にも著作権表示があり、前者はライセンス名で表記、後者はライセンスを明記したページのURLへ誘導してゐることが特徴的です。</p>

<h3>
<span id="補足2-マルチライセンス" class="fragment"></span><a href="#%E8%A3%9C%E8%B6%B32-%E3%83%9E%E3%83%AB%E3%83%81%E3%83%A9%E3%82%A4%E3%82%BB%E3%83%B3%E3%82%B9"><i class="fa fa-link"></i></a>補足2. マルチライセンス</h3>

<p>PerlはArtistic Licenseで公開されてゐると上記にありますが、実際には <a href="http://dev.perl.org/licenses/" rel="nofollow noopener" target="_blank">Perl Licensing - dev.perl.org</a> 及び配布パッケージ内の <code>README</code> 内には以下の記述があります。</p>

<blockquote>
<p>Perl5 is Copyright (C) 1993-2005, by Larry Wall and others.</p>

<p>It is free software; you can redistribute it and/or modify it under the terms of either:</p>

<ul>
<li>a) the <a href="http://dev.perl.org/licenses/gpl1.html" rel="nofollow noopener" target="_blank">GNU General Public License</a> as published by the <a href="http://www.fsf.org/" rel="nofollow noopener" target="_blank">Free Software Foundation; either</a> <a href="http://dev.perl.org/licenses/gpl1.html" rel="nofollow noopener" target="_blank">1</a>, or (at your option) any <a href="http://www.fsf.org/licenses/licenses.html#GNUGPL" rel="nofollow noopener" target="_blank">later version</a>, or</li>
<li>b) the "Artistic License".</li>
</ul>
</blockquote>

<p><em>—— <a href="http://dev.perl.org/licenses/" class="autolink" rel="nofollow noopener" target="_blank">http://dev.perl.org/licenses/</a> より引用 (2013年9月7日 閲覧)</em></p>

<p>これは、ライセンスとして「GPLv1(または任意に指定された番号)以上のバージョン」または「Artistic License」のうちの <strong>どれか</strong> の条件に従へば良いといふことになります。このような状態を「マルチライセンス」と呼びます(この場合は2つなので「デュアルライセンス」、3つなら「トリプルライセンス」とも呼ばれます)。</p>

<p>このマルチライセンスに含めるライセンスは必ずしもフリーソフトウェアライセンスである必要はなく、金銭を対価にサービスを提供するような商業契約(コマーシャルライセンス)であることもあります。<a href="https://ja.wikipedia.org/wiki/MySQL#.E3.83.A9.E3.82.A4.E3.82.BB.E3.83.B3.E3.82.B9" rel="nofollow noopener" target="_blank">MySQL</a>がこの形態のソフトウェアの代表例です。</p>

<h3>
<span id="補足3-ライセンスを明示しないこと" class="fragment"></span><a href="#%E8%A3%9C%E8%B6%B33-%E3%83%A9%E3%82%A4%E3%82%BB%E3%83%B3%E3%82%B9%E3%82%92%E6%98%8E%E7%A4%BA%E3%81%97%E3%81%AA%E3%81%84%E3%81%93%E3%81%A8"><i class="fa fa-link"></i></a>補足3. ライセンスを明示しないこと</h3>

<p>サイボウズ・ラボの西尾泰和さんのことばに次のようなものがあります。</p>

<blockquote>
<p>著作権を主張しないつもりなんだったらそれを明示的に宣言して欲しい。ライセンスが明示されていないのは、どんなライセンスよりも厳しいライセンスだ。</p>
</blockquote>

<p><em>(<a href="http://d.hatena.ne.jp/nishiohirokazu/20100819/1282200581" rel="nofollow noopener" target="_blank">Ruby 1.9.2リリースとWEBrick脆弱性問題の顛末 - 西尾泰和のはてなダイアリー</a> より引用)</em></p>

<p>また、2chの <a href="http://toro.2ch.net/test/read.cgi/unix/1265413075/" rel="nofollow noopener" target="_blank">Navi2ch for Emacs (Part 20)</a> スレのテンプレには次のようなFAQがあります。</p>

<blockquote>
<p>Q. パッチを作ったんだけど、ここに up すれば良いの？ <br>
A. 2ch で晒すと取り込めなくなるので、sourceforge に投げてね。 <br>
ttp://sourceforge.net/tracker/?atid=435774&amp;group_id=39552&amp;func=browse </p>

<p>Q. 自作の関数や設定を晒したいんだけど、どうすれば良い？ <br>
A. 設定はともかく、関数を 2ch で晒すのは NG。 <br>
navi2ch に取り込んで欲しいなら、上記にパッチを投げてね。 <br>
ただ晒したいだけなら、メーリングリストやグループに投げてね。 </p>
</blockquote>

<p><em>(<a href="http://toro.2ch.net/test/read.cgi/unix/1265413075/2" class="autolink" rel="nofollow noopener" target="_blank">http://toro.2ch.net/test/read.cgi/unix/1265413075/2</a> より引用)</em></p>

<p>匿名でライセンスを明示しないソースコードを公開するリスクは本文中に訳註として書いた通りです。特に2chでは後から作者を特定することができず、よってライセンスを変更することも不可能になり、合法的に二次利用することができなくなります。</p>

<h3>
<span id="補足4-より信頼のおける情報源" class="fragment"></span><a href="#%E8%A3%9C%E8%B6%B34-%E3%82%88%E3%82%8A%E4%BF%A1%E9%A0%BC%E3%81%AE%E3%81%8A%E3%81%91%E3%82%8B%E6%83%85%E5%A0%B1%E6%BA%90"><i class="fa fa-link"></i></a>補足4. より信頼のおける情報源</h3>

<p>もっと基礎から詳しくライセンスについて学びたいのでしたら、有料(800円)の電子書籍ですが、「<a href="http://tatsu-zine.com/books/osslicense" rel="nofollow noopener" target="_blank">知る、読む、使う！ オープンソースライセンス</a>」が良いかもしれません。(実は訳者はまだ読んでゐません!)</p>

<p>もっと深くライセンスについて理解するための資料としては、IPA(独立行政法人 情報処理推進機構)のWebサイトに<a href="http://www.ipa.go.jp/osc/osslegal.html" rel="nofollow noopener" target="_blank">OSSライセンス関連情報</a>として、多数まとめられてゐます。特に<a href="http://ossipedia.ipa.go.jp/doc/187/" rel="nofollow noopener" target="_blank">GNU GPL v3 逐条解説書</a>は非常に詳細なレポートで、<a href="http://ja.wikipedia.org/wiki/Software_Freedom_Law_Center" rel="nofollow noopener" target="_blank">SFLC</a>の協力を受けてまとめられた、極めて信頼度の高いものです。さらにこのレポートは<a href="http://creativecommons.org/licenses/by-nc-nd/2.1/jp/" rel="nofollow noopener" target="_blank">Creative Commons 表示 - 非営利 - 改変禁止 2.1 日本(CC BY-NC-ND 2.1 JP)</a>として利用可能です。</p>

<h3>
<span id="補足5-ライセンスの互換性" class="fragment"></span><a href="#%E8%A3%9C%E8%B6%B35-%E3%83%A9%E3%82%A4%E3%82%BB%E3%83%B3%E3%82%B9%E3%81%AE%E4%BA%92%E6%8F%9B%E6%80%A7"><i class="fa fa-link"></i></a>補足5. ライセンスの互換性</h3>

<p><em>(この話はわかりやすさ重視の例で、技術的な正確性はありません)</em></p>

<p>突然ですが、あなたは画像ブラウザを作りました。これは、<a href="https://ja.wikipedia.org/wiki/Windows%E3%83%93%E3%83%83%E3%83%88%E3%83%9E%E3%83%83%E3%83%97" rel="nofollow noopener" target="_blank">BMP形式</a>の画像をとても快適に管理できる、べんりなアプリケーションです <em>(言語は何でも良いですが、<a href="https://ja.wikipedia.org/wiki/Delphi" rel="nofollow noopener" target="_blank">Delphi</a>でネイティブコードにコンパイルしたとします)</em>。</p>

<p>ある日、あなたは気がつきました。「画像をBMP形式に変換して読み込めば、どんな形式の画像でもサポートできるぞ!」と。</p>

<p>あなたが最初に見付けたのは、JPEG画像をBMPに変換するライブラリでした。これは一切著作権を主張しないことが宣言された、パブリックライセンスのライブラリでした。このソースコードを使って、あなたのアプリケーションはJPEG対応になりました。</p>

<dl>
<dt>Q.</dt>
<dd>このアプリケーションのソースコードを公開する必要はありますか?</dd>
<dt>A.</dt>
<dd>公開義務はありません。なぜなら、著作権はわたしが持ってゐるからです。また、JPEGライブラリには著作権は<em>ありませんでした。</em>
</dd>
</dl>

<p>次に見付けたのは、John Smithさんが作った、PNG画像をBMPに変換するライブラリでした。これは2条項BSDライセンスでした。このライブラリを静的リンクすることで、あなたのアプリケーションはPNG形式対応になりました。</p>

<dl>
<dt>Q.</dt>
<dd>このアプリケーションのソースコードを公開する必要はありますか?</dd>
<dt>A.</dt>
<dd>公開義務はありません。なぜなら、わたしが著作権を持つコードと、2条項BSDライセンスのコードから構成されるからです。</dd>
<dt>Q.</dt>
<dd>あなたは何をしなければなりませんか?</dd>
<dt>A.</dt>
<dd>ドキュメントにPNGライブラリの作者名とライセンスを明記することです。わたしは<code>README</code>ファイルに<strong>License</strong>の章を設け、次のように追記しました。</dd>
</dl>

<blockquote>

<h2>
<span id="license" class="fragment"></span><a href="#license"><i class="fa fa-link"></i></a>License</h2>

<h3>
<span id="hogepnglibrary" class="fragment"></span><a href="#hogepnglibrary"><i class="fa fa-link"></i></a>HogePngLibrary</h3>

<blockquote>
<p>(C) Copyright 2001 John Smith</p>

<p>All rights reserved.</p>

<p>Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:</p>

<ul>
<li>Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.</li>
<li>Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.</li>
<li>Neither the name of the  nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.</li>
</ul>

<p>THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</p>
</blockquote>
</blockquote>


</div>
	</td>
</tr>
</table>
<br />
<table border="1" style="height:150px;">
<tr>
	<td rowspan="3">10位</td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="thumb-up-120px.png" /></i>1956</kbd>
		<a target="_blank" href="https://qiita.com/tenntenn/items/0e33a4959250d1a55045">Go言語の初心者が見ると幸せになれる場所　#golang</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-05-11<br />11:54:21</center>
	</td>
	<td style="width:200px;">
		<!--投稿者-->
		<center>
			@<a href="user/14952.html">tenntenn</a>(70件の記事)<br />(Souzoh, Inc. (affiliated by Mercari, Inc.) 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/14952/profile-images/1476846346">
		</center>
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Go]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<!--
		<div style="width:350px;height:150px;overflow:scroll;">%s</div>
		-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;">
<h1>
<span id="本家サイトと日本語訳サイト" class="fragment"></span><a href="#%E6%9C%AC%E5%AE%B6%E3%82%B5%E3%82%A4%E3%83%88%E3%81%A8%E6%97%A5%E6%9C%AC%E8%AA%9E%E8%A8%B3%E3%82%B5%E3%82%A4%E3%83%88"><i class="fa fa-link"></i></a>本家サイトと日本語訳サイト</h1>

<h2>
<span id="本家サイト" class="fragment"></span><a href="#%E6%9C%AC%E5%AE%B6%E3%82%B5%E3%82%A4%E3%83%88"><i class="fa fa-link"></i></a><a href="http://golang.org/" rel="nofollow noopener" target="_blank">本家サイト</a>
</h2>

<p>標準ライブラリの使い方はここを見ればよい。<br>
APIドキュメントからソースが簡単に見れるので、勉強になる。</p>

<h2>
<span id="go-wiki" class="fragment"></span><a href="#go-wiki"><i class="fa fa-link"></i></a><a href="https://github.com/golang/go/wiki" rel="nofollow noopener" target="_blank">Go Wiki</a>
</h2>

<p><a href="https://github.com/golang/go/wiki/SliceTricks" rel="nofollow noopener" target="_blank">SliceTrics</a>など，初心者向けの情報があるのでチェックするとよい．少し情報が古いところもある。</p>

<h2>
<span id="golang-jporg" class="fragment"></span><a href="#golang-jporg"><i class="fa fa-link"></i></a><a href="http://golang-jp.org/" rel="nofollow noopener" target="_blank">golang-jp.org</a>
</h2>

<p>本家サイトを日本語に翻訳しているサイト．情報は新しいが，一部未翻訳の箇所あり．翻訳プロジェクトはgithubで管理されているので，翻訳に<a href="https://github.com/gophersjp/go/wiki/%E7%BF%BB%E8%A8%B3%E5%8D%94%E5%8A%9B%E3%83%95%E3%83%AD%E3%83%BC" rel="nofollow noopener" target="_blank">協力</a>もできる．</p>

<h1>
<span id="入門" class="fragment"></span><a href="#%E5%85%A5%E9%96%80"><i class="fa fa-link"></i></a>入門</h1>

<h2>
<span id="a-tour-of-go" class="fragment"></span><a href="#a-tour-of-go"><i class="fa fa-link"></i></a><a href="http://go-tour-jp.appspot.com/#1" rel="nofollow noopener" target="_blank">A Tour of Go</a>
</h2>

<p>A Tour of Goの日本語版。Go言語の機能の説明を一通り網羅している。練習問題が若干初心者には厳しい（ニュートン法とか）。<br>
追記：英語版は改定されてて，取っ付きにくい練習問題はなくなっているらしい。</p>

<h2>
<span id="whispering-gophers" class="fragment"></span><a href="#whispering-gophers"><i class="fa fa-link"></i></a><a href="http://whispering-gophers.appspot.com/talk.slide#1" rel="nofollow noopener" target="_blank">Whispering Gophers</a>
</h2>

<p>チャットアプリを作る順々に作っていけるサンプル．channelやgoroutineについて学べる．<br>
リポジトリ：<a href="https://code.google.com/p/whispering-gophers/" class="autolink" rel="nofollow noopener" target="_blank">https://code.google.com/p/whispering-gophers/</a></p>

<h2>
<span id="はじめてのgo" class="fragment"></span><a href="#%E3%81%AF%E3%81%98%E3%82%81%E3%81%A6%E3%81%AEgo"><i class="fa fa-link"></i></a><a href="http://gihyo.jp/dev/feature/01/go_4beginners" rel="nofollow noopener" target="_blank">はじめてのGo</a>
</h2>

<p>Jxckさんの入門記事です。非常に分かりやすいので，入門としておすすめ。</p>

<h2>
<span id="go-web-プログラミング" class="fragment"></span><a href="#go-web-%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0"><i class="fa fa-link"></i></a><a href="http://astaxie.gitbooks.io/build-web-application-with-golang/content/ja/index.html" rel="nofollow noopener" target="_blank">Go Web プログラミング</a>
</h2>

<p>astaxieさんのGoによるWebプログラミング入門の日本語訳です。</p>

<h1>
<span id="よいコードを書くために見た方がよさそうなところ" class="fragment"></span><a href="#%E3%82%88%E3%81%84%E3%82%B3%E3%83%BC%E3%83%89%E3%82%92%E6%9B%B8%E3%81%8F%E3%81%9F%E3%82%81%E3%81%AB%E8%A6%8B%E3%81%9F%E6%96%B9%E3%81%8C%E3%82%88%E3%81%95%E3%81%9D%E3%81%86%E3%81%AA%E3%81%A8%E3%81%93%E3%82%8D"><i class="fa fa-link"></i></a>よいコードを書くために見た方がよさそうなところ</h1>

<h2>
<span id="go-proverbs" class="fragment"></span><a href="#go-proverbs"><i class="fa fa-link"></i></a><a href="https://go-proverbs.github.io/" rel="nofollow noopener" target="_blank">Go Proverbs</a>
</h2>

<p>Rob Pike氏のGoの格言をまとめたサイト。Gophers Slackのロード画面にも出てくる。</p>

<h2>
<span id="go-code-review-comments日本語訳" class="fragment"></span><a href="#go-code-review-comments%E6%97%A5%E6%9C%AC%E8%AA%9E%E8%A8%B3"><i class="fa fa-link"></i></a><a href="https://github.com/golang/go/wiki/CodeReviewComments" rel="nofollow noopener" target="_blank">Go Code Review Comments</a>（<a href="http://qiita.com/knsh14/items/8b73b31822c109d4c497" id="reference-0896e6a5403568aedd36">日本語訳</a>)</h2>

<p>Goのコードを書く上で、気をつけることがまとめられているサイト。公式ドキュメントの<a href="https://golang.org/doc/effective_go.html" rel="nofollow noopener" target="_blank">Effective Go</a>をまとめたものが多い。</p>

<h1>
<span id="コミュニティ" class="fragment"></span><a href="#%E3%82%B3%E3%83%9F%E3%83%A5%E3%83%8B%E3%83%86%E3%82%A3"><i class="fa fa-link"></i></a>コミュニティ</h1>

<h2>
<span id="golang-nuts" class="fragment"></span><a href="#golang-nuts"><i class="fa fa-link"></i></a><a href="https://groups.google.com/forum/#!forum/golang-nuts" rel="nofollow noopener" target="_blank">golang-nuts</a>
</h2>

<p>Google Groups上のグループ。Go言語の情報はここにほとんど集まっている。但し英語。</p>

<h2>
<span id="go" class="fragment"></span><a href="#go"><i class="fa fa-link"></i></a><a href="https://plus.google.com/communities/114112804251407510571" rel="nofollow noopener" target="_blank">Go+</a>
</h2>

<p>英語のGoogle+上のコミュニティ。golang-nutsよりは情報が少ないが、Google+上なので情報をキャッチしやすい。</p>

<h2>
<span id="golang-jpgoogle" class="fragment"></span><a href="#golang-jpgoogle"><i class="fa fa-link"></i></a><a href="https://plus.google.com/communities/107075098212007233819" rel="nofollow noopener" target="_blank">Golang JP(Google+)</a>
</h2>

<p>Google+上の日本のGo言語コミュニティ。日本語なので、質問しやすい。日本のGo言語のイベントの情報等もここに流れる。</p>

<h2>
<span id="lingr-go言語" class="fragment"></span><a href="#lingr-go%E8%A8%80%E8%AA%9E"><i class="fa fa-link"></i></a><a href="http://lingr.com/room/golang" rel="nofollow noopener" target="_blank">Lingr-Go言語</a>
</h2>

<p>Go言語の話題を話すチャットルーム。<br>
リアルタイムで聞けます！</p>

<h2>
<span id="slack-gophers" class="fragment"></span><a href="#slack-gophers"><i class="fa fa-link"></i></a><a href="http://blog.gopheracademy.com/gophers-slack-community/" rel="nofollow noopener" target="_blank">Slack-Gophers</a>
</h2>

<p>Slackのコミュニティです。<code>#japan</code>や<code>#tokyo</code>には日本の方がいるので，日本語で質問しやすい。この他にも分野や地域ごとに部屋があるので，いろいろ部屋を見るとよい。</p>

<h1>
<span id="ドキュメントやまとめサイト" class="fragment"></span><a href="#%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%82%84%E3%81%BE%E3%81%A8%E3%82%81%E3%82%B5%E3%82%A4%E3%83%88"><i class="fa fa-link"></i></a>ドキュメントやまとめサイト</h1>

<h2>
<span id="go-search" class="fragment"></span><a href="#go-search"><i class="fa fa-link"></i></a><a href="http://go-search.org/" rel="nofollow noopener" target="_blank">Go Search</a>
</h2>

<p>Go言語のライブラリを探せる．検索結果にgodoc.orgやGo Walkerへのリンクがある．<br>
どういうライブラリがよく利用されているかわかるので便利．</p>

<h2>
<span id="godocorg" class="fragment"></span><a href="#godocorg"><i class="fa fa-link"></i></a><a href="http://godoc.org/" rel="nofollow noopener" target="_blank">godoc.org</a>
</h2>

<p>様々なGo言語のライブラリのAPIドキュメントを生成するサービス。<br>
URLの後ろにライブラリのインポートパスを入れると自動でAPIドキュメントが生成、公開される。トップページのPopular Packagesを眺めるだけで、人気のパッケージが分かる。</p>

<h2>
<span id="go-walker" class="fragment"></span><a href="#go-walker"><i class="fa fa-link"></i></a><a href="https://gowalker.org/" rel="nofollow noopener" target="_blank">Go Walker</a>
</h2>

<p>APIドキュメントを生成するサービス．個人的には，godoc.orgより使いやすい．</p>

<h2>
<span id="golang-samples" class="fragment"></span><a href="#golang-samples"><i class="fa fa-link"></i></a><a href="https://github.com/golang-samples" rel="nofollow noopener" target="_blank">golang-samples</a>
</h2>

<p>Go言語のサンプルを集めたGithubのOrganization。誰でも参加して、新しいレポジトリを追加できる。参加したければ、<a href="mailto:golang.samples@gmail.com" class="autolink">golang.samples@gmail.com</a> にメールを送れば良い。pull requestを送るだけでもよい。</p>

<h2>
<span id="goz" class="fragment"></span><a href="#goz"><i class="fa fa-link"></i></a><a href="http://goz.hexacosa.net/" rel="nofollow noopener" target="_blank">goz</a>
</h2>

<p>Go言語の熱い記事をチェックできるサイト．</p>

<h2>
<span id="go-by-example日本語訳" class="fragment"></span><a href="#go-by-example%E6%97%A5%E6%9C%AC%E8%AA%9E%E8%A8%B3"><i class="fa fa-link"></i></a><a href="https://gobyexample.com/" rel="nofollow noopener" target="_blank">Go by Example</a>（<a href="https://oohira.github.io/gobyexample-jp/" rel="nofollow noopener" target="_blank">日本語訳</a>）</h2>

<p>豊富なサンプルを見つけることができるサイト．</p>

<h2>
<span id="go-tutorial-dot-net-perls" class="fragment"></span><a href="#go-tutorial-dot-net-perls"><i class="fa fa-link"></i></a><a href="http://www.dotnetperls.com/go" rel="nofollow noopener" target="_blank">Go Tutorial: Dot Net Perls</a>
</h2>

<p>基本的な機能を具体的な例と実行結果を提示しているサイト．<br>
<code>regexp</code>パッケージや<code>strings</code>パッケージのサンプルがあって分かりやすい．</p>

<h1>
<span id="便利サイト便利ツール" class="fragment"></span><a href="#%E4%BE%BF%E5%88%A9%E3%82%B5%E3%82%A4%E3%83%88%E4%BE%BF%E5%88%A9%E3%83%84%E3%83%BC%E3%83%AB"><i class="fa fa-link"></i></a>便利サイト，便利ツール</h1>

<h2>
<span id="go-playground" class="fragment"></span><a href="#go-playground"><i class="fa fa-link"></i></a><a href="http://play.golang.org/" rel="nofollow noopener" target="_blank">Go Playground</a>
</h2>

<p>Web上でGo言語を実行できるサイト。Go言語をインストールする前にここで試してみるといいかもしれない。</p>

<h2>
<span id="goenv" class="fragment"></span><a href="#goenv"><i class="fa fa-link"></i></a><a href="https://bitbucket.org/ymotongpoo/goenv" rel="nofollow noopener" target="_blank">goenv</a>
</h2>

<p>プロジェクトごとにGOPATHを設定できるツール．</p>

<h2>
<span id="dash" class="fragment"></span><a href="#dash"><i class="fa fa-link"></i></a><a href="https://itunes.apple.com/us/app/dash-docs-snippets/id458034879?mt=12" rel="nofollow noopener" target="_blank">Dash</a>
</h2>

<p>色々な言語のドキュメントをすばやく閲覧したり、スニペットを登録できるMacのアプリ。Go言語のドキュメントもある。</p>

<h2>
<span id="お気楽-go-言語プログラミング入門" class="fragment"></span><a href="#%E3%81%8A%E6%B0%97%E6%A5%BD-go-%E8%A8%80%E8%AA%9E%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0%E5%85%A5%E9%96%80"><i class="fa fa-link"></i></a><a href="http://www.geocities.jp/m_hiroi/golang/index.html" rel="nofollow noopener" target="_blank">お気楽 Go 言語プログラミング入門</a>
</h2>

<p>Go言語の文法や演習問題など網羅的に解説してあるサイト。</p>

<h1>
<span id="環境構築エディタの使い方" class="fragment"></span><a href="#%E7%92%B0%E5%A2%83%E6%A7%8B%E7%AF%89%E3%82%A8%E3%83%87%E3%82%A3%E3%82%BF%E3%81%AE%E4%BD%BF%E3%81%84%E6%96%B9"><i class="fa fa-link"></i></a>環境構築・エディタの使い方</h1>

<ul>
<li>vim : <a href="http://mattn.kaoriya.net/software/vim/20130531000559.htm" rel="nofollow noopener" target="_blank">Vimを使ったGo言語開発手法</a>
</li>
<li>Emacs : <a href="http://ymotongpoo.hatenablog.com/entry/2013/07/06/154448" rel="nofollow noopener" target="_blank">Emacsを使ったGo言語開発手法（2013.07版）</a>
</li>
<li>LiteIDE: <a href="http://python.matrix.jp/2013/05/09/go_start1.html" rel="nofollow noopener" target="_blank">go言語の始め方(1)</a>
</li>
</ul>

<h1>
<span id="書籍" class="fragment"></span><a href="#%E6%9B%B8%E7%B1%8D"><i class="fa fa-link"></i></a>書籍</h1>

<p>参考：<a href="https://github.com/golang/go/wiki/Books#japanese" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/golang/go/wiki/Books#japanese</a></p>

<ul>
<li><a href="http://www.amazon.co.jp/%E3%81%AF%E3%81%98%E3%82%81%E3%81%A6%E3%81%AE%E3%80%8CGo%E8%A8%80%E8%AA%9E%E3%80%8D-I%E3%83%BBO-BOOKS-%E8%8C%A8%E6%9C%A8-%E9%9A%86%E5%BD%B0/dp/4777515591" rel="nofollow noopener" target="_blank">はじめての「Go言語」</a></li>
<li><a href="http://www.amazon.co.jp/Go%E8%A8%80%E8%AA%9E%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0%E5%85%A5%E9%96%80on-Google-App-Engine-%E6%A8%AA%E5%B1%B1/dp/4798031801" rel="nofollow noopener" target="_blank">Go言語プログラミング入門on Google App Engine</a></li>
<li><a href="http://www.amazon.co.jp/%E3%81%AF%E3%81%98%E3%82%81%E3%81%A6%E3%81%AEGoogle-App-Engine-Go%E8%A8%80%E8%AA%9E%E7%B7%A8-BOOKS/dp/4777516601" rel="nofollow noopener" target="_blank">はじめてのGoogle App Engine Go言語編</a></li>
<li><a href="http://www.amazon.co.jp/%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0%E8%A8%80%E8%AA%9EGo%E3%83%95%E3%83%AC%E3%83%BC%E3%82%BA%E3%83%96%E3%83%83%E3%82%AF-David-Chisnall/dp/486401096X" rel="nofollow noopener" target="_blank">プログラミング言語Goフレーズブック</a></li>
<li>
<a href="http://www.amazon.co.jp/%E5%9F%BA%E7%A4%8E%E3%81%8B%E3%82%89%E3%82%8F%E3%81%8B%E3%82%8B-Go%E8%A8%80%E8%AA%9E-%E5%8F%A4%E5%B7%9D-%E6%98%87/dp/4863541171" rel="nofollow noopener" target="_blank">基礎からわかる Go言語</a>（<a href="http://www.c-r.com/book/detail/1018" rel="nofollow noopener" target="_blank">改訂2版</a>）</li>
<li><a href="http://www.golang-book.com/" rel="nofollow noopener" target="_blank">An Introduction to Programming in Go</a></li>
<li><a href="https://www.amazon.co.jp/%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0%E8%A8%80%E8%AA%9EGo-ADDISON-WESLEY-PROFESSIONAL-COMPUTING-Donovan/dp/4621300253" rel="nofollow noopener" target="_blank">プログラミング言語Go</a></li>
</ul>
</div>
	</td>
</tr>
</table>
<br />
<table border="1" style="height:150px;">
<tr>
	<td rowspan="3">11位</td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="thumb-up-120px.png" /></i>1566</kbd>
		<a target="_blank" href="https://qiita.com/kouchi67/items/c8405c8c34e0e1a4168e">これからiOSやる奴はここ読んどけ</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-05-26<br />13:31:42</center>
	</td>
	<td style="width:200px;">
		<!--投稿者-->
		<center>
			@<a href="user/2920.html">kouchi67</a>(23件の記事)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/2920/profile-images/1473682317">
		</center>
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[iOS]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<!--
		<div style="width:350px;height:150px;overflow:scroll;">%s</div>
		-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;">
<h1>
<span id="これからiosアプリ開発をやりたいという人へ" class="fragment"></span><a href="#%E3%81%93%E3%82%8C%E3%81%8B%E3%82%89ios%E3%82%A2%E3%83%97%E3%83%AA%E9%96%8B%E7%99%BA%E3%82%92%E3%82%84%E3%82%8A%E3%81%9F%E3%81%84%E3%81%A8%E3%81%84%E3%81%86%E4%BA%BA%E3%81%B8"><i class="fa fa-link"></i></a>これからiOSアプリ開発をやりたい！という人へ</h1>

<p>自分が実際にiOSアプリ開発をやって、便利だったと思う情報を残しておきます。<br>
これからアプリ開発やりたいという人の参考になれば。</p>

<h2>
<span id="iosアプリ開発の第一歩" class="fragment"></span><a href="#ios%E3%82%A2%E3%83%97%E3%83%AA%E9%96%8B%E7%99%BA%E3%81%AE%E7%AC%AC%E4%B8%80%E6%AD%A9"><i class="fa fa-link"></i></a>iOSアプリ開発の第一歩</h2>

<p>まずは間違いなくMacを買うこと。<br>
Macを書いましょう。Windowsじゃ開発できません。<br>
MacじゃないとiOSアプリの開発はできないので、<br>
これがないとお話になりません。。。</p>

<h2>
<span id="インストールしておくもの" class="fragment"></span><a href="#%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB%E3%81%97%E3%81%A6%E3%81%8A%E3%81%8F%E3%82%82%E3%81%AE"><i class="fa fa-link"></i></a>インストールしておくもの</h2>

<p>基本的にXcodeさえインストールしておけばアプリの開発はできます。<br>
<code>Mac App Store</code>からダウンロードできます。</p>

<p>実機インストールや<code>App Store</code>に公開したい場合は、<br>
<code>iOS Developer Program</code>を購入する必要があります。</p>

<h2>
<span id="まずはこれを読むべき" class="fragment"></span><a href="#%E3%81%BE%E3%81%9A%E3%81%AF%E3%81%93%E3%82%8C%E3%82%92%E8%AA%AD%E3%82%80%E3%81%B9%E3%81%8D"><i class="fa fa-link"></i></a>まずはこれを読むべき</h2>

<p>Appleのドキュメント集（日本語訳Version）<br>
<a href="https://developer.apple.com/jp/devcenter/ios/library/japanese.html" class="autolink" rel="nofollow noopener" target="_blank">https://developer.apple.com/jp/devcenter/ios/library/japanese.html</a><br>
日本語タイトルのリンクを開くと日本語PDFを開けます。</p>

<p>初心者向けの内容から各フレームワークにフォーカスしたドキュメントが置いてあります。<br>
iOSのアーキテクチャについて触れているドキュメントも多いので、これを読んでおけば無敵です。</p>

<h3>
<span id="まず読むべきモノ" class="fragment"></span><a href="#%E3%81%BE%E3%81%9A%E8%AA%AD%E3%82%80%E3%81%B9%E3%81%8D%E3%83%A2%E3%83%8E"><i class="fa fa-link"></i></a>まず読むべきモノ</h3>

<p>意味がわからなくてもさらっと見ておくと良いと思います。</p>

<ul>
<li>iOS ヒューマンインターフェイス ガイドライン（←これ面白い）</li>
<li>iOS View Controller プログラミングガイド</li>
<li>iOS Table View プログラミングガイド</li>
<li>iOS View Controllerカタログ（←これ面白い）</li>
</ul>

<h3>
<span id="初心者向け" class="fragment"></span><a href="#%E5%88%9D%E5%BF%83%E8%80%85%E5%90%91%E3%81%91"><i class="fa fa-link"></i></a>初心者向け</h3>

<ul>
<li>初めての iOS アプリケーション</li>
<li>2つ目のiOSアプリケーション:ストーリーボード</li>
<li>3つ目のiOSアプリケーション:iCloud</li>
</ul>

<h2>
<span id="入門資料" class="fragment"></span><a href="#%E5%85%A5%E9%96%80%E8%B3%87%E6%96%99"><i class="fa fa-link"></i></a>入門資料</h2>

<ul>
<li><p>Mixiの研修資料<br>
<a href="https://github.com/mixi-inc/iOSTraining" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/mixi-inc/iOSTraining</a></p></li>
<li><p>ドットインストール<br>
iOSプログラミング入門 (全24回)<br>
<a href="http://dotinstall.com/lessons/basic_ios" class="autolink" rel="nofollow noopener" target="_blank">http://dotinstall.com/lessons/basic_ios</a></p></li>
</ul>

<h2>
<span id="よくお世話になったサイト" class="fragment"></span><a href="#%E3%82%88%E3%81%8F%E3%81%8A%E4%B8%96%E8%A9%B1%E3%81%AB%E3%81%AA%E3%81%A3%E3%81%9F%E3%82%B5%E3%82%A4%E3%83%88"><i class="fa fa-link"></i></a>よくお世話になったサイト</h2>

<p>iPhoneアプリ開発の虎の巻<br>
<a href="http://iphone-tora.sakura.ne.jp/" class="autolink" rel="nofollow noopener" target="_blank">http://iphone-tora.sakura.ne.jp/</a></p>

<p>Cocoaの日々<br>
<a href="http://cocoadays.blogspot.jp/" class="autolink" rel="nofollow noopener" target="_blank">http://cocoadays.blogspot.jp/</a></p>

<p>強火で進め<br>
<a href="http://d.hatena.ne.jp/nakamura001/" class="autolink" rel="nofollow noopener" target="_blank">http://d.hatena.ne.jp/nakamura001/</a></p>

<p>Over&amp;Out その後<br>
<a href="http://d.hatena.ne.jp/shu223/" class="autolink" rel="nofollow noopener" target="_blank">http://d.hatena.ne.jp/shu223/</a></p>

<p>iPhone ｜ Developers.IO<br>
<a href="http://dev.classmethod.jp/category/iphone/" class="autolink" rel="nofollow noopener" target="_blank">http://dev.classmethod.jp/category/iphone/</a></p>

<h2>
<span id="便利系ツール" class="fragment"></span><a href="#%E4%BE%BF%E5%88%A9%E7%B3%BB%E3%83%84%E3%83%BC%E3%83%AB"><i class="fa fa-link"></i></a>便利系ツール</h2>

<h5>
<span id="appcode" class="fragment"></span><a href="#appcode"><i class="fa fa-link"></i></a>AppCode</h5>

<p><a href="http://www.jetbrains.com/objc/" class="autolink" rel="nofollow noopener" target="_blank">http://www.jetbrains.com/objc/</a><br>
jetbrains社が提供しているObjective-C用IDEです。<br>
Storyboardなどを編集する際はXcodeを使わないと編集できませんが、<br>
コードを書くときは圧倒的にこちらのほうが速いです。<br>
補完が優秀であったりリファクタリングが優秀だったりと、<br>
色々機能も豊富なのでストレスも少ないです。<br>
気になる人はぐぐってみてください。<br>
紹介記事も多いようです。</p>

<p>追記：Xcodeとの比較をしている記事があったのでご紹介。<br>
<a href="http://developer.smartnews.be/blog/2013/07/16/appcode-increases-objective-c-productivity/" class="autolink" rel="nofollow noopener" target="_blank">http://developer.smartnews.be/blog/2013/07/16/appcode-increases-objective-c-productivity/</a></p>

<p>ショートカット集などなど<br>
<a href="http://qiita.com/kouchi67/items/defaaba875546210fece" id="reference-f8df01deed13c2047ff0">AppCodeをInstallして最初にすること＆ショートカット</a><br>
<a href="http://qiita.com/happy_ryo/items/8cf569990eb8f7aa582f" id="reference-bb163613912c6e32d136">AppCodeで知っていると便利なショートカット12選</a><br>
<a href="http://qiita.com/kouchi67/items/9bff6cd9be2d7070fbdf" id="reference-e047551db7efe716e498">AppCodeショートカットメモ（コード補完周り）</a></p>

<h5>
<span id="xcodeチートシート" class="fragment"></span><a href="#xcode%E3%83%81%E3%83%BC%E3%83%88%E3%82%B7%E3%83%BC%E3%83%88"><i class="fa fa-link"></i></a>Xcodeチートシート</h5>

<p><a href="http://www.dotapon.sakura.ne.jp/blog/?p=305" class="autolink" rel="nofollow noopener" target="_blank">http://www.dotapon.sakura.ne.jp/blog/?p=305</a><br>
<a href="http://devcheatsheet.com/tag/xcode/" class="autolink" rel="nofollow noopener" target="_blank">http://devcheatsheet.com/tag/xcode/</a><br>
効率は正義。<br>
ショートカットを駆使して爆速コーディング！</p>

<h5>
<span id="github" class="fragment"></span><a href="#github"><i class="fa fa-link"></i></a>github</h5>

<p><a href="https://github.com/" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/</a><br>
iOSのオープンソースがたくさんあります。<br>
開発者として登録もしておくと良いでしょう。</p>

<h5>
<span id="cocoa-controls" class="fragment"></span><a href="#cocoa-controls"><i class="fa fa-link"></i></a>Cocoa Controls</h5>

<p><a href="https://www.cocoacontrols.com/" class="autolink" rel="nofollow noopener" target="_blank">https://www.cocoacontrols.com/</a><br>
MacやiOSのオープンソース紹介サイト。<br>
スクリーンショット付きで紹介されているので、<br>
目的のモノを探すときに便利です。</p>

<h5>
<span id="cocoapods" class="fragment"></span><a href="#cocoapods"><i class="fa fa-link"></i></a>Cocoapods</h5>

<p><a href="http://cocoapods.org/" class="autolink" rel="nofollow noopener" target="_blank">http://cocoapods.org/</a><br>
Objective-Cで書かれたオープンソースのパッケージ管理ソフトです。<br>
基本的にコマンドラインです。<br>
yumとかgemとかに馴染みがある人はとっつきやすいと思います。</p>

<hr>

<p>ひとまず以上です。<br>
個人的にですが、学習する上で大事だと思う事をいくつか紹介。</p>

<ul>
<li><p>ドキュメントを探す／読む<br>
実装したい機能について、Appleからドキュメントが提供されているかどうかくらいは確認しましょう。<br>
あれば読み込みましょう。<br>
下手なブログ読むよりよっぽど確実で詳しいです。</p></li>
<li><p>ショートカットを覚える<br>
効率的に作業するというのは想像以上に大事です。<br>
効率良く開発をすることは、快適でかつストレスが少ないです。<br>
楽しく効率的に開発を続けていくために是非習得しましょう。</p></li>
</ul>

<p>頑張って自分のアプリを作れるようになりましょう！</p>

<hr>

<h1>
<span id="おまけ---書籍" class="fragment"></span><a href="#%E3%81%8A%E3%81%BE%E3%81%91---%E6%9B%B8%E7%B1%8D"><i class="fa fa-link"></i></a>おまけ - 書籍</h1>

<p>独断と偏見で良書だと思ってる書籍を紹介。<br>
個人的には初心者向けな書籍とか必要ない気もします。<br>
最近はブログ等も多く、何よりAppleのドキュメントが豊富なので、<br>
基本的にそちらを見て勉強するのが良い気がします。</p>

<h2>
<span id="iphone-sdk-3-プログラミング大全-実践プログラミング" class="fragment"></span><a href="#iphone-sdk-3-%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0%E5%A4%A7%E5%85%A8-%E5%AE%9F%E8%B7%B5%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0"><i class="fa fa-link"></i></a><a href="http://www.amazon.co.jp/exec/obidos/ASIN/4048679910/22301-22/ref=nosim/" rel="nofollow noopener" target="_blank">iPhone SDK 3 プログラミング大全 実践プログラミング</a>
</h2>

<p>初めて手にとって読んだ本。<br>
iOSの仕組みについて詳しく解説されていた印象がある。<br>
バージョンは古いけど入門資料としてはまだまだ役立つ書籍かもしれない。</p>

<h2>
<span id="iphoneアプリ開発エキスパートガイド-ios-6対応" class="fragment"></span><a href="#iphone%E3%82%A2%E3%83%97%E3%83%AA%E9%96%8B%E7%99%BA%E3%82%A8%E3%82%AD%E3%82%B9%E3%83%91%E3%83%BC%E3%83%88%E3%82%AC%E3%82%A4%E3%83%89-ios-6%E5%AF%BE%E5%BF%9C"><i class="fa fa-link"></i></a><a href="http://www.amazon.co.jp/iPhone%E3%82%A2%E3%83%97%E3%83%AA%E9%96%8B%E7%99%BA%E3%82%A8%E3%82%AD%E3%82%B9%E3%83%91%E3%83%BC%E3%83%88%E3%82%AC%E3%82%A4%E3%83%89-iOS-6%E5%AF%BE%E5%BF%9C-%E5%8A%A0%E8%97%A4-%E5%AF%9B%E4%BA%BA/dp/4844333852/ref=pd_sim_b_2" rel="nofollow noopener" target="_blank">iPhoneアプリ開発エキスパートガイド iOS 6対応</a>
</h2>

<p>iOS6から追加された機能を丁寧に紹介している。良書。</p>

<h2>
<span id="ios5プログラミングブック" class="fragment"></span><a href="#ios5%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0%E3%83%96%E3%83%83%E3%82%AF"><i class="fa fa-link"></i></a><a href="http://www.amazon.co.jp/iOS5%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0%E3%83%96%E3%83%83%E3%82%AF-%E5%8A%A0%E8%97%A4-%E5%AF%9B%E4%BA%BA/dp/4844332228" rel="nofollow noopener" target="_blank">iOS5プログラミングブック</a>
</h2>

<p>iOS5から追加された機能を丁寧に紹介している。良書。</p>

<h2>
<span id="ios4プログラミングブック" class="fragment"></span><a href="#ios4%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0%E3%83%96%E3%83%83%E3%82%AF"><i class="fa fa-link"></i></a><a href="http://www.amazon.co.jp/iOS4%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0%E3%83%96%E3%83%83%E3%82%AF-%E7%95%91-%E5%9C%AD%E8%BC%94/dp/4844329766/ref=pd_bxgy_b_img_y" rel="nofollow noopener" target="_blank">iOS4プログラミングブック</a>
</h2>

<p>iOS4から（略</p>

<h2>
<span id="iosアプリ開発達人のレシピ100" class="fragment"></span><a href="#ios%E3%82%A2%E3%83%97%E3%83%AA%E9%96%8B%E7%99%BA%E9%81%94%E4%BA%BA%E3%81%AE%E3%83%AC%E3%82%B7%E3%83%94100"><i class="fa fa-link"></i></a><a href="http://www.amazon.co.jp/iOS%E3%82%A2%E3%83%97%E3%83%AA%E9%96%8B%E7%99%BA%E9%81%94%E4%BA%BA%E3%81%AE%E3%83%AC%E3%82%B7%E3%83%94100%E2%80%95%E9%96%8B%E7%99%BA%E7%8F%BE%E5%A0%B4%E3%81%A7%E5%AE%9F%E8%A8%BC%E3%81%95%E3%82%8C%E3%81%9F%E5%AE%9F%E7%94%A8%E3%82%B3%E3%83%BC%E3%83%89%E9%9B%86-%E5%A0%A4-%E4%BF%AE%E4%B8%80/dp/4798038180/ref=pd_sim_b_1" rel="nofollow noopener" target="_blank">iOSアプリ開発達人のレシピ100</a>
</h2>

<p>ちょっと手の込んだ役に立ちそうな処理がたくさん紹介されててオススメ。<br>
上で紹介した「Over&amp;Out その後」の中の人の書籍。</p>

<h2>
<span id="詳解-objective-c-20-第3版" class="fragment"></span><a href="#%E8%A9%B3%E8%A7%A3-objective-c-20-%E7%AC%AC3%E7%89%88"><i class="fa fa-link"></i></a><a href="http://www.amazon.co.jp/%E8%A9%B3%E8%A7%A3-Objective-C-2-0-%E7%AC%AC3%E7%89%88-%E8%8D%BB%E5%8E%9F/dp/4797368276/ref=pd_sim_b_44" rel="nofollow noopener" target="_blank">詳解 Objective-C 2.0 第3版</a>
</h2>

<p>Objective-Cについて学びたいならこれ。<br>
ちょっと難しいかも。</p>

<h2>
<span id="エキスパートobjective-cプログラミング--iosos-xのメモリ管理とマルチスレッド" class="fragment"></span><a href="#%E3%82%A8%E3%82%AD%E3%82%B9%E3%83%91%E3%83%BC%E3%83%88objective-c%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0--iosos-x%E3%81%AE%E3%83%A1%E3%83%A2%E3%83%AA%E7%AE%A1%E7%90%86%E3%81%A8%E3%83%9E%E3%83%AB%E3%83%81%E3%82%B9%E3%83%AC%E3%83%83%E3%83%89"><i class="fa fa-link"></i></a><a href="http://www.amazon.co.jp/%E3%82%A8%E3%82%AD%E3%82%B9%E3%83%91%E3%83%BC%E3%83%88Objective-C%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0-%EF%BC%8DiOS-OS-X%E3%81%AE%E3%83%A1%E3%83%A2%E3%83%AA%E7%AE%A1%E7%90%86%E3%81%A8%E3%83%9E%E3%83%AB%E3%83%81%E3%82%B9%E3%83%AC%E3%83%83%E3%83%89%EF%BC%8D-%E5%9D%82%E6%9C%AC/dp/4844331094/ref=pd_sim_b_12" rel="nofollow noopener" target="_blank">エキスパートObjective-Cプログラミング -iOS/OS Xのメモリ管理とマルチスレッド</a>
</h2>

<p>Objective-Cでのマルチスレッドやメモリ管理といった少し複雑な処理について詳しく解説。<br>
これが読めたら脱初心者。<br>
一度は読んでおきたい。</p>

<h2>
<span id="ios開発におけるパターンによるオートマティズム" class="fragment"></span><a href="#ios%E9%96%8B%E7%99%BA%E3%81%AB%E3%81%8A%E3%81%91%E3%82%8B%E3%83%91%E3%82%BF%E3%83%BC%E3%83%B3%E3%81%AB%E3%82%88%E3%82%8B%E3%82%AA%E3%83%BC%E3%83%88%E3%83%9E%E3%83%86%E3%82%A3%E3%82%BA%E3%83%A0"><i class="fa fa-link"></i></a><a href="http://www.amazon.co.jp/iOS%E9%96%8B%E7%99%BA%E3%81%AB%E3%81%8A%E3%81%91%E3%82%8B%E3%83%91%E3%82%BF%E3%83%BC%E3%83%B3%E3%81%AB%E3%82%88%E3%82%8B%E3%82%AA%E3%83%BC%E3%83%88%E3%83%9E%E3%83%86%E3%82%A3%E3%82%BA%E3%83%A0-%E6%9C%A8%E4%B8%8B-%E8%AA%A0/dp/4861007348/ref=pd_sim_b_3" rel="nofollow noopener" target="_blank">iOS開発におけるパターンによるオートマティズム</a>
</h2>

<p>RSSリーダーを作成する事を題材にクラス設計などについても紹介されている。<br>
簡単なコードは書けるようになってきたけど、次どうすればいいかわからない・・・<br>
そんな人にオススメ。<br>
自分もこれを読んで勉強しました。</p>

<h2>
<span id="ios-core-frameworks-テクニカルガイド" class="fragment"></span><a href="#ios-core-frameworks-%E3%83%86%E3%82%AF%E3%83%8B%E3%82%AB%E3%83%AB%E3%82%AC%E3%82%A4%E3%83%89"><i class="fa fa-link"></i></a><a href="http://www.amazon.co.jp/iOS-Core-Frameworks%E3%83%86%E3%82%AF%E3%83%8B%E3%82%AB%E3%83%AB%E3%82%AC%E3%82%A4%E3%83%89-Shawn-Welch/dp/4844332724" rel="nofollow noopener" target="_blank">iOS Core Frameworks テクニカルガイド</a>
</h2>

<p>CoreFrameworkに焦点を当てている。<br>
CoreData、位置情報、グラフィック、音声周りと色々紹介されていてとてもありがたい書籍。<br>
こういった機能に焦点を当てて紹介している書籍は割と少ないので貴重。</p>

<hr>

<p>良書があれば随時追加していく予定。</p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1" style="height:150px;">
<tr>
	<td rowspan="3">12位</td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="thumb-up-120px.png" /></i>1541</kbd>
		<a target="_blank" href="https://qiita.com/suin/items/22662f43b6a6e8728798">動的言語だけやってた僕が、38日間Go言語を書いて学んだこと</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2014-01-11<br />23:04:54</center>
	</td>
	<td style="width:200px;">
		<!--投稿者-->
		<center>
			@<a href="user/889.html">suin</a>(697件の記事)<br />(ShouldBee 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/889/profile-images/1473682133">
		</center>
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Java]</b> <b>[PHP]</b> <b>[Go]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<!--
		<div style="width:350px;height:150px;overflow:scroll;">%s</div>
		-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p><a href="https://camo.qiitausercontent.com/dfcb4e20de11481fd3b6f9d8c3dc9e19741a6605/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3838392f35626331646430352d326439322d653462632d616661302d3763366366653165623664372e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/dfcb4e20de11481fd3b6f9d8c3dc9e19741a6605/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3838392f35626331646430352d326439322d653462632d616661302d3763366366653165623664372e706e67" alt="golang" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/889/5bc1dd05-2d92-e4bc-afa0-7c6cfe1eb6d7.png"></a></p>

<p>Go言語を始めて38日たったので、これからGo言語を始めるプログラマにちょっとでもヒントになるように、どのようにGo言語を始めて、どのような手順で学んできたかまとめておきます。</p>

<h1>
<span id="筆者のバックグランド" class="fragment"></span><a href="#%E7%AD%86%E8%80%85%E3%81%AE%E3%83%90%E3%83%83%E3%82%AF%E3%82%B0%E3%83%A9%E3%83%B3%E3%83%89"><i class="fa fa-link"></i></a>筆者のバックグランド</h1>

<ul>
<li>PHP歴、JavaScript歴10年~</li>
<li>Python 3ヶ月くらい</li>
<li>Ruby 1日</li>
<li>静的言語経験ほぼ皆無(Java 3日くらい、Scala 3日くらい、Objective-C 1週間くらい、Cそもそも挫折、C# 1日)</li>
</ul>

<p>静的言語というと、「コンパイルの一手間が面倒」だとか「環境を作るのが面倒」だとか先入観があり、ほぼ食わず嫌い状態でした。</p>

<h1>
<span id="go言語とは" class="fragment"></span><a href="#go%E8%A8%80%E8%AA%9E%E3%81%A8%E3%81%AF"><i class="fa fa-link"></i></a>Go言語とは?</h1>

<p>Go言語は2009年にGoogleによって作られたオープンソースの静的言語で、Linux・Mac・WindowsやAndroidで動作します。最近ではGoogle App Engineで使うこともできます。</p>

<p><a href="http://golang.jp/about_go" rel="nofollow noopener" target="_blank">golang.jpの解説</a>によると次のような特徴があります。</p>

<ul>
<li>シンプルな言語である。</li>
<li>コンパイル・実行速度が早い。</li>
<li>安全性が高い。</li>
<li>同期処理が容易に行える。</li>
<li>なにより楽しい。</li>
<li>オープンソースである。</li>
</ul>

<h1>
<span id="なぜgo言語を学んだか" class="fragment"></span><a href="#%E3%81%AA%E3%81%9Cgo%E8%A8%80%E8%AA%9E%E3%82%92%E5%AD%A6%E3%82%93%E3%81%A0%E3%81%8B"><i class="fa fa-link"></i></a>なぜGo言語を学んだか?</h1>

<p>ひとことで言うと並行処理を簡単に書きたかったからです。Go言語にはGoルーチンというシンプルな並行処理の仕組みがあります。たまたま業務で、同時に複数台のHTTPサーバーにリクエストを出して大量の命令と大量のデータを並行処理するプログラムを実装する必要が出てきて、得意なPHPでは難しいのでGo言語を学ぶことにしました。言語にはそれぞれ特徴があって、適材適所だと思っています。</p>

<h1>
<span id="読んだ本" class="fragment"></span><a href="#%E8%AA%AD%E3%82%93%E3%81%A0%E6%9C%AC"><i class="fa fa-link"></i></a>読んだ本</h1>

<p><a href="https://camo.qiitausercontent.com/f298964aec6ca5da2ead26520bea2da70ff69e40/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3838392f65613966336165332d626539632d393333662d373336322d6464626533643362373738312e6a706567" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/f298964aec6ca5da2ead26520bea2da70ff69e40/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3838392f65613966336165332d626539632d393333662d373336322d6464626533643362373738312e6a706567" alt="51lLHJuR4-L._SS500_.jpg" title="51lLHJuR4-L._SS500_.jpg" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/889/ea9f3ae3-be9c-933f-7362-ddbe3d3b7781.jpeg"></a></p>

<p>Go言語を始める前に、『<a href="http://www.amazon.co.jp/gp/product/4777515591?ie=UTF8&amp;camp=1207&amp;creative=8411&amp;creativeASIN=4777515591&amp;linkCode=shr&amp;tag=suinyeze-22&amp;f_rd_p=466449256&amp;pf_rd_s=lpo-top-stripe&amp;pf_rd_t=201&amp;pf_rd_i=4863541171&amp;pf_rd_m=AN1VRQENFRJN5&amp;pf_rd_r=0WA4QMWKHBWB1PVGQH0X" rel="nofollow noopener" target="_blank">はじめての「Go言語」</a>』をパラパラと読みました。じっくり読むというよりは最低限必要なこと、例えば、基本的な<code>if</code>や<code>for</code>などの構文の書き方、私のやったことある言語にないGoルーチン(並行処理ができる)の概念などを読んで学びました。</p>

<h1>
<span id="参考にしたドキュメント" class="fragment"></span><a href="#%E5%8F%82%E8%80%83%E3%81%AB%E3%81%97%E3%81%9F%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88"><i class="fa fa-link"></i></a>参考にしたドキュメント</h1>

<p>ドキュメント英語版: <a href="http://golang.org/doc/" class="autolink" rel="nofollow noopener" target="_blank">http://golang.org/doc/</a><br>
ドキュメント日本語版: <a href="http://golang.jp/go_spec" class="autolink" rel="nofollow noopener" target="_blank">http://golang.jp/go_spec</a></p>

<h1>
<span id="go関連情報のググり方" class="fragment"></span><a href="#go%E9%96%A2%E9%80%A3%E6%83%85%E5%A0%B1%E3%81%AE%E3%82%B0%E3%82%B0%E3%82%8A%E6%96%B9"><i class="fa fa-link"></i></a>Go関連情報のググり方</h1>

<p>「go」だけで検索するとGo言語の情報がヒットしにくい問題があります。英語の情報を探すときは「golang」、日本語の情報を探すときは「Go言語」といったキーワードで探すと情報を見つけやすくなります。</p>

<h1>
<span id="どのようなことを学んだか" class="fragment"></span><a href="#%E3%81%A9%E3%81%AE%E3%82%88%E3%81%86%E3%81%AA%E3%81%93%E3%81%A8%E3%82%92%E5%AD%A6%E3%82%93%E3%81%A0%E3%81%8B"><i class="fa fa-link"></i></a>どのようなことを学んだか?</h1>

<p>ここからは、38日間にどのようなことを学んできたか、Qiitaに投稿した記事を振り返りながら、概ね時系列でご紹介します。</p>

<h2>
<span id="go言語の実行環境を作る入門以前の段階" class="fragment"></span><a href="#go%E8%A8%80%E8%AA%9E%E3%81%AE%E5%AE%9F%E8%A1%8C%E7%92%B0%E5%A2%83%E3%82%92%E4%BD%9C%E3%82%8B%E5%85%A5%E9%96%80%E4%BB%A5%E5%89%8D%E3%81%AE%E6%AE%B5%E9%9A%8E"><i class="fa fa-link"></i></a>Go言語の実行環境を作る入門以前の段階</h2>

<ul>
<li>MacにGoをどうやってインストールするのか?</li>
<li>そもそもどうやって実行するのか?</li>
<li>コンパイルはどうするのか?</li>
<li>Macで作った実行形式がLinuxで使えるのか?</li>
</ul>

<p>このような疑問を解決するために調べた内容をまとめた最初の記事です。</p>

<p>2013-12-04 <a href="http://qiita.com/suin/items/a0b7eb585eeb6bda4174" id="reference-21d8990091b6674e3e4d">PHPerだが今日初めてGo言語に手を出してみる試み</a></p>

<h2>
<span id="ひとつのファイルにガリガリ書くだけの段階" class="fragment"></span><a href="#%E3%81%B2%E3%81%A8%E3%81%A4%E3%81%AE%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AB%E3%82%AC%E3%83%AA%E3%82%AC%E3%83%AA%E6%9B%B8%E3%81%8F%E3%81%A0%E3%81%91%E3%81%AE%E6%AE%B5%E9%9A%8E"><i class="fa fa-link"></i></a>ひとつのファイルにガリガリ書くだけの段階</h2>

<p>さすがに1ファイルに収まらない量になってきたので、複数のファイルにコードを分けることについて学ぶ。</p>

<p>2013-12-05 <a href="http://qiita.com/suin/items/f4ad02e4123c8a3c75eb" id="reference-d30e0a594a62f140efa3">Go言語のpackageの作り方: 長くなったコードを別ファイルに切り出す方法</a></p>

<h2>
<span id="試行錯誤の段階" class="fragment"></span><a href="#%E8%A9%A6%E8%A1%8C%E9%8C%AF%E8%AA%A4%E3%81%AE%E6%AE%B5%E9%9A%8E"><i class="fa fa-link"></i></a>試行錯誤の段階</h2>

<p>学んでいく過程でstackoverflowやQiitaに出てくるスニペットを試してみたくなりました。そこで、スニペットをさくっと実行できる環境を構築することにしました。</p>

<p>2013-12-05 <a href="http://qiita.com/suin/items/599057e5e30627d2ed10" id="reference-ad2b5269b10934850f8c">ワンクリックでGoのスニペットを試せる環境を作る!: CodeRunnerの設定方法</a></p>

<h2>
<span id="言語仕様の理解を深める段階" class="fragment"></span><a href="#%E8%A8%80%E8%AA%9E%E4%BB%95%E6%A7%98%E3%81%AE%E7%90%86%E8%A7%A3%E3%82%92%E6%B7%B1%E3%82%81%E3%82%8B%E6%AE%B5%E9%9A%8E"><i class="fa fa-link"></i></a>言語仕様の理解を深める段階</h2>

<p>Go言語を使うモチベーションが並行処理にあったので、真っ先にGoルーチンについて学びました。また、オブジェクト指向プログラミングを実践するにあたって、オブジェクトの作り方といった基礎的な言語仕様について学びました。</p>

<p>2013-12-05 <a href="http://qiita.com/suin/items/82ecb6f63ff4104d4f5d" id="reference-5fffe9722a48a59ef8af">Goルーチンで並列化する方法: 6秒かかる処理を3秒にしよう</a><br>
2013-12-10 <a href="http://qiita.com/suin/items/b2a81227c75c51579c04" id="reference-b28ccc92bf641eb98a8a">Go言語でオブジェクトを作ってみる: オブジェクト・メソッド・コンストラクタなど</a></p>

<h2>
<span id="実際にアプリを開発する段階" class="fragment"></span><a href="#%E5%AE%9F%E9%9A%9B%E3%81%AB%E3%82%A2%E3%83%97%E3%83%AA%E3%82%92%E9%96%8B%E7%99%BA%E3%81%99%E3%82%8B%E6%AE%B5%E9%9A%8E"><i class="fa fa-link"></i></a>実際にアプリを開発する段階</h2>

<p>アプリの開発に着手した段階です。ライブラリ・モジュールの具体的な使い方について調べていました。</p>

<p>2013-12-07 <a href="http://qiita.com/suin/items/f32fa82d6c35a34e8d16" id="reference-9af29ece0a377a9f079a">こんなに簡単! Goで作るRESTサーバー</a><br>
2013-12-10 <a href="http://qiita.com/suin/items/af8f306dc6b38a293ef5" id="reference-a2a9a94813496a24f15d">Go言語でファイル操作: ディレクトリの作り方</a><br>
2013-12-10 <a href="http://qiita.com/suin/items/7eb4fc405ac73846a9b1" id="reference-b397219cc7ed56de8800">Go言語でファイル操作: ファイルを作って書き込む</a><br>
2013-12-10 <a href="http://qiita.com/suin/items/2724f15fff9c1948c5b3" id="reference-b1a51bbfb380b2c23b7b">Go言語でコマンドが実行可能かチェックする</a></p>

<blockquote>
<p>この頃、PHPerでGo言語はじめたての僕が「型の宣言めんどくさい」とか「ポインタなんてなんで用意したし」とか不満を言っていたら、僕より先にGoを始めてた同僚に「Goに入ればGoに従えと言うじゃないですか」と言われる(笑)</p>
</blockquote>

<p>2013-12-11 <a href="http://qiita.com/suin/items/7ddfcbc708c8863ea76a" id="reference-596b45b6fe89b44df367">Go言語のクロスコンパイル設定値 $GOOS, $GOARCH 一覧リスト</a><br>
2013-12-11 <a href="http://qiita.com/suin/items/9f9bdaa0cb9cb80cf752" id="reference-911cad8b07db276f6dd8">Go言語: ディレクトリ内の全ファイルをフォーマットする方法</a> (コードスタイルがぐちゃぐちゃになって気持ち悪くなってきた頃)<br>
2013-12-11 <a href="http://qiita.com/suin/items/2a38f3e072523fa49a5b" id="reference-e8601aa804687a00e566">Go言語でRESTful APIクライアント: Qiita APIを叩いてみよう!</a><br>
2013-12-11 <a href="http://qiita.com/suin/items/d952fb963956ac31b243" id="reference-c7a1fd6eb8b1d30d68b7">Go言語でPHPのvar_dumpやJavaScriptのconsole.log的なもの</a> (そろそろデバッグを覚えたいと思った頃)<br>
2013-12-12 <a href="http://qiita.com/suin/items/062dab1e6dc82c81c320" id="reference-6cf58efb417cdfbf7a7d">Go言語でランダムな文字列を生成する</a><br>
2013-12-12 <a href="http://qiita.com/suin/items/d0deb76ff03373b22a0b" id="reference-fa3240711a249fee01bf">Go言語でPHPのarray_chunkのようなことをする</a><br>
2013-12-12 <a href="http://qiita.com/suin/items/bb9d817af5ccedb18be9" id="reference-e2813fcefa83f3036e58">Go言語でCSVを書き出す!エクセル用のSJIS版も!</a><br>
2013-12-18 <a href="http://qiita.com/suin/items/23b2c2e7cb7c80ca857e" id="reference-56835e9d4070e22c1640">Go言語:SJISのCSVファイルを読み込む!</a><br>
2013-12-18 <a href="http://qiita.com/suin/items/347ecda071a6999e5d22" id="reference-6050296b94ac95609c55">Go言語: SJISのCSVを読み込みながら1行毎に処理を実行する</a><br>
2013-12-18 <a href="http://qiita.com/suin/items/3e978caa0c7f4ffcdd97" id="reference-a1d46ce16d0145503d1c">Go言語: PHPのarray_combine()のような処理をする関数</a><br>
2014-01-06 <a href="http://qiita.com/suin/items/68ed7020d21dca047a73" id="reference-a4825c387e337a311bfe">[教えて]Go言語:なぜインターフェイスはポインタにできない?</a> (このあたりからやっとポインタを意識し始める)<br>
2014-01-07 <a href="http://qiita.com/suin/items/468108496cd0dc002f64" id="reference-d6c0718d83c94634baad">Go言語:変数が関数かどうかを返す関数</a><br>
2014-01-07 <a href="http://qiita.com/suin/items/ec2070fde6700ffc4a7f" id="reference-1cb223903fbbc7283b31">Go言語:メソッドの引数の型を調べる方法</a><br>
2014-01-10 <a href="http://qiita.com/suin/items/942773fd059272825eb8" id="reference-5f36e8d7a8f77f1b9862">Go言語:Riakに書き込む</a></p>

<h2>
<span id="そろそろテストを書かなきゃと思い始めた段階" class="fragment"></span><a href="#%E3%81%9D%E3%82%8D%E3%81%9D%E3%82%8D%E3%83%86%E3%82%B9%E3%83%88%E3%82%92%E6%9B%B8%E3%81%8B%E3%81%AA%E3%81%8D%E3%82%83%E3%81%A8%E6%80%9D%E3%81%84%E5%A7%8B%E3%82%81%E3%81%9F%E6%AE%B5%E9%9A%8E"><i class="fa fa-link"></i></a>「そろそろテストを書かなきゃ」と思い始めた段階</h2>

<p>モジュール化やオブジェクト指向プログラミングをGo言語でできるようになってきて、一ファイルの一枚岩コードから脱却していました。テストも書きやすい状態になっていたので、単体テストのやり方について学びました。また、切り出したコードをオープンソースとして公開したり、継続的インテグレーションのやり方について学びました。</p>

<p>2013-12-27 <a href="http://qiita.com/suin/items/71f28f06e7a49414cc93" id="reference-f7272097c0e210563d1e">Go言語: 単体テストの始め方！Gospelを使ってBDDをやってみよう</a><br>
2014-01-06 <a href="http://qiita.com/suin/items/850b39625c92437d2362" id="reference-e44e3bd070ee24c3586f">Go言語：単体テストを複数のパッケージに対して実行する</a><br>
2014-01-08 <a href="http://qiita.com/suin/items/1237f210ef9e81b6475d" id="reference-ee666565656ade437a10">Go言語:自分のライブラリをGitHubで公開する方法+drone.ioで継続的インテグレーション</a></p>

<h1>
<span id="マスコット-gopher" class="fragment"></span><a href="#%E3%83%9E%E3%82%B9%E3%82%B3%E3%83%83%E3%83%88-gopher"><i class="fa fa-link"></i></a>マスコット Gopher</h1>

<p>このかわいいマスコットは、Go言語のマスコットです。Gopherと言います。日本語ではホリネズミというそうです。</p>

<p></p>Gopherのフィギュア

<p><a href="https://camo.qiitausercontent.com/961175a8a44f3f9c5bec7e5f40e5000924b14855/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3838392f33306335353061642d613064612d623638392d386439382d6236326137373539663135362e6a706567" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/961175a8a44f3f9c5bec7e5f40e5000924b14855/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3838392f33306335353061642d613064612d623638392d386439382d6236326137373539663135362e6a706567" alt="IMAG0129.jpg" title="IMAG0129.jpg" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/889/30c550ad-a0da-b689-8d98-b62a7759f156.jpeg"></a><br>
</p>

<h1>
<span id="使ってみて気づいたgo言語の魅力" class="fragment"></span><a href="#%E4%BD%BF%E3%81%A3%E3%81%A6%E3%81%BF%E3%81%A6%E6%B0%97%E3%81%A5%E3%81%84%E3%81%9Fgo%E8%A8%80%E8%AA%9E%E3%81%AE%E9%AD%85%E5%8A%9B"><i class="fa fa-link"></i></a>使ってみて気づいたGo言語の魅力</h1>

<p>Goを始めて3日目たったころにGoの魅力を感じ始めました。下記はそのときに書いた感想です。</p>

<blockquote>
<ul>
<li>クロスコンパイルが超カンタン。Macで開発しててもLinux、Windows用のバイナリが作れる</li>
<li>コンパイル時にポカミスが洗い出される。動的言語にはない安心感</li>
<li>まるでスクリプト言語を書いてる感覚。いつコンパイルしてるの? 型推論すごすぎ!</li>
<li>並行処理たったそれだけでできるの!?</li>
<li>ビルドすると一つの実行形式バイナリファイルになる! このポータビリティは気持ちいい</li>
<li>パッケージ管理システムがビルトインなので、"import github.com/user/project" って書くだけでパッケージがすぐ使える! 神!</li>
<li>defer。finallyがない言語はやってらんないと思ってたけど、deferのほうがいいじゃん!</li>
<li>どんな汚いコードを書いてもGoが整頓(format)してくれる。コーディング規約じゃなくて、自動フォーマットでコードの個人差を吸収するほうが健全な気がしてきた</li>
<li>ドキュメントがしっかりしてる。</li>
<li>タブインデントがデフォ! 俺得</li>
</ul>
</blockquote>

<h1>
<span id="go言語はこれからどこで役立つ" class="fragment"></span><a href="#go%E8%A8%80%E8%AA%9E%E3%81%AF%E3%81%93%E3%82%8C%E3%81%8B%E3%82%89%E3%81%A9%E3%81%93%E3%81%A7%E5%BD%B9%E7%AB%8B%E3%81%A4"><i class="fa fa-link"></i></a>Go言語はこれからどこで役立つ?</h1>

<p>DevOpsやImmutable Infrastructureなどインフラ構築では今後欠かせなくなりそうな <a href="https://www.docker.io/" rel="nofollow noopener" target="_blank">Docker</a>、<a href="http://www.packer.io/" rel="nofollow noopener" target="_blank">Packer</a>、<a href="http://www.serfdom.io/" rel="nofollow noopener" target="_blank">Serf</a>といったオープンソースはGoで書かれています。これらのプロダクトは既に注目されていますが、今後ますます標準的なものになっていくだろうと予想します。そうした中でDevOpsを中心にGoで書かれるプロダクトも増えていくのではないでしょうか。</p>

<p></p>Go言語のトレンド <a href="http://www.google.com/trends/explore#q=golang&amp;date=1%2F2009%2061m&amp;cmpt=q" rel="nofollow noopener" target="_blank">Google Trands</a> より

<p><a href="https://camo.qiitausercontent.com/9e42c484c8eb315b25790ba1c63b738c45544f8d/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3838392f65663530336230662d333661652d356238372d323966632d3037376639313531313533382e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/9e42c484c8eb315b25790ba1c63b738c45544f8d/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3838392f65663530336230662d333661652d356238372d323966632d3037376639313531313533382e706e67" alt="Screen Shot 2014-01-11 at 22.57.11.png" title="Screen Shot 2014-01-11 at 22.57.11.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/889/ef503b0f-36ae-5b87-29fc-077f91511538.png"></a><br>
</p>

<h1>
<span id="go言語を学んで変わったこと" class="fragment"></span><a href="#go%E8%A8%80%E8%AA%9E%E3%82%92%E5%AD%A6%E3%82%93%E3%81%A7%E5%A4%89%E3%82%8F%E3%81%A3%E3%81%9F%E3%81%93%E3%81%A8"><i class="fa fa-link"></i></a>Go言語を学んで変わったこと</h1>

<p>僕は15歳から22歳までずっと趣味のアマチュアプログラマでした。当時は好きなコードを好きなように書いていて、ストレスフリーでコーディングそのものが楽しいと感じていました。</p>

<p>趣味のコーディングと業務のコーディングの決定的な違いは、「品質に責任を負うかどうか」という点だと思います。品質を担保するために、ドメイン駆動設計やDevOps、テスト駆動開発、リーンソフトウェア開発、オブジェクト指向、アジャイル、デザインパターン、継続的デリバリーといった言語を超えた上位レイヤにばかり注目していて、コーディングは単なる作業になっていました。</p>

<p>Goは「プログラミングは楽しくあるべき」という考えから生まれた言語らしいです。その思想はいろんなかたちで現れてて、書けるようになればなるほど楽しくなる言語だと思います。ひさしぶりにコーディングそのものの「楽しさ」を思い出すことができました。</p>

<hr>

<p>もしGoをやっていて困ったときは、suinがチャットで相談に乗ります。もちろん、無償です(๑•̀ㅂ•́)و✧ <a href="https://help.suin.io/" rel="nofollow noopener" target="_blank">suinのプログラミング相談室</a></p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1" style="height:150px;">
<tr>
	<td rowspan="3">13位</td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="thumb-up-120px.png" /></i>1509</kbd>
		<a target="_blank" href="https://qiita.com/appwatcher/items/07a3babcb9b6cefb307e">iOSの開発をする上で絶対に使うべき！外せない！webサービス、開発ツール集</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2014-02-19<br />18:08:50</center>
	</td>
	<td style="width:200px;">
		<!--投稿者-->
		<center>
			@<a href="user/37731.html">appwatcher</a>(60件の記事)<br />(フリーランス 所属)<br><img width="80" height="80" src="https://pbs.twimg.com/profile_images/550671854591954946/pM9bAKf0_normal.jpeg">
		</center>
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Objective-C]</b> <b>[Xcode]</b> <b>[iOS]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<!--
		<div style="width:350px;height:150px;overflow:scroll;">%s</div>
		-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>by <a href="/mixiappwchr" class="user-mention js-hovercard" title="mixiappwchr" data-hovercard-target-type="user" data-hovercard-target-name="mixiappwchr">@mixiappwchr</a></p>

<p>iOSで開発する上で見ておくべきサービスやツールをまとめてみました。<br>
ほかにもたくさんあると思いますが、基本的なやつを集めました。</p>

<h2>
<span id="アプリ配布" class="fragment"></span><a href="#%E3%82%A2%E3%83%97%E3%83%AA%E9%85%8D%E5%B8%83"><i class="fa fa-link"></i></a>アプリ配布</h2>

<p>depolygate</p>

<p><a href="https://deploygate.com/?locale=ja" class="autolink" rel="nofollow noopener" target="_blank">https://deploygate.com/?locale=ja</a><br>
<a href="https://camo.qiitausercontent.com/7535ffac988d1ee099a10e37738b128cc8818b8d/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f33373733312f32376238663665642d633337632d303565372d643734632d3831653934633938303661362e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/7535ffac988d1ee099a10e37738b128cc8818b8d/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f33373733312f32376238663665642d633337632d303565372d643734632d3831653934633938303661362e706e67" alt="2_120.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/37731/27b8f6ed-c37c-05e7-d74c-81e94c9806a6.png"></a></p>

<p>旧TestFlightがオワコンのため、今ではDeployGateを使うしかありません！</p>

<p><a href="http://qiita.com/appwatcher/items/632460e15fbdb81b7a71" id="reference-b2c343cfd10a7e3eb51c">まだTestFlight使ってたの？急げ！終了目前のTestFlightから,今すぐにiOSもDeployGateに移行しよう！移行パターンも紹介するよ。</a></p>

<h2>
<span id="ci-" class="fragment"></span><a href="#ci-"><i class="fa fa-link"></i></a>CI </h2>

<p>Circle CI<br>
<a href="https://circleci.com/" class="autolink" rel="nofollow noopener" target="_blank">https://circleci.com/</a><br>
<a href="https://camo.qiitausercontent.com/02e577229d7388de4b7c6fabaadcc3c3bb9f7263/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f33373733312f65656365663331382d616333612d643235382d613065352d3034656133643538646564332e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/02e577229d7388de4b7c6fabaadcc3c3bb9f7263/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f33373733312f65656365663331382d616333612d643235382d613065352d3034656133643538646564332e706e67" alt="full2.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/37731/eecef318-ac3a-d258-a0e5-04ea3d58ded3.png"></a></p>

<p>iOS対応されアプリもクラウドでCI</p>

<h2>
<span id="クラッシュログ" class="fragment"></span><a href="#%E3%82%AF%E3%83%A9%E3%83%83%E3%82%B7%E3%83%A5%E3%83%AD%E3%82%B0"><i class="fa fa-link"></i></a>クラッシュログ</h2>

<p>Crittercism<br>
<a href="https://www.crittercism.com/" class="autolink" rel="nofollow noopener" target="_blank">https://www.crittercism.com/</a><br>
<a href="https://camo.qiitausercontent.com/530ffbd1b05697b79a01ed7852655286b4637e29/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f33373733312f35363266393863342d666666632d323334632d373637612d3364373534333762323633302e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/530ffbd1b05697b79a01ed7852655286b4637e29/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f33373733312f35363266393863342d666666632d323334632d373637612d3364373534333762323633302e706e67" alt="3_120.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/37731/562f98c4-fffc-234c-767a-3d75437b2630.png"></a></p>

<h2>
<span id="ユーザービリティテスト" class="fragment"></span><a href="#%E3%83%A6%E3%83%BC%E3%82%B6%E3%83%BC%E3%83%93%E3%83%AA%E3%83%86%E3%82%A3%E3%83%86%E3%82%B9%E3%83%88"><i class="fa fa-link"></i></a>ユーザービリティテスト</h2>

<p>Repro<br>
<a href="https://repro.io/" class="autolink" rel="nofollow noopener" target="_blank">https://repro.io/</a><br>
<a href="https://camo.qiitausercontent.com/8701fe1f5c201c4d093bc32e434a1d79384a57a2/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f33373733312f34333039343034662d363936662d363435382d373135362d6564653562393835386535342e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/8701fe1f5c201c4d093bc32e434a1d79384a57a2/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f33373733312f34333039343034662d363936662d363435382d373135362d6564653562393835386535342e706e67" alt="_400スクリーンショット 2014-09-19 9.03.58.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/37731/4309404f-696f-6458-7156-ede5b9858e54.png"></a></p>

<p>リモートでユーザーの行動をアプリの実際の画面や操作しているユーザーの表情、音声まで録画してアップロード、解析できるサービスです</p>

<p>バグに負けない。</p>

<h2>
<span id="ライブラリ管理" class="fragment"></span><a href="#%E3%83%A9%E3%82%A4%E3%83%96%E3%83%A9%E3%83%AA%E7%AE%A1%E7%90%86"><i class="fa fa-link"></i></a>ライブラリ管理</h2>

<p>cocoapods<br>
<a href="http://cocoapods.org/" class="autolink" rel="nofollow noopener" target="_blank">http://cocoapods.org/</a><br>
<a href="https://camo.qiitausercontent.com/12393f67a7af16f388c47727c418000cd0880b9f/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f33373733312f39386430623935372d613832652d336239302d343039342d3134663531613064626432612e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/12393f67a7af16f388c47727c418000cd0880b9f/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f33373733312f39386430623935372d613832652d336239302d343039342d3134663531613064626432612e706e67" alt="4_120.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/37731/98d0b957-a82e-3b90-4094-14f51a0dbd2a.png"></a><br>
ないともう無理です。</p>

<p>cocoapodsの検索、人気順などのサイトも<br>
<a href="http://cocoapods.wantedly.com/" class="autolink" rel="nofollow noopener" target="_blank">http://cocoapods.wantedly.com/</a><br>
<a href="https://camo.qiitausercontent.com/de5a3fa7b170ff6130c9790ceac025e51600942a/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f33373733312f30396630346561632d336336642d316335622d323339662d6165653766353764623030622e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/de5a3fa7b170ff6130c9790ceac025e51600942a/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f33373733312f30396630346561632d336336642d316335622d323339662d6165653766353764623030622e706e67" alt="5_120.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/37731/09f04eac-3c6d-1c5b-239f-aee7f57db00b.png"></a></p>

<p>UIライブラリ集</p>

<hr>

<p>cocoacontrols<br>
<a href="https://www.cocoacontrols.com/" class="autolink" rel="nofollow noopener" target="_blank">https://www.cocoacontrols.com/</a><br>
<a href="https://camo.qiitausercontent.com/ea8d568d2a5a4b446c30fa18302cbc3dc090bda4/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f33373733312f37643361646534622d363562622d653331612d663263622d6337383736313239303237342e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/ea8d568d2a5a4b446c30fa18302cbc3dc090bda4/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f33373733312f37643361646534622d363562622d653331612d663263622d6337383736313239303237342e706e67" alt="6_120.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/37731/7d3ade4b-65bb-e31a-f2cb-c78761290274.png"></a></p>

<p>ちょっとしたときに使えるものがあったりします。<br>
実装の参考にも</p>

<h2>
<span id="アプリストア解析" class="fragment"></span><a href="#%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B9%E3%83%88%E3%82%A2%E8%A7%A3%E6%9E%90"><i class="fa fa-link"></i></a>アプリストア解析</h2>

<p>appannie<br>
<a href="http://www.appannie.com/" class="autolink" rel="nofollow noopener" target="_blank">http://www.appannie.com/</a><br>
<a href="https://camo.qiitausercontent.com/47861dd9599f83db6909dfdfc906363f32a1857e/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f33373733312f32343966303337342d346339662d653738352d616237632d3938663939353435373434322e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/47861dd9599f83db6909dfdfc906363f32a1857e/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f33373733312f32343966303337342d346339662d653738352d616237632d3938663939353435373434322e706e67" alt="7_120.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/37731/249f0374-4c9f-e785-ab7c-98f995457442.png"></a></p>

<p>自分のアプリの動向や海外ではやっているアプリの情報なども確認できますね。</p>

<h2>
<span id="アプリ解析" class="fragment"></span><a href="#%E3%82%A2%E3%83%97%E3%83%AA%E8%A7%A3%E6%9E%90"><i class="fa fa-link"></i></a>アプリ解析</h2>

<p>Google Analytics<br>
<a href="http://www.google.co.jp/intl/ja/analytics/" class="autolink" rel="nofollow noopener" target="_blank">http://www.google.co.jp/intl/ja/analytics/</a><br>
<a href="https://camo.qiitausercontent.com/7b7dc625474800f4edf8a22e922cd0c0dd23735b/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f33373733312f35393365626633382d306430612d623263392d666239362d6363383835366434616165322e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/7b7dc625474800f4edf8a22e922cd0c0dd23735b/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f33373733312f35393365626633382d306430612d623263392d666239362d6363383835366434616165322e706e67" alt="8_120.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/37731/593ebf38-0d0a-b2c9-fb96-cc8856d4aae2.png"></a></p>

<p>Flurry<br>
<a href="http://www.flurry.com/" class="autolink" rel="nofollow noopener" target="_blank">http://www.flurry.com/</a><br>
<a href="https://camo.qiitausercontent.com/afd7721d798dc305d75942a7ade7ecccabe7511c/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f33373733312f36323335373161652d623131342d636662392d633663342d3636663565326534346365662e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/afd7721d798dc305d75942a7ade7ecccabe7511c/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f33373733312f36323335373161652d623131342d636662392d633663342d3636663565326534346365662e706e67" alt="9_120.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/37731/623571ae-b114-cfb9-c6c4-66f5e2e44cef.png"></a></p>

<p>Google analyticsにない情報もあり、こっちを使うのもあり</p>

<h2>
<span id="マネタイズ" class="fragment"></span><a href="#%E3%83%9E%E3%83%8D%E3%82%BF%E3%82%A4%E3%82%BA"><i class="fa fa-link"></i></a>マネタイズ</h2>

<p>数が多すぎるので２つだけ。<br>
Admob<br>
<a href="http://www.google.co.jp/ads/admob/" class="autolink" rel="nofollow noopener" target="_blank">http://www.google.co.jp/ads/admob/</a><br>
<a href="https://camo.qiitausercontent.com/abf7f619ca5367705a1f01876a9eeb4dfae5ec84/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f33373733312f62663437636533622d626536322d653432642d313836362d6166313035323663346562632e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/abf7f619ca5367705a1f01876a9eeb4dfae5ec84/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f33373733312f62663437636533622d626536322d653432642d313836362d6166313035323663346562632e706e67" alt="11_120.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/37731/bf47ce3b-be62-e42d-1866-af10526c4ebc.png"></a></p>

<p>nend<br>
<a href="http://nend.net/" class="autolink" rel="nofollow noopener" target="_blank">http://nend.net/</a><br>
<a href="https://camo.qiitausercontent.com/8726ac8af8c160005f37ad7e6c7b9304dd69383f/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f33373733312f64613239326365312d353064392d396261352d346466662d3235346536633734346335332e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/8726ac8af8c160005f37ad7e6c7b9304dd69383f/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f33373733312f64613239326365312d353064392d396261352d346466662d3235346536633734346335332e706e67" alt="12_120.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/37731/da292ce1-50d9-9ba5-4dff-254e6c744c53.png"></a></p>

<p>日本だとnendが良さそうですね。</p>

<h2>
<span id="baas" class="fragment"></span><a href="#baas"><i class="fa fa-link"></i></a>Baas</h2>

<p>parse<br>
<a href="https://parse.com" class="autolink" rel="nofollow noopener" target="_blank">https://parse.com</a><br>
<a href="https://camo.qiitausercontent.com/82c4a7a5fe2b58d66ff3b28f03f1808c29ea25a2/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f33373733312f66366239373463612d373635632d343739342d376165352d3337393939343361303638622e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/82c4a7a5fe2b58d66ff3b28f03f1808c29ea25a2/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f33373733312f66366239373463612d373635632d343739342d376165352d3337393939343361303638622e706e67" alt="13_120.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/37731/f6b974ca-765c-4794-7ae5-3799943a068b.png"></a></p>

<p>pushの部分だけでも便利ですね。</p>

<p>mobile backend starter<br>
<a href="https://developers.google.com/cloud/samples/mbs/" class="autolink" rel="nofollow noopener" target="_blank">https://developers.google.com/cloud/samples/mbs/</a><br>
<a href="https://camo.qiitausercontent.com/9fcf9e3d365f0d6a61b155ddc0eed324dfd2259e/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f33373733312f65633231326532312d323033632d396666632d363961652d3863306338643138383231312e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/9fcf9e3d365f0d6a61b155ddc0eed324dfd2259e/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f33373733312f65633231326532312d323033632d396666632d363961652d3863306338643138383231312e706e67" alt="14_120.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/37731/ec212e21-203c-9ffc-69ae-8c0c8d188211.png"></a></p>

<p>google さんのやつや</p>

<p>aws sns<br>
<a href="http://aws.amazon.com/jp/sns/" class="autolink" rel="nofollow noopener" target="_blank">http://aws.amazon.com/jp/sns/</a><br>
<a href="https://camo.qiitausercontent.com/7ec88e7ce4e44f32ae432fb88f6e66c7f6736662/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f33373733312f66336463623031352d303731372d663961632d616262332d6363313433333866666166382e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/7ec88e7ce4e44f32ae432fb88f6e66c7f6736662/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f33373733312f66336463623031352d303731372d663961632d616262332d6363313433333866666166382e706e67" alt="15_120.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/37731/f3dcb015-0717-f9ac-abb3-cc14338ffaf8.png"></a></p>

<p>amazonさんのやつ</p>

<h2>
<span id="uiuxのネタ" class="fragment"></span><a href="#uiux%E3%81%AE%E3%83%8D%E3%82%BF"><i class="fa fa-link"></i></a>UI/UXのネタ</h2>

<p>UI大事です。</p>

<p>dribbble<br>
<a href="http://dribbble.com/" class="autolink" rel="nofollow noopener" target="_blank">http://dribbble.com/</a><br>
<a href="https://camo.qiitausercontent.com/e2232618e49df77e251637d80ba50dd17ae2cdbb/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f33373733312f37393631343534392d373166302d343062662d656162322d3733613035336165393036642e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/e2232618e49df77e251637d80ba50dd17ae2cdbb/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f33373733312f37393631343534392d373166302d343062662d656162322d3733613035336165393036642e706e67" alt="16_120.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/37731/79614549-71f0-40bf-eab2-73a053ae906d.png"></a></p>

<p>pinterest<br>
<a href="http://jp.pinterest.com/" class="autolink" rel="nofollow noopener" target="_blank">http://jp.pinterest.com/</a><br>
<a href="https://camo.qiitausercontent.com/262acd11ed84f7b078869faff049cfd93aba45df/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f33373733312f34656630356639642d623836352d313039652d313865612d6530323333373435363665392e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/262acd11ed84f7b078869faff049cfd93aba45df/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f33373733312f34656630356639642d623836352d313039652d313865612d6530323333373435363665392e706e67" alt="17_120.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/37731/4ef05f9d-b865-109e-18ea-e023374566e9.png"></a><br>
pinterstもUI/UXのボードなどみると、インスピレーションが色々わきます。</p>

<p>sixux<br>
<a href="http://sixux.com" class="autolink" rel="nofollow noopener" target="_blank">http://sixux.com</a><br>
<a href="https://camo.qiitausercontent.com/36acd9b02d3b1f17cf899db3380e12d6b61b1b84/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f33373733312f61383462333832392d656336662d393338342d646331372d3663373739333437393162362e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/36acd9b02d3b1f17cf899db3380e12d6b61b1b84/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f33373733312f61383462333832392d656336662d393338342d646331372d3663373739333437393162362e706e67" alt="スクリーンショット 2014-02-20 11.04.14_240.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/37731/a84b3829-ec6f-9384-dc17-6c77934791b6.png"></a></p>

<p>UIのアニメーション、インタラクションの参考に非常になりますね。iOSは細かい部分のインタラクションがキモです</p>

<p>capptivate.co<br>
<a href="http://capptivate.co/" class="autolink" rel="nofollow noopener" target="_blank">http://capptivate.co/</a><br>
<a href="https://camo.qiitausercontent.com/fb4b2ead763c975e909e9a5a1cead2125bbdce57/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f33373733312f36643462303832382d313465662d323133372d663034632d3062316265616262626535652e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/fb4b2ead763c975e909e9a5a1cead2125bbdce57/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f33373733312f36643462303832382d313465662d323133372d663034632d3062316265616262626535652e706e67" alt="スクリーンショット 2014-02-21 9.02.06_120.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/37731/6d4b0828-14ef-2137-f04c-0b1beabbbe5e.png"></a><br>
こちらはUIコンポーネントやトランジッションパターンごとにきれいに分類されているため見やすいです</p>

<h2>
<span id="プログラミング情報源" class="fragment"></span><a href="#%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0%E6%83%85%E5%A0%B1%E6%BA%90"><i class="fa fa-link"></i></a>プログラミング情報源</h2>

<p>stackoverflow<br>
<a href="http://stackoverflow.com/" class="autolink" rel="nofollow noopener" target="_blank">http://stackoverflow.com/</a><br>
<a href="https://camo.qiitausercontent.com/c206559f0e6f0a4e7463a515300bb22bfec4e28c/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f33373733312f61333965313935612d633663382d653033342d353332622d6331386663663531306338372e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/c206559f0e6f0a4e7463a515300bb22bfec4e28c/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f33373733312f61333965313935612d633663382d653033342d353332622d6331386663663531306338372e706e67" alt="18_120.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/37731/a39e195a-c6c8-e034-532b-c18fcf510c87.png"></a></p>

<p>だいたいのことはここに詰まってます。</p>

<p>qiita<br>
<a href="http://qiita.com/" class="autolink">http://qiita.com/</a><br>
<a href="https://camo.qiitausercontent.com/3ddfdef5de9e5d215a20d1b643576001e0406578/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f33373733312f30646630343732352d363363662d656262332d313230372d3965363437633935393161372e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/3ddfdef5de9e5d215a20d1b643576001e0406578/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f33373733312f30646630343732352d363363662d656262332d313230372d3965363437633935393161372e706e67" alt="19_120.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/37731/0df04725-63cf-ebb3-1207-9e647c9591a7.png"></a></p>

<p>ここ！</p>

<h2>
<span id="uiモックアップ" class="fragment"></span><a href="#ui%E3%83%A2%E3%83%83%E3%82%AF%E3%82%A2%E3%83%83%E3%83%97"><i class="fa fa-link"></i></a>UIモックアップ</h2>

<h2>
<span id="ツール" class="fragment"></span><a href="#%E3%83%84%E3%83%BC%E3%83%AB"><i class="fa fa-link"></i></a>ツール</h2>

<p>有料ですが、便利</p>

<p>reveal<br>
<a href="http://revealapp.com/" class="autolink" rel="nofollow noopener" target="_blank">http://revealapp.com/</a><br>
<a href="https://camo.qiitausercontent.com/5e5d0a48c3451a58c8237beac75c39959ab659a6/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f33373733312f35373231366335382d643764662d353964652d636662372d6135636363306539373033352e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/5e5d0a48c3451a58c8237beac75c39959ab659a6/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f33373733312f35373231366335382d643764662d353964652d636662372d6135636363306539373033352e706e67" alt="20_120.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/37731/57216c58-d7df-59de-cfb7-a5ccc0e97035.png"></a></p>

<p>webのようにUIの解析ができるツール</p>

<p>SparkInspector<br>
<a href="http://sparkinspector.com/" class="autolink" rel="nofollow noopener" target="_blank">http://sparkinspector.com/</a><br>
<a href="https://camo.qiitausercontent.com/1a84bd68e59067810f10ba8c574254f2c33769a9/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f33373733312f35373866323933382d643137642d393039362d653133632d6463643933383132653534622e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/1a84bd68e59067810f10ba8c574254f2c33769a9/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f33373733312f35373866323933382d643137642d393039362d653133632d6463643933383132653534622e706e67" alt="スクリーンショット 2014-02-21 8.44.53_120.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/37731/578f2938-d17d-9096-e13c-dcd93812e54b.png"></a><br>
Revealに類似しているツールでSparkInspectorという製品を使っています。ビューとNotificationを検査することが出来てます。後者が意外と便利。<a href="http://qiita.com/key">keyさんより</a></p>

<p>Reflector<br>
<a href="http://www.airsquirrels.com/reflector/" class="autolink" rel="nofollow noopener" target="_blank">http://www.airsquirrels.com/reflector/</a><br>
<a href="https://camo.qiitausercontent.com/8da6e40992c27e7a20145480931664ff6a03518c/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f33373733312f66383661623737342d356262632d643966642d393565632d6635363361393935656531642e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/8da6e40992c27e7a20145480931664ff6a03518c/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f33373733312f66383661623737342d356262632d643966642d393565632d6635363361393935656531642e706e67" alt="21_120.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/37731/f86ab774-5bbc-d9fd-95ec-f563a995ee1d.png"></a></p>

<p>airplayで端末を表示。アプリのレビューに便利。</p>

<p>Sketch<br>
<a href="http://www.bohemiancoding.com/sketch/" class="autolink" rel="nofollow noopener" target="_blank">http://www.bohemiancoding.com/sketch/</a><br>
<a href="https://camo.qiitausercontent.com/479c63a03263e61a728bbd7e1f4c5d900ba2fc27/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f33373733312f30643633353734382d623164342d303431312d393238652d6364626266646135356331622e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/479c63a03263e61a728bbd7e1f4c5d900ba2fc27/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f33373733312f30643633353734382d623164342d303431312d393238652d6364626266646135356331622e706e67" alt="スクリーンショット 2014-02-21 8.48.03_120.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/37731/0d635748-b1d4-0411-928e-cdbbfda55c1b.png"></a><br>
AppStoreで購入できるデザインツールで、iOSデバイスに作成中のデザインをライブプレビューできます。デザイナ寄りのツールですが、UIパーツのサイズ感がわかるので重宝しています。<a href="http://qiita.com/key">keyさんより</a></p>

<p>MAKEAPPICON<br>
<a href="http://www.makeappicon.com/" class="autolink" rel="nofollow noopener" target="_blank">http://www.makeappicon.com/</a><br>
<a href="https://camo.qiitausercontent.com/c9841ea85256bd9e229babf9f053f7e4b990a2f7/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f33373733312f30616134653164662d343532642d303632652d393538322d3333643762646261333261642e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/c9841ea85256bd9e229babf9f053f7e4b990a2f7/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f33373733312f30616134653164662d343532642d303632652d393538322d3333643762646261333261642e706e67" alt="スクリーンショット 2014-02-21 8.50.00_120.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/37731/0aa4e1df-452d-062e-9582-33d7bdba32ad.png"></a><br>
1024x1024 の画像から iOS7の120xのアイコンを作ってくれるサイトです.<a href="http://qiita.com/u16suzu@github">u16suzu@githubさんより</a></p>

<p>ほかに役に立つものがあればぜひ教えてください！</p>

<h5>
<span id="appwchr-post" class="fragment"></span><a href="#appwchr-post"><i class="fa fa-link"></i></a>appwchr post</h5>

<hr>

<p><a href="http://qiita.com/appwatcher/items/00faadbf02f691186a54" id="reference-f43471ce5499a0aabd67">あんなすごいエンジニアともであえるかも？？Qiitaユーザーが集まるSlack Teamを作ってみたよ！</a></p>

<p><a href="http://qiita.com/appwatcher/items/6c0280cda9c4c8b3c65f" id="reference-6bac87beab5b551ad1e2">goからiOSまで一人でアプリ開発をしてたらいつの間にかマインクラフトエンジニアになった話</a></p>

<p><a href="http://qiita.com/appwatcher/items/49807e72d9600db7196d" id="reference-431b70b4ef66c7129456">API開発の効率化の架け橋！APIのStubサーバーを導入して,API開発に効率化、スピード化、柔軟性を手に入れよう！</a></p>

<p><a href="http://qiita.com/appwatcher/items/4a0dd09c393cc70d961a" id="reference-e6e9a4db4585f10bd30c">アプリエンジニアから見てAPI設計において気をつけてもらえるとうれしいこと</a></p>

<p><a href="http://qiita.com/appwatcher/items/4cdf39804d6e46ab7af5" id="reference-26894622874642018b5c">Goodbye... Jenkins... Jenkinsを卒業してお手軽CI! iOSもAndroidもCircle CIでアプリのCIを回そう</a></p>

<p><a href="http://qiita.com/appwatcher/items/632460e15fbdb81b7a71">まだTestFlight使ってたの？急げ！終了目前のTestFlightから,今すぐにiOSもDeployGateに移行しよう！移行パターンも紹介するよ。</a></p>

<p><a href="http://qiita.com/appwatcher/items/50295e82ab0095902aaa" id="reference-3b47216d6fd203dbf605">Swiftを使ってみて直面した闇。現時点で現場でSwiftを採用すべきかどうかの判断材料</a></p>

<p><a href="http://qiita.com/appwatcher/items/07a3babcb9b6cefb307e">iOSの開発をする上で絶対に使うべき！外せない！webサービス、開発ツール集【完全版】</a></p>

<p><a href="http://qiita.com/appwatcher/items/7491beffd7260b713542" id="reference-60f9a2c2d0d10ae38514">注目のiBeacomなどの波に乗り遅れないために！iOSのBluetooth開発を容易にするライブラリを書きました。</a></p>

<p><a href="http://qiita.com/appwatcher/items/f0024fe2ac34da345f04" id="reference-e2da4aab196d946cd773">まだまだあった！iOSの開発を劇的に改善する最新のwebサービス、開発ツール集１</a></p>

<p><a href="http://qiita.com/appwatcher/items/c15d7311e71b4c2b77f1" id="reference-20c6314ffb5dfd301119">さらに快適なアプリ開発を！iOSの開発をもっと劇的に改善する最新のwebサービス、開発ツール集2</a></p>

<p><a href="http://qiita.com/appwatcher/items/259e8d13fff0547e90af" id="reference-854332b06b43f117d2f1">スパゲッティから脱出！iOS開発における遷移の問題をすっきり解決する便利ルーティングライブラリをご紹介</a></p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1" style="height:150px;">
<tr>
	<td rowspan="3">14位</td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="thumb-up-120px.png" /></i>1470</kbd>
		<a target="_blank" href="https://qiita.com/takeharu/items/9935ce476a17d6258e27">JavaScriptの「this」は「4種類」？？</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-04-09<br />21:57:39</center>
	</td>
	<td style="width:200px;">
		<!--投稿者-->
		<center>
			@<a href="user/10962.html">takeharu</a>(18件の記事)<br />(サイバーエージェント 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/10962/profile-images/1510984508">
		</center>
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[JavaScript]</b> <b>[Node.js]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<!--
		<div style="width:350px;height:150px;overflow:scroll;">%s</div>
		-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;">
<h1>
<span id="javascriptのthisは4種類" class="fragment"></span><a href="#javascript%E3%81%AEthis%E3%81%AF4%E7%A8%AE%E9%A1%9E"><i class="fa fa-link"></i></a>javascriptの「this」は「4種類」？？</h1>

<p>この記事ではベースとなる４種類の「this」を紹介します。</p>

<p>実際は４種類ではないのですが、<br>
このベースの４種類を理解できれば他もすぐに理解できます。</p>

<h1>
<span id="thisの４種類のパターン" class="fragment"></span><a href="#this%E3%81%AE%EF%BC%94%E7%A8%AE%E9%A1%9E%E3%81%AE%E3%83%91%E3%82%BF%E3%83%BC%E3%83%B3"><i class="fa fa-link"></i></a>thisの４種類のパターン</h1>

<p>１：メソッド呼び出しパターン<br>
２：関数呼び出しパターン<br>
３：コンストラクタ呼び出しパターン<br>
４：apply,call呼び出しパターン</p>

<p>ここで重要なのは「呼び出し元」をみることです。<br>
なぜなら「呼び出し元」に「this」は左右されるからです。</p>

<h1>
<span id="メソッド呼び出しパターン" class="fragment"></span><a href="#%E3%83%A1%E3%82%BD%E3%83%83%E3%83%89%E5%91%BC%E3%81%B3%E5%87%BA%E3%81%97%E3%83%91%E3%82%BF%E3%83%BC%E3%83%B3"><i class="fa fa-link"></i></a>メソッド呼び出しパターン</h1>

<p>これはもう一番直感的にわかりやすいです。<br>
説明はいらないんじゃないかという感じなのですが、<br>
一応ソースを。。</p>

<div class="code-frame" data-lang="javascript">
<div class="code-lang"><span class="bold">メソッド呼び出しパターン</span></div>
<div class="highlight"><pre><span></span><span class="c1">//メソッド呼び出しパターン</span>
<span class="kd">var</span> <span class="nx">myObject</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">value</span><span class="o">:</span> <span class="mi">10</span><span class="p">,</span>
  <span class="nx">show</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">value</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="nx">myObject</span><span class="p">.</span><span class="nx">show</span><span class="p">();</span> <span class="c1">// 10</span>
</pre></div>
</div>

<p>かなり直感的ですね。<br>
thisにはmyObjectが入っています。</p>

<h1>
<span id="関数呼び出しパターン" class="fragment"></span><a href="#%E9%96%A2%E6%95%B0%E5%91%BC%E3%81%B3%E5%87%BA%E3%81%97%E3%83%91%E3%82%BF%E3%83%BC%E3%83%B3"><i class="fa fa-link"></i></a>関数呼び出しパターン</h1>

<p>関数とメソッドと二つの呼び方をしてるのが、<br>
ややこしく聞こえるかもしれません。</p>

<p>ただコードを見たらすぐに理解できます。</p>

<div class="code-frame" data-lang="javascript"><div class="highlight"><pre><span></span><span class="nx">myObject</span><span class="p">.</span><span class="nx">show</span><span class="p">();</span> <span class="c1">// メソッド呼び出し</span>
<span class="nx">show</span><span class="p">();</span> <span class="c1">// 関数呼び出し</span>
</pre></div></div>

<p>「.」で呼ばれているかどうかの違いのみですね。</p>

<p>では関数呼び出しパターンの「this」はいかに…</p>

<div class="code-frame" data-lang="javascript">
<div class="code-lang"><span class="bold">関数呼び出しパターン</span></div>
<div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">show</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="c1">// 注１</span>
<span class="p">}</span>
<span class="nx">show</span><span class="p">();</span> <span class="c1">// thisはグローバルオブジェクトをさす</span>
</pre></div>
</div>

<p>この場合は「this」は「グローバルオブジェクト」を指してしまいます。<br>
なので、注１の「value」は「グローバル変数」となります。</p>

<p>これを抑えておくのがポイントです。<br>
次の例を考えてみましょう。</p>

<div class="code-frame" data-lang="javascript">
<div class="code-lang"><span class="bold">関数呼び出しパターン</span></div>
<div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">myObject</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">value</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
  <span class="nx">show</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">value</span><span class="p">);</span> <span class="c1">// 注１</span>

    <span class="kd">function</span> <span class="nx">show</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">value</span><span class="p">);</span> <span class="c1">// 注２</span>
    <span class="p">}</span>
    <span class="nx">show</span><span class="p">();</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="nx">myObject</span><span class="p">.</span><span class="nx">show</span><span class="p">();</span>
</pre></div>
</div>

<p>ここで注１と注２の答えはわかりましたか？</p>

<p>注１の「this.value」は「１」<br>
注２の「this.value」は「undefind」</p>

<p>注１は一つ目のメソッド呼び出しパターンですね。<br>
注２が最初紛らわしいです。。</p>

<p>メソッド呼び出しの中で関数呼び出しされているので、<br>
あくまで注2の「this」はグローバルを指してしまいます。</p>

<p>メソッド内で関数呼び出しになっているっていうのが落とし穴ですね。<br>
でもこれも簡単に解決できます。</p>

<div class="code-frame" data-lang="javascript">
<div class="code-lang"><span class="bold">関数呼び出しパターン</span></div>
<div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">myObject</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">value</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
  <span class="nx">show</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">self</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">self</span><span class="p">.</span><span class="nx">value</span><span class="p">);</span> <span class="c1">// 1</span>

    <span class="kd">function</span> <span class="nx">show</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">self</span><span class="p">.</span><span class="nx">value</span><span class="p">);</span> <span class="c1">// 1</span>
    <span class="p">}</span>
    <span class="nx">show</span><span class="p">();</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="nx">myObject</span><span class="p">.</span><span class="nx">show</span><span class="p">();</span>
</pre></div>
</div>

<p>「this」を別の変数で持っておきます。この手法はよく使われます。<br>
慣用的に変数は「self」, 「that」, 「_this」のどれかが使われる事が多いです。</p>

<h1>
<span id="コンストラクタ呼び出しパターン" class="fragment"></span><a href="#%E3%82%B3%E3%83%B3%E3%82%B9%E3%83%88%E3%83%A9%E3%82%AF%E3%82%BF%E5%91%BC%E3%81%B3%E5%87%BA%E3%81%97%E3%83%91%E3%82%BF%E3%83%BC%E3%83%B3"><i class="fa fa-link"></i></a>コンストラクタ呼び出しパターン</h1>

<p>次はコンストラクタ呼び出しパターンです。</p>

<div class="code-frame" data-lang="javascript">
<div class="code-lang"><span class="bold">コンストラクタ呼び出しパターン</span></div>
<div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">MyObject</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">increment</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">value</span><span class="o">++</span><span class="p">;</span>
  <span class="p">};</span>
<span class="p">}</span>
<span class="kd">var</span> <span class="nx">myObject</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">MyObject</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">myObject</span><span class="p">.</span><span class="nx">value</span><span class="p">);</span> <span class="c1">// 0</span>

<span class="nx">myObject</span><span class="p">.</span><span class="nx">increment</span><span class="p">();</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">myObject</span><span class="p">.</span><span class="nx">value</span><span class="p">);</span> <span class="c1">// 1</span>
</pre></div>
</div>

<p>これもこれだけみるとわりと直感的ですね。</p>

<p>「new」をつけてインスタンス生成ってことですね。<br>
そしてその生成されるインスタンス自身が「this」にsetされます。</p>

<p>ただ気をつけたいのが、これはただの「関数」です。。</p>

<p>「new」をつけなかった場合,<br>
MyObject(0);</p>

<p>これは関数呼び出しなので、<br>
「this」はグローバルオブジェクトを指してしまいます。。</p>

<p>この場合はvalueとincrementは<br>
二つともグローバル変数として定義されることになります。</p>

<p>コンストラクタ呼び出しを期待する場合は、<br>
最初の文字を大きくするのが慣例ですので、この場合は「new」は必ずつけましょう！</p>

<h1>
<span id="apply-call呼び出しパターン" class="fragment"></span><a href="#apply-call%E5%91%BC%E3%81%B3%E5%87%BA%E3%81%97%E3%83%91%E3%82%BF%E3%83%BC%E3%83%B3"><i class="fa fa-link"></i></a>apply, call呼び出しパターン</h1>

<p>これは「this」を好き勝手に設定できますよっていうことです。<br>
ライブラリとかを自作するときは非常に重宝します。</p>

<div class="code-frame" data-lang="javascript">
<div class="code-lang"><span class="bold">apply,call呼び出しパターン</span></div>
<div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">myObject</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">value</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
  <span class="nx">show</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">value</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">yourObject</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">value</span><span class="o">:</span> <span class="mi">3</span>
<span class="p">};</span>

<span class="nx">myObject</span><span class="p">.</span><span class="nx">show</span><span class="p">();</span> <span class="c1">// 1</span>

<span class="nx">myObject</span><span class="p">.</span><span class="nx">show</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">yourObject</span><span class="p">);</span> <span class="c1">// 3</span>
<span class="nx">myObject</span><span class="p">.</span><span class="nx">show</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">yourObject</span><span class="p">);</span> <span class="c1">// 3</span>
</pre></div>
</div>

<p>「apply」と「call」を使うと「強制的にthisを束縛」できます。<br>
「apply」と「call」の第一引数は「this」にsetしたいオブジェクトです。</p>

<p>あれ？…じゃあ「apply」と「call」は何が違うのかって、<br>
それは第二引数以降の取り方が変わってきます。</p>

<div class="code-frame" data-lang="javascript">
<div class="code-lang"><span class="bold">apply,call呼び出しパターン</span></div>
<div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">myObject</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">add</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value1</span><span class="p">,</span> <span class="nx">value2</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">value</span> <span class="o">+</span> <span class="nx">value1</span> <span class="o">+</span> <span class="nx">value2</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">yourObject</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">value</span><span class="o">:</span> <span class="mi">3</span>
<span class="p">};</span>

<span class="nx">myObject</span><span class="p">.</span><span class="nx">add</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">yourObject</span><span class="p">,</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">10</span><span class="p">]);</span> <span class="c1">// 15</span>
<span class="nx">myObject</span><span class="p">.</span><span class="nx">add</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">yourObject</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">10</span><span class="p">);</span> <span class="c1">// 15</span>
</pre></div>
</div>

<p>「apply」は第二引数に配列をとり、配列の中身が引数として渡されます。<br>
「call」は直感的で、第二引数以降がそのまま渡されます。</p>

<p>二つとも第一引数は「this」で、その後の引数の取り方が違うだけです。</p>

<h1>
<span id="まとめ" class="fragment"></span><a href="#%E3%81%BE%E3%81%A8%E3%82%81"><i class="fa fa-link"></i></a>まとめ</h1>

<p>「呼び出し元」に気をつけろ！<br>
覚えるべきベースは４種類。</p>

<p>１：メソッド呼び出しパターン<br>
２：関数呼び出しパターン<br>
３：コンストラクタ呼び出しパターン<br>
４：apply,call呼び出しパターン</p>

<p>てな感じです。<br>
あっさりまとめたので、わからないところがあれば聞いてください♪</p>

<p>それからコンストラクタについて詳しく知りたい方はこちら<br>
<a href="http://qiita.com/items/010752b1427773558f7c">JavaScriptのクラス？コンストラクタ？</a></p>

<h1>
<span id="外部アカウント" class="fragment"></span><a href="#%E5%A4%96%E9%83%A8%E3%82%A2%E3%82%AB%E3%82%A6%E3%83%B3%E3%83%88"><i class="fa fa-link"></i></a>外部アカウント</h1>

<p>技術情報のみつぶやくアカウント作成しました。JavaScriptは最新情報も追っていきます。<br>
<a href="https://twitter.com/takeharumikami" rel="nofollow noopener" target="_blank">Twitterはこちら</a><br>
<a href="http://cloud.feedly.com/#subscription%2Ffeed%2Fhttp%3A%2F%2Fqiita.com%2Ftakeharu%2Ffeed" rel="nofollow noopener" target="_blank">Feedlyのフォローはこちら</a></p>

<h1>
<span id="おすすめの記事" class="fragment"></span><a href="#%E3%81%8A%E3%81%99%E3%81%99%E3%82%81%E3%81%AE%E8%A8%98%E4%BA%8B"><i class="fa fa-link"></i></a>おすすめの記事</h1>

<p>もういい時期です。そろそろ始めましょう。ECMAScript6。<br>
<a href="http://qiita.com/takeharu/items/cbbe017bbdd120015ca0" id="reference-7cd6421af341218ce3a1">もうはじめよう、ES6~ECMAScript6の基本構文まとめ(JavaScript)</a></p>

<p>JavaScriptはオブジェクト指向？プロトタイプベースのオブジェクト指向を学ぶなら。<br>
<a href="http://qiita.com/takeharu/items/809114f943208aaf55b3" id="reference-8fbfa3e044cb805ecb06">JavaScriptのプロトタイプからオブジェクト指向を学ぶ</a></p>

<p>JavaScriptでは関数はすべてクロージャ。<br>
<a href="http://qiita.com/takeharu/items/4975031faf6f7baf077a" id="reference-93f0edee5555e8539a14">そもそもクロージャって？JavaScriptでクロージャ入門</a></p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1" style="height:150px;">
<tr>
	<td rowspan="3">15位</td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="thumb-up-120px.png" /></i>1469</kbd>
		<a target="_blank" href="https://qiita.com/k-shogo/items/870b6d3939dd08da2de4">無料のSSL証明書StartSSLを活用する</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-10-16<br />11:17:52</center>
	</td>
	<td style="width:200px;">
		<!--投稿者-->
		<center>
			@<a href="user/29014.html">k-shogo</a>(19件の記事)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/29014/profile-images/1487495629">
		</center>
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[nginx]</b> <b>[SSL]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<!--
		<div style="width:350px;height:150px;overflow:scroll;">%s</div>
		-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;">
<h1>
<span id="背景" class="fragment"></span><a href="#%E8%83%8C%E6%99%AF"><i class="fa fa-link"></i></a>背景</h1>

<p>自前のサービスでhttps通信をサポートするには、SSL証明書が必要になります。<br><br>
自分で使用するだけなら、SSL証明書も自前で作成するいわゆるオレオレ証明書を用いても良いのですが、外部に公開するサービスの場合そうとも行きません。<br>
SSL証明書というと値段が高い印象がありましたが、<a href="https://www.startssl.com/" rel="nofollow noopener" target="_blank">StartSSL</a>というサービスで無料でSSL証明書の発行を受けられると言うことで試してみました。</p>

<h1>
<span id="startsslにユーザー登録する" class="fragment"></span><a href="#startssl%E3%81%AB%E3%83%A6%E3%83%BC%E3%82%B6%E3%83%BC%E7%99%BB%E9%8C%B2%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>StartSSLにユーザー登録する</h1>

<p>証明書の発行を行う前に、StartSSLにユーザー登録する必要があります。<br><br>
<a href="https://www.startssl.com/" rel="nofollow noopener" target="_blank">StartSSL</a>から、"StartSSL Free (Class1)"を選択します。</p>

<p><a href="https://camo.qiitausercontent.com/29b862d93c62b62a7168f9178d7388e9bed6fb8b/687474703a2f2f6b2d73686f676f2e6769746875622e696f2f696d616765732f323031332d31302d30372d73746172742d73736c2f30312e6a7067" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/29b862d93c62b62a7168f9178d7388e9bed6fb8b/687474703a2f2f6b2d73686f676f2e6769746875622e696f2f696d616765732f323031332d31302d30372d73746172742d73736c2f30312e6a7067" alt="01" data-canonical-src="http://k-shogo.github.io/images/2013-10-07-start-ssl/01.jpg"></a></p>

<p>Certificate Control Panelを選択。</p>

<p><a href="https://camo.qiitausercontent.com/105cecd09cc707726473910969ec2141dbb57939/687474703a2f2f6b2d73686f676f2e6769746875622e696f2f696d616765732f323031332d31302d30372d73746172742d73736c2f30322e6a7067" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/105cecd09cc707726473910969ec2141dbb57939/687474703a2f2f6b2d73686f676f2e6769746875622e696f2f696d616765732f323031332d31302d30372d73746172742d73736c2f30322e6a7067" alt="02" data-canonical-src="http://k-shogo.github.io/images/2013-10-07-start-ssl/02.jpg"></a></p>

<p>Sign-upに進みます。</p>

<p><a href="https://camo.qiitausercontent.com/6f72135ebab383525e2ddd02bc1a76c2c0d1cf65/687474703a2f2f6b2d73686f676f2e6769746875622e696f2f696d616765732f323031332d31302d30372d73746172742d73736c2f30332e6a7067" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/6f72135ebab383525e2ddd02bc1a76c2c0d1cf65/687474703a2f2f6b2d73686f676f2e6769746875622e696f2f696d616765732f323031332d31302d30372d73746172742d73736c2f30332e6a7067" alt="03" data-canonical-src="http://k-shogo.github.io/images/2013-10-07-start-ssl/03.jpg"></a></p>

<p>名前、住所、メールアドレスなど<br>
個人情報の登録を行います。</p>

<p><a href="https://camo.qiitausercontent.com/3d7560ca30f26d9f44112c3e9903980a2a3817ba/687474703a2f2f6b2d73686f676f2e6769746875622e696f2f696d616765732f323031332d31302d30372d73746172742d73736c2f30342e6a7067" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/3d7560ca30f26d9f44112c3e9903980a2a3817ba/687474703a2f2f6b2d73686f676f2e6769746875622e696f2f696d616765732f323031332d31302d30372d73746172742d73736c2f30342e6a7067" alt="04" data-canonical-src="http://k-shogo.github.io/images/2013-10-07-start-ssl/04.jpg"></a></p>

<p>登録したメールアドレスに本人確認のメールが届くので、受信したメールのauthentication codeを入力して登録を完了させます。<br>
この時、「もっと詳細な住所を教えて欲しい」と言う旨のメールが送られてくることがあります。<br>
その場合はStartSSLの担当者とメールをやりとりして登録を完了させましょう。</p>

<p><a href="https://camo.qiitausercontent.com/4de09e61db061bb30dfcd9408f04b95628872dfb/687474703a2f2f6b2d73686f676f2e6769746875622e696f2f696d616765732f323031332d31302d30372d73746172742d73736c2f30352e6a7067" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/4de09e61db061bb30dfcd9408f04b95628872dfb/687474703a2f2f6b2d73686f676f2e6769746875622e696f2f696d616765732f323031332d31302d30372d73746172742d73736c2f30352e6a7067" alt="05" data-canonical-src="http://k-shogo.github.io/images/2013-10-07-start-ssl/05.jpg"></a></p>

<p>登録を完了すると、StartSSLへのログイン用SSL証明書発行のためのURLが送られてきます。<br>
そのリンクからブラウザに証明書をインストールしましょう。<br>
暗号化セキュリティーレベルはデフォルトの2048（高）で良いと思います。<br>
この時にインストールした証明書が無いとStartSSLにログインできません。 <br>
他の端末や、ブラウザでアクセスする場合は証明書のエクスポートが必要になります。</p>

<p><a href="https://camo.qiitausercontent.com/a8ba603d88eca2fd1c40b4a8636922a7ed79bf5d/687474703a2f2f6b2d73686f676f2e6769746875622e696f2f696d616765732f323031332d31302d30372d73746172742d73736c2f30362e6a7067" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/a8ba603d88eca2fd1c40b4a8636922a7ed79bf5d/687474703a2f2f6b2d73686f676f2e6769746875622e696f2f696d616765732f323031332d31302d30372d73746172742d73736c2f30362e6a7067" alt="06" data-canonical-src="http://k-shogo.github.io/images/2013-10-07-start-ssl/06.jpg"></a></p>

<h1>
<span id="ドメインの認証" class="fragment"></span><a href="#%E3%83%89%E3%83%A1%E3%82%A4%E3%83%B3%E3%81%AE%E8%AA%8D%E8%A8%BC"><i class="fa fa-link"></i></a>ドメインの認証</h1>

<p>ユーザー登録が完了したら、次はドメインの認証です。<br>
Validations Wizardタブを選択します。</p>

<p><a href="https://camo.qiitausercontent.com/aeaaba7c4896bce9549cdcb2023c232ae6448333/687474703a2f2f6b2d73686f676f2e6769746875622e696f2f696d616765732f323031332d31302d30372d73746172742d73736c2f30372e6a7067" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/aeaaba7c4896bce9549cdcb2023c232ae6448333/687474703a2f2f6b2d73686f676f2e6769746875622e696f2f696d616765732f323031332d31302d30372d73746172742d73736c2f30372e6a7067" alt="07" data-canonical-src="http://k-shogo.github.io/images/2013-10-07-start-ssl/07.jpg"></a></p>

<p>証明書を発行したいドメインを登録します。</p>

<p><a href="https://camo.qiitausercontent.com/852a5e94956da58615c4860a7e2e609811f5e66c/687474703a2f2f6b2d73686f676f2e6769746875622e696f2f696d616765732f323031332d31302d30372d73746172742d73736c2f30382e6a7067" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/852a5e94956da58615c4860a7e2e609811f5e66c/687474703a2f2f6b2d73686f676f2e6769746875622e696f2f696d616765732f323031332d31302d30372d73746172742d73736c2f30382e6a7067" alt="08" data-canonical-src="http://k-shogo.github.io/images/2013-10-07-start-ssl/08.jpg"></a></p>

<p>自分が管理しているドメインであることを示すために、登録したドメインのpostmaster, hostmaster, webmasterなど、いずれかのメールアドレスでメールを受け取る必要があります。<br>
メールを受信できるように事前に設定しておきましょう。</p>

<p><a href="https://camo.qiitausercontent.com/c8a6ca8d3919945db6c3b2bca678d9ace802c79f/687474703a2f2f6b2d73686f676f2e6769746875622e696f2f696d616765732f323031332d31302d30372d73746172742d73736c2f30392e6a7067" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/c8a6ca8d3919945db6c3b2bca678d9ace802c79f/687474703a2f2f6b2d73686f676f2e6769746875622e696f2f696d616765732f323031332d31302d30372d73746172742d73736c2f30392e6a7067" alt="09" data-canonical-src="http://k-shogo.github.io/images/2013-10-07-start-ssl/09.jpg"></a></p>

<p>先ほど指定した名前に確認用メールが送られてくるので、メールに記載されているコードを入力して進みます。</p>

<p><a href="https://camo.qiitausercontent.com/29cb7743ecd71e317ea810700064b5c5ad757f11/687474703a2f2f6b2d73686f676f2e6769746875622e696f2f696d616765732f323031332d31302d30372d73746172742d73736c2f31302e6a7067" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/29cb7743ecd71e317ea810700064b5c5ad757f11/687474703a2f2f6b2d73686f676f2e6769746875622e696f2f696d616765732f323031332d31302d30372d73746172742d73736c2f31302e6a7067" alt="10" data-canonical-src="http://k-shogo.github.io/images/2013-10-07-start-ssl/10.jpg"></a></p>

<h1>
<span id="秘密鍵の発行" class="fragment"></span><a href="#%E7%A7%98%E5%AF%86%E9%8D%B5%E3%81%AE%E7%99%BA%E8%A1%8C"><i class="fa fa-link"></i></a>秘密鍵の発行</h1>

<p>ドメインの認証が終わったら、秘密鍵の発行です。<br>
Certificates Wizardタブを選択し、Certificate TargetはWeb Server SSL/TLS Certificateを指定します。</p>

<p><a href="https://camo.qiitausercontent.com/1a1b54c2c21d51ee2dedafa65916fc0b9f1e8d0c/687474703a2f2f6b2d73686f676f2e6769746875622e696f2f696d616765732f323031332d31302d30372d73746172742d73736c2f31312e6a7067" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/1a1b54c2c21d51ee2dedafa65916fc0b9f1e8d0c/687474703a2f2f6b2d73686f676f2e6769746875622e696f2f696d616765732f323031332d31302d30372d73746172742d73736c2f31312e6a7067" alt="11" data-canonical-src="http://k-shogo.github.io/images/2013-10-07-start-ssl/11.jpg"></a></p>

<p>パスワードを設定して進みます。</p>

<p><a href="https://camo.qiitausercontent.com/f9cab207ea53b4aa2d4255c3e9e8865255846b4a/687474703a2f2f6b2d73686f676f2e6769746875622e696f2f696d616765732f323031332d31302d30372d73746172742d73736c2f31322e6a7067" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/f9cab207ea53b4aa2d4255c3e9e8865255846b4a/687474703a2f2f6b2d73686f676f2e6769746875622e696f2f696d616765732f323031332d31302d30372d73746172742d73736c2f31322e6a7067" alt="12" data-canonical-src="http://k-shogo.github.io/images/2013-10-07-start-ssl/12.jpg"></a></p>

<p>private keyが作成されたので、テキストエリアの情報を保存します。</p>

<p><a href="https://camo.qiitausercontent.com/b8c61a5097f18c730d101fc1eed09e43f3cc1646/687474703a2f2f6b2d73686f676f2e6769746875622e696f2f696d616765732f323031332d31302d30372d73746172742d73736c2f31332e6a7067" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/b8c61a5097f18c730d101fc1eed09e43f3cc1646/687474703a2f2f6b2d73686f676f2e6769746875622e696f2f696d616765732f323031332d31302d30372d73746172742d73736c2f31332e6a7067" alt="13" data-canonical-src="http://k-shogo.github.io/images/2013-10-07-start-ssl/13.jpg"></a></p>

<h1>
<span id="公開鍵の発行" class="fragment"></span><a href="#%E5%85%AC%E9%96%8B%E9%8D%B5%E3%81%AE%E7%99%BA%E8%A1%8C"><i class="fa fa-link"></i></a>公開鍵の発行</h1>

<p>登録したドメインを選択します。</p>

<p><a href="https://camo.qiitausercontent.com/1f6d402104c7e88a49cb5c8baaf990dd15a458e8/687474703a2f2f6b2d73686f676f2e6769746875622e696f2f696d616765732f323031332d31302d30372d73746172742d73736c2f31342e6a7067" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/1f6d402104c7e88a49cb5c8baaf990dd15a458e8/687474703a2f2f6b2d73686f676f2e6769746875622e696f2f696d616765732f323031332d31302d30372d73746172742d73736c2f31342e6a7067" alt="14" data-canonical-src="http://k-shogo.github.io/images/2013-10-07-start-ssl/14.jpg"></a></p>

<p>サブドメインを登録します。</p>

<p><a href="https://camo.qiitausercontent.com/e94cbc62cc568e4d3f49e438224cd40159825ffb/687474703a2f2f6b2d73686f676f2e6769746875622e696f2f696d616765732f323031332d31302d30372d73746172742d73736c2f31352e6a7067" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/e94cbc62cc568e4d3f49e438224cd40159825ffb/687474703a2f2f6b2d73686f676f2e6769746875622e696f2f696d616765732f323031332d31302d30372d73746172742d73736c2f31352e6a7067" alt="15" data-canonical-src="http://k-shogo.github.io/images/2013-10-07-start-ssl/15.jpg"></a></p>

<p>次に進むとメールを送信するという表示がされるので、メールが来るのを待ちます。<br>
メールを受信したら、Tool Boxタブに移動し、Retrieve Certificateを選択します。</p>

<p><a href="https://camo.qiitausercontent.com/875a2710fa62e42f3ca6b0da38e71b78051758b4/687474703a2f2f6b2d73686f676f2e6769746875622e696f2f696d616765732f323031332d31302d30372d73746172742d73736c2f31362e6a7067" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/875a2710fa62e42f3ca6b0da38e71b78051758b4/687474703a2f2f6b2d73686f676f2e6769746875622e696f2f696d616765732f323031332d31302d30372d73746172742d73736c2f31362e6a7067" alt="16" data-canonical-src="http://k-shogo.github.io/images/2013-10-07-start-ssl/16.jpg"></a></p>

<p>すると公開鍵が表示されるので、テキストエリアの内容を保存しておきます。</p>

<p><a href="https://camo.qiitausercontent.com/9bf46568cf3180c7c843df967198f6b80041dbd3/687474703a2f2f6b2d73686f676f2e6769746875622e696f2f696d616765732f323031332d31302d30372d73746172742d73736c2f31372e6a7067" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/9bf46568cf3180c7c843df967198f6b80041dbd3/687474703a2f2f6b2d73686f676f2e6769746875622e696f2f696d616765732f323031332d31302d30372d73746172742d73736c2f31372e6a7067" alt="17" data-canonical-src="http://k-shogo.github.io/images/2013-10-07-start-ssl/17.jpg"></a></p>

<h1>
<span id="証明書の設置" class="fragment"></span><a href="#%E8%A8%BC%E6%98%8E%E6%9B%B8%E3%81%AE%E8%A8%AD%E7%BD%AE"><i class="fa fa-link"></i></a>証明書の設置</h1>

<p>サーバーにSSL証明書を設置し、HTTPSでの通信を出来るようにします。<br>
今回はnginxでSSL証明書を利用できるようにしてみます。</p>

<p>SSL証明書を設置するディレクトリに移動します。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>cd /etc/pki/tls/certs/
</pre></div></div>

<p>StartSSLの証明書をダウンロードします。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>wget https://www.startssl.com/certs/ca.pem
wget https://www.startssl.com/certs/sub.class1.server.ca.pem
</pre></div></div>

<p>先ほど保存しておいた秘密鍵と公開鍵を配置します。<br>
今回はそれぞれ<code>startssl.key</code>と<code>startssl.crt</code>と言う名前で設置しました。<br>
例えばvimでファイルを作成して鍵の中身を貼り付けます。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>vim startssl.key
vim startssl.crt
</pre></div></div>

<p>証明書と鍵のパーミッションを変更します。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>chmod 400 startssl.crt startssl.key ca.pem sub.class1.server.ca.pem
</pre></div></div>

<p>Apacheを使用する場合は中間証明書を指定するディレクティブがありますが、nginxには中間証明書を直接指定するディレクティブが用意されていません。<br>
そこでサーバ証明書と中間証明書を結合します。<br>
証明書は順に辿らないと駄目なので、結合の順番には注意しましょう。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>cat sub.class1.server.ca.pem &gt;&gt; startssl.crt
</pre></div></div>

<p>秘密鍵にはパスワードが設定されているため、nginxのstart/restart時にそのパスワードを入力する必要が出てきます。<br>
自動起動する場合には不便なので、パスワードを解除する場合は以下のようにバックアップを作成した後、パスワードがない鍵を作成します。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>cp startssl.key startssl.key.org
openssl rsa -in startssl.key -out startssl.key
</pre></div></div>

<p>nginxの設定を一部抜粋します。<br>
<code>ssl_certificate</code>で中間証明書と結合した証明書を、<code>ssl_certificate_key</code>で秘密鍵を指定します。<br>
オプションとしてSSLダウングレード攻撃を考慮して、SSLバージョン指定<code>ssl_protocols</code>,暗号スイート指定<code>ssl_ciphers</code>,暗号選択方式指定<code>ssl_prefer_server_ciphers</code>を変更しました。</p>

<div class="code-frame" data-lang="nginx"><div class="highlight"><pre><span></span><span class="k">server</span> <span class="p">{</span>

    <span class="kn">listen</span>       <span class="mi">443</span> <span class="s">ssl</span><span class="p">;</span>

    <span class="kn">ssl_certificate</span>      <span class="s">/etc/pki/tls/certs/startssl.crt</span><span class="p">;</span>
    <span class="kn">ssl_certificate_key</span>  <span class="s">/etc/pki/tls/certs/startssl.key</span><span class="p">;</span>
    <span class="kn">ssl_session_timeout</span>  <span class="mi">5m</span><span class="p">;</span>
    <span class="c1"># SSLv2以下は利用しない</span>
    <span class="kn">ssl_protocols</span>  <span class="s">SSLv3</span> <span class="s">TLSv1</span><span class="p">;</span>
    <span class="c1"># 暗号スイートの指定</span>
    <span class="kn">ssl_ciphers</span>  <span class="s">RC4-SHA:HIGH:!ADH</span><span class="p">;</span>
    <span class="c1"># 暗号の選択をサーバ側で決定</span>
    <span class="kn">ssl_prefer_server_ciphers</span>   <span class="no">on</span><span class="p">;</span>

<span class="p">}</span>
</pre></div></div>

<h1>
<span id="まとめ" class="fragment"></span><a href="#%E3%81%BE%E3%81%A8%E3%82%81"><i class="fa fa-link"></i></a>まとめ</h1>

<p>無料のSSL証明書ではありますが、PCブラウザおよびiPhoneからのアクセス等でも警告なくHTTPSでの接続が可能になるので便利に活用できるのではないでしょうか。</p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1" style="height:150px;">
<tr>
	<td rowspan="3">16位</td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="thumb-up-120px.png" /></i>1447</kbd>
		<a target="_blank" href="https://qiita.com/hirokidaichi/items/f9f4549c88aaf8b38bda">エンジニアなら知っておきたい障害報告&amp;再発防止策の考え方</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2014-01-18<br />16:13:28</center>
	</td>
	<td style="width:200px;">
		<!--投稿者-->
		<center>
			@<a href="user/35671.html">hirokidaichi</a>(33件の記事)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/35671/profile-images/1473686806">
		</center>
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[test]</b> <b>[再発防止策]</b> <b>[障害報告]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<!--
		<div style="width:350px;height:150px;overflow:scroll;">%s</div>
		-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p><a href="https://camo.qiitausercontent.com/b36b991f4a85c669303d812c2bbed35d7ac92102/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f33353637312f64633531373236612d313563312d346232652d313935652d6131346461643661653031312e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/b36b991f4a85c669303d812c2bbed35d7ac92102/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f33353637312f64633531373236612d313563312d346232652d313935652d6131346461643661653031312e706e67" alt="スクリーンショット 2014-01-17 15.31.41.png" title="スクリーンショット 2014-01-17 15.31.41.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/35671/dc51726a-15c1-4b2e-195e-a14dad6ae011.png"></a></p>

<p>システムには障害がつきものです。どんなにしっかりと作られたサービスであっても思わぬところで、バグやミスが発覚して、トラブルになるものです。大事なのはこういった障害を次への糧にしていくこと。失敗というのは大事な資産なので、管理できるようにしましょうという話。</p>

<h1>
<span id="あわせて読みたい" class="fragment"></span><a href="#%E3%81%82%E3%82%8F%E3%81%9B%E3%81%A6%E8%AA%AD%E3%81%BF%E3%81%9F%E3%81%84"><i class="fa fa-link"></i></a>あわせて読みたい</h1>

<ul>
<li><a href="http://qiita.com/hirokidaichi/items/c9a76191216f3cc6c4b2" id="reference-076c61b217db3975bf65">新人プログラマに知ってもらいたいメソッドを読みやすく維持するいくつかの原則</a></li>
<li><a href="http://qiita.com/hirokidaichi/items/591ad96ab12938878fe1" id="reference-52f806d80c589350ac18">新人プログラマに知っておいてもらいたい人類がオブジェクト指向を手に入れるまでの軌跡</a></li>
<li><a href="http://qiita.com/hirokidaichi/items/27c757d92b6915e8ecf7" id="reference-874b4e807470aa225581">ペアプログラミングして気がついた新人プログラマの成長を阻害する悪習</a></li>
<li>
<a href="http://qiita.com/hirokidaichi/items/5a5cb63ef5499143bc40" id="reference-0e0527a8ccf65e2496aa">あきらめるにはまだ早い！ソースコードの品質向上に効果的なアプローチ</a>
メンタリングの方法について基礎をまとめました。内心でなく行動を変えることが障害報告とも共通します。</li>
<li><a href="http://qiita.com/hirokidaichi/items/2e8e731acfd7b6c7e02f" id="reference-d0edd0798354822e21c4">新入社員が来てメンターになれって言われたけど、どうすればいいのかという対話テクニック</a></li>
</ul>

<h1>
<span id="障害の種類と障害報告について" class="fragment"></span><a href="#%E9%9A%9C%E5%AE%B3%E3%81%AE%E7%A8%AE%E9%A1%9E%E3%81%A8%E9%9A%9C%E5%AE%B3%E5%A0%B1%E5%91%8A%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6"><i class="fa fa-link"></i></a>障害の種類と障害報告について</h1>

<p>障害には、小さなもの、たとえば画面に表示されているテキストの乱れから、すべての画面で50xエラーが発生しているもの、決済とのつなぎ込みが失敗し、金銭的な影響が大きいものなど様々あります。どのような時に障害報告を書くのかと言われれば、「できればすべて書きましょう」というのが原則になると思います。</p>

<p>大前提として、「障害報告は始末書や反省文ではない」ということです。仕方なく、嫌嫌恥ずかしい思いをしながら書く必要はありません。うちはそういう文化じゃないんだと言う場合は、自分たちのチームから障害報告を始めてみるとよいのではないでしょうか。</p>

<h1>
<span id="ハインリッヒの法則あるいはヒヤリハット" class="fragment"></span><a href="#%E3%83%8F%E3%82%A4%E3%83%B3%E3%83%AA%E3%83%83%E3%83%92%E3%81%AE%E6%B3%95%E5%89%87%E3%81%82%E3%82%8B%E3%81%84%E3%81%AF%E3%83%92%E3%83%A4%E3%83%AA%E3%83%8F%E3%83%83%E3%83%88"><i class="fa fa-link"></i></a>ハインリッヒの法則、あるいはヒヤリハット</h1>

<p><a href="http://ja.wikipedia.org/wiki/%E3%83%8F%E3%82%A4%E3%83%B3%E3%83%AA%E3%83%83%E3%83%92%E3%81%AE%E6%B3%95%E5%89%87" class="autolink" rel="nofollow noopener" target="_blank">http://ja.wikipedia.org/wiki/ハインリッヒの法則</a></p>

<p>ハインリッヒの法則というものがあります。これは、１件の重大な事故の背後には29件の軽微な事故、300件のヒヤリハット事例(事故にはならなかったけど、ヒヤッとしたこと)が隠れているという統計的な経験則です。</p>

<p>これは、逆説的に言えば、小さな障害報告であってもしっかりとマネージすることで重大な事故を防ぐことができるだろうということを意味しています。</p>

<h1>
<span id="障害報告のフォーマットについて" class="fragment"></span><a href="#%E9%9A%9C%E5%AE%B3%E5%A0%B1%E5%91%8A%E3%81%AE%E3%83%95%E3%82%A9%E3%83%BC%E3%83%9E%E3%83%83%E3%83%88%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6"><i class="fa fa-link"></i></a>障害報告のフォーマットについて</h1>

<p>障害報告はできれば、ticket/issue管理システムなどで管理した方が良いでしょう。なければ、wikiのようなものでもかまいません。そのときのフォーマットとしては、最低限、次のようなものを用意するといいでしょう。</p>

<ul>
<li>障害内容サマリ</li>
<li>カスタマーフィードバック</li>
<li>障害タイムライン</li>
<li>対応差分</li>
<li>再発防止策</li>
</ul>

<h2>
<span id="障害内容サマリ" class="fragment"></span><a href="#%E9%9A%9C%E5%AE%B3%E5%86%85%E5%AE%B9%E3%82%B5%E3%83%9E%E3%83%AA"><i class="fa fa-link"></i></a>障害内容サマリ</h2>

<p>障害内容のサマリを端的な文章で記述しましょう。このとき、やってしまいがちなのは、「起きた現象」の内容ではなくて、「原因やバグが発生しているモジュール名」などを書いてしまいがちだったりします。ここに書くべきは、技術者以外も含めたメンバーが理解できるような現象面について言及することです。</p>

<p>たとえば、<br>
「HogeFuga_master DBの物理障害が発生」<br>
ではなくて、<br>
「Hoge表示画面でinternal server errorと表示される」<br>
「Hogeの投稿ができない不具合が発生」<br>
などと記述します。</p>

<p>これは、影響の大きさを営業部門やサポート部門と共有するためにも大事なことです。</p>

<h2>
<span id="カスタマーフィードバック" class="fragment"></span><a href="#%E3%82%AB%E3%82%B9%E3%82%BF%E3%83%9E%E3%83%BC%E3%83%95%E3%82%A3%E3%83%BC%E3%83%89%E3%83%90%E3%83%83%E3%82%AF"><i class="fa fa-link"></i></a>カスタマーフィードバック</h2>

<p>発生した障害に関して、問い合わせの件数やその内容などを記述します。あるいは関連部門の人に記述してもらいましょう。これは、影響の大きさを可視化するのに役立ちます。また、障害発生時にそういった部門との情報共有を必要とするフォーマットになるため、障害対応から問い合わせ応答や、障害発生のお知らせを出すための連携もしやすくなります。</p>

<h2>
<span id="障害タイムライン" class="fragment"></span><a href="#%E9%9A%9C%E5%AE%B3%E3%82%BF%E3%82%A4%E3%83%A0%E3%83%A9%E3%82%A4%E3%83%B3"><i class="fa fa-link"></i></a>障害タイムライン</h2>

<p>障害タイムラインとは、発生時刻、認知時刻、対応開始時刻、対応完了時刻、その他必要な時系列の対応状況に関する報告です。また、それぞれについて、「誰によって」「いつ」「どのように」がわかるとよりよいでしょう。</p>

<p>これを記述する理由は、再発防止策の検討の際にも役に立つからです。たとえば、発生時刻から認知時刻までの差が「２時間」であった場合、これを「１０分」にすることができるだけでも、障害の影響度は変わってきます。また、「認知時刻から対応開始まで」「対応開始から対応完了まで」の時刻も同様です。</p>

<p>障害の影響度については、</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>障害の影響度＝影響範囲 * 金銭的重要性 * 対応完了までにかかった時間
</pre></div></div>

<p>このように考えるとよいでしょう。</p>

<h2>
<span id="対応差分" class="fragment"></span><a href="#%E5%AF%BE%E5%BF%9C%E5%B7%AE%E5%88%86"><i class="fa fa-link"></i></a>対応差分</h2>

<p>対応差分へのリンクを必ず張りましょう。障害の理由は文章だけでは、伝わらないケースも多いです。</p>

<h2>
<span id="再発防止策" class="fragment"></span><a href="#%E5%86%8D%E7%99%BA%E9%98%B2%E6%AD%A2%E7%AD%96"><i class="fa fa-link"></i></a>再発防止策</h2>

<p>再発防止策は、障害報告を書く最大の理由です。障害報告を書いた時点では、すべてを記述する必要はありませんが、再発防止策が完了するまでは、チケットをクローズしないことが重要です。また、再発防止策を記述するときは、「原因(だと思ったもの)」と「対策」をしっかりと記述しましょう。なぜなら、原因だと思ったものが共有されていない場合、対策が的外れになってしまう場合もあるからです。</p>

<p>また、その際に</p>

<ul>
<li>直接原因　：　その不具合が発生した直接的原因</li>
<li>間接原因　：　その不具合に至るまでの間接的な原因</li>
<li>本当の理由：　なぜ、このようなパターンの障害が発生したか</li>
</ul>

<p>のように３段階くらいに再発防止策を検討していけるとよいでしょう。これが三段階なのは前述のハインリッヒの法則をイメージしてもらうとわかりやすいと思います。一つの障害には、３００のヒヤリとしている事例、あるいはメンバーの慣れや、習慣、努力によってたまたま防ぐことができている障害が隠れています。直接的な原因を潰すだけでは、再発防止策としてはあまり適していないケースが多いです。そうではなくて、もう一段トラブルを引き起こした間接的な問題がはらんでいて、その問題を解決することで本当の再発防止となることが多いからです。</p>

<p>また、前述の通り、障害の影響度の式をイメージして、影響度を減らすための方策も重要です。</p>

<ul>
<li>影響範囲 　　　　　：同様の問題が起こっても影響範囲の極小化はできないか？</li>
<li>対応完了までの時間 ：同様の問題が起こっても、短い時間で、あるいは自動的に対応できないか？</li>
</ul>

<p>という問いも再発防止策を検討する上では重要です。</p>

<h1>
<span id="再発防止検討サイクルについて" class="fragment"></span><a href="#%E5%86%8D%E7%99%BA%E9%98%B2%E6%AD%A2%E6%A4%9C%E8%A8%8E%E3%82%B5%E3%82%A4%E3%82%AF%E3%83%AB%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6"><i class="fa fa-link"></i></a>再発防止検討サイクルについて</h1>

<h2>
<span id="チーム振り返り" class="fragment"></span><a href="#%E3%83%81%E3%83%BC%E3%83%A0%E6%8C%AF%E3%82%8A%E8%BF%94%E3%82%8A"><i class="fa fa-link"></i></a>チーム振り返り</h2>

<p>再発防止策の検討は、定期的にチームで振り返ることが大事です。この際に障害を引き起こしたチームメンバーに対する糾弾のようにならない配慮が重要です。再発防止策の検討には、かならずファシリテータを用意し、画面やホワイトボードに注目させ、また、ブレストのような自由闊達とした雰囲気づくりが重要です。お菓子を用意してもいいですし、適度なアイスブレイクも重要でしょう。</p>

<p>この際に、次に述べる良い再発防止策と悪い再発防止策のペーパーをメンバーは見ることができるようにしておくのも大事です。</p>

<p>また、これはファシリテータの仕事ですが、原因-&gt;対策という順番を忘れずに議論することが大事です。</p>

<h2>
<span id="セカンドオピニオン" class="fragment"></span><a href="#%E3%82%BB%E3%82%AB%E3%83%B3%E3%83%89%E3%82%AA%E3%83%94%E3%83%8B%E3%82%AA%E3%83%B3"><i class="fa fa-link"></i></a>セカンドオピニオン</h2>

<p>再発防止策は、チーム外のメンバーで振り返るシーンを作った方が良いでしょう。その理由の１つは、情報を他のチームのメンバーと共有することでより広範囲の問題を解決する案が出てくるかもしれないこと。もうひとつは、チームの事情によってかかるバイアスを排除した意見をもらうことができることです。チームで行動していると、忙しさから場当たり的な問題解決をしがちになりますし、それを互いに指摘し合える関係を他のチームと構築することで、障害という資産を活かすことができる文化が生まれてくるでしょう。</p>

<h1>
<span id="良い再発防止策と悪い再発防止策" class="fragment"></span><a href="#%E8%89%AF%E3%81%84%E5%86%8D%E7%99%BA%E9%98%B2%E6%AD%A2%E7%AD%96%E3%81%A8%E6%82%AA%E3%81%84%E5%86%8D%E7%99%BA%E9%98%B2%E6%AD%A2%E7%AD%96"><i class="fa fa-link"></i></a>良い再発防止策と悪い再発防止策</h1>

<h2>
<span id="良い再発防止策" class="fragment"></span><a href="#%E8%89%AF%E3%81%84%E5%86%8D%E7%99%BA%E9%98%B2%E6%AD%A2%E7%AD%96"><i class="fa fa-link"></i></a>良い再発防止策</h2>

<p>良い再発防止策について、順位付けするとしたら、</p>

<ol>
<li>その種類の問題について二度と意識することがなくなる解決策</li>
<li>その種類の問題を開発時に自動的に検知することができる解決策</li>
<li>その種類の問題が発生しても自動的に復旧することができる解決策</li>
<li>その種類の問題が発生しても影響が局所化される、フールプルーフ、フェールセーフになる解決策</li>
</ol>

<p>このような順序でしょうか。</p>

<h2>
<span id="悪い再発防止策" class="fragment"></span><a href="#%E6%82%AA%E3%81%84%E5%86%8D%E7%99%BA%E9%98%B2%E6%AD%A2%E7%AD%96"><i class="fa fa-link"></i></a>悪い再発防止策</h2>

<p>悪い再発防止策は、シンプルで人間というコンポーネントを使うことです。</p>

<ol>
<li>責任回避のため稟議、決済経路を追加する策</li>
<li>他者の努力／忍耐／根性の不足を指摘し改善を求める策</li>
<li>個人／チームの注意力を原因とし、「より注意深く確認します／させます」といった策</li>
<li>それっぽい言い訳付きのダブルチェック/トリプルチェック体制</li>
<li>ドキュメントにその旨追記します！的な解決策</li>
</ol>

<p>これは、そんなことやらないよと思っていると、ついついやってしまいがちなので注意が必要です。<br>
「ちゃんと」「しっかり」というフレーズが出てきたら、危険信号です。</p>

<h1>
<span id="まとめ" class="fragment"></span><a href="#%E3%81%BE%E3%81%A8%E3%82%81"><i class="fa fa-link"></i></a>まとめ</h1>

<ul>
<li>障害報告は資産。どんなものでも作成し有効活用しよう。</li>
<li>人間というコンポーネントを再発防止に入れない</li>
<li>セカンドオピニオンをもうけよう</li>
</ul>

<p>以上です。</p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1" style="height:150px;">
<tr>
	<td rowspan="3">17位</td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="thumb-up-120px.png" /></i>1364</kbd>
		<a target="_blank" href="https://qiita.com/syui/items/73a822970742b317aede">MacBookAirで使っている便利ツール</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2012-06-09<br />00:16:48</center>
	</td>
	<td style="width:200px;">
		<!--投稿者-->
		<center>
			@<a href="user/4151.html">syui</a>(212件の記事)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/4151/profile-images/1473683816">
		</center>
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Vim]</b> <b>[Zsh]</b> <b>[Mac]</b> <b>[homebrew]</b> <b>[tmux]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<!--
		<div style="width:350px;height:150px;overflow:scroll;">%s</div>
		-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;">
<h1>
<span id="はじめに" class="fragment"></span><a href="#%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB"><i class="fa fa-link"></i></a>はじめに</h1>

<p>ここでは、MacBookAirで私が使っている便利ツールを紹介していきます。長文過ぎると、途中で表示できなくなってしまうことを学習したため、不要な解説は省略します。また、個人的な価値観から形成された表現を含むかもしれませんが、その点の説明も省略します。ご了承ください。<br>
便利なアプリを知っていたら、是非コメントをお願いします。</p>

<p><a href="https://camo.qiitausercontent.com/4bad11f4bdb1047163a5af7e7543daed027f968a/687474703a2f2f6661726d382e737461746963666c69636b722e636f6d2f373037372f373335333232323235365f623631636430393034375f6d2e6a7067" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/4bad11f4bdb1047163a5af7e7543daed027f968a/687474703a2f2f6661726d382e737461746963666c69636b722e636f6d2f373037372f373335333232323235365f623631636430393034375f6d2e6a7067" alt="" data-canonical-src="http://farm8.staticflickr.com/7077/7353222256_b61cd09047_m.jpg"></a></p>

<h2>
<span id="macbookairにインストールしたアプリ" class="fragment"></span><a href="#macbookair%E3%81%AB%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB%E3%81%97%E3%81%9F%E3%82%A2%E3%83%97%E3%83%AA"><i class="fa fa-link"></i></a>MacBookAirにインストールしたアプリ</h2>

<p><a href="https://camo.qiitausercontent.com/e7147b29ef07f27412381b77222df7868ab31b28/687474703a2f2f6661726d382e737461746963666c69636b722e636f6d2f373037342f373335333234353934385f623832643339323430312e6a7067" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/e7147b29ef07f27412381b77222df7868ab31b28/687474703a2f2f6661726d382e737461746963666c69636b722e636f6d2f373037342f373335333234353934385f623832643339323430312e6a7067" alt="" data-canonical-src="http://farm8.staticflickr.com/7074/7353245948_b82d392401.jpg"></a></p>

<ol>
<li>
<a href="http://blog.boastr.net/" rel="nofollow noopener" target="_blank">BetterTouchTool</a> //トラックパッド拡張、ショートカットキー拡張</li>
<li>
<a href="http://www.google.co.jp/chrome/intl/ja/landing_ch.html" rel="nofollow noopener" target="_blank">Google Chrome</a> //インターネットブラウザ</li>
<li>
<a href="http://growl.info/downloads" rel="nofollow noopener" target="_blank">Growl</a> //通知を拡張するアプリ</li>
<li>
<a href="http://itunes.apple.com/jp/app/kopypasta/id463243494?mt=12" rel="nofollow noopener" target="_blank">Kopypasta</a> //クリップボードをバックアップ</li>
<li>
<a href="http://itunes.apple.com/jp/app/windowflow/id414445104?mt=12" rel="nofollow noopener" target="_blank">WindowFlow</a> //ウィンドウ切り替え</li>
<li>
<a href="http://www.trankynam.com/xtrafinder/" rel="nofollow noopener" target="_blank">XtraFinder</a> //Finderを拡張するアプリ</li>
<li>
<a href="https://developer.apple.com/xcode/" rel="nofollow noopener" target="_blank">Xcode</a> //開発環境を提供するアプリ</li>
<li>
<a href="http://www.bresink.com/osx/TinkerTool.html" rel="nofollow noopener" target="_blank">TinkerTool</a> //Macの隠し機能を簡単に有効にするアプリ</li>
<li>
<a href="https://www.virtualbox.org/wiki/Downloads" rel="nofollow noopener" target="_blank">VirtualBox</a> //仮想環境を提供するアプリ</li>
<li>
<a href="http://itunes.apple.com/jp/app/skitch/id425955336?mt=12" rel="nofollow noopener" target="_blank">Skitch</a> //スクーンショットの撮影と画像の編集を行うアプリ</li>
<li>
<a href="http://itunes.apple.com/jp/app/dashexpander/id458867049?mt=12" rel="nofollow noopener" target="_blank">DashExpander</a> //無料の高機能エディタ</li>
<li>
<a href="http://www.alfredapp.com/" rel="nofollow noopener" target="_blank">Alfred</a> //キーボード操作拡張</li>
<li>
<a href="http://www.google.co.jp/ime/index-mac.html" rel="nofollow noopener" target="_blank">Google IME</a> //Google 日本語入力</li>
<li>
<a href="https://www.dropbox.com/" rel="nofollow noopener" target="_blank">Dropbox</a> //共有ドライブ</li>
<li>
<a href="http://code.google.com/p/shiftit/" rel="nofollow noopener" target="_blank">ShiftIt</a> //ウィンドウ操作を簡単にするアプリ</li>
<li>
<a href="http://kobitoapp.com/" rel="nofollow noopener" target="_blank">Kobito</a> //Qiitaへの投稿を簡単にするアプリ</li>
<li>
<a href="http://mac.github.com/" rel="nofollow noopener" target="_blank">GitHub for Mac</a> //GitHubへの投稿を簡単にするアプリ</li>
<li>
<a href="http://www.gimp.org/downloads/" rel="nofollow noopener" target="_blank">GIMP</a> //言わずと知れた高機能の画像作成・編集アプリ</li>
<li>
<a href="http://notational.net/" rel="nofollow noopener" target="_blank">Notational Velocity</a> //Simplenoteクライアント。メモ帳</li>
<li>
<a href="http://www.evernote.com/about/intl/jp/" rel="nofollow noopener" target="_blank">Evernote</a> //高機能メモ帳Evernoteのクライアントアプリ。</li>
<li>
<a href="http://keepass.info/download.html" rel="nofollow noopener" target="_blank">KeePassX</a> //パスワード管理アプリ。</li>
<li>
<a href="http://code.google.com/p/macvim-kaoriya/" rel="nofollow noopener" target="_blank">MacVim</a> //Vimエディタの日本語拡張版</li>
<li>
<a href="http://www.iterm2.com/" rel="nofollow noopener" target="_blank">iTerm2</a> //ターミナルアプリ。設定項目が豊富で安定しています。</li>
<li>
<a href="http://www.clamxav.com/download.php" rel="nofollow noopener" target="_blank">ClamXav</a> //スキャン</li>
<li>
<a href="http://www.clipmenu.com/ja/" rel="nofollow noopener" target="_blank">ClipMenu</a> //履歴機能を強化</li>
<li>
<a href="http://www.cheatsheetapp.com/CheatSheet/" rel="nofollow noopener" target="_blank">CheatSheet</a> //ショートカットキーヘルプ</li>
<li>
<a href="http://ja.netbeans.org/" rel="nofollow noopener" target="_blank">NetBeans</a> //日本語ドキュメントがしっかりしたIDE</li>
<li>
<a href="http://www.videolan.org/vlc/" rel="nofollow noopener" target="_blank">VLC</a> //メディアプレイヤー</li>
<li>
<a href="http://itunes.apple.com/jp/app/type2phone/id472717129?mt=12" rel="nofollow noopener" target="_blank">Type2Phone</a> //iPhoneのBluetoothキーボードにする</li>
<li>
<a href="http://drikin.com/2010/11/dolipo.html" rel="nofollow noopener" target="_blank">dolipo</a> //ネット環境の高速化</li>
<li>
<a href="http://www.teamviewer.com/ja/index.aspx" rel="nofollow noopener" target="_blank">TeamViewer</a> //WAN経由でのGUIリモート補助</li>
<li>
<a href="http://www.ortisoft.de/accessmenubarapps/" rel="nofollow noopener" target="_blank">AccessMenuBarApps</a> //メニューバーへのアクセス改善</li>
</ol>

<h2>
<span id="macの基本操作について" class="fragment"></span><a href="#mac%E3%81%AE%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6"><i class="fa fa-link"></i></a>Macの基本操作について</h2>

<p><a href="https://camo.qiitausercontent.com/f8eeb37d410a21aac8f2daf5cfc7c3a41ca0968d/687474703a2f2f6661726d382e737461746963666c69636b722e636f6d2f373232372f373136373938303431335f366639666538636139332e6a7067" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/f8eeb37d410a21aac8f2daf5cfc7c3a41ca0968d/687474703a2f2f6661726d382e737461746963666c69636b722e636f6d2f373232372f373136373938303431335f366639666538636139332e6a7067" alt="" data-canonical-src="http://farm8.staticflickr.com/7227/7167980413_6f9fe8ca93.jpg"></a></p>

<p>私は、トラックパッドを全く使いませんので、あまり関係ないのですが、<code>BetterTouchTool</code>よりも<code>jitouch 2</code>のほうがよさそうだという話があります。このアプリの紹介とMacの操作全般について参考になりそうな記事を載せておきます。</p>

<p>参考記事<br>
01. <a href="http://boku-note.com/mac/jitouch2_apptivate_clcllite/2155/" rel="nofollow noopener" target="_blank">ガチのガチでトラックパッド操作が捗る「jitouch 2」を紹介するよ！だから「BetterTouchTool」は今すぐ窓から捨てなよ。</a></p>

<h2>
<span id="ブラウザ環境" class="fragment"></span><a href="#%E3%83%96%E3%83%A9%E3%82%A6%E3%82%B6%E7%92%B0%E5%A2%83"><i class="fa fa-link"></i></a>ブラウザ環境</h2>

<p>便利なGoogleChrome拡張機能を紹介します。動作は<code>:help</code>などで確認してください。特に、<a href="http://k2nr.blogspot.jp/2011/09/vichrome-extension.html" rel="nofollow noopener" target="_blank">連続HIT-A-HINT</a>が便利です。</p>

<p><a href="https://camo.qiitausercontent.com/9f01784aea38fab61ea5424e25680e49fdb459b6/687474703a2f2f6661726d392e737461746963666c69636b722e636f6d2f383136322f373335333139303037365f623461666333323164612e6a7067" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/9f01784aea38fab61ea5424e25680e49fdb459b6/687474703a2f2f6661726d392e737461746963666c69636b722e636f6d2f383136322f373335333139303037365f623461666333323164612e6a7067" alt="" data-canonical-src="http://farm9.staticflickr.com/8162/7353190076_b4afc321da.jpg"></a></p>

<ol>
<li>
<a href="https://chrome.google.com/webstore/detail/gghkfhpblkcmlkmpcpgaajbbiikbhpdi" rel="nofollow noopener" target="_blank">ViChrome</a> //キー操作補助</li>
<li>
<a href="http://thegleebox.com/" rel="nofollow noopener" target="_blank">gleeBox</a> //コマンド操作</li>
</ol>

<h2>
<span id="メイン環境" class="fragment"></span><a href="#%E3%83%A1%E3%82%A4%E3%83%B3%E7%92%B0%E5%A2%83"><i class="fa fa-link"></i></a>メイン環境</h2>

<p><a href="https://camo.qiitausercontent.com/86485cc813394313aef4e878f5a7f82e41fe7684/687474703a2f2f6661726d392e737461746963666c69636b722e636f6d2f383136322f373136383031333839375f653364323238343462395f6e2e6a7067" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/86485cc813394313aef4e878f5a7f82e41fe7684/687474703a2f2f6661726d392e737461746963666c69636b722e636f6d2f383136322f373136383031333839375f653364323238343462395f6e2e6a7067" alt="" data-canonical-src="http://farm9.staticflickr.com/8162/7168013897_e3d22844b9_n.jpg"></a></p>

<ol>
<li>iTerm2 //Terminal</li>
<li>zsh //Shell</li>
<li>Vim //Editor</li>
<li>tmux //Virtual</li>
<li>NetBeans //IDE</li>
<li>w3m //Browser</li>
</ol>

<h2>
<span id="各種設定ファイル" class="fragment"></span><a href="#%E5%90%84%E7%A8%AE%E8%A8%AD%E5%AE%9A%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB"><i class="fa fa-link"></i></a>各種設定ファイル</h2>

<p>長くなりすぎると、記事が途中で切れるので、設定ファイルはあくまで参考程度に一部のみ載せています。GitHubで公開されているものを参考にするのがよいと思います。</p>

<div class="code-frame" data-lang="shell">
<div class="code-lang"><span class="bold">~/.zshrc</span></div>
<div class="highlight"><pre><span></span># w3mでgoogle検索
function google() {
local str opt
if [ $ != 0 ]; then
   for i in $*; do
     str="$str+$i"
   done
    str=`echo $str | sed 's/^\+//'`
 opt='search?num=50&amp;hl=ja&amp;lr=lang_ja'
    opt="${opt}&amp;q=${str}"
fi
w3m http://www.google.co.jp/$opt
}
</pre></div>
</div>

<div class="code-frame" data-lang="viml">
<div class="code-lang"><span class="bold">~/.vimrc</span></div>
<div class="highlight"><pre><span></span>" jj でノーマルモードに移動する 
inoremap jj &lt;esc&gt;
</pre></div>
</div>

<div class="code-frame" data-lang="text">
<div class="code-lang"><span class="bold">~/.w3m/keymap</span></div>
<div class="highlight"><pre><span></span># m でカーソル位置のURLをクリップボードに保存する
keymap m EXTERN_LINK "echo %s | pbcopy"
</pre></div>
</div>

<div class="code-frame" data-lang="text">
<div class="code-lang"><span class="bold">~/.tmux.conf</span></div>
<div class="highlight"><pre><span></span># Control+s Control+vで画面分割
bind-key -n M-s split-window -v
bind-key -n M-v split-window -h
</pre></div>
</div>

<p>参考記事<br>
01. <a href="https://bytebucket.org/ns9tks/tmux-ja/wiki/tmux-ja.html" rel="nofollow noopener" target="_blank">tmux Keymap</a><br>
02. <a href="http://d.hatena.ne.jp/mizchi/20100829/1283076112" rel="nofollow noopener" target="_blank">tmux.conf</a><br>
02. <a href="http://www.clear-code.com/blog/2011/9/5.html" rel="nofollow noopener" target="_blank">zshrc</a><br>
03. <a href="http://www.understudy.net/custom.html" rel="nofollow noopener" target="_blank">zsh Prompt</a><br>
04. <a href="http://vim.wikia.com/wiki/Mapping_keys_in_Vim_-_Tutorial" rel="nofollow noopener" target="_blank">vim Keymap</a><br>
05. <a href="https://github.com/Shougo/shougo-s-github/blob/master/vim/.vimrc" rel="nofollow noopener" target="_blank">vimrc</a><br>
06. <a href="https://github.com/mottram/dotfiles/blob/master/w3m/keymap" rel="nofollow noopener" target="_blank">w3m/keymap</a></p>

<p><code>zsh</code>を簡易にカスタマイズしたい場合は、<code>Oh-My ZSH</code>を参考にするとよいでしょう。プロンプトの設定あたりが特に参考になると思います。</p>

<p>参考記事<br>
01. <a href="http://d.hatena.ne.jp/mollifier/20101009/p1" rel="nofollow noopener" target="_blank">oh-my-zsh を使って zsh の便利な設定をまとめて取り入れる</a></p>

<h2>
<span id="homebrewでインストールするアプリ" class="fragment"></span><a href="#homebrew%E3%81%A7%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB%E3%81%99%E3%82%8B%E3%82%A2%E3%83%97%E3%83%AA"><i class="fa fa-link"></i></a>Homebrewでインストールするアプリ</h2>

<p><a href="https://camo.qiitausercontent.com/b08b5eef6c3e59518304e2fefd0bd2d593fcdf40/687474703a2f2f6661726d382e737461746963666c69636b722e636f6d2f373037362f373136383033393732335f376265376366306533642e6a7067" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/b08b5eef6c3e59518304e2fefd0bd2d593fcdf40/687474703a2f2f6661726d382e737461746963666c69636b722e636f6d2f373037362f373136383033393732335f376265376366306533642e6a7067" alt="" data-canonical-src="http://farm8.staticflickr.com/7076/7168039723_7be7cf0e3d.jpg"></a></p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>brew update //アップデート

brew doctor //問題解決

brew install 'Appname' //インストール

brew search 'Appname' //検索
</pre></div></div>

<p>以下、アプリはコマンドでインストールできるため、URLには参考記事を載せています。</p>

<ol>
<li>
<a href="http://www.office-iwata.com/archives/47" rel="nofollow noopener" target="_blank">w3m</a> //テキストブラウザ</li>
<li>
<a href="http://www.emaillab.org/mutt/" rel="nofollow noopener" target="_blank">mutt</a> //メール</li>
<li>
<a href="http://www8.atwiki.jp/git_jp/" rel="nofollow noopener" target="_blank">git</a> //バージョン管理</li>
<li>
<a href="http://pspfour.blog106.fc2.com/blog-entry-1111.html" rel="nofollow noopener" target="_blank">mplayer</a> //メディアプレイヤー</li>
<li>
<a href="http://pspfour.blog106.fc2.com/blog-entry-1111.html" rel="nofollow noopener" target="_blank">ffmpeg</a> //エンコード</li>
<li>
<a href="http://pspfour.blog106.fc2.com/blog-entry-1111.html" rel="nofollow noopener" target="_blank">swftools</a> //swfのエンコード</li>
<li>
<a href="http://ja.wikipedia.org/wiki/Midnight_Commander" rel="nofollow noopener" target="_blank">mc</a> //ファイルマネージャ-Midnight Commander</li>
<li>
<a href="http://news.mynavi.jp/column/zsh/index.html" rel="nofollow noopener" target="_blank">zsh</a> //補完が冴えたシェル</li>
<li>
<a href="http://ja.wikipedia.org/wiki/Vim" rel="nofollow noopener" target="_blank">vim</a> //プラグインが優れたエディタ</li>
<li>
<a href="http://d.hatena.ne.jp/tmatsuu/20090709/1247150771" rel="nofollow noopener" target="_blank">tmux</a> //ウィンドウ操作に優れた仮想環境</li>
<li>
<a href="http://pnuts.cc/2009/12/devtodo/" rel="nofollow noopener" target="_blank">devtodo</a> //To-do管理</li>
<li>
<a href="http://code.google.com/p/googlecl/" rel="nofollow noopener" target="_blank">googlecl</a> //Googleサービスの利用</li>
<li>
<a href="http://pspfour.blog106.fc2.com/blog-entry-1111.html" rel="nofollow noopener" target="_blank">youtube-dl</a> //YouTube動画のダウンロード</li>
<li>
<a href="http://nmap.org/man/jp/" rel="nofollow noopener" target="_blank">nmap</a> //ネットワークスキャナ</li>
<li>
<a href="http://www.wireshark.org/" rel="nofollow noopener" target="_blank">wireshark</a> //パケット解析ツール</li>
<li>
<a href="http://munin-monitoring.org/" rel="nofollow noopener" target="_blank">munin</a> //初心者に手軽なサーバー管理</li>
<li>
<a href="http://www.aircrack-ng.org/doku.php?id=ja:cracking_wpa" rel="nofollow noopener" target="_blank">aircrack-ng</a> //無線キャプチャ</li>
<li>
<a href="http://www.ibm.com/developerworks/jp/web/library/wa-metasploit/" rel="nofollow noopener" target="_blank">metasploit</a> //脆弱性評価ツール</li>
<li>
<a href="http://pspfour.blog106.fc2.com/blog-entry-1027.html" rel="nofollow noopener" target="_blank">exiftool</a> //Exif情報操作</li>
<li>
<a href="http://pspfour.blog106.fc2.com/blog-entry-1069.html" rel="nofollow noopener" target="_blank">mobile-shell</a> //SSHに変わるリモートツール</li>
<li>
<a href="http://libtorrent.rakshasa.no/" rel="nofollow noopener" target="_blank">rtorrent</a> //Downloader</li>
</ol>

<h2>
<span id="macportでインストールするアプリ" class="fragment"></span><a href="#macport%E3%81%A7%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB%E3%81%99%E3%82%8B%E3%82%A2%E3%83%97%E3%83%AA"><i class="fa fa-link"></i></a>MacPortでインストールするアプリ</h2>

<p>たまに、<code>Homebrew</code>にはないアプリがあります。その場合、<code>MacPort</code>を使いインストールできます。なお、<code>Homebrew</code>を利用する場合、<code>MacPort</code>の導入は推奨されていませんので注意が必要です。</p>

<ol>
<li>
<a href="http://ophcrack.sourceforge.net/" rel="nofollow noopener" target="_blank">ophcrack</a> //パスワードクラック。辞書ファイルもダウンロード可</li>
<li>
<a href="https://kiza.kcore.de/software/snownews/" rel="nofollow noopener" target="_blank">snownews</a> //RSSクライアント</li>
</ol>

<h2>
<span id="その他" class="fragment"></span><a href="#%E3%81%9D%E3%81%AE%E4%BB%96"><i class="fa fa-link"></i></a>その他</h2>

<ol>
<li>
<a href="http://oscardelben.com/sheet/" rel="nofollow noopener" target="_blank">sheet</a> //スニペットツール</li>
<li>
<a href="http://pspfour.blog106.fc2.com/blog-entry-1111.html" rel="nofollow noopener" target="_blank">nicovideo-dl</a> //ニコニコ動画のダウンロード</li>
<li>
<a href="http://ja.asciicasts.com/episodes/252-metrics-metrics-metrics" rel="nofollow noopener" target="_blank">metrical</a> //メトリクス計測</li>
<li>
<a href="http://code.google.com/p/google-apps-manager/" rel="nofollow noopener" target="_blank">google-apps-manager</a> //Googleアカウント管理</li>
<li>
<a href="http://ihaveapc.com/2011/04/orpheus-a-cool-command-line-mp3-player-for-linux-mint-ubuntu/" rel="nofollow noopener" target="_blank">orpheus</a> //Media Player</li>
<li>
<a href="https://github.com/insanum/gcalcli" rel="nofollow noopener" target="_blank">gcalcli</a> //Googleカレンダーやリマインダーなど</li>
</ol>

<h2>
<span id="初期設定" class="fragment"></span><a href="#%E5%88%9D%E6%9C%9F%E8%A8%AD%E5%AE%9A"><i class="fa fa-link"></i></a>初期設定</h2>

<p>パソコンを初期化したあと、もしくは他人のパソコンを使用する場合、即座に自分環境を構築する手はずを整えておきましょう。具体的には、アプリをインストール、設定するシェルスクリプトを書き、それをDropboxで共有しておきます。また、設定ファイルはGitHubに公開してもいいでしょう。</p>

<p>私の場合、Dropboxをインストールし、1つのコマンドを実行すれば、アプリのインストール、設定からzshなどの設定ファイルへシンボリックリンクを貼る作業までを自動で実行されるようにしています。これは、ある程度、OS環境を考慮した内容で書きます。</p>

<p>Check</p>

<div class="code-frame" data-lang="shell">
<div class="code-lang"><span class="bold">~/setup.sh</span></div>
<div class="highlight"><pre><span></span>DOT_FILES=( .vim .vimrc .bazaar)

for file in ${DOT_FILES[@]}
do
  if [ -a $HOME/$file ]; then
    echo "既にファイルが存在します: $file"
  else
    ln -s $HOME/dotfiles/$file $HOME/$file
    echo "シンボリックリンクを貼りました: $file"
  fi
done
</pre></div>
</div>

<p>参考記事<br>
01. <a href="http://d.hatena.ne.jp/Yuzuemon/20120220/1329747301" rel="nofollow noopener" target="_blank">ボク式dotfiles</a><br>
02. <a href="https://gist.github.com/1221938" rel="nofollow noopener" target="_blank">DotfilesをDropboxで管理するときに若干役に立ちそうなスクリプト</a><br>
03. <a href="http://voqn.blogspot.jp/2011/04/dotfile-file-dropbox.html" rel="nofollow noopener" target="_blank">dotfile (~/.file) の類を Dropbox で一元管理</a><br>
04. <a href="http://blog.monoweb.info/article/2011033122.html" rel="nofollow noopener" target="_blank">Dropboxをサーバにインストールして簡単自動バックアップ</a></p>

<p>その他、Editorに<code>Vim</code>を使う場合は、<code>GoogleIME</code>の設定を行なっておくと、コマンド入力が便利になります。Google IME &gt; 環境設定 &gt; 一般<em>キー設定</em>編集 にて以下を変更します。これで、<code>Esc</code>を押すと、日本語入力がOFFになります。</p>

<p><a href="https://camo.qiitausercontent.com/65f2c8fe108c8d625f9f60153d6212f653edc66b/687474703a2f2f6661726d382e737461746963666c69636b722e636f6d2f373039362f373335313839383238345f656439393938363038655f6d2e6a7067" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/65f2c8fe108c8d625f9f60153d6212f653edc66b/687474703a2f2f6661726d382e737461746963666c69636b722e636f6d2f373039362f373335313839383238345f656439393938363038655f6d2e6a7067" alt="" data-canonical-src="http://farm8.staticflickr.com/7096/7351898284_ed9998608e_m.jpg"></a></p>

<h2>
<span id="便利なvimプラグイン" class="fragment"></span><a href="#%E4%BE%BF%E5%88%A9%E3%81%AAvim%E3%83%97%E3%83%A9%E3%82%B0%E3%82%A4%E3%83%B3"><i class="fa fa-link"></i></a>便利なVimプラグイン</h2>

<p><a href="https://camo.qiitausercontent.com/e3586495774a4a3c8a09b724661d79d7e1e0199b/687474703a2f2f6661726d382e737461746963666c69636b722e636f6d2f373038372f373335333138393438345f666430306561356536612e6a7067" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/e3586495774a4a3c8a09b724661d79d7e1e0199b/687474703a2f2f6661726d382e737461746963666c69636b722e636f6d2f373038372f373335333138393438345f666430306561356536612e6a7067" alt="" data-canonical-src="http://farm8.staticflickr.com/7087/7353189484_fd00ea5e6a.jpg"></a></p>

<ol>
<li>
<a href="https://github.com/mrtazz/simplenote.vim" rel="nofollow noopener" target="_blank">simplenote</a> //クラウドメモ帳</li>
<li>
<a href="https://github.com/wincent/Command-T" rel="nofollow noopener" target="_blank">commnad-t</a> //ファイルアクセスの便宜</li>
<li>
<a href="https://github.com/yuratomo/w3m.vim" rel="nofollow noopener" target="_blank">w3m</a> //yuratomo/w3m.vim</li>
<li>
<a href="https://github.com/majutsushi/tagbar.git" rel="nofollow noopener" target="_blank">tagbar</a> //majutsushi/tagbar</li>
</ol>

<p>その他のプラグインは下記を参考にしてください。なお、プラグインの導入は、<code>Bundle</code>か<code>NeoBundle</code>を使うと簡単になります。</p>

<p>参考記事<br>
01. <a href="http://daisuzu.hatenablog.com/entry/2012/05/06/204019" rel="nofollow noopener" target="_blank">ワシのVimプラグインは百八式まであるぞ</a></p>

<h2>
<span id="ブログ環境" class="fragment"></span><a href="#%E3%83%96%E3%83%AD%E3%82%B0%E7%92%B0%E5%A2%83"><i class="fa fa-link"></i></a>ブログ環境</h2>

<p>ブログ環境は、執筆環境を視野に入れた使い慣れたサービスをメインに構築するのが一番です。ここでは、私が考えるクールなブログ環境を紹介します。</p>

<ol>
<li>
<a href="http://pages.github.com/" rel="nofollow noopener" target="_blank">GitHub Page</a> //無料で使える公開ページ</li>
<li>
<a href="https://bitbucket.org/" rel="nofollow noopener" target="_blank">Bitbucket</a> //非公開に対応</li>
<li>
<a href="http://octopress.org/" rel="nofollow noopener" target="_blank">Octopress</a> //Webアプリケーションの一種</li>
<li>
<a href="https://www.dropbox.com/" rel="nofollow noopener" target="_blank">Dropbox</a> //ファイルサーバー</li>
</ol>

<p>参考記事<br>
01. <a href="http://tokkonopapa.github.com/blog/2011/12/30/octopress-on-github-and-bitbucket/" rel="nofollow noopener" target="_blank">Octopressのインストールから運用管理まで</a><br>
02. <a href="http://www.sankitch.me/blog/2012/05/05/build-octopress-on-github-dropbox/" rel="nofollow noopener" target="_blank">Octopress + Github Pages + Dropbox でブログを構築</a></p>

<h2>
<span id="使ってないけど有効なツール" class="fragment"></span><a href="#%E4%BD%BF%E3%81%A3%E3%81%A6%E3%81%AA%E3%81%84%E3%81%91%E3%81%A9%E6%9C%89%E5%8A%B9%E3%81%AA%E3%83%84%E3%83%BC%E3%83%AB"><i class="fa fa-link"></i></a>使ってないけど有効なツール</h2>

<ol>
<li>
<a href="http://www.eclipse.org/downloads/" rel="nofollow noopener" target="_blank">Eclipse</a> //IDE</li>
<li>
<a href="http://panic.com/jp/coda/" rel="nofollow noopener" target="_blank">Coda2</a> //IDE or Editor ? IDE</li>
<li>
<a href="http://ja.wikipedia.org/wiki/Emacs" rel="nofollow noopener" target="_blank">Emacs</a> //Editor</li>
</ol>

<h3>
<span id="なぜこれらのツールを使わないのか" class="fragment"></span><a href="#%E3%81%AA%E3%81%9C%E3%81%93%E3%82%8C%E3%82%89%E3%81%AE%E3%83%84%E3%83%BC%E3%83%AB%E3%82%92%E4%BD%BF%E3%82%8F%E3%81%AA%E3%81%84%E3%81%AE%E3%81%8B"><i class="fa fa-link"></i></a>なぜ、これらのツールを使わないのか?</h3>

<p>これはあくまで個人的な意見ですが、<code>Eclipse</code>は日本語ドキュメントが不足しているような気がします。よって、初心者には敷居が高いです。<code>Coda2</code>はMac限定で、他のOSとの設定の共有が難しいと考えます。<code>Emacs</code>は<code>Vim</code>と比べた場合、私が求めるプラグインが多少不足している印象があります。なぜ、これらのツールを使わないのか?その理由のほとんどは、私が初心者であることが一番の原因だと思います。</p>

<h2>
<span id="virtualboxなどで使っているosと便利ツール" class="fragment"></span><a href="#virtualbox%E3%81%AA%E3%81%A9%E3%81%A7%E4%BD%BF%E3%81%A3%E3%81%A6%E3%81%84%E3%82%8Bos%E3%81%A8%E4%BE%BF%E5%88%A9%E3%83%84%E3%83%BC%E3%83%AB"><i class="fa fa-link"></i></a>VirtualBoxなどで使っているOSと便利ツール</h2>

<p><a href="https://camo.qiitausercontent.com/173095fa1ef0f3abaca5b4930c06eb92a702f1c5/687474703a2f2f6661726d392e737461746963666c69636b722e636f6d2f383030372f373136373938313837355f643134623632313637622e6a7067" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/173095fa1ef0f3abaca5b4930c06eb92a702f1c5/687474703a2f2f6661726d392e737461746963666c69636b722e636f6d2f383030372f373136373938313837355f643134623632313637622e6a7067" alt="" data-canonical-src="http://farm9.staticflickr.com/8007/7167981875_d14b62167b.jpg"></a></p>

<ol>
<li>
<a href="http://www.cygwin.com/" rel="nofollow noopener" target="_blank">Cygwin</a> //Windowsでunix環境を再現</li>
<li>
<a href="http://sourceforge.net/projects/mingw/files/Installer/mingw-get-inst/" rel="nofollow noopener" target="_blank">MinGW</a> //cygwin同様</li>
<li>
<a href="http://code.google.com/p/mintty/" rel="nofollow noopener" target="_blank">mintty</a> //cygwinのTerminal</li>
<li>
<a href="http://support.microsoft.com/kb/314881/ja" rel="nofollow noopener" target="_blank">Msiexec.exe</a> //Windowsインストーラー</li>
<li>
<a href="http://xubuntu.org/" rel="nofollow noopener" target="_blank">Xubuntu</a> //ubuntuを軽量に再構築</li>
<li>
<a href="http://www.gentoo.gr.jp/" rel="nofollow noopener" target="_blank">Gentoo</a> //Gentoo Linuxは、開発に特化したOS</li>
<li>
<a href="http://www.backtrack-linux.org/" rel="nofollow noopener" target="_blank">BackTrack</a> //脆弱性検査や無線LANツールが豊富</li>
</ol>

<p>参考記事<br>
01. <a href="http://tanakh.jp/posts/2011-11-15-windows-terminal.html" rel="nofollow noopener" target="_blank">Windowsで最高のターミナルを構築する方法</a><br>
02. <a href="http://d.hatena.ne.jp/notogawa/20120603/1338738104" rel="nofollow noopener" target="_blank">Gentoo Haskell Overlay 使うときの基本的な設定</a><br>
03. <a href="http://www.itmedia.co.jp/enterprise/articles/0806/19/news035.html" rel="nofollow noopener" target="_blank">BackTrackを使ってセキュリティをテストする</a></p>

<h2>
<span id="gimpのプラグイン一覧" class="fragment"></span><a href="#gimp%E3%81%AE%E3%83%97%E3%83%A9%E3%82%B0%E3%82%A4%E3%83%B3%E4%B8%80%E8%A6%A7"><i class="fa fa-link"></i></a>GIMPのプラグイン一覧</h2>

<p><a href="https://camo.qiitausercontent.com/8cec090dbda89a31f5edf2dd88f02a9f8fedf251/687474703a2f2f6661726d382e737461746963666c69636b722e636f6d2f373037352f373335333139313030385f376637363461623431655f6e2e6a7067" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/8cec090dbda89a31f5edf2dd88f02a9f8fedf251/687474703a2f2f6661726d382e737461746963666c69636b722e636f6d2f373037352f373335333139313030385f376637363461623431655f6e2e6a7067" alt="" data-canonical-src="http://farm8.staticflickr.com/7075/7353191008_7f764ab41e_n.jpg"></a></p>

<ol>
<li>
<a href="http://cue.yellowmagic.info/softwares/separate.html" rel="nofollow noopener" target="_blank">Separate+</a> //CMYKファイルを扱うプラグイン</li>
<li>
<a href="http://tml.pp.fi/gimp/pspi.html" rel="nofollow noopener" target="_blank">PSPI</a> //Photoshop用のプラグインをGIMPでも使う</li>
<li>
<a href="http://liquidrescale.wikidot.com/en:start" rel="nofollow noopener" target="_blank">Liquid Rescale</a> //画像のリサイズに使えるプラグイン</li>
<li>
<a href="http://registry.gimp.org/node/4235" rel="nofollow noopener" target="_blank">Wavelet Denoise</a> //ノイズを除去するためのプラグイン</li>
<li>
<a href="http://registry.gimp.org/node/1025" rel="nofollow noopener" target="_blank">Gimp-reflection</a> //特殊効果としての反射を行うプラグイン</li>
<li>
<a href="http://z-design.deviantart.com/art/Z-design-Tech-brushes-set-v2-20701749" rel="nofollow noopener" target="_blank">Z-design Tech brushes set v2</a> //サイバー風ブラシセット</li>
</ol>

<h2>
<span id="人気のある有料アプリ" class="fragment"></span><a href="#%E4%BA%BA%E6%B0%97%E3%81%AE%E3%81%82%E3%82%8B%E6%9C%89%E6%96%99%E3%82%A2%E3%83%97%E3%83%AA"><i class="fa fa-link"></i></a>人気のある有料アプリ</h2>

<p><a href="https://camo.qiitausercontent.com/a648c440c6db7e17b77ad453eabba44e306395e8/687474703a2f2f6661726d382e737461746963666c69636b722e636f6d2f373038392f373335333235353739325f666432356136623761372e6a7067" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/a648c440c6db7e17b77ad453eabba44e306395e8/687474703a2f2f6661726d382e737461746963666c69636b722e636f6d2f373038392f373335333235353739325f666432356136623761372e6a7067" alt="" data-canonical-src="http://farm8.staticflickr.com/7089/7353255792_fd25a6b7a7.jpg"></a></p>

<p>ここでは、一般的に人気があるMacの有料アプリを紹介してみたいと思います。</p>

<ol>
<li>
<a href="http://pilotmoon.com/popclip/" rel="nofollow noopener" target="_blank">PopClip</a> //マウスのCopy補助</li>
<li>
<a href="http://www.red-sweater.com/marsedit/" rel="nofollow noopener" target="_blank">MarsEdit</a> //ブログエディタ <code>代替 : Vim</code>
</li>
<li>
<a href="http://panic.com/jp/transmit/" rel="nofollow noopener" target="_blank">Transmit</a> //FTPクライアント</li>
<li>
<a href="https://agilebits.com/onepassword" rel="nofollow noopener" target="_blank">1Password</a> //パスワード管理 <code>代替 : keepass</code>
</li>
<li>
<a href="http://bjango.com/mac/istatmenus/" rel="nofollow noopener" target="_blank">iStat Menus</a> //CPUやメモリ監視 <code>代替 : topとvm_stat</code>
</li>
<li>
<a href="http://www.act2.com/software/vmware/fusion3" rel="nofollow noopener" target="_blank">Vmware fusion3</a> //仮想環境 <code>代替 : VirtualBox</code>
</li>
<li>
<a href="http://www.osfoora.com/mac/" rel="nofollow noopener" target="_blank">Osfoora</a> //Twitterクライアント <code>代替 : tweetvim</code>
</li>
<li>
<a href="http://www.binarybakery.com/" rel="nofollow noopener" target="_blank">MenuPop</a> //右クリックメニューの呼び出し</li>
<li>
<a href="http://itunes.apple.com/jp/app/textexpander-for-mac/id405274824?mt=12" rel="nofollow noopener" target="_blank">TextExpander</a> //入力補完 <code>代替 : sheet</code>
</li>
<li>
<a href="http://www.adobe.com/jp/products/photoshop.html" rel="nofollow noopener" target="_blank">Photoshop</a> //画像編集 <code>代替 : GIMP</code>
</li>
<li>
<a href="http://www.adobe.com/jp/products/illustrator.html" rel="nofollow noopener" target="_blank">Illustrator</a> //グラフィックサポート</li>
</ol>

<p>参考記事<br>
01. <a href="http://d.hatena.ne.jp/yonchu/20120414/1334422075" rel="nofollow noopener" target="_blank">Macでtmuxのステータスラインに起動時間/ロードアベレージ/メモリ使用率を表示</a></p>

<p><a href="https://camo.qiitausercontent.com/b37400784407671dcd0f118d29e1864b53b01ee6/687474703a2f2f6661726d392e737461746963666c69636b722e636f6d2f383031362f373136373938303631335f653866666531623830642e6a7067" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/b37400784407671dcd0f118d29e1864b53b01ee6/687474703a2f2f6661726d392e737461746963666c69636b722e636f6d2f383031362f373136373938303631335f653866666531623830642e6a7067" alt="" data-canonical-src="http://farm9.staticflickr.com/8016/7167980613_e8ffe1b80d.jpg"></a></p>

<h2>
<span id="最後に" class="fragment"></span><a href="#%E6%9C%80%E5%BE%8C%E3%81%AB"><i class="fa fa-link"></i></a>最後に</h2>

<p>私は、パソコンのことは何もわからない初心者なので、色々と教えて下さい。また、WindowsやLinuxで使用されている便利なアプリについても教えて欲しいです。OSに限定はなく、どんどんコメントいただきたいと思っています。</p>

<h2>
<span id="追記" class="fragment"></span><a href="#%E8%BF%BD%E8%A8%98"><i class="fa fa-link"></i></a>追記</h2>

<p>FireAlpaca <a href="http://firealpaca.com/" rel="nofollow noopener" target="_blank">http://firealpaca.com/</a></p>

<p>Alfred 2 <a href="https://www.alfredapp.com" rel="nofollow noopener" target="_blank">https://www.alfredapp.com</a></p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1" style="height:150px;">
<tr>
	<td rowspan="3">18位</td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="thumb-up-120px.png" /></i>1358</kbd>
		<a target="_blank" href="https://qiita.com/sotarok/items/0d525e568a6088f6f6bb">Git submodule の基礎</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2012-06-06<br />23:58:30</center>
	</td>
	<td style="width:200px;">
		<!--投稿者-->
		<center>
			@<a href="user/59.html">sotarok</a>(31件の記事)<br />(Mercari, Inc. 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/59/profile-images/1473683095">
		</center>
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Git]</b> <b>[AdventCalendar]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<!--
		<div style="width:350px;height:150px;overflow:scroll;">%s</div>
		-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>この記事は <a href="http://qiita.com/advent-calendar/git">Git Advent Calendar</a> 6日目の記事です！<br>
Git submodule って最初わかりにくいと思うので、基本的な説明をしようと思います。</p>

<h2>
<span id="git-submodule-とは" class="fragment"></span><a href="#git-submodule-%E3%81%A8%E3%81%AF"><i class="fa fa-link"></i></a>git submodule とは</h2>

<p><code>git submodule</code> は、外部の git リポジトリを、自分の git リポジトリのサブディレクトリとして登録し、特定の commit を参照する仕組みです。<br>
Subversion でいうところの、external と似ています。</p>

<p>さて、解説のため、手元に、リポジトリA (/path/to/a) とAの submodule として、よく使う例として  Bootstrap (元Twitter Bootstrap) を登録してみます。</p>

<p>git submodule を理解するうえで重要なのは、</p>

<ul>
<li>リポジトリAが指し示すsubmoduleとしてのBootstrapのcommit</li>
<li>現在のBootstrapのcommit</li>
</ul>

<p>です。</p>

<h2>
<span id="git-submodule-add-してみる" class="fragment"></span><a href="#git-submodule-add-%E3%81%97%E3%81%A6%E3%81%BF%E3%82%8B"><i class="fa fa-link"></i></a>git submodule add してみる</h2>

<p>では、リポジトリA内、submodule add してみます。</p>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>$ git submodule add https://github.com/twbs/bootstrap.git bootstrap
Cloning into <span class="s1">'bootstrap'</span>...
remote: Counting objects: <span class="m">73135</span>, <span class="k">done</span>.
remote: Compressing objects: <span class="m">100</span>% <span class="o">(</span><span class="m">15</span>/15<span class="o">)</span>, <span class="k">done</span>.
remote: Total <span class="m">73135</span> <span class="o">(</span>delta <span class="m">6</span><span class="o">)</span>, reused <span class="m">0</span> <span class="o">(</span>delta <span class="m">0</span><span class="o">)</span>, pack-reused <span class="m">73120</span>
Receiving objects: <span class="m">100</span>% <span class="o">(</span><span class="m">73135</span>/73135<span class="o">)</span>, <span class="m">85</span>.84 MiB <span class="p">|</span> <span class="m">3</span>.91 MiB/s, <span class="k">done</span>.
Resolving deltas: <span class="m">100</span>% <span class="o">(</span><span class="m">44541</span>/44541<span class="o">)</span>, <span class="k">done</span>.
Checking connectivity... <span class="k">done</span>.
</pre></div></div>

<p>これで 手元の <code>bootstrap</code> ディレクトリに、GitHub にある Bootstrap が submodule として登録されました。<br>
git status をみてみると .gitmodules というファイルと、submodule の入れものである <code>bootstrap</code> というディレクトリが新しく登録されています。</p>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>$ git status
<span class="c1"># On branch master</span>
<span class="c1"># Changes to be committed:</span>
<span class="c1">#   (use "git reset HEAD &lt;file&gt;..." to unstage)</span>
<span class="c1">#</span>
<span class="c1">#       new file:   .gitmodules</span>
<span class="c1">#       new file:   bootstrap</span>
<span class="c1">#</span>
</pre></div></div>

<p>diff も確認します。</p>

<div class="code-frame" data-lang="diff"><div class="highlight"><pre><span></span>$ git diff --cached
<span class="gh">diff --git a/.gitmodules b/.gitmodules</span>
new file mode 100644
<span class="gh">index 0000000..2fdbccb</span>
<span class="gd">--- /dev/null</span>
<span class="gi">+++ b/.gitmodules</span>
<span class="gu">@@ -0,0 +1,3 @@</span>
<span class="gi">+[submodule "bootstrap"]</span>
<span class="gi">+       path = bootstrap</span>
<span class="gi">+       url = https://github.com/twbs/bootstrap.git</span>
<span class="gh">diff --git a/bootstrap b/bootstrap</span>
new file mode 160000
<span class="gh">index 0000000..5c02844</span>
<span class="gd">--- /dev/null</span>
<span class="gi">+++ b/bootstrap</span>
<span class="gu">@@ -0,0 +1 @@</span>
<span class="gi">+Subproject commit 5c028448c1fc171cf4a0fd99d3a672b649bef2aa</span>
</pre></div></div>

<p>注目すべきは、 <code>+Subproject commit 5c028448c1fc171cf4a0fd99d3a672b649bef2aa</code> の diff で、これは、</p>

<ul>
<li>Bootstrap の、 <code>5c028448c1fc171cf4a0fd99d3a672b649bef2aa</code> コミットを、</li>
<li>
<code>bootstrap</code> ディレクトリに Submodule として登録した</li>
</ul>

<p>という意味になります。<br>
これをコミットしておきます。</p>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>$ git commit -m <span class="s2">"Add Twitter Bootstrap as a submodule"</span>
</pre></div></div>

<p>では、ためしに、bootstrapディレクトリに移動して、<code>git show</code> してみると、</p>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>$ <span class="nb">cd</span> bootstrap
$ git show
commit 5c028448c1fc171cf4a0fd99d3a672b649bef2aa
Merge: 5e7c5a6 0c4c1e4
Author: Chris Rebert &lt;github@rebertia.com&gt;
Date:   Wed Jul <span class="m">29</span> <span class="m">15</span>:00:54 <span class="m">2015</span> -0700

    Merge pull request <span class="c1">#16908 from twbs/crbug-309483</span>

    Remove http://crbug.com/309483 from the Wall of Browser Bugs
</pre></div></div>

<p>たしかに、現在、<code>5c028448c1fc171cf4a0fd99d3a672b649bef2aa</code> にいることがわかります。</p>

<h2>
<span id="submodule-を更新する" class="fragment"></span><a href="#submodule-%E3%82%92%E6%9B%B4%E6%96%B0%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>Submodule を更新する</h2>

<p>いま追加した Bootstrap は、master ブランチの最新のコミットでした。<br>
プロジェクトでは、別のブランチの Bootstarp が使いたくなったとします。たとえば、現在進行中の <code>14226-rebased</code> ブランチを使いたいとしましょう。 (このブランチ名等は、タイミングや、Submodule に追加するプロジェクトによって変わりますので、適宜読み替えてください)</p>

<p>このときの手順は、</p>

<ul>
<li>submodule のディレクトリに入り、対象のブランチやコミットをチェックアウトする</li>
<li>submodule の外側に戻り、その submodule の現在のコミットを記録する (指し示す先を変更する)</li>
</ul>

<p>という手順になります。</p>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>$ <span class="nb">cd</span> bootstrap
$ git branch -a
* master
  remotes/origin/14226-rebased
  remotes/origin/HEAD -&gt; origin/master
  remotes/origin/bhamodi-update-dependencies
  remotes/origin/bundler
  remotes/origin/derp
  remotes/origin/fix-15534
  remotes/origin/fix-popover-setContent
  remotes/origin/gh-pages
  remotes/origin/master
  remotes/origin/travis2

$ git checkout <span class="m">14226</span>-rebased
Branch <span class="m">14226</span>-rebased <span class="nb">set</span> up to track remote branch <span class="m">14226</span>-rebased from origin.
Switched to a new branch <span class="s1">'14226-rebased'</span>
</pre></div></div>

<p>この状態で外に戻ると、</p>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>$ <span class="nb">cd</span> ..
$ git status
Changes not staged <span class="k">for</span> commit:
  <span class="o">(</span>use <span class="s2">"git add &lt;file&gt;..."</span> to update what will be committed<span class="o">)</span>
  <span class="o">(</span>use <span class="s2">"git checkout -- &lt;file&gt;..."</span> to discard changes in working directory<span class="o">)</span>

    modified:   bootstrap <span class="o">(</span>new commits<span class="o">)</span>

no changes added to commit <span class="o">(</span>use <span class="s2">"git add"</span> and/or <span class="s2">"git commit -a"</span><span class="o">)</span>
</pre></div></div>

<p>bootstrap ディレクトリに diff が出た状態となっています。</p>

<div class="code-frame" data-lang="diff"><div class="highlight"><pre><span></span>$ git diff
<span class="gh">diff --git a/bootstrap b/bootstrap</span>
<span class="gh">index 5c02844..88697c0 160000</span>
<span class="gd">--- a/bootstrap</span>
<span class="gi">+++ b/bootstrap</span>
<span class="gu">@@ -1 +1 @@</span>
<span class="gd">-Subproject commit 5c028448c1fc171cf4a0fd99d3a672b649bef2aa</span>
<span class="gi">+Subproject commit 88697c03a9315b5f1944fc82534a824aafebda0e</span>
</pre></div></div>

<p>これが、submodule がコミットを記録する仕組みで、つまり、</p>

<ul>
<li>リポジトリAの参照する Bootstrap のコミットが、<code>5c028448c1fc171cf4a0fd99d3a672b649bef2aa</code> から <code>88697c03a9315b5f1944fc82534a824aafebda0e</code> に変更されたという意味になります。</li>
</ul>

<p>これを add してコミットしておきます</p>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>$ git add bootstrap
$ git commit -m <span class="s2">"Update submodule: Bootstrap"</span>
</pre></div></div>

<h2>
<span id="リポジトリaで別のコミットをチェックアウトする--git-submodule-update" class="fragment"></span><a href="#%E3%83%AA%E3%83%9D%E3%82%B8%E3%83%88%E3%83%AAa%E3%81%A7%E5%88%A5%E3%81%AE%E3%82%B3%E3%83%9F%E3%83%83%E3%83%88%E3%82%92%E3%83%81%E3%82%A7%E3%83%83%E3%82%AF%E3%82%A2%E3%82%A6%E3%83%88%E3%81%99%E3%82%8B--git-submodule-update"><i class="fa fa-link"></i></a>リポジトリAで別のコミットをチェックアウトする &amp; git submodule update</h2>

<p>submodule のわかりづらい点としては、おそらく、<strong>リポジトリA (submodule の外側) と submodule の中が連動しない</strong> という点ではないでしょうか。</p>

<p>たとえば、今の状態で、リポジトリAでひとつ前のコミットをチェックアウトしてみるとします。(今回はミニマムなgitリポジトリなので直前のコミットをチェックアウトしますが、実際いろいろな作業では、他のブランチをチェックアウトしたり、そういう操作の例として、です)</p>

<p>まずは、チェックアウトするため、ログを確認。</p>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>$ git log --oneline
284ffed Update submodule: Bootstrap
45db3c1 Add Twitter Bootstrap as a submodule
30ef9ed initial commit
</pre></div></div>

<p>一つ前なので、 <code>45db3c1</code> をチェックアウトします。</p>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>$ git checkout 45db3c1
...
HEAD is now at 45db3c1... Add Twitter Bootstrap as a submodule
</pre></div></div>

<p>この状態で status を見てみると、</p>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>$ git status
HEAD detached at 45db3c1
Changes not staged <span class="k">for</span> commit:
  <span class="o">(</span>use <span class="s2">"git add &lt;file&gt;..."</span> to update what will be committed<span class="o">)</span>
  <span class="o">(</span>use <span class="s2">"git checkout -- &lt;file&gt;..."</span> to discard changes in working directory<span class="o">)</span>

    modified:   bootstrap <span class="o">(</span>new commits<span class="o">)</span>

no changes added to commit <span class="o">(</span>use <span class="s2">"git add"</span> and/or <span class="s2">"git commit -a"</span><span class="o">)</span>
</pre></div></div>

<p>あれ！bootstrap ディレクトリに diff がでてしまいました。<br>
これが、<strong>連動しない、というわかりにくい点</strong> と言った点です。</p>

<ul>
<li>外側のリポジトリで前のコミットをチェックアウトしたため、そのコミット時点での submodule としての bootstrap は <code>5c028448c1fc171cf4a0fd99d3a672b649bef2aa</code> が記録されている</li>
<li>しかし、bootstrap の内側は、先程操作したため、<code>88697c03a9315b5f1944fc82534a824aafebda0e</code> を指し示したまま</li>
</ul>

<p>という状態になっています。リポジトリA上で色々なブランチやコミットを移動しても、submodule 内は自動的にチェックアウトされたりはしないんですよね。<br>
そこで、</p>

<ul>
<li>boostrapディレクトリ内を、コミット <code>88697c0</code> が指し示している bootstrap のコミット <code>5c02844</code> にする</li>
</ul>

<p>という操作が、</p>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>$ git submodule update
</pre></div></div>

<p>というコマンドになります。submodule update というコマンド名は、「submoduleを更新する」という意味なので、考えてみればそのままの意味なのですが、わかってないと混乱してしまいますね。</p>

<p>これで、</p>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>$ git status
</pre></div></div>

<p>が clean な状態となり、 bootstrap ディレクトリの中に入って確認してみると、<code>5c02844</code> がチェックアウトされた状態になっています。</p>

<h2>
<span id="まとめとその他のこと" class="fragment"></span><a href="#%E3%81%BE%E3%81%A8%E3%82%81%E3%81%A8%E3%81%9D%E3%81%AE%E4%BB%96%E3%81%AE%E3%81%93%E3%81%A8"><i class="fa fa-link"></i></a>まとめとその他のこと</h2>

<p>時間がなくなってきたので強引にまとめに入ると、</p>

<ul>
<li>submodule として追加したディレクトリは、ただの外部リポジトリへ参照を記録した箱である</li>
<li>submodule の外側は、その箱のどのコミットを参照しているのかを記録している</li>
<li>submodule の内側は、基本的には、自分が操作したときにしか更新されない</li>
</ul>

<p>よくある現象集:</p>

<ul>
<li>git pull したら submodule に <code>(new commits)</code> とか出た

<ul>
<li>これは、自分以外の誰かが submodule を更新した (指し示すコミットを変更した) 場合です</li>
<li>さっきの、<code>0a30745</code> をチェックアウトしたときと同じ</li>
<li>
<code>git submodule update</code> すれば、その指し示すコミットがチェックアウトされる</li>
</ul>
</li>
<li>git status したら submodule に <code>(modified content)</code> とか出てる

<ul>
<li>これは、submodule 内に diff がある状態です。今回の例で言えば、bootstrapディレクトリ内のなにかのファイルを変更したりすると、リポジトリAではこういうふうにいわれます</li>
<li>もとに戻したいなら、bootstrapディレクトリ内をcleanな状態にします。<code>git checkout</code>とかで変更ファイルをなくしたり。</li>
<li>中でコミットなどをすると、 <code>(new commits)</code> になります。

<ul>
<li>submodule の中身を変更して、そのコミットをリポジトリAから指し示したい場合、さらに <code>git add bootstrap</code> して <code>git commit</code> します。内側でコミット、外側でもそれをコミット、という形</li>
</ul>
</li>
</ul>
</li>
</ul>

<p>あとなんだっけ、もっと書きたいことがあったけど忘れたのでまた思い出したら書きます。</p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1" style="height:150px;">
<tr>
	<td rowspan="3">19位</td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="thumb-up-120px.png" /></i>1351</kbd>
		<a target="_blank" href="https://qiita.com/suino/items/b0dae7e00bd7165f79ea">tigでgitをもっと便利に！ addやcommitも</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2014-02-23<br />21:19:41</center>
	</td>
	<td style="width:200px;">
		<!--投稿者-->
		<center>
			@<a href="user/35965.html">suino</a>(1件の記事)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/35965/profile-images/1473686906">
		</center>
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Git]</b> <b>[tig]</b> <b>[新人プログラマ応援]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<!--
		<div style="width:350px;height:150px;overflow:scroll;">%s</div>
		-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>皆さん、tigコマンドを活用していますか？<br>
tigは、コンソール上で使えるgitブラウザです。実はずっと、ただのきれいな<code>git log</code>だと思っていたのですが、本当はそんなことはありません。かなり使えるやつなのです。</p>

<h3>
<span id="インストール" class="fragment"></span><a href="#%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB"><i class="fa fa-link"></i></a>インストール</h3>

<p>ソースコード: <a href="https://github.com/jonas/tig" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/jonas/tig</a><br>
インストール方法: <a href="https://github.com/jonas/tig/blob/master/INSTALL.adoc" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/jonas/tig/blob/master/INSTALL.adoc</a><br>
この辺りを参考にしてみてください。詳細は割愛します。</p>

<h3>
<span id="基本の使い方" class="fragment"></span><a href="#%E5%9F%BA%E6%9C%AC%E3%81%AE%E4%BD%BF%E3%81%84%E6%96%B9"><i class="fa fa-link"></i></a>基本の使い方</h3>

<p>この状態の差分を扱っていきます。いつものこれだとこんな感じ。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ git status
</pre></div></div>

<p><a href="https://camo.qiitausercontent.com/cff54a9b6cd107e07f3ce8374318ce7c54ff1576/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f33353936352f32613636663866342d393265632d643465662d323737632d6533343162393337333665352e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/cff54a9b6cd107e07f3ce8374318ce7c54ff1576/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f33353936352f32613636663866342d393265632d643465662d323737632d6533343162393337333665352e706e67" alt="f1bca6c012df42ebc426f7f4eac745ea.png" title="f1bca6c012df42ebc426f7f4eac745ea.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/35965/2a66f8f4-92ec-d4ef-277c-e341b93736e5.png"></a></p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ tig
</pre></div></div>

<p><a href="https://camo.qiitausercontent.com/453d1bf76fd19535109190df06483ba878b276ac/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f33353936352f38346334333865302d366462652d383039372d303337632d3261663539313865656439352e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/453d1bf76fd19535109190df06483ba878b276ac/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f33353936352f38346334333865302d366462652d383039372d303337632d3261663539313865656439352e706e67" alt="7a006e8830d40d1ffb745b27963d743e.png" title="7a006e8830d40d1ffb745b27963d743e.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/35965/84c438e0-6dbe-8097-037c-2af5918eed95.png"></a></p>

<p><code>git log</code>が素敵にビジュアライズされてます。この画面を<code>main view</code>といいます。<br>
ここでエンターを押すと、下半分に差分の詳細（<code>diff view</code>）が表示されます。</p>

<p><a href="https://camo.qiitausercontent.com/adb27a6edac8a0245591acb786a228afc68fb428/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f33353936352f66613237663139392d343166662d326265392d346239302d6232363238623231306563362e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/adb27a6edac8a0245591acb786a228afc68fb428/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f33353936352f66613237663139392d343166662d326265392d346239302d6232363238623231306563362e706e67" alt="8ce252eeb784be7d7bfa578b0396f98f.png" title="8ce252eeb784be7d7bfa578b0396f98f.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/35965/fa27f199-41ff-2be9-4b90-b2628b210ec6.png"></a></p>

<p>下矢印で、Unstaged changesの差分を見てみるとこんな感じです。<code>git status</code>で <code>Changes not staged for commit</code>に表示されている部分の差分ですね。</p>

<p><a href="https://camo.qiitausercontent.com/59e611bfe930a20e73f901fbe7de75bc890836c1/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f33353936352f39393835333761302d613532632d323035342d623034352d3262316330626435396536662e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/59e611bfe930a20e73f901fbe7de75bc890836c1/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f33353936352f39393835333761302d613532632d323035342d623034352d3262316330626435396536662e706e67" alt="97115556f54cae445d3d369332e9d82b.png" title="97115556f54cae445d3d369332e9d82b.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/35965/998537a0-a52c-2054-b045-2b1c0bd59e6f.png"></a></p>

<p>ちなみに、この画面で<code>Ctrl+u</code>、<code>Ctrl+d</code>、<code>j</code>、<code>k</code>で上下移動できます。vimと同じですね。</p>

<p>また、<code>main view</code>にて<code>d</code>を押すと、コミット毎の差分の詳細（<code>diff view</code>）が全画面で表示されます。画面分割では見辛い場合にはこちらをどうぞ。</p>

<h3>
<span id="tigでaddする" class="fragment"></span><a href="#tig%E3%81%A7add%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>tigでaddする</h3>

<h5>
<span id="ファイルごと-u" class="fragment"></span><a href="#%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%94%E3%81%A8-u"><i class="fa fa-link"></i></a>ファイルごと <code>u</code>
</h5>

<p><code>main view</code>にて、<code>S</code>（<code>shift+s</code>）を押すと、次のように、<code>git status</code>の結果が表示されます。</p>

<p><a href="https://camo.qiitausercontent.com/7e79a2d0cf4f8639736883915d2df07484d33fc8/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f33353936352f63363635663738392d336362642d306263342d353832372d6530623738356164643038382e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/7e79a2d0cf4f8639736883915d2df07484d33fc8/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f33353936352f63363635663738392d336362642d306263342d353832372d6530623738356164643038382e706e67" alt="kobito.1393148029.153820.png" title="kobito.1393148029.153820.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/35965/c665f789-3cbd-0bc4-5827-e0b785add088.png"></a></p>

<p>この画面でも、エンターを押すとそのファイルの差分を閲覧できます。</p>

<p>好きなファイルを選択した状態で、<code>u</code>を押してみます。<br>
<a href="https://camo.qiitausercontent.com/cbc0dfedc87fe518abf00fd64a68bc54cb00efaa/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f33353936352f38623036623261382d336530342d653839362d313738342d6134323936616265303431392e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/cbc0dfedc87fe518abf00fd64a68bc54cb00efaa/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f33353936352f38623036623261382d336530342d653839362d313738342d6134323936616265303431392e706e67" alt="kobito.1393148516.326326.png" title="kobito.1393148516.326326.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/35965/8b06b2a8-3e04-e896-1784-a4296abe0419.png"></a></p>

<p><code>MusicLife/DetailViewController.m</code>が、<code>Changed but not updated:</code>から<code>Changes to be committed:</code>に移動しました。<br>
これで、<code>git add MusicLife/DetailViewController.m</code>完了です！　超お手軽。</p>

<p><code>Changes to be committed:</code>に表示されているファイル名の上で<code>u</code>を押すと、indexから外すこともできます。</p>

<h5>
<span id="一部だけ-u" class="fragment"></span><a href="#%E4%B8%80%E9%83%A8%E3%81%A0%E3%81%91-u"><i class="fa fa-link"></i></a>一部だけ <code>u</code>
</h5>

<p>さて、先ほどaddしたファイルの差分を見てみたら、まだcommitしたくない差分も混じっていました。</p>

<p><a href="https://camo.qiitausercontent.com/009d7d3e260acd6f5338eee228a5d6bd3b9c9a1c/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f33353936352f36666438626538312d643130352d656165342d393435322d3333326230386232313536392e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/009d7d3e260acd6f5338eee228a5d6bd3b9c9a1c/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f33353936352f36666438626538312d643130352d656165342d393435322d3333326230386232313536392e706e67" alt="kobito.1393150786.602393.png" title="kobito.1393150786.602393.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/35965/6fd8be81-d105-eae4-9452-332b08b21569.png"></a></p>

<p>ここだけaddしなかったことにしたい…だけどそのためにファイルを修正するのは面倒です。<br>
そんなときは、下の画像のように、「ここからここまで」の間の行（ <strong>どの行でもOKです。</strong> 自分で範囲選択する必要はありません）を選択して、<code>u</code>を押すと、その範囲だけadd/unstageすることができます。<br>
<a href="https://camo.qiitausercontent.com/934dffa0b298121de4ff81a3d3346ba1ac125436/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f33353936352f61616631353435612d663061312d303534332d376331352d3630623133336237646536352e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/934dffa0b298121de4ff81a3d3346ba1ac125436/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f33353936352f61616631353435612d663061312d303534332d376331352d3630623133336237646536352e706e67" alt="30bcdfbaace0731cb195eba7517e3506.png" title="30bcdfbaace0731cb195eba7517e3506.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/35965/aaf1545a-f0a1-0543-7c15-60b133b7de65.png"></a></p>

<p>その後の様子。部分的にaddされているため、同じファイルが上段と中段の両方に表示されています。</p>

<p><a href="https://camo.qiitausercontent.com/120765db4935ca3e1303f8181113fa91ddc16690/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f33353936352f62323161646463352d633162312d373930332d336265332d3061613665663039356534662e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/120765db4935ca3e1303f8181113fa91ddc16690/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f33353936352f62323161646463352d633162312d373930332d336265332d3061613665663039356534662e706e67" alt="kobito.1393152062.891265.png" title="kobito.1393152062.891265.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/35965/b21addc5-c1b1-7903-3be3-0aa6ef095e4f.png"></a></p>

<h5>
<span id="1行だけ-1" class="fragment"></span><a href="#1%E8%A1%8C%E3%81%A0%E3%81%91-1"><i class="fa fa-link"></i></a>1行だけ <code>1</code>
</h5>

<p>さっきの状態に戻って、今度は1行だけadd/unstageしてみようと思います。下の画像のように操作したい行を選択して、<code>1</code>を押します。</p>

<p><a href="https://camo.qiitausercontent.com/92145b8188a5229152f4977859713279a59bb65d/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f33353936352f30366465343638632d386637642d623934632d333062652d3338356463356130303766332e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/92145b8188a5229152f4977859713279a59bb65d/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f33353936352f30366465343638632d386637642d623934632d333062652d3338356463356130303766332e706e67" alt="kobito.1393157687.663358.png" title="kobito.1393157687.663358.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/35965/06de468c-8f7d-b94c-30be-385dc5a007f3.png"></a></p>

<p>すると……</p>

<p><a href="https://camo.qiitausercontent.com/a55d7f89e3d754f38bf7f5e4b5f5cbb2c129fb95/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f33353936352f31393437646334372d386663372d366536342d643163642d6139343262366565383031652e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/a55d7f89e3d754f38bf7f5e4b5f5cbb2c129fb95/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f33353936352f31393437646334372d386663372d366536342d643163642d6139343262366565383031652e706e67" alt="kobito.1393157763.490650.png" title="kobito.1393157763.490650.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/35965/1947dc47-8fc7-6e64-d1cd-a942b6ee801e.png"></a></p>

<p>1行だけunstageされました。画面上部の<code>Changed but not updated:</code>にもファイル名が表示されています。</p>

<p>このように、tigを使うことによって、細かなコミット管理が簡単に行えるようになります！</p>

<h3>
<span id="tigでcommitする-c" class="fragment"></span><a href="#tig%E3%81%A7commit%E3%81%99%E3%82%8B-c"><i class="fa fa-link"></i></a>tigでcommitする <code>C</code>
</h3>

<p><code>status view</code>の画面で、<code>C</code>（<code>shift+c</code>）を押します。</p>

<p><a href="https://camo.qiitausercontent.com/977773ce1e145ae21c01763dcf77ca52c53cdf08/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f33353936352f65616461363433622d653661622d346461322d346461332d3365333537366238383062322e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/977773ce1e145ae21c01763dcf77ca52c53cdf08/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f33353936352f65616461363433622d653661622d346461322d346461332d3365333537366238383062322e706e67" alt="kobito.1393152373.682413.png" title="kobito.1393152373.682413.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/35965/eada643b-e6ab-4da2-4da3-3e3576b880b2.png"></a></p>

<p>いつもの<code>git commit</code>の画面ですね！ いつも通り、1行目にコミットメッセージを書いて<code>:wq</code>すればokです。<br>
なお、そこから<code>main view</code>に戻ってきても今作ったコミットは表示されていないと思うのですが、<code>R</code>（<code>shift+r</code>）か<code>F5</code>して更新すれば表示されます。</p>

<h3>
<span id="tigでpushする" class="fragment"></span><a href="#tig%E3%81%A7push%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>tigでpushする</h3>

<p>addとcommitが出来るならpushも、と思って調べてみたのですが、今のところ出来ません。</p>

<p><a href="https://github.com/jonas/tig/issues/199" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/jonas/tig/issues/199</a></p>

<p>いいキーバインドがないこと、誤ってリモートリポジトリに修正を加えてしまうことへの不安などが、現在実装されていない理由のようですね。上記Issueで作者の方が書いている方法で、tig上でpushを行うこともできるようですので、tig上で全て完結させたい方は試してみてください。</p>

<h3>
<span id="tigでbranch一覧を見る" class="fragment"></span><a href="#tig%E3%81%A7branch%E4%B8%80%E8%A6%A7%E3%82%92%E8%A6%8B%E3%82%8B"><i class="fa fa-link"></i></a>tigでbranch一覧を見る</h3>

<p><code>main view</code>で<code>H</code>（<code>shift+h</code>）を押すと、branchの一覧が表示されます。いちばん上が現在のブランチ、中央の青字がローカルブランチ、下のオレンジ色がリモートブランチです。右はそれぞれのブランチの最後のコミットメッセージです。</p>

<p><a href="https://camo.qiitausercontent.com/263807a67b2b10a95cc47715ce4e272fd44e8792/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f33353936352f37623138303236332d643866622d303738372d383032312d3862663262313432353964372e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/263807a67b2b10a95cc47715ce4e272fd44e8792/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f33353936352f37623138303236332d643866622d303738372d383032312d3862663262313432353964372e706e67" alt="kobito.1393155821.133033.png" title="kobito.1393155821.133033.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/35965/7b180263-d8fb-0787-8021-8bf2b14259d7.png"></a></p>

<h3>
<span id="他にも色々できる" class="fragment"></span><a href="#%E4%BB%96%E3%81%AB%E3%82%82%E8%89%B2%E3%80%85%E3%81%A7%E3%81%8D%E3%82%8B"><i class="fa fa-link"></i></a>他にも色々できる！</h3>

<p><code>main view</code>にて<code>h</code>を押すとヘルプ画面になります。上に挙げた以外にも色々なことができるので、ぜひ試してみてください。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>[-] status bindings
External commands:
    'C'                       `git commit`
[-] branch bindings
External commands:
    'C'                       `git checkout %(branch)`
[-] main bindings
External commands:
    'C'                       `git cherry-pick %(commit)`
[-] generic bindings
View switching
    'm'                       view-main            Show main view
    'd'                       view-diff            Show diff view
    'l'                       view-log             Show log view
    't'                       view-tree            Show tree view
    'f'                       view-blob            Show blob view
    'B'                       view-blame           Show blame view
    'H'                       view-branch          Show branch view
    'h'                       view-help            Show help view
    'p'                       view-pager           Show pager view
    'S'                       view-status          Show status view
    'c'                       view-stage           Show stage view

（以下略）
</pre></div></div>
</div>
	</td>
</tr>
</table>
<br />
<table border="1" style="height:150px;">
<tr>
	<td rowspan="3">20位</td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="thumb-up-120px.png" /></i>1299</kbd>
		<a target="_blank" href="https://qiita.com/KeithYokoma/items/fb6872a72a75e9b6f2e6">イマドキなイカした Android のオープンソースライブラリ集</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2014-01-23<br />17:54:09</center>
	</td>
	<td style="width:200px;">
		<!--投稿者-->
		<center>
			@<a href="user/31829.html">KeithYokoma</a>(142件の記事)<br />(Drivemode, inc. / DroidKaigi 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/31829/profile-images/1499656297">
		</center>
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Android]</b> <b>[gradle]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<!--
		<div style="width:350px;height:150px;overflow:scroll;">%s</div>
		-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>今から Android やるならチェックしておきたい、厳選イカしたオープンソースライブラリ一覧。</p>

<p>support-v4 や support-v7-appcompat などは公式のものなので割愛。</p>

<h1>
<span id="開発環境" class="fragment"></span><a href="#%E9%96%8B%E7%99%BA%E7%92%B0%E5%A2%83"><i class="fa fa-link"></i></a>開発環境</h1>

<h2>
<span id="android-sdk" class="fragment"></span><a href="#android-sdk"><i class="fa fa-link"></i></a>Android SDK</h2>

<ul>
<li><a href="https://github.com/embarkmobile/android-sdk-installer" rel="nofollow noopener" target="_blank">Android SDK Installer</a></li>
</ul>

<p>公式からダウンロードしてポチポチとチェックを入れてはダウンロードして…が面倒くさいならコレ。<br>
シェルからコマンド一発でダウンロード出来るので、CI で使うのにも便利。</p>

<ul>
<li><a href="https://github.com/pbreault/adb-idea" rel="nofollow noopener" target="_blank">ADB Idea</a></li>
</ul>

<p>AndroidStudio および IntelliJ 用のプラグインで、IDE から ADB コマンドを簡単に利用できるようにするためのもの。メニューから選択してコマンドを実行できるようにしてくれる。</p>

<h1>
<span id="コード最適化" class="fragment"></span><a href="#%E3%82%B3%E3%83%BC%E3%83%89%E6%9C%80%E9%81%A9%E5%8C%96"><i class="fa fa-link"></i></a>コード最適化</h1>

<h2>
<span id="di-コンテナ" class="fragment"></span><a href="#di-%E3%82%B3%E3%83%B3%E3%83%86%E3%83%8A"><i class="fa fa-link"></i></a>DI コンテナ</h2>

<ul>
<li><a href="https://github.com/square/dagger" rel="nofollow noopener" target="_blank">Dagger</a></li>
</ul>

<p>square 社の Android および Java 向け DI コンテナ。<br>
<code>javax.inject.Inject</code> アノテーションを使う。<br>
コンパイル時にコードを生成する。</p>

<ul>
<li><a href="https://github.com/hnakagawa/proton" rel="nofollow noopener" target="_blank">Proton</a></li>
</ul>

<p>Android 向け DI コンテナ。<br>
<code>javax.inject.Inject</code> アノテーションを使う。<br>
実行時にインスタンスを注入する。</p>

<ul>
<li><a href="https://github.com/JakeWharton/butterknife" rel="nofollow noopener" target="_blank">ButterKnife</a></li>
</ul>

<p>View のインジェクションに特化している。</p>

<ul>
<li><a href="https://github.com/roboguice/roboguice" rel="nofollow noopener" target="_blank">RoboGuice</a></li>
</ul>

<p>Google が提供する Guice の Android 向けラッパー。<br>
<code>javax.inject.Inject</code> アノテーションを使う他、独自にインジェクション用のアノテーションも提供している。</p>

<h2>
<span id="view-の生成" class="fragment"></span><a href="#view-%E3%81%AE%E7%94%9F%E6%88%90"><i class="fa fa-link"></i></a>View の生成</h2>

<ul>
<li><a href="https://github.com/RomainPiel/Michelangelo" rel="nofollow noopener" target="_blank">Michelangelo</a></li>
</ul>

<p>アノテーションを用いてカスタムビューのコードを整理できる。<br>
ビューがインフレートされた後に実行したい処理をアノテーションで示すことも出来る。</p>

<h2>
<span id="リソース" class="fragment"></span><a href="#%E3%83%AA%E3%82%BD%E3%83%BC%E3%82%B9"><i class="fa fa-link"></i></a>リソース</h2>

<ul>
<li><a href="https://github.com/JakeWharton/paraphrase" rel="nofollow noopener" target="_blank">Paraphrase</a></li>
</ul>

<p>文字列リソースのフォーマットをよりリーダブルに、かつデバッガブルにするためのライブラリ。<br>
文字列リソースのフォーマットに関するプログラミングのエラーが、ランタイムではなくコンパイル時に判明するようになる。</p>

<h2>
<span id="ユーティリティ" class="fragment"></span><a href="#%E3%83%A6%E3%83%BC%E3%83%86%E3%82%A3%E3%83%AA%E3%83%86%E3%82%A3"><i class="fa fa-link"></i></a>ユーティリティ</h2>

<ul>
<li><a href="https://github.com/excilys/androidannotations" rel="nofollow noopener" target="_blank">AndroidAnnotations</a></li>
</ul>

<p>アノテーションを使って、コンパイル時にコードを自動生成させることで、プログラマの書くコード量を減らすライブラリ。<br>
DI コンテナとして、View やシステムサービス、リソース、Intent に含まれる Extra を注入することが出来る他、メソッドがメインスレッドで実行されるかバックグラウンドスレッドで実行されるかも制御できる。</p>

<ul>
<li><a href="https://github.com/nohana/Amalgam/" rel="nofollow noopener" target="_blank">Amalgam</a></li>
</ul>

<p>Apache Commons のような Commons ライブラリで、Android 用。<br>
<code>Context#getSystemService(String)</code> のラッパーや、各種 Manager 類のラッパーがある。</p>

<ul>
<li><a href="https://github.com/google/guava" rel="nofollow noopener" target="_blank">Guava</a></li>
</ul>

<p>Apache Commons のような Commons ライブラリ。<br>
Java 向けに各種のユーティリティが取り揃えられている。</p>

<h2>
<span id="機種依存解決" class="fragment"></span><a href="#%E6%A9%9F%E7%A8%AE%E4%BE%9D%E5%AD%98%E8%A7%A3%E6%B1%BA"><i class="fa fa-link"></i></a>機種依存解決</h2>

<ul>
<li><a href="https://github.com/mixi-inc/Android-Device-Compatibility" rel="nofollow noopener" target="_blank">AndroidDeviceCompatibility</a></li>
</ul>

<p>機種ごとの依存を吸収する為のライブラリ。</p>

<h2>
<span id="モジュール化" class="fragment"></span><a href="#%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB%E5%8C%96"><i class="fa fa-link"></i></a>モジュール化</h2>

<ul>
<li><a href="https://github.com/hnakagawa/android-promise" rel="nofollow noopener" target="_blank">android-promise</a></li>
</ul>

<p>非同期な処理をモジュール化する為のライブラリ。</p>

<h1>
<span id="ui-コンポーネント" class="fragment"></span><a href="#ui-%E3%82%B3%E3%83%B3%E3%83%9D%E3%83%BC%E3%83%8D%E3%83%B3%E3%83%88"><i class="fa fa-link"></i></a>UI コンポーネント</h1>

<h2>
<span id="pull-to-refresh" class="fragment"></span><a href="#pull-to-refresh"><i class="fa fa-link"></i></a>Pull to refresh</h2>

<ul>
<li><a href="https://github.com/chrisbanes/ActionBar-PullToRefresh" rel="nofollow noopener" target="_blank">ActionBar PullToRefresh</a></li>
</ul>

<p>引っ張ると ActionBar に更新の表示が出る UI コンポーネント。</p>

<ul>
<li><a href="https://github.com/chrisbanes/Android-PullToRefresh/" rel="nofollow noopener" target="_blank">Android PullToRefresh</a></li>
</ul>

<p>Twitter スタイルの引っ張り更新の UI コンポーネント。<br>
現在メンテは終了しており、使うのであれば、上記の ActionBar PullToRefresh を使うほうが良い。</p>

<h2>
<span id="actionbar" class="fragment"></span><a href="#actionbar"><i class="fa fa-link"></i></a>ActionBar</h2>

<ul>
<li><a href="https://github.com/ManuelPeinado/FadingActionBar" rel="nofollow noopener" target="_blank">FadingActionBar</a></li>
</ul>

<p>ActionBar にフェードアウト効果を適用するためのライブラリ。</p>

<ul>
<li><a href="https://github.com/ManuelPeinado/GlassActionBar" rel="nofollow noopener" target="_blank">GlassActionBar</a></li>
</ul>

<p>ActionBar に透かし窓のような効果を適用するためのライブラリ。</p>

<h2>
<span id="webview" class="fragment"></span><a href="#webview"><i class="fa fa-link"></i></a>WebView</h2>

<ul>
<li><a href="https://github.com/mogoweb/chromium_webview" rel="nofollow noopener" target="_blank">Chromium WebView</a></li>
</ul>

<p>KitKat で導入された、Chromium エンジンの WebView のバックポートライブラリ。<br>
これを使えば、OS バージョンや機種ごとの WebKit の実装依存問題が解決できるかもしれない。</p>

<h2>
<span id="textfont" class="fragment"></span><a href="#textfont"><i class="fa fa-link"></i></a>Text・Font</h2>

<ul>
<li><a href="https://github.com/rockerhieu/emojicon" rel="nofollow noopener" target="_blank">emojicon</a></li>
</ul>

<p>TextView 上に絵文字を表示するためのライブラリ。</p>

<ul>
<li><a href="https://github.com/MarsVard/IonIconView" rel="nofollow noopener" target="_blank">IonIconView</a></li>
</ul>

<p>ionicons.com で提供されているアイコンを View に表示可能にするライブラリ。</p>

<ul>
<li><a href="https://github.com/JoanZapata/android-iconify" rel="nofollow noopener" target="_blank">Android Iconify</a></li>
</ul>

<p>FontAwesome の各種フォントをアプリ内で使えるようにするライブラリ。</p>

<ul>
<li><a href="https://github.com/chrisjenx/Calligraphy" rel="nofollow noopener" target="_blank">Calligraphy</a></li>
</ul>

<p>カスタムフォントを容易に扱えるようにしてくれるライブラリ。</p>

<h2>
<span id="calendar" class="fragment"></span><a href="#calendar"><i class="fa fa-link"></i></a>Calendar</h2>

<ul>
<li><a href="https://github.com/tyczj/ExtendedCalendarView" rel="nofollow noopener" target="_blank">ExtendedCalendarView</a></li>
</ul>

<p>カレンダーのコンテンツを保持する DB とセットで、イベントを表示できるカレンダー View を提供してくれるライブラリ。</p>

<ul>
<li><a href="https://github.com/tyczj/GoogleCalendarView" rel="nofollow noopener" target="_blank">GoogleCalendarView</a></li>
</ul>

<p>Google 公式のカレンダーアプリからのバックポート。</p>

<h2>
<span id="エフェクト" class="fragment"></span><a href="#%E3%82%A8%E3%83%95%E3%82%A7%E3%82%AF%E3%83%88"><i class="fa fa-link"></i></a>エフェクト</h2>

<ul>
<li><a href="https://github.com/kikoso/android-stackblur" rel="nofollow noopener" target="_blank">Android StackBlur</a></li>
</ul>

<p>Bitmap にブラーのエフェクトをかける。</p>

<ul>
<li><a href="https://github.com/CyberAgent/android-gpuimage" rel="nofollow noopener" target="_blank">GPUImage Android</a></li>
</ul>

<p>iOS 向けに作られていた GPU Image の Android 移植版。</p>

<h2>
<span id="通知" class="fragment"></span><a href="#%E9%80%9A%E7%9F%A5"><i class="fa fa-link"></i></a>通知</h2>

<ul>
<li><a href="https://github.com/JohnPersano/SuperToasts" rel="nofollow noopener" target="_blank">SuperToasts</a></li>
</ul>

<p>Toast を拡張して、ボタンを置いたり見た目を少し変えたりすることが出来るようになるライブラリ。</p>

<ul>
<li><a href="https://github.com/keyboardsurfer/Crouton" rel="nofollow noopener" target="_blank">Crouton</a></li>
</ul>

<p>標準の Toast の代替として、Context に依存してカスタム可能な Toast を提供する。</p>

<h2>
<span id="レイアウト" class="fragment"></span><a href="#%E3%83%AC%E3%82%A4%E3%82%A2%E3%82%A6%E3%83%88"><i class="fa fa-link"></i></a>レイアウト</h2>

<ul>
<li><a href="https://github.com/ManuelPeinado/ImageLayout" rel="nofollow noopener" target="_blank">ImageLayout</a></li>
</ul>

<p>画像の上に View を配置するための特別なレイアウトコンポーネント。<br>
独自の座標系を持って管理している。</p>

<h2>
<span id="listviewgridview" class="fragment"></span><a href="#listviewgridview"><i class="fa fa-link"></i></a>ListView・GridView</h2>

<ul>
<li><a href="https://github.com/emilsjolander/StickyListHeaders" rel="nofollow noopener" target="_blank">StickyListHeaders</a></li>
</ul>

<p>Instagram のような、ListView のスクロールに追従してくるヘッダを提供する。</p>

<ul>
<li><a href="https://github.com/TonicArtos/StickyGridHeaders" rel="nofollow noopener" target="_blank">StickyGridHeaders</a></li>
</ul>

<p>上記ライブラリの GridView 版。</p>

<ul>
<li><a href="https://github.com/etsy/AndroidStaggeredGrid" rel="nofollow noopener" target="_blank">Android StaggeredGrid</a></li>
</ul>

<p>高さの異なるグリッドを扱える。</p>

<ul>
<li><a href="https://github.com/SimonVT/adapterviewanimator" rel="nofollow noopener" target="_blank">AdapterView Animator</a></li>
</ul>

<p>AdapterView の行を追加したときのアニメーションを実現するヘルパライブラリ。</p>

<ul>
<li><a href="https://github.com/commonsguy/cwac-touchlist" rel="nofollow noopener" target="_blank">cwac-touchlist</a></li>
</ul>

<p>List のドラッグ・アンド・ドロップを実現するライブラリ。</p>

<h2>
<span id="viewpager" class="fragment"></span><a href="#viewpager"><i class="fa fa-link"></i></a>ViewPager</h2>

<ul>
<li><a href="https://github.com/jfeinstein10/JazzyViewPager" rel="nofollow noopener" target="_blank">JazzyViewPager</a></li>
</ul>

<p>スワイプ時のアニメーションをカスタマイズできる。</p>

<ul>
<li><a href="https://github.com/JakeWharton/Android-ViewPagerIndicator" rel="nofollow noopener" target="_blank">Android ViewPagerIndicator</a></li>
</ul>

<p>ViewPager に追随して位置表示する View。</p>

<h2>
<span id="dialog" class="fragment"></span><a href="#dialog"><i class="fa fa-link"></i></a>Dialog</h2>

<ul>
<li><a href="https://github.com/inmite/android-styled-dialogs" rel="nofollow noopener" target="_blank">Android Styled Dialogs</a></li>
</ul>

<p>ダイアログにテーマでスタイルを適用出来るようにするためのライブラリ。</p>

<h2>
<span id="imageview" class="fragment"></span><a href="#imageview"><i class="fa fa-link"></i></a>ImageView</h2>

<ul>
<li><a href="https://github.com/MostafaGazar/CustomShapeImageView" rel="nofollow noopener" target="_blank">CustomShape ImageView</a></li>
</ul>

<p>画像をくり抜いて、様々な形に出来る ImageView。</p>

<ul>
<li><a href="https://github.com/vinc3m1/RoundedImageView" rel="nofollow noopener" target="_blank">Rounded ImageView</a></li>
</ul>

<p>角丸の ImageView を作れるライブラリ。</p>

<ul>
<li><a href="https://github.com/chrisbanes/PhotoView" rel="nofollow noopener" target="_blank">PhotoView</a></li>
<li><a href="https://github.com/sephiroth74/ImageViewZoom" rel="nofollow noopener" target="_blank">ImageViewZoom</a></li>
</ul>

<p>画像の拡大縮小機能を持つ ImageView。</p>

<h2>
<span id="チャート" class="fragment"></span><a href="#%E3%83%81%E3%83%A3%E3%83%BC%E3%83%88"><i class="fa fa-link"></i></a>チャート</h2>

<ul>
<li><a href="https://bitbucket.org/danielnadeau/holographlibrary" rel="nofollow noopener" target="_blank">Holo Graph Library</a></li>
</ul>

<p>Holo スタイルのグラフ・チャートを作るライブラリ。</p>

<ul>
<li><a href="https://code.google.com/p/achartengine/" rel="nofollow noopener" target="_blank">AChartEngine</a></li>
</ul>

<p>こちらも、グラフ・チャートを作るライブラリ。</p>

<h2>
<span id="interaction" class="fragment"></span><a href="#interaction"><i class="fa fa-link"></i></a>Interaction</h2>

<ul>
<li><a href="https://github.com/romannurik/Android-SwipeToDismiss" rel="nofollow noopener" target="_blank">Android Swipe To Dismiss</a></li>
</ul>

<p>View をスワイプして消す操作を実現するライブラリ。</p>

<ul>
<li><a href="https://github.com/timroes/EnhancedListView" rel="nofollow noopener" target="_blank">EnhancedListView</a></li>
</ul>

<p>Gmail のように、行をスワイプすることで削除を実行するインタラクションを実現でき、かつ、Undo の機能も有する ListView の拡張。</p>

<h2>
<span id="その他" class="fragment"></span><a href="#%E3%81%9D%E3%81%AE%E4%BB%96"><i class="fa fa-link"></i></a>その他</h2>

<ul>
<li><a href="https://github.com/umano/AndroidSlidingUpPanel" rel="nofollow noopener" target="_blank">Android Sliding Up Panel</a></li>
</ul>

<p>Google Play Music のように、下からせり出してくるパネルを表示するライブラリ。</p>

<ul>
<li><a href="https://github.com/gabrielemariotti/cardslib" rel="nofollow noopener" target="_blank">CardsLib</a></li>
</ul>

<p>カード UI を構築するためのライブラリセット。</p>

<ul>
<li><a href="https://github.com/Todd-Davies/ProgressWheel" rel="nofollow noopener" target="_blank">ProgressWheel</a></li>
</ul>

<p>ぐるぐる回るプログレスバーをカスタマイズするライブラリ。</p>

<ul>
<li><a href="https://github.com/Bearded-Hen/Android-Bootstrap" rel="nofollow noopener" target="_blank">Android Bootstrap</a></li>
</ul>

<p>FontAwesome と共に Bootstrap スタイルのボタン類を使えるようにするライブラリ。</p>

<ul>
<li><a href="https://github.com/siyamed/android-satellite-menu" rel="nofollow noopener" target="_blank">Android Satellite Menu</a></li>
</ul>

<p>Path みたいなメニューを構築するライブラリ。</p>

<ul>
<li><a href="https://github.com/JakeWharton/NineOldAndroids" rel="nofollow noopener" target="_blank">NineOldAndroids</a></li>
</ul>

<p>API 11 から登場したアニメーションフレームワークをバックポートするライブラリ。</p>

<ul>
<li><a href="https://github.com/Prototik/HoloEverywhere" rel="nofollow noopener" target="_blank">Holo Everywhere</a></li>
</ul>

<p>Holo テーマのバックポートライブラリ。</p>

<ul>
<li><a href="https://github.com/LarsWerkman/HoloColorPicker" rel="nofollow noopener" target="_blank">Holo ColorPicker</a></li>
</ul>

<p>色を選択する View のライブラリ。</p>

<ul>
<li><a href="https://github.com/throrin19/Android-Validator" rel="nofollow noopener" target="_blank">Android Validator</a></li>
</ul>

<p>入力のバリデーションのためのライブラリ。</p>

<ul>
<li><a href="https://code.google.com/p/android-gifview/" rel="nofollow noopener" target="_blank">android-gifview</a></li>
</ul>

<p>Gif アニメーションを再生可能な View のライブラリ。</p>

<h1>
<span id="シリアライズ" class="fragment"></span><a href="#%E3%82%B7%E3%83%AA%E3%82%A2%E3%83%A9%E3%82%A4%E3%82%BA"><i class="fa fa-link"></i></a>シリアライズ</h1>

<h2>
<span id="json" class="fragment"></span><a href="#json"><i class="fa fa-link"></i></a>Json</h2>

<ul>
<li><a href="https://code.google.com/p/google-gson/" rel="nofollow noopener" target="_blank">Google Gson</a></li>
</ul>

<p>リフレクションによってマッピングするライブラリ。</p>

<ul>
<li><a href="http://jackson.codehaus.org/" rel="nofollow noopener" target="_blank">Jackson</a></li>
</ul>

<p>超高速にシリアライズ・デシリアライズできるライブラリ。</p>

<h1>
<span id="データベース" class="fragment"></span><a href="#%E3%83%87%E3%83%BC%E3%82%BF%E3%83%99%E3%83%BC%E3%82%B9"><i class="fa fa-link"></i></a>データベース</h1>

<h2>
<span id="orm" class="fragment"></span><a href="#orm"><i class="fa fa-link"></i></a>ORM</h2>

<ul>
<li><a href="https://github.com/greenrobot/greenDAO" rel="nofollow noopener" target="_blank">GreenDAO</a></li>
</ul>

<p>グリーンだよ！いいんだよ！</p>

<p>スキーマ、エンティティをそれぞれ定義するクラスを使ってマッピングする。</p>

<ul>
<li><a href="https://github.com/pardom/ActiveAndroid" rel="nofollow noopener" target="_blank">Active Android</a></li>
</ul>

<p>エンティティクラスの宣言にアノテーションを付けてマッピングする。</p>

<h1>
<span id="イベントバス" class="fragment"></span><a href="#%E3%82%A4%E3%83%99%E3%83%B3%E3%83%88%E3%83%90%E3%82%B9"><i class="fa fa-link"></i></a>イベントバス</h1>

<p>使い方は<a href="http://qiita.com/KeithYokoma/items/793aaac6994c9242808f" id="reference-1124897c9979dd48aabf">こちら</a>。</p>

<ul>
<li><a href="https://github.com/square/otto" rel="nofollow noopener" target="_blank">otto</a></li>
</ul>

<p>Guava ベースの Android 向け軽量イベントバス。</p>

<ul>
<li><a href="https://github.com/greenrobot/EventBus" rel="nofollow noopener" target="_blank">EventBus</a></li>
</ul>

<p>otto より機能的に拡張のあるイベントバス。</p>

<h1>
<span id="デバッグ支援" class="fragment"></span><a href="#%E3%83%87%E3%83%90%E3%83%83%E3%82%B0%E6%94%AF%E6%8F%B4"><i class="fa fa-link"></i></a>デバッグ支援</h1>

<h2>
<span id="view" class="fragment"></span><a href="#view"><i class="fa fa-link"></i></a>View</h2>

<ul>
<li><a href="https://github.com/JakeWharton/scalpel" rel="nofollow noopener" target="_blank">scalpel</a></li>
</ul>

<p>View の階層構造を 3D 表示するためのツール。</p>

<h2>
<span id="リソース-1" class="fragment"></span><a href="#%E3%83%AA%E3%82%BD%E3%83%BC%E3%82%B9-1"><i class="fa fa-link"></i></a>リソース</h2>

<ul>
<li><a href="https://github.com/JakeWharton/madge" rel="nofollow noopener" target="_blank">Madge</a></li>
</ul>

<p>Bitmap がオリジナルのサイズで表示されているかどうかを一目見て分かるようにする。</p>

<h2>
<span id="クラッシュログ" class="fragment"></span><a href="#%E3%82%AF%E3%83%A9%E3%83%83%E3%82%B7%E3%83%A5%E3%83%AD%E3%82%B0"><i class="fa fa-link"></i></a>クラッシュログ</h2>

<ul>
<li><a href="https://github.com/SalomonBrys/Native-Crash-Handler" rel="nofollow noopener" target="_blank">Native Crash Handler</a></li>
</ul>

<p>Native コードのエラーハンドリングとして、SIGSEGV などを検出して Java の例外を生成してくれる。<br>
これによって、Google Play などで拾いきれなかったクラッシュのログを収集できるようになる。</p>

<h2>
<span id="ログ出力" class="fragment"></span><a href="#%E3%83%AD%E3%82%B0%E5%87%BA%E5%8A%9B"><i class="fa fa-link"></i></a>ログ出力</h2>

<ul>
<li><a href="https://github.com/JakeWharton/hugo" rel="nofollow noopener" target="_blank">hugo</a></li>
</ul>

<p>アノテーションによるメソッドコールのロギングライブラリ。</p>

<ul>
<li><a href="http://deploygate.com/" rel="nofollow noopener" target="_blank">deploygate</a></li>
</ul>

<p>ログ収集だけでなく、apk の配布までも楽ちんにしてくれるサービス。<br>
sdk を組み込めばかなりのことが Web コンソール上で出来る。</p>

<h1>
<span id="画像" class="fragment"></span><a href="#%E7%94%BB%E5%83%8F"><i class="fa fa-link"></i></a>画像</h1>

<h2>
<span id="画像読み込みキャッシュ" class="fragment"></span><a href="#%E7%94%BB%E5%83%8F%E8%AA%AD%E3%81%BF%E8%BE%BC%E3%81%BF%E3%82%AD%E3%83%A3%E3%83%83%E3%82%B7%E3%83%A5"><i class="fa fa-link"></i></a>画像読み込み・キャッシュ</h2>

<ul>
<li><a href="https://github.com/nostra13/Android-Universal-Image-Loader" rel="nofollow noopener" target="_blank">Android Universal Image Loader</a></li>
</ul>

<p>各種設定に基いて画像の読み込み・キャッシュ・表示をしてくれるライブラリ。</p>

<ul>
<li><a href="https://github.com/square/picasso" rel="nofollow noopener" target="_blank">picasso</a></li>
</ul>

<p>メソッドチェーンによる画像読み込み・キャッシュ・表示の為のライブラリ。</p>

<h2>
<span id="加工" class="fragment"></span><a href="#%E5%8A%A0%E5%B7%A5"><i class="fa fa-link"></i></a>加工</h2>

<ul>
<li><a href="https://github.com/biokys/cropimage" rel="nofollow noopener" target="_blank">CropImage</a></li>
</ul>

<p>画像の切り抜きをサポートするライブラリ。</p>

<h1>
<span id="ハイブリッドアプリケーション開発" class="fragment"></span><a href="#%E3%83%8F%E3%82%A4%E3%83%96%E3%83%AA%E3%83%83%E3%83%89%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E9%96%8B%E7%99%BA"><i class="fa fa-link"></i></a>ハイブリッドアプリケーション開発</h1>

<p>ネイティブ実装をベースに、JavaScriptInterface と連携してハイブリッドアプリケーションを開発するフレームワーク。</p>

<ul>
<li><a href="https://github.com/rejasupotaro/Hybridge" rel="nofollow noopener" target="_blank">Hybridge</a></li>
<li><a href="https://github.com/mixi-inc/triaina" rel="nofollow noopener" target="_blank">triaina</a></li>
</ul>

<h1>
<span id="テスト" class="fragment"></span><a href="#%E3%83%86%E3%82%B9%E3%83%88"><i class="fa fa-link"></i></a>テスト</h1>

<h2>
<span id="テストユーティリティ" class="fragment"></span><a href="#%E3%83%86%E3%82%B9%E3%83%88%E3%83%A6%E3%83%BC%E3%83%86%E3%82%A3%E3%83%AA%E3%83%86%E3%82%A3"><i class="fa fa-link"></i></a>テストユーティリティ</h2>

<ul>
<li><a href="https://github.com/square/fest-android" rel="nofollow noopener" target="_blank">fest-android</a></li>
</ul>

<p>Android のテストに FEST を導入できる。</p>

<ul>
<li><a href="https://github.com/robolectric/robolectric" rel="nofollow noopener" target="_blank">robolectric</a></li>
</ul>

<p>Android のテストの高速化</p>

<ul>
<li><a href="https://code.google.com/p/robotium/" rel="nofollow noopener" target="_blank">Robotium</a></li>
</ul>

<p>UI のテストを Selenium のようにかける、かつ Android フレームワークが持つ UI テストフレームワークを拡張している。</p>

<h2>
<span id="モック" class="fragment"></span><a href="#%E3%83%A2%E3%83%83%E3%82%AF"><i class="fa fa-link"></i></a>モック</h2>

<ul>
<li><a href="https://code.google.com/p/mockito/" rel="nofollow noopener" target="_blank">Mockito</a></li>
</ul>

<p>いろんなものをモックするためのライブラリ。</p>

<ul>
<li><a href="https://github.com/rejasupotaro/RobotGirl" rel="nofollow noopener" target="_blank">RobotGirl</a></li>
</ul>

<p>ActiveAndroid 向けのフィクスチャライブラリ。</p>

<h1>
<span id="通信" class="fragment"></span><a href="#%E9%80%9A%E4%BF%A1"><i class="fa fa-link"></i></a>通信</h1>

<h2>
<span id="rest" class="fragment"></span><a href="#rest"><i class="fa fa-link"></i></a>REST</h2>

<ul>
<li><a href="https://github.com/square/retrofit" rel="nofollow noopener" target="_blank">Retrofit</a></li>
<li><a href="https://github.com/sahan/RoboZombie" rel="nofollow noopener" target="_blank">RoboZombie</a></li>
</ul>

<p>REST クライアントを簡単に生成するためのライブラリ。</p>

<h2>
<span id="http通信spdy" class="fragment"></span><a href="#http%E9%80%9A%E4%BF%A1spdy"><i class="fa fa-link"></i></a>Http通信・SPDY</h2>

<ul>
<li><a href="https://github.com/square/okhttp" rel="nofollow noopener" target="_blank">okhttp</a></li>
</ul>

<p>http(s) 通信 と SPDY に対応したクライアント。</p>

<ul>
<li><a href="https://android.googlesource.com/platform/frameworks/volley/" rel="nofollow noopener" target="_blank">volley</a></li>
</ul>

<p>通信処理をいろいろ便利にしてくれるユーティリティ。</p>

<h1>
<span id="ビルドスクリプト" class="fragment"></span><a href="#%E3%83%93%E3%83%AB%E3%83%89%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%97%E3%83%88"><i class="fa fa-link"></i></a>ビルドスクリプト</h1>

<h2>
<span id="gradle" class="fragment"></span><a href="#gradle"><i class="fa fa-link"></i></a>Gradle</h2>

<ul>
<li><a href="https://github.com/gfx/gradle-android-utils" rel="nofollow noopener" target="_blank">Gradle Android Utils</a></li>
</ul>

<p>ビルドスクリプトのユーティリティ集。</p>

<ul>
<li><a href="https://github.com/chrisbanes/gradle-mvn-push" rel="nofollow noopener" target="_blank">Gradle MVN Push</a></li>
</ul>

<p>Maven Repository に aar な成果物を push するヘルパ。</p>

<ul>
<li><a href="https://github.com/JakeWharton/gradle-android-test-plugin" rel="nofollow noopener" target="_blank">Gradle Android Test Plugin</a></li>
</ul>

<p>Gradle で Android のテストを実行するためのヘルパプラグイン。</p>

<h1>
<span id="その他便利系" class="fragment"></span><a href="#%E3%81%9D%E3%81%AE%E4%BB%96%E4%BE%BF%E5%88%A9%E7%B3%BB"><i class="fa fa-link"></i></a>その他便利系</h1>

<h2>
<span id="アップデートチェック" class="fragment"></span><a href="#%E3%82%A2%E3%83%83%E3%83%97%E3%83%87%E3%83%BC%E3%83%88%E3%83%81%E3%82%A7%E3%83%83%E3%82%AF"><i class="fa fa-link"></i></a>アップデートチェック</h2>

<ul>
<li><a href="https://github.com/rampo/UpdateChecker" rel="nofollow noopener" target="_blank">UpdateChecker</a></li>
</ul>

<p>アップデートがあった時にダイアログを出す。</p>

<h2>
<span id="レビュー" class="fragment"></span><a href="#%E3%83%AC%E3%83%93%E3%83%A5%E3%83%BC"><i class="fa fa-link"></i></a>レビュー</h2>

<ul>
<li><a href="https://github.com/kskkbys/Android-RateThisApp" rel="nofollow noopener" target="_blank">RateThisApp</a></li>
</ul>

<p>レビューを促すダイアログを出す。</p>

<h2>
<span id="job-queue" class="fragment"></span><a href="#job-queue"><i class="fa fa-link"></i></a>Job Queue</h2>

<ul>
<li><a href="https://github.com/path/android-priority-jobqueue" rel="nofollow noopener" target="_blank">Priority JobQueue</a></li>
</ul>

<p>優先度付きのジョブキュー</p>

<ul>
<li><a href="https://github.com/jfsso/nirai" rel="nofollow noopener" target="_blank">nirai</a></li>
</ul>

<p>IntentService によるジョブキューの仕組み。<br>
詳しくは<a href="http://qiita.com/jfsso/items/106f48de7ec0612038bb" id="reference-5dcfa1a222a5afeba80a">こちら</a></p>

<h2>
<span id="sharedpreferences" class="fragment"></span><a href="#sharedpreferences"><i class="fa fa-link"></i></a>SharedPreferences</h2>

<ul>
<li><a href="https://github.com/dkunzler/esperandro" rel="nofollow noopener" target="_blank">esperandro</a></li>
</ul>

<p>SharedPreferences のラッパー。</p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1" style="height:150px;">
<tr>
	<td rowspan="3">21位</td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="thumb-up-120px.png" /></i>1293</kbd>
		<a target="_blank" href="https://qiita.com/vvakame/items/83366fbfa47562fafbf4">Gradle入門</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-04-24<br />02:02:36</center>
	</td>
	<td style="width:200px;">
		<!--投稿者-->
		<center>
			@<a href="user/13283.html">vvakame</a>(48件の記事)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/13283/profile-images/1473682747">
		</center>
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[gradle]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<!--
		<div style="width:350px;height:150px;overflow:scroll;">%s</div>
		-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>この記事は、<a href="http://www.amazon.co.jp/gp/product/B00C7AMKTU?ie=UTF8&amp;camp=1207&amp;creative=8411&amp;creativeASIN=B00C7AMKTU&amp;linkCode=shr&amp;tag=damenako-22" rel="nofollow noopener" target="_blank">日経ソフトウェア 2013年 06月号 04/24発売</a> のステマ記事です。</p>

<p>6月号に、<a href="https://twitter.com/keiji_ariyama" rel="nofollow noopener" target="_blank">@keiji_ariyama</a>(前座部分担当) と <a href="https://twitter.com/vvakame" rel="nofollow noopener" target="_blank">僕</a>(Gradle概要担当) と <a href="https://twitter.com/sys1yagi" rel="nofollow noopener" target="_blank">@sys1yagi</a>(Android対応部分担当) という分担でGradle入門的な記事を書きました。</p>

<p>ですが、僕の目的としてはトップゲート社員への布教を主目的と考えて書いたため、本来要求されている分量を(わざと)大幅にオーバーして書いていました。雑誌に掲載されなかった溢れ分をネットで公開して良いか打診した所、「全文掲載でも良いですよ」という豪気なお許しを頂いたのでここに公開します。この場を借りてお礼申し上げます。<br>
プロの編集さんの手を経て、だいぶわかりやすく噛み砕かれたものが雑誌のほうには掲載されていますので、ここに書いてある内容が難しいなぁ…と思ったら是非雑誌の方を手に取ってみてください。<br>
また、僕が担当している箇所以外の、「何故Gradleが必要か」とか「AndroidとGradleを組み合わせるには？」について知りたい人は同じく雑誌を手にとってみてくださいｗ</p>

<p>なお、執筆時は 3/25 とかで、1.4が最新でした。今は1.5が出ています。</p>

<h1>
<span id="gradleとは" class="fragment"></span><a href="#gradle%E3%81%A8%E3%81%AF"><i class="fa fa-link"></i></a>Gradleとは？</h1>

<p>ビルドシステム、ひいてはGradleがあると助かる場面とは、一体どういう場面でしょうか？<br>
筆者の具体例でいうと、ある日上司がやってきて、「今お前たちが作っているアプリを俺の端末にインストールしてくれ。」と言ってくるわけですね。1回だけならば話しは簡単です。<br>
PCと端末をmicroUSBで接続して、Eclipseを起動してADTでアプリをコンパイルして、端末に転送してインストールして返してあげるだけです。<br>
ですが、それが2回も3回も…となってくると、思わず「自分でやってください！＞＜」と言ってしまいたくなりますが、上司のPCには開発環境が整っていません。それに、新しいAndroidのSDKがリリースされたら上司のPCの環境を更新する作業をやってあげなければいけません。しかし、僕はそんな面倒くさいことは引き受けたくありません！</p>

<p>そこで、登場してくるのがビルドシステムです。今のAndroidの標準のビルドシステムではantが使われています。antでも、「このバッチファイルを叩いたら勝手にアプリが端末に入りますから！＞＜」ぐらいまでは持っていけます。ですが、Android SDKのインストールやantのセットアップはやらなければいけません。これだけでもだいぶ楽になりましたが、今一歩というところですね。</p>

<p>もし、Gradleであれば、Gradle自身のダウンロードもGradleにやらせることができますし、Android SDKのダウンロードも気合を入れればさせることができるでしょう。また、GUIで操作することもできるので、上司にソース一式を渡して「自分でやってください！＞＜」で済ませることもできるようになるでしょう。<br>
ここまでできれば、格段に楽になったといっても納得でしょう。</p>

<p>さて、ここからは一般的なお話です。ちまたには、色々なビルド方法があふれています。Makeだとか、Antだとか、Mavenだとか色々です。自分で書いたことがないまでも、利用したことさえない、という人は滅多にいないでしょう。</p>

<p>Makefileは利用できるプラットフォームを選びます。また、その自由度の高さ故にプロジェクト毎に共通の使い方というものが決められているわけではありません。</p>

<p>Antは柔軟で便利なのは良いのですが、Makefileと同じように自由度が高く、さらに記述もXMLで書かなければいけないため、慣れるまでが大変です。また、ライブラリの依存関係の管理や追加などは行う機能はないためチームで開発する時にみんなの環境を併せるのに苦労します。</p>

<p>Mavenは依存関係の管理や追加もできますが、理解するまでに多くの事を理解しなければならず、またXMLで全ての設定を行わなければいけないため習得の難易度が高く、いわゆる"ビルド職人"と呼ばれるような特定の個人に依存せざるをえない状態でした。</p>

<p>そこで、登場してきたのがGradleです。Gradleは設定をGroovyと呼ばれるJVM上で動くスクリプト言語で書きます。<br>
Groovyで書かれた設定ファイルはXMLよりも可読性が高く、処理の自由度も大変高いです。依存関係の管理も行うことが出来ます。チームで仕事をするために便利な機能もよく考えられて作られていて、大変便利です。今後開発を行なっていく上で無くてはならない存在になっていくでしょう。そのために、まずはあなたがGradle職人になってみるのも良いと思います。<br>
Gradleが行なっている工夫については後々紹介していきます。<br>
その他のセールスポイントとして、ドキュメントが非常に充実していて優れていることがあげられます。公式の英語のドキュメントのみならず、和訳のドキュメントも大変充実していて、これを拾い読みするだけでGradleの事がかなりたくさんわかってきます。</p>

<ul>
<li><a href="http://www.gradle.org/documentation" rel="nofollow noopener" target="_blank">公式ドキュメント</a></li>
<li><a href="http://gradle.monochromeroad.com/docs/index.html" rel="nofollow noopener" target="_blank">和訳ドキュメント</a></li>
</ul>

<p>残念な所を無理に上げると、Mavenのpluginとの互換性がないため、熱心なMavenユーザ(筆者の事です)からすると、今までの環境を一部捨てざるをえないことは少しつらいですね。</p>

<h2>
<span id="gradleのインストール" class="fragment"></span><a href="#gradle%E3%81%AE%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB"><i class="fa fa-link"></i></a>Gradleのインストール</h2>

<h3>
<span id="方法1-古き良き方法を使う" class="fragment"></span><a href="#%E6%96%B9%E6%B3%951-%E5%8F%A4%E3%81%8D%E8%89%AF%E3%81%8D%E6%96%B9%E6%B3%95%E3%82%92%E4%BD%BF%E3%81%86"><i class="fa fa-link"></i></a>方法1 古き良き方法を使う</h3>

<p><a href="http://www.gradle.org/" class="autolink" rel="nofollow noopener" target="_blank">http://www.gradle.org/</a> Gradle公式サイトのDOWNLOADSリンクから最新のGradleを落としてきましょう。<br>
gradle-1.4-bin.zip を解凍し、適当な所に置きます。解凍したフォルダを環境変数<code>GRADLE_HOME</code>にそのパスを設定します。また、<code>GRADLE_HOME/bin</code>にパスを通しておきます。</p>

<h3>
<span id="方法2-gvmを使う" class="fragment"></span><a href="#%E6%96%B9%E6%B3%952-gvm%E3%82%92%E4%BD%BF%E3%81%86"><i class="fa fa-link"></i></a>方法2 gvmを使う</h3>

<p>Groovy enVironment Manager(GVM)を使うのが古き良き方法より、優れているでしょう。可能であればこちらを使うことをオススメします。<br>
利用できる環境や詳細な情報については公式サイト <a href="http://gvmtool.net/" class="autolink" rel="nofollow noopener" target="_blank">http://gvmtool.net/</a> を参照してください。Mac OS XやLinuxの類、WindowsであればCygwin環境であれば利用できます。<br>
インストール方法は以下の通りです。 <code>curl -s get.gvmtool.net | bash</code> を実行後、その後どうしたら良いかの指示が表示されるはずですので、それに従ってください。</p>

<p>gvmが利用できるようになったら、<code>gvm list gradle</code>とするとインストール可能なGradleのバージョンが表示されます。ここでは<code>gvm install gradle 1.4</code>とすることで、Gradleの1.4がインストールできます。1.4をデフォルトバージョンとするか聞かれると思いますので、<code>Y</code>を選択しておきます。</p>

<h3>
<span id="動作確認" class="fragment"></span><a href="#%E5%8B%95%E4%BD%9C%E7%A2%BA%E8%AA%8D"><i class="fa fa-link"></i></a>動作確認</h3>

<p><code>gradle -version</code>を実行してみて、Gradle 1.4がインストールされた事が確認できれば成功です。</p>

<div class="code-frame" data-lang="shell"><div class="highlight"><pre><span></span>------------------------------------------------------------
Gradle 1.4
------------------------------------------------------------

Gradle build time: Monday, January 28, 2013 3:42:46 AM UTC
Groovy: 1.8.6
Ant: Apache Ant(TM) version 1.8.4 compiled on May 22 2012
Ivy: 2.2.0
JVM: 1.7.0_17 (Oracle Corporation 23.7-b01)
OS: Mac OS X 10.8.3 x86_64
</pre></div></div>

<h2>
<span id="gradleを使ってみよう" class="fragment"></span><a href="#gradle%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%A6%E3%81%BF%E3%82%88%E3%81%86"><i class="fa fa-link"></i></a>Gradleを使ってみよう</h2>

<h3>
<span id="gradleを使うと何が出来るの" class="fragment"></span><a href="#gradle%E3%82%92%E4%BD%BF%E3%81%86%E3%81%A8%E4%BD%95%E3%81%8C%E5%87%BA%E6%9D%A5%E3%82%8B%E3%81%AE"><i class="fa fa-link"></i></a>Gradleを使うと何が出来るの？</h3>

<p>まずは、Gradleを使ってみましょう。Gradleではタスクという作業の固まりを作って、それを動かすことで仕事をこなして行きます。<br>
最終的には「Androidのソースをコンパイルして、必要があればJUnitを動かして、端末にアプリをインストールする」とか、「無料版と有料版の2バージョンをリリースしているアプリのコンパイルを自動化し2つのapkを作成する」などの複雑な作業をこなすことが出来るようになるでしょう。(yagiさんパートにぶん投げ)</p>

<p>通常は、他の人が作った便利なタスクを借りて実行させます。そのため、ほんのすこしの記述をしておくだけで、手作業でするとしたらかなりの時間がかかる作業も何度でも繰り返し行わせることができるようになります。もし、「アプリをコンパイルする前にバージョン番号を書き換えたい…」という時は、自分で追加のタスクを書く必要があります。</p>

<h3>
<span id="gradleを使ってみよう-1" class="fragment"></span><a href="#gradle%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%A6%E3%81%BF%E3%82%88%E3%81%86-1"><i class="fa fa-link"></i></a>Gradleを使ってみよう</h3>

<p>まずは簡単なタスクを定義する所から初めてみましょう。最終的には他のタスクに自分の好きな処理を追加できるところまで行きましょう。</p>

<p>以下のファイルを作成し、同じフォルダで<code>gradle helloWorld</code>を実行してみます。短縮して、<code>gradle hW</code>や<code>gradle hell</code>を実行しても同じ結果が得られます。gradleではタスクの名前が一意になる程度に短縮してもよしなに計らってくれます。便利ですね。(<code>gradle he</code>などを実行すると<code>gradle help</code>が実行されてしまいます。さもありなん。)</p>

<div class="code-frame" data-lang="groovy">
<div class="code-lang"><span class="bold">helloworld1/build.gradle</span></div>
<div class="highlight"><pre><span></span><span class="n">task</span> <span class="n">helloWorld</span> <span class="o">&lt;&lt;</span> <span class="o">{</span>
        <span class="n">println</span> <span class="s2">"Hello, world!"</span>
<span class="o">}</span>
</pre></div>
</div>

<p><em>実行結果</em></p>

<div class="code-frame" data-lang="shell"><div class="highlight"><pre><span></span>:helloWorld
Hello, world!

BUILD SUCCESSFUL

Total time: 4.648 secs
</pre></div></div>

<p>新しく定義したhelloWorldタスクが実行され、"Hello, world!"が表示されました。<br>
何が起こっているか簡単に説明しましょう。<code>task helloWorld</code>で新しいタスクを定義し、<code>{}</code>部分が処理を行うクロージャになっています。Gradleの記述言語であるGroovyでは演算子の定義を書き換えることができます。<code>&lt;&lt;</code>はleftShiftメソッドの呼び出しになります。<br>
このコードを少し書き換えるとこのようになります。</p>

<div class="code-frame" data-lang="groovy">
<div class="code-lang"><span class="bold">helloworld2/build.gradle</span></div>
<div class="highlight"><pre><span></span><span class="n">task</span> <span class="n">helloWorld</span> <span class="o">{</span>
        <span class="n">doLast</span> <span class="o">{</span>
                <span class="n">println</span> <span class="s2">"Hello, world!"</span>
        <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>

<p>実行してみると、同じ結果になりますね。<code>&lt;&lt;</code>は、doLastと同じ意味合いになります。もし、<code>&lt;&lt;</code>も<code>doLast</code>もなしにするとどうなるでしょうか？試してみましょう。</p>

<div class="code-frame" data-lang="groovy">
<div class="code-lang"><span class="bold">helloworld3/build.gradle</span></div>
<div class="highlight"><pre><span></span><span class="n">task</span> <span class="n">helloWorld</span> <span class="o">{</span>
        <span class="n">println</span> <span class="s2">"Hello, world!"</span>
<span class="o">}</span>
</pre></div>
</div>

<p>これに対して、<code>gradle tasks</code>を実行してみます。tasksは、利用可能なタスクの一覧を表示してくれるプリインのタスクです。</p>

<div class="code-frame" data-lang="shell"><div class="highlight"><pre><span></span>Hello, world!
:tasks

------------------------------------------------------------
All tasks runnable from root project
------------------------------------------------------------

Help tasks
----------
dependencies - Displays all dependencies declared in root project 'helloworld3'.
dependencyInsight - Displays the insight into a specific dependency in root project 'helloworld3'.
help - Displays a help message
projects - Displays the sub-projects of root project 'helloworld3'.
properties - Displays the properties of root project 'helloworld3'.
tasks - Displays the tasks runnable from root project 'helloworld3' (some of the displayed tasks may belong to subprojects).

Other tasks
-----------
helloWorld

To see all tasks and more detail, run with --all.

BUILD SUCCESSFUL

Total time: 0.884 secs
</pre></div></div>

<p>おや？一番先頭にhelloWorldタスクが実行されてしまっている様が見て取れます。<br>
doLastを使わない部分は、タスクの設定などを行う箇所になるのですね。doLastを使う書き方に戻してみましょう。</p>

<div class="code-frame" data-lang="groovy">
<div class="code-lang"><span class="bold">helloworld4/build.gradle</span></div>
<div class="highlight"><pre><span></span><span class="n">task</span> <span class="n">helloWorld</span> <span class="o">{</span>
        <span class="n">description</span> <span class="o">=</span> <span class="s2">"こんにちは！します。"</span>

        <span class="n">doLast</span> <span class="o">{</span>
                <span class="n">println</span> <span class="s2">"Hello, world!"</span>
        <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>

<p>結果を見てみましょう。</p>

<div class="code-frame" data-lang="shell"><div class="highlight"><pre><span></span>:tasks

------------------------------------------------------------
All tasks runnable from root project
------------------------------------------------------------

中略

Other tasks
-----------
helloWorld - こんにちは！します。

後略
</pre></div></div>

<p>helloWorldタスクは実行されなくなっていますね。代わりにタスクの概要が表示されるようになりました。descriptionとして設定した内容ですね。このように、タスクの設定を行う箇所とすると良いでしょう。</p>

<h3>
<span id="gradleの自由さよ" class="fragment"></span><a href="#gradle%E3%81%AE%E8%87%AA%E7%94%B1%E3%81%95%E3%82%88"><i class="fa fa-link"></i></a>Gradleの自由さよ</h3>

<p>さて、そろそろGradleの本気を発揮してまいりましょう。GradleはGroovyという言語で記述しなければならないのですが、ぶっちゃけJavaのコードはGroovyのコードとしても正しいのです。そのため、まずは必要最低限のGradleが使える程度の勉強だけして、大部分をJavaコードで補うというのも手です。</p>

<div class="code-frame" data-lang="groovy">
<div class="code-lang"><span class="bold">weatherReport/build.gradle</span></div>
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">org.json.JSONObject</span><span class="o">;</span>

<span class="n">buildscript</span> <span class="o">{</span>
    <span class="n">repositories</span> <span class="o">{</span> <span class="n">mavenCentral</span><span class="o">()</span> <span class="o">}</span>
    <span class="n">dependencies</span> <span class="o">{</span> <span class="n">classpath</span> <span class="s1">'org.json:json:20090211'</span> <span class="o">}</span>
<span class="o">}</span>

<span class="n">task</span> <span class="n">weatherReport</span> <span class="o">{</span>
    <span class="n">description</span> <span class="o">=</span> <span class="s2">"今日の東京のお天気をお伝えします"</span>

    <span class="n">doLast</span> <span class="o">{</span>
        <span class="c1">// Livedoorのお天気情報APIを利用してJSON形式のデータを取得する</span>
        <span class="n">URL</span> <span class="n">url</span> <span class="o">=</span> <span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="s2">"http://weather.livedoor.com/forecast/webservice/json/v1?city=130010"</span><span class="o">);</span>
        <span class="n">URLConnection</span> <span class="n">connection</span> <span class="o">=</span> <span class="n">url</span><span class="o">.</span><span class="na">openConnection</span><span class="o">();</span>
        <span class="n">InputStream</span> <span class="n">is</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">();</span>
        <span class="n">BufferedReader</span> <span class="n">reader</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="n">InputStreamReader</span><span class="o">(</span><span class="n">is</span><span class="o">));</span>
        <span class="n">JSONObject</span> <span class="n">json</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JSONObject</span><span class="o">(</span><span class="n">reader</span><span class="o">.</span><span class="na">readLine</span><span class="o">());</span>

        <span class="n">String</span> <span class="n">cityName</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="na">getJSONObject</span><span class="o">(</span><span class="s2">"location"</span><span class="o">).</span><span class="na">getString</span><span class="o">(</span><span class="s2">"city"</span><span class="o">);</span>
        <span class="n">String</span> <span class="n">weather</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="na">getJSONArray</span><span class="o">(</span><span class="s2">"forecasts"</span><span class="o">).</span><span class="na">getJSONObject</span><span class="o">(</span><span class="mi">0</span><span class="o">).</span><span class="na">getString</span><span class="o">(</span><span class="s2">"telop"</span><span class="o">);</span>
        <span class="n">println</span> <span class="s2">"${cityName}の今日のお天気は${weather}です！"</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>

<p>実行してみましょう。</p>

<div class="code-frame" data-lang="shell"><div class="highlight"><pre><span></span>$ gradle wR
:weatherReport
東京の今日のお天気は晴のち曇です！

BUILD SUCCESSFUL

Total time: 2.009 secs
</pre></div></div>

<p>うーむ！素晴らしい自由度！タスクの中でWebサービスにアクセスして今日の天気を調べて表示することもできてしまいました。<br>
GroovyではJavaよりも多くのpackageがデフォルトでimportされているため、<code>java.io.InputStream</code>や<code>java.net.URL</code>をimportせずとも済んでいます。( 参考 <a href="http://groovy.codehaus.org/Differences+from+Java" class="autolink" rel="nofollow noopener" target="_blank">http://groovy.codehaus.org/Differences+from+Java</a> )<br>
その他の目新しい点として、<code>buildscript</code>が増えた事でしょうか。ここでは、build.gradle中で使うライブラリの設定を行なっています。MavenのCentralリポジトリを依存性解決のために利用し、json.orgのライブラリを利用するように設定しています。<br>
MavenのCentralリポジトリには色々な人が作った多大な資産が眠っているため、是非活用してみましょう。<br>
<a href="http://search.maven.org/" class="autolink" rel="nofollow noopener" target="_blank">http://search.maven.org/</a> で検索すると、色々と出てきます。筆者が出しているライブラリも<code>net.vvakame</code>で検索するといくつか出てきます。(宣伝)</p>

<p>さて、これでJavaで出来る範囲であれば、なんであれ自分でオリジナルタスクを作ってどうとでもできそうな気がしてきました。例えば、ファイルのコピーだとかクリーンアップなど、色々と出来そうです。<br>
GradleとGroovyには様々な便利メソッドやタスクがあるので、慣れてきたら自分で調べて裾野を広げていけると良いでしょう。</p>

<h3>
<span id="javaのプロジェクトをビルドできるようにしよう" class="fragment"></span><a href="#java%E3%81%AE%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%82%92%E3%83%93%E3%83%AB%E3%83%89%E3%81%A7%E3%81%8D%E3%82%8B%E3%82%88%E3%81%86%E3%81%AB%E3%81%97%E3%82%88%E3%81%86"><i class="fa fa-link"></i></a>Javaのプロジェクトをビルドできるようにしよう</h3>

<p>さて、Gradleで天気予報を表示するのもなかなか便利かもしれませんが、ビルドツールとしての本領を発揮してもらうことにしましょう。ここでは、多くの読者の環境とマッチするであろう、Java+Eclipseでの開発環境を整えてみます。</p>

<div class="code-frame" data-lang="groovy">
<div class="code-lang"><span class="bold">javaProject1/build.gradle</span></div>
<div class="highlight"><pre><span></span><span class="n">apply</span> <span class="nl">plugin:</span> <span class="s2">"java"</span>
<span class="n">apply</span> <span class="nl">plugin:</span> <span class="s2">"eclipse"</span>

<span class="n">repositories</span> <span class="o">{</span>
    <span class="n">mavenCentral</span><span class="o">()</span>
<span class="o">}</span>

<span class="n">dependencies</span> <span class="o">{</span>
    <span class="n">testCompile</span> <span class="s2">"junit:junit:4.11"</span> 
<span class="o">}</span>
</pre></div>
</div>

<p>これだけ！簡単ですね。Gradleのはプラグインという仕組みがあり、複数のタスクを追加してくれたりします。ここでは<code>java</code>と<code>eclipse</code>を追加しています。これだけで、非常に多くの物事をこなしてくれるようになります。<br>
あとは<code>repositories</code>と<code>dependencies</code>ですね。お天気予報タスク作成の段では、build.gradleで利用するためにjson.orgのライブラリを追加したのでした。一方、こっちではUnitTestを書くために、開発プロジェクトで使うためにJUnitへの依存することを追加しました。<br>
さて、次はJavaコードを書いてみましょう。下準備として、<code>src/main/java</code> フォルダと <code>src/test/java</code> フォルダを手作業で作っておきます。その後で<code>gradle eclipse</code>を実行すると、Eclipseにプロジェクトをimportできるようにするためのメタファイルが生成されます。もちろん、build.gradleで設定したJUnitへの依存関係もちゃんと考慮され、Maven CentralリポジトリからJUnitのjarファイルを自動的にダウンロードしてEclipse上でもビルドパスに追加してくれます。<br>
さくさくとJavaコードを追加してみます。</p>

<div class="code-frame" data-lang="java">
<div class="code-lang"><span class="bold">src/main/java/Sample.java</span></div>
<div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Sample</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Sample</span> <span class="n">sample</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Sample</span><span class="o">();</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">sample</span><span class="o">.</span><span class="na">getMessage</span><span class="o">());</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="n">String</span> <span class="nf">getMessage</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="s">"Sample!"</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>

<div class="code-frame" data-lang="java">
<div class="code-lang"><span class="bold">src/test/java/SampleTest.java</span></div>
<div class="highlight"><pre><span></span><span class="kn">import static</span> <span class="nn">org.hamcrest.CoreMatchers.*</span><span class="o">;</span>
<span class="kn">import static</span> <span class="nn">org.junit.Assert.*</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.junit.Test</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SampleTest</span> <span class="o">{</span>

    <span class="nd">@Test</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">test</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">Sample</span> <span class="n">sample</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Sample</span><span class="o">();</span>
        <span class="n">assertThat</span><span class="o">(</span><span class="n">sample</span><span class="o">.</span><span class="na">getMessage</span><span class="o">(),</span> <span class="n">is</span><span class="o">(</span><span class="s">"Sample!"</span><span class="o">));</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>

<p>試しに、Eclipse上でプロジェクトを右クリック→Run as→JUnit Testを選択してテストを走らせてみます。おそらく、緑になったことでしょう。素晴らしい！<br>
次に、gradle上でもテストを動かしてみます。<code>gradle test</code>でテストが実行できます。</p>

<div class="code-frame" data-lang="shell"><div class="highlight"><pre><span></span>$ gradle test
:compileJava UP-TO-DATE
:processResources UP-TO-DATE
:classes UP-TO-DATE
:compileTestJava
:processTestResources UP-TO-DATE
:testClasses
:test
Picked up _JAVA_OPTIONS: -Dfile.encoding=UTF-8

BUILD SUCCESSFUL

Total time: 2.284 secs
</pre></div></div>

<p>テストが走って、完走したようです。念の為にわざとテストを失敗させてみます。</p>

<div class="code-frame" data-lang="shell"><div class="highlight"><pre><span></span>$ gradle test
:compileJava UP-TO-DATE
:processResources UP-TO-DATE
:classes UP-TO-DATE
:compileTestJava
:processTestResources UP-TO-DATE
:testClasses
:test

SampleTest &gt; test FAILED
    java.lang.AssertionError at SampleTest.java:11

1 test completed, 1 failed
:test FAILED

FAILURE: Build failed with an exception.

* What went wrong:
Execution failed for task ':test'.
&gt; There were failing tests. See the report at: file:///Users/vvakame/Dropbox/work/docs/nikkei-software-2013-06-gradle/sample/javaProject1/build/reports/tests/index.html

* Try:
Run with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output.

BUILD FAILED

Total time: 2.156 secs
</pre></div></div>

<p>よしよし、良い感じですね。これでJavaプロジェクトをGradleで管理できるようになりました。</p>

<h3>
<span id="androidのプロジェクトをeclipseで開発できるようにしてみよう序章" class="fragment"></span><a href="#android%E3%81%AE%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%82%92eclipse%E3%81%A7%E9%96%8B%E7%99%BA%E3%81%A7%E3%81%8D%E3%82%8B%E3%82%88%E3%81%86%E3%81%AB%E3%81%97%E3%81%A6%E3%81%BF%E3%82%88%E3%81%86%E5%BA%8F%E7%AB%A0"><i class="fa fa-link"></i></a>AndroidのプロジェクトをEclipseで開発できるようにしてみよう(序章)</h3>

<p>(Android公式のやり方とは違います。公式のやり方はyagiさんパートを参照。)</p>

<p>さて、この記事の後半ではyagiさんがGradle+Android開発の方法を紹介してくださいますが、ここではGradleのAndroid Pluginを使わずに無理矢理EclipseでAndroid開発が出来るようにしてみます。</p>

<p>まず、ざっくりとEclipse自体の説明を行います。Eclipseはプロジェクトに対して、いくつか設定ファイルを持ちます。代表的なのは、プロジェクトの設定が書いてある<code>.project</code>、プロジェクトのビルドパスが書いてある<code>.classpath</code>、Java開発用プラグインの設定ファイルである<code>.settings/org.eclipse.jdt.core.prefs</code>などです。<br>
要は、それらファイルを<code>gradle eclipse</code>した時に生成してやれば良いわけです。</p>

<p>まずは、Gradle関係なくADTのWizardで普通にAndroidプロジェクトを生成し、どういう設定ファイルか確認してみます。そして、その結果を再現してみます。</p>

<div class="code-frame" data-lang="xml">
<div class="code-lang"><span class="bold">androidProject/.project</span></div>
<div class="highlight"><pre><span></span><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="nt">&lt;projectDescription&gt;</span>
    <span class="nt">&lt;name&gt;</span>AndroidProject<span class="nt">&lt;/name&gt;</span>
    <span class="nt">&lt;comment&gt;&lt;/comment&gt;</span>
    <span class="nt">&lt;projects&gt;</span>
    <span class="nt">&lt;/projects&gt;</span>
    <span class="nt">&lt;buildSpec&gt;</span>
        <span class="nt">&lt;buildCommand&gt;</span>
            <span class="nt">&lt;name&gt;</span>com.android.ide.eclipse.adt.ResourceManagerBuilder<span class="nt">&lt;/name&gt;</span>
            <span class="nt">&lt;arguments&gt;</span>
            <span class="nt">&lt;/arguments&gt;</span>
        <span class="nt">&lt;/buildCommand&gt;</span>
        <span class="nt">&lt;buildCommand&gt;</span>
            <span class="nt">&lt;name&gt;</span>com.android.ide.eclipse.adt.PreCompilerBuilder<span class="nt">&lt;/name&gt;</span>
            <span class="nt">&lt;arguments&gt;</span>
            <span class="nt">&lt;/arguments&gt;</span>
        <span class="nt">&lt;/buildCommand&gt;</span>
        <span class="nt">&lt;buildCommand&gt;</span>
            <span class="nt">&lt;name&gt;</span>org.eclipse.jdt.core.javabuilder<span class="nt">&lt;/name&gt;</span>
            <span class="nt">&lt;arguments&gt;</span>
            <span class="nt">&lt;/arguments&gt;</span>
        <span class="nt">&lt;/buildCommand&gt;</span>
        <span class="nt">&lt;buildCommand&gt;</span>
            <span class="nt">&lt;name&gt;</span>com.android.ide.eclipse.adt.ApkBuilder<span class="nt">&lt;/name&gt;</span>
            <span class="nt">&lt;arguments&gt;</span>
            <span class="nt">&lt;/arguments&gt;</span>
        <span class="nt">&lt;/buildCommand&gt;</span>
    <span class="nt">&lt;/buildSpec&gt;</span>
    <span class="nt">&lt;natures&gt;</span>
        <span class="nt">&lt;nature&gt;</span>com.android.ide.eclipse.adt.AndroidNature<span class="nt">&lt;/nature&gt;</span>
        <span class="nt">&lt;nature&gt;</span>org.eclipse.jdt.core.javanature<span class="nt">&lt;/nature&gt;</span>
    <span class="nt">&lt;/natures&gt;</span>
<span class="nt">&lt;/projectDescription&gt;</span>
</pre></div>
</div>

<div class="code-frame" data-lang="xml">
<div class="code-lang"><span class="bold">androidProject/.classpath</span></div>
<div class="highlight"><pre><span></span><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="nt">&lt;classpath&gt;</span>
    <span class="nt">&lt;classpathentry</span> <span class="na">kind=</span><span class="s">"src"</span> <span class="na">path=</span><span class="s">"src"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;classpathentry</span> <span class="na">kind=</span><span class="s">"src"</span> <span class="na">path=</span><span class="s">"gen"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;classpathentry</span> <span class="na">kind=</span><span class="s">"con"</span> <span class="na">path=</span><span class="s">"com.android.ide.eclipse.adt.ANDROID_FRAMEWORK"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;classpathentry</span> <span class="na">kind=</span><span class="s">"con"</span> <span class="na">path=</span><span class="s">"com.android.ide.eclipse.adt.LIBRARIES"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;classpathentry</span> <span class="na">kind=</span><span class="s">"output"</span> <span class="na">path=</span><span class="s">"bin/classes"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/classpath&gt;</span>
</pre></div>
</div>

<p>なるほど。こんな感じですね。通常のJavaプロジェクトとくらべてみると、ビルドコマンドが3つ(javabuilder以外)と、ネイチャーが1つ(AndroidNature)が追加されているようです。また、クラスパスにソースフォルダとしてgenフォルダが追加され、JREコンテナが削除され、代わりにAndroidのフレームワークとライブラリが追加されています。また、コンパイル後のアウトプットフォルダがbin/classesとなっています。<br>
また、AndroidのサポートしているJavaのバージョンが5と6だけなので、そのための設定も追加する必要がありそうです。AndroidもはやくJava7対応してほしいですね。7はまだいいとして、8が来なかったら発狂してオワコン扱いし始めますよ僕は。invokeDynamicのサポートとかdalvikの改修もめんどくさいし色々な機種にそれを反映させていくのにも時間がかかるのだから段階的に進めていってほしいものです。古い環境でコードを書かされる事を喜ぶエンジニアはいないのですよ！</p>

<p>それでは、build.gradleを書いてみましょう。Androidの場合はライブラリの追加は、普通のJavaプロジェクトと同じようにやるのではなく、libsフォルダにjarを入れることで行いますね。そのため、dependenciesで<code>compile "com.google.android:support-v4:r7"</code>などとやってしまうわけには行きません。そのため、<code>androidLibs</code>を作成して独自に依存関係の管理をしてやるようにします。dependenciesでの記述ではそちらを使います。また、libsフォルダに依存ライブラリをコピーするために<code>copyDependenciesToAndroidLibs</code>タスクを作成し、<code>gradle eclipse</code>が実行された時に依存関係が勝手にlibsフォルダに入るようにしてやります。ついでに、<code>clean</code>タスクでlibsフォルダを綺麗にするようにしてやります。</p>

<p>また、.classpathと.projectファイルの生成も<code>eclipse</code>に追加の設定を行い、望む物が生成されるようにしてやります。</p>

<div class="code-frame" data-lang="groovy">
<div class="code-lang"><span class="bold">androidProject/build.gradle</span></div>
<div class="highlight"><pre><span></span><span class="n">apply</span> <span class="nl">plugin:</span> <span class="s2">"java"</span>
<span class="n">apply</span> <span class="nl">plugin:</span> <span class="s2">"eclipse"</span>

<span class="n">sourceCompatibility</span> <span class="o">=</span> <span class="mf">1.6</span>
<span class="n">targetCompatibility</span> <span class="o">=</span> <span class="mf">1.6</span>

<span class="n">repositories</span> <span class="o">{</span> <span class="n">mavenCentral</span><span class="o">()</span> <span class="o">}</span>

<span class="n">configurations</span> <span class="o">{</span> <span class="n">androidLibs</span> <span class="o">}</span>

<span class="n">dependencies</span> <span class="o">{</span>
    <span class="n">androidLibs</span> <span class="s2">"com.google.android:support-v4:r7"</span>
    <span class="n">androidLibs</span> <span class="s2">"com.googlecode.android-query:android-query:0.24.3"</span>
<span class="o">}</span>

<span class="n">sourceSets</span> <span class="o">{</span>
    <span class="n">main</span> <span class="o">{</span>
        <span class="n">java</span><span class="o">.</span><span class="na">srcDirs</span> <span class="s2">"src"</span><span class="o">,</span> <span class="s2">"gen"</span>
        <span class="n">output</span><span class="o">.</span><span class="na">classesDir</span> <span class="o">=</span> <span class="s2">"bin/classes"</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="n">task</span> <span class="nf">clean</span><span class="o">(</span><span class="nl">overwrite:</span> <span class="kc">true</span><span class="o">)</span> <span class="o">{</span> <span class="n">delete</span> <span class="s2">"libs"</span> <span class="o">}</span>

<span class="n">task</span> <span class="nf">copyDependenciesToAndroidLibs</span><span class="o">(</span><span class="nl">type:</span> <span class="n">Copy</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">into</span> <span class="s2">"libs"</span>
    <span class="n">from</span> <span class="n">configurations</span><span class="o">.</span><span class="na">androidLibs</span>

    <span class="n">eclipseJdt</span><span class="o">.</span><span class="na">dependsOn</span> <span class="n">copyDependenciesToAndroidLibs</span>
<span class="o">}</span>

<span class="n">eclipse</span> <span class="o">{</span>
    <span class="n">project</span> <span class="o">{</span>
        <span class="n">name</span> <span class="o">=</span> <span class="s1">'AndroidProject'</span>
        <span class="n">natures</span> <span class="s1">'com.android.ide.eclipse.adt.AndroidNature'</span>
        <span class="n">buildCommand</span> <span class="s1">'com.android.ide.eclipse.adt.ResourceManagerBuilder'</span>
        <span class="n">buildCommand</span> <span class="s1">'com.android.ide.eclipse.adt.PreCompilerBuilder'</span>
        <span class="n">buildCommand</span> <span class="s1">'com.android.ide.eclipse.adt.ApkBuilder'</span>
    <span class="o">}</span>
    <span class="n">classpath</span> <span class="o">{</span>
        <span class="n">containers</span><span class="o">.</span><span class="na">clear</span><span class="o">();</span>
        <span class="n">containers</span> <span class="s1">'com.android.ide.eclipse.adt.ANDROID_FRAMEWORK'</span><span class="o">,</span> <span class="s1">'com.android.ide.eclipse.adt.LIBRARIES'</span>
        <span class="n">downloadSources</span> <span class="o">=</span> <span class="kc">true</span>
        <span class="n">downloadJavadoc</span> <span class="o">=</span> <span class="kc">true</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>

<p>今回のbuild.gradleではbuildは行わないので、これで十分でしょう。<code>gradle eclipse</code>でAndroid開発用の設定ファイルが生成されるようになりました。</p>

<h3>
<span id="antの代わりに" class="fragment"></span><a href="#ant%E3%81%AE%E4%BB%A3%E3%82%8F%E3%82%8A%E3%81%AB"><i class="fa fa-link"></i></a>antの代わりに</h3>

<p>現在、antを使っているプロジェクトがGradleに移行してくるのもなかなか簡単です。やってみましょう。</p>

<div class="code-frame" data-lang="xml">
<div class="code-lang"><span class="bold">ant/build.xml</span></div>
<div class="highlight"><pre><span></span><span class="cp">&lt;?xml version="1.0" ?&gt;</span>
<span class="nt">&lt;project</span> <span class="na">name=</span><span class="s">"AntSample"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;target</span> <span class="na">name=</span><span class="s">"roll"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;script</span> <span class="na">language=</span><span class="s">"javascript"</span><span class="nt">&gt;</span>
            <span class="cp">&lt;![CDATA[</span>
<span class="cp">            // 6面ダイスを2個ふり、合計値を表示する</span>
<span class="cp">            var dice = Math.ceil(Math.random() * 6) + Math.ceil(Math.random() * 6);</span>
<span class="cp">            var echo = AntSample.createTask("echo");</span>
<span class="cp">            echo.setMessage("2D6: " + dice);</span>
<span class="cp">            echo.perform();</span>
<span class="cp">            ]]&gt;</span>
        <span class="nt">&lt;/script&gt;</span>
    <span class="nt">&lt;/target&gt;</span>
<span class="nt">&lt;/project&gt;</span>
</pre></div>
</div>

<div class="code-frame" data-lang="groovy">
<div class="code-lang"><span class="bold">ant/build.gradle</span></div>
<div class="highlight"><pre><span></span><span class="n">ant</span><span class="o">.</span><span class="na">importBuild</span> <span class="s1">'build.xml'</span>

<span class="n">task</span> <span class="n">rollBefore</span> <span class="o">{</span>
    <span class="n">doLast</span> <span class="o">{</span>
        <span class="n">println</span> <span class="s2">"ダメージ計算を行います。"</span>
    <span class="o">}</span>
    <span class="n">roll</span><span class="o">.</span><span class="na">dependsOn</span> <span class="n">rollBefore</span>
<span class="o">}</span>

<span class="n">task</span> <span class="nf">rollAfter</span><span class="o">(</span><span class="nl">dependsOn:</span> <span class="n">roll</span><span class="o">)</span> <span class="o">&lt;&lt;</span> <span class="o">{</span>
    <span class="n">ant</span><span class="o">.</span><span class="na">echo</span> <span class="s2">"ダメージロールの結果をHPから引いてください。"</span>
<span class="o">}</span>
</pre></div>
</div>

<p>実行してみます。</p>

<div class="code-frame" data-lang="shell"><div class="highlight"><pre><span></span>$ gradle rollAfter
:rollBefore
ダメージ計算を行います。
:roll
[ant:echo] 2D6: 11
:rollAfter
[ant:echo] ダメージロールの結果をHPから引いてください。

BUILD SUCCESSFUL

Total time: 1.49 secs
</pre></div></div>

<p>うまくいったようです。既存のantの設定ファイルを<code>ant.importBuild</code>でインポートするとantのタスクがそのままgradleのタスクとして利用できるようになります。本来のgradleタスクと同様に扱うことができます。ここでは、rollBeforeタスクをGradle側で定義し、Ant側タスクであるrollに依存するように設定しています(<code>roll.dependsOn rollBefore</code>部分)。<br>
また、rollAfterタスクも定義し、rollタスクとの依存関係を定義しています。このため、rollAfterはrollに依存し、rollはrollBeforeに依存しているため、rollAfterを実行するとrollBefore→roll→rollAfterの順で実行されました。<br>
<code>gradle roll</code>で上記と同じ結果を得たい場合はrollAfterの代わりに以下のよう書いてrollタスクのdoLastの処理をにすることもできます。</p>

<div class="code-frame" data-lang="groovy"><div class="highlight"><pre><span></span><span class="n">roll</span> <span class="o">&lt;&lt;</span> <span class="o">{</span>
    <span class="n">ant</span><span class="o">.</span><span class="na">echo</span> <span class="s2">"ダメージロールの結果をHPから引いてください。"</span>
<span class="o">}</span>
</pre></div></div>

<p>また、rollAfterタスクの中で使っているように、antのechoタスクを利用しています。既にantに便利なものがあるのであればさくさく使ってしまい、徐々に移行していくのも良いでしょう。筆者はantのjavacタスクを利用し、AnnotationProcessorによるJavaコードの前処理を行ったりしています。</p>

<h3>
<span id="mavenの代わりに" class="fragment"></span><a href="#maven%E3%81%AE%E4%BB%A3%E3%82%8F%E3%82%8A%E3%81%AB"><i class="fa fa-link"></i></a>Mavenの代わりに</h3>

<p>antがとっても簡単にとりあえず移行できたのと対照的に、MavenユーザがGradleに移行するにはあんまり便利なパスが用意されていません。<br>
既存のMaven PluginはGradleと互換性がないため、既存の資産は使うことができません。Maven Centralリポジトリを利用して依存性の解決はできるので楽なんですけどね。</p>

<p>筆者は普段の開発にGoogleAppEngine/Javaを多用しております。そのためのフレームワークとしてSlim3を利用し、サーバ側からクライアント側へのデータのやり取りのために筆者作のJSON処理ライブラリであるJsonPullParserを利用しています。</p>

<p><a href="https://gist.github.com/vvakame/5176993" rel="nofollow noopener" target="_blank">gist</a></p>

<p>GradleのEclipse pluginさんはかなり柔軟で、ご覧のとおりEclipse用設定ファイルをかなり柔軟に弄る事ができます。このbuild.gradleでは<code>.settings/org.eclipse.jdt.core.prefs</code>を弄るパートが<code>properties.setProperty</code>を連発することになりあまり美しくないですね。処理後に手書き処理で無理矢理差し替えてしまったほうが綺麗に行きそうです。</p>

<h2>
<span id="よりgradleが便利になる設定使い方" class="fragment"></span><a href="#%E3%82%88%E3%82%8Agradle%E3%81%8C%E4%BE%BF%E5%88%A9%E3%81%AB%E3%81%AA%E3%82%8B%E8%A8%AD%E5%AE%9A%E4%BD%BF%E3%81%84%E6%96%B9"><i class="fa fa-link"></i></a>よりGradleが便利になる設定・使い方</h2>

<p>ここからは、更にGradleを幸せに使える方法を紹介していきます。</p>

<h3>
<span id="gradle---daemon-について" class="fragment"></span><a href="#gradle---daemon-%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6"><i class="fa fa-link"></i></a>gradle --daemon について</h3>

<p>さて、Gradleを使っていると不満に思えてくるのが、実行時間の遅さです。なにせ、筆者の環境では先のJavaプロジェクトで<code>gradle test</code>すると実行に4.732秒ほどかかります。少し、長いなと感じますね。<br>
その不満を解消するために、gradleには裏で常に待機していてもらうモードがあります。それが--daemonオプションです。<br>
試しに<code>gradle --daemon test</code>としてみましょう。1回目は裏で待機していないため、やはり5秒くらいかかりますがもう一回実行してみると、1.041秒というごく短時間でタスクを完了することができます。うーん、素晴らしい！<br>
毎回毎回 --daemon とつけるのもメンドクサイので、<code>GRADLE_OPTS</code>環境変数に<code>-Dorg.gradle.daemon=true</code>をセットすると、デフォルトでdaemonを使ってくれるようになります。<br>
動いているdaemonを止めたい時や、一時的に使いたくない時のためにそれぞれ<code>--stop</code>や<code>--no-daemon</code>オプションが用意されています。</p>

<h3>
<span id="gradle-wrapper-について" class="fragment"></span><a href="#gradle-wrapper-%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6"><i class="fa fa-link"></i></a>gradle wrapper について</h3>

<p>さて、Gradleを導入したい！と思っても、チーム全員の開発環境をGradle用に整えて全員で歩調を併せて…といったことを考えるととたんに腰が重くなるものです。しかし、Gradleならその点簡単に解決できます。<br>
gradle wrapperという仕組みが用意されていて、チームの中でGradleをマジメにインストールするのは貴方1人、それ以外の人はsvnやgitのリポジトリにコミットされているファイルだけ使えばOK！という塩梅にすることができます。<br>
見てみましょう。</p>

<div class="code-frame" data-lang="groovy">
<div class="code-lang"><span class="bold">gradleWrapper/build.gradle</span></div>
<div class="highlight"><pre><span></span><span class="n">apply</span> <span class="nl">plugin:</span> <span class="s2">"java"</span>
<span class="n">apply</span> <span class="nl">plugin:</span> <span class="s2">"eclipse"</span>

<span class="n">repositories</span> <span class="o">{</span>
    <span class="n">mavenCentral</span><span class="o">()</span>
<span class="o">}</span>

<span class="n">dependencies</span> <span class="o">{</span>
    <span class="n">testCompile</span> <span class="s2">"junit:junit:4.11"</span> 
<span class="o">}</span>

<span class="n">task</span> <span class="nf">wrapper</span><span class="o">(</span><span class="nl">type:</span> <span class="n">Wrapper</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">gradleVersion</span> <span class="o">=</span> <span class="s1">'1.4'</span>
<span class="o">}</span>
</pre></div>
</div>

<p>task wrapper の記述が増えていますね。この記述を増やした後に <code>gradle wrapper</code>を実行します。<br>
そうすると<code>gradlew</code>(Mac, Linux用)と<code>gradlew.bat</code>(Windows用)と<code>gradleフォルダ</code>が生成されます。これらをリポジトリにコミットするようにします。すると、他の人達はgradleコマンドの代わりに<code>gradlew</code>を使えるようになります。<code>gradlew</code>を実行すると、もし必要であればgradleコマンド実行用のバイナリを勝手にダウンロードしてくれます。<br>
まとめると、「みんな！gradleを使うためにはgradlewを使ってくれればOKだから！」と宣言すれば、すぐにチーム全員で使いはじめることが出来るようになるということです。</p>

<h3>
<span id="gradle---gui-について" class="fragment"></span><a href="#gradle---gui-%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6"><i class="fa fa-link"></i></a>gradle --gui について</h3>

<p>いやいや、gradlewは確かに嬉しいけど、<code>gradlew eclipse</code>とか、<code>gradlew test</code>とか、みんなに覚えされるのは大変だよ…！という意見もあるかもしれません。<br>
ご安心ください！gradleにはなんとGUIモードも用意されているのです。試しに、<code>gradle --gui</code>または<code>gradlew --gui</code>を実行してみてください。</p>

<p><a href="https://camo.qiitausercontent.com/2b60351fe32379b3c76996e2d2c96028c9782bd2/68747470733a2f2f646c2e64726f70626f7875736572636f6e74656e742e636f6d2f752f363538313238362f6e696b6b65692d736f6674776172652d323031332d30362d677261646c652f677261646c652d6775692e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/2b60351fe32379b3c76996e2d2c96028c9782bd2/68747470733a2f2f646c2e64726f70626f7875736572636f6e74656e742e636f6d2f752f363538313238362f6e696b6b65692d736f6674776172652d323031332d30362d677261646c652f677261646c652d6775692e706e67" alt="GradleのGUI" data-canonical-src="https://dl.dropboxusercontent.com/u/6581286/nikkei-software-2013-06-gradle/gradle-gui.png"></a></p>

<p>おぉ！素晴らしい！実行可能なタスクの一覧のウィンドウが表示され、マウスでもって好きなタスクを実行することができます。<br>
あとは、<code>gradlew --gui</code>を実行してくれるバッチファイルでも置いておいて、それをダブルクリックするように教えればよいですね。お気に入りタスクを登録することもできるので、よく使うタスクを教えてあげると良いでしょう。<br>
これで、みんなに簡単にgradleを使ってもらうことができますね :)</p>

<h3>
<span id="gradleの記述環境" class="fragment"></span><a href="#gradle%E3%81%AE%E8%A8%98%E8%BF%B0%E7%92%B0%E5%A2%83"><i class="fa fa-link"></i></a>Gradleの記述環境</h3>

<p>codehausによる<a href="http://groovy.codehaus.org/Eclipse+Plugin" rel="nofollow noopener" target="_blank">Groovy Eclipseプラグイン</a>を利用するか、<a href="http://www.jetbrains.com/idea/" rel="nofollow noopener" target="_blank">IntelliJ IDEA</a>を利用すると良いでしょう。<br>
筆者は本稿執筆のために、Groovy Eclipseプラグインをインストールして、build.gradleをGroovy Editorで編集しています。<br>
<a href="https://camo.qiitausercontent.com/528d54f8baf07836c8f2ffb7eabdc8a95d785b5d/68747470733a2f2f646c2e64726f70626f7875736572636f6e74656e742e636f6d2f752f363538313238362f6e696b6b65692d736f6674776172652d323031332d30362d677261646c652f45636c697073655f4d61726b6574706c6163652e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/528d54f8baf07836c8f2ffb7eabdc8a95d785b5d/68747470733a2f2f646c2e64726f70626f7875736572636f6e74656e742e636f6d2f752f363538313238362f6e696b6b65692d736f6674776172652d323031332d30362d677261646c652f45636c697073655f4d61726b6574706c6163652e706e67" alt="Groovy Eclipseプラグイン" data-canonical-src="https://dl.dropboxusercontent.com/u/6581286/nikkei-software-2013-06-gradle/Eclipse_Marketplace.png"></a></p>

<h3>
<span id="参考書籍資料について" class="fragment"></span><a href="#%E5%8F%82%E8%80%83%E6%9B%B8%E7%B1%8D%E8%B3%87%E6%96%99%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6"><i class="fa fa-link"></i></a>参考書籍・資料について</h3>

<p>英語の本ですが、<a href="http://www.packtpub.com/gradle-effective-implementation-guide/book" rel="nofollow noopener" target="_blank">毛虫本</a>が大変良い資料になるでしょう。僕もこの記事を読むためにコードの部分を拾い読みするとかしましたが、大変参考になりました。</p>

<ul>
<li><a href="http://b.hatena.ne.jp/vvakame/gradle/" rel="nofollow noopener" target="_blank">わかめのはてブ</a></li>
<li><a href="http://www.slideshare.net/nobusue/gws-20130315-gradlehandson" rel="nofollow noopener" target="_blank">G*ワークショップZのGradleハンズオンのスライド</a></li>
</ul>
</div>
	</td>
</tr>
</table>
<br />
<table border="1" style="height:150px;">
<tr>
	<td rowspan="3">22位</td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="thumb-up-120px.png" /></i>1267</kbd>
		<a target="_blank" href="https://qiita.com/yaotti/items/0d5364eae36ad1bb8e01">gitでありがちな問題の解決方法まとめ</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2012-07-01<br />17:50:41</center>
	</td>
	<td style="width:200px;">
		<!--投稿者-->
		<center>
			@<a href="user/1.html">yaotti</a>(151件の記事)<br />(Increments Inc 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/1/profile-images/1473681698">
		</center>
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Git]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<!--
		<div style="width:350px;height:150px;overflow:scroll;">%s</div>
		-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p><a href="http://qiita.com/advent-calendar/git">Git Advent Calendar / Jun.</a> 最終日(30日目)の記事です．29日目は「<a href="http://qiita.com/items/e37c707938847aee671b">いざという時のためのgit reflog</a>」でした．<br>
Git Advent Calendar最後なので，git操作でやりがちなミスからどう回復するかをまとめます．他にもあればコメントもらえるとマージしていきます．</p>

<h2>
<span id="ブランチを切り忘れてmasterでコミットしてしまった" class="fragment"></span><a href="#%E3%83%96%E3%83%A9%E3%83%B3%E3%83%81%E3%82%92%E5%88%87%E3%82%8A%E5%BF%98%E3%82%8C%E3%81%A6master%E3%81%A7%E3%82%B3%E3%83%9F%E3%83%83%E3%83%88%E3%81%97%E3%81%A6%E3%81%97%E3%81%BE%E3%81%A3%E3%81%9F"><i class="fa fa-link"></i></a>ブランチを切り忘れてmasterでコミットしてしまった</h2>

<p>その時点でブランチを切る&amp;reset --hardで間違ったコミットたちをmasterから消す</p>

<div class="code-frame" data-lang="sh"><div class="highlight"><pre><span></span>$ git checkout -b new-branch
<span class="c1"># masterの最新コミットを消す</span>
$ git checkout master <span class="o">&amp;&amp;</span> git reset --hard HEAD~
</pre></div></div>

<h2>
<span id="ブランチを移動し忘れてコミットしてしまった" class="fragment"></span><a href="#%E3%83%96%E3%83%A9%E3%83%B3%E3%83%81%E3%82%92%E7%A7%BB%E5%8B%95%E3%81%97%E5%BF%98%E3%82%8C%E3%81%A6%E3%82%B3%E3%83%9F%E3%83%83%E3%83%88%E3%81%97%E3%81%A6%E3%81%97%E3%81%BE%E3%81%A3%E3%81%9F"><i class="fa fa-link"></i></a>ブランチを移動し忘れてコミットしてしまった</h2>

<p>cherry-pickでコミットを引っ張ってくる．</p>

<div class="code-frame" data-lang="sh"><div class="highlight"><pre><span></span><span class="c1"># 現在間違ったブランチ(bad-branch)にいる</span>
$ git checkout good-branch
$ git cherry-pick bad-branch <span class="c1"># 間違ったブランチに行なったコミットを持ってくる</span>
<span class="c1"># 間違ったブランチに行なったコミットを消す</span>
$ git checkout bad-branch <span class="o">&amp;&amp;</span> git reset --hard HEAD~ 
</pre></div></div>

<h2>
<span id="間違ったコミットをpushしてしまった" class="fragment"></span><a href="#%E9%96%93%E9%81%95%E3%81%A3%E3%81%9F%E3%82%B3%E3%83%9F%E3%83%83%E3%83%88%E3%82%92push%E3%81%97%E3%81%A6%E3%81%97%E3%81%BE%E3%81%A3%E3%81%9F"><i class="fa fa-link"></i></a>間違ったコミットをpushしてしまった</h2>

<p>個人プロジェクトならコミットを消して<a href="http://qiita.com/items/e37c707938847aee671b">反則技のgit push -f</a>する．そうでないなら，可能な限り速やかにgit revertを使って「間違ったコミットを打ち消すコミット」を行ない，pushする</p>

<h2>
<span id="マージ済みのブランチが大量にある" class="fragment"></span><a href="#%E3%83%9E%E3%83%BC%E3%82%B8%E6%B8%88%E3%81%BF%E3%81%AE%E3%83%96%E3%83%A9%E3%83%B3%E3%83%81%E3%81%8C%E5%A4%A7%E9%87%8F%E3%81%AB%E3%81%82%E3%82%8B"><i class="fa fa-link"></i></a>マージ済みのブランチが大量にある</h2>

<p><code>git branch --merged</code>で一覧が見られるので，masterとカレントブランチ以外を以下のようにして消す．</p>

<div class="code-frame" data-lang="sh"><div class="highlight"><pre><span></span>$ git branch -d <span class="k">$(</span>git branch --merged <span class="p">|</span> grep -v master <span class="p">|</span> grep -v <span class="s1">'*'</span><span class="k">)</span> <span class="c1"># masterと現在いるブランチは消さない</span>
</pre></div></div>

<h2>
<span id="間違ってreset---hardで戻しすぎた" class="fragment"></span><a href="#%E9%96%93%E9%81%95%E3%81%A3%E3%81%A6reset---hard%E3%81%A7%E6%88%BB%E3%81%97%E3%81%99%E3%81%8E%E3%81%9F"><i class="fa fa-link"></i></a>間違ってreset --hardで戻しすぎた</h2>

<p>git reflogを使う．詳しくは昨日のエントリ(<a href="http://qiita.com/items/e37c707938847aee671b">いざという時のためのgit reflog</a>)を参照．</p>

<h2>
<span id="重要なstashを消しちゃった" class="fragment"></span><a href="#%E9%87%8D%E8%A6%81%E3%81%AAstash%E3%82%92%E6%B6%88%E3%81%97%E3%81%A1%E3%82%83%E3%81%A3%E3%81%9F"><i class="fa fa-link"></i></a>重要なstashを消しちゃった</h2>

<p><code>git stash drop</code>したり，<code>git stash pop</code> -&gt; <code>git reset --hard</code>したとき．<br>
<code>git fsck</code>するとdangling commitが見られるので，<code>git cherry-pick &lt;SHA1&gt;</code>か<code>git stash apply &lt;SHA1&gt;</code>してあげるとよい．<br>
git gcが走ってたら消えてるかも．</p>

<h2>
<span id="コミットメッセージでtypoした" class="fragment"></span><a href="#%E3%82%B3%E3%83%9F%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%81%A7typo%E3%81%97%E3%81%9F"><i class="fa fa-link"></i></a>コミットメッセージでtypoした</h2>

<p>直前のコミットの場合は<code>git commit --amend</code>を使う．amendと打つのが面倒なので，<code>git commit --amend</code>は<code>git fix</code>にエイリアスしてる</p>

<div class="code-frame" data-lang="sh"><div class="highlight"><pre><span></span>$ git commit <span class="c1"># コミットメッセージでtypoした</span>
$ git commit --amend <span class="c1"># 入力しなおす</span>
</pre></div></div>

<h2>
<span id="ブランチを移動しようとしたら怒られた" class="fragment"></span><a href="#%E3%83%96%E3%83%A9%E3%83%B3%E3%83%81%E3%82%92%E7%A7%BB%E5%8B%95%E3%81%97%E3%82%88%E3%81%86%E3%81%A8%E3%81%97%E3%81%9F%E3%82%89%E6%80%92%E3%82%89%E3%82%8C%E3%81%9F"><i class="fa fa-link"></i></a>ブランチを移動しようとしたら怒られた</h2>

<p>以下のようなメッセージが出たとき</p>

<div class="code-frame" data-lang="sh"><div class="highlight"><pre><span></span>$ git checkout fix/piyo
error: Your <span class="nb">local</span> changes to the following files would be overwritten by checkout:
        config/deploy.rb
Please, commit your changes or stash them before you can switch branches.
Aborting
</pre></div></div>

<p>消してもいい変更なら<code>git reset --hard HEAD</code>とか<code>git co .</code>する．後者をよく使う．<br>
消さずに保存したい場合はきちんとコミットするか，stash saveする．<br>
git stashについては<a href="http://qiita.com/items/41288806e4733cb9c342">fukajuneさんの「変更を一時的に退避！キメろgit stash」</a>が詳しいです．</p>

<h2>
<span id="昔のコミット内容にちょっとしたバグを見つけた" class="fragment"></span><a href="#%E6%98%94%E3%81%AE%E3%82%B3%E3%83%9F%E3%83%83%E3%83%88%E5%86%85%E5%AE%B9%E3%81%AB%E3%81%A1%E3%82%87%E3%81%A3%E3%81%A8%E3%81%97%E3%81%9F%E3%83%90%E3%82%B0%E3%82%92%E8%A6%8B%E3%81%A4%E3%81%91%E3%81%9F"><i class="fa fa-link"></i></a>昔のコミット内容にちょっとしたバグを見つけた</h2>

<p><strong>そのコミットをまだpushしていない場合限定</strong><br>
新しく行なった変更を以前のコミットに含めたい．</p>

<h3>
<span id="直前のコミットに含めたい" class="fragment"></span><a href="#%E7%9B%B4%E5%89%8D%E3%81%AE%E3%82%B3%E3%83%9F%E3%83%83%E3%83%88%E3%81%AB%E5%90%AB%E3%82%81%E3%81%9F%E3%81%84"><i class="fa fa-link"></i></a>直前のコミットに含めたい</h3>

<p>上記の<code>commit --amend</code>を使うとよい．</p>

<h3>
<span id="それ以上古いコミットに含めたい" class="fragment"></span><a href="#%E3%81%9D%E3%82%8C%E4%BB%A5%E4%B8%8A%E5%8F%A4%E3%81%84%E3%82%B3%E3%83%9F%E3%83%83%E3%83%88%E3%81%AB%E5%90%AB%E3%82%81%E3%81%9F%E3%81%84"><i class="fa fa-link"></i></a>それ以上古いコミットに含めたい</h3>

<p>変更をcommitしたあと，<code>git rebase</code>を使う．</p>

<div class="code-frame" data-lang="sh"><div class="highlight"><pre><span></span>$ git commit -m <span class="s1">'適当なメッセージ'</span>
$ git rebase -i HEAD~3 <span class="c1"># 修正したいコミットを指定</span>
<span class="c1"># エディタが立ち上がるので，'適当なメッセージ'のコミットを修正したいコミットの下に移し，先頭をsquashに変更する</span>
</pre></div></div>

<h2>
<span id="その他困った" class="fragment"></span><a href="#%E3%81%9D%E3%81%AE%E4%BB%96%E5%9B%B0%E3%81%A3%E3%81%9F"><i class="fa fa-link"></i></a>その他困った</h2>

<p><a href="http://qiita.com/tags/Git">QiitaのGitタグ投稿</a>を見るか，<a href="https://github.com/rosylilly/git-tasukete" rel="nofollow noopener" target="_blank">git-tasukete</a>に助けを求めてみる</p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1" style="height:150px;">
<tr>
	<td rowspan="3">23位</td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="thumb-up-120px.png" /></i>1258</kbd>
		<a target="_blank" href="https://qiita.com/phimcall/items/555d09f872373f65c6fb">ナウいツールやサービスなどのまとめ</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-12-13<br />20:47:54</center>
	</td>
	<td style="width:200px;">
		<!--投稿者-->
		<center>
			@<a href="user/33819.html">phimcall</a>(5件の記事)<br />(株式会社Bizcast 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/33819/profile-images/1473686204">
		</center>
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[開発ツール]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<!--
		<div style="width:350px;height:150px;overflow:scroll;">%s</div>
		-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p><a href="http://www.find-job.net/startup/architecture-2013" rel="nofollow noopener" target="_blank">国内注目のWebサービスを支える言語・フレームワーク・アーキテクチャ一覧【2013年版】</a> をもとにナウい感じのサービスなどをまとめた。分類がおかしいかもしれないのん</p>

<h2>
<span id="コード管理" class="fragment"></span><a href="#%E3%82%B3%E3%83%BC%E3%83%89%E7%AE%A1%E7%90%86"><i class="fa fa-link"></i></a>コード管理</h2>

<p>ソースコードは Git で管理しているところが増えている</p>

<h3>
<span id="git" class="fragment"></span><a href="#git"><i class="fa fa-link"></i></a>Git</h3>

<ul>
<li>
<a href="https://github.com/" rel="nofollow noopener" target="_blank">GitHub</a>

<ul>
<li>
<a href="https://enterprise.github.com/" rel="nofollow noopener" target="_blank">GitHub Enterprise</a>: Enterprise 向け</li>
</ul>
</li>
<li>Gitlab

<ul>
<li><a href="https://www.gitlab.com/cloud/" rel="nofollow noopener" target="_blank">Gitlab Cloud</a></li>
<li>
<a href="http://gitlab.org/gitlab-ce/" rel="nofollow noopener" target="_blank">Gitlab CE</a>: オープンソース</li>
<li>
<a href="https://www.gitlab.com/features/" rel="nofollow noopener" target="_blank">Gitlab EE</a>: Enterprise 向け</li>
</ul>
</li>
<li>
<a href="https://bitbucket.org/" rel="nofollow noopener" target="_blank">BitBucket</a>

<ul>
<li>
<a href="https://www.atlassian.com/ja/software/stash/overview" rel="nofollow noopener" target="_blank">Stash</a>: Enterprise 向け</li>
</ul>
</li>
<li><a href="http://codebreak.com/" rel="nofollow noopener" target="_blank">codebreak;</a></li>
<li><a href="https://rhodecode.com/pricing" rel="nofollow noopener" target="_blank">RhodeCode</a></li>
<li><a href="https://gitorious.org/" rel="nofollow noopener" target="_blank">Gitorious</a></li>
<li><a href="https://github.com/yuki-kimoto/gitprep" rel="nofollow noopener" target="_blank">GitPrep</a></li>
<li><a href="https://github.com/takezoe/gitbucket" rel="nofollow noopener" target="_blank">GitBucket</a></li>
</ul>

<p><a href="http://hiroki.jp/github-clone" rel="nofollow noopener" target="_blank">GitHubクローンまとめ 無料でGitHubのような機能を実現するための候補 | Act as Professional - hiroki.jp</a></p>

<h4>
<span id="料金" class="fragment"></span><a href="#%E6%96%99%E9%87%91"><i class="fa fa-link"></i></a>料金</h4>

<p>private repository を作りたい場合は Gitlab Cloud (無料で無制限 repository, 無制限 private collaborators)。次に BitBucket (無料で無制限 private repository, 5 人までの private collaborators)</p>

<h3>
<span id="コードレビュア" class="fragment"></span><a href="#%E3%82%B3%E3%83%BC%E3%83%89%E3%83%AC%E3%83%93%E3%83%A5%E3%82%A2"><i class="fa fa-link"></i></a>コードレビュア</h3>

<ul>
<li><a href="http://www.reviewboard.org/" rel="nofollow noopener" target="_blank">Review Board</a></li>
<li><a href="http://phabricator.org/" rel="nofollow noopener" target="_blank">Phabricator</a></li>
<li><a href="https://code.google.com/p/rietveld/" rel="nofollow noopener" target="_blank">rietveld</a></li>
<li><a href="http://code.google.com/p/gerrit/" rel="nofollow noopener" target="_blank">gerrit</a></li>
<li><a href="https://www.atlassian.com/ja/software/crucible/overview" rel="nofollow noopener" target="_blank">Crucible</a></li>
<li><a href="http://getbarkeep.org/" rel="nofollow noopener" target="_blank">Barkeep</a></li>
<li><a href="https://code.google.com/p/rietveld/" rel="nofollow noopener" target="_blank">rietveld</a></li>
</ul>

<p><a href="http://hiroki.jp/2012/09/13/5626/" rel="nofollow noopener" target="_blank">コードレビューツール 6選 どれが最適？ | Act as Professional - hiroki.jp</a></p>

<h3>
<span id="バグトラッカー" class="fragment"></span><a href="#%E3%83%90%E3%82%B0%E3%83%88%E3%83%A9%E3%83%83%E3%82%AB%E3%83%BC"><i class="fa fa-link"></i></a>バグトラッカー</h3>

<ul>
<li><a href="http://www.bugzilla.org/" rel="nofollow noopener" target="_blank">Bugzilla</a></li>
<li><a href="http://trac.edgewall.org/" rel="nofollow noopener" target="_blank">Trac</a></li>
<li><a href="http://www.mantisbt.org/" rel="nofollow noopener" target="_blank">mantis</a></li>
</ul>

<p><a href="http://d.hatena.ne.jp/ryoben/20100628/1277740446" rel="nofollow noopener" target="_blank">フリーのバグ管理システム比較 - SOA導入するまで</a></p>

<h2>
<span id="db" class="fragment"></span><a href="#db"><i class="fa fa-link"></i></a>DB</h2>

<h3>
<span id="rdbms" class="fragment"></span><a href="#rdbms"><i class="fa fa-link"></i></a>RDBMS</h3>

<p>MySQL 使っているところやっぱり多い</p>

<ul>
<li>
<a href="http://www-jp.mysql.com/" rel="nofollow noopener" target="_blank">MySQL</a>

<ul>
<li><a href="http://www.jetprofiler.com/" rel="nofollow noopener" target="_blank">Jet Profiler</a></li>
</ul>
</li>
<li><a href="http://www.postgresql.org/" rel="nofollow noopener" target="_blank">PostgreSQL</a></li>
<li><a href="http://www.oracle.com/jp/products/database/overview/index.html" rel="nofollow noopener" target="_blank">Oracle Database</a></li>
</ul>

<h3>
<span id="nosql-kvs" class="fragment"></span><a href="#nosql-kvs"><i class="fa fa-link"></i></a>NoSQL (KVS)</h3>

<ul>
<li><a href="http://redis.io/" rel="nofollow noopener" target="_blank">Redis</a></li>
<li><a href="http://memcached.org/" rel="nofollow noopener" target="_blank">Memcached</a></li>
<li><a href="http://fallabs.com/kyototycoon/" rel="nofollow noopener" target="_blank">KyotoTycoon</a></li>
<li>
<a href="http://fallabs.com/tokyotyrant/" rel="nofollow noopener" target="_blank">TokyoTyrant</a>

<ul>
<li><a href="http://nplll.com/archives/2012/04/kyototycoontokyotyrant.php" rel="nofollow noopener" target="_blank">KyotoTycoonとTokyoTyrantの違い | mutter</a></li>
</ul>
</li>
</ul>

<p><a href="http://d.hatena.ne.jp/cypher256/20121013/p1" rel="nofollow noopener" target="_blank">パフォーマンス比較 Cassandra、Mongodb、SQLite、H2、MySQL、Postgres - C/pHeR Memo - Java とか。Eclipse とか。</a></p>

<h3>
<span id="nosql-その他" class="fragment"></span><a href="#nosql-%E3%81%9D%E3%81%AE%E4%BB%96"><i class="fa fa-link"></i></a>NoSQL (その他)</h3>

<ul>
<li>
<a href="http://www.mongodb.org/" rel="nofollow noopener" target="_blank">MongoDB</a>

<ul>
<li><a href="http://www.atmarkit.co.jp/ait/articles/1211/09/news056.html" rel="nofollow noopener" target="_blank">特集：MongoDBで理解する「ドキュメント・データベース」の世界（前編）：開発者が知っておくべき、ドキュメント・データベースの基礎 (1/3) - ＠IT</a></li>
</ul>
</li>
</ul>

<h2>
<span id="開発環境管理" class="fragment"></span><a href="#%E9%96%8B%E7%99%BA%E7%92%B0%E5%A2%83%E7%AE%A1%E7%90%86"><i class="fa fa-link"></i></a>開発環境管理</h2>

<h3>
<span id="セットアップツール" class="fragment"></span><a href="#%E3%82%BB%E3%83%83%E3%83%88%E3%82%A2%E3%83%83%E3%83%97%E3%83%84%E3%83%BC%E3%83%AB"><i class="fa fa-link"></i></a>セットアップツール</h3>

<p>Boxen は GitHub が開発した Mac OSX 向けセットアップツール。Qiita も使ってるらしい。</p>

<ul>
<li><a href="http://boxen.github.com/" rel="nofollow noopener" target="_blank">Boxen</a></li>
</ul>

<h2>
<span id="サーバ管理" class="fragment"></span><a href="#%E3%82%B5%E3%83%BC%E3%83%90%E7%AE%A1%E7%90%86"><i class="fa fa-link"></i></a>サーバ管理</h2>

<h3>
<span id="仮想化ソフト" class="fragment"></span><a href="#%E4%BB%AE%E6%83%B3%E5%8C%96%E3%82%BD%E3%83%95%E3%83%88"><i class="fa fa-link"></i></a>仮想化ソフト</h3>

<p>VirtualBox で Linux 環境構築 (Ubuntu か CentOS) して、その上に Docker でコンテナ作るの流行りっぽい</p>

<ul>
<li>ハイパーバイザ

<ul>
<li><a href="http://www.linux-kvm.org/page/Main_Page" rel="nofollow noopener" target="_blank">KVM</a></li>
<li><a href="http://www.xenproject.org/" rel="nofollow noopener" target="_blank">Xen</a></li>
</ul>
</li>
<li>ホスト OS

<ul>
<li>
<a href="https://www.virtualbox.org/" rel="nofollow noopener" target="_blank">VirtualBox</a>

<ul>
<li><a href="http://www.vagrantup.com/" rel="nofollow noopener" target="_blank">Vagrant</a></li>
</ul>
</li>
<li><a href="http://www.vmware.com/jp/" rel="nofollow noopener" target="_blank">VMWare</a></li>
</ul>
</li>
<li>コンテナ

<ul>
<li>
<a href="http://linuxcontainers.org/" rel="nofollow noopener" target="_blank">LXC</a>

<ul>
<li><a href="https://www.docker.io/" rel="nofollow noopener" target="_blank">Docker</a></li>
</ul>
</li>
</ul>
</li>
</ul>

<h3>
<span id="サーバプロビジョニング" class="fragment"></span><a href="#%E3%82%B5%E3%83%BC%E3%83%90%E3%83%97%E3%83%AD%E3%83%93%E3%82%B8%E3%83%A7%E3%83%8B%E3%83%B3%E3%82%B0"><i class="fa fa-link"></i></a>サーバプロビジョニング</h3>

<p>環境構築を自動化する。Chef や Puppet が人気。Ansible も分かりやすいという評判を聞く</p>

<ul>
<li>
<a href="http://www.getchef.com/chef/" rel="nofollow noopener" target="_blank">Chef</a>

<ul>
<li><a href="http://hiroki.jp/2012/08/13/4989/" rel="nofollow noopener" target="_blank">chef-solo はじめてのLinux環境構築の自動化入門 | Act as Professional - hiroki.jp</a></li>
</ul>
</li>
<li>
<a href="http://puppetlabs.com/" rel="nofollow noopener" target="_blank">Puppet</a>

<ul>
<li><a href="http://gihyo.jp/admin/serial/01/puppet" rel="nofollow noopener" target="_blank">オープンソースなシステム自動管理ツール Puppet：連載｜gihyo.jp … 技術評論社</a></li>
</ul>
</li>
<li>
<a href="http://www.ansibleworks.com/" rel="nofollow noopener" target="_blank">Ansible</a>

<ul>
<li><a href="http://yteraoka.github.io/ansible-tutorial/" rel="nofollow noopener" target="_blank">Ansible Tutorial</a></li>
</ul>
</li>
</ul>

<h4>
<span id="サーバテスト" class="fragment"></span><a href="#%E3%82%B5%E3%83%BC%E3%83%90%E3%83%86%E3%82%B9%E3%83%88"><i class="fa fa-link"></i></a>サーバテスト</h4>

<ul>
<li><a href="http://serverspec.org/" rel="nofollow noopener" target="_blank">serverspec</a></li>
</ul>

<h3>
<span id="サーバオーケストレーション" class="fragment"></span><a href="#%E3%82%B5%E3%83%BC%E3%83%90%E3%82%AA%E3%83%BC%E3%82%B1%E3%82%B9%E3%83%88%E3%83%AC%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3"><i class="fa fa-link"></i></a>サーバオーケストレーション</h3>

<ul>
<li>
<a href="https://github.com/capistrano/capistrano/wiki" rel="nofollow noopener" target="_blank">Capistrano</a>

<ul>
<li><a href="http://blog.cloud.nifty.com/157/" rel="nofollow noopener" target="_blank">CapistranoとChefでサーバー管理を自動化～インスタンス作成から15分で実戦投入～ : ニフティクラウド ユーザーブログ</a></li>
</ul>
</li>
<li><a href="http://docs.fabfile.org/en/1.8/" rel="nofollow noopener" target="_blank">Fabric</a></li>
</ul>

<h3>
<span id="ロードバランサ" class="fragment"></span><a href="#%E3%83%AD%E3%83%BC%E3%83%89%E3%83%90%E3%83%A9%E3%83%B3%E3%82%B5"><i class="fa fa-link"></i></a>ロードバランサ</h3>

<ul>
<li>LVS + Keepalived

<ul>
<li><a href="http://sourceforge.jp/magazine/13/05/14/083000" rel="nofollow noopener" target="_blank">Linux Virtual ServerとKeepalivedで作る冗長化ロードバランサ | SourceForge.JP Magazine</a></li>
</ul>
</li>
</ul>

<h3>
<span id="モニタリングツール" class="fragment"></span><a href="#%E3%83%A2%E3%83%8B%E3%82%BF%E3%83%AA%E3%83%B3%E3%82%B0%E3%83%84%E3%83%BC%E3%83%AB"><i class="fa fa-link"></i></a>モニタリングツール</h3>

<ul>
<li>
<a href="http://www.nagios.org/" rel="nofollow noopener" target="_blank">nagios</a>: 統合監視ソフト

<ul>
<li><a href="http://itpro.nikkeibp.co.jp/article/COLUMN/20070410/267919/" rel="nofollow noopener" target="_blank">特選フリーソフト - サーバーを多彩な手法で監視　Nagios：ITpro</a></li>
</ul>
</li>
<li><a href="http://www.zabbix.com/jp/" rel="nofollow noopener" target="_blank">Zabbix</a></li>
<li>
<a href="http://www.opsview.com/" rel="nofollow noopener" target="_blank">Opsview</a>: Nagios 高級版</li>
<li>
<a href="http://munin-monitoring.org/" rel="nofollow noopener" target="_blank">Munin</a>: リソース監視</li>
<li>
<a href="http://mmonit.com/monit/" rel="nofollow noopener" target="_blank">Monit</a>: プロセス監視</li>
<li>
<a href="http://newrelic.com/" rel="nofollow noopener" target="_blank">New Relic</a>: パフォーマンス監視</li>
</ul>

<p><a href="http://nanapi.co.jp/blog/2013/09/11/monitor_nanapi_servers/" rel="nofollow noopener" target="_blank">意外と普通？大規模サービスにおけるサーバの監視方法 | nanapi TechBlog</a></p>

<h3>
<span id="ログ収集ツール" class="fragment"></span><a href="#%E3%83%AD%E3%82%B0%E5%8F%8E%E9%9B%86%E3%83%84%E3%83%BC%E3%83%AB"><i class="fa fa-link"></i></a>ログ収集ツール</h3>

<ul>
<li>
<a href="http://fluentd.org/" rel="nofollow noopener" target="_blank">fluentd</a>

<ul>
<li><a href="http://www.treasuredata.com/" rel="nofollow noopener" target="_blank">TreasureData</a></li>
</ul>
</li>
</ul>

<h3>
<span id="ci-ツール" class="fragment"></span><a href="#ci-%E3%83%84%E3%83%BC%E3%83%AB"><i class="fa fa-link"></i></a>CI ツール</h3>

<ul>
<li><a href="http://jenkins-ci.org/" rel="nofollow noopener" target="_blank">Jenkins</a></li>
<li><a href="https://travis-ci.org/" rel="nofollow noopener" target="_blank">Travis CI</a></li>
<li><a href="https://circleci.com/" rel="nofollow noopener" target="_blank">Circle CI</a></li>
<li><a href="https://drone.io/" rel="nofollow noopener" target="_blank">drone.io</a></li>
</ul>

<h3>
<span id="その他" class="fragment"></span><a href="#%E3%81%9D%E3%81%AE%E4%BB%96"><i class="fa fa-link"></i></a>その他</h3>

<h4>
<span id="job-queue" class="fragment"></span><a href="#job-queue"><i class="fa fa-link"></i></a>Job Queue</h4>

<ul>
<li><a href="http://search.cpan.org/%7Esixapart/TheSchwartz-1.10/lib/TheSchwartz.pm" rel="nofollow noopener" target="_blank">TheSchwartz</a></li>
<li><a href="http://gearman.org/" rel="nofollow noopener" target="_blank">Gearman</a></li>
</ul>

<p><a href="http://gihyo.jp/dev/serial/01/perl-hackers-hub/001001" rel="nofollow noopener" target="_blank">第10回　ジョブキューで後回し大作戦―TheSchwartz，Qudo，Q4M（1）：Perl Hackers Hub｜gihyo.jp … 技術評論社</a></p>

<h4>
<span id="ログ可視化" class="fragment"></span><a href="#%E3%83%AD%E3%82%B0%E5%8F%AF%E8%A6%96%E5%8C%96"><i class="fa fa-link"></i></a>ログ可視化</h4>

<ul>
<li>
<a href="http://kazeburo.github.io/GrowthForecast/" rel="nofollow noopener" target="_blank">GrowthForecast</a>

<ul>
<li><a href="http://mt.orz.at/archives/2012/06/growthforecast.html" rel="nofollow noopener" target="_blank">タムタムの日記 - GrowthForecastが便利な件について</a></li>
</ul>
</li>
<li><a href="http://blog.nomadscafe.jp/2013/02/hrforecast--.html" rel="nofollow noopener" target="_blank">HRForecast</a></li>
<li><a href="http://oss.oetiker.ch/rrdtool/" rel="nofollow noopener" target="_blank">RRDTool</a></li>
</ul>

<h4>
<span id="スクリプトのデーモン化" class="fragment"></span><a href="#%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%97%E3%83%88%E3%81%AE%E3%83%87%E3%83%BC%E3%83%A2%E3%83%B3%E5%8C%96"><i class="fa fa-link"></i></a>スクリプトのデーモン化</h4>

<ul>
<li>
<a href="http://supervisord.org/" rel="nofollow noopener" target="_blank">Supervisor</a>

<ul>
<li><a href="http://d.hatena.ne.jp/anatoo/20120310/1331321778" rel="nofollow noopener" target="_blank">適当なスクリプトをデーモン化するのにSupervisorが便利 - id:anatooのブログ</a></li>
</ul>
</li>
</ul>

<h2>
<span id="web" class="fragment"></span><a href="#web"><i class="fa fa-link"></i></a>Web</h2>

<h3>
<span id="アクセス管理" class="fragment"></span><a href="#%E3%82%A2%E3%82%AF%E3%82%BB%E3%82%B9%E7%AE%A1%E7%90%86"><i class="fa fa-link"></i></a>アクセス管理</h3>

<ul>
<li>GoogleAnalytics</li>
<li><a href="https://mixpanel.com/" rel="nofollow noopener" target="_blank">Mixpanel</a></li>
<li>
<a href="https://chartbeat.com/" rel="nofollow noopener" target="_blank">Chartbeat</a>

<ul>
<li>リアルタイムアクセス解析</li>
</ul>
</li>
</ul>

<h3>
<span id="web-サイト監視" class="fragment"></span><a href="#web-%E3%82%B5%E3%82%A4%E3%83%88%E7%9B%A3%E8%A6%96"><i class="fa fa-link"></i></a>Web サイト監視</h3>

<ul>
<li><a href="http://alertsite.com/" rel="nofollow noopener" target="_blank">AlertSite</a></li>
</ul>

<h3>
<span id="負荷試験" class="fragment"></span><a href="#%E8%B2%A0%E8%8D%B7%E8%A9%A6%E9%A8%93"><i class="fa fa-link"></i></a>負荷試験</h3>

<ul>
<li>siege</li>
</ul>

<h2>
<span id="チーム" class="fragment"></span><a href="#%E3%83%81%E3%83%BC%E3%83%A0"><i class="fa fa-link"></i></a>チーム</h2>

<ul>
<li><a href="https://www.google.co.jp/intx/ja/enterprise/apps/business/" rel="nofollow noopener" target="_blank">Google Apps</a></li>
</ul>

<h3>
<span id="グループウェア" class="fragment"></span><a href="#%E3%82%B0%E3%83%AB%E3%83%BC%E3%83%97%E3%82%A6%E3%82%A7%E3%82%A2"><i class="fa fa-link"></i></a>グループウェア</h3>

<ul>
<li><a href="http://www.microsoft.com/ja-jp/office/365/default.aspx" rel="nofollow noopener" target="_blank">Office 365</a></li>
</ul>

<h3>
<span id="チケットトラッカー" class="fragment"></span><a href="#%E3%83%81%E3%82%B1%E3%83%83%E3%83%88%E3%83%88%E3%83%A9%E3%83%83%E3%82%AB%E3%83%BC"><i class="fa fa-link"></i></a>チケットトラッカー</h3>

<ul>
<li><a href="http://www.pivotaltracker.com/" rel="nofollow noopener" target="_blank">Pivotal Tracker</a></li>
<li><a href="https://trello.com/" rel="nofollow noopener" target="_blank">Trello</a></li>
<li><a href="https://www.atlassian.com/ja/software/jira" rel="nofollow noopener" target="_blank">JIRA</a></li>
<li><a href="http://www.redmine.org/" rel="nofollow noopener" target="_blank">Redmine</a></li>
</ul>

<p><a href="http://www.ricksoft.jp/document/blog/view-blog-post.action?pageId=58982417" rel="nofollow noopener" target="_blank">経験者によるRedmine、Trac、JIRA比較 - Ricksoftブログ - Confluence</a></p>

<h3>
<span id="ドキュメント共有" class="fragment"></span><a href="#%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E5%85%B1%E6%9C%89"><i class="fa fa-link"></i></a>ドキュメント共有</h3>

<ul>
<li><a href="https://www.atlassian.com/ja/software/confluence" rel="nofollow noopener" target="_blank">Confluence</a></li>
<li><a href="https://teams.qiita.com" rel="nofollow noopener" target="_blank">Qiita:Team</a></li>
<li>Wiki

<ul>
<li>
<a href="http://moinmo.in/" rel="nofollow noopener" target="_blank">MoinMoin</a>: アドレスが可愛い</li>
<li><a href="http://www.mediawiki.org/wiki/MediaWiki/ja" rel="nofollow noopener" target="_blank">MediaWiki</a></li>
<li><a href="http://pukiwiki.sourceforge.jp/" rel="nofollow noopener" target="_blank">PukiWiki</a></li>
</ul>
</li>
</ul>

<h3>
<span id="チャットツール" class="fragment"></span><a href="#%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%84%E3%83%BC%E3%83%AB"><i class="fa fa-link"></i></a>チャットツール</h3>

<p>IRC が根強い人気を誇る。最近は Hipchat も人気出てきた</p>

<ul>
<li>
<a href="https://www.atlassian.com/ja/software/hipchat/overview" rel="nofollow noopener" target="_blank">Hipchat</a>

<ul>
<li><a href="https://community.uservoice.com/blog/how-we-use-hipchat/" rel="nofollow noopener" target="_blank">How we use HipChat to keep the (distributed) UserVoice team in sync | UserCentered</a></li>
</ul>
</li>
<li><a href="https://slack.com/" rel="nofollow noopener" target="_blank">Slack</a></li>
<li><a href="http://www.chatwork.com/ja/" rel="nofollow noopener" target="_blank">ChatWork</a></li>
<li><a href="https://idobata.io/" rel="nofollow noopener" target="_blank">Idobata</a></li>
<li><a href="http://www.typetalk.in/ja/" rel="nofollow noopener" target="_blank">typetalk</a></li>
<li><a href="https://www.flowdock.com/" rel="nofollow noopener" target="_blank">flowdock</a></li>
<li><a href="https://gitter.im" rel="nofollow noopener" target="_blank">Gitter</a></li>
<li><a href="https://hall.com/" rel="nofollow noopener" target="_blank">Hall</a></li>
<li>IRC</li>
<li><a href="http://skype.com/" rel="nofollow noopener" target="_blank">Skype</a></li>
<li><a href="http://www.google.com/+/learnmore/hangouts/" rel="nofollow noopener" target="_blank">Hangouts</a></li>
</ul>

<h3>
<span id="sns" class="fragment"></span><a href="#sns"><i class="fa fa-link"></i></a>SNS</h3>

<ul>
<li><a href="https://www.yammer.com/" rel="nofollow noopener" target="_blank">Yammer</a></li>
</ul>

<h2>
<span id="その他-1" class="fragment"></span><a href="#%E3%81%9D%E3%81%AE%E4%BB%96-1"><i class="fa fa-link"></i></a>その他</h2>

<h3>
<span id="カスタマーサービス" class="fragment"></span><a href="#%E3%82%AB%E3%82%B9%E3%82%BF%E3%83%9E%E3%83%BC%E3%82%B5%E3%83%BC%E3%83%93%E3%82%B9"><i class="fa fa-link"></i></a>カスタマーサービス</h3>

<ul>
<li><a href="http://jp.zendesk.com/" rel="nofollow noopener" target="_blank">Zendesk</a></li>
</ul>

<h3>
<span id="テスト" class="fragment"></span><a href="#%E3%83%86%E3%82%B9%E3%83%88"><i class="fa fa-link"></i></a>テスト</h3>

<ul>
<li>
<a href="https://www.optimizely.jp/" rel="nofollow noopener" target="_blank">Optimizely</a>: A/B テストツール</li>
</ul>
</div>
	</td>
</tr>
</table>
<br />
<table border="1" style="height:150px;">
<tr>
	<td rowspan="3">24位</td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="thumb-up-120px.png" /></i>1225</kbd>
		<a target="_blank" href="https://qiita.com/spesnova/items/d3096d062d70e7385e9d">GitHub 製エディタ Atom リファレンス</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2014-02-27<br />19:21:52</center>
	</td>
	<td style="width:200px;">
		<!--投稿者-->
		<center>
			@<a href="user/20833.html">spesnova</a>(42件の記事)<br />(Increments Inc. 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/20833/profile-images/1473683133">
		</center>
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[GitHub]</b> <b>[ATOM]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<!--
		<div style="width:350px;height:150px;overflow:scroll;">%s</div>
		-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p><a href="https://camo.qiitausercontent.com/bbb8979d925f9a1353c94b6a066b0d2acb66a2a4/687474703a2f2f63646e332e746e7763646e2e636f6d2f77702d636f6e74656e742f626c6f67732e6469722f312f66696c65732f323031342f30322f61746f6d2d373836783234352e6a7067" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/bbb8979d925f9a1353c94b6a066b0d2acb66a2a4/687474703a2f2f63646e332e746e7763646e2e636f6d2f77702d636f6e74656e742f626c6f67732e6469722f312f66696c65732f323031342f30322f61746f6d2d373836783234352e6a7067" alt="" data-canonical-src="http://cdn3.tnwcdn.com/wp-content/blogs.dir/1/files/2014/02/atom-786x245.jpg"></a></p>

<p><img alt=":warning:" class="emoji" height="20" src="https://cdn.qiita.com/emoji/twemoji/unicode/26a0-fe0f.png" title=":warning:" width="20"> 2014年02月27日に書いた記事なため、内容が古くなっています。注意してください <img alt=":sweat_smile:" class="emoji" height="20" src="https://cdn.qiita.com/emoji/twemoji/unicode/1f605.png" title=":sweat_smile:" width="20"></p>

<h2>
<span id="atom-とは" class="fragment"></span><a href="#atom-%E3%81%A8%E3%81%AF"><i class="fa fa-link"></i></a>Atom とは</h2>

<p>GitHub 製テキストエディタ。Sublime のようにデフォルト状態でも十分使える、かつカスタマイズ可能。2014/02/27 現在では招待制。</p>

<p><a href="https://atom.io" rel="nofollow noopener" target="_blank">公式サイト - atom.io</a></p>

<h3>
<span id="他のエディタと何が違うのか" class="fragment"></span><a href="#%E4%BB%96%E3%81%AE%E3%82%A8%E3%83%87%E3%82%A3%E3%82%BF%E3%81%A8%E4%BD%95%E3%81%8C%E9%81%95%E3%81%86%E3%81%AE%E3%81%8B"><i class="fa fa-link"></i></a>他のエディタと何が違うのか</h3>

<p>Chromium をベースにできており、エディタのどのページもローカルで Web ページがレンダリングされてる。 Node.js を使って各ウィンドウの JavaScript 環境で自由にコードを実行できる。使用されてる技術的に Web 開発者にとっては馴染みが深いエディタになると思われる。</p>

<p>（Chromium ベースなので Developer Tools が開ける (<code>option-cmd-I</code>)）</p>

<p><a href="https://camo.qiitausercontent.com/12d9c96d419308f0c92692b7280e0c34275cea56/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f32303833332f39656538623534342d303435392d393763632d633062652d6436643834316663633664352e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/12d9c96d419308f0c92692b7280e0c34275cea56/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f32303833332f39656538623534342d303435392d393763632d633062652d6436643834316663633664352e706e67" alt="_Users_seigo_workspace_wantedly.github.io.png" title="_Users_seigo_workspace_wantedly.github.io.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/20833/9ee8b544-0459-97cc-c0be-d6d841fcc6d5.png"></a></p>

<h4>
<span id="sublime" class="fragment"></span><a href="#sublime"><i class="fa fa-link"></i></a>Sublime</h4>

<p>かなり似てる。git gutter とか package control がデフォルトで入ってるイメージ。プラグインの充実度はまだ比較にならないが、プラグインやテーマが GitHub と密に連携していたりとエディタのエコシステムが強みに感じる。</p>

<p>速さは体感ではそこまで変わらない。（少なくとも Sublime より速い、とかではない）Timecop（下記にスクショつけてる）でボトルネック見つけて改善もできそう。</p>

<h4>
<span id="vim" class="fragment"></span><a href="#vim"><i class="fa fa-link"></i></a>Vim</h4>

<p>Vim と Sublime の違いに近い。vim-mode plugin は存在するが、vim ライクに使えるレベルといった感じ。<code>ctrl-V</code> が存在する！が、先頭インサートとか諸々使えなかったりで、今後に期待＋キーバインドをカスタマイズする必要あり。</p>

<p><del>今のところ Mac でしか動かないのも使うか迷うポイントである。(NeoVim vs Atom となっていくのかどうか）</del><br>
2015年03月20日現在は OS X 10.8 以降、 Windows 7 &amp; 8、 RedHat Linux、 及び Ubuntu Linux で利用できます。</p>

<blockquote>

<h4>
<span id="what-platforms-does-atom-run-on" class="fragment"></span><a href="#what-platforms-does-atom-run-on"><i class="fa fa-link"></i></a>What platforms does Atom run on?</h4>

<p>Prebuilt versions of Atom are available for OS X 10.8 or later, Windows 7 &amp; 8, RedHat Linux, and Ubuntu Linux.</p>
</blockquote>

<p><a href="https://atom.io/faq" class="autolink" rel="nofollow noopener" target="_blank">https://atom.io/faq</a></p>

<h4>
<span id="emacs" class="fragment"></span><a href="#emacs"><i class="fa fa-link"></i></a>Emacs</h4>

<p>わかりません。（Emacs 使いの方、編集リクエストください）</p>

<h2>
<span id="操作" class="fragment"></span><a href="#%E6%93%8D%E4%BD%9C"><i class="fa fa-link"></i></a>操作</h2>

<h3>
<span id="コマンドパレット" class="fragment"></span><a href="#%E3%82%B3%E3%83%9E%E3%83%B3%E3%83%89%E3%83%91%E3%83%AC%E3%83%83%E3%83%88"><i class="fa fa-link"></i></a>コマンドパレット</h3>

<p><code>cmd+shift-P</code></p>

<p><a href="https://camo.qiitausercontent.com/ba5d5d8948c73f64c67e357e81571ca3c49ffcdc/68747470733a2f2f662e636c6f75642e6769746875622e636f6d2f6173736574732f313432342f313039313631382f65653763333535342d313636612d313165332d393935352d6161613631626235353039632e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/ba5d5d8948c73f64c67e357e81571ca3c49ffcdc/68747470733a2f2f662e636c6f75642e6769746875622e636f6d2f6173736574732f313432342f313039313631382f65653763333535342d313636612d313165332d393935352d6161613631626235353039632e706e67" alt="" data-canonical-src="https://f.cloud.github.com/assets/1424/1091618/ee7c3554-166a-11e3-9955-aaa61bb5509c.png"></a></p>

<h4>
<span id="open-on-github-file" class="fragment"></span><a href="#open-on-github-file"><i class="fa fa-link"></i></a>Open On GitHub: File</h4>

<p>現在見てるファイルの GitHub ページを開く</p>

<h4>
<span id="open-on-github-blame" class="fragment"></span><a href="#open-on-github-blame"><i class="fa fa-link"></i></a>Open On GitHub: Blame</h4>

<p>コードを範囲選択した上で、<code>Open on GitHub: Blame</code> を実行すると、該当箇所についての GitHub  blame ページが開く</p>

<h4>
<span id="open-on-github-history" class="fragment"></span><a href="#open-on-github-history"><i class="fa fa-link"></i></a>Open On GitHub: History</h4>

<p>現在見ているファイルの History の GitHub History ページを開く</p>

<h4>
<span id="open-on-github-copy-url" class="fragment"></span><a href="#open-on-github-copy-url"><i class="fa fa-link"></i></a>Open On GitHub: Copy URL</h4>

<p><code>http://github.com/wantedly/wantedly.github.io/blob/develop/README.md#L14-L19</code> のようなリンクをコピーする。Blame と同じく範囲選択した上でコマンドパレットから <code>Open On GitHub: Copy URL</code> を実行</p>

<h3>
<span id="ツリー" class="fragment"></span><a href="#%E3%83%84%E3%83%AA%E3%83%BC"><i class="fa fa-link"></i></a>ツリー</h3>

<h4>
<span id="ツリー開閉" class="fragment"></span><a href="#%E3%83%84%E3%83%AA%E3%83%BC%E9%96%8B%E9%96%89"><i class="fa fa-link"></i></a>ツリー開閉</h4>

<p><code>cmd-\</code></p>

<h4>
<span id="ツリーにフォーカスを移動" class="fragment"></span><a href="#%E3%83%84%E3%83%AA%E3%83%BC%E3%81%AB%E3%83%95%E3%82%A9%E3%83%BC%E3%82%AB%E3%82%B9%E3%82%92%E7%A7%BB%E5%8B%95"><i class="fa fa-link"></i></a>ツリーにフォーカスを移動</h4>

<p><code>ctl-0</code></p>

<h3>
<span id="ファイル" class="fragment"></span><a href="#%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB"><i class="fa fa-link"></i></a>ファイル</h3>

<h4>
<span id="ファイルの追加移動削除" class="fragment"></span><a href="#%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AE%E8%BF%BD%E5%8A%A0%E7%A7%BB%E5%8B%95%E5%89%8A%E9%99%A4"><i class="fa fa-link"></i></a>ファイルの追加、移動、削除</h4>

<p><code>ツリー上で右クリック</code></p>

<p>キーボードショートカットもある</p>

<ul>
<li>追加 <code>a</code>
</li>
<li>移動 <code>m</code>
</li>
<li>削除 <code>delete</code>
</li>
</ul>

<h3>
<span id="検索" class="fragment"></span><a href="#%E6%A4%9C%E7%B4%A2"><i class="fa fa-link"></i></a>検索</h3>

<h4>
<span id="ファイル検索" class="fragment"></span><a href="#%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E6%A4%9C%E7%B4%A2"><i class="fa fa-link"></i></a>ファイル検索</h4>

<p><code>cmd-t</code></p>

<h4>
<span id="現在開いてるファイルから検索" class="fragment"></span><a href="#%E7%8F%BE%E5%9C%A8%E9%96%8B%E3%81%84%E3%81%A6%E3%82%8B%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%8B%E3%82%89%E6%A4%9C%E7%B4%A2"><i class="fa fa-link"></i></a>現在開いてるファイルから検索</h4>

<p><code>cmd-b</code></p>

<h4>
<span id="変更のあるファイルと-git-でまだトラッキングしてないファイルを検索" class="fragment"></span><a href="#%E5%A4%89%E6%9B%B4%E3%81%AE%E3%81%82%E3%82%8B%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%A8-git-%E3%81%A7%E3%81%BE%E3%81%A0%E3%83%88%E3%83%A9%E3%83%83%E3%82%AD%E3%83%B3%E3%82%B0%E3%81%97%E3%81%A6%E3%81%AA%E3%81%84%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%82%92%E6%A4%9C%E7%B4%A2"><i class="fa fa-link"></i></a>変更のあるファイルと Git でまだトラッキングしてないファイルを検索</h4>

<p><code>cmd-shit-b</code>（Git を使ってるプロジェクトであれば）</p>

<h4>
<span id="ファイル内検索と置換" class="fragment"></span><a href="#%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E5%86%85%E6%A4%9C%E7%B4%A2%E3%81%A8%E7%BD%AE%E6%8F%9B"><i class="fa fa-link"></i></a>ファイル内検索と置換</h4>

<p><code>cmd-f</code></p>

<h4>
<span id="プロジェクト全体からファイル内検索" class="fragment"></span><a href="#%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E5%85%A8%E4%BD%93%E3%81%8B%E3%82%89%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E5%86%85%E6%A4%9C%E7%B4%A2"><i class="fa fa-link"></i></a>プロジェクト全体からファイル内検索</h4>

<p><code>cmd-shift-f</code></p>

<p>ウィンドウ下部に置換文字列を入力することで置換</p>

<h4>
<span id="シンボルへのジャンプ" class="fragment"></span><a href="#%E3%82%B7%E3%83%B3%E3%83%9C%E3%83%AB%E3%81%B8%E3%81%AE%E3%82%B8%E3%83%A3%E3%83%B3%E3%83%97"><i class="fa fa-link"></i></a>シンボルへのジャンプ</h4>

<p><code>cmd-r</code></p>

<h4>
<span id="プロジェクト横断でシンボルへのジャンプ" class="fragment"></span><a href="#%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E6%A8%AA%E6%96%AD%E3%81%A7%E3%82%B7%E3%83%B3%E3%83%9C%E3%83%AB%E3%81%B8%E3%81%AE%E3%82%B8%E3%83%A3%E3%83%B3%E3%83%97"><i class="fa fa-link"></i></a>プロジェクト横断でシンボルへのジャンプ</h4>

<p>まず、</p>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>$ brew install ctags
</pre></div></div>

<p>プロジェクトルートにて</p>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>$ ctags -R ./
</pre></div></div>

<p>atom にて</p>

<p><code>cmd-shift-r</code></p>

<h3>
<span id="パネルの分割" class="fragment"></span><a href="#%E3%83%91%E3%83%8D%E3%83%AB%E3%81%AE%E5%88%86%E5%89%B2"><i class="fa fa-link"></i></a>パネルの分割</h3>

<h4>
<span id="分割" class="fragment"></span><a href="#%E5%88%86%E5%89%B2"><i class="fa fa-link"></i></a>分割</h4>

<p><code>cmd-k</code> の後に <code>上下キー</code></p>

<p>例えば、右にパネルを出したかったら <code>cmd-k</code> + <code>右</code></p>

<h4>
<span id="移動" class="fragment"></span><a href="#%E7%A7%BB%E5%8B%95"><i class="fa fa-link"></i></a>移動</h4>

<p><code>cmd-k</code> の後に <code>cmd-上下キー</code></p>

<p>例えば、左に移動したかったら <code>cmd-k</code> + <code>cmd-左</code></p>

<h4>
<span id="閉じる" class="fragment"></span><a href="#%E9%96%89%E3%81%98%E3%82%8B"><i class="fa fa-link"></i></a>閉じる</h4>

<p><code>meta-w</code> (<code>cmd-w</code>)</p>

<h3>
<span id="ブロックをたたむ" class="fragment"></span><a href="#%E3%83%96%E3%83%AD%E3%83%83%E3%82%AF%E3%82%92%E3%81%9F%E3%81%9F%E3%82%80"><i class="fa fa-link"></i></a>ブロックをたたむ</h3>

<p>行の上にカーソルを合わせると表示される矢印をクリック</p>

<p>キーボードから行うには</p>

<ul>
<li>たたむ - <code>alt-cmd-[</code> または <code>alt-cmd-]</code>
</li>
<li>開く - <code>alt-cmd-shift-}</code> または <code>alt-cmd-shift-}</code>
</li>
</ul>

<h2>
<span id="カスタマイズ" class="fragment"></span><a href="#%E3%82%AB%E3%82%B9%E3%82%BF%E3%83%9E%E3%82%A4%E3%82%BA"><i class="fa fa-link"></i></a>カスタマイズ</h2>

<p>（ちょっとずつ書いてく）</p>

<p><a href="https://camo.qiitausercontent.com/cb3d4e52cd07e5ab24b56b142c1e1059a55d786f/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f32303833332f32353133623638342d306465302d633435312d626433662d3533343932636433643364302e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/cb3d4e52cd07e5ab24b56b142c1e1059a55d786f/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f32303833332f32353133623638342d306465302d633435312d626433662d3533343932636433643364302e706e67" alt="untitled_と_GitHub_製エディタ_Atom_リファレンス_と_1._bash.png" title="untitled_と_GitHub_製エディタ_Atom_リファレンス_と_1._bash.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/20833/2513b684-0de0-c451-bd3f-53492cd3d3d0.png"></a></p>

<h3>
<span id="設定画面を開く" class="fragment"></span><a href="#%E8%A8%AD%E5%AE%9A%E7%94%BB%E9%9D%A2%E3%82%92%E9%96%8B%E3%81%8F"><i class="fa fa-link"></i></a>設定画面を開く</h3>

<p>コマンドパレットから <code>settings</code> と検索</p>

<h3>
<span id="テーマの変更" class="fragment"></span><a href="#%E3%83%86%E3%83%BC%E3%83%9E%E3%81%AE%E5%A4%89%E6%9B%B4"><i class="fa fa-link"></i></a>テーマの変更</h3>

<p>設定画面の Theme タブから、全体のテーマとコード部分のテーマ変更が可能。</p>

<p>デフォルトが一番良いと思う</p>

<h3>
<span id="パッケージのインストール" class="fragment"></span><a href="#%E3%83%91%E3%83%83%E3%82%B1%E3%83%BC%E3%82%B8%E3%81%AE%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB"><i class="fa fa-link"></i></a>パッケージのインストール</h3>

<p>設定画面の Packages からインストール可能なパッケージインストールするだけ</p>

<p>もしくは</p>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>$ apm install &lt;package&gt;
</pre></div></div>

<h2>
<span id="便利機能" class="fragment"></span><a href="#%E4%BE%BF%E5%88%A9%E6%A9%9F%E8%83%BD"><i class="fa fa-link"></i></a>便利機能</h2>

<h3>
<span id="markdown-プレビュー" class="fragment"></span><a href="#markdown-%E3%83%97%E3%83%AC%E3%83%93%E3%83%A5%E3%83%BC"><i class="fa fa-link"></i></a>Markdown プレビュー</h3>

<p><a href="https://camo.qiitausercontent.com/912628f26cb221103904d9150da1440388ef4814/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f32303833332f37366362346338322d353731332d613762382d353365352d6633336432623833316263342e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/912628f26cb221103904d9150da1440388ef4814/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f32303833332f37366362346338322d353731332d613762382d353365352d6633336432623833316263342e706e67" alt="README.md_-__Users_seigo_workspace_box-ubuntu12.04-chef.png" title="README.md_-__Users_seigo_workspace_box-ubuntu12.04-chef.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/20833/76cb4c82-5713-a7b8-53e5-f33d2b831bc4.png"></a></p>

<p>Packages -&gt; Markdown -&gt; Preview Buffer</p>

<p>保存するとレンダリングってのがあと一歩？</p>

<h3>
<span id="変更ファイル新規ファイルが一目でわかるツリー" class="fragment"></span><a href="#%E5%A4%89%E6%9B%B4%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E6%96%B0%E8%A6%8F%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%8C%E4%B8%80%E7%9B%AE%E3%81%A7%E3%82%8F%E3%81%8B%E3%82%8B%E3%83%84%E3%83%AA%E3%83%BC"><i class="fa fa-link"></i></a>変更ファイル・新規ファイルが一目でわかるツリー</h3>

<p><a href="https://camo.qiitausercontent.com/c3f8aa9ba2c8c788366dec807b923ee090ead3b1/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f32303833332f61303538393866322d323838332d386461372d663762302d3230386231623965353235322e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/c3f8aa9ba2c8c788366dec807b923ee090ead3b1/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f32303833332f61303538393866322d323838332d386461372d663762302d3230386231623965353235322e706e67" alt="additional_-__Users_seigo_workspace_wantedly.github.io.png" title="additional_-__Users_seigo_workspace_wantedly.github.io.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/20833/a05898f2-2883-8da7-f7b0-208b1b9e5252.png"></a></p>

<ul>
<li>変更したファイルはオレンジ</li>
<li>新規ファイルはグリーン</li>
</ul>

<h3>
<span id="どこが遅いか調べられる-timecop" class="fragment"></span><a href="#%E3%81%A9%E3%81%93%E3%81%8C%E9%81%85%E3%81%84%E3%81%8B%E8%AA%BF%E3%81%B9%E3%82%89%E3%82%8C%E3%82%8B-timecop"><i class="fa fa-link"></i></a>どこが遅いか調べられる Timecop</h3>

<p><a href="https://camo.qiitausercontent.com/c39d0ed3a31e91d92fbddc0654717ca760750c4a/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f32303833332f32366230373031312d666530612d623534342d613931392d6136613234303236646663642e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/c39d0ed3a31e91d92fbddc0654717ca760750c4a/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f32303833332f32366230373031312d666530612d623534342d613931392d6136613234303236646663642e706e67" alt="Timecop_-__Users_seigo_workspace_wantedly.github.io.png" title="Timecop_-__Users_seigo_workspace_wantedly.github.io.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/20833/26b07011-fe0a-b544-a919-a6a24026dfcd.png"></a></p>

<p>パッケージのローディングやテーマのローディング等、どこでどれくらい時間かかってるかわかる</p>

<h3>
<span id="自前テーマを作るのに便利そうな-styleguide" class="fragment"></span><a href="#%E8%87%AA%E5%89%8D%E3%83%86%E3%83%BC%E3%83%9E%E3%82%92%E4%BD%9C%E3%82%8B%E3%81%AE%E3%81%AB%E4%BE%BF%E5%88%A9%E3%81%9D%E3%81%86%E3%81%AA-styleguide"><i class="fa fa-link"></i></a>自前テーマを作るのに便利そうな StyleGuide</h3>

<p><a href="https://camo.qiitausercontent.com/4fa039967adbe31550899f5de27a0551fcc5ca70/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f32303833332f61616666303764662d313066642d656336312d326439352d6263313937633333626638652e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/4fa039967adbe31550899f5de27a0551fcc5ca70/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f32303833332f61616666303764662d313066642d656336312d326439352d6263313937633333626638652e706e67" alt="Styleguide_-__Users_seigo_workspace_wantedly.github.io.png" title="Styleguide_-__Users_seigo_workspace_wantedly.github.io.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/20833/aaff07df-10fd-ec61-2d95-bc197c33bf8e.png"></a></p>

<p>エディタの Web ページなので、CSS （less）でテーマ変えられる。</p>

<h2>
<span id="感想" class="fragment"></span><a href="#%E6%84%9F%E6%83%B3"><i class="fa fa-link"></i></a>感想</h2>

<ul>
<li>GitHub 製

<ul>
<li>ロードイメージが Octocat だったり</li>
<li>まだ git でトラッキングしてないファイル用に + マークのアイコンがついたり</li>
<li>ブランチ名デフォルトで出たり</li>
</ul>
</li>
<li>デフォルトのままで十分使えると書いてるあるとおりだった

<ul>
<li>テーマが少ないのもあるけどデフォルトが一番良かった</li>
</ul>
</li>
<li>設定画面が GUI で簡単

<ul>
<li>設定ファイルの実体は <code>~/.atom</code> ディレクトリにある。dotfiles での管理簡単</li>
</ul>
</li>
<li>プラグインの管理が楽

<ul>
<li>何を入れてるか、どれが有効か簡単に切り替え可能</li>
<li>GitHub と密に連携してるので Issue 上げたり README に飛べたり</li>
</ul>
</li>
<li>キーマップ、閲覧は GUI、編集はファイルベース、良い </li>
<li>Yet Another Sublime 感</li>
<li>package とか thema の generator</li>
<li>markdown preview やばい...

<ul>
<li>markdown の syntax highlight が GitHub Markdown</li>
</ul>
</li>
<li>theme とか less で書ける</li>
<li>Timecop っていうエディタのどこが遅いか表示できる</li>
<li>vim-mode プラグインもある（vim 代替レベルではない...）</li>
<li><a href="http://discuss.atom.io/t/why-is-atom-closed-source/82/6" rel="nofollow noopener" target="_blank">open-source と closed でゆれてる？</a></li>
</ul>
</div>
	</td>
</tr>
</table>
<br />
<table border="1" style="height:150px;">
<tr>
	<td rowspan="3">25位</td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="thumb-up-120px.png" /></i>1214</kbd>
		<a target="_blank" href="https://qiita.com/koogawa/items/5e2ff5a0312cb1f657f8">iPhoneアプリ申請やAppleの審査に関するメモ</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-04-06<br />19:28:05</center>
	</td>
	<td style="width:200px;">
		<!--投稿者-->
		<center>
			@<a href="user/8292.html">koogawa</a>(61件の記事)<br />(株式会社nanapi 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/8292/profile-images/1473680983">
		</center>
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[iPhone]</b> <b>[Xcode]</b> <b>[iOS]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<!--
		<div style="width:350px;height:150px;overflow:scroll;">%s</div>
		-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>iPhoneアプリの申請作業を行う上で知っておいた方が良いことをまとめておきます。</p>

<ul>
<li>一部個人の見解も混ざってます</li>
<li>申請ルールなどは予告なしに変更になることがよくあるので、本記事の内容は古い場合があります</li>
</ul>

<h1>
<span id="アプリ申請前" class="fragment"></span><a href="#%E3%82%A2%E3%83%97%E3%83%AA%E7%94%B3%E8%AB%8B%E5%89%8D"><i class="fa fa-link"></i></a>アプリ申請前</h1>

<h2>
<span id="アプリはどこから申請するの" class="fragment"></span><a href="#%E3%82%A2%E3%83%97%E3%83%AA%E3%81%AF%E3%81%A9%E3%81%93%E3%81%8B%E3%82%89%E7%94%B3%E8%AB%8B%E3%81%99%E3%82%8B%E3%81%AE"><i class="fa fa-link"></i></a>アプリはどこから申請するの？</h2>

<p><a href="https://itunesconnect.apple.com" rel="nofollow noopener" target="_blank">iTunes Connect</a>というサイトから申請できます。ブラウザはSafariでアクセスすることをおすすめします。 </p>

<h2>
<span id="誰でも申請できるの" class="fragment"></span><a href="#%E8%AA%B0%E3%81%A7%E3%82%82%E7%94%B3%E8%AB%8B%E3%81%A7%E3%81%8D%E3%82%8B%E3%81%AE"><i class="fa fa-link"></i></a>誰でも申請できるの？</h2>

<p>Apple Developer Programに登録する必要があります。（年間参加費 ¥11,800）<br>
また、アプリのアップロード時にはXcodeが必要なので、Macは必須になります。</p>

<h2>
<span id="アプリの申請時には何が必要なの" class="fragment"></span><a href="#%E3%82%A2%E3%83%97%E3%83%AA%E3%81%AE%E7%94%B3%E8%AB%8B%E6%99%82%E3%81%AB%E3%81%AF%E4%BD%95%E3%81%8C%E5%BF%85%E8%A6%81%E3%81%AA%E3%81%AE"><i class="fa fa-link"></i></a>アプリの申請時には何が必要なの？</h2>

<p>次の情報が必要になるので事前に準備しておきましょう。</p>

<ul>
<li>アプリ名（３０文字以内、すでに使われているものはダメ）</li>
<li>サブタイトル（30文字以内、iOS 11移行を搭載したデバイスにのみ表示される）</li>
<li>カテゴリ（主カテゴリと副カテゴリを指定可。詳細は後述）</li>
<li>アプリの説明文（4000文字以内）</li>
<li>プロモーション用テキスト（170文字以内、iOS 11移行を搭載したデバイスにのみ表示される）</li>
<li>アプリの価格</li>
<li>アプリのレーティング（性的なコンテンツ等が表示される可能性がある場合は高めに設定しておかないとリジェクトされる）</li>
<li>検索のためのキーワード（100文字以内）</li>
<li>サポート用サイト</li>
<li>App Store用のアイコン（1024x1024, 高画質JPEG/TIFF/PNG）</li>
<li>スクリーンショット（詳細は後述）</li>
<li>連絡用のメールアドレス、電話番号（公開はされない）</li>
</ul>

<h2>
<span id="主カテゴリと副カテゴリはどう違うの" class="fragment"></span><a href="#%E4%B8%BB%E3%82%AB%E3%83%86%E3%82%B4%E3%83%AA%E3%81%A8%E5%89%AF%E3%82%AB%E3%83%86%E3%82%B4%E3%83%AA%E3%81%AF%E3%81%A9%E3%81%86%E9%81%95%E3%81%86%E3%81%AE"><i class="fa fa-link"></i></a>主カテゴリと副カテゴリはどう違うの？</h2>

<p>第一希望と第二希望だと思っていたのですが、違うようです。</p>

<blockquote>
<p>アプリケーションに指定する主カテゴリ（PrimaryCategory）も、見つけやすさの面で重要なポイントです。閲覧するユーザに便利なよう、アプリケーションはこのカテゴリ別にリストアップされます。<br>
そのアプリケーションの主機能を最も適切に示しているカテゴリを注意深く選択してください。提出されたすべてのカテゴリはAppleがレビューを行います。<br>
また、オプションの副カテゴリ（Secondary Category）も指定できます。アプリケーションは副カテゴリではリストアップされませんが、その副カテゴリに対する検索結果としては返されます。たとえば、そのアプリケーションの主カテゴリが「財務会計（Finance）」で副カテゴリが「ビジネス（Business）」だった場合、ユーザは財務会計のカテゴリをチェックしたときにそのアプリケーションを見つけることができ、また「ビジネス」で検索したときにもその検索結果としてそのアプリケーションを見つけることができます。<br>
<a href="https://developer.apple.com/jp/devcenter/ios/library/documentation/iTunesConnect_Guide.pdf" rel="nofollow noopener" target="_blank">iTunes Connectデベロッパガイド</a>より抜粋</p>
</blockquote>

<p>詳しくはこちらの記事をご覧ください。</p>

<ul>
<li><a href="http://blog.koogawa.com/entry/2014/01/28/174240" rel="nofollow noopener" target="_blank">iOSアプリ公開時に設定できる「Secondary Category」はどこで使われるのか？</a></li>
</ul>

<h2>
<span id="検索キーワードには何を入れればいいの" class="fragment"></span><a href="#%E6%A4%9C%E7%B4%A2%E3%82%AD%E3%83%BC%E3%83%AF%E3%83%BC%E3%83%89%E3%81%AB%E3%81%AF%E4%BD%95%E3%82%92%E5%85%A5%E3%82%8C%E3%82%8C%E3%81%B0%E3%81%84%E3%81%84%E3%81%AE"><i class="fa fa-link"></i></a>検索キーワードには何を入れればいいの？</h2>

<p>アプリケーション名、会社名は検索ワードとして自動的に設定されるので、表記のゆらぎ（例：Twitterアプリなら「ついったー」「とぅいったー」）等を登録しておくと良いでしょう。<br>
ちなみに、アプリと関係ないキーワードや他社アプリ名などを入れるとリジェクトされるので注意です。</p>

<h2>
<span id="アプリ申請時にスクリーンショットは何種類用意すればよいの" class="fragment"></span><a href="#%E3%82%A2%E3%83%97%E3%83%AA%E7%94%B3%E8%AB%8B%E6%99%82%E3%81%AB%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88%E3%81%AF%E4%BD%95%E7%A8%AE%E9%A1%9E%E7%94%A8%E6%84%8F%E3%81%99%E3%82%8C%E3%81%B0%E3%82%88%E3%81%84%E3%81%AE"><i class="fa fa-link"></i></a>アプリ申請時にスクリーンショットは何種類用意すればよいの？</h2>

<p>2016/08/09より、スクリーンショットの簡易提出が可能になりました。これにより、iPhone/iPadそれぞれの最大サイズのスクリーンショット（例えばiPhoneなら5.5inch）をアップロードするだけで、自動で小さいサイズ用にリサイズしてくれるようになりました。詳しくは <a href="/mono0926" class="user-mention js-hovercard" title="mono0926" data-hovercard-target-type="user" data-hovercard-target-name="mono0926">@mono0926</a> さんの記事にとても詳しくまとめられています。</p>

<ul>
<li><a href="http://qiita.com/mono0926/items/0b1122e5a254f945f6b0" id="reference-608d515b123252483737">iTunesConnectでのアプリスクリーンショットの簡易提出が可能になりました🎉</a></li>
</ul>

<h2>
<span id="アップロードできるスクリーンショットのサイズファイル形式は決まってるの" class="fragment"></span><a href="#%E3%82%A2%E3%83%83%E3%83%97%E3%83%AD%E3%83%BC%E3%83%89%E3%81%A7%E3%81%8D%E3%82%8B%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88%E3%81%AE%E3%82%B5%E3%82%A4%E3%82%BA%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E5%BD%A2%E5%BC%8F%E3%81%AF%E6%B1%BA%E3%81%BE%E3%81%A3%E3%81%A6%E3%82%8B%E3%81%AE"><i class="fa fa-link"></i></a>アップロードできるスクリーンショットのサイズ・ファイル形式は決まってるの？</h2>

<p>はい。決められたサイズの画像しかアップロードできません。画像ファイル形式はJPEG、TIFF、またはPNGが使用可能です。</p>

<h3>
<span id="iphoneアプリの場合" class="fragment"></span><a href="#iphone%E3%82%A2%E3%83%97%E3%83%AA%E3%81%AE%E5%A0%B4%E5%90%88"><i class="fa fa-link"></i></a>iPhoneアプリの場合</h3>

<h4>
<span id="35インチディスプレイ用iphone-3gsiphone-4などiphone-5より前の機種" class="fragment"></span><a href="#35%E3%82%A4%E3%83%B3%E3%83%81%E3%83%87%E3%82%A3%E3%82%B9%E3%83%97%E3%83%AC%E3%82%A4%E7%94%A8iphone-3gsiphone-4%E3%81%AA%E3%81%A9iphone-5%E3%82%88%E3%82%8A%E5%89%8D%E3%81%AE%E6%A9%9F%E7%A8%AE"><i class="fa fa-link"></i></a>3.5インチディスプレイ用（iPhone 3GS、iPhone 4など、iPhone 5より前の機種）</h4>

<ul>
<li>640×960ピクセル（ステータスバーを除く場合は640×920ピクセル）</li>
<li>最低でも1枚。最大5枚まで。</li>
</ul>

<h4>
<span id="4インチディスプレイ用iphone-5ipod-touch-第5世代など縦長の機種" class="fragment"></span><a href="#4%E3%82%A4%E3%83%B3%E3%83%81%E3%83%87%E3%82%A3%E3%82%B9%E3%83%97%E3%83%AC%E3%82%A4%E7%94%A8iphone-5ipod-touch-%E7%AC%AC5%E4%B8%96%E4%BB%A3%E3%81%AA%E3%81%A9%E7%B8%A6%E9%95%B7%E3%81%AE%E6%A9%9F%E7%A8%AE"><i class="fa fa-link"></i></a>4インチディスプレイ用（iPhone 5、iPod touch 第5世代など、縦長の機種）</h4>

<ul>
<li>640×1136ピクセル（ステータスバーを除く場合は640×1096ピクセル）</li>
<li>最低でも1枚。最大5枚まで。</li>
</ul>

<h4>
<span id="47インチディスプレイ用iphone-6" class="fragment"></span><a href="#47%E3%82%A4%E3%83%B3%E3%83%81%E3%83%87%E3%82%A3%E3%82%B9%E3%83%97%E3%83%AC%E3%82%A4%E7%94%A8iphone-6"><i class="fa fa-link"></i></a>4.7インチディスプレイ用（iPhone 6）</h4>

<ul>
<li>750×1334ピクセル</li>
<li>iPhone 6をサポートする場合は最低でも1枚必要（最大5枚まで）</li>
</ul>

<h4>
<span id="55インチディスプレイ用iphone-6-plus" class="fragment"></span><a href="#55%E3%82%A4%E3%83%B3%E3%83%81%E3%83%87%E3%82%A3%E3%82%B9%E3%83%97%E3%83%AC%E3%82%A4%E7%94%A8iphone-6-plus"><i class="fa fa-link"></i></a>5.5インチディスプレイ用（iPhone 6 Plus）</h4>

<ul>
<li>1242×2208ピクセル</li>
<li>iPhone 6 Plusをサポートする場合は最低でも1枚必要（最大5枚まで）</li>
</ul>

<p>スクリーンショットに機能説明用のテキストなど、装飾を入れても問題ないようです（過度な使用は避けたほうがよいでしょう）</p>

<h3>
<span id="ipadアプリの場合" class="fragment"></span><a href="#ipad%E3%82%A2%E3%83%97%E3%83%AA%E3%81%AE%E5%A0%B4%E5%90%88"><i class="fa fa-link"></i></a>iPadアプリの場合</h3>

<p>iPadアプリの場合は更に多くの種類の画像が必要になります。詳しくは<a href="https://developer.apple.com/jp/devcenter/ios/library/documentation/iTunesConnect_Guide.pdf" rel="nofollow noopener" target="_blank">iTunes Connectデベロッパガイド</a>を参照してください。</p>

<h2>
<span id="アプリ紹介用のビデオをアップするには" class="fragment"></span><a href="#%E3%82%A2%E3%83%97%E3%83%AA%E7%B4%B9%E4%BB%8B%E7%94%A8%E3%81%AE%E3%83%93%E3%83%87%E3%82%AA%E3%82%92%E3%82%A2%E3%83%83%E3%83%97%E3%81%99%E3%82%8B%E3%81%AB%E3%81%AF"><i class="fa fa-link"></i></a>アプリ紹介用のビデオをアップするには？</h2>

<p>iOS 8のApp Storeから、動画によるアプリ紹介（App Video Previews）が可能になりました。<br>
動画を撮影・アップするにはYosemite以上(OS X 10.10以上)のMacとSafariが必要になります。</p>

<p>また、動画にもいろいろな制約（30fps以下であること等）があるので、<a href="https://itunesconnect.apple.com/WebObjects/iTunesConnect.woa/wo/1.0.0.13.7.2.7.9.3.1.2.3.3.1.1.12.1" rel="nofollow noopener" target="_blank">Appleの公式ドキュメント</a>を読むことをオススメします。</p>

<h2>
<span id="アプリの公開日はコントロールできるの" class="fragment"></span><a href="#%E3%82%A2%E3%83%97%E3%83%AA%E3%81%AE%E5%85%AC%E9%96%8B%E6%97%A5%E3%81%AF%E3%82%B3%E3%83%B3%E3%83%88%E3%83%AD%E3%83%BC%E3%83%AB%E3%81%A7%E3%81%8D%E3%82%8B%E3%81%AE"><i class="fa fa-link"></i></a>アプリの公開日はコントロールできるの？</h2>

<p>できます。</p>

<p>新規アプリの場合は「Availability Date」で公開日を指定できます。</p>

<p>アップデートの場合は、アプリ申請時にリリースタイミングを</p>

<ul>
<li>自動リリース - 審査が通ったら即時リリース</li>
<li>手動リリース - 審査が通ったら一旦保留状態になり、好きなタイミングでリリースできる</li>
<li>時間指定リリース - 審査が通ったあと、指定した時間に自動リリース</li>
</ul>

<p>の中から選択できます。</p>

<h1>
<span id="アプリ申請後" class="fragment"></span><a href="#%E3%82%A2%E3%83%97%E3%83%AA%E7%94%B3%E8%AB%8B%E5%BE%8C"><i class="fa fa-link"></i></a>アプリ申請後</h1>

<h2>
<span id="アプリの審査にはどのくらい期間がかかるの" class="fragment"></span><a href="#%E3%82%A2%E3%83%97%E3%83%AA%E3%81%AE%E5%AF%A9%E6%9F%BB%E3%81%AB%E3%81%AF%E3%81%A9%E3%81%AE%E3%81%8F%E3%82%89%E3%81%84%E6%9C%9F%E9%96%93%E3%81%8C%E3%81%8B%E3%81%8B%E3%82%8B%E3%81%AE"><i class="fa fa-link"></i></a>アプリの審査にはどのくらい期間がかかるの？</h2>

<p>アプリの内容や審査の時期にもよりますが、スムーズに行けば新規アプリの場合は大体2週間、アップデート審査の場合は1週間ぐらいで完了します。もちろん、これより早く審査が完了したり、逆にもっと長くかかったりする場合もあります。<br>
 （私が実際に申請したアプリの平均データであり、公式な情報ではありません）</p>

<p><strong>2017/6/14 追記：アップルさんが本気を出し始めたので、最近は1〜2日で完了するようになりました。</strong></p>

<p>アプリ審査の混み具合を把握できるサイトもあります</p>

<ul>
<li>
<a href="https://developer.apple.com/support/app-store/" rel="nofollow noopener" target="_blank">App Review Status</a> - Apple公式。5営業日以内にレビューされる割合がわかる（5営業日以内にレビューが完了する割合ではないので注意）</li>
<li>
<a href="http://reviewtimes.shinydevelopment.com/" rel="nofollow noopener" target="_blank">Average App Store Review Times</a> - 世界中のアプリ開発者から自己申告されたレビュー日数を元に平均日数を算出してくれるサービス。</li>
</ul>

<h2>
<span id="アップデート審査完了後の公開日はコントロールできるの" class="fragment"></span><a href="#%E3%82%A2%E3%83%83%E3%83%97%E3%83%87%E3%83%BC%E3%83%88%E5%AF%A9%E6%9F%BB%E5%AE%8C%E4%BA%86%E5%BE%8C%E3%81%AE%E5%85%AC%E9%96%8B%E6%97%A5%E3%81%AF%E3%82%B3%E3%83%B3%E3%83%88%E3%83%AD%E3%83%BC%E3%83%AB%E3%81%A7%E3%81%8D%E3%82%8B%E3%81%AE"><i class="fa fa-link"></i></a>アップデート審査完了後の公開日はコントロールできるの？</h2>

<p>できます。アップデート申請時に自動リリースか手動更新か選択できますので、後者を選択しましょう。手動更新を選択すると、審査完了後はリリース保留状態になり、リリース指示を出すまでApp Storeには公開されません。</p>

<h2>
<span id="waiting-for-reviewレビュー待ち中に変更できる情報は" class="fragment"></span><a href="#waiting-for-review%E3%83%AC%E3%83%93%E3%83%A5%E3%83%BC%E5%BE%85%E3%81%A1%E4%B8%AD%E3%81%AB%E5%A4%89%E6%9B%B4%E3%81%A7%E3%81%8D%E3%82%8B%E6%83%85%E5%A0%B1%E3%81%AF"><i class="fa fa-link"></i></a>Waiting For Review（レビュー待ち）中に変更できる情報は？</h2>

<ul>
<li>バージョン番号</li>
<li>コピーライト</li>
<li>カテゴリ</li>
<li>レーティング</li>
<li>アプリアイコン</li>
<li>アプリ名</li>
<li>Appサブタイトル</li>
<li>アプリ説明文</li>
<li>アップデート内容</li>
<li>キーワード</li>
<li>各種URL</li>
<li>スクリーンショット</li>
<li>開発者連絡先</li>
<li>EULA(End User License Agreement)</li>
</ul>

<p>※これらは変更になる可能性があるので、最新の情報は<a href="http://help.apple.com/itunes-connect/developer/#/dev18557d60e" rel="nofollow noopener" target="_blank">公式ドキュメント</a>を参照して下さい。</p>

<h2>
<span id="in-reviewレビュー中に変更できる情報は" class="fragment"></span><a href="#in-review%E3%83%AC%E3%83%93%E3%83%A5%E3%83%BC%E4%B8%AD%E3%81%AB%E5%A4%89%E6%9B%B4%E3%81%A7%E3%81%8D%E3%82%8B%E6%83%85%E5%A0%B1%E3%81%AF"><i class="fa fa-link"></i></a>In Review（レビュー中）に変更できる情報は？</h2>

<ul>
<li>コピーライト</li>
<li>各種URL</li>
<li>開発者連絡先</li>
<li>EULA(End User License Agreement)</li>
</ul>

<p>※これらは変更になる可能性があるので、最新の情報は<a href="http://help.apple.com/itunes-connect/developer/#/dev18557d60e" rel="nofollow noopener" target="_blank">公式ドキュメント</a>を参照して下さい。</p>

<h2>
<span id="アプリ審査中にバグが見つかったんだけど審査を中止してもらえるの" class="fragment"></span><a href="#%E3%82%A2%E3%83%97%E3%83%AA%E5%AF%A9%E6%9F%BB%E4%B8%AD%E3%81%AB%E3%83%90%E3%82%B0%E3%81%8C%E8%A6%8B%E3%81%A4%E3%81%8B%E3%81%A3%E3%81%9F%E3%82%93%E3%81%A0%E3%81%91%E3%81%A9%E5%AF%A9%E6%9F%BB%E3%82%92%E4%B8%AD%E6%AD%A2%E3%81%97%E3%81%A6%E3%82%82%E3%82%89%E3%81%88%E3%82%8B%E3%81%AE"><i class="fa fa-link"></i></a>アプリ審査中にバグが見つかったんだけど、審査を中止してもらえるの？</h2>

<p>審査状態が以下のいずれかである場合のみキャンセルできます。</p>

<ul>
<li>MissingScreenshot（スクリーンショットの欠落）</li>
<li>WaitingforExport Compliance（輸出コンプライアンス待ち）</li>
<li>Waiting For Review（レビュー待ち）</li>
<li>In Review（レビュー中）</li>
<li>Pending Apple Release（Appleリリース待ち）</li>
</ul>

<p>iTunes Connectにログインし、「マイ App」ページの「このバージョンをレビュー審査から削除」をクリックすると、バイナリが審査待機リストから削除されます。</p>

<p><a href="https://camo.qiitausercontent.com/c2aac308e665f691a8f7a8a8e674ece855e0cee9/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f383239322f66656232343332322d313737612d303837632d383837632d3964323761626566336239372e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/c2aac308e665f691a8f7a8a8e674ece855e0cee9/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f383239322f66656232343332322d313737612d303837632d383837632d3964323761626566336239372e706e67" alt="スクリーンショット 2014-10-19 10.18.31.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/8292/feb24322-177a-087c-887c-9d27abef3b97.png"></a></p>

<h2>
<span id="どんなアプリがリジェクトされるの" class="fragment"></span><a href="#%E3%81%A9%E3%82%93%E3%81%AA%E3%82%A2%E3%83%97%E3%83%AA%E3%81%8C%E3%83%AA%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%95%E3%82%8C%E3%82%8B%E3%81%AE"><i class="fa fa-link"></i></a>どんなアプリがリジェクトされるの？</h2>

<p>Appleが公開している「アプリケーション審査ガイドライン」に従っていないアプリはリジェクトされます。</p>

<ul>
<li><a href="https://developer.apple.com/jp/appstore/guidelines.html" rel="nofollow noopener" target="_blank">アプリケーション審査ガイドライン</a></li>
<li>
<a href="http://fladdict.net/blog/2010/09/reject-list.html" rel="nofollow noopener" target="_blank">iPhoneアプリ審査での111の禁止項目（意訳）</a> - <a href="http://twitter.com/fladdict" rel="nofollow noopener" target="_blank">fladdict</a>さんによる意訳。</li>
</ul>

<h2>
<span id="段階的にリリースはできるの" class="fragment"></span><a href="#%E6%AE%B5%E9%9A%8E%E7%9A%84%E3%81%AB%E3%83%AA%E3%83%AA%E3%83%BC%E3%82%B9%E3%81%AF%E3%81%A7%E3%81%8D%E3%82%8B%E3%81%AE"><i class="fa fa-link"></i></a>段階的にリリースはできるの？</h2>

<p>できます（2017年6月5日〜）。段階的リリースにより、<strong>自動更新がオンになっているユーザ</strong>に対して、7日間かけて徐々にバージョンのアップデートがリリースされていきます。（段階的リリースに当たらなかったユーザーも、自分からApp Storeを見に行った場合はダウンロードできてしまう点にご注意ください）</p>

<p>また、バージョンのアップデートで問題が発生した場合、いつでも段階的リリースを一時停止できます。</p>

<p>詳しい設定方法については<a href="https://itunespartner.apple.com/jp/apps/news/31070842?sc_cid=ITC-AP-PSRL" rel="nofollow noopener" target="_blank">iTunes Connect のリソースとヘルプ</a>を参照してください。</p>

<h2>
<span id="審査中にアップルから電話がかかってくることはあるの" class="fragment"></span><a href="#%E5%AF%A9%E6%9F%BB%E4%B8%AD%E3%81%AB%E3%82%A2%E3%83%83%E3%83%97%E3%83%AB%E3%81%8B%E3%82%89%E9%9B%BB%E8%A9%B1%E3%81%8C%E3%81%8B%E3%81%8B%E3%81%A3%E3%81%A6%E3%81%8F%E3%82%8B%E3%81%93%E3%81%A8%E3%81%AF%E3%81%82%E3%82%8B%E3%81%AE"><i class="fa fa-link"></i></a>審査中にアップルから電話がかかってくることはあるの？</h2>

<p>何度もリジェクトが続くと電話でやりとりすることになる場合もあるようです。というか、ありました。（私の場合は日本語が通じる方でした）</p>

<h1>
<span id="アプリ公開後" class="fragment"></span><a href="#%E3%82%A2%E3%83%97%E3%83%AA%E5%85%AC%E9%96%8B%E5%BE%8C"><i class="fa fa-link"></i></a>アプリ公開後</h1>

<h2>
<span id="公開後にスクリーンショットは自由に変更できるの" class="fragment"></span><a href="#%E5%85%AC%E9%96%8B%E5%BE%8C%E3%81%AB%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88%E3%81%AF%E8%87%AA%E7%94%B1%E3%81%AB%E5%A4%89%E6%9B%B4%E3%81%A7%E3%81%8D%E3%82%8B%E3%81%AE"><i class="fa fa-link"></i></a>公開後にスクリーンショットは自由に変更できるの？</h2>

<p>2013年1月9日よりスクリーンショットの常時変更ができなくなりました。公開後はアップデート時のみ変更可能です。</p>

<p><a href="https://developer.apple.com/news/index.php?id=1092013a" rel="nofollow noopener" target="_blank">Updating Screenshots in iTunes Connect</a></p>

<h2>
<span id="公開後はどんな情報が変更できるの" class="fragment"></span><a href="#%E5%85%AC%E9%96%8B%E5%BE%8C%E3%81%AF%E3%81%A9%E3%82%93%E3%81%AA%E6%83%85%E5%A0%B1%E3%81%8C%E5%A4%89%E6%9B%B4%E3%81%A7%E3%81%8D%E3%82%8B%E3%81%AE"><i class="fa fa-link"></i></a>公開後はどんな情報が変更できるの？</h2>

<p>次の情報は常時変更できます。</p>

<ul>
<li>
<del>アプリの説明文</del>（<a href="https://itunespartner.apple.com/jp/apps/news/61604499?sc_cid=ITC-AP-UPDIN" rel="nofollow noopener" target="_blank">2017年6月5日</a>から変更できなくなりました）</li>
<li>アップデート内容文</li>
<li>プロモーション用テキスト</li>
<li>Support URL</li>
<li>Marketing URL</li>
<li>Privacy Policy URL</li>
<li>Copyright</li>
</ul>

<p>次の情報はアップデート時にのみ変更可能です。</p>

<ul>
<li>アプリ名</li>
<li>アプリの説明文</li>
<li>カテゴリ</li>
<li>レーティング</li>
<li>キーワード</li>
<li>App Store用アイコン</li>
<li>スクリーンショット</li>
</ul>

<h2>
<span id="アプリのアップデートには何の情報が必要なの" class="fragment"></span><a href="#%E3%82%A2%E3%83%97%E3%83%AA%E3%81%AE%E3%82%A2%E3%83%83%E3%83%97%E3%83%87%E3%83%BC%E3%83%88%E3%81%AB%E3%81%AF%E4%BD%95%E3%81%AE%E6%83%85%E5%A0%B1%E3%81%8C%E5%BF%85%E8%A6%81%E3%81%AA%E3%81%AE"><i class="fa fa-link"></i></a>アプリのアップデートには何の情報が必要なの？</h2>

<p>アップデート内容を説明する文が必要になります（4000文字以内）<br>
※空欄でも審査には出せるようです</p>

<h2>
<span id="アプリのアップデート審査にはどのくらいかかるの" class="fragment"></span><a href="#%E3%82%A2%E3%83%97%E3%83%AA%E3%81%AE%E3%82%A2%E3%83%83%E3%83%97%E3%83%87%E3%83%BC%E3%83%88%E5%AF%A9%E6%9F%BB%E3%81%AB%E3%81%AF%E3%81%A9%E3%81%AE%E3%81%8F%E3%82%89%E3%81%84%E3%81%8B%E3%81%8B%E3%82%8B%E3%81%AE"><i class="fa fa-link"></i></a>アプリのアップデート審査にはどのくらいかかるの？</h2>

<p>先述した通り、アップデート審査の場合は1週間ぐらいで完了します。もちろん、これより早く審査が完了したり、逆にもっと長くかかったりする場合もあります。<br>
 （私が実際に申請してきたアプリの平均データであり、公式な情報ではありません）</p>

<p><strong>2017/6/14 追記：アップルさんが本気を出し始めたため、最近は1〜2日で完了するようになりました。</strong></p>

<h2>
<span id="表示されているカテゴリがおかしいんだけど" class="fragment"></span><a href="#%E8%A1%A8%E7%A4%BA%E3%81%95%E3%82%8C%E3%81%A6%E3%81%84%E3%82%8B%E3%82%AB%E3%83%86%E3%82%B4%E3%83%AA%E3%81%8C%E3%81%8A%E3%81%8B%E3%81%97%E3%81%84%E3%82%93%E3%81%A0%E3%81%91%E3%81%A9"><i class="fa fa-link"></i></a>表示されているカテゴリがおかしいんだけど？</h2>

<p>カテゴリを変更した際などは、App Storeに反映されるまで3〜4日かかる場合もあるようです。（実際にありました）</p>

<h2>
<span id="アプリをappstoreから削除できるの" class="fragment"></span><a href="#%E3%82%A2%E3%83%97%E3%83%AA%E3%82%92appstore%E3%81%8B%E3%82%89%E5%89%8A%E9%99%A4%E3%81%A7%E3%81%8D%E3%82%8B%E3%81%AE"><i class="fa fa-link"></i></a>アプリをAppStoreから削除できるの？</h2>

<p>iTunes Connectから削除可能です。削除されたアプリケーションは24時間以内にApp Storeに表示されなくなります。</p>

<h2>
<span id="アプリの公開を一時的に停止したいんだけど" class="fragment"></span><a href="#%E3%82%A2%E3%83%97%E3%83%AA%E3%81%AE%E5%85%AC%E9%96%8B%E3%82%92%E4%B8%80%E6%99%82%E7%9A%84%E3%81%AB%E5%81%9C%E6%AD%A2%E3%81%97%E3%81%9F%E3%81%84%E3%82%93%E3%81%A0%E3%81%91%E3%81%A9"><i class="fa fa-link"></i></a>アプリの公開を一時的に停止したいんだけど</h2>

<p>公開する国をゼロにすることで、非公開状態になります。</p>

<ol>
<li>iTunes Connectにログインして非公開にしたいアプリを選択します</li>
<li>「Rights and Pricing」をクリックします</li>
<li>「Select the App Store territories…」からすべての国のチェックボックスをオフにして「Save」ボタンをクリックします</li>
</ol>

<p>すると、アプリのステータスが「Developer Removed From Sale」に変わります。数時間でApp Storeからアプリが消えます。</p>

<p>公開を再開したい場合は、公開先の国にチェックを入れて保存します。ステータスが「Ready for Sale」に変わり、アプリがApp Storeに公開されます。</p>

<h2>
<span id="アプリを公開したあとに致命的なバグが見つかったんだけどどうしたらいい" class="fragment"></span><a href="#%E3%82%A2%E3%83%97%E3%83%AA%E3%82%92%E5%85%AC%E9%96%8B%E3%81%97%E3%81%9F%E3%81%82%E3%81%A8%E3%81%AB%E8%87%B4%E5%91%BD%E7%9A%84%E3%81%AA%E3%83%90%E3%82%B0%E3%81%8C%E8%A6%8B%E3%81%A4%E3%81%8B%E3%81%A3%E3%81%9F%E3%82%93%E3%81%A0%E3%81%91%E3%81%A9%E3%81%A9%E3%81%86%E3%81%97%E3%81%9F%E3%82%89%E3%81%84%E3%81%84"><i class="fa fa-link"></i></a>アプリを公開したあとに致命的なバグが見つかったんだけど、どうしたらいい？</h2>

<ol>
<li><strong>まずは落ち着きましょう</strong></li>
<li>iTunes Connectから「Developer Rejected（デベロッパ取り下げ）」を行い、App Storeでの公開を中止しましょう。</li>
<li>急いで修正版を申請しましょう</li>
</ol>

<p>何日も審査を待ってられないよ！！という場合は「Expedited reviews（通称：特急審査）」 を使う手段もあります。必ず受理されるわけではありませんが、受理されれば1〜2営業日で審査してくれます。（早急な審査が必要な理由を英語で書く必要があります）</p>

<p><a href="https://developer.apple.com/appstore/contact/appreviewteam/index.html" rel="nofollow noopener" target="_blank">Request an Expedited App Review</a></p>

<h2>
<span id="アプリのダウンロード数は見れるの" class="fragment"></span><a href="#%E3%82%A2%E3%83%97%E3%83%AA%E3%81%AE%E3%83%80%E3%82%A6%E3%83%B3%E3%83%AD%E3%83%BC%E3%83%89%E6%95%B0%E3%81%AF%E8%A6%8B%E3%82%8C%E3%82%8B%E3%81%AE"><i class="fa fa-link"></i></a>アプリのダウンロード数は見れるの？</h2>

<p>はい。iTunes Connectから、App Storeでのアプリケーションダウンロード数、売上データ（日次、週次、月次、年次、累計）を閲覧・ダウンロードできます。</p>

<h2>
<span id="アプリを他の人に譲渡できるの" class="fragment"></span><a href="#%E3%82%A2%E3%83%97%E3%83%AA%E3%82%92%E4%BB%96%E3%81%AE%E4%BA%BA%E3%81%AB%E8%AD%B2%E6%B8%A1%E3%81%A7%E3%81%8D%E3%82%8B%E3%81%AE"><i class="fa fa-link"></i></a>アプリを他の人に譲渡できるの？</h2>

<p>できるようになったみたいです。</p>

<blockquote>
<p>開発者どうしでアプリケーションを売買することが多くなり、譲渡手続きを自動化する仕組みが構築されました。この手続きにより、アプリケーションの所有権を、App Storeに置いたままで他の開発者に譲渡できます。それまでに寄せられた意見や要望、人気度の順位などもそのままです。譲渡するアプリケーションの数に制限はありませんが、個別に行う必要があります。</p>
</blockquote>

<p><a href="https://developer.apple.com/jp/devcenter/ios/library/documentation/iTunesConnect_Guide.pdf" rel="nofollow noopener" target="_blank">iTunes Connectデベロッパガイド</a>より引用。</p>

<p>アプリを譲渡するには色々と条件があるようなので、具体的な手順はデベロッパガイドを参照してください。</p>

<h1>
<span id="リンク" class="fragment"></span><a href="#%E3%83%AA%E3%83%B3%E3%82%AF"><i class="fa fa-link"></i></a>リンク</h1>

<ul>
<li><a href="https://itunesconnect.apple.com" rel="nofollow noopener" target="_blank">iTunes Connect</a></li>
<li><a href="https://developer.apple.com/jp/devcenter/ios/library/documentation/iTunesConnect_Guide.pdf" rel="nofollow noopener" target="_blank">iTunes Connectデベロッパガイド</a></li>
</ul>
</div>
	</td>
</tr>
</table>
<br />
<table border="1" style="height:150px;">
<tr>
	<td rowspan="3">26位</td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="thumb-up-120px.png" /></i>1213</kbd>
		<a target="_blank" href="https://qiita.com/vvakame/items/d657baf26cf83ac98bd0">技術的な文章を書くための1歩、2歩、3歩</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-10-12<br />22:31:45</center>
	</td>
	<td style="width:200px;">
		<!--投稿者-->
		<center>
			@<a href="user/13283.html">vvakame</a>(48件の記事)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/13283/profile-images/1473682747">
		</center>
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[原稿]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<!--
		<div style="width:350px;height:150px;overflow:scroll;">%s</div>
		-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>ちょっと書きたくなったので書くんじゃーい！<br>
この文章を読み終わった時、読者がそれなりわかめ品質な文章を出力できるようになり、どこかに寄稿した時に全面リテイクを食らったりしないようになることを目指します。</p>

<p>mhidaka が <a href="http://qiita.com/mhidaka/items/c5fe729716c640b50ff7" id="reference-8817a53c8cd66d78b320">0歩目</a>を書いてくれました！</p>

<h2>
<span id="背景" class="fragment"></span><a href="#%E8%83%8C%E6%99%AF"><i class="fa fa-link"></i></a>背景</h2>

<p>筆者は普通のエンジニアです。その辺の開発とかしてる会社に勤めています。技術系の原稿も書きます。<br>
原稿書きでご飯食べてるわけではありません(晩ご飯が豪華になることは稀にあります)。</p>

<p>今まで有能なレビューワー(muなんとかさんとか)編集さんとか(某社の安藤さんとか)とかとかに鍛えていただきました。<br>
この場を借りてお礼を述べておきたいと思います。ありがとうございます。</p>

<p>なお、この文章は2013年10月時点での筆者(わかめ)のやり方です。<br>
将来的にはより良いやり方を見つけるでしょうし、これとは全く違う書き方で上手にやっている人もいると思います。</p>

<p>これから偉そうな事述べるであろう<a href="http://b.hatena.ne.jp/vvakame/%E4%BF%BA%E3%81%AE%E8%A8%98%E4%BA%8B" rel="nofollow noopener" target="_blank">筆者の書いた記事</a>とか<a href="http://www.slideshare.net/vvakame/presentations" rel="nofollow noopener" target="_blank">スライド</a>とか。<br>
あ、僕の今までのQiitaの記事の<a href="http://qiita.com/vvakame">ストック数</a>見ます？(ﾄﾞﾔｯ</p>

<h1>
<span id="準備体操-なぜ文章を書くのか" class="fragment"></span><a href="#%E6%BA%96%E5%82%99%E4%BD%93%E6%93%8D-%E3%81%AA%E3%81%9C%E6%96%87%E7%AB%A0%E3%82%92%E6%9B%B8%E3%81%8F%E3%81%AE%E3%81%8B"><i class="fa fa-link"></i></a>準備体操 なぜ文章を書くのか</h1>

<p>いきなりですが、質問です。貴方は何故原稿を書こうとしているのでしょうか？考えてみましょう。</p>

<ul>
<li>自分の知識・経験に広める価値があると判断している

<ul>
<li>言い換えると、何かを布教したい</li>
</ul>
</li>
<li>最新の情報について勉強したい

<ul>
<li>言い換えると、ついでに原稿料貰いたい</li>
</ul>
</li>
</ul>

<p>だいたいこんな所だと思います。</p>

<h2>
<span id="知らない事も書いてみよう" class="fragment"></span><a href="#%E7%9F%A5%E3%82%89%E3%81%AA%E3%81%84%E4%BA%8B%E3%82%82%E6%9B%B8%E3%81%84%E3%81%A6%E3%81%BF%E3%82%88%E3%81%86"><i class="fa fa-link"></i></a>知らない事も書いてみよう</h2>

<p>多くの人が勘違いしがちなのですが、自分が知らない事について書くというのは、実は罪ではありません。貴方は許されています。知らない事について調べて書いてもよいのです。<br>
文章を書くということは、その内容について責任を持つということと不可分です。つまり、貴方は日本語を話す人としては、一時的にであれその分野について最も詳しく知っている人になる必要があります。</p>

<p>その分野について最も詳しく、というと死ぬほど難易度が高そうに思いますが、実のところそんなに難しいことではないのです。<br>
例えば、モンスターハンター4を極めし者 になるのは死ぬほど難しいと思います。ですが、モンスターハンター4の下位地底火山で最短ルートで大地の結晶を集めて帰還することを極めし者 くらいまで限定すると、不可能ではないように思われます。<br>
まずはそこを筆者自身の技術的到達点として狙って行きましょう。</p>

<p>もし万が一、責任を持ちたくない場合は、見るからにちゃらんぽらんで、信頼がおけないような文章に仕上がるように努力しましょう。</p>

<h1>
<span id="第1歩-設計" class="fragment"></span><a href="#%E7%AC%AC1%E6%AD%A9-%E8%A8%AD%E8%A8%88"><i class="fa fa-link"></i></a>第1歩 設計</h1>

<p>まず、最初にこれから作成する文章の設計を行います。<br>
設計するのは以下の要素についてです。</p>

<ul>
<li>対象読者を考える

<ul>
<li>言い換えると、原稿を読む前の読者のレベルを設定する</li>
</ul>
</li>
<li>読み終わった時に読者が得られるものを考える

<ul>
<li>言い換えると、原稿を読み終わった後の読者の到達点を設定する</li>
</ul>
</li>
<li>文章の構造について考える

<ul>
<li>章・節・項 を考えます。

<ul>
<li>Markdownでいうと、# と ## と ### を先に書く</li>
<li>文章の長さに応じて考える深さを変えます。この文章は深さ1で設計しました。</li>
</ul>
</li>
</ul>
</li>
<li>サンプルを作成する場合、どういうサンプルを作成するか検討する

<ul>
<li>実はこれがかなり難しいです</li>
<li>説明したい要素が十分に含まれている</li>
<li>説明しない要素かつ難しいものがなるべく含まれないようにする</li>
<li>短いソースコードにできる</li>
<li>説明する技術のメリット(とデメリット)が明確にわかる</li>
</ul>
</li>
</ul>

<p>筆者(わかめ)の場合、この工程に意識的に取り組む時間はおおよそ10分〜2時間くらい消費されます。<br>
かける時間は短いですが、ここを真面目にやらないと後から大炎上するのは皆様も知る通りです。</p>

<h2>
<span id="文章構造を考えるうえで" class="fragment"></span><a href="#%E6%96%87%E7%AB%A0%E6%A7%8B%E9%80%A0%E3%82%92%E8%80%83%E3%81%88%E3%82%8B%E3%81%86%E3%81%88%E3%81%A7"><i class="fa fa-link"></i></a>文章構造を考えるうえで</h2>

<p>文章構造について考える。について少し詳しく書いておきます。<br>
筆者が留意しているのは、読者は<a href="http://ja.wikipedia.org/wiki/%E6%9C%89%E9%99%90%E3%82%AA%E3%83%BC%E3%83%88%E3%83%9E%E3%83%88%E3%83%B3" rel="nofollow noopener" target="_blank">有限オートマトン(有限状態機械)</a>だということです。<br>
初期状態(対象読者を考える)と受理状態(読み終わった後に読者が得られるものを考える)は既に考えてあるはずです。<br>
ここでいう章・節・項を設計することは、読者の状態を初期状態から受理状態に変化させるための途中の状態を設計することに他なりません。<br>
読者を無理なく初期状態から受理状態に遷移させるために、情報を与える順序は前後してはいけませんし、途中に歯抜けが発生してもいけません。<br>
そこを正しく行うにはどういう状態で情報を渡していけばよいのかを考え、設計を行います。</p>

<p>筆者は、筆者内部での課題の設定(と読者への共有)、筆者の考えた解決方法の開陳(と読者への共有)、筆者の考えた解決方法の提示と結論 を示すと良いと考えています。</p>

<p>また、その他の重要な点として、サンプルコードを用意する場合について。<br>
ソースコードを解説する順番に説明の順番がかなり依存するので、サンプルを用意する場合は文章構造がサンプルコードの説明をしやすい順番にできるかも考慮に入れます。</p>

<h2>
<span id="それからそれから" class="fragment"></span><a href="#%E3%81%9D%E3%82%8C%E3%81%8B%E3%82%89%E3%81%9D%E3%82%8C%E3%81%8B%E3%82%89"><i class="fa fa-link"></i></a>それからそれから？</h2>

<p>さて、上記4要素を書ききるためには、まずは書く対象について概要を知らなければなりません。<br>
ドキュメントやサンプルコードがあれば、それに目を通して概要を掴んでおくと良いでしょう。</p>

<p>ここまで書き終わったら、完成までにどういう事を調べなければいけないか、どういう障害がありうるか、ある程度あたりがつくようになっているでしょう。<br>
この時点で、何か憂いがある場合は解決しておきます。他の人とのネタ被り・自社の機密に抵触するか・機材や経費は許容範囲内か、などなどが考えられます。<br>
懸念事項は全てクリアしておき、もし編集さんなどの第三者がいる場合はこの時点で一旦相談しておくと良いでしょう。<br>
この辺りの手を抜いてしまうと、後々例外やエラーの処理方法を最初に設計しておかなかったシステムの如く、後から仕組みを追加してテストを追加して工数は倍々ドン！みたいな身に覚えのある辛い展開になってしまいます。</p>

<h2>
<span id="ネタが被るのは悲しいことですね" class="fragment"></span><a href="#%E3%83%8D%E3%82%BF%E3%81%8C%E8%A2%AB%E3%82%8B%E3%81%AE%E3%81%AF%E6%82%B2%E3%81%97%E3%81%84%E3%81%93%E3%81%A8%E3%81%A7%E3%81%99%E3%81%AD"><i class="fa fa-link"></i></a>ネタが被るのは悲しいことですね</h2>

<p>ネタ被りについても少し言及しておきます。<br>
他の人が書いた原稿について、ネタが大なり小なり被ることはある程度仕方がない部分があります。<br>
パクリは論外ですが、ネタが被るのは仕方がないと割りきってしまいましょう。</p>

<p>もし、徹底的にネタ被りを避けようとするとどうなるでしょうか？<br>
英語の公式ドキュメントがあるのにそれを日本語に翻訳することは言語は違いますが内容的には完全にネタ被りなので、行わないほうがいいでしょう(実際は母国語で公式ドキュメントが読めることは多くの人にとって価値があります)。<br>
C言語についての本はたったの1冊(K&amp;Rですかね)あれば十分で、2冊目以降はネタ被りになるので不要になります(実際は2013年にもなって未だに新しいC言語の本が出版されています)。<br>
ですが、実際には括弧内に書いた通り、ネタ被りと判定しようと思えば出来る文章でもどんどん作成されていますし、広く受け入れられています。<br>
つまり、あなたが付け加えられるオリジナルな価値・説明があればそれで良いのです。</p>

<p>もし、ネタの被り先が知合いであれば、一言断ってみると、精神衛生上大変良くなるので、聞いてみると良いでしょう。</p>

<h1>
<span id="第2歩-調査" class="fragment"></span><a href="#%E7%AC%AC2%E6%AD%A9-%E8%AA%BF%E6%9F%BB"><i class="fa fa-link"></i></a>第2歩 調査</h1>

<p>設計が終わったら、技術的な調査に入ります。<br>
実際のシステム開発だと、技術的な調査を行ってから設計に入ると思います。ですが、原稿の場合は本格的な調査は設計の後になります。</p>

<p>調査フェーズで行わなければいけないのは以下のとおりです。</p>

<ul>
<li>サンプルコードの完成

<ul>
<li>サンプルコードの出来によって、原稿の設計を変える必要が生じるかもしれません。完成させていきましょう。</li>
</ul>
</li>
<li>技術的不明点の解消

<ul>
<li>サンプルコードを作るにつれ、不明点が発生してくるはずなので可能な限り調査する</li>
<li>Androidとかだとオープンソースなのでどこまでも追っていけるので楽ですね</li>
<li>調査終了の基準点として こうすれば何かが達成できる、筆者が知らない機能や仕様は多分ない、これはどうあがいても実現できない事がわかる あたりでしょう。</li>
</ul>
</li>
</ul>

<p>筆者(わかめ)の場合、この工程に意識的に取り組む時間はおおよそ2日〜3日(1日6〜8時間換算)くらい消費されます。</p>

<h1>
<span id="第3歩-実装" class="fragment"></span><a href="#%E7%AC%AC3%E6%AD%A9-%E5%AE%9F%E8%A3%85"><i class="fa fa-link"></i></a>第3歩 実装</h1>

<p>さて、実際に原稿をもりもり書いていきましょう。<br>
設計段階で枝(章・節・項)は定義しているはずなので、そこにもさもさと葉を生やしていくだけの簡単な作業です。<br>
既にサンプルコードも出来ており、判明している技術的に不明な点は消化されているはずです。<br>
そのため、ここからは日本語と戦う作業になります。</p>

<p>文章を書く時に筆者が意識的に行っている事がありますので述べていきます。</p>

<ul>
<li>日本語が一意に解釈できるか。誤解を生まないか。</li>
<li>対象読者に未知の用語を使って説明していないか

<ul>
<li>説明の順番を変更する必要があれば思い切って変更する。そうならないように設計時によく検討していくことも重要。</li>
</ul>
</li>
<li>筆者の中で常識だと思っている事が本当に常識かどうかを検討する。社内で常識になっているものは誤判断しやすいので留意する。

<ul>
<li>常識じゃないものを常識だと判断すると、説明をすっ飛ばすというミスに派生する</li>
</ul>
</li>
<li>要求・結論を先に述べているか。犯人はヤスは正義。オリエント急行殺人事件の犯人は☓☓☓。

<ul>
<li>これから説明する内容をざっくり最初に説明するのは大事</li>
<li>そこをサボると、読者の中に無数の解釈の枝(主旨の推測)が発生してしまい、書いてある内容がするりと入っていかなくなってしまいます。読者の計算量を減らすために積極的に枝刈りを行いましょう。</li>
</ul>
</li>
<li>言い換えを考えてみて、元の言い方と言い換えの方のどちらが意図が伝わりやすいかを検討し、必要があれば書き換える。</li>
<li>断定口調で書けているか。だと思う、とかであろう、とかは だ、である、に変更する。不安がある場合は追加の技術的調査を行う。</li>
<li>用語が統一され、正しく用いられているか。

<ul>
<li>例えば、1つの文章中に if文 と if式 という書き方が混ざっていてはいけません。それぞれ、指すものが違います。用語が正確に用いられているのかというのは、文章全体の信頼性に関わります。

<ul>
<li>例えば、完全に正しくて有用な技術的文章でも、Javaの事をJavaScriptと書いて説明していたら、信頼度は地に落ち、他の部分も間違っている可能性のある、取るに足らない文章と判断されるでしょう。</li>
</ul>
</li>
</ul>
</li>
<li>文章を分割できないか検討する。

<ul>
<li>長い1文よりも、短い2文です。句点で切っても正しく意味が伝わる場合は積極的に切ります。</li>
</ul>
</li>
<li>文の先頭に何かをつけるのを我慢する。

<ul>
<li>または、しかし、さらに、なので、 などは文の先頭に付けたくなってしまう魔力を持っています。そうしたほうが読みやすい文に見えてしまう気がするのです。それは気のせいなのでなるべく省けるように努力します。</li>
</ul>
</li>
<li>句読点は適切に打たれているか。

<ul>
<li>わかめさんめっちゃ読点多いマンです。</li>
</ul>
</li>
</ul>

<p>また、気がついたら随時リファクタリングを行います。<br>
節の位置の交換とかも随時行いますが、なるべく最初の設計から変更しないで済むように留意します。</p>

<p>筆者(わかめ)の場合、この工程に意識的に取り組む時間はおおよそ1日(1日6〜8時間換算)くらい消費されます。<br>
レビュワーに頼んだ後の指摘事項修正や校正などに費やす時間はここに含みません。</p>

<h1>
<span id="まとめ" class="fragment"></span><a href="#%E3%81%BE%E3%81%A8%E3%82%81"><i class="fa fa-link"></i></a>まとめ</h1>

<p>さて、いかがでしたでしょうか？<br>
みなさんもぶりばり技術文章を書いて、読んでくれた人をどんどん洗脳して自分のシンパにしましょう。<br>
さぁ！みんなもTypeScriptをやろう！(ｵｰ</p>

<p>僕も、こういう事を言語化して考え、なるべく体系的に把握するよう務めるようになったのも、ここ2年くらいの事です。<br>
この文章を書いて、あだむろっかとかに『<a href="http://www.amazon.co.jp/gp/product/4822284719?ie=UTF8&amp;camp=1207&amp;creative=8411&amp;creativeASIN=4822284719&amp;linkCode=shr&amp;tag=damenako-22&amp;qid=1381757964&amp;sr=8-7" rel="nofollow noopener" target="_blank">2.3本</a>書いてた奴があんな事言ってるｗｗｗｗm9(^Д^)ﾌﾟｷﾞｬｰ』と煽られました。<br>
2.3本はたぶん僕が多くの人に読ませるために書いた初めての技術的文章で、あだむろっかとかますいさんにﾎﾞｯｺﾎﾞｺにされた事を懐かしく思い出します。今はあの時よりはマトモになってると思うんですけどね。<br>
簡潔に言うと、最初はクソみたいな文章を出力してしまうものだし、使い古されている言葉ではありますが継続は力なり、ということです。まずは恐れず、クソを生産して周囲の識者にボコボコにしてもらえたら最初の洗礼を受けられた、と捉え一安心すると良いと思います。</p>

<p>なお、この文章を書くにあたり、<a href="http://qiita.com/vvakame/items/d657baf26cf83ac98bd0/revisions">編集履歴</a>に作業風景がなるべく残るようにしてみました。<br>
興味があればご覧ください。<br>
これだけの文章を書くのに約3時間かかっているようですね。短いのか長いのかもわかりませんが。</p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1" style="height:150px;">
<tr>
	<td rowspan="3">27位</td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="thumb-up-120px.png" /></i>1179</kbd>
		<a target="_blank" href="https://qiita.com/b4b4r07/items/9ea50f9ff94973c99ebe">シェルスクリプトを書くときに気をつける9箇条</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-09-24<br />20:46:14</center>
	</td>
	<td style="width:200px;">
		<!--投稿者-->
		<center>
			@<a href="user/29787.html">b4b4r07</a>(57件の記事)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/29787/profile-images/1473685392">
		</center>
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[ShellScript]</b> <b>[Bash]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<!--
		<div style="width:350px;height:150px;overflow:scroll;">%s</div>
		-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>最新の類似投稿として<a href="http://qiita.com/b4b4r07/items/62d56b7de2b9d6844bb5" id="reference-6d4043b2b760410ce98c">シェルスクリプトのコーディングルール2014</a>も併せてどうぞ。<br>
<strong>2014/10/09追記</strong></p>

<p>ぼくがシェルスクリプトを書くときに気にしていること、過去の失敗で書き留めたことを忘れないために。</p>

<h1>
<span id="1-グローバル変数は大文字" class="fragment"></span><a href="#1-%E3%82%B0%E3%83%AD%E3%83%BC%E3%83%90%E3%83%AB%E5%A4%89%E6%95%B0%E3%81%AF%E5%A4%A7%E6%96%87%E5%AD%97"><i class="fa fa-link"></i></a>1. グローバル変数は大文字</h1>

<p><code>PATH</code> や <code>HOME</code> など、環境変数が大文字なので、エクスポートする変数を大文字で書くという習慣は一般的であるような気がしますが、エクスポートする変数を抱えるシェルスクリプトを作成する機会が稀なので。</p>

<ul>
<li>グローバル変数は大文字</li>
<li>ローカル変数は小文字</li>
<li>エクスポートする変数も大文字</li>
</ul>

<p>関数内からグローバル変数にアクセスする場合がありますが、やはり区別していると、可読性が増すような気がするのでお勧めです。</p>

<h1>
<span id="2-awk-を知る" class="fragment"></span><a href="#2-awk-%E3%82%92%E7%9F%A5%E3%82%8B"><i class="fa fa-link"></i></a>2. awk を知る</h1>

<p>Unix 上にて文書処理をするときに、数多くのフィルタコマンド（grep、cut、tr、head、sort、uniq、sed、awk、wc、paste）を駆使して加工してゆくと思いますが、awk オンリーで解決できる場合が多かったりします。</p>

<p>例として家計簿を記した csv ファイルをあげます。</p>

<div class="code-frame" data-lang="bash">
<div class="code-lang"><span class="bold">sh</span></div>
<div class="highlight"><pre><span></span>b4b4r07:~$ cat test.csv 
日付,カテゴリ,金額,備考
<span class="m">09</span>/25,仕送り,+25000,
<span class="m">10</span>/01,食費,-1253,
<span class="m">10</span>/02,医療,-1200,皮膚科
<span class="m">10</span>/02,医療,-760,薬局の処方薬
<span class="m">10</span>/02,PC用品,-3180,外付けCDドライブ
<span class="m">10</span>/03,食費,-379,
<span class="m">10</span>/03,食費,-398,
<span class="m">10</span>/03,美容室,3150,
<span class="m">10</span>/04,食費,-580,
<span class="m">10</span>/05,食費,-667,
<span class="m">10</span>/06,食費,-420,
b4b4r07:~$ <span class="nb">declare</span> -i <span class="nv">sum</span><span class="o">=</span><span class="m">0</span><span class="p">;</span> <span class="k">for</span> i in <span class="k">$(</span>seq <span class="m">1</span> <span class="sb">`</span>grep <span class="s2">"食費"</span> test.csv <span class="p">|</span> wc -l<span class="sb">`</span><span class="k">)</span><span class="p">;</span> <span class="k">do</span> <span class="nv">sum</span><span class="o">+=</span><span class="sb">`</span>grep <span class="s2">"食費"</span> test.csv <span class="p">|</span> cut -d, -f3 <span class="p">|</span> head -<span class="nv">$i</span> <span class="p">|</span> tail -1<span class="sb">`</span><span class="p">;</span> <span class="k">done</span>
b4b4r07:~$ <span class="nb">echo</span> <span class="nv">$sum</span>
-3697
b4b4r07:~$ 
</pre></div>
</div>

<p>家計簿から食費だけを算出しようとしたとき、フィルタコマンドの組み合わせでやろうとすると、結構複雑に書かなければなりません。しかし awk を知ると</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>b4b4r07:~$ awk -F, '$2=="食費"{ sum += $3 }; END{ print sum }' test.csv 
-3697
</pre></div></div>

<p>と書けてしまいます。収支の算出も簡単です。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>b4b4r07:~$ awk -F, '$3 ~ /\+/{p += $3}; $3 ~ /^\-/{m += $3}; END{print "[income]",p, "[used]",m, "[rest]",p+m}' test.csv
[income] 25000 [used] -8837 [rest] 16163
</pre></div></div>

<p>スマートに書くことが出来ます。awk や sed はフィルタコマンドの域を超えた小さなプログラミング言語と称されることが多いです。そのくらいに多くのことができるので、知っておくまたは使いこなせるようになるとできることの幅がグッと広がります。</p>

<h1>
<span id="3-bash-に依存しているのに-binsh-と書かない" class="fragment"></span><a href="#3-bash-%E3%81%AB%E4%BE%9D%E5%AD%98%E3%81%97%E3%81%A6%E3%81%84%E3%82%8B%E3%81%AE%E3%81%AB-binsh-%E3%81%A8%E6%9B%B8%E3%81%8B%E3%81%AA%E3%81%84"><i class="fa fa-link"></i></a>3. bash に依存しているのに #!/bin/sh と書かない</h1>

<p>普段シェバンとしてシェルスクリプトの冒頭に書くアレですが、<code>#!/bin/sh</code> の実態は環境によってまちまちです。さまざまなシェルのシンボリックリンクになっていることが多いです（Ubuntu では ash 亜種の dash となっている模様）。なので、予期せぬエラーや動作しないといったことが起きる場合があります。bash やその他シェルに依存したスクリプトを書くのなら、それ上での動作を予定しているわけだから、シェバンには <code>#!/bin/bash</code> と書いたほうが良い。</p>

<h1>
<span id="4-改行コードに気をつける" class="fragment"></span><a href="#4-%E6%94%B9%E8%A1%8C%E3%82%B3%E3%83%BC%E3%83%89%E3%81%AB%E6%B0%97%E3%82%92%E3%81%A4%E3%81%91%E3%82%8B"><i class="fa fa-link"></i></a>4. 改行コードに気をつける</h1>

<p>改行コードについては<a href="http://ja.wikipedia.org/wiki/%E6%94%B9%E8%A1%8C%E3%82%B3%E3%83%BC%E3%83%89" rel="nofollow noopener" target="_blank">Wikipedia: 改行コード</a>を参照してください。歴史的背景やその実践について書かれています。<br>
簡単に書き表すと以下のようになります。Mac OS とはバージョン9までを指します。今はなかなかお目にかからないので、その心配は大丈夫かと思います。</p>

<table>
<thead>
<tr>
<th style="text-align: left"></th>
<th style="text-align: center">Windows</th>
<th style="text-align: center">Mac OS</th>
<th style="text-align: center">Unix (OS X含む)</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left">改行コード</td>
<td style="text-align: center">CR+LF</td>
<td style="text-align: center">CR（復帰）</td>
<td style="text-align: center">LF（改行）</td>
</tr>
</tbody>
</table>

<p>Windows で作成したスクリプトを Unix 環境で実行すると <code>command not found</code> や <code>No such file or directory</code> など予期せぬエラーが出る場合があります。これらの大抵の原因は改行コードによるものです。Windows 側で指定しなければデフォルトでは <code>CR+LF</code> で保存されます。狭義での"改行"とは Unix でも標準である <code>LF</code> のみです。<br>
ゆえに Windows での <code>#!/bin/bash&lt;CR&gt;&lt;LF&gt;</code> は <code>#!/bin/bash</code> ですが、Unix などでは <code>#!/bin/bash&lt;CR&gt;</code> となるのです。つまり、改行判断の際に余った <code>CR</code> をコマンドの一部として解釈しようとするため、エラーが出るのです。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ cat test.sh
#!/bin/bash
cat myfile

$ ./test.sh
cat: file\r: No such file or directory
</pre></div></div>

<p>一見、問題のないようなスクリプトですが実行してみると、エラーが吐かれてしまいます。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ cat -A test.sh
#!/bin/bash^M$
cat file^M$
</pre></div></div>

<p><code>cat -A</code> で確認してみると <code>CR</code> を表す <code>^M</code> が可視化されています。ちなみに"改行"は <code>$</code> です。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ tr -d '\r' test.sh
</pre></div></div>

<p>で、削除できるので、ようやく解決です。</p>

<p>ちなみに、BSD 版の <code>cat</code> には <code>-A</code> オプションはありません。GNU 版オンリーです。BSD 版では <code>cat -e</code> で同様のことが出来ます。 </p>

<blockquote>
<p>\r　＝　CR 復帰 キャリッジリターン ^M<br><br>
\n　＝　LF 改行 ラインフィード ^J</p>
</blockquote>

<h1>
<span id="5-サブシェルを意識する" class="fragment"></span><a href="#5-%E3%82%B5%E3%83%96%E3%82%B7%E3%82%A7%E3%83%AB%E3%82%92%E6%84%8F%E8%AD%98%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>5. サブシェルを意識する</h1>

<p>意識するという表現は、嵌ってしまいやすいが、逆に利用してやるとスマートな記述が可能になるという意味です。</p>

<h2>
<span id="嵌りやすい場合" class="fragment"></span><a href="#%E5%B5%8C%E3%82%8A%E3%82%84%E3%81%99%E3%81%84%E5%A0%B4%E5%90%88"><i class="fa fa-link"></i></a>嵌りやすい場合</h2>

<p><strong>(1) while ループで変数が変更されない</strong></p>

<p>ファイルからデータを読みこませる方法として <code>while</code> と <code>read</code> を組み合わせることはよくあります。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>while read LINE
do
    ……
    ……
done &lt; file
</pre></div></div>

<p>注意するのはこの <code>while</code> ループはサブシェルで動作しているということです。このとき、<code>while</code> の入力をファイルからリダイレクトしているためです。<br>
ループで利用した変数はループの外では無価値です。いくらループの中で何かに値を入れたりデータを編集しても、ループの外ではその結果を利用できません。<br><br>
これを解決するには、</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>exec &lt; file
while read LINE
do
    ……
    ……
done
</pre></div></div>

<p>として、<code>exec</code> コマンドにリダイレクトし、カレントシェルとしてやらなくてはいけません。</p>

<p><strong>(2) while ループで変数が変更されない・2</strong></p>

<p>上の例で紹介した <code>while</code> は少し前の時代の <code>while</code> です。今使用されている多くのシェルではこの仕様（バグ？）は修正されて「変数が変更されない」ということはなくなったようです。しかし、後述する汎用性を高めるという点で、(1) の方法が一番無難でしょう。</p>

<p><strong>(3) パイプ先はサブシェル</strong></p>

<p><code>find</code> したファイルを <code>files</code> という配列に代入したいとします。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>files=()
find . -type f | while read f; do
    files+=("$f")
done
echo "${files[@]}"
</pre></div></div>

<p>しかし、この結果で <code>echo</code> は何も出力しません。パイプの先はサブシェルで動作します。そもそもパイプとは標準出力をそのまま別のプロセスの標準入力に渡す仕込みのことです。「|」で多段に接続された各々のコマンドは別プロセスとして動きますので、そのいずれのプロセスも親である shell に変数を渡すことは出来ません。<br>
パイプの場合、前段の実行が完了しなくても後段の実行が始まります。<br>
　これは個々のプロセスが親である shell とは独立して動いていることを意味しますので、その <code>while</code> は sub shell と呼ばれる子プロセスによって実行されている訳です。<br>
　shell 変数は一つのプロセス内でしか共有出来ませんから、その内容を他のプロセスから見ることは不可能です。</p>

<p>これを解決するには以下のようにするのが良いでしょう。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>files=()
while read f; do
    files+=("$f")
done &lt; &lt;(find . -type f)
echo "${files[@]}"
</pre></div></div>

<p><code>diff</code> のときによくやるあれです。プロセス置換と呼ばれています。この機能を使用しないで期待通りの結果を導きたい場合は、いったん外部ファイル（tmpfile のような）に出力して、それを入力としてやるくらいしかありません。しかしそれだと、外部ファイルの後始末の処理を組み込まないといけないので、すこし面倒だし、美しくないでしょう。</p>

<h2>
<span id="利用してやる場合" class="fragment"></span><a href="#%E5%88%A9%E7%94%A8%E3%81%97%E3%81%A6%E3%82%84%E3%82%8B%E5%A0%B4%E5%90%88"><i class="fa fa-link"></i></a>利用してやる場合</h2>

<p>サブシェルでの変数の変更などは、カレントシェルに影響しません。これを巧みに使用すると <code>IFS</code> をサブシェルに閉じ込めることで、変更による影響をなくすことができます。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>(IFS=$'\n'; echo "${array[*]}")
</pre></div></div>

<p><code>cd</code> なども同じです。サブシェルでの移動は影響しないです。カレントディレクトリを一時的に変更して、すぐに戻りたい場合なんかに利用するといいでしょう。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>( cd ~/src &amp;&amp; tar cf - myproject ) | gzip -c &gt; myproject.tar.gz
</pre></div></div>

<p>ファイルの上書きでもスマートな記述が可能になります。通常、ファイルを上書きしようとすると、空ファイルになってしまいます。</p>

<div class="code-frame" data-lang="bash">
<div class="code-lang"><span class="bold">sh</span></div>
<div class="highlight"><pre><span></span>b4b4r07:~$ cat file 
apple
orange
grape
banana
strawberry
cherry
pear
pineapple
mandarin
tangerine
melon
b4b4r07:~$ grep -v <span class="s2">"e</span>$<span class="s2">"</span> file &gt;file <span class="c1">#フィルタリングして上書き</span>
b4b4r07:~$ cat file <span class="c1">#何も出力されない（空）</span>
b4b4r07:~$ 
</pre></div>
</div>

<p>コマンドオプションなどの標準で上書きできるのは、<code>sort</code> や <code>sed</code> くらいしかありません。自前で上書きするには、いっかい一時ファイルに書き出して、リネームしなければなりません。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ grep -v "e$" file &gt;file.tmp
$ mv -f file.tmp file
</pre></div></div>

<p>しかし、サブシェルを利用することで簡単に記述できます。</p>

<div class="code-frame" data-lang="bash">
<div class="code-lang"><span class="bold">sh</span></div>
<div class="highlight"><pre><span></span>b4b4r07:~$ <span class="o">(</span>rm file<span class="p">;</span> grep <span class="s2">"e</span>$<span class="s2">"</span> &gt;file<span class="o">)</span> &lt;file
b4b4r07:~$ cat file 
apple
orange
grape
pineapple
tangerine
b4b4r07:~$
</pre></div>
</div>

<p>しかし、<code>rm</code> を最初に行う関係上危険性が生じます。<code>rm</code> ゴミ箱スクリプトのエイリアスや関数を使用されることをおすすめします。</p>

<h1>
<span id="6-汎用性を高める" class="fragment"></span><a href="#6-%E6%B1%8E%E7%94%A8%E6%80%A7%E3%82%92%E9%AB%98%E3%82%81%E3%82%8B"><i class="fa fa-link"></i></a>6. 汎用性を高める</h1>

<p>シェルスクリプトは、Unix 系 OS のユーザにとって最も身近なプログラミング言語でもあり、その習得は必須の技能であると言えます。ほとんど改変を加えずに、様々なシステムでそのまま利用できるという汎用性の高さは非常に優れたものです。<br><br>
シェルスクリプトの使用は以下の様な利益をもたらします。</p>

<ul>
<li>システムの標準の機能</li>
</ul>

<p>組み込み機器の問題などの様々な制約で、<code>perl</code> や <code>ruby</code> が利用できない場合においても Bourne Shell は使用可能なので頼もしいです。</p>

<ul>
<li>互換性が非常に高い</li>
</ul>

<p>OS の種類やバージョンに依らず利用できるということは、システム間の互換性が非常に高いということです。シェルごとの若干の方言や、インストールされている外部コマンドの違いにさえ注意すれば、同じスクリプトを使いまわすことができます。移植の際の再コンパイル作業等も必要ありません。</p>

<p>などなど、数多くのメリットが有ります。しかし、Unix 系に関して些細な方言が存在するのを頭の隅にでもいれておかなければならない状況が来ると思います。「汎用性を高める」とは要するに、どのシステムにも含まれており、処理が異ならないコマンドだけを使っていれば、一番汎用性が高いことになります。つまり <code>/bin/sh</code> でシェルスクリプトを書くということです。しかしながら、そういうコマンドばかり使っているわけにもいかない（たとえば、<code>echo</code> コマンド。System V 系と BSD 系では動作が異なる）ので、その対処法についてなのですが、これに関しては記述量が多いため、別記事にしたいと思います。</p>

<h1>
<span id="7-例外に関する対応" class="fragment"></span><a href="#7-%E4%BE%8B%E5%A4%96%E3%81%AB%E9%96%A2%E3%81%99%E3%82%8B%E5%AF%BE%E5%BF%9C"><i class="fa fa-link"></i></a>7. 例外に関する対応</h1>

<p><code>$?</code> によって条件分岐したり、<code>&amp;&amp;</code> や <code>||</code> を利用しましょう。また、直前のコマンドにパイプが含まれる場合は、一番最後のコマンドの終了結果しか見てくれないので、<code>$?</code> を使う際は最初のコマンドのみをまず捕捉するか、bash などの限定表現にはなりますが、<code>${PIPESTATUS[@]}</code>を使いましょう。</p>

<h1>
<span id="8--を書き示す" class="fragment"></span><a href="#8--%E3%82%92%E6%9B%B8%E3%81%8D%E7%A4%BA%E3%81%99"><i class="fa fa-link"></i></a>8. <em>@(#)</em> を書き示す</h1>

<p>シェルスクリプトの冒頭に、</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span># @(#) This script is ~.
</pre></div></div>

<p>といった記述がありますが、これは <code>what</code> コマンドで使用するためです。<br><br>
<code>what</code> コマンドとはプログラムやそれを構成するモジュールのバージョンを調べるときに使用します。シェルスクリプトの場合もこれを書くことで対応させることができます。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ what mycmd
mycmd
        This script is ~.
</pre></div></div>

<h1>
<span id="9-環境変数-path-を管理する" class="fragment"></span><a href="#9-%E7%92%B0%E5%A2%83%E5%A4%89%E6%95%B0-path-%E3%82%92%E7%AE%A1%E7%90%86%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>9. 環境変数 PATH を管理する</h1>

<p><code>PATH</code> 変数に .（ドット）を含ませることの危険性についてです。セキュリティ意識を高めるためにも重要な項目です。</p>

<p>シェルスクリプトやプログラムを新規に作ったとき、当然ためしに実行させてみるものです。<code>abc</code> というコマンドを作ったとして、それをそのディレクトリで <code>abc</code> とタイプしても <code>not found</code> と言われてしまうことがあります。それは <code>PATH</code> 変数に .（ドット）が含まれていないからです。ドットはカレントディレクトリを指すので、<code>PATH</code> にこれがセットされていない場合は、現在のディレクトリにある <code>abc</code> というコマンドを探してはくれません。よってテスト実行するときには、<code>./abc</code> というように「このディレクトリの」の部分を明示しなくてはなりません。<br><br>
これを避けるために、<code>PATH</code> にドットを含めている人も少なからずいます。確かにこれがあるとないとでは使い勝手がずいぶん違うため、ある方がよっぽど快適に作業を行えます。<br><br>
しかし、ドットを <code>PATH</code> に入れておくことは非常に危険なことであるということも認識しておいてください。<code>ls</code> というコマンドは非常に頻繁に利用されるかと思います。誰か悪意を持った人が、誰かのディレクトリの下に <code>ls</code> というシェルスクリプトを置いたとします。そのシェルスクリプトの内容が「<code>rm -rf *</code>」というものであったらどうなるでしょうか。その人は気づかないままリストを表示しようとして <code>ls</code> とタイプし、全部ファイルを消してしまうことにもなりかねません。<br><br>
<code>PATH</code> の先頭にドットを置くからこのようなことが起こり得るのであって、<code>PATH</code> の一番最後に置けば問題ないと考えられるかもしれませんが、結局は同じです。<code>ls</code> については、これで問題回避できるかもしれませんが、<code>l</code> というファイルを作って、あなたがタイプミスするのを待っているのかもしれないのです。<br><br>
自分のデータは自分で守る、ということをきちんとやらなくてはならない場合、「<code>PATH</code> 変数にドットを入れない」ことをまず最初に考慮します。</p>

<p>また、シェルスクリプトの中で <code>PATH</code> に相対パスを追加してはいけません。ディレクトリが変わったら相対パスも変わってくるので、<code>PATH</code> の中に不要なディレクトリのリストが含まれてしまうだけです。</p>

<h2>
<span id="まとめ" class="fragment"></span><a href="#%E3%81%BE%E3%81%A8%E3%82%81"><i class="fa fa-link"></i></a>まとめ</h2>

<ul>
<li>可読性（保守性）</li>
<li>汎用性（移植性）</li>
</ul>

<p>この2点を意識するというのに尽きるかもしれません。可読性が増せば、コード自体が美しくなるし、保守もしやすくなります（シェルスクリプト自体の可読性が良くないというツッコミはなしで）。汎用性が高いコードを書けば、もちろん移植のしやすさに直結するでしょう。Unix の精神にも徹することができるわけです。9項目にはランク・インしていませんが、「``」の使用なんかも可読性の問題です。ダブルクオートや括弧が入り混じる中にバッククォートなんか使っていては目が大変です。「$()」を使用すると、スッキリ見やすいでしょう（でもこの書き方は一部では利用できないようなので、汎用性という点で少し劣りますね）。</p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1" style="height:150px;">
<tr>
	<td rowspan="3">28位</td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="thumb-up-120px.png" /></i>1177</kbd>
		<a target="_blank" href="https://qiita.com/tekkoc/items/98adcadfa4bdc8b5a6ca">Vimの便利な画面分割＆タブページと、それを更に便利にする方法</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2014-03-09<br />09:48:15</center>
	</td>
	<td style="width:200px;">
		<!--投稿者-->
		<center>
			@<a href="user/11916.html">tekkoc</a>(29件の記事)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/11916/profile-images/1473682212">
		</center>
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Vim]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<!--
		<div style="width:350px;height:150px;overflow:scroll;">%s</div>
		-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>この記事は<a href="http://atnd.org/events/45072" rel="nofollow noopener" target="_blank">Vim Advent Calendar 2013 : ATND</a>の99日目の記事です。</p>

<h1>
<span id="画面分割タブページのススメ" class="fragment"></span><a href="#%E7%94%BB%E9%9D%A2%E5%88%86%E5%89%B2%E3%82%BF%E3%83%96%E3%83%9A%E3%83%BC%E3%82%B8%E3%81%AE%E3%82%B9%E3%82%B9%E3%83%A1"><i class="fa fa-link"></i></a>画面分割・タブページのススメ</h1>

<p>みなさん、分割してますか？<br>
みなさん、タブページ使ってますか？</p>

<p>僕はどちらも大好きです。</p>

<ul>
<li>サンプルを見ながら写経する</li>
<li>TODOやメモを見ながら編集</li>
<li>関数の定義元などを見ながら編集</li>
<li>編集目的に合わせてタブを分ける</li>
</ul>

<p>などなど。 ものぐさな僕は、コードを書くときはガシガシ分割したりしながらコードを書いています。</p>

<p>これらの機能は当然設定やプラグインの導入などをしなくても使えますが自分はsキーをprefixとしたキーマッピングをしています。<br>
元は<code>&lt;C-w&gt;</code>の代わりに<code>s</code>を使っていただけですが、タブウィンドウ関連やバッファ関連にも使うようにしたことで、格段に便利になりました。自分の設定例を合わせて掲載するので、良ければ参考にしてください。</p>

<h1>
<span id="各種機能とマッピング" class="fragment"></span><a href="#%E5%90%84%E7%A8%AE%E6%A9%9F%E8%83%BD%E3%81%A8%E3%83%9E%E3%83%83%E3%83%94%E3%83%B3%E3%82%B0"><i class="fa fa-link"></i></a>各種機能とマッピング</h1>

<h2>
<span id="ウィンドウを分割する" class="fragment"></span><a href="#%E3%82%A6%E3%82%A3%E3%83%B3%E3%83%89%E3%82%A6%E3%82%92%E5%88%86%E5%89%B2%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>ウィンドウを分割する</h2>

<p><a href="https://camo.qiitausercontent.com/b484cd9d1dd4485ab14abcddffc775494c728137/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f31313931362f38353136306434352d303862352d323064642d356331622d6661636261366366626434302e676966" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/b484cd9d1dd4485ab14abcddffc775494c728137/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f31313931362f38353136306434352d303862352d323064642d356331622d6661636261366366626434302e676966" alt="sn.gif" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/11916/85160d45-08b5-20dd-5c1b-facba6cfbd40.gif"></a></p>

<table>
<thead>
<tr>
<th style="text-align: left">項目名</th>
<th style="text-align: left">デフォルト</th>
<th style="text-align: left">オリジナル設定</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left">水平分割</td>
<td style="text-align: left"><code>:split</code></td>
<td style="text-align: left"><code>ss</code></td>
</tr>
<tr>
<td style="text-align: left">垂直分割</td>
<td style="text-align: left"><code>:vsplit</code></td>
<td style="text-align: left"><code>sv</code></td>
</tr>
</tbody>
</table>

<h2>
<span id="分割したウィンドウ間を移動する" class="fragment"></span><a href="#%E5%88%86%E5%89%B2%E3%81%97%E3%81%9F%E3%82%A6%E3%82%A3%E3%83%B3%E3%83%89%E3%82%A6%E9%96%93%E3%82%92%E7%A7%BB%E5%8B%95%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>分割したウィンドウ間を移動する</h2>

<p><a href="https://camo.qiitausercontent.com/3a80684deff78b958d06d87e9fa491207cc1b28f/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f31313931362f34373535376636332d306266392d656630622d663762352d3663623064396531343435632e676966" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/3a80684deff78b958d06d87e9fa491207cc1b28f/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f31313931362f34373535376636332d306266392d656630622d663762352d3663623064396531343435632e676966" alt="sj.gif" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/11916/47557f63-0bf9-ef0b-f7b5-6cb0d9e1445c.gif"></a></p>

<table>
<thead>
<tr>
<th style="text-align: left">項目名</th>
<th style="text-align: left">デフォルト</th>
<th style="text-align: left">オリジナル設定</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left">左に移動</td>
<td style="text-align: left"><code>&lt;C-w&gt;h</code></td>
<td style="text-align: left"><code>sh</code></td>
</tr>
<tr>
<td style="text-align: left">下に移動</td>
<td style="text-align: left"><code>&lt;C-w&gt;j</code></td>
<td style="text-align: left"><code>sj</code></td>
</tr>
<tr>
<td style="text-align: left">上に移動</td>
<td style="text-align: left"><code>&lt;C-w&gt;k</code></td>
<td style="text-align: left"><code>sk</code></td>
</tr>
<tr>
<td style="text-align: left">右に移動</td>
<td style="text-align: left"><code>&lt;C-w&gt;l</code></td>
<td style="text-align: left"><code>sl</code></td>
</tr>
<tr>
<td style="text-align: left">次に移動</td>
<td style="text-align: left"><code>&lt;C-w&gt;w</code></td>
<td style="text-align: left"><code>sw</code></td>
</tr>
</tbody>
</table>

<h2>
<span id="分割したウィンドウそのものを移動する" class="fragment"></span><a href="#%E5%88%86%E5%89%B2%E3%81%97%E3%81%9F%E3%82%A6%E3%82%A3%E3%83%B3%E3%83%89%E3%82%A6%E3%81%9D%E3%81%AE%E3%82%82%E3%81%AE%E3%82%92%E7%A7%BB%E5%8B%95%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>分割したウィンドウそのものを移動する</h2>

<p><a href="https://camo.qiitausercontent.com/8db3981ce725fc33ae8ea8799bee1d0b32f61060/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f31313931362f66393539396532382d383935382d653737612d666565392d6632316231633532356339382e676966" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/8db3981ce725fc33ae8ea8799bee1d0b32f61060/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f31313931362f66393539396532382d383935382d653737612d666565392d6632316231633532356339382e676966" alt="sK.gif" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/11916/f9599e28-8958-e77a-fee9-f21b1c525c98.gif"></a></p>

<table>
<thead>
<tr>
<th style="text-align: left">項目名</th>
<th style="text-align: left">デフォルト</th>
<th style="text-align: left">オリジナル設定</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left">左に移動</td>
<td style="text-align: left"><code>&lt;C-w&gt;H</code></td>
<td style="text-align: left"><code>sH</code></td>
</tr>
<tr>
<td style="text-align: left">下に移動</td>
<td style="text-align: left"><code>&lt;C-w&gt;J</code></td>
<td style="text-align: left"><code>sJ</code></td>
</tr>
<tr>
<td style="text-align: left">上に移動</td>
<td style="text-align: left"><code>&lt;C-w&gt;K</code></td>
<td style="text-align: left"><code>sK</code></td>
</tr>
<tr>
<td style="text-align: left">右に移動</td>
<td style="text-align: left"><code>&lt;C-w&gt;L</code></td>
<td style="text-align: left"><code>sL</code></td>
</tr>
<tr>
<td style="text-align: left">回転</td>
<td style="text-align: left"><code>&lt;C-w&gt;r</code></td>
<td style="text-align: left"><code>sr</code></td>
</tr>
</tbody>
</table>

<h2>
<span id="カレントウィンドウの大きさを変える" class="fragment"></span><a href="#%E3%82%AB%E3%83%AC%E3%83%B3%E3%83%88%E3%82%A6%E3%82%A3%E3%83%B3%E3%83%89%E3%82%A6%E3%81%AE%E5%A4%A7%E3%81%8D%E3%81%95%E3%82%92%E5%A4%89%E3%81%88%E3%82%8B"><i class="fa fa-link"></i></a>カレントウィンドウの大きさを変える</h2>

<p><a href="https://camo.qiitausercontent.com/1ba3bbf6d1035e901f73fadb0130d8cc281939de/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f31313931362f65386137336163662d626565312d366437342d386339612d6431663062616266396430372e676966" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/1ba3bbf6d1035e901f73fadb0130d8cc281939de/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f31313931362f65386137336163662d626565312d366437342d386339612d6431663062616266396430372e676966" alt="so.gif" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/11916/e8a73acf-bee1-6d74-8c9a-d1f0babf9d07.gif"></a></p>

<table>
<thead>
<tr>
<th style="text-align: left">項目名</th>
<th style="text-align: left">デフォルト</th>
<th style="text-align: left">オリジナル設定</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left">縦に最大化</td>
<td style="text-align: left"><code>&lt;C-w&gt;_</code></td>
<td style="text-align: left"><code>なし</code></td>
</tr>
<tr>
<td style="text-align: left">横に最大化</td>
<td style="text-align: left"><code>&lt;C-w&gt;パイプ</code></td>
<td style="text-align: left"><code>なし</code></td>
</tr>
<tr>
<td style="text-align: left">縦横最大化</td>
<td style="text-align: left"><code>なし</code></td>
<td style="text-align: left"><code>so</code></td>
</tr>
<tr>
<td style="text-align: left">大きさを揃える</td>
<td style="text-align: left"><code>&lt;C-w&gt;=</code></td>
<td style="text-align: left">
<code>sO</code> もしくは <code>s=</code>
</td>
</tr>
<tr>
<td style="text-align: left">幅を増やす</td>
<td style="text-align: left"><code>&lt;C-w&gt;&gt;</code></td>
<td style="text-align: left"><code>s&gt;</code></td>
</tr>
<tr>
<td style="text-align: left">幅を減らす</td>
<td style="text-align: left"><code>&lt;C-w&gt;&lt;</code></td>
<td style="text-align: left"><code>s&lt;</code></td>
</tr>
<tr>
<td style="text-align: left">高さを増やす</td>
<td style="text-align: left"><code>&lt;C-w&gt;+</code></td>
<td style="text-align: left"><code>s+</code></td>
</tr>
<tr>
<td style="text-align: left">高さを減らす</td>
<td style="text-align: left"><code>&lt;C-w&gt;-</code></td>
<td style="text-align: left"><code>s-</code></td>
</tr>
</tbody>
</table>

<p>テーブル内で<code>|</code>を表示すると崩れるみたいなので、パイプと表記してます。</p>

<p>また<code>s&gt;</code>系のマッピングは、実際には「<a href="https://github.com/kana/vim-submode" rel="nofollow noopener" target="_blank">vim-submode</a>」というプラグインを使って<code>s&gt;&gt;&gt;</code>などでサイズ変更出来るようにしてます。詳しくは最後のVimrcを参照してください。</p>

<h2>
<span id="タブページ関連" class="fragment"></span><a href="#%E3%82%BF%E3%83%96%E3%83%9A%E3%83%BC%E3%82%B8%E9%96%A2%E9%80%A3"><i class="fa fa-link"></i></a>タブページ関連</h2>

<p><a href="https://camo.qiitausercontent.com/db36b97a63270f86d1a6e3399ac2e242f1a51870/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f31313931362f33623364353863312d363638362d356464322d313131632d3835353032343865326564642e676966" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/db36b97a63270f86d1a6e3399ac2e242f1a51870/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f31313931362f33623364353863312d363638362d356464322d313131632d3835353032343865326564642e676966" alt="tab.gif" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/11916/3b3d58c1-6686-5dd2-111c-8550248e2edd.gif"></a></p>

<table>
<thead>
<tr>
<th style="text-align: left">項目名</th>
<th style="text-align: left">デフォルト</th>
<th style="text-align: left">オリジナル設定</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left">新規タブ</td>
<td style="text-align: left"><code>:tabnew</code></td>
<td style="text-align: left"><code>st</code></td>
</tr>
<tr>
<td style="text-align: left">次のタブに切替</td>
<td style="text-align: left"><code>gt</code></td>
<td style="text-align: left"><code>sn</code></td>
</tr>
<tr>
<td style="text-align: left">前のタブに切替</td>
<td style="text-align: left"><code>gT</code></td>
<td style="text-align: left"><code>sp</code></td>
</tr>
</tbody>
</table>

<h2>
<span id="閉じる" class="fragment"></span><a href="#%E9%96%89%E3%81%98%E3%82%8B"><i class="fa fa-link"></i></a>閉じる</h2>

<table>
<thead>
<tr>
<th style="text-align: left">項目名</th>
<th style="text-align: left">デフォルト</th>
<th style="text-align: left">オリジナル設定</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left">ウィンドウを閉じる</td>
<td style="text-align: left"><code>:q</code></td>
<td style="text-align: left"><code>sq</code></td>
</tr>
<tr>
<td style="text-align: left">バッファを閉じる</td>
<td style="text-align: left"><code>:bd</code></td>
<td style="text-align: left"><code>sQ</code></td>
</tr>
</tbody>
</table>

<h2>
<span id="unitevim" class="fragment"></span><a href="#unitevim"><i class="fa fa-link"></i></a>Unite.vim</h2>

<p><a href="https://camo.qiitausercontent.com/34ab8da6f577ef09c665b2f8fb4edafd531bb983/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f31313931362f63663465333761342d343166312d613966372d376165662d6231663838646165373634622e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/34ab8da6f577ef09c665b2f8fb4edafd531bb983/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f31313931362f63663465333761342d343166312d613966372d376165662d6231663838646165373634622e706e67" alt="unite.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/11916/cf4e37a4-41f1-a9f7-7aef-b1f88dae764b.png"></a></p>

<table>
<thead>
<tr>
<th style="text-align: left">項目名</th>
<th style="text-align: left">デフォルト</th>
<th style="text-align: left">オリジナル設定</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left">タブ一覧</td>
<td style="text-align: left"><code>:Unite tab</code></td>
<td style="text-align: left"><code>sT</code></td>
</tr>
<tr>
<td style="text-align: left">現在のタブで開いたバッファ一覧</td>
<td style="text-align: left"><code>:Unite buffer_tab</code></td>
<td style="text-align: left"><code>sb</code></td>
</tr>
<tr>
<td style="text-align: left">バッファ一覧</td>
<td style="text-align: left"><code>:Unite buffer</code></td>
<td style="text-align: left"><code>sB</code></td>
</tr>
</tbody>
</table>

<p>当然ですが「<a href="https://github.com/Shougo/unite.vim" rel="nofollow noopener" target="_blank">unite.vim</a>」が必要です。</p>

<h1>
<span id="最後に" class="fragment"></span><a href="#%E6%9C%80%E5%BE%8C%E3%81%AB"><i class="fa fa-link"></i></a>最後に</h1>

<h2>
<span id="ウィンドウとバッファとタブページについて" class="fragment"></span><a href="#%E3%82%A6%E3%82%A3%E3%83%B3%E3%83%89%E3%82%A6%E3%81%A8%E3%83%90%E3%83%83%E3%83%95%E3%82%A1%E3%81%A8%E3%82%BF%E3%83%96%E3%83%9A%E3%83%BC%E3%82%B8%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6"><i class="fa fa-link"></i></a>ウィンドウとバッファとタブページについて</h2>

<p>バッファはファイル等の内容そのもの。<br>
ウィンドウはバッファを表示するもので、別ウィンドウで同じファイルを開いて編集したり出来る。<br>
タブページはウィンドウを束ねるもの。</p>

<p>詳しくは「<a href="http://cohama.hateblo.jp/entry/2013/09/28/220808" rel="nofollow noopener" target="_blank">Vim のバッファとウィンドウを理解する - 反省はしても後悔はしない</a>」で解説されています。<br>
この記事も去年のVACの記事ですね。歴史長い！</p>

<h2>
<span id="sキーの元々の機能について" class="fragment"></span><a href="#s%E3%82%AD%E3%83%BC%E3%81%AE%E5%85%83%E3%80%85%E3%81%AE%E6%A9%9F%E8%83%BD%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6"><i class="fa fa-link"></i></a>sキーの元々の機能について</h2>

<p>今回潰した<code>s</code>キーには元々割り当たっている機能がありますが、ヘルプに書かれている通り、他で代用が効くので気にせず潰しています。<br>
まったく別のマッピングをする場合でも<code>s</code>キーはかなり押しやすい位置にあるので、マッピング先に便利でおすすめです。</p>

<blockquote>
<p>["x]s         [count] 文字を [レジスタ x に入れ] 削除し、挿入を始め<br>
      る (s は Substitute --置換 を意味する)。"cl" と同義で<br>
      ある (行単位でない|linewise|)。</p>
</blockquote>

<h2>
<span id="vimrc" class="fragment"></span><a href="#vimrc"><i class="fa fa-link"></i></a>vimrc</h2>

<p>最後に、当該箇所の自分のvimrcを貼っておきます。</p>

<div class="code-frame" data-lang="vim"><div class="highlight"><pre><span></span><span class="nb">nnoremap</span> s <span class="p">&lt;</span>Nop<span class="p">&gt;</span>
<span class="nb">nnoremap</span> <span class="nb">sj</span> <span class="p">&lt;</span>C<span class="p">-</span><span class="k">w</span><span class="p">&gt;</span><span class="k">j</span>
<span class="nb">nnoremap</span> sk <span class="p">&lt;</span>C<span class="p">-</span><span class="k">w</span><span class="p">&gt;</span><span class="k">k</span>
<span class="nb">nnoremap</span> <span class="k">sl</span> <span class="p">&lt;</span>C<span class="p">-</span><span class="k">w</span><span class="p">&gt;</span><span class="k">l</span>
<span class="nb">nnoremap</span> <span class="k">sh</span> <span class="p">&lt;</span>C<span class="p">-</span><span class="k">w</span><span class="p">&gt;</span><span class="k">h</span>
<span class="nb">nnoremap</span> sJ <span class="p">&lt;</span>C<span class="p">-</span><span class="k">w</span><span class="p">&gt;</span>J
<span class="nb">nnoremap</span> sK <span class="p">&lt;</span>C<span class="p">-</span><span class="k">w</span><span class="p">&gt;</span>K
<span class="nb">nnoremap</span> sL <span class="p">&lt;</span>C<span class="p">-</span><span class="k">w</span><span class="p">&gt;</span>L
<span class="nb">nnoremap</span> sH <span class="p">&lt;</span>C<span class="p">-</span><span class="k">w</span><span class="p">&gt;</span>H
<span class="nb">nnoremap</span> <span class="k">sn</span> gt
<span class="nb">nnoremap</span> <span class="k">sp</span> gT
<span class="nb">nnoremap</span> <span class="nb">sr</span> <span class="p">&lt;</span>C<span class="p">-</span><span class="k">w</span><span class="p">&gt;</span><span class="k">r</span>
<span class="nb">nnoremap</span> s<span class="p">=</span> <span class="p">&lt;</span>C<span class="p">-</span><span class="k">w</span><span class="p">&gt;=</span>
<span class="nb">nnoremap</span> <span class="k">sw</span> <span class="p">&lt;</span>C<span class="p">-</span><span class="k">w</span><span class="p">&gt;</span><span class="k">w</span>
<span class="nb">nnoremap</span> <span class="k">so</span> <span class="p">&lt;</span>C<span class="p">-</span><span class="k">w</span><span class="p">&gt;</span>_<span class="p">&lt;</span>C<span class="p">-</span><span class="k">w</span><span class="p">&gt;|</span>
<span class="nb">nnoremap</span> sO <span class="p">&lt;</span>C<span class="p">-</span><span class="k">w</span><span class="p">&gt;=</span>
<span class="nb">nnoremap</span> <span class="k">sN</span> :<span class="p">&lt;</span>C<span class="p">-</span><span class="k">u</span><span class="p">&gt;</span><span class="k">bn</span><span class="p">&lt;</span>CR<span class="p">&gt;</span>
<span class="nb">nnoremap</span> sP :<span class="p">&lt;</span>C<span class="p">-</span><span class="k">u</span><span class="p">&gt;</span><span class="k">bp</span><span class="p">&lt;</span>CR<span class="p">&gt;</span>
<span class="nb">nnoremap</span> <span class="k">st</span> :<span class="p">&lt;</span>C<span class="p">-</span><span class="k">u</span><span class="p">&gt;</span><span class="k">tabnew</span><span class="p">&lt;</span>CR<span class="p">&gt;</span>
<span class="nb">nnoremap</span> sT :<span class="p">&lt;</span>C<span class="p">-</span><span class="k">u</span><span class="p">&gt;</span>Unite <span class="k">tab</span><span class="p">&lt;</span>CR<span class="p">&gt;</span>
<span class="nb">nnoremap</span> <span class="nb">ss</span> :<span class="p">&lt;</span>C<span class="p">-</span><span class="k">u</span><span class="p">&gt;</span><span class="k">sp</span><span class="p">&lt;</span>CR<span class="p">&gt;</span>
<span class="nb">nnoremap</span> <span class="k">sv</span> :<span class="p">&lt;</span>C<span class="p">-</span><span class="k">u</span><span class="p">&gt;</span><span class="k">vs</span><span class="p">&lt;</span>CR<span class="p">&gt;</span>
<span class="nb">nnoremap</span> sq :<span class="p">&lt;</span>C<span class="p">-</span><span class="k">u</span><span class="p">&gt;</span><span class="k">q</span><span class="p">&lt;</span>CR<span class="p">&gt;</span>
<span class="nb">nnoremap</span> sQ :<span class="p">&lt;</span>C<span class="p">-</span><span class="k">u</span><span class="p">&gt;</span><span class="k">bd</span><span class="p">&lt;</span>CR<span class="p">&gt;</span>
<span class="nb">nnoremap</span> <span class="k">sb</span> :<span class="p">&lt;</span>C<span class="p">-</span><span class="k">u</span><span class="p">&gt;</span>Unite buffer_tab <span class="p">-</span>buffer<span class="p">-</span>name<span class="p">=</span><span class="k">file</span><span class="p">&lt;</span>CR<span class="p">&gt;</span>
<span class="nb">nnoremap</span> sB :<span class="p">&lt;</span>C<span class="p">-</span><span class="k">u</span><span class="p">&gt;</span>Unite buffer <span class="p">-</span>buffer<span class="p">-</span>name<span class="p">=</span><span class="k">file</span><span class="p">&lt;</span>CR<span class="p">&gt;</span>

<span class="k">call</span> submode#enter_with<span class="p">(</span><span class="s1">'bufmove'</span><span class="p">,</span> <span class="s1">'n'</span><span class="p">,</span> <span class="s1">''</span><span class="p">,</span> <span class="s1">'s&gt;'</span><span class="p">,</span> <span class="s1">'&lt;C-w&gt;&gt;'</span><span class="p">)</span>
<span class="k">call</span> submode#enter_with<span class="p">(</span><span class="s1">'bufmove'</span><span class="p">,</span> <span class="s1">'n'</span><span class="p">,</span> <span class="s1">''</span><span class="p">,</span> <span class="s1">'s&lt;'</span><span class="p">,</span> <span class="s1">'&lt;C-w&gt;&lt;'</span><span class="p">)</span>
<span class="k">call</span> submode#enter_with<span class="p">(</span><span class="s1">'bufmove'</span><span class="p">,</span> <span class="s1">'n'</span><span class="p">,</span> <span class="s1">''</span><span class="p">,</span> <span class="s1">'s+'</span><span class="p">,</span> <span class="s1">'&lt;C-w&gt;+'</span><span class="p">)</span>
<span class="k">call</span> submode#enter_with<span class="p">(</span><span class="s1">'bufmove'</span><span class="p">,</span> <span class="s1">'n'</span><span class="p">,</span> <span class="s1">''</span><span class="p">,</span> <span class="s1">'s-'</span><span class="p">,</span> <span class="s1">'&lt;C-w&gt;-'</span><span class="p">)</span>
<span class="k">call</span> submode#map<span class="p">(</span><span class="s1">'bufmove'</span><span class="p">,</span> <span class="s1">'n'</span><span class="p">,</span> <span class="s1">''</span><span class="p">,</span> <span class="s1">'&gt;'</span><span class="p">,</span> <span class="s1">'&lt;C-w&gt;&gt;'</span><span class="p">)</span>
<span class="k">call</span> submode#map<span class="p">(</span><span class="s1">'bufmove'</span><span class="p">,</span> <span class="s1">'n'</span><span class="p">,</span> <span class="s1">''</span><span class="p">,</span> <span class="s1">'&lt;'</span><span class="p">,</span> <span class="s1">'&lt;C-w&gt;&lt;'</span><span class="p">)</span>
<span class="k">call</span> submode#map<span class="p">(</span><span class="s1">'bufmove'</span><span class="p">,</span> <span class="s1">'n'</span><span class="p">,</span> <span class="s1">''</span><span class="p">,</span> <span class="s1">'+'</span><span class="p">,</span> <span class="s1">'&lt;C-w&gt;+'</span><span class="p">)</span>
<span class="k">call</span> submode#map<span class="p">(</span><span class="s1">'bufmove'</span><span class="p">,</span> <span class="s1">'n'</span><span class="p">,</span> <span class="s1">''</span><span class="p">,</span> <span class="s1">'-'</span><span class="p">,</span> <span class="s1">'&lt;C-w&gt;-'</span><span class="p">)</span>
</pre></div></div>

<h1>
<span id="追記20140310-836" class="fragment"></span><a href="#%E8%BF%BD%E8%A8%9820140310-836"><i class="fa fa-link"></i></a>追記(2014/03/10 8:36)</h1>

<blockquote>
<p>@hisatake_i<br>
最初の 画像が コロンとセミコロンが間違ってるな。</p>
</blockquote>

<p><code>:</code>と<code>;</code>をノーマルモードでのみ入れ替えるマッピングをしているため、画像上では<code>;</code>を打ったと表示されています。紛らわしくてすみません。実際には<code>:</code>を打つ必要があります。</p>

<p>英字キーボードではオススメの設定なので、あわせてどうぞ。</p>

<div class="code-frame" data-lang="vim"><div class="highlight"><pre><span></span><span class="c">" コロンとセミコロンを入れ替え</span>
<span class="nb">noremap</span> : ;
</pre></div></div>
</div>
	</td>
</tr>
</table>
<br />
<table border="1" style="height:150px;">
<tr>
	<td rowspan="3">29位</td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="thumb-up-120px.png" /></i>1171</kbd>
		<a target="_blank" href="https://qiita.com/kidach1/items/15cfee9ec66804c3afd2">Ruby block/proc/lambdaの使いどころ</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-11-18<br />10:44:33</center>
	</td>
	<td style="width:200px;">
		<!--投稿者-->
		<center>
			@<a href="user/48274.html">kidach1</a>(84件の記事)<br />(Akatsuki Inc. 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/48274/profile-images/1473691291">
		</center>
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Ruby]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<!--
		<div style="width:350px;height:150px;overflow:scroll;">%s</div>
		-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>(2015/10/13追記) <br>
今なら、他言語には無名関数やcallback関数というものがありますねとか、イベント駆動の世界を覗いてから戻ってくるとより腑に落ちるかもしれませんとか、もう少し全体観の中で説明する気がしますが、当時は本記事の様な理解が役に立ったことは事実なので、引き続き公開を続けます。</p>

<p>(2013/11/29追記) block_given? について</p>

<p>Twitter上で「Kernel.#block_given?についての解説があってもよさそう」と<br>
指摘を頂きましたので、<a href="http://qiita.com/kidachi_/items/15cfee9ec66804c3afd2#ps1">本文下部</a>に追記しました。</p>

<h2>
<span id="概要" class="fragment"></span><a href="#%E6%A6%82%E8%A6%81"><i class="fa fa-link"></i></a>概要</h2>

<p>Ruby on Rails Tutorialのエッセンスを自分なりに整理してみる4</p>

<p>Railsを触る際知っていると便利なRubyの基礎 [ブロックとかシンボルとか]<br>
<a href="http://qiita.com/kidachi_/items/46a6e49b6306655ccd64" class="autolink" id="reference-38f86efb94b33fccf144">http://qiita.com/kidachi_/items/46a6e49b6306655ccd64</a><br>
の続き。</p>

<p>Ruby on Rails Tutorial（chapter4）<br>
<a href="http://railstutorial.jp/chapters/rails-flavored-ruby?version=4.0#fnref-4_11" class="autolink" rel="nofollow noopener" target="_blank">http://railstutorial.jp/chapters/rails-flavored-ruby?version=4.0#fnref-4_11</a></p>

<h2>
<span id="流れ" class="fragment"></span><a href="#%E6%B5%81%E3%82%8C"><i class="fa fa-link"></i></a>流れ</h2>

<ul>
<li>ブロックとは何か</li>
<li>yield、Procとは何か</li>
<li>Proc補足</li>
<li>で、ブロックやProcって何が嬉しいの？</li>
</ul>

<h2>
<span id="ブロックとは何か" class="fragment"></span><a href="#%E3%83%96%E3%83%AD%E3%83%83%E3%82%AF%E3%81%A8%E3%81%AF%E4%BD%95%E3%81%8B"><i class="fa fa-link"></i></a>ブロックとは何か</h2>

<p>ひとことで言うと</p>

<h3>
<span id="doendもしくはで囲われた引数となるためのカタマリ" class="fragment"></span><a href="#doend%E3%82%82%E3%81%97%E3%81%8F%E3%81%AF%E3%81%A7%E5%9B%B2%E3%82%8F%E3%82%8C%E3%81%9F%E5%BC%95%E6%95%B0%E3%81%A8%E3%81%AA%E3%82%8B%E3%81%9F%E3%82%81%E3%81%AE%E3%82%AB%E3%82%BF%E3%83%9E%E3%83%AA"><i class="fa fa-link"></i></a>do~end（もしくは{~}）で囲われた、引数となるためのカタマリ。</h3>

<p>ブロックについて調べようとするとだいたい「yield(いーるど)」とか「Proc」とかが<br>
混ざってきてよく分からなくなるけど、実際はこれだけです。</p>

<p>yieldは「ブロックを呼び出すもの」、Procは「ブロックをオブジェクト化したもの」であり、<br>
ブロック自体とは別物（詳しくは後述）。</p>

<h4>
<span id="ブロックの性質" class="fragment"></span><a href="#%E3%83%96%E3%83%AD%E3%83%83%E3%82%AF%E3%81%AE%E6%80%A7%E8%B3%AA"><i class="fa fa-link"></i></a>ブロックの性質</h4>

<ul>
<li>それ単体では存在できず、メソッドの引数にしかなれない

<ul>
<li>「do~endのカタマリ」がその辺に単体で転がっているのは見た事ないはず。</li>
</ul>
</li>
<li>引数として渡されたブロックは、yieldによって実行される</li>
</ul>

<div class="code-frame" data-lang="rb"><div class="highlight"><pre><span></span><span class="c1">#ブロックを受け取るメソッドの定義</span>
<span class="k">def</span> <span class="nf">give_me_block</span>
  <span class="k">yield</span>
<span class="k">end</span>

<span class="c1">#メソッドの引数としてブロック（do~end）を渡して、実行</span>
<span class="n">give_me_block</span> <span class="k">do</span>
  <span class="nb">p</span> <span class="s2">"Hello, block!"</span>
<span class="k">end</span>
<span class="o">=&gt;</span> <span class="s2">"Hello, block!"</span>    <span class="c1">#give_me_block内で、yieldによって呼び出された。</span>
</pre></div></div>

<p>ただ、yieldというのはあるべき手順をすっ飛ばしているため分かりづらい。<br>
以下の流れを追っていくと理解しやすいです。</p>

<h3>
<span id="そもそもブロックとは引数であることを明示した書き方も存在する" class="fragment"></span><a href="#%E3%81%9D%E3%82%82%E3%81%9D%E3%82%82%E3%83%96%E3%83%AD%E3%83%83%E3%82%AF%E3%81%A8%E3%81%AF%E5%BC%95%E6%95%B0%E3%81%A7%E3%81%82%E3%82%8B%E3%81%93%E3%81%A8%E3%82%92%E6%98%8E%E7%A4%BA%E3%81%97%E3%81%9F%E6%9B%B8%E3%81%8D%E6%96%B9%E3%82%82%E5%AD%98%E5%9C%A8%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>「そもそもブロックとは引数であること」を明示した書き方も存在する</h3>

<div class="code-frame" data-lang="rb"><div class="highlight"><pre><span></span><span class="c1">#メソッド定義</span>
<span class="k">def</span> <span class="nf">give_me_block</span><span class="p">(</span> <span class="o">&amp;</span><span class="n">block</span> <span class="p">)</span>
  <span class="n">block</span><span class="o">.</span><span class="n">call</span>
<span class="k">end</span>

<span class="c1">#実行</span>
<span class="n">give_me_block</span> <span class="k">do</span>
  <span class="nb">p</span> <span class="s2">"Hello, block!"</span>
<span class="k">end</span>
<span class="o">=&gt;</span> <span class="s2">"Hello, block!"</span>
</pre></div></div>

<p><code>def give_me_block( &amp;block )</code>で、ブロック引数を受け取ることを明示している。</p>

<h3>
<span id="blockのって" class="fragment"></span><a href="#block%E3%81%AE%E3%81%A3%E3%81%A6"><i class="fa fa-link"></i></a>&amp;blockの「&amp;」って？</h3>

<p>&amp;を付けることで、実際に引数にブロックが渡ってきた際、<br>
Procオブジェクトに変換している。</p>

<h3>
<span id="procオブジェクトって" class="fragment"></span><a href="#proc%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%A3%E3%81%A6"><i class="fa fa-link"></i></a>Procオブジェクトって？</h3>

<ul>
<li>ブロックをオブジェクト化したものがProc

<ul>
<li>ブロックがそれ単体では存在できないことを思い出す （→オブジェクト化してしまえばok）</li>
<li>ブロックをオブジェクトに変換することで、引き渡されたメソッド（give_me_block）内で扱えるようにする</li>
</ul>
</li>
<li>Procオブジェクトは、callで呼び出すことが出来る

<ul>
<li>2行目の<code>block.call</code>の正体はこれ。</li>
</ul>
</li>
</ul>

<h3>
<span id="ちなみにブロック引数は仮引数の中で一番最後に定義されていなければならない" class="fragment"></span><a href="#%E3%81%A1%E3%81%AA%E3%81%BF%E3%81%AB%E3%83%96%E3%83%AD%E3%83%83%E3%82%AF%E5%BC%95%E6%95%B0%E3%81%AF%E4%BB%AE%E5%BC%95%E6%95%B0%E3%81%AE%E4%B8%AD%E3%81%A7%E4%B8%80%E7%95%AA%E6%9C%80%E5%BE%8C%E3%81%AB%E5%AE%9A%E7%BE%A9%E3%81%95%E3%82%8C%E3%81%A6%E3%81%84%E3%81%AA%E3%81%91%E3%82%8C%E3%81%B0%E3%81%AA%E3%82%89%E3%81%AA%E3%81%84"><i class="fa fa-link"></i></a>ちなみに、ブロック引数は、仮引数の中で一番最後に定義されていなければならない</h3>

<p>以下みたいなのはNG</p>

<ul>
<li>def give_me_block( &amp;block1, param1 )</li>
<li>def give_me_block( &amp;block1, &amp;block2 )</li>
</ul>

<p>つまるところ<strong>引数として渡せるブロックは一つだけ</strong>。</p>

<h3>
<span id="以上を踏まえると" class="fragment"></span><a href="#%E4%BB%A5%E4%B8%8A%E3%82%92%E8%B8%8F%E3%81%BE%E3%81%88%E3%82%8B%E3%81%A8"><i class="fa fa-link"></i></a>以上を踏まえると</h3>

<p>こんな考え方も出来る。</p>

<p>「どうせブロック引数は一つしか取れないんだから</p>

<h4>
<span id="呼び出し箇所をblockcallなんて明示せずにyieldで統一しちゃえば良いじゃん" class="fragment"></span><a href="#%E5%91%BC%E3%81%B3%E5%87%BA%E3%81%97%E7%AE%87%E6%89%80%E3%82%92blockcall%E3%81%AA%E3%82%93%E3%81%A6%E6%98%8E%E7%A4%BA%E3%81%9B%E3%81%9A%E3%81%AByield%E3%81%A7%E7%B5%B1%E4%B8%80%E3%81%97%E3%81%A1%E3%82%83%E3%81%88%E3%81%B0%E8%89%AF%E3%81%84%E3%81%98%E3%82%83%E3%82%93"><i class="fa fa-link"></i></a>呼び出し箇所を<code>block.call</code>なんて明示せずに、<code>yield</code>で統一しちゃえば良いじゃん」</h4>

<div class="code-frame" data-lang="rb"><div class="highlight"><pre><span></span><span class="c1">#メソッド定義</span>
<span class="k">def</span> <span class="nf">give_me_block</span><span class="p">(</span> <span class="o">&amp;</span><span class="n">block</span> <span class="p">)</span>
  <span class="k">yield</span>    <span class="c1"># block.callをやめてyieldに変更</span>
<span class="k">end</span>

<span class="c1">#実行</span>
<span class="n">give_me_block</span> <span class="k">do</span>
  <span class="nb">p</span> <span class="s2">"Hello, block!"</span>
<span class="k">end</span>
<span class="o">=&gt;</span> <span class="s2">"Hello, block!"</span>
</pre></div></div>

<h3>
<span id="さらに" class="fragment"></span><a href="#%E3%81%95%E3%82%89%E3%81%AB"><i class="fa fa-link"></i></a>さらに</h3>

<h4>
<span id="ブロックは全部yieldが示すんだから仮引数blockもいらなくね" class="fragment"></span><a href="#%E3%83%96%E3%83%AD%E3%83%83%E3%82%AF%E3%81%AF%E5%85%A8%E9%83%A8yield%E3%81%8C%E7%A4%BA%E3%81%99%E3%82%93%E3%81%A0%E3%81%8B%E3%82%89%E4%BB%AE%E5%BC%95%E6%95%B0block%E3%82%82%E3%81%84%E3%82%89%E3%81%AA%E3%81%8F%E3%81%AD"><i class="fa fa-link"></i></a>「ブロックは全部yieldが示すんだから、仮引数（&amp;block）もいらなくね？」</h4>

<div class="code-frame" data-lang="rb"><div class="highlight"><pre><span></span><span class="c1">#メソッド定義</span>
<span class="k">def</span> <span class="nf">give_me_block</span>    <span class="c1"># (&amp;block)を除去</span>
  <span class="k">yield</span>
<span class="k">end</span>

<span class="c1">#実行</span>
<span class="n">give_me_block</span> <span class="k">do</span>
  <span class="nb">p</span> <span class="s2">"Hello, block!"</span>
<span class="k">end</span>
<span class="o">=&gt;</span> <span class="s2">"Hello, block!"</span>
</pre></div></div>

<p>これが<strong>色々省略されまくったyield文の正体</strong>です。</p>

<p>一見give_me_blockは何も引数をとらないメソッドのように見えるのに、<br>
その内部にyieldを持っている以上「ブロックを引数として受けとるメソッドである」<br>
ということを認識しないといけない。</p>

<p>Rubyコードを読み解く際によく注意しておかなければならない点の一つのみたいです。</p>

<p>以下記事でまつもとさんが話しているのもそんな話。<br>
<a href="http://itpro.nikkeibp.co.jp/article/COLUMN/20070621/275509/?P=3" class="autolink" rel="nofollow noopener" target="_blank">http://itpro.nikkeibp.co.jp/article/COLUMN/20070621/275509/?P=3</a><br>
「もし最初から暗黙の引数みたいなデザインをしていたら、<br>
今許しているアンパサンド「＆」の文法は必須にして、yieldはなくして、<br>
「＆」が付いていないのにブロックを渡したらエラーになるとか…」</p>

<h2>
<span id="proc補足" class="fragment"></span><a href="#proc%E8%A3%9C%E8%B6%B3"><i class="fa fa-link"></i></a>Proc補足</h2>

<p>上でも説明していますが補足含めて。</p>

<ul>
<li>ブロックをオブジェクト化したものがProc</li>
<li>Procオブジェクトはcallで呼び出すことが出来る</li>
<li>Procに引数を期待する書き方も出来る

<ul>
<li>「メソッドの引数となるProcにさらに引数が期待できる」って混乱しそうですが・・</li>
</ul>
</li>
<li>Proc.newとlambdaはほぼ同義</li>
</ul>

<h4>
<span id="procオブジェクトの定義と呼び出しサンプル" class="fragment"></span><a href="#proc%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AE%E5%AE%9A%E7%BE%A9%E3%81%A8%E5%91%BC%E3%81%B3%E5%87%BA%E3%81%97%E3%82%B5%E3%83%B3%E3%83%97%E3%83%AB"><i class="fa fa-link"></i></a>Procオブジェクトの定義と呼び出しサンプル</h4>

<div class="code-frame" data-lang="rb"><div class="highlight"><pre><span></span><span class="c1">#インスタンス生成</span>
<span class="n">proc1</span> <span class="o">=</span> <span class="no">Proc</span><span class="o">.</span><span class="n">new</span> <span class="k">do</span>
  <span class="nb">p</span> <span class="s2">"hoge"</span>
<span class="k">end</span>

<span class="c1">#実行</span>
<span class="n">proc1</span><span class="o">.</span><span class="n">call</span>
<span class="o">=&gt;</span> <span class="s2">"hoge"</span>
</pre></div></div>

<h4>
<span id="呼び出されるcallされる際に引数が渡されることを期待する書き方サンプル" class="fragment"></span><a href="#%E5%91%BC%E3%81%B3%E5%87%BA%E3%81%95%E3%82%8C%E3%82%8Bcall%E3%81%95%E3%82%8C%E3%82%8B%E9%9A%9B%E3%81%AB%E5%BC%95%E6%95%B0%E3%81%8C%E6%B8%A1%E3%81%95%E3%82%8C%E3%82%8B%E3%81%93%E3%81%A8%E3%82%92%E6%9C%9F%E5%BE%85%E3%81%99%E3%82%8B%E6%9B%B8%E3%81%8D%E6%96%B9%E3%82%B5%E3%83%B3%E3%83%97%E3%83%AB"><i class="fa fa-link"></i></a>呼び出される（callされる）際に引数が渡されることを期待する書き方サンプル</h4>

<div class="code-frame" data-lang="rb"><div class="highlight"><pre><span></span><span class="c1">#インスタンス生成</span>
<span class="n">proc2</span> <span class="o">=</span> <span class="no">Proc</span><span class="o">.</span><span class="n">new</span> <span class="k">do</span> <span class="o">|</span><span class="n">s</span><span class="o">|</span>    <span class="c1">#sが仮引数</span>
  <span class="nb">p</span> <span class="s2">"Hello, </span><span class="si">#{</span><span class="n">s</span><span class="si">}</span><span class="s2">!"</span>
<span class="k">end</span>

<span class="c1">#実行</span>
<span class="n">proc2</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="s2">"Proc"</span><span class="p">)</span>    <span class="c1">#"Proc"が実引数</span>
<span class="o">=&gt;</span> <span class="s2">"Hello, Proc!"</span>
</pre></div></div>

<h4>
<span id="procnewとlambdaはほぼ同義" class="fragment"></span><a href="#procnew%E3%81%A8lambda%E3%81%AF%E3%81%BB%E3%81%BC%E5%90%8C%E7%BE%A9"><i class="fa fa-link"></i></a>Proc.newとlambdaはほぼ同義</h4>

<p>以下の記述で上の2例と同じ結果が得られる</p>

<div class="code-frame" data-lang="rb"><div class="highlight"><pre><span></span><span class="c1">#インスタンス生成</span>
<span class="n">lambda1</span> <span class="o">=</span> <span class="nb">lambda</span> <span class="p">{</span> <span class="nb">p</span> <span class="s2">"hoge"</span> <span class="p">}</span>
<span class="c1">#実行</span>
<span class="n">lambda1</span><span class="o">.</span><span class="n">call</span>
<span class="o">=&gt;</span> <span class="s2">"hoge"</span>

<span class="n">lambda2</span> <span class="o">=</span> <span class="nb">lambda</span> <span class="p">{</span> <span class="o">|</span><span class="n">s</span><span class="o">|</span> <span class="nb">p</span> <span class="s2">"Hello, </span><span class="si">#{</span><span class="n">s</span><span class="si">}</span><span class="s2">!"</span> <span class="p">}</span>
<span class="n">lambda2</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="s2">"Proc"</span><span class="p">)</span>
<span class="o">=&gt;</span> <span class="s2">"Hello, Proc!"</span>
</pre></div></div>

<p>※細かくはProcとlambdaには違いが存在しますが、ここでは触れません。<br>
補足は以下等を参照ください。</p>

<p>RubyでlambdaとProcの違いは？<br>
<a href="http://qa.atmarkit.co.jp/q/68" class="autolink" rel="nofollow noopener" target="_blank">http://qa.atmarkit.co.jp/q/68</a></p>

<h2>
<span id="でブロックやprocって何が嬉しいの" class="fragment"></span><a href="#%E3%81%A7%E3%83%96%E3%83%AD%E3%83%83%E3%82%AF%E3%82%84proc%E3%81%A3%E3%81%A6%E4%BD%95%E3%81%8C%E5%AC%89%E3%81%97%E3%81%84%E3%81%AE"><i class="fa fa-link"></i></a>で、ブロックやProcって何が嬉しいの？</h2>

<p>一つ目は</p>

<h3>
<span id="メソッドを後々の利用時に柔軟に拡張出来る" class="fragment"></span><a href="#%E3%83%A1%E3%82%BD%E3%83%83%E3%83%89%E3%82%92%E5%BE%8C%E3%80%85%E3%81%AE%E5%88%A9%E7%94%A8%E6%99%82%E3%81%AB%E6%9F%94%E8%BB%9F%E3%81%AB%E6%8B%A1%E5%BC%B5%E5%87%BA%E6%9D%A5%E3%82%8B"><i class="fa fa-link"></i></a>メソッドを後々の利用時に柔軟に拡張出来る</h3>

<p>例えば、開発者Aが「5という数で好きな事をしてもらうメソッドを作ろう」と<br>
考えた場合、以下のようになります。</p>

<div class="code-frame" data-lang="rb"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">magic_five_box</span><span class="p">(</span><span class="n">after_input</span><span class="p">,</span> <span class="n">someProc</span><span class="p">)</span>
  <span class="n">someProc</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="n">after_input</span><span class="p">)</span>
<span class="k">end</span>
</pre></div></div>

<p>開発者B「私は5を使って足し算します」</p>

<div class="code-frame" data-lang="rb"><div class="highlight"><pre><span></span><span class="n">sum_proc</span> <span class="o">=</span> <span class="no">Proc</span><span class="o">.</span><span class="n">new</span> <span class="k">do</span> <span class="o">|</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="o">|</span>
  <span class="nb">p</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span>
<span class="k">end</span>

<span class="n">magic_five_box</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">sum_proc</span><span class="p">)</span>
<span class="o">=&gt;</span> <span class="mi">8</span>
</pre></div></div>

<p>開発者C「私なら文字列を5回表示させます」</p>

<div class="code-frame" data-lang="rb"><div class="highlight"><pre><span></span><span class="n">string_proc</span> <span class="o">=</span> <span class="no">Proc</span><span class="o">.</span><span class="n">new</span> <span class="k">do</span> <span class="o">|</span><span class="n">x</span><span class="p">,</span> <span class="n">string</span><span class="o">|</span>
  <span class="nb">p</span> <span class="n">string</span> <span class="o">*</span> <span class="n">x</span>
<span class="k">end</span>

<span class="n">magic_five_box</span><span class="p">(</span><span class="s1">'happy_proc! '</span><span class="p">,</span> <span class="n">string_proc</span><span class="p">)</span>
<span class="o">=&gt;</span> <span class="s2">"happy_proc! happy_proc! happy_proc! happy_proc! happy_proc! "</span>
</pre></div></div>

<p>このメソッド例は大した意味は持ちませんが、<br>
使い方によって有効に利用できそうな雰囲気が伝わったでしょうか。</p>

<p>下の記事はブロックのことを「メソッドに対するメソッドのMix-in」と表現しています。</p>

<p>Rubyのブロックはメソッドに対するメソッドのMix-inだ！<br>
<a href="http://melborne.github.io/2008/08/09/Ruby-Mix-in/" class="autolink" rel="nofollow noopener" target="_blank">http://melborne.github.io/2008/08/09/Ruby-Mix-in/</a></p>

<p>よく考えてみると、Ruby標準の<strong>eachやmapなどもブロックを受け取るメソッド</strong>です。</p>

<p>「配列を扱うならこれ、という『土台』は用意しておくから、<br>
細かい部分はブロックを加えて自由に料理して」という思想ですね。</p>

<h3>
<span id="状態を持った関数クロージャとしての機能が得られる" class="fragment"></span><a href="#%E7%8A%B6%E6%85%8B%E3%82%92%E6%8C%81%E3%81%A3%E3%81%9F%E9%96%A2%E6%95%B0%E3%82%AF%E3%83%AD%E3%83%BC%E3%82%B8%E3%83%A3%E3%81%A8%E3%81%97%E3%81%A6%E3%81%AE%E6%A9%9F%E8%83%BD%E3%81%8C%E5%BE%97%E3%82%89%E3%82%8C%E3%82%8B"><i class="fa fa-link"></i></a>状態を持った関数（クロージャ）としての機能が得られる</h3>

<p>ブロック/Proc二つ目のメリットはこちら。</p>

<div class="code-frame" data-lang="rb"><div class="highlight"><pre><span></span><span class="n">n</span> <span class="o">=</span> <span class="mi">1</span>
<span class="nb">proc</span> <span class="o">=</span> <span class="no">Proc</span><span class="o">.</span><span class="n">new</span> <span class="k">do</span>
  <span class="n">n</span> <span class="o">=</span> <span class="n">n</span> <span class="o">+</span> <span class="mi">1</span>
<span class="k">end</span>

<span class="nb">proc</span><span class="o">.</span><span class="n">call</span>
<span class="o">=&gt;</span><span class="mi">2</span>
<span class="nb">proc</span><span class="o">.</span><span class="n">call</span>
<span class="o">=&gt;</span><span class="mi">3</span>
<span class="nb">proc</span><span class="o">.</span><span class="n">call</span>
<span class="o">=&gt;</span><span class="mi">4</span>
</pre></div></div>

<p>Procオブジェクト（proc）は外側のスコープに存在するnへの参照を保持し、<br>
呼び出す度にnをインクリメントできるメソッドができました。</p>

<p>が、クロージャの細かい特徴/用途となるとまた長い話になるので、<br>
詳しくは以下等を参照してみてください。</p>

<p>私が今までクロージャを理解できなかった理由Add Starfoussin<br>
<a href="http://d.hatena.ne.jp/artgear/20120115/1326635158" class="autolink" rel="nofollow noopener" target="_blank">http://d.hatena.ne.jp/artgear/20120115/1326635158</a></p>

<p><a></a></p>

<h2>
<span id="20131129追記-kernelblock_given-について" class="fragment"></span><a href="#20131129%E8%BF%BD%E8%A8%98-kernelblock_given-%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6"><i class="fa fa-link"></i></a>(2013/11/29追記) Kernel.#block_given? について</h2>

<h3>
<span id="block_givenとは" class="fragment"></span><a href="#block_given%E3%81%A8%E3%81%AF"><i class="fa fa-link"></i></a>block_given?とは</h3>

<p>名前の通り、引数としてブロックが与えられたかどうかを判別するメソッド。</p>

<h3>
<span id="利用例" class="fragment"></span><a href="#%E5%88%A9%E7%94%A8%E4%BE%8B"><i class="fa fa-link"></i></a>利用例</h3>

<p>開発者A<br>
「7という数で好きな事をしてもらうメソッドを作ろう。<br>
でも、<strong>もしブロックが渡されなくても使えるようにしよう。</strong>」</p>

<div class="code-frame" data-lang="rb"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">wonder_seven_box</span>
  <span class="k">if</span> <span class="nb">block_given?</span>
    <span class="k">yield</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span>
  <span class="k">else</span>
    <span class="nb">p</span> <span class="s2">"Don't mind. Feel free to call me."</span>    <span class="c1"># ブロックが与えられなければこちら</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div></div>

<p>開発者B「私は7を使って足し算します」</p>

<div class="code-frame" data-lang="rb"><div class="highlight"><pre><span></span><span class="n">wonder_seven_box</span> <span class="k">do</span> <span class="o">|</span><span class="n">x</span><span class="o">|</span>
  <span class="nb">p</span> <span class="mi">3</span> <span class="o">+</span> <span class="n">x</span>
<span class="k">end</span>
<span class="o">=&gt;</span> <span class="mi">10</span>
</pre></div></div>

<p>開発者C「私なら文字列を7回表示させます」</p>

<div class="code-frame" data-lang="rb"><div class="highlight"><pre><span></span><span class="n">wonder_seven_box</span> <span class="k">do</span> <span class="o">|</span><span class="n">x</span><span class="o">|</span>
  <span class="nb">p</span> <span class="s2">"happy_block! "</span> <span class="o">*</span> <span class="n">x</span>
<span class="k">end</span>
<span class="o">=&gt;</span> <span class="s2">"happy_block! happy_block! happy_block! happy_block! happy_block! happy_block! happy_block! "</span>
</pre></div></div>

<p>開発者D「ブロックよく分からない」</p>

<div class="code-frame" data-lang="rb"><div class="highlight"><pre><span></span><span class="n">wonder_seven_box</span>
<span class="o">=&gt;</span> <span class="s2">"Don't mind. Feel free to call me."</span>
</pre></div></div>

<p>ブロックを与えなくても呼び出すことが出来ました。</p>

<h2>
<span id="block_givenを整理していて気になった事" class="fragment"></span><a href="#block_given%E3%82%92%E6%95%B4%E7%90%86%E3%81%97%E3%81%A6%E3%81%84%E3%81%A6%E6%B0%97%E3%81%AB%E3%81%AA%E3%81%A3%E3%81%9F%E4%BA%8B"><i class="fa fa-link"></i></a>block_given?を整理していて気になった事</h2>

<p>※本項はRubyの言語仕様に関する疑問点の備忘録です。<br>
「ブロックとProcをちゃんと理解する」からは少しずれますので、<br>
不要であれば読み飛ばして頂ければと思います。</p>

<h3>
<span id="細かいけど" class="fragment"></span><a href="#%E7%B4%B0%E3%81%8B%E3%81%84%E3%81%91%E3%81%A9"><i class="fa fa-link"></i></a>細かいけど</h3>

<p>お気づきかと思いますが、magic_five_boxの例ではProcベースでしたが、<br>
今回のwonder_seven_boxはブロックベースとなっています。</p>

<p>というのも、<strong>proc_given?のようなメソッドが見当たらなかったので。</strong></p>

<p>つまり、procの場合は、</p>

<div class="code-frame" data-lang="rb"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">magic_five_box</span><span class="p">(</span><span class="n">after_input</span><span class="p">,</span> <span class="n">someProc</span><span class="p">)</span>
  <span class="n">someProc</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="n">after_input</span><span class="p">)</span>
<span class="k">end</span>
</pre></div></div>

<p>の例が示す通り、<strong>Procオブジェクトを受け取る前提</strong>の記述となるため、<br>
block_given?に類する判定がそもそも必要ない。</p>

<p>一方でブロックの場合は</p>

<div class="code-frame" data-lang="rb"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">wonder_seven_box</span>
  <span class="k">if</span> <span class="nb">block_given?</span>
    <span class="k">yield</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span>
  <span class="k">else</span>
    <span class="nb">p</span> <span class="s2">"Don't mind. Feel free to call me."</span>    <span class="c1"># ブロックが与えられなければこちら</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div></div>

<p>上記例で見た通り、<br>
<strong>ブロックを引数に取っても取らなくても良い、より柔軟なメソッド</strong><br>
を作ることが出来ます。</p>

<p>ただ、まつもとさんが仰っている内容（以下再掲）を鑑みた時、ひとつ疑問が生まれました。</p>

<p><a href="http://itpro.nikkeibp.co.jp/article/COLUMN/20070621/275509/?P=3" class="autolink" rel="nofollow noopener" target="_blank">http://itpro.nikkeibp.co.jp/article/COLUMN/20070621/275509/?P=3</a><br>
「もし最初から暗黙の引数みたいなデザインをしていたら、<br>
今許しているアンパサンド「＆」の文法は必須にして、yieldはなくして、<br>
「＆」が付いていないのにブロックを渡したらエラーになるとか…」</p>

<p>つまり以下の記述をスタンダードにした方が良いかも、ということですね。</p>

<div class="code-frame" data-lang="rb"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">give_me_block</span><span class="p">(</span> <span class="o">&amp;</span><span class="n">block</span> <span class="p">)</span>
  <span class="n">block</span><span class="o">.</span><span class="n">call</span>
<span class="k">end</span>
</pre></div></div>

<p>そしてこの記述の場合、ブロックは<strong>渡されて来ることが前提</strong>となりそうです。</p>

<p>（もちろん、</p>

<ul>
<li>引数にブロックを期待する場合のみ、引数が渡されないケースも許容する</li>
</ul>

<p>（メソッド内でblock_given?で判定）</p>

<p>というデザインもあり得るとは思いますが、<br>
<strong>通常のメソッド定義と見た目はほぼ一緒なのにルールだけ違う</strong>という状況になってしまいます。）</p>

<p>何が気になっているのかというと、</p>

<h4>
<span id="本来-kernelblock_given-は必須の実装なのか" class="fragment"></span><a href="#%E6%9C%AC%E6%9D%A5-kernelblock_given-%E3%81%AF%E5%BF%85%E9%A0%88%E3%81%AE%E5%AE%9F%E8%A3%85%E3%81%AA%E3%81%AE%E3%81%8B"><i class="fa fa-link"></i></a>本来 Kernel.#block_given? は必須の実装なのか？</h4>

<p>ということ。実は</p>

<h4>
<span id="yieldという特殊な存在に引き摺られて後付けで実装された" class="fragment"></span><a href="#yield%E3%81%A8%E3%81%84%E3%81%86%E7%89%B9%E6%AE%8A%E3%81%AA%E5%AD%98%E5%9C%A8%E3%81%AB%E5%BC%95%E3%81%8D%E6%91%BA%E3%82%89%E3%82%8C%E3%81%A6%E5%BE%8C%E4%BB%98%E3%81%91%E3%81%A7%E5%AE%9F%E8%A3%85%E3%81%95%E3%82%8C%E3%81%9F"><i class="fa fa-link"></i></a>（yieldという特殊な存在に引き摺られて）後付けで実装された</h4>

<p>ものであり</p>

<h4>
<span id="想定外のもっと言うと本来不要な柔軟性を生み出している" class="fragment"></span><a href="#%E6%83%B3%E5%AE%9A%E5%A4%96%E3%81%AE%E3%82%82%E3%81%A3%E3%81%A8%E8%A8%80%E3%81%86%E3%81%A8%E6%9C%AC%E6%9D%A5%E4%B8%8D%E8%A6%81%E3%81%AA%E6%9F%94%E8%BB%9F%E6%80%A7%E3%82%92%E7%94%9F%E3%81%BF%E5%87%BA%E3%81%97%E3%81%A6%E3%81%84%E3%82%8B"><i class="fa fa-link"></i></a>想定外の（もっと言うと本来不要な）柔軟性を生み出している</h4>

<p>ものだったりしないのでしょうか。</p>

<p>→仮に通常の引数に対してblock_given?に類するものがあったとすると、<br>
　こんなことをしてる訳で。</p>

<div class="code-frame" data-lang="rb"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">test_method</span> <span class="p">(</span> <span class="n">args</span> <span class="p">)</span>
  <span class="k">if</span> <span class="n">args_given?</span>
    <span class="n">hoge</span>
  <span class="k">else</span>
    <span class="n">fuga</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div></div>

<p>果たしてこれをポジティブに「柔軟」と捉えるべきか。</p>

<h5>
<span id="ご相談" class="fragment"></span><a href="#%E3%81%94%E7%9B%B8%E8%AB%87"><i class="fa fa-link"></i></a>ご相談</h5>

<p>もしこのあたりの成り立ちのストーリーに詳しい方、<br>
または言語デザインに対するご指摘をお持ちの方がいらっしゃいましたら<br>
ぜひご教示頂けると嬉しいです！</p>

<p>※同時に、Ruby初心者の考察であるため、的を外している点ありましたら<br>
突っ込みを頂けますと幸いですm(_ _)m</p>

<h2>
<span id="ブロックproc参考御礼" class="fragment"></span><a href="#%E3%83%96%E3%83%AD%E3%83%83%E3%82%AFproc%E5%8F%82%E8%80%83%E5%BE%A1%E7%A4%BC"><i class="fa fa-link"></i></a>ブロック/Proc参考＆御礼</h2>

<p>数あるブロックの記事を読んでもいまいちすっきりできなかった自分でしたが、<br>
以下の記事で目から鱗が落ちました。</p>

<p>Rubyの動かないコード（初級編）ブロックとクロージャの性質<br>
<a href="http://d.hatena.ne.jp/language_and_engineering/20101118/p1" class="autolink" rel="nofollow noopener" target="_blank">http://d.hatena.ne.jp/language_and_engineering/20101118/p1</a></p>

<p>分かりやすい記事をありがとうございました！</p>

<h2>
<span id="以下に続く" class="fragment"></span><a href="#%E4%BB%A5%E4%B8%8B%E3%81%AB%E7%B6%9A%E3%81%8F"><i class="fa fa-link"></i></a>以下に続く</h2>

<p>[Rails] TwitterBootstrapとSassとAssetPipeline<br>
<a href="http://qiita.com/kidachi_/items/4c47b28b2a74c723d835" class="autolink" id="reference-3d30586796a54ed27e21">http://qiita.com/kidachi_/items/4c47b28b2a74c723d835</a></p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1" style="height:150px;">
<tr>
	<td rowspan="3">30位</td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="thumb-up-120px.png" /></i>1152</kbd>
		<a target="_blank" href="https://qiita.com/yuku_t/items/1b8ce6bba133a7eaeb23">結局jQuery.Deferredの何が嬉しいのか分からない、という人向けの小話</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-07-15<br />11:16:55</center>
	</td>
	<td style="width:200px;">
		<!--投稿者-->
		<center>
			@<a href="user/153.html">yuku_t</a>(195件の記事)<br />(Increments inc. 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/153/profile-images/1505784567">
		</center>
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[JavaScript]</b> <b>[jQuery]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<!--
		<div style="width:350px;height:150px;overflow:scroll;">%s</div>
		-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>結局jQuery.Deferredの何が嬉しいのか分からない、という人向けの小話<br>
一年ほど前に <a href="http://qiita.com/yuku_t/items/3d1cf51d7ae91305eaaa" id="reference-a8822254d810bc038513">JavaScript - jQuery.Deferredを使って楽しい非同期生活を送る方法 - Qiita [キータ]</a> という記事を書きました。<br>
で、一年経って、ふと、「もっと分かりやすくjQuery.Deferredの便利さを説明できるんじゃないか」と思い立ってざざざっと書いてみました。</p>

<p>小話と言うにはちょっと長いけど。</p>

<p>--</p>

<p>jQuery.Deferredを使うと嬉しいのは、jQuery.Deferredの仕様を満たす部品同士を簡単に組み合わせることが可能だからです。中には処理を書き下すことができるとかコールバックのネストを防げるのがいいとか言う人もいますが、個人的にこっちのほうがよっぽど重要だと感じます。</p>

<p>例えるならレゴブロックです。レゴブロックはあの凸と凹を持ってるブロックを自由に組み合わせて、実に様々な物を表現することができますよね。まさにあんな感じです。</p>

<p>と言ってもなかなかピンとこないと思うので、具体例を使って説明しましょう。</p>

<h1>
<span id="jquerydeferredを使わない場合" class="fragment"></span><a href="#jquerydeferred%E3%82%92%E4%BD%BF%E3%82%8F%E3%81%AA%E3%81%84%E5%A0%B4%E5%90%88"><i class="fa fa-link"></i></a>jQuery.Deferredを使わない場合</h1>

<p><em>注：これから書くのはダメなJavaScriptコードなので真似しないでください。</em></p>

<p>ここに一つのリンクがあります。</p>

<div class="code-frame" data-lang="html"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">"/path"</span> <span class="na">id</span><span class="o">=</span><span class="s">"link"</span><span class="p">&gt;</span>リンク<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
</pre></div></div>

<p>このボタンがどれくらいクリックされているのか計測したくなりました。そこであなたはサーバにリンククリックを計測するためのAPIを作成し、こんな風にJavaScriptのコードを書きました。</p>

<div class="code-frame" data-lang="javascript"><div class="highlight"><pre><span></span><span class="nx">$</span><span class="p">(</span><span class="s1">'#link'</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s1">'click'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span> <span class="c1">// リンク遷移を一旦中止</span>
  <span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
    <span class="err">…</span><span class="p">,</span>  <span class="c1">// 自前の計測APIを叩く</span>
    <span class="nx">success</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
      <span class="c1">// XHRが終わったら改めて遷移させる</span>
      <span class="nb">document</span><span class="p">.</span><span class="nx">location</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">href</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">});</span>
<span class="p">});</span>
</pre></div></div>

<p>ある日、会社の上司に突然「Mixpanelってのが便利らしいからそっちも使ってみて」と言われました。曰く「Mixpanelと自前の両方で計測して、あとで比較したい」らしいです。</p>

<p>とりあえずこんな感じに実装しました。（ <code>$('#link')</code> とかは冗長なので省略します）</p>

<div class="code-frame" data-lang="javascript"><div class="highlight"><pre><span></span><span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
  <span class="err">…</span><span class="p">,</span>  <span class="c1">// 自前の計測APIを叩く</span>
  <span class="nx">success</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// mixpanelにデータを送る</span>
    <span class="nx">mixpanel</span><span class="p">.</span><span class="nx">track</span><span class="p">(</span><span class="s1">'click'</span><span class="p">,</span> <span class="p">{},</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
      <span class="c1">// 自前APIとmixpanelへの送信が終わったら遷移させる</span>
      <span class="nb">document</span><span class="p">.</span><span class="nx">location</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">href</span><span class="p">;</span>        
    <span class="p">});</span>
  <span class="p">}</span>
<span class="p">});</span>
</pre></div></div>

<p>しばらくすると今度は「Google Analyticsも（ry」と言われました。</p>

<p>やれやれ、コードをこう修正しました。</p>

<div class="code-frame" data-lang="javascript"><div class="highlight"><pre><span></span><span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
  <span class="err">…</span><span class="p">,</span>  <span class="c1">// 自前の計測APIを叩く</span>
  <span class="nx">success</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// Mixpanelにデータを送る</span>
    <span class="nx">mixpanel</span><span class="p">.</span><span class="nx">track</span><span class="p">(</span><span class="s1">'click'</span><span class="p">,</span> <span class="p">{},</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
      <span class="c1">// Google Analyticsへデータを送る</span>
      <span class="nx">ga</span><span class="p">(</span><span class="s1">'send'</span><span class="p">,</span> <span class="s1">'event'</span><span class="p">,</span> <span class="s1">'link'</span><span class="p">,</span> <span class="s1">'click'</span><span class="p">,</span> <span class="p">{</span>
        <span class="nx">hitCallback</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
          <span class="c1">// 自前APIとmixpanelとgaへの送信が終わったら遷移させる</span>
          <span class="nb">document</span><span class="p">.</span><span class="nx">location</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">href</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">});</span>
    <span class="p">});</span>
  <span class="p">}</span>
<span class="p">});</span>
</pre></div></div>

<p>するとユーザから「リンクをクリックしたときの反応が悪い」と苦情が出ました。それもそのはず、リンククリックしたら「自前API」→「Mixpanel」→「Google Analytics」と順番に通信を行なって、初めてリンク遷移を実行するからです。</p>

<p>次なる課題は、この3つの通信を並列実行させることですが、さてさてどうしようかなーと考えているあなたのもとに驚くべき情報がもたらされました。「特定のAdblock系プラグインを入れている環境ではmixpanelなどへの通信が行われずコールバックも実行されない」。つまり3つのうちどれかが通信に失敗しても大丈夫なようにしなければなりません。</p>

<p>うわーーーもうやってられん！！！</p>

<h1>
<span id="jquerydeferredを使う場合" class="fragment"></span><a href="#jquerydeferred%E3%82%92%E4%BD%BF%E3%81%86%E5%A0%B4%E5%90%88"><i class="fa fa-link"></i></a>jQuery.Deferredを使う場合</h1>

<p>先ほどの事例をjQuery.Deferredを使うとどのようにうまい具合に実装できるか見て行きましょう。</p>

<p>最初に「レゴブロックを組み合わせるみたいに書ける」と書きました。とりあえず「jQuery.Deferredを使った自前APIにデータを送る関数」、「jQuery.Deferredを使ったMixpanelにデータを送る関数」、「jQuery.Deferredを使ったGoogle Analyticsにデータを送る関数」を用意することから始めましょう。</p>

<p>ところで、Javaとかを使っている人には馴染み深いと思いますが、このようなある振る舞いを実装しているオブジェクトを、インタフェースを備えているとか、実装していると言います。なので、以後「jQuery.Deferredを使っ」ていることを「Deferredインタフェースを備えている」と表現することにします。</p>

<h2>
<span id="復習deferredインタフェースの実装方法" class="fragment"></span><a href="#%E5%BE%A9%E7%BF%92deferred%E3%82%A4%E3%83%B3%E3%82%BF%E3%83%95%E3%82%A7%E3%83%BC%E3%82%B9%E3%81%AE%E5%AE%9F%E8%A3%85%E6%96%B9%E6%B3%95"><i class="fa fa-link"></i></a>復習：Deferredインタフェースの実装方法</h2>

<p>Deferredインタフェースを備えた関数を実装するのは極めて簡単です。守らなければならないのはたった1つだけ。それは <strong>jQuery.Deferred#promise を返すこと</strong> それだけです。</p>

<div class="code-frame" data-lang="js">
<div class="code-lang"><span class="bold">Deferredインタフェースを備えた最も単純な関数</span></div>
<div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">dfdFunc</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">dfd</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">Deferred</span><span class="p">();</span>
  <span class="k">return</span> <span class="nx">dfd</span><span class="p">.</span><span class="nx">promise</span><span class="p">();</span>
<span class="p">};</span>
</pre></div>
</div>

<p><code>promise</code> は状態を持っていてこのままでは初期状態である「実行中」状態になります。普通は <code>resolve</code> か <code>reject</code> で状態を確定させます。resolveは正常に終了した状態、rejectは失敗した状態を表します。</p>

<div class="code-frame" data-lang="js">
<div class="code-lang"><span class="bold">引数に応じて状態が変化するDeferredインタフェースを持った関数</span></div>
<div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">dfdFunc</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">cond</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">dfd</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">Deferred</span><span class="p">();</span>
  <span class="nx">cond</span> <span class="o">?</span> <span class="nx">dfd</span><span class="p">.</span><span class="nx">resolve</span><span class="p">()</span> <span class="o">:</span> <span class="nx">dfd</span><span class="p">.</span><span class="nx">reject</span><span class="p">();</span>
  <span class="k">return</span> <span class="nx">dfd</span><span class="p">.</span><span class="nx">promise</span><span class="p">();</span>
<span class="p">};</span>
</pre></div>
</div>

<p>jQuery.Deferredというと非同期処理に使うものだという認識が一般的だと思いますが、これだって立派なDeferredインタフェースを備えた関数なのです。</p>

<div class="code-frame" data-lang="js"><div class="highlight"><pre><span></span><span class="nx">dfdFunc</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">done</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Resolved!'</span><span class="p">);</span> <span class="p">})</span>
  <span class="p">.</span><span class="nx">fail</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Rejected!'</span><span class="p">);</span> <span class="p">});</span>
<span class="c1">// =&gt; Resolved!</span>
</pre></div></div>

<p><code>promise#done</code> と <code>promise#fail</code> はそれぞれ <code>resolved</code> か <code>rejected</code> な <code>promise</code> に対して実行されるコールバックを設定するメソッドです。</p>

<h3>
<span id="非同期関数を含む場合" class="fragment"></span><a href="#%E9%9D%9E%E5%90%8C%E6%9C%9F%E9%96%A2%E6%95%B0%E3%82%92%E5%90%AB%E3%82%80%E5%A0%B4%E5%90%88"><i class="fa fa-link"></i></a>非同期関数を含む場合</h3>

<p>非同期関数の場合は <code>promise</code> の状態を確定するのが非同期関数のコールバックの中になります。</p>

<p>例えばMixpanelへのデータ送信をDeferred化するとこうなります。 <code>mixpanel.track</code> の第１引数と第２引数は気にしないでください。ここで重要なのは、データを送信が完了したら第３引数の関数を実行する、ということだけです。</p>

<div class="code-frame" data-lang="js">
<div class="code-lang"><span class="bold">Deferredインタフェースを備えたmixpanel関数</span></div>
<div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">dfdMixpanel</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">event</span><span class="p">,</span> <span class="nx">props</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">dfd</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">Deferred</span><span class="p">();</span>
  <span class="nx">mixpanel</span><span class="p">.</span><span class="nx">track</span><span class="p">(</span><span class="nx">event</span><span class="p">,</span> <span class="nx">props</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">dfd</span><span class="p">.</span><span class="nx">resolve</span><span class="p">();</span>
  <span class="p">});</span>
  <span class="k">return</span> <span class="nx">dfd</span><span class="p">.</span><span class="nx">promise</span><span class="p">();</span>
<span class="p">};</span>
</pre></div>
</div>

<p>簡単ですね。</p>

<h2>
<span id="さきほどの事例をjquerydeferredを使って実装してみる" class="fragment"></span><a href="#%E3%81%95%E3%81%8D%E3%81%BB%E3%81%A9%E3%81%AE%E4%BA%8B%E4%BE%8B%E3%82%92jquerydeferred%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%A6%E5%AE%9F%E8%A3%85%E3%81%97%E3%81%A6%E3%81%BF%E3%82%8B"><i class="fa fa-link"></i></a>さきほどの事例をjQuery.Deferredを使って実装してみる</h2>

<p>「jQuery.Deferredを使わない場合」で取り上げた事例をjQuery.Deferredを使うとどう解決できるか見て行きましょう。</p>

<p>まずは「自前APIだけにデータを送っている」頃のコードです。実は <code>jQuery.ajax</code> はDeferredインタフェースを備えています。なので、以下のように書けます。</p>

<div class="code-frame" data-lang="js"><div class="highlight"><pre><span></span><span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span> <span class="err">…</span> <span class="p">})</span> <span class="c1">// 自前APIにデータを送る</span>
  <span class="p">.</span><span class="nx">done</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// XHRが終わったら改めて遷移させる</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">location</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">href</span><span class="p">;</span>
  <span class="p">});</span>
</pre></div></div>

<p>さて次にMixpanelにもデータを送ります。先ほど作った <code>dfdMixpanel</code> を使うとこのように書けますね。</p>

<div class="code-frame" data-lang="js"><div class="highlight"><pre><span></span><span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span> <span class="err">…</span> <span class="p">})</span> <span class="c1">// 自前APIにデータを送る</span>
  <span class="p">.</span><span class="nx">done</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">dfdMixpanel</span><span class="p">(</span><span class="s1">'click'</span><span class="p">,</span> <span class="p">{})</span> <span class="c1">// mixpanelにデータを送る</span>
      <span class="p">.</span><span class="nx">done</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="c1">// 自前APIとmixpanelへの送信が終わったら遷移させる</span>
        <span class="nb">document</span><span class="p">.</span><span class="nx">location</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">href</span><span class="p">;</span>
      <span class="p">});</span>
  <span class="p">});</span>
</pre></div></div>

<p>しかしこれだと結局どんどん階層が深くなっていってしまっています。このように <code>done</code> の中で <code>done</code> を実行するような場合は、代わりに <code>then</code> を使うといいでしょう。 <code>then</code> を使うと先ほどのコードは次のように書き換えられます。</p>

<div class="code-frame" data-lang="js"><div class="highlight"><pre><span></span><span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span> <span class="err">…</span> <span class="p">})</span> <span class="c1">// 自前APIにデータを送る</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">dfdMixpanel</span><span class="p">(</span><span class="s1">'click'</span><span class="p">,</span> <span class="p">{})</span> <span class="c1">// return を忘れないように</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="nx">done</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// 自前APIとmixpanelへの送信が終わったら遷移させる</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">location</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">href</span><span class="p">;</span>
  <span class="p">});</span>
</pre></div></div>

<p>次はGoogle Analyticsです。 <code>dfdGa</code> という関数を作ってあるとします。</p>

<div class="code-frame" data-lang="js"><div class="highlight"><pre><span></span><span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span> <span class="err">…</span> <span class="p">})</span>  <span class="c1">// 自前APIにデータを送る</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">dfdMixpanel</span><span class="p">(</span><span class="s1">'click'</span><span class="p">,</span> <span class="p">{});</span> <span class="c1">// mixpanelにデータを送る</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">dfdGa</span><span class="p">(</span><span class="s1">'link'</span><span class="p">,</span> <span class="s1">'click'</span><span class="p">);</span> <span class="c1">// Google Analyticsにデータを送る</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="nx">done</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// 自前APIとmixpanelとGoogle Analyticsへの送信が終わったら遷移させる</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">location</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">href</span><span class="p">;</span>
  <span class="p">});</span>
</pre></div></div>

<p>さて、ここまではjQuery.Deferredを使わない場合でもなんとか書くことができました。この時点で既に元々のコードより読みやすいという利点はあると思うのですが、Deferredの真価が発揮されるのはここからです。</p>

<h3>
<span id="並列化" class="fragment"></span><a href="#%E4%B8%A6%E5%88%97%E5%8C%96"><i class="fa fa-link"></i></a>並列化</h3>

<p>まずは自前APIとMixpanelとGoogle Analyticsへのデータ送信を並列化しましょう。</p>

<p>Deferredインタフェースを備えた関数を並列実行するのは実に簡単です。 <code>jQuery.when</code> を使うだけです。</p>

<div class="code-frame" data-lang="js"><div class="highlight"><pre><span></span><span class="nx">$</span><span class="p">.</span><span class="nx">when</span><span class="p">(</span>
  <span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span> <span class="err">…</span> <span class="p">}),</span>            <span class="c1">// 自前APIにデータを送る</span>
  <span class="nx">dfdMixpanel</span><span class="p">(</span><span class="s1">'click'</span><span class="p">,</span> <span class="p">{}),</span> <span class="c1">// mixpanelにデータを送る</span>
  <span class="nx">dfdGa</span><span class="p">(</span><span class="s1">'link'</span><span class="p">,</span> <span class="s1">'click'</span><span class="p">)</span>    <span class="c1">// Google Analyticsにデータを送る</span>
<span class="p">).</span><span class="nx">done</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
  <span class="c1">// 自前APIとmixpanelとGoogle Analyticsへの送信が終わったら遷移させる</span>
  <span class="nb">document</span><span class="p">.</span><span class="nx">location</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">href</span><span class="p">;</span>
<span class="p">});</span>
</pre></div></div>

<p>そしてよくよくみてみると <code>jQuery.when</code> の返り値に <code>done</code> を実行していますね？つまり <code>jQuery.when</code> もDeferredインタフェースを備えていることが分かります。</p>

<h3>
<span id="エラー処理" class="fragment"></span><a href="#%E3%82%A8%E3%83%A9%E3%83%BC%E5%87%A6%E7%90%86"><i class="fa fa-link"></i></a>エラー処理</h3>

<p>続いて特定条件下でMixpanelにデータが送れない問題を解決しましょう。やるべきことはデータ送信に失敗した場合は <code>dfdMixpanel</code> や <code>dfdGa</code> が返した <code>promise</code> を <code>reject</code> する、それだけです。</p>

<p>実装方法は色々考えられると思いますが、ここでは1秒間待って、データ送信が完了しなかった場合は <code>reject</code> することにします。 <code>dfdMixpanel</code> を次のように書き換えます。</p>

<div class="code-frame" data-lang="js"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">dfdMixpanel</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">event</span><span class="p">,</span> <span class="nx">props</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">dfd</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">Deferred</span><span class="p">();</span>
  <span class="nx">mixpanel</span><span class="p">.</span><span class="nx">track</span><span class="p">(</span><span class="nx">event</span><span class="p">,</span> <span class="nx">props</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span> <span class="nx">dfd</span><span class="p">.</span><span class="nx">resolve</span><span class="p">();</span> <span class="p">});</span>
  <span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span> <span class="nx">dfd</span><span class="p">.</span><span class="nx">reject</span><span class="p">();</span> <span class="p">},</span> <span class="mi">1000</span><span class="p">);</span>
  <span class="k">return</span> <span class="nx">dfd</span><span class="p">.</span><span class="nx">promise</span><span class="p">();</span>
<span class="p">};</span>
</pre></div></div>

<p>「これだと <code>resolve</code> した後に <code>reject</code> も実行されるんじゃない？」と思った方もいると思いますが、 <code>promise</code> は一旦 <code>resolve</code> か <code>reject</code> されたらそれ以降状態が変化しなくなるので、これで問題ありません。</p>

<p>こんな感じのタイムアウト処理を自前APIとGoogle Analytics送信にも実装したら、<code>done</code> の代わりに <code>always</code> を使うようにして完了です。 <code>always</code> は resolve でも reject どちらの場合も実行される関数を登録するためのものです。</p>

<div class="code-frame" data-lang="js"><div class="highlight"><pre><span></span><span class="nx">$</span><span class="p">.</span><span class="nx">when</span><span class="p">(</span>
  <span class="nx">dfdAjax</span><span class="p">(),</span>                <span class="c1">// 自前APIにデータを送る</span>
  <span class="nx">dfdMixpanel</span><span class="p">(</span><span class="s1">'click'</span><span class="p">,</span> <span class="p">{}),</span> <span class="c1">// mixpanelにデータを送る</span>
  <span class="nx">dfdGa</span><span class="p">(</span><span class="s1">'link'</span><span class="p">,</span> <span class="s1">'click'</span><span class="p">)</span>    <span class="c1">// Google Analyticsにデータを送る</span>
<span class="p">).</span><span class="nx">always</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>  <span class="c1">// doneの代わりにalwaysを使う</span>
  <span class="c1">// 自前APIとmixpanelとGoogle Analyticsへの送信が終わったら遷移させる</span>
  <span class="c1">// ただし、どれか1つでも送信に失敗したら即座に遷移する</span>
  <span class="nb">document</span><span class="p">.</span><span class="nx">location</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">href</span><span class="p">;</span>
<span class="p">});</span>
</pre></div></div>

<h2>
<span id="jquerydeferredの便利さを言葉にする" class="fragment"></span><a href="#jquerydeferred%E3%81%AE%E4%BE%BF%E5%88%A9%E3%81%95%E3%82%92%E8%A8%80%E8%91%89%E3%81%AB%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>jQuery.Deferredの便利さを言葉にする</h2>

<p>さてjQuery.Deferredを使うと、一見複雑な処理を、簡単に書けることがなんとなく分かったと思います。この「なんとなく分かった」jQuery.Deferredの便利さを、きちんと言葉にしてみます。</p>

<h3>
<span id="処理が関数の中に隠蔽される" class="fragment"></span><a href="#%E5%87%A6%E7%90%86%E3%81%8C%E9%96%A2%E6%95%B0%E3%81%AE%E4%B8%AD%E3%81%AB%E9%9A%A0%E8%94%BD%E3%81%95%E3%82%8C%E3%82%8B"><i class="fa fa-link"></i></a>処理が関数の中に隠蔽される</h3>

<p>jQuery.Deferredだから、という訳ではないですが、意識しなくても関数の中に処理がひとまとめにされるので、メンテナンス性が高まると言えます。</p>

<h3>
<span id="インタフェースが統一される" class="fragment"></span><a href="#%E3%82%A4%E3%83%B3%E3%82%BF%E3%83%95%E3%82%A7%E3%83%BC%E3%82%B9%E3%81%8C%E7%B5%B1%E4%B8%80%E3%81%95%E3%82%8C%E3%82%8B"><i class="fa fa-link"></i></a>インタフェースが統一される</h3>

<p>ここまで読んだ人なら分かると思いますが、jQuery.Deferredは「成功」と「失敗」になりうる関数のための統一されたインタフェースを提供してくれます。もちろん非同期処理に使うのが特に便利なわけですが、非同期関数・同期関数問わず同じように扱えることが便利です。</p>

<p>また、いちいちインタフェースを考える手間が省けるので開発速度も向上します。</p>

<h3>
<span id="非同期処理のエラー処理が容易" class="fragment"></span><a href="#%E9%9D%9E%E5%90%8C%E6%9C%9F%E5%87%A6%E7%90%86%E3%81%AE%E3%82%A8%E3%83%A9%E3%83%BC%E5%87%A6%E7%90%86%E3%81%8C%E5%AE%B9%E6%98%93"><i class="fa fa-link"></i></a>非同期処理のエラー処理が容易</h3>

<p>JavaScriptには <code>try〜catch</code> 文がありますが、非同期処理では非常に扱いにくいです。</p>

<div class="code-frame" data-lang="js"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">asyncError</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
  <span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="k">throw</span> <span class="s2">"Error"</span><span class="p">;</span>
  <span class="p">},</span> <span class="mi">0</span><span class="p">);</span>
<span class="p">};</span>

<span class="k">try</span> <span class="p">{</span>
  <span class="nx">asyncError</span><span class="p">();</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// キャッチされない</span>
<span class="p">}</span>
<span class="c1">//=&gt; Uncount Error</span>
</pre></div></div>

<p>非同期関数の中でエラー処理をしようと思ってエラーを <code>throw</code> しても、その非同期関数を <code>try〜catch</code> してもエラーを補足できないのです。仮に正常系と異常系の2つのコールバックを受け付けるようにしたとしても、例えば <code>finally</code> のような機能をもたせるのはなかなか難しいです。</p>

<p>このような場合もDeferredインタフェースなら単に <code>reject</code> すればよく、呼び出し側で <code>finally</code> 的なことをやりたければ <code>always</code> で実現できます。</p>

<h3>
<span id="再利用性が高まる" class="fragment"></span><a href="#%E5%86%8D%E5%88%A9%E7%94%A8%E6%80%A7%E3%81%8C%E9%AB%98%E3%81%BE%E3%82%8B"><i class="fa fa-link"></i></a>再利用性が高まる</h3>

<p>「処理が関数の中に隠蔽」され、「インタフェースが統一」されると再利用性が高まります。</p>

<h2>
<span id="jquerydeferredを使わない方がいい場面" class="fragment"></span><a href="#jquerydeferred%E3%82%92%E4%BD%BF%E3%82%8F%E3%81%AA%E3%81%84%E6%96%B9%E3%81%8C%E3%81%84%E3%81%84%E5%A0%B4%E9%9D%A2"><i class="fa fa-link"></i></a>jQuery.Deferredを使わない方がいい場面</h2>

<p>ここまでベタ褒めしてきたjQuery.Deferredですが、なんでもかんでもDeferred化すればいいというものではないです。非同期関数はとりあえずDeferred化してしまえばいいですが、同期関数は場合によりけり。</p>

<p>じゃあどういう同期関数をDeferred化すべきかといえば、それはDeferred化された非同期関数と同じように扱いたい関数です。具体的には、キャッシュが無ければ非同期にサーバからデータを取ってきて、キャッシュがあったらそれを使う、というような場合、キャッシュからデータを取ってくる処理をDeferred化するとよいでしょう。実装については <a href="http://qiita.com/yuku_t/items/3d1cf51d7ae91305eaaa">JavaScript - jQuery.Deferredを使って楽しい非同期生活を送る方法 - Qiita [キータ]</a> にちょろっと書いてあるので、そちらを参照してください。</p>

<h1>
<span id="おまけ" class="fragment"></span><a href="#%E3%81%8A%E3%81%BE%E3%81%91"><i class="fa fa-link"></i></a>おまけ</h1>

<p>また上司がやってきました。</p>

<p>「MixpanelとGoogle Analyticsは並列でいいが、自前APIは直列にしたい」</p>

<p>Deferred化された今、恐れることは何もありません。</p>

<div class="code-frame" data-lang="js"><div class="highlight"><pre><span></span><span class="nx">dfdAjax</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">$</span><span class="p">.</span><span class="nx">when</span><span class="p">(</span><span class="nx">dfdMixpanel</span><span class="p">(</span><span class="err">…</span><span class="p">),</span> <span class="nx">dfdGa</span><span class="p">(</span><span class="err">…</span><span class="p">));</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="nx">always</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">location</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">href</span><span class="p">;</span>
  <span class="p">});</span>
</pre></div></div>

<p>「あー順番が逆だ、MixpanelとGoogle Analyticsが先で、自前APIが後。」</p>

<div class="code-frame" data-lang="js"><div class="highlight"><pre><span></span><span class="nx">$</span><span class="p">.</span><span class="nx">when</span><span class="p">(</span><span class="nx">dfdMixpanel</span><span class="p">(</span><span class="err">…</span><span class="p">),</span> <span class="nx">dfdGa</span><span class="p">(</span><span class="err">…</span><span class="p">))</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">dfdAjax</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">always</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">location</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">href</span><span class="p">;</span>
  <span class="p">});</span>
</pre></div></div>

<p>「ぐぬぬ…!!」</p>

<p>歯ぎしりする上司を尻目に、今日も華麗に定時退社を決めたのでした。</p>

<p>おわり</p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1" style="height:150px;">
<tr>
	<td rowspan="3">31位</td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="thumb-up-120px.png" /></i>1125</kbd>
		<a target="_blank" href="https://qiita.com/curseoff/items/a9e64ad01d673abb6866">Dockerコマンドメモ</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2014-02-03<br />23:11:04</center>
	</td>
	<td style="width:200px;">
		<!--投稿者-->
		<center>
			@<a href="user/16370.html">curseoff</a>(2件の記事)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/16370/profile-images/1473681840">
		</center>
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[docker]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<!--
		<div style="width:350px;height:150px;overflow:scroll;">%s</div>
		-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>index.docker.ioから指定したイメージを取り込む</p>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>docker pull REPOSITORY<span class="o">[</span>:TAG<span class="o">]</span>
docker image pull REPOSITORY<span class="o">[</span>:TAG<span class="o">]</span>
</pre></div></div>

<p>イメージ一覧を得る</p>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>docker images
docker image list
</pre></div></div>

<p>イメージからコンテナを起動する</p>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>docker run -itd IMAGE
docker container run -itd IMAGE
</pre></div></div>

<p>イメージからコンテナを起動して、接続する。コンテナに名前をつける</p>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>docker run -it IMAGE bash
docker container run -it IMAGE bash

docker run -it --name NAME IMAGE bash
docker container run -it --name NAME IMAGE bash
</pre></div></div>

<p>ホストの/var/wwwを、コンテナ内の/var/htmlからアクセスできるように共有する</p>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>docker run -it -v /var/www:/var/html IMAGE bash
docker container run -it -v /var/www:/var/html IMAGE bash
</pre></div></div>

<p>ホスト8080番portへの通信をコンテナ80番portへ転送する</p>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>docker run -it -p <span class="m">8080</span>:80 IMAGE bash
docker container run -it -p <span class="m">8080</span>:80 IMAGE bash
</pre></div></div>

<p>ゲストのPRIVATE_PORTに指定したPortがホストのどのPortにポートフォワードしてるかを調べる</p>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>docker port CONTAINER
docker container port CONTAINER

docker port CONTAINER PRIVATE_PORT
docker container port CONTAINER PRIVATE_PORT
</pre></div></div>

<p>イメージからコンテナを作る</p>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>docker create IMAGE
docker container create IMAGE


docker create IMAGE
docker container create --name NAME IMAGE
</pre></div></div>

<p>コンテナを起動する</p>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>docker start CONTAINER
docker container start CONTAINER
</pre></div></div>

<p>コンテナを停止する</p>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>docker stop CONTAINER
docker container stop CONTAINER
</pre></div></div>

<p>コンテナを再起動する</p>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>docker restart CONTAINER
docker container restart CONTAINER
</pre></div></div>

<p>コンテナを削除する</p>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>docker rm CONTAINER <span class="o">[</span>CONTAINER...<span class="o">]</span>
docker CONTAINER rm CONTAINER <span class="o">[</span>CONTAINER...<span class="o">]</span>
</pre></div></div>

<p>コンテナをすべて削除する</p>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>docker rm <span class="k">$(</span>docker ps -aq<span class="k">)</span>
</pre></div></div>

<p>イメージを削除する</p>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>docker rmi IMAGE <span class="o">[</span>IMAGE...<span class="o">]</span>
</pre></div></div>

<p>タグなしのイメージをすべて削除する</p>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>docker rmi <span class="k">$(</span>docker images <span class="p">|</span> grep <span class="s1">'&lt;none&gt;'</span> <span class="p">|</span> awk <span class="s1">'{print$3}'</span><span class="k">)</span>
</pre></div></div>

<p>起動しているコンテナに接続する</p>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span><span class="c1"># exitするとコンテナが終了してしまう</span>
<span class="c1"># コンテナを終了せずに抜ける「Ctrl + p, Ctrl + q」</span>
docker attach CONTAINER

<span class="c1"># exitしてもコンテナは終了しない</span>
docker <span class="nb">exec</span> -it CONTAINER /bin/bash
</pre></div></div>

<p>リポジトリにタグを貼る（:TAGを省略すると、latestになる）</p>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>docker tag IMAGE REPOSITORY<span class="o">[</span>:TAG<span class="o">]</span>
</pre></div></div>

<p>./にあるDockerfileをビルドして、イメージを作成する</p>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>docker build  ./
docker build -t REPOSITORY<span class="o">[</span>:TAG<span class="o">]</span> ./
</pre></div></div>

<p>ビルドを最初からやりなおす</p>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>docker build --no-cache .
</pre></div></div>

<p>起動中のコンテナ一覧を得る</p>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>docker ps
docker container list
</pre></div></div>

<p>停止中のコンテナも含めすべての一覧を得る</p>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>docker ps -a
docker container list -a
</pre></div></div>

<p>コンテナのハッシュリストを得る</p>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>docker ps -aq
docker container list -aq
</pre></div></div>

<p>index.docker.ioからイメージを検索する</p>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>docker search TERM
</pre></div></div>

<p>イメージをビルドした際のコマンドリストを得る。Dockerfileに記述したもののみ</p>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>docker <span class="nb">history</span> IMAGE
</pre></div></div>

<p>イメージをファイル出力する</p>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>docker save IMAGE &gt; filename.tar
</pre></div></div>

<p>ファイルをイメージとして取り込む</p>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>docker load &lt; filename.tar
</pre></div></div>

<p>コンテナをファイル出力する</p>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>docker <span class="nb">export</span> CONTAINER &gt; filename.tar
</pre></div></div>

<p>コンテナからイメージを作成する</p>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>docker commit CONTAINER REPOSITORY<span class="o">[</span>:TAG<span class="o">]</span>
</pre></div></div>

<p>URLを指定してイメージを取り込む</p>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>docker import url REPOSITORY<span class="o">[</span>:TAG<span class="o">]</span>
</pre></div></div>

<p>ファイルからイメージを取り込む</p>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>cat filename.tar <span class="p">|</span> docker import - REPOSITORY<span class="o">[</span>:TAG<span class="o">]</span>
</pre></div></div>

<p>コンテナの標準出力を見る</p>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>docker logs CONTAINER
</pre></div></div>

<p>コンテナ内のファイルをホストにコピーする</p>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>docker cp CONTAINER:filename ./
</pre></div></div>

<p>イメージがコンテナ化されてから変更されたファイル差分を得る</p>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>docker diff CONTAINER
</pre></div></div>

<p>URLのファイルをイメージ内のPATHに生成する</p>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>docker insert IMAGE URL PATH
</pre></div></div>

<p>コンテナの実行中のプロセス一覧を見る</p>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>docker top CONTAINER
</pre></div></div>

<p>dockerの現在インストールしているバージョンと最新のバージョンを得る</p>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>docker version
</pre></div></div>

<p>コンテナ内のイベントを監視する（コンテナが作られた、起動した、停止したなど)</p>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>docker events
</pre></div></div>

<p>コンテナの詳細な情報を得る。formatオプションで情報の絞り込みができる</p>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>docker inspect CONTAINER
docker inspect  --format<span class="o">=</span><span class="s2">"{{.NetworkSettings.IPAddress}}"</span> CONTAINER
</pre></div></div>

<p>コンテナ内でコマンドを実行する</p>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>docker <span class="nb">exec</span> CONTAINER コマンド
</pre></div></div>

<p>コンテナ内でコマンドを対話式に実行する</p>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>docker <span class="nb">exec</span> -it CONTAINER コマンド
</pre></div></div>
</div>
	</td>
</tr>
</table>
<br />
<table border="1" style="height:150px;">
<tr>
	<td rowspan="3">32位</td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="thumb-up-120px.png" /></i>1110</kbd>
		<a target="_blank" href="https://qiita.com/shu223/items/a895a989e84219e5302e">iOSアプリ開発に役立つTips100連発！</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2012-08-10<br />00:51:51</center>
	</td>
	<td style="width:200px;">
		<!--投稿者-->
		<center>
			@<a href="user/3180.html">shu223</a>(171件の記事)<br />(Freelancer 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/3180/profile-images/1473682733">
		</center>
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Objective-C]</b> <b>[OSX]</b> <b>[Xcode]</b> <b>[iOS]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<!--
		<div style="width:350px;height:150px;overflow:scroll;">%s</div>
		-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>１年半ほどコツコツと書きためてきた iOS アプリ開発 / Objective-C 関連の Tips をカテゴリ別にまとめてみました。</p>

<p>数が多いので、オススメのものを太字にしてあります。</p>

<p>（更新情報 2012.8.11）ちゃんと数えてみたら88個しかなかったので、20個ほど追加しました。</p>

<p>（追記 2013.10.1） <strong>本記事をきっかけに秀和システム社よりお声がけいただき、書籍を執筆</strong> させていただきました。iOS開発に役立つTips集です。ぜひ下記ページより <strong>目次を見ていただき、興味のある項目がありそうであれば</strong> ご購入いただけるととても嬉しいです。</p>

<p><a href="http://d.hatena.ne.jp/shu223/20130528/1369714635" rel="nofollow noopener" target="_blank">『iOSアプリ開発 達人のレシピ100』という本を書きました</a></p>

<p><a href="http://d.hatena.ne.jp/shu223/20130528/1369714635" rel="nofollow noopener" target="_blank"><img src="https://camo.qiitausercontent.com/8662d383c92d8396f98770f1c7b5ca1b71bc52bc/687474703a2f2f7370686f746f732d662e616b2e666263646e2e6e65742f6870686f746f732d616b2d617368332f363236335f3634303433393439353938343832305f313130373937333136395f6e2e6a7067" width="400" data-canonical-src="http://sphotos-f.ak.fbcdn.net/hphotos-ak-ash3/6263_640439495984820_1107973169_n.jpg"></a></p>

<h2>
<span id="ライブラリフレームワーク" class="fragment"></span><a href="#%E3%83%A9%E3%82%A4%E3%83%96%E3%83%A9%E3%83%AA%E3%83%95%E3%83%AC%E3%83%BC%E3%83%A0%E3%83%AF%E3%83%BC%E3%82%AF"><i class="fa fa-link"></i></a>ライブラリ／フレームワーク</h2>

<ul>
<li>
<p><strong><a href="http://d.hatena.ne.jp/shu223/20120806/1344151527" rel="nofollow noopener" target="_blank">ゲームアプリ向け UI コンポーネントセット "UIKitForGame"</a></strong></p>

<p>ゲームアプリをつくる際に便利な UIKit のカテゴリ／サブクラスの詰め合わせライブラリ</p>
</li>
<li>
<p><strong><a href="http://d.hatena.ne.jp/shu223/20120721/1342858736" rel="nofollow noopener" target="_blank">vImageのススメ</a></strong></p>

<p>iOS 5 から追加された高速画像処理ライブラリ、vImage の紹介と、サンプルコードの解説</p>
</li>
<li>
<p><strong><a href="http://d.hatena.ne.jp/shu223/20110428/1303930059" rel="nofollow noopener" target="_blank">アプリのメモリ使用量をリアルタイムに表示するクラスを公開しました</a></strong></p>

<p>メモリ消費量やUIViewの数など、「負荷を示すパラメータ」をリアルタイム表示するライブラリ</p>
</li>
<li><p><strong><a href="http://d.hatena.ne.jp/shu223/20120327/1332862169" rel="nofollow noopener" target="_blank">NSUserDefaults に保存する際に自動的に iCloud にも保存してくれるライブラリ "MKiCloudSync"</a></strong></p></li>
<li><p><strong><a href="http://d.hatena.ne.jp/shu223/20111117/1321496682" rel="nofollow noopener" target="_blank">CIFilter の効果を一通り試せるサンプルコード（フィルタ名一覧つき）</a></strong></p></li>
<li>
<p><strong><a href="http://d.hatena.ne.jp/shu223/20110227/1299368179" rel="nofollow noopener" target="_blank">iOS SDK用音声認識機能ライブラリVocalKitの使い方</a></strong></p>

<p>iPhone SDKで利用できる音声認識ライブラリ</p>
</li>
<li><p><strong><a href="http://d.hatena.ne.jp/shu223/20110201/1296564673" rel="nofollow noopener" target="_blank">iPhone用グラフ描画ライブラリ s7graphview の使い方</a></strong></p></li>
<li><p><strong><a href="http://gihyo.jp/dev/serial/01/ios_oss/0001" rel="nofollow noopener" target="_blank">様々なアニメーションを実現するiOSアプリ用トゥイーンライブラリ3種を比較！</a></strong></p></li>
<li><p><strong><a href="http://gihyo.jp/dev/serial/01/ios_oss/0002" rel="nofollow noopener" target="_blank">アプリ内でログを閲覧するためのライブラリ iConsole</a></strong></p></li>
<li><p><strong><a href="http://gihyo.jp/dev/serial/01/ios_oss/0003" rel="nofollow noopener" target="_blank">実装の面倒な部分をうまくラップしてくれている便利カテゴリ3選</a></strong><br>
UIImageに各種画像処理機能を持たせるNYXImagesKit<br>
面倒なデリゲート処理を Blocks で記述できるカテゴリ<br>
英単語の単数形／複数形変換をメソッド1つで行えるようにするNSStringのカテゴリ</p></li>
<li><p><strong><a href="http://gihyo.jp/dev/serial/01/ios_oss/0004" rel="nofollow noopener" target="_blank">UILabelでのテキスト表示をリッチにする機能拡張サブクラス3種</a></strong></p></li>
<li><p><strong><a href="http://gihyo.jp/dev/serial/01/ios_oss/0005" rel="nofollow noopener" target="_blank">グラデーション描画や色のアニメーションの実装を簡単にする色処理関連の便利OSS3選</a></strong><br>
グラデーション描画のヘルパークラスLBGradient<br>
2つのUIColorの間でクロスフェードさせるUIColorのカテゴリ<br>
色の重ね合わせやCSSカラー名での色の指定ができるようになるUIColorのカテゴリ</p></li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20120629/1340731114" rel="nofollow noopener" target="_blank">Path や Facebook ライクなスライドメニューを実現するライブラリ "IIViewDeckController"</a></p></li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20120627/1340718674" rel="nofollow noopener" target="_blank">スクロール付きタブバー "InfiniTabBar"</a></p></li>
</ul>

<h2>
<span id="sns連携" class="fragment"></span><a href="#sns%E9%80%A3%E6%90%BA"><i class="fa fa-link"></i></a>SNS連携</h2>

<ul>
<li><p><a href="http://d.hatena.ne.jp/shu223/20120712/1342102850" rel="nofollow noopener" target="_blank">Facebook SDK 3.0 for iOS のサンプルを一通り試してみました</a></p></li>
<li><p><strong><a href="http://d.hatena.ne.jp/shu223/20120305/1330966788" rel="nofollow noopener" target="_blank">Twitter や Facebook への投稿ライブラリ ShareKit の Tips</a></strong></p></li>
<li><p><strong><a href="http://d.hatena.ne.jp/shu223/20110223/1298415231" rel="nofollow noopener" target="_blank">カメラアプリにFacebookへの写真投稿機能をつける</a></strong></p></li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20110314/1300018597" rel="nofollow noopener" target="_blank">Facebook iOS SDK を使用して近況の投稿やプロフィール取得を実装する</a></p></li>
</ul>

<h2>
<span id="デバッグ関連" class="fragment"></span><a href="#%E3%83%87%E3%83%90%E3%83%83%E3%82%B0%E9%96%A2%E9%80%A3"><i class="fa fa-link"></i></a>デバッグ関連</h2>

<ul>
<li>
<p><strong><a href="http://d.hatena.ne.jp/shu223/20120317/1331914823" rel="nofollow noopener" target="_blank">ログ出力用マクロ</a></strong></p>

<p>クラス名、メソッド名、コード内の何行目か、を出力するマクロ</p>
</li>
<li>
<p><strong><a href="http://d.hatena.ne.jp/shu223/20120316/1331819831" rel="nofollow noopener" target="_blank">クラッシュイベントを受け取る</a></strong></p>

<p>TestFlight SDK のように、クラッシュイベントを受け取って Stack Trace をレポートするしくみの実装方法</p>
</li>
<li>
<p><a href="http://d.hatena.ne.jp/shu223/20110504/1304500466" rel="nofollow noopener" target="_blank">バッテリー消費量の計測方法など、iOSのデバッグに関するドキュメント</a></p>

<p>iOS Debugging Magic を読んで勉強になったことのメモ。</p>
</li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20110502/1304333582" rel="nofollow noopener" target="_blank">Instruments の Leaks の見方（Live Bytes や Living の意味）</a></p></li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20110427/1303921157" rel="nofollow noopener" target="_blank">iPhone の空きメモリ量や使用中のメモリ量を取得する</a></p></li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20111102/1321492522" rel="nofollow noopener" target="_blank">KVC で setValue:forUndefinedKey: エラーが発生する場合の対処法</a></p></li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20110217/1298826921" rel="nofollow noopener" target="_blank">アップロード時に An error occurred uploading to the iTunes Store エラーが出た場合の対処方法</a></p></li>
</ul>

<h2>
<span id="xcode" class="fragment"></span><a href="#xcode"><i class="fa fa-link"></i></a>XCode</h2>

<ul>
<li><p><strong><a href="http://d.hatena.ne.jp/shu223/20120804/1344155002" rel="nofollow noopener" target="_blank">$(SRCROOT) や $(BUILD_DIR) 等の Xcode で使用しているマクロの置換内容の一覧を調べる方法</a></strong></p></li>
<li><p><strong><a href="http://d.hatena.ne.jp/shu223/20110318/1300390974" rel="nofollow noopener" target="_blank">Xcode 4 に自作ファイルテンプレートを追加する</a></strong></p></li>
<li>
<p><strong><a href="http://d.hatena.ne.jp/shu223/20111229/1325141509" rel="nofollow noopener" target="_blank">ARC の有効／無効をファイルごとに設定する方法</a></strong></p>

<p>プロジェクト全体でARCを有効にした状態で、一部ファイルを「まとめて」無効にする方法など。</p>
</li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20120725/1344152423" rel="nofollow noopener" target="_blank">Beta 版の Xcode で開いたプロジェクトが現行 Xcode で起動しなくなった場合の対処法</a></p></li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20120724/1344145314" rel="nofollow noopener" target="_blank">ひとつのプロジェクトで複数の Bundle identifier を使い分ける方法</a></p></li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20110426/1304694650" rel="nofollow noopener" target="_blank">ビルド設定の "Other Linker Flags" に "-ObjC" を設定する意味</a></p></li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20110315/1300403884" rel="nofollow noopener" target="_blank">Xcode 4 の Code Snippet Library にスニペットを追加する</a></p></li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20110328/1301713208" rel="nofollow noopener" target="_blank">Xcode 4 でのプロジェクトテンプレート作成手順</a></p></li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20110414/1302751793" rel="nofollow noopener" target="_blank">２つの Xcode 4 プロジェクトのビルド設定を比較する</a></p></li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20110530/1307258057" rel="nofollow noopener" target="_blank">LLVM GCC と LLVM Compiler 2.0 とどっちがいいのか？</a></p></li>
</ul>

<h2>
<span id="ui関連" class="fragment"></span><a href="#ui%E9%96%A2%E9%80%A3"><i class="fa fa-link"></i></a>UI関連</h2>

<ul>
<li>
<p><strong><a href="http://d.hatena.ne.jp/shu223/20110531/1307300906" rel="nofollow noopener" target="_blank">リファクタリング講座メモ</a></strong></p>

<p>「リファクタリング講座」で勉強になったことのメモ。breakpointの右クリックエディットの話、xibファイルの話、クラスエクステンション、LLVMなどなど</p>
</li>
<li>
<p><strong><a href="http://d.hatena.ne.jp/shu223/20110417/1303138458" rel="nofollow noopener" target="_blank">スクリーンショットを撮る</a></strong></p>

<p>スクリーンショットをとって UIImage で返してくれるメソッド</p>
</li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20120722/1343061397" rel="nofollow noopener" target="_blank">UIWebView からアプリ内に入れたカスタムフォントを使う</a></p></li>
<li>
<p><strong><a href="http://d.hatena.ne.jp/shu223/20120209/1328793577" rel="nofollow noopener" target="_blank">放物線状にアニメーションさせる</a></strong></p>

<p>ジャンプに見立て、始点(startPos)と終点(targetPos)と高さ(height)を指定するように CAKeyframeAnimation をラップしたスニペット</p>
</li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20120401/1334019533" rel="nofollow noopener" target="_blank">クロスディゾルブで画面遷移</a></p></li>
<li>
<p><a href="http://d.hatena.ne.jp/shu223/20110604/1307890173" rel="nofollow noopener" target="_blank">UIFont の fontName 一覧</a></p>

<p>UIFont の fontWithName:size: メソッドに渡す fontName の一覧。</p>
</li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20110516/1305550835" rel="nofollow noopener" target="_blank">BMPファイルのカラーパレットを書き換える</a></p></li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20110403/1304235112" rel="nofollow noopener" target="_blank">UITableViewController のreloadDataをコールするタイミング</a></p></li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20110321/1301709440" rel="nofollow noopener" target="_blank">UINavigationBar に UISegmentControlを置く</a></p></li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20110316/1300375000" rel="nofollow noopener" target="_blank">UIPopoverControllerをiPhoneで使う</a></p></li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20110222/1299431262" rel="nofollow noopener" target="_blank">UITextFieldへの入力時にキーボードではなくUIPickerViewを出す方法</a></p></li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20110221/1299439884" rel="nofollow noopener" target="_blank">nibファイルの読み込みパフォーマンスを改善するUINibクラス</a></p></li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20110218/1298226268" rel="nofollow noopener" target="_blank">UITextViewのheight調整</a></p></li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20110208/1299336956" rel="nofollow noopener" target="_blank">iPhoneアプリの起動アニメーションの実装方法</a></p></li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20110207/1299335775" rel="nofollow noopener" target="_blank">アプリアップデート後の初回起動時にUIAlertViewでお知らせを表示する方法</a></p></li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20110206/1296942353" rel="nofollow noopener" target="_blank">入門本から得たTipsなど</a></p></li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20110204/1299333570" rel="nofollow noopener" target="_blank">UIAlertViewを左寄せにする</a></p></li>
</ul>

<h2>
<span id="foundation" class="fragment"></span><a href="#foundation"><i class="fa fa-link"></i></a>Foundation</h2>

<ul>
<li><p><a href="http://d.hatena.ne.jp/shu223/20110509/1304952981" rel="nofollow noopener" target="_blank">構造体を NSDictionary や NSArray に格納する方法</a></p></li>
<li>
<p><a href="http://d.hatena.ne.jp/shu223/20111101/1321307235" rel="nofollow noopener" target="_blank">NSUserDefaults の内容を一括消去する方法</a></p>

<p>開発時の動作確認用リセット（初期化）ボタン等に</p>
</li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20111002/1330232118" rel="nofollow noopener" target="_blank">NSUserDefaults に保存されている全てのキーと値の一覧を取得する</a></p></li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20110304/1300983192" rel="nofollow noopener" target="_blank">NSFileManagerによるファイル・ディレクトリ操作</a></p></li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20110219/1299330910" rel="nofollow noopener" target="_blank">NSStringの全角／半角バリデーションチェック</a></p></li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20110311/1300983799" rel="nofollow noopener" target="_blank">NSLogのフォーマット指定子一覧</a></p></li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20110308/1300397404" rel="nofollow noopener" target="_blank">NSAssertの使いどころ</a></p></li>
</ul>

<h2>
<span id="アプリ内課金--広告" class="fragment"></span><a href="#%E3%82%A2%E3%83%97%E3%83%AA%E5%86%85%E8%AA%B2%E9%87%91--%E5%BA%83%E5%91%8A"><i class="fa fa-link"></i></a>アプリ内課金 / 広告</h2>

<ul>
<li><p><strong><a href="http://d.hatena.ne.jp/shu223/20120723/1343060671" rel="nofollow noopener" target="_blank">In-App Purchase の脆弱性への対応方法</a></strong></p></li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20120204/1328941106" rel="nofollow noopener" target="_blank">In-App Purchase の Status が "Developer Action Needed" な場合の対処方法</a></p></li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20120114/1327794728" rel="nofollow noopener" target="_blank">In-App Purchase で、プロダクトID が invalid になる場合の対処方法</a></p></li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20120107/1327782618" rel="nofollow noopener" target="_blank">In-App Purchase のステータスが "Ready to Submit" な場合の対処法</a></p></li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20110324/1300985815" rel="nofollow noopener" target="_blank">新しいAdMob SDK（Google AdMob Ads SDK for iOS）での広告設置方法</a></p></li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20110503/1304488825" rel="nofollow noopener" target="_blank">AdMobの入金タイミング</a></p></li>
</ul>

<h2>
<span id="位置情報関連" class="fragment"></span><a href="#%E4%BD%8D%E7%BD%AE%E6%83%85%E5%A0%B1%E9%96%A2%E9%80%A3"><i class="fa fa-link"></i></a>位置情報関連</h2>

<ul>
<li>
<p><strong><a href="http://d.hatena.ne.jp/shu223/20110220/1298223410" rel="nofollow noopener" target="_blank">すれ違い通信アプリ開発で得たBluetoothの知見まとめ</a></strong></p>

<p>すれ違い通信アプリ『EncountMe』の開発を通して得たiPhoneのBluetoothまわりの諸々について</p>
</li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20120506/1336283901" rel="nofollow noopener" target="_blank">iOS 5.0 より追加された CLGeocoder を使用して逆ジオコーディング</a></p></li>
<li><p><strong><a href="http://d.hatena.ne.jp/shu223/20110528/1306564167" rel="nofollow noopener" target="_blank">Objective-C版GeoHexを試してみました</a></strong></p></li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20111001/1321305649" rel="nofollow noopener" target="_blank">位置情報のOn/Off、許可/不許可を確認する</a></p></li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20110710/1311627118" rel="nofollow noopener" target="_blank">位置情報サービス利用の際のバッテリー電力節約のためのヒント</a></p></li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20110506/1307312369" rel="nofollow noopener" target="_blank">MKAnnotationViewのコールアウトをカスタマイズする</a></p></li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20110406/1302028258" rel="nofollow noopener" target="_blank">CLLocationCoordinate2D から指定方向に指定距離離れた場所の緯度経度を計算する</a></p></li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20110325/1301709495" rel="nofollow noopener" target="_blank">MKMapViewのピンをタッチせずにコールアウトを出す</a></p></li>
</ul>

<h2>
<span id="unity--cocos2d--titanium" class="fragment"></span><a href="#unity--cocos2d--titanium"><i class="fa fa-link"></i></a>Unity / cocos2d / Titanium</h2>

<ul>
<li>
<p><a href="http://d.hatena.ne.jp/shu223/20120614/1339777051" rel="nofollow noopener" target="_blank">NGUIの使い方に関する記事まとめ</a></p>

<p>iOS SDK の UIKit に用意されているような UI を Unity で実装できるプラグイン</p>
</li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20110702/1310314681" rel="nofollow noopener" target="_blank">Unity での Bundle Identifier の設定方法</a></p></li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20110421/1303343800" rel="nofollow noopener" target="_blank">cocos2d を使用したゲームアプリのソースコード集</a></p></li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20110430/1304147261" rel="nofollow noopener" target="_blank">Titanium開発情報（日本語）を集めてみました</a></p></li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20110705/1310403782" rel="nofollow noopener" target="_blank">MonoDevelopの文字化け対策最終手段</a></p></li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20110415/1302792358" rel="nofollow noopener" target="_blank">cocos2dでの3Dアプリケーションの開発を可能とするエクステンション「cocos3d」</a></p></li>
<li><p><strong><a href="http://d.hatena.ne.jp/shu223/20110329/1301396786" rel="nofollow noopener" target="_blank">cocos2d のトランジションエフェクトのラッパークラスを公開しました</a></strong></p></li>
</ul>

<h2>
<span id="その他" class="fragment"></span><a href="#%E3%81%9D%E3%81%AE%E4%BB%96"><i class="fa fa-link"></i></a>その他</h2>

<ul>
<li><p><strong><a href="http://d.hatena.ne.jp/shu223/20110224/1299430528" rel="nofollow noopener" target="_blank">デバイスにインストールされているアプリ一覧を取得する</a></strong></p></li>
<li>
<p><a href="http://d.hatena.ne.jp/shu223/20120312/1331565988" rel="nofollow noopener" target="_blank">ARC 有効/無効に両対応させたい場合に便利なマクロ</a></p>

<p>__has_feature(objc_arc)で処理を書き分けるのが面倒な場合に便利なマクロ</p>
</li>
<li><p><strong><a href="http://d.hatena.ne.jp/shu223/20120226/1330231240" rel="nofollow noopener" target="_blank">オブジェクトが持つプロパティの型と名前のリストを取得する</a></strong></p></li>
<li>
<p><strong><a href="http://d.hatena.ne.jp/shu223/20120117/1326822089" rel="nofollow noopener" target="_blank">iOS Advent Calender 2011 で勉強になったことメモ</a></strong></p>

<p>CocoaPods の話、Cocoa Controls の話、DTrace でのデバッグの話、appCode という IDE の話、、などなど</p>
</li>
<li>
<p><strong><a href="http://d.hatena.ne.jp/shu223/20120210/1328878654" rel="nofollow noopener" target="_blank">NSNotification, NSNotificationCenter によるオブジェクト間通知のパフォーマンス</a></strong></p>

<p>NSNotification, NSNotificationCenter を用いたオブジェクト間連携は使いやすいのでついつい多用してしまうのですが、具体的に内部でどのような処理が行われていて、パフォーマンス面での影響はどのくらいなんだろう、ということをイメージできずにいたので、Appleのドキュメントで調べてみました</p>
</li>
<li>
<p><strong><a href="http://d.hatena.ne.jp/shu223/20110827/1314520691" rel="nofollow noopener" target="_blank">パフォーマンスチューニングに関するアップルのドキュメント</a></strong></p>

<p>アップルの『iOSアプリケーションプログラミングガイド（英語版）』にある、『パフォーマンスと応答性のチューニング』という章のためになった部分の紹介</p>
</li>
<li><p><strong><a href="http://d.hatena.ne.jp/shu223/20110418/1303137062" rel="nofollow noopener" target="_blank">Assets Library からの読み込みを高速化するための試行錯誤</a></strong></p></li>
<li>
<p><strong><a href="http://d.hatena.ne.jp/shu223/20110511/1305129443" rel="nofollow noopener" target="_blank">csvファイルからplistを生成するPHPスクリプト</a></strong></p>

<p>エクセルとかGoogle docsで編集されたデータをplistファイルとしてアプリに持たせたい、といった場合用の、csvファイルからplistファイルへの変換スクリプト</p>
</li>
<li>
<p><strong><a href="http://d.hatena.ne.jp/shu223/20110828/1314516533" rel="nofollow noopener" target="_blank">Push Notification おさらい</a></strong></p>

<p>プッシュ通知を実装するときに、「バックグラウンドで通知受けたときはapplication:didFinishLaunchingWithOptions:とapplication:didReceiveRemoteNotification:、どっちが呼ばれるんだっけ？」とかなんだかいつも自信なくなってきてドキュメントを見返したりしてしまうので、ドキュメントと、実際の動作を確認した内容をまとめました。</p>
</li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20110518/1305738227" rel="nofollow noopener" target="_blank">otoolでバイナリの内容をいろいろと調べる方法</a></p></li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20111119/1321586312" rel="nofollow noopener" target="_blank">mecab での形態素解析を試してみました</a></p></li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20110301/1299904208" rel="nofollow noopener" target="_blank">音声録音の実装方法</a></p></li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20110401/1303917228" rel="nofollow noopener" target="_blank">プロセス情報を取得する</a><br>
NSProcessInfo というクラスを使ってプロセス情報をいろいろと取得する方法</p></li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20120121/1327117228" rel="nofollow noopener" target="_blank">AppStoreに並ぶ最終的なバイナリサイズを計測する方法</a></p></li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20110425/1304953175" rel="nofollow noopener" target="_blank">大量の画像ファイルを圧縮したzipファイルをiPhoneで解凍するのに要する時間</a></p></li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20110423/1307314926" rel="nofollow noopener" target="_blank">バックグラウンドのアプリが殺される優先度</a></p></li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20110826/1314519637" rel="nofollow noopener" target="_blank">Objective-Cの.gitignoreテンプレート</a></p></li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20110601/1307559462" rel="nofollow noopener" target="_blank">iOSアップデート中に"This device isn't eligible for the requested build"エラーが出る場合の対処</a></p></li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20110527/1306770936" rel="nofollow noopener" target="_blank">コードスニペットまとめサイト</a></p></li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20110330/1301713140" rel="nofollow noopener" target="_blank">ボタンやアイコンなどの素材管理ツール</a></p></li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20110404/1304692649" rel="nofollow noopener" target="_blank">初回起動の判定方法</a></p></li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20110216/1299441142" rel="nofollow noopener" target="_blank">寄稿を受け付けているアプリ紹介ブログ／サイトリスト</a></p></li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20110407/1304693658" rel="nofollow noopener" target="_blank">ユーザー登録なしでユーザーを識別するベストプラクティス</a></p></li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20110215/1299431099" rel="nofollow noopener" target="_blank">iPhoneバイブの制御</a></p></li>
<li><p><a href="http://d.hatena.ne.jp/nns/20100123/1264202050" rel="nofollow noopener" target="_blank">iPhoneアプリ開発（iPhone SDK）の解説本、一挙14冊レビュー</a></p></li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20120315/1331819111" rel="nofollow noopener" target="_blank">GKLeaderboard でどのようなスコアデータの絞り込みができるか</a></p></li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20110317/1300380674" rel="nofollow noopener" target="_blank">GameCenterでどこまでサーバーサイド機能を代替できるか</a></p></li>
<li><p><strong><a href="http://d.hatena.ne.jp/shu223/20110131/1296408051" rel="nofollow noopener" target="_blank">Game Center のリーダーボード（スコアランキング）対応アプリの作り方</a></strong></p></li>
</ul>
</div>
	</td>
</tr>
</table>
<br />
<table border="1" style="height:150px;">
<tr>
	<td rowspan="3">33位</td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="thumb-up-120px.png" /></i>1096</kbd>
		<a target="_blank" href="https://qiita.com/hirokidaichi/items/0de5ca336de862cc91bd">MVCの流れを簡単にまとめてみる</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2014-01-14<br />23:41:33</center>
	</td>
	<td style="width:200px;">
		<!--投稿者-->
		<center>
			@<a href="user/35671.html">hirokidaichi</a>(33件の記事)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/35671/profile-images/1473686806">
		</center>
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Silverlight]</b> <b>[AngularJS]</b> <b>[knockoutjs]</b> <b>[DDD]</b> <b>[MVVM]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<!--
		<div style="width:350px;height:150px;overflow:scroll;">%s</div>
		-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p><a href="https://camo.qiitausercontent.com/0640a966e047d903b9f788436a34b996fb142d68/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f33353637312f65653363353436382d373134362d623937302d343033352d3936336230303765383062652e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/0640a966e047d903b9f788436a34b996fb142d68/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f33353637312f65653363353436382d373134362d623937302d343033352d3936336230303765383062652e706e67" alt="kobito.1389710043.312112.png" title="kobito.1389710043.312112.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/35671/ee3c5468-7146-b970-4035-963b007e80be.png"></a></p>

<p>理解しやすいように適当に遮ったり、言い切ってしまったところもあるがご容赦いただきたい。</p>

<h1>
<span id="mvcの登場" class="fragment"></span><a href="#mvc%E3%81%AE%E7%99%BB%E5%A0%B4"><i class="fa fa-link"></i></a>MVCの登場</h1>

<p>MVCは、SmalltalkのGUIライブラリのモデルとして登場した。 <br>
これはGUIアプリケーションを記述する際に、適切なモデル化を進めるのにとてもいい考え方だと思われていたし、実際にそうだった。 </p>

<p>これはアーキテクチャパターンとして、それぞれがどのように依存するべきか、どこにコードを書くべきかということを端的に表している。 </p>

<p>安定依存の原則というものがある。これは、要件が安定しているモジュールに依存し、要件が変動しやすいモジュールには依存しないようにするという原則だ。MVCアーキテクチャでは、GUIアプリケーションの安定関係をModel &gt; View &gt; Controllerの順でとらえている。データ処理や業務要件というのは安定しており、UIパーツもまた比較的安定している。それらを統合してアプリケーションとしてくみ上げる部分が一番安定していないというようにとらえた。 </p>

<p>なので、ModelはViewやControllerから依存されるが、Controllerは依存されない。その他の関係はイベントのように抽象度が高いものを使っている。 </p>

<p>実際にはもう少し粒度の細かいデザインパターンの集合として記述されることが多い。その代表例がイベントを抽象化するObserverパターンや、インタフェースを集約するFacadeパターンだ。 </p>

<p>このモデルは現在に至るまで長いこと支持されている。もしかしたら金科玉条のように宗教的な信仰を受けているといっても言い過ぎじゃないかもしれない。 </p>

<p>今日は、MVCが最近どのように変化しているかという話をしたい。 </p>

<h1>
<span id="document-viewモデル" class="fragment"></span><a href="#document-view%E3%83%A2%E3%83%87%E3%83%AB"><i class="fa fa-link"></i></a>Document-Viewモデル</h1>

<p>MVCをもとに実際にアプリケーションを書いていくと、UIとコントローラには実際的には依存関係が強いことが多い。結局のところ１つのUIのために１つのControllerというように１：１の関係があった。 </p>

<p>そこで、１つの割り切りとしてMFC（WindowsのC++ GUIフレームワーク）ではDocument-ViewモデルというM+VCというModel層とイベントを内包したUI部品という形を採用した。 <br>
これはイベント駆動のUIと切り離されたスレッドを持つ状態を共存させるのにいい考えだった。 </p>

<h1>
<span id="ドメインモデル貧血症" class="fragment"></span><a href="#%E3%83%89%E3%83%A1%E3%82%A4%E3%83%B3%E3%83%A2%E3%83%87%E3%83%AB%E8%B2%A7%E8%A1%80%E7%97%87"><i class="fa fa-link"></i></a>ドメインモデル貧血症</h1>

<p>一方で、MVCでの開発にはやっかいな現象が起き始めた。ドメインモデル貧血症である。 <br>
<a href="http://en.wikipedia.org/wiki/Anemic_domain_model" class="autolink" rel="nofollow noopener" target="_blank">http://en.wikipedia.org/wiki/Anemic_domain_model</a> <br>
これは、要件追加が主に安定しないViewに近い部分から発生するために起こりやすい現象で、あるフィーチャーを開発する際にデータ処理をモデリングできず、Controller層で直接データベースを触って、必要なトランザクションまで記述してしまうというために起きた。そのためデータ処理の完全性を保証することが難しくなったり、テストの難しいコードとなってしまいバグの増加を招いた。 </p>

<p>ドメインモデルは、業務上のロジックをすべてモデルとして隠蔽することが望まれていたが、追加要件に対してもろいことが多かった。 </p>

<p>これは同時にO/Rマッパーの普及によるところも大きい。O/Rマッパーはデータベース処理をObject指向のライブラリに隠蔽することができるが、ドメインモデルの設計を助ける訳ではない。複数のデータベースにまたがるドメインモデルも存在するし、それがDBである必要性も本来的には無いのだから当然のことだ。 </p>

<p>O/Rマッパーも複雑な要件に耐えるため、ActiveRecordというデータベース上のRowとDomainModel上のEntityを一致させる簡易的なものからDataMapperというデータベース処理をEntityにマッピングさせるというタイプのフレームワークなどを提供するようになってきた。 </p>

<p>ライブラリの普及だけではなく、デザインパターンに関してもDDD（Domain Driven Design）と呼ばれるドメインモデルの分析から入る設計の必要性が説かれるようになった。 <br>
これは、ドメイン駆動による設計を実現するための共通言語を作ることが目的だった。そのなかでサービス層/サービスクラスという概念が登場した。これは問題領域そのものの概念化ではなく、インタフェース提供や粗結合化を実現するためのモジュールである。 </p>

<h1>
<span id="mmvc" class="fragment"></span><a href="#mmvc"><i class="fa fa-link"></i></a>MMVC</h1>

<p>これに関連して、MMVC( Model Model View Controller ）という考え方が出てきた。 <br>
<a href="http://c2.com/cgi/wiki?ModelModelViewController" class="autolink" rel="nofollow noopener" target="_blank">http://c2.com/cgi/wiki?ModelModelViewController</a> <br>
モデル層を２つに分割し、DomainModelとApplicationModelとよぶ。このため　MAVCと呼ぶ人もいる。（DAVCと呼ぶ人はいない。） </p>

<p>DomainModelは状態を持つオブジェクトとして作り、複数のDomainModelを利用した処理をApplicationModelというサービス層に隠蔽する考え方だ。 </p>

<p>このようにControllerが太る理由は、Model層についてモジュール化するためのノウハウやルールが確立されていないからだという考えのもとMVCの進歩は進んできた。 </p>

<h1>
<span id="dciの登場" class="fragment"></span><a href="#dci%E3%81%AE%E7%99%BB%E5%A0%B4"><i class="fa fa-link"></i></a>DCIの登場</h1>

<p>最近ではDCIという考え方が出てきた。DCIの問題意識は、Modelに次々に追加される要件に対応することだ。これはAgileな開発というスタイルにも関連している。DCIの考え方はDataよばれるデータソース層に対して、Roleと呼ばれる役割をContext上でアドホックに組み込んで提供するものだ。(なぜ　DRC：Data Role Contextじゃないのかはよくわからない。) <br>
RoleはTraitで実装される。とても現代的なものではあるが、有効性や問題点はまだ未知数といってもいいだろう。 </p>

<p>このようにControllerにModelで書くべきことが記述される問題に関してはアプローチされてきた。ではControllerとViewの関係はどうであろうか。 </p>

<h1>
<span id="mvvmあるいは双方向バインディング" class="fragment"></span><a href="#mvvm%E3%81%82%E3%82%8B%E3%81%84%E3%81%AF%E5%8F%8C%E6%96%B9%E5%90%91%E3%83%90%E3%82%A4%E3%83%B3%E3%83%87%E3%82%A3%E3%83%B3%E3%82%B0"><i class="fa fa-link"></i></a>MVVMあるいは双方向バインディング</h1>

<p>実際のところ、ViewとControllerの間で記述されている処理は非常に明快なことが多い。Viewへのアクションに伴うイベントのハンドリングや、データのアサインをModelを介して行うだけだ。これはModelが十分な機能を提供している限り、これ以上のことをする必要は無い。であれば、ViewとModelの関係を明快にすることでControllerの肥大化は防ぐことができる。 </p>

<p>そこで出てきた考え方がMVVMだ。(Model View ViewModel ) <br>
UIには入力フォームや表示データのように見た目とは別のデータ構造を隠し持っていることがわかる。そのUIパーツのためにアサインしているデータを考えればわかりやすいだろう。 <br>
このデータ構造をViewModelといい、その変更を監視しモデルに伝え、モデルがViewModelを変更するといったインタフェースを持つことで煩雑なイベント処理を隠蔽できる。 <br>
これはmicrosoftのsilverlightのためのRIAであるWPFから出てきた考え方だ。しかし、現在ではknockout.jsやandroid-bindingでも同様のことができる。 <br>
(はてぶより追記：WPF上でのMVVMについて、より詳細にはこちらのスライド <a href="http://www.slideboom.com/presentations/381148" class="autolink" rel="nofollow noopener" target="_blank">http://www.slideboom.com/presentations/381148</a> をご確認ください。)</p>

<p>この考え方をより明快にWebアプリケーションと結びつけようとするむきがある。これがModel driven Viewというgoogleがリードして提案しているDOM拡張である。これは、viewModelにあたるオブジェクトをviewであるdomオブジェクトとmodelオブジェクトがどちらも参照をもっており、それぞれの変更をそれぞれが通知され処理するというものだ。これは、WebComponentsの流れに関連しているものだ。まだ開発中であるがpolymer.jsを利用することである程度先取りすることができる。また、実用を考えるのであれば、angular.jsなどでも近しいの考え方で実装されている。 </p>

<p>DCIとMVVMあるいはmdvは今後、アプリケーション開発においては主流になっていくだろう。これによって、Controllerの責務はほぼなくなっていき、Fat Controllerの問題は別の問題にすり替わっていくだろうということが想像される。 </p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1" style="height:150px;">
<tr>
	<td rowspan="3">34位</td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="thumb-up-120px.png" /></i>1095</kbd>
		<a target="_blank" href="https://qiita.com/takeharu/items/809114f943208aaf55b3">JavaScriptのプロトタイプからオブジェクト指向を学ぶ</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-04-11<br />22:34:50</center>
	</td>
	<td style="width:200px;">
		<!--投稿者-->
		<center>
			@<a href="user/10962.html">takeharu</a>(18件の記事)<br />(サイバーエージェント 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/10962/profile-images/1510984508">
		</center>
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[JavaScript]</b> <b>[Node.js]</b> <b>[オブジェクト指向]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<!--
		<div style="width:350px;height:150px;overflow:scroll;">%s</div>
		-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;">
<h1>
<span id="javascriptのプロトタイプ入門" class="fragment"></span><a href="#javascript%E3%81%AE%E3%83%97%E3%83%AD%E3%83%88%E3%82%BF%E3%82%A4%E3%83%97%E5%85%A5%E9%96%80"><i class="fa fa-link"></i></a>JavaScriptの「プロトタイプ入門」</h1>

<p>JavaScriptはオブジェクト指向です。</p>

<p>クラスという概念はないため、<br>
擬似的なクラスの表現を使ったパターンがあります。</p>

<p>ただ今回はそちらではなくプロトタイプベースの説明をします。</p>

<p>その前にコンストラクタについて知らない人はこちらへ。<br>
<a href="http://qiita.com/items/010752b1427773558f7c">JavaScriptのクラス？コンストラクタ？</a></p>

<h1>
<span id="プロトタイプって" class="fragment"></span><a href="#%E3%83%97%E3%83%AD%E3%83%88%E3%82%BF%E3%82%A4%E3%83%97%E3%81%A3%E3%81%A6"><i class="fa fa-link"></i></a>プロトタイプって？</h1>

<p>そもそもプロトタイプってなに？</p>

<p>実は、、プロトタイプとは「オブジェクト」のことなんです。<br>
そして感覚としては親だと思って大丈夫です。</p>

<p>親の能力は子にも受け継がれている。。的なニュアンスですね。<br>
（まぁ意味合いはちがいますがw）</p>

<h1>
<span id="prototypeプロパティ" class="fragment"></span><a href="#prototype%E3%83%97%E3%83%AD%E3%83%91%E3%83%86%E3%82%A3"><i class="fa fa-link"></i></a>prototypeプロパティ</h1>

<p>ここで新規に関数を生成してみましょう。<br>
そうするとprototypeプロパティが自動で作成されます。</p>

<div class="code-frame" data-lang="javascript"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">proto</span><span class="p">()</span> <span class="p">{}</span> <span class="c1">//proto.prototypeは自動で生成</span>
</pre></div></div>

<p>このように関数を生成した時点で、<br>
proto.prototypeプロパティが自動で生成されます。</p>

<p>そしてそれは新たな空オブジェクトへの参照を持っているんですね。<br>
そしてprototypeプロパティは自分の親への参照だと思って下さい。</p>

<p>ここは非常に重要です。。。<br>
ということで見るより慣れろ！</p>

<p>先に実用例をチェックします。</p>

<h1>
<span id="実用例" class="fragment"></span><a href="#%E5%AE%9F%E7%94%A8%E4%BE%8B"><i class="fa fa-link"></i></a>実用例</h1>

<div class="code-frame" data-lang="javascript"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">Dog</span><span class="p">()</span> <span class="p">{}</span>
<span class="nx">Dog</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">bark</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'わんわん'</span><span class="p">);</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">dog</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Dog</span><span class="p">();</span>
<span class="nx">dog</span><span class="p">.</span><span class="nx">bark</span><span class="p">();</span> <span class="c1">//'わんわん';</span>
</pre></div></div>

<p>といった感じです。。<br>
dog自体は何も持っていませんが、<br>
親がbark関数を持っているので、あたかも自分のようにつかえちゃいます。</p>

<p>あれ、でもこれって…下と何が違うの？？</p>

<div class="code-frame" data-lang="javascript"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">Dog</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">bark</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'わんわん'</span><span class="p">);</span>
  <span class="p">};</span>
<span class="p">}</span>
<span class="kd">var</span> <span class="nx">dog</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Dog</span><span class="p">();</span>
<span class="nx">dog</span><span class="p">.</span><span class="nx">bark</span><span class="p">();</span> <span class="c1">//'わんわん';</span>
</pre></div></div>

<p>ふーむ、挙動は一緒ですね。<br>
ただ前者のほうがbetterです。</p>

<p>実は後者だと毎回毎回関数が生成されちゃうんです！</p>

<p>・・・？？</p>

<p>前記事でも説明しましたが、<br>
newはこんな暗黙のルールをもっています！</p>

<div class="code-frame" data-lang="javascript"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">Dog</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// var this = {};</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">bark</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'わんわん'</span><span class="p">);</span>
  <span class="p">};</span>
  <span class="c1">// return this;</span>
<span class="p">}</span>
</pre></div></div>

<p>なのでこれでは毎回空オブジェクトを作成し、<br>
毎回新しくbark関数を定義しちゃっていますね。。</p>

<p>そこでプロトタイプの出番です！<br>
そしてプロトタイプは親だと思ってください。<br>
そして子は親のプロパティを共通で使えちゃいます！</p>

<p>ここでも実践例！</p>

<div class="code-frame" data-lang="javascript"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">Dog</span><span class="p">(</span><span class="nx">cry</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">cry</span> <span class="o">=</span> <span class="nx">cry</span><span class="p">;</span>
<span class="p">}</span>
<span class="nx">Dog</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">bark</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">cry</span><span class="p">);</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">chiwawa</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Dog</span><span class="p">(</span><span class="s1">'きゃんきゃん'</span><span class="p">);</span>
<span class="nx">chiwawa</span><span class="p">.</span><span class="nx">bark</span><span class="p">();</span> <span class="c1">//'きゃんきゃん';</span>

<span class="kd">var</span> <span class="nx">shiba</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Dog</span><span class="p">(</span><span class="s1">'わんわん'</span><span class="p">);</span>
<span class="nx">shiba</span><span class="p">.</span><span class="nx">bark</span><span class="p">();</span> <span class="c1">//'わんわん';</span>
</pre></div></div>

<p>といった感じです。</p>

<p>これだと関数は無駄に生成されていませんね♪<br>
なぜならnewを使った挙動は下記だからですね。</p>

<div class="code-frame" data-lang="javascript"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">Dog</span><span class="p">(</span><span class="nx">cry</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// var this = {};</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">cry</span> <span class="o">=</span> <span class="nx">cry</span><span class="p">;</span>
  <span class="c1">// return this;</span>
<span class="p">}</span>
</pre></div></div>

<p>そしてポイントです！<br>
newを使った場合のthisのプロトタイプは、<br>
Dogのプロトタイプと同じ参照を持っています！</p>

<p>すなわちこれによって生成されたインスタンスはbark関数が使えちゃいます。</p>

<h1>
<span id="実践のポイントは一点のみ" class="fragment"></span><a href="#%E5%AE%9F%E8%B7%B5%E3%81%AE%E3%83%9D%E3%82%A4%E3%83%B3%E3%83%88%E3%81%AF%E4%B8%80%E7%82%B9%E3%81%AE%E3%81%BF"><i class="fa fa-link"></i></a>実践のポイントは一点のみ</h1>

<p>単純にプロトタイプを使用したい場合は、<br>
ポイントは一点のみ！</p>

<p>・汎用的な関数はprototypeに定義</p>

<p>これだけです！</p>

<p>プロトタイプ（親）に汎用的な関数を定義し、<br>
あとはインスタンス（子）はみんなで仲良くその一つを使うわけですね。</p>

<p>そして関数以外は上のcryのように子自身に定義しちゃいます。</p>

<p>とまぁ、入門としてはこの使い方ができれば十分だと思います。<br>
ではでは、おさらばです♪</p>

<h1>
<span id="外部アカウント" class="fragment"></span><a href="#%E5%A4%96%E9%83%A8%E3%82%A2%E3%82%AB%E3%82%A6%E3%83%B3%E3%83%88"><i class="fa fa-link"></i></a>外部アカウント</h1>

<p>技術情報のみつぶやくアカウント作成しました。JavaScriptは最新情報も追っていきます。<br>
<a href="https://twitter.com/takeharumikami" rel="nofollow noopener" target="_blank">Twitterはこちら</a><br>
<a href="http://cloud.feedly.com/#subscription%2Ffeed%2Fhttp%3A%2F%2Fqiita.com%2Ftakeharu%2Ffeed" rel="nofollow noopener" target="_blank">Feedlyのフォローはこちら</a></p>

<h1>
<span id="おすすめの記事" class="fragment"></span><a href="#%E3%81%8A%E3%81%99%E3%81%99%E3%82%81%E3%81%AE%E8%A8%98%E4%BA%8B"><i class="fa fa-link"></i></a>おすすめの記事</h1>

<p>入門者がつまづく、thisの挙動を4種類に分けて簡単に学ぶならこれ。Apply, callの挙動までわかる。<br>
<a href="http://qiita.com/takeharu/items/9935ce476a17d6258e27" id="reference-7fe9a865df364ae18c4f">JavaScriptの「this」は「4種類」？」</a></p>

<p>JavaScriptでは関数はすべてクロージャ。<br>
<a href="http://qiita.com/takeharu/items/4975031faf6f7baf077a" id="reference-f3a42b1a898379585e1c">そもそもクロージャって？JavaScriptでクロージャ入門</a></p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1" style="height:150px;">
<tr>
	<td rowspan="3">35位</td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="thumb-up-120px.png" /></i>1093</kbd>
		<a target="_blank" href="https://qiita.com/b4b4r07/items/6efebc2f3d1cbbd393fc">パッケージ管理システム Homebrew </a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-10-01<br />02:04:33</center>
	</td>
	<td style="width:200px;">
		<!--投稿者-->
		<center>
			@<a href="user/29787.html">b4b4r07</a>(57件の記事)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/29787/profile-images/1473685392">
		</center>
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Mac]</b> <b>[MacOSX]</b> <b>[homebrew]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<!--
		<div style="width:350px;height:150px;overflow:scroll;">%s</div>
		-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p><a href="https://camo.qiitausercontent.com/def97430c9686e139225301b7435d19a881affa6/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f32393738372f37363661656364362d616363662d666364632d653262642d3339636434633138636532622e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/def97430c9686e139225301b7435d19a881affa6/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f32393738372f37363661656364362d616363662d666364632d653262642d3339636434633138636532622e706e67" alt="home-brew.png" title="home-brew.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/29787/766aecd6-accf-fcdc-e2bd-39cd4c18ce2b.png"></a></p>

<p><a href="http://brew.sh/" rel="nofollow noopener" target="_blank">Homebrew</a>（ホームブルー）とは、Mac OS X オペレーティングシステム上でソフトウェアの導入を単純化するパッケージ管理システムのひとつです。<code>yum</code> や <code>apt-get</code> の類の一つです。</p>

<h1>
<span id="macports-との違い" class="fragment"></span><a href="#macports-%E3%81%A8%E3%81%AE%E9%81%95%E3%81%84"><i class="fa fa-link"></i></a>MacPorts との違い</h1>

<p>Mac OS X には Homebrew と双璧をなすパッケージ管理システムがあります。<br>
MacPorts です。以下に簡単な比較を載せておきます。</p>

<table>
<thead>
<tr>
<th style="text-align: center"></th>
<th style="text-align: center"><strong>Homebrew</strong></th>
<th style="text-align: center"><strong>MacPorts</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center">既存のソフトウェアへの影響</td>
<td style="text-align: center">なるべく既存を利用</td>
<td style="text-align: center">新しくインストールする</td>
</tr>
<tr>
<td style="text-align: center">インストール可能なユーザ</td>
<td style="text-align: center">一般ユーザ</td>
<td style="text-align: center">スーパーユーザ（管理者権限 sudo が必要）</td>
</tr>
<tr>
<td style="text-align: center">パッケージのインストール先</td>
<td style="text-align: center">/usr/local</td>
<td style="text-align: center">/opt/local</td>
</tr>
<tr>
<td style="text-align: center">扱えるパッケージ数</td>
<td style="text-align: center">少ない</td>
<td style="text-align: center">多い</td>
</tr>
<tr>
<td style="text-align: center">インストールにかかる時間</td>
<td style="text-align: center">少ない</td>
<td style="text-align: center">多い</td>
</tr>
<tr>
<td style="text-align: center">システムへの依存度</td>
<td style="text-align: center">大きい</td>
<td style="text-align: center">小さい</td>
</tr>
</tbody>
</table>

<p>MacPorts と比べて Homebrew は依存関係でインストールされるソフトが少ないためか、パッケージ管理システムとしての人気が高まってきています。<br>
MacPorts は、Mac に最初から入っているソフトウェアを無視してパッケージが依存するソフトを新規でインストールするという性質を持っていますが、Homebrew は極力 Mac に入っているものを使うように作られています。ゆえに、パッケージ導入時のシステムへの負担や、インストールにかかる時間が比較的少なくて済むようです。<br>
また、Homebrew はスーパーユーザでコマンドを実行する必要が無く、一般ユーザー権限で使うことが出来ます。</p>

<p>※【2015/07/07 追記】最近では Homebrew が大きく台頭してきて、MacPorts の名前を見ることは減ってきました</p>

<h1>
<span id="homebrew-について" class="fragment"></span><a href="#homebrew-%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6"><i class="fa fa-link"></i></a>Homebrew について</h1>

<p>Homebrew は「ユーザが自らパッケージをビルドして使用する」ことのメタファーで「ビールを自家醸造して保存する・飲む」ことを意味しています。そのため、独特なキーワードを用いるので下記で表にしておきます。</p>

<table>
<thead>
<tr>
<th style="text-align: center">キーワード</th>
<th style="text-align: center">本来の意味</th>
<th style="text-align: center">たとえ</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center"><strong>Brew</strong></td>
<td style="text-align: center">ビールを醸造する</td>
<td style="text-align: center">make する</td>
</tr>
<tr>
<td style="text-align: center"><strong>Homebrew</strong></td>
<td style="text-align: center">自家醸造</td>
<td style="text-align: center">ユーザ自らがビルドする</td>
</tr>
<tr>
<td style="text-align: center"><strong>Cellar</strong></td>
<td style="text-align: center">セラー（ワインセラーのなどのセラー。ビール貯蔵庫）</td>
<td style="text-align: center">インストール（保存）先</td>
</tr>
<tr>
<td style="text-align: center"><strong>Keg</strong></td>
<td style="text-align: center">樽、醸成用</td>
<td style="text-align: center">make 材料</td>
</tr>
<tr>
<td style="text-align: center"><strong>Formula</strong></td>
<td style="text-align: center">調理法、手順</td>
<td style="text-align: center">ビルド方法・手順が書かれたスクリプト</td>
</tr>
</tbody>
</table>

<p>Homebrew 用のサブコマンドを叩いたり、エラー処理しているときなど、様々な局面で上記のようなキーワードを目にすることになると思うので覚えておくといいかもしれません。</p>

<h1>
<span id="homebrew-をインストールする" class="fragment"></span><a href="#homebrew-%E3%82%92%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>Homebrew をインストールする</h1>

<p>何個かステップを経るため、先に手順だけ書いておきます。</p>

<ol>
<li>Java をインストールする</li>
<li>Command Line Tools のインストール</li>
<li>Homebrew 本体のインストール</li>
</ol>

<h2>
<span id="1-java-をインストールする" class="fragment"></span><a href="#1-java-%E3%82%92%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>1. Java をインストールする</h2>

<p>OSX は Java を必要とするような動作をした時、OS 側から 「Java の未インストールの情報」と「インストールするかどうかの選択肢」を与えてくれます。<br>
下記のコマンドを <strong>ターミナル（Terminal.app）</strong> から実行することで、Java がインストールされていればバージョンを表示、されていなければインストールするか聞いてきてくれます。</p>

<p><strong>インストール済み</strong></p>

<div class="code-frame" data-lang="console"><div class="highlight"><pre><span></span><span class="gp">$</span> java -version
<span class="go">java version "1.6.0_51"</span>
<span class="go">Java(TM) SE Runtime Environment (build 1.6.0_51-b11-457-11M4509)</span>
<span class="go">Java HotSpot(TM) 64-Bit Server VM (build 20.51-b01-457, mixed mode)</span>
</pre></div></div>

<p><strong>未インストール</strong></p>

<div class="code-frame" data-lang="console"><div class="highlight"><pre><span></span><span class="gp">$</span> java -version
<span class="go">No Java runtime present, requesting install.</span>
</pre></div></div>

<p><a href="https://camo.qiitausercontent.com/5807733ba74a5d0839f308b1046cd3cdc2ff8a27/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f32393738372f62656263343032382d353931392d336438352d373134342d3034326537383434383336622e6a706567" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/5807733ba74a5d0839f308b1046cd3cdc2ff8a27/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f32393738372f62656263343032382d353931392d336438352d373134342d3034326537383434383336622e6a706567" alt="java.jpg" title="java.jpg" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/29787/bebc4028-5919-3d85-7144-042e7844836b.jpeg"></a></p>

<h2>
<span id="2-command-line-tools-のインストール" class="fragment"></span><a href="#2-command-line-tools-%E3%81%AE%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB"><i class="fa fa-link"></i></a>2. Command Line Tools のインストール</h2>

<p>このインストール方法は2通りあります。<br>
ちなみに、Command Line Tools をインストールすることで、<code>gcc</code> といったコマンドも使用することができるようになります。</p>

<ul>
<li>
<strong>2.1.</strong> Xcode を利用する</li>
</ul>

<p>App Store にて <a href="https://itunes.apple.com/jp/app/xcode/id497799835?mt=12" rel="nofollow noopener" target="_blank">Xcode</a>をダウンロードすることが出来ます。インストールが完了したら、ターミナルから</p>

<div class="code-frame" data-lang="console"><div class="highlight"><pre><span></span><span class="gp">$</span> xcode-select --install
</pre></div></div>

<ul>
<li>
<strong>2.2.</strong> Developer を利用する</li>
</ul>

<p>Xcode をインストールしたくない人、出来ない人などはこの方法がおすすめです。しかし、Apple ID などが必要になるので準備しておいてください。無料です。</p>

<p><a href="https://developer.apple.com/downloads/index.action" class="autolink" rel="nofollow noopener" target="_blank">https://developer.apple.com/downloads/index.action</a></p>

<p><a href="https://camo.qiitausercontent.com/2a27f6202e2433f66290c73b250ed63290a8b692/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f32393738372f39303931373530322d353334382d656162352d666632662d3963653639386561313833382e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/2a27f6202e2433f66290c73b250ed63290a8b692/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f32393738372f39303931373530322d353334382d656162352d666632662d3963653639386561313833382e706e67" alt="Sign_in_with_your_Apple_ID_-_Apple_Developer.png" title="Sign_in_with_your_Apple_ID_-_Apple_Developer.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/29787/90917502-5348-eab5-ff2f-9ce698ea1838.png"></a></p>

<h2>
<span id="3-homebrew-本体をインストールする" class="fragment"></span><a href="#3-homebrew-%E6%9C%AC%E4%BD%93%E3%82%92%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>3. Homebrew 本体をインストールする</h2>

<p><a href="http://brew.sh/" rel="nofollow noopener" target="_blank">Homebrew 公式サイト</a>に書かれている方法を用いてインストールします。<br>
下記のコマンドを <strong>ターミナル（Terminal.app）</strong> から実行するだけです。<br>
※この下記コマンドは公式サイト上でまれに変更される場合があるので、公式サイトへ飛んでコピペしたほうが最新です。</p>

<div class="code-frame" data-lang="console"><div class="highlight"><pre><span></span><span class="gp">$</span> ruby -e <span class="s2">"</span><span class="k">$(</span>curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install<span class="k">)</span><span class="s2">"</span>
</pre></div></div>

<p>インストールが完了すると、その旨と簡単なセットアップを促すメッセージが出力されます。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>==&gt; Installation successful!
You should run `brew doctor' *before* you install anything.
</pre></div></div>

<h1>
<span id="homebrew-を使用する" class="fragment"></span><a href="#homebrew-%E3%82%92%E4%BD%BF%E7%94%A8%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>Homebrew を使用する</h1>

<p>インストールが完了したら、まず下記コマンドを実行します。</p>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>$ brew doctor
</pre></div></div>

<p>問題がないかチェックし、あった場合はその解決策を示してくれます。<br>
いざ、打ってみるとさっそく。。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>Warning: You have MacPorts or Fink installed:
  /opt/local/bin/port

This can cause trouble. You don't have to uninstall them, but you may want to
temporarily move them out of the way, e.g.

  sudo mv /opt/local ~/macports

Warning: You have a non-Homebrew 'pkg-config' in your PATH:
  /opt/local/bin/pkg-config

`./configure` may have problems finding brew-installed packages using
this other pkg-config.
</pre></div></div>

<p>今回は、MacPorts の存在がエラーの原因でした。解決策が示されているので、乗っかってみましよう。</p>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>$ sudo mv /opt/local ~/macports
</pre></div></div>

<p><code>mv</code> の第二引数は何でもよくて、とりあえず除けたかったみたいです。もう一度 <code>brew doctor</code> してみて、</p>

<div class="code-frame" data-lang="console"><div class="highlight"><pre><span></span><span class="go">Your system is ready to brew.</span>
</pre></div></div>

<p>と表示されれば、インストールの完了です。</p>

<p>===========</p>

<p>余談として、お決まりの本体アップデートをしておきます。<br>
最新版にするには、</p>

<div class="code-frame" data-lang="console"><div class="highlight"><pre><span></span><span class="gp">$</span> brew update
</pre></div></div>

<p>バージョンチェックは、</p>

<div class="code-frame" data-lang="console"><div class="highlight"><pre><span></span><span class="gp">$</span> brew -v
</pre></div></div>

<p>です。</p>

<h1>
<span id="homebrew-の基本操作をする" class="fragment"></span><a href="#homebrew-%E3%81%AE%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C%E3%82%92%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>Homebrew の基本操作をする</h1>

<p><code>wget</code> コマンドをパッケージの例に説明していきます。<br>
以下に示すコマンド郡を使用できたら、実使用では無問題でしょう。</p>

<p><strong>パッケージを探す</strong></p>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>$ brew search wget
</pre></div></div>

<p><strong>パッケージをインストール</strong></p>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>$ brew install wget
</pre></div></div>

<p><strong>パッケージの有効化と無効化</strong></p>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>$ brew unlink wget   <span class="c1"># 一時的に無効化</span>
$ brew link wget     <span class="c1"># 有効化</span>
</pre></div></div>

<p><strong>パッケージ一覧の更新</strong></p>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>$ brew update     <span class="c1"># formula を更新</span>
$ brew upgrade    <span class="c1"># 更新があるパッケージを再ビルドする</span>
</pre></div></div>

<p><strong>インストールされたリストを表示する</strong></p>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>$ brew list
</pre></div></div>

<p><strong>パッケージをアンインストール</strong></p>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>$ brew remove wget
</pre></div></div>

<p><strong>Homebrew の設定一覧</strong></p>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>$ brew --config
HOMEBREW_VERSION: <span class="m">0</span>.9.5
ORIGIN: https://github.com/mxcl/homebrew
HEAD: 57272977eaa0ec0509a29be6c8e90b5f4b338f65
HOMEBREW_PREFIX: /usr/local
HOMEBREW_CELLAR: /usr/local/Cellar
CPU: quad-core <span class="m">64</span>-bit ivybridge
OS X: <span class="m">10</span>.8.5-x86_64
Xcode: <span class="m">4</span>.6.3
CLT: <span class="m">4</span>.6.0.0.1.1365549073
LLVM-GCC: build <span class="m">2336</span>
Clang: <span class="m">4</span>.2 build <span class="m">425</span>
X11: N/A
System Ruby: <span class="m">1</span>.8.7-358
Perl: /usr/bin/perl
Python: /usr/bin/python
Ruby: /usr/bin/ruby <span class="o">=</span>&gt; /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/bin/ruby
</pre></div></div>

<h1>
<span id="homebrew-をアンインストール" class="fragment"></span><a href="#homebrew-%E3%82%92%E3%82%A2%E3%83%B3%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB"><i class="fa fa-link"></i></a>Homebrew をアンインストール</h1>

<p>世の中には気に食わないソフトウェアてのもあるものです。<br>
そんな時は以下をあせらずに実行し、一掃しましょう。</p>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>$ <span class="nb">cd</span> <span class="sb">`</span>brew --prefix<span class="sb">`</span>
$ rm -rf Cellar
$ brew prune
$ rm <span class="sb">`</span>git ls-files<span class="sb">`</span>
$ rmdir Library/Homebrew Library/Aliases Library/Formula Library/Contributions
$ rm -rf .git
$ rm -rf ~/Library/Caches/Homebrew
</pre></div></div>
</div>
	</td>
</tr>
</table>
<br />
<table border="1" style="height:150px;">
<tr>
	<td rowspan="3">36位</td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="thumb-up-120px.png" /></i>1092</kbd>
		<a target="_blank" href="https://qiita.com/horimislime/items/32acf0f1be33a269a309">APIドキュメントを書くのが楽になるツールまとめ</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-12-22<br />00:01:43</center>
	</td>
	<td style="width:200px;">
		<!--投稿者-->
		<center>
			@<a href="user/7325.html">horimislime</a>(36件の記事)<br />(Toreta 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/7325/profile-images/1473684151">
		</center>
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Markdown]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<!--
		<div style="width:350px;height:150px;overflow:scroll;">%s</div>
		-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>さいきんREST APIのドキュメントを書いていて、wiki使うのだるいし他に良い方法ないかな〜と調べてた時に見つけたツール群をまとめてみます。</p>

<p>追記: こちらも便利そうなので参考にどうぞ。<br>
<a href="http://qiita.com/horimislime/items/38327a3f4166b7b39eb5?utm_source=chrome-extention&amp;utm_medium=browser-extention&amp;utm_content=notifications" id="reference-d6c3809fe455d2e62b92">REST APIドキュメント作成ツールはapiary.ioが決定版かもしれない - Qiita</a></p>

<h2>
<span id="swagger" class="fragment"></span><a href="#swagger"><i class="fa fa-link"></i></a>swagger</h2>

<p><a href="https://developers.helloreverb.com/swagger/" rel="nofollow noopener" target="_blank">Swagger: A simple, open standard for describing REST APIs with JSON | Reverb for Developers</a><br>
デモ: <a href="http://swagger.wordnik.com/" rel="nofollow noopener" target="_blank">Swagger UI</a></p>

<p>ソースコード中にAPIの概要を書いておくと、それを元にドキュメントを自動生成してくれる。wikiやmarkdownで書くのと決定的な違いは、↓のようにドキュメント上のformからAPIコールを試すことができる点。</p>

<p><a href="https://camo.qiitausercontent.com/ff0c70743fc16236d7137c09001a4373f1514c1e/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f373332352f61653238383665312d303636622d656233612d656530662d3763373438303437643236622e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/ff0c70743fc16236d7137c09001a4373f1514c1e/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f373332352f61653238383665312d303636622d656233612d656530662d3763373438303437643236622e706e67" alt="1387628508.png" title="1387628508.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/7325/ae2886e1-066b-eb3a-ee0f-7c748047d26b.png"></a></p>

<p>様々な言語のWAFに対応したライブラリも開発されてる。<br>
<a href="https://github.com/wordnik/swagger-core/wiki" rel="nofollow noopener" target="_blank">Home · wordnik/swagger-core Wiki</a></p>

<ul>
<li><a href="http://dev.classmethod.jp/server-side/scalatra-swagger01/" rel="nofollow noopener" target="_blank">Scalatra2.2+scalatra-swaggerでREST APIのリファレンスを生成する #1 ｜ Developers.IO</a></li>
<li><a href="http://dev.classmethod.jp/server-side/scalatra-swagger02/" rel="nofollow noopener" target="_blank">Scalatra2.2+scalatra-swaggerでREST APIのリファレンスを生成する #2 ｜ Developers.IO</a></li>
</ul>

<h2>
<span id="iodocs" class="fragment"></span><a href="#iodocs"><i class="fa fa-link"></i></a>iodocs</h2>

<p><a href="https://github.com/mashery/iodocs" rel="nofollow noopener" target="_blank">mashery/iodocs</a></p>

<p>node.jsで動作するドキュメントツール。API概要の定義はjsonで記述するようになっていて、こちらもswaggerと同様にページ上でAPIコールを試せるようになっている。iodocsに関しては最近postしたのでこちらもどうぞ。<br>
<a href="http://qiita.com/horimislime/items/ed13637c070b99dae959" id="reference-4cc94ceda95896ae77bc">iodocsで便利なREST APIドキュメントを作成する - Qiita [キータ]</a></p>

<p><a href="https://camo.qiitausercontent.com/0f4bdb9d9ee08b56f25c935c9c4fc0a23e2dc10b/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f373332352f62353064346331642d313938632d333532392d653463322d3032643066333961373664332e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/0f4bdb9d9ee08b56f25c935c9c4fc0a23e2dc10b/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f373332352f62353064346331642d313938632d333532392d653463322d3032643066333961373664332e706e67" alt="iodocs-screen.png" title="iodocs-screen.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/7325/b50d4c1d-198c-3529-e4c2-02d0f39a76d3.png"></a></p>

<h2>
<span id="autodoc" class="fragment"></span><a href="#autodoc"><i class="fa fa-link"></i></a>autodoc</h2>

<p><a href="https://github.com/r7kamura/autodoc" rel="nofollow noopener" target="_blank">r7kamura/autodoc</a></p>

<p>APIのテストケースからドキュメントを自動生成してくれる。Markdownで出力してくれるので、別途Webサーバを起動する必要とかも無し。</p>

<ul>
<li><a href="http://r7kamura.github.io/2013/12/01/autodoc.html" rel="nofollow noopener" target="_blank">Autodoc - r7kamura blog</a></li>
<li><a href="http://blog.inouetakuya.info/entry/2013/10/20/132928" rel="nofollow noopener" target="_blank">Rails でつくる API のドキュメントを自動生成してくれる autodoc がすごい - 彼女からは、おいちゃんと呼ばれています</a></li>
</ul>

<h2>
<span id="restdoclet" class="fragment"></span><a href="#restdoclet"><i class="fa fa-link"></i></a>RESTdoclet</h2>

<p><a href="http://ig-group.github.io/RESTdoclet/" rel="nofollow noopener" target="_blank">RESTdoclet by IG-Group</a></p>

<p>JavaでSpringMVCな環境で使うツール。Mavenプラグインとして提供されている。ドキュメント生成にはJavadocやSpringのRequestMapping等のアノテーションを利用するので、生成のために余計なアノテーション等をコードに書かなくていいのが特徴的。</p>

<ul>
<li><a href="http://www.infoq.com/jp/news/2012/08/RESTDocletOpenSource" rel="nofollow noopener" target="_blank">IG GroupがRESTdocletをオープンソース化</a></li>
</ul>

<h2>
<span id="carte" class="fragment"></span><a href="#carte"><i class="fa fa-link"></i></a>carte</h2>

<p><a href="https://github.com/devo-ps/carte" rel="nofollow noopener" target="_blank">devo-ps/carte</a><br>
デモ: <a href="http://devo.ps/carte/" rel="nofollow noopener" target="_blank">Carte</a></p>

<p>Markdownでドキュメント記述ができる。Jekyllベース。swaggerやiodocsと比較してシンプルな作りになっており、APIコールを試す機能は無い。</p>

<p><a href="https://camo.qiitausercontent.com/591bcfd87cf2d21fec8408b356cc16fecfa4e292/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f373332352f63366563613933322d646539662d363963612d376630372d3538363131383062363032332e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/591bcfd87cf2d21fec8408b356cc16fecfa4e292/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f373332352f63366563613933322d646539662d363963612d376630372d3538363131383062363032332e706e67" alt="1387628935.png" title="1387628935.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/7325/c6eca932-de9f-69ca-7f07-5861180b6023.png"></a></p>

<h2>
<span id="まとめ" class="fragment"></span><a href="#%E3%81%BE%E3%81%A8%E3%82%81"><i class="fa fa-link"></i></a>まとめ</h2>

<p>この手の自動生成や効率化はやり方が沢山ある分、各ツールそれぞれのアプローチが見えて面白いなーと思いました。まだまだ開発途中のものもあり、ちょっと試してて不便に感じる所もあったのですが今後に期待。</p>

<p>wikiやGithub READMEを使い続けるのもいいですが、こうした支援ツールも一度検討してみてはどうでしょうか。</p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1" style="height:150px;">
<tr>
	<td rowspan="3">37位</td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="thumb-up-120px.png" /></i>1086</kbd>
		<a target="_blank" href="https://qiita.com/joker1007/items/2a03500017766bdb0234">てめえらのRailsはオブジェクト指向じゃねえ！まずはCallbackクラス、Validatorクラスを活用しろ！</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-12-04<br />14:02:44</center>
	</td>
	<td style="width:200px;">
		<!--投稿者-->
		<center>
			@<a href="user/78.html">joker1007</a>(105件の記事)<br />(フリーランス 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/78/profile-images/1473683785">
		</center>
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Ruby]</b> <b>[Rails]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<!--
		<div style="width:350px;height:150px;overflow:scroll;">%s</div>
		-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>ちょっと煽り気味のタイトルにしてみましたが、Railsで開発する時は意識的にOOPに寄せないとオブジェクトの力が活かせなくなるよってことと、Railsが提供しているクラスの責務を分割することを支援してくれる機能について話をします。</p>

<h2>
<span id="activerecordの性質" class="fragment"></span><a href="#activerecord%E3%81%AE%E6%80%A7%E8%B3%AA"><i class="fa fa-link"></i></a>ActiveRecordの性質</h2>

<p>Rails開発においては、モデル層にロジックを書いてコントローラーは薄くしろ、というのはしつこく言われているので、概ね浸透してきていると思います。</p>

<p>それに加えて、最近私が結構しつこく主張しておきたいのが、モデル = ActiveRecordでは無いよ、ということです。</p>

<p>ActiveRecordは成り立ちから言うと、ロジックとDBへの永続化をまとめてカプセル化するアーキテクチャパターンから来ています。(詳しくはエンタープライズアプリケーションアーキテクチャパターンという書籍を読むと良いです)<br>
この方法はロジックが複雑でない場合、つまりCRUD+αぐらいの時には非常に上手くいきます。<br>
RailsのActiveRecordは非常に便利なのでそこそこの規模ぐらいのものを作ってる時には余り問題になりません。</p>

<p>しかし、規模が大きくなってくるとActiveRecordだけでは色々と辛い側面が出てきます。<br>
テーブルと1:1という形でクラス構造が縛られる事により構造化に限界が発生し、一つのクラスに何でもかんでもロジックを記述していくことになります。<br>
これによって生じる問題がファットモデルです。<br>
モデル層をActiveRecordだけに頼っていると、いずれこの問題にぶち当たることになります。</p>

<p>これを解決するには地道にオブジェクト指向の基本に立ち返ること、上手くアクティブレコードから責任を分離する事が必要です。<br>
ActiveRecordは開発の初期には非常に便利で問題も余り顕在化しないため、そこに囚われていると気付いた時にはえらくファットになってるという事が十分にあり得ます。</p>

<h2>
<span id="rails謹製-ダイエット食品" class="fragment"></span><a href="#rails%E8%AC%B9%E8%A3%BD-%E3%83%80%E3%82%A4%E3%82%A8%E3%83%83%E3%83%88%E9%A3%9F%E5%93%81"><i class="fa fa-link"></i></a>Rails謹製 ダイエット食品</h2>

<p>Railsは良く考えられたフレームワークなので、もちろんそれ自体の中にもちゃんと責務を細かく分けるための仕組みを準備してくれています。<br>
Railsが提供してくれる機能を理解し、モデルの責任を分割することでより良いモデルを作っていくことができます。その中でも代表的な機能が以下の4つです。</p>

<ul>
<li>Callbackクラス</li>
<li>Validatorクラス</li>
<li>ActiveModelモジュール</li>
<li>値オブジェクト (composed_of)</li>
</ul>

<p>今回は、その中で忘れられがちな印象を受ける上の2つについて解説します。</p>

<h2>
<span id="callbackクラス" class="fragment"></span><a href="#callback%E3%82%AF%E3%83%A9%E3%82%B9"><i class="fa fa-link"></i></a>Callbackクラス</h2>

<p><a href="http://api.rubyonrails.org/classes/ActiveRecord/Callbacks.html" title="ActiveRecord::Callbacks" rel="nofollow noopener" target="_blank">ActiveRecord::Callbacks</a>からActiveRecordオブジェクトのコールバック機能の使い方を参照してみます。</p>

<p>ActiveRecordオブジェクトのコールバックはこんな感じで記述するのが簡単な方法です。</p>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Subscription</span> <span class="o">&lt;</span> <span class="no">ActiveRecord</span><span class="o">::</span><span class="no">Base</span>
  <span class="n">before_create</span> <span class="ss">:record_signup</span>

  <span class="kp">private</span>
    <span class="k">def</span> <span class="nf">record_signup</span>
      <span class="nb">self</span><span class="o">.</span><span class="n">signed_up_on</span> <span class="o">=</span> <span class="no">Date</span><span class="o">.</span><span class="n">today</span>
    <span class="k">end</span>
<span class="k">end</span>
</pre></div></div>

<p>この様に自分のオブジェクトのパラメーター調整等であればこのクラスの責任と言えるし、簡単なのでシンプルにprivateメソッドにしておけば他から変な形で利用されることもなくなります。</p>

<p>しかし、もしある程度複雑な処理が関係してくる場合は、もう少し分割したくなってきます。<br>
例えば、RailsのAPIリファレンスにあるような特定カラムを透過的に暗号化したい場合や、コールバックの動作に条件がいくつかある場合等です。<br>
こうなってくると、コールバック処理自体にもテストコードを書きたくもなりますね。</p>

<p>その場合は、機能名を表現するクラスを用意してそちらに処理を記述します。<br>
Railsではクラスに特定のメソッドを定義しておくだけで、任意のクラスをコールバック処理に組み込むことができます。</p>

<p>APIリファレンスのサンプルを見てみましょう。</p>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">BankAccount</span> <span class="o">&lt;</span> <span class="no">ActiveRecord</span><span class="o">::</span><span class="no">Base</span>
  <span class="n">before_save</span>      <span class="no">EncryptionWrapper</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">"credit_card_number"</span><span class="p">)</span>
  <span class="n">after_save</span>       <span class="no">EncryptionWrapper</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">"credit_card_number"</span><span class="p">)</span>
  <span class="n">after_initialize</span> <span class="no">EncryptionWrapper</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">"credit_card_number"</span><span class="p">)</span>
<span class="k">end</span>

<span class="k">class</span> <span class="nc">EncryptionWrapper</span>
  <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">attribute</span><span class="p">)</span>
    <span class="vi">@attribute</span> <span class="o">=</span> <span class="n">attribute</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">before_save</span><span class="p">(</span><span class="n">record</span><span class="p">)</span>
    <span class="n">record</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s2">"</span><span class="si">#{</span><span class="vi">@attribute</span><span class="si">}</span><span class="s2">="</span><span class="p">,</span> <span class="n">encrypt</span><span class="p">(</span><span class="n">record</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s2">"</span><span class="si">#{</span><span class="vi">@attribute</span><span class="si">}</span><span class="s2">"</span><span class="p">)))</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">after_save</span><span class="p">(</span><span class="n">record</span><span class="p">)</span>
    <span class="n">record</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s2">"</span><span class="si">#{</span><span class="vi">@attribute</span><span class="si">}</span><span class="s2">="</span><span class="p">,</span> <span class="n">decrypt</span><span class="p">(</span><span class="n">record</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s2">"</span><span class="si">#{</span><span class="vi">@attribute</span><span class="si">}</span><span class="s2">"</span><span class="p">)))</span>
  <span class="k">end</span>

  <span class="n">alias_method</span> <span class="ss">:after_initialize</span><span class="p">,</span> <span class="ss">:after_save</span>

  <span class="kp">private</span>
    <span class="k">def</span> <span class="nf">encrypt</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
      <span class="c1"># Secrecy is committed</span>
    <span class="k">end</span>

    <span class="k">def</span> <span class="nf">decrypt</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
      <span class="c1"># Secrecy is unveiled</span>
    <span class="k">end</span>
<span class="k">end</span>
</pre></div></div>

<p>このように<code>before_save</code>や<code>after_save</code>等のコールバックに対応するメソッドをパブリックメソッドとして定義しておけばOKです。引数にはコールバックを呼び出す切っ掛けになったオブジェクトが渡されます。</p>

<p>一つのモデルから分離することで、汎用的な処理を複数のクラスで再利用できるようになります。</p>

<p>こういった記述をする利点は他にもいくつかあります。</p>

<p>まず、機能に明確な名前と境界が付くことです。<br>
一つのモデルにまとめて記述されていると、色々なものの中に埋もれてしまい、どういう時に利用されるメソッドなのかはっきりせず後から変更する時に悩む要因になります。<br>
境界が明確になっている事で、後から見ても用途を把握しやすくなります。</p>

<p>また、テストが容易になるのも利点の一つです。<br>
コールバックの起動を単なるpublicメソッドの呼び出しとして行えるため、テストコードで検証する際に無駄なトリックを使う必要が無くなります。<br>
また、このクラスはActiveRecordのオブジェクトに縛られずにテストする事ができます。<br>
このクラスをテストするのに必要なものは、適切なインターフェースを供えたオブジェクトであれば何でも良いのです。RSpecの<code>double</code>や<code>mock_model</code>等で、ダミーのオブジェクトは簡単に高速に準備することができます。<br>
もし、最初のサンプルコードのようにモデル内のprivateメソッドとして定義していたり、直接ブロックを渡すような記述をしていた場合、ActiveRecordのオブジェクトを実際に保存して、状態の変化を確かめる、という面倒なテストが必要になってしまいます。そうなってくると他のバリデーションやコールバックが影響する可能性もあって非常に面倒です。(もしくはprivateメソッドを無理やり呼び出すとか)</p>

<p>このように、コールバックに別のクラスを利用するのは単なるクラス定義だけで良いので非常にお手軽で、上手く分類できるとモデルがかなりすっきりします。</p>

<h2>
<span id="validatorクラス" class="fragment"></span><a href="#validator%E3%82%AF%E3%83%A9%E3%82%B9"><i class="fa fa-link"></i></a>Validatorクラス</h2>

<p>コールバックとバリデーションは非常に似た記述方法を取ります。<br>
そしてバリデーションにもコールバック同様、クラスを分割する仕組みがあります。</p>

<p>Validatorクラスを利用するには<code>validates_with</code>メソッドと<code>ActiveModel::Validator</code>クラスを利用します。</p>

<p>例えば、会議室の利用予約機能を作るとして、予定が他の予定と重なったらバリデーションエラーになる、という仕組みを考えてみます。</p>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="c1"># started_at: timestamp</span>
<span class="c1"># finished_at: timestamp</span>
<span class="k">class</span> <span class="nc">Schedule</span> <span class="o">&lt;</span> <span class="no">ActiveRecord</span><span class="o">::</span><span class="no">Base</span>
  <span class="n">belongs_to</span> <span class="ss">:room</span>
  <span class="n">validates_with</span> <span class="no">MustNotOverlapValidator</span>
<span class="k">end</span>

<span class="k">class</span> <span class="nc">MustNotOverlapValidator</span> <span class="o">&lt;</span> <span class="no">ActiveModel</span><span class="o">::</span><span class="no">Validator</span>
  <span class="k">def</span> <span class="nf">validate</span><span class="p">(</span><span class="n">record</span><span class="p">)</span>
    <span class="n">overlapped_schedules</span> <span class="o">=</span> <span class="no">Schedule</span>
      <span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="ss">room_id</span><span class="p">:</span> <span class="n">record</span><span class="o">.</span><span class="n">room_id</span><span class="p">)</span>
      <span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="s2">"finished_at &gt; ?"</span><span class="p">,</span> <span class="n">record</span><span class="o">.</span><span class="n">started_at</span><span class="p">)</span>
      <span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="s2">"started_at &lt; ?"</span><span class="p">,</span> <span class="n">record</span><span class="o">.</span><span class="n">finished_at</span><span class="p">)</span>
      <span class="o">.</span><span class="n">where</span><span class="o">.</span><span class="n">not</span><span class="p">(</span><span class="nb">id</span><span class="p">:</span> <span class="n">record</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">overlapped_schedules</span><span class="o">.</span><span class="n">exists?</span>
      <span class="n">record</span><span class="o">.</span><span class="n">errors</span><span class="o">.</span><span class="n">add</span> <span class="ss">:base</span><span class="p">,</span> <span class="s2">"Schedule must not overlap on other schedules"</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div></div>

<p>こんな感じで、<code>ActiveModel::Validator</code>を継承したクラスを作り<code>validate</code>メソッドをオーバーライドします。<br>
利用するモデル側からは、<code>validate_with</code>の引数としてValidatorクラスのクラス名を指定します。</p>

<p>Validatorクラスには一つ注意点があります。Validatorクラスは通常一度しかインスタンス化されず、そのオブジェクトをずっと使い回すことになります。変にインスタンス変数とかを利用するとずっと残ってしまうので利用する場合は、意図せず変更されないように注意しましょう。</p>

<p>ValidatorクラスもCallbackクラス同様、テストが容易になり責務がはっきりする利点があります。<br>
Validatorクラスは<code>ActiveModel</code>の仕組みに依存しているので、バリデーション対象のオブジェクトがテスト時に必要になりますが、特定の検証ロジックを単体で呼び出してテストすることが簡単になりますし、境界がはっきりするのでモックを利用しやすくなります。</p>

<p>ちなみにテスト時にValidatorクラスのインスタンスを作る時には、コンストラクタに引数としてハッシュを渡しておく必要があります。これは<code>ActiveModel::Validator</code>クラスのコンストラクタが引数としてオプションの設定値を取るためです。</p>

<h2>
<span id="まとめ" class="fragment"></span><a href="#%E3%81%BE%E3%81%A8%E3%82%81"><i class="fa fa-link"></i></a>まとめ</h2>

<p>こんな感じで、Railsが提供している機能を活用すれば、モデルの責務をより細かく分割することができます。<br>
利用するカラム値や関連等を上手く抽象化すれば再利用性も高まっていい感じです。<br>
ただ、何でもかんでも分割すれば良いというものじゃないのが難しい所です。<br>
ロジックがに無軌道にあちこちに散らばってしまうと、それはそれで全体像を把握することが難しくなります。<br>
大事なのは名前がちゃんと付けられるか考えるということです。(ネームスペースどうする、suffixどうする、とか大分悩ましいですが)<br>
一つのクラスとして独立してテストコードを書きたいかどうか、というのも私の中では指標の一つとして活用しています。</p>

<p>サンプルコードだと良い使い所を上手く表現できないのですが、継ぎ足し継ぎ足し開発していると結構色々あるものなんですよ。<br>
なので、覚えておいて損は無いんじゃないでしょうか。</p>

<p>他にもモデル層を整理する考え方やテクニックは色々あります。<br>
この記事で紹介したようなコールバックという体裁を取るよりも、トランザクションを一つにまとめるサービスクラスという形を取って明示的に呼び出した方が柔軟で扱いやすくなる場合もあります。<br>
Advent Calendarの予告コメントを見ると、そういった記事も出てきそうなので引き続きのAdvent Calendarに期待してます。</p>

<h2>
<span id="おまけ" class="fragment"></span><a href="#%E3%81%8A%E3%81%BE%E3%81%91"><i class="fa fa-link"></i></a>おまけ</h2>

<p>今までRailsにpull reqがマージされたこと無かったんですが、この記事書いてたらCallbackのサンプルコードのバグに気付いたので修正してpull reqを送った所、速攻でマージされて初コントリビュートが出来ました。<br>
Advent Calendarに感謝です。</p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1" style="height:150px;">
<tr>
	<td rowspan="3">38位</td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="thumb-up-120px.png" /></i>1084</kbd>
		<a target="_blank" href="https://qiita.com/taiki45/items/b46a2f32248720ec2bae">今っぽい Vagrant + Chef Solo チュートリアル</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-09-15<br />14:30:48</center>
	</td>
	<td style="width:200px;">
		<!--投稿者-->
		<center>
			@<a href="user/4298.html">taiki45</a>(10件の記事)<br />(COOKPAD Inc. 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/4298/profile-images/1491842772">
		</center>
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Ruby]</b> <b>[chef]</b> <b>[vagrant]</b> <b>[VirtualBox]</b> <b>[Berkshelf]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<!--
		<div style="width:350px;height:150px;overflow:scroll;">%s</div>
		-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>Vagrant と Chef Solo ってとてもベンリそうに見えてたのですが、ネット上にあるのは断片的な情報が多かったり、そもそもいろんなやり方があって混乱してたので、サックリ始めるためのチュートリアルを書きました。これをきっかけにベンリな Vagrant ライフを堪能して頂ければ幸いです。</p>

<p>[追記10/10/2013]<br>
Window 上の Vagrant でも問題なく動きました。ただ1点注意があって、UAC のポップアップに反応しないと、Vagrant か VirtualBox 側でタイムアウトになってしまうので、ポップアップを見張るか、放置したいなら一時的に無効にしておくとよいです。<br>
[/追記終わり]</p>

<p>[追記 10/23/2013]<br>
VirtualBox 4.3 だとまだうまく動かないようです(私も host-only adapter の作成で VirtualBox 側のエラーになりました)。<a href="https://github.com/mitchellh/vagrant/issues/2392" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/mitchellh/vagrant/issues/2392</a><br>
なので <a href="https://www.virtualbox.org/wiki/Download_Old_Builds" class="autolink" rel="nofollow noopener" target="_blank">https://www.virtualbox.org/wiki/Download_Old_Builds</a> から 4.2 系をインストールすると良いです。<br>
[/追記終わり]</p>

<p>[追記 12/15/2013]<br>
フォロワーさんに教えてもらったのですが、VirtualBox 4.3 のサポートきました！ <a href="http://docs.vagrantup.com/v2/virtualbox/index.html" class="autolink" rel="nofollow noopener" target="_blank">http://docs.vagrantup.com/v2/virtualbox/index.html</a><br>
まだぼくは試してないのですが、ひとまず情報をアップデートしておきます。Thanks to <a href="/cosmo__" class="user-mention js-hovercard" title="cosmo__" data-hovercard-target-type="user" data-hovercard-target-name="cosmo__">@cosmo__</a> !!<br>
[/追記終わり]</p>

<h2>
<span id="3行のまとめ" class="fragment"></span><a href="#3%E8%A1%8C%E3%81%AE%E3%81%BE%E3%81%A8%E3%82%81"><i class="fa fa-link"></i></a>3行のまとめ</h2>

<ul>
<li>Vagrant + Chef Solo + Berkshelf でいこう。プラグインは vagrant-berkshelf と vagrant-omnibus と sahara</li>
<li>
<a href="http://berkshelf.com/" class="autolink" rel="nofollow noopener" target="_blank">http://berkshelf.com/</a> と <a href="http://docs.opscode.com/#id3" class="autolink" rel="nofollow noopener" target="_blank">http://docs.opscode.com/#id3</a> と <a href="http://docs.vagrantup.com/v2/" class="autolink" rel="nofollow noopener" target="_blank">http://docs.vagrantup.com/v2/</a> で全て解決</li>
<li>Cookbook の README ベンリ。そこに情報なかったら <code>attributes</code> と <code>recipes</code> 以下を読むとその Cookbook 大体把握できる</li>
</ul>

<h2>
<span id="おすすめの進め方" class="fragment"></span><a href="#%E3%81%8A%E3%81%99%E3%81%99%E3%82%81%E3%81%AE%E9%80%B2%E3%82%81%E6%96%B9"><i class="fa fa-link"></i></a>おすすめの進め方</h2>

<p>もっとも良い進め方は <strong>"入門Chef Solo - Infrastructure as Code"</strong> を読んでからこのチュートリアルを始めるのが良いと思います。</p>

<p>ですが、いろいろと説明不足感ありますが簡単に試せるので、ひとまずこのチュートリアルを先に体験して、その後に Chef ってなんだろ？っていうのを解決する方法も悪くないようにも思えます。</p>

<p>わからないまま進めるのが嫌な人は Chef Solo のチュートリアルをしてから、とりあえず試してみたい人はこのチュートリアルから、という分け方になるやもしれないです。</p>

<p>あと今回のチュートリアルで使ったファイルを github に置いておきます。「これどこにかくんや！」ってなった時にどうぞ。</p>

<p><a href="https://github.com/taiki45/vagrant-tutorial" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/taiki45/vagrant-tutorial</a></p>

<p>では、チュートリアル本編です☆</p>

<h1>
<span id="チュートリアル" class="fragment"></span><a href="#%E3%83%81%E3%83%A5%E3%83%BC%E3%83%88%E3%83%AA%E3%82%A2%E3%83%AB"><i class="fa fa-link"></i></a>チュートリアル〜</h1>

<h2>
<span id="vagrant" class="fragment"></span><a href="#vagrant"><i class="fa fa-link"></i></a>Vagrant</h2>

<p>Virtual Box のような仮想化ソフトウェアを便利に扱うツールです。</p>

<p>どんなご利益があるのか興味あると思うのですけど、公式的には「自由に使えて、ポータブルで、持続的で安定した環境を開発者に提供する」という風になってます。サイコーですね！「僕の環境なら動くんだけど…」っていうバグとはオサラバです！</p>

<p>個人的にはさらに、設定ファイルが柔軟に書けたり、仮想化ソフトウェアを抽象化するインターフェイスを提供していて、プラグインを書くことでそれらを使えるので、便利なんだと思います。Vagrant が他のツールをうまくまとめてくれる感じです。</p>

<p>Vagrant は特に難しいことはないので1つ VM を起動してみて感じをつかんでみましょう。</p>

<h3>
<span id="インストール" class="fragment"></span><a href="#%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB"><i class="fa fa-link"></i></a>インストール</h3>

<ul>
<li>まずは Vertual Box をインストールします。 <a href="https://www.virtualbox.org/" class="autolink" rel="nofollow noopener" target="_blank">https://www.virtualbox.org/</a>
</li>
<li>Vagrant をインストールします。 <a href="http://www.vagrantup.com/" class="autolink" rel="nofollow noopener" target="_blank">http://www.vagrantup.com/</a>
</li>
</ul>

<p><code>vagrant -v</code> が成功しました？さっそく VM を作りましょう！</p>

<h3>
<span id="初めての-up" class="fragment"></span><a href="#%E5%88%9D%E3%82%81%E3%81%A6%E3%81%AE-up"><i class="fa fa-link"></i></a>初めての up</h3>

<p>まずは設定ファイルを書かなくてはなりません。そのための便利なコマンドがほら！</p>

<div class="code-frame" data-lang="sh"><div class="highlight"><pre><span></span>vagrant init <span class="s2">"Debian7"</span> <span class="s2">"https://opscode-vm-bento.s3.amazonaws.com/vagrant/opscode_debian-7.1.0_provisionerless.box"</span>
</pre></div></div>

<p>カレントディレクトリに <code>Vagrantfile</code> が出力されたと思います。さっそく見てみましょう！</p>

<div class="code-frame" data-lang="ruby">
<div class="code-lang"><span class="bold">Vagrantfile</span></div>
<div class="highlight"><pre><span></span><span class="no">Vagrant</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="no">VAGRANTFILE_API_VERSION</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">config</span><span class="o">|</span>
  <span class="c1">#…</span>
  <span class="c1">#…</span>
<span class="k">end</span>
</pre></div>
</div>

<p>こんな感じに Ruby のブロックを使ってその中で設定を書くようになってます。Ruby で書くので独自に <code>config.yml</code> とかを作ってそれを読む込むとかもできますが、まあ最初はいらないと思います。</p>

<p>さっきの <code>vagrant init</code> コマンドに渡した引数はここに反映されています。</p>

<div class="code-frame" data-lang="ruby">
<div class="code-lang"><span class="bold">Vagrantfile</span></div>
<div class="highlight"><pre><span></span><span class="no">Vagrant</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="no">VAGRANTFILE_API_VERSION</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">config</span><span class="o">|</span>
  <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">box</span> <span class="o">=</span> <span class="s2">"Debian7"</span>
  <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">box_url</span> <span class="o">=</span> <span class="s2">"https://opscode-vm-bento.s3.amazonaws.com/vagrant/opscode_debian-7.1.0_provisionerless.box"</span>
<span class="k">end</span>
</pre></div>
</div>

<p>フー、box ってなんのことだ？この box というのは(程度の違いがあるけれど)最低限の構成の VM のスケルトンのことです。ここでは Opscode という Chef を開発したりしている企業の box リポジトリからひとつを指定しています。この名前の box がローカルにある場合は新たにダウンロードせずにローカルの box を使いますし、なければ URL から引っ張ってくる、ってワケですね。ちなみにすでにダウンロードした box ファイルは <code>vagrant box add</code> コマンドで追加したりできます。</p>

<p>なが〜い説明もおわったことだし、いよいよ立ち上げてみましょう！</p>

<div class="code-frame" data-lang="sh"><div class="highlight"><pre><span></span>vagrant up
</pre></div></div>

<p>なが〜いなが〜いダウンロードは終わりましたか？おつかれさまです☆ では VM の中に入っていきましょう！</p>

<div class="code-frame" data-lang="sh"><div class="highlight"><pre><span></span>vagrant ssh
</pre></div></div>

<p>ヒュ～、クール。簡単でしたね。</p>

<h3>
<span id="shared-folders" class="fragment"></span><a href="#shared-folders"><i class="fa fa-link"></i></a>Shared folders</h3>

<p>Vagrant は標準で Shared folders が設定されています。デフォルトだと Vagrantfile があるディレクトリと VM 上の <code>/vagrant</code> が同期されています。試してみましょう。</p>

<div class="code-frame" data-lang="sh"><div class="highlight"><pre><span></span><span class="c1"># ホストマシン上で</span>
touch created_on_host
vagrant ssh

<span class="c1"># VM 上で</span>
<span class="nb">cd</span> /vagrant
ls
touch created_on_vm
<span class="nb">exit</span>

<span class="c1"># ホストマシン上で</span>
ls
</pre></div></div>

<h3>
<span id="gitignore" class="fragment"></span><a href="#gitignore"><i class="fa fa-link"></i></a>gitignore</h3>

<p>Vagrant を使ったプロジェクトを VCS で管理する場合 <code>.vagrant</code> ディレクトリを ignore するようにするのが(たぶん)おすすめです。</p>

<h3>
<span id="vagrant-まとめ" class="fragment"></span><a href="#vagrant-%E3%81%BE%E3%81%A8%E3%82%81"><i class="fa fa-link"></i></a>Vagrant まとめ</h3>

<p>Vagrant は基本的に仮想化ソフトウェアを便利に扱うツールです。そこから先の Provisioning といってサーバーに必要なものをいれたり設定するのは Chef とかシェルスクリプトとか別のツールの役割です。そのあたりをうまく統合してくれるから強力なツールになるのですね。</p>

<p>ということで Vagrant に関して最初に知ることはこれだけです。とってもシンプルです。これからこのまっさらな VM を調理していく方法を紹介しますよ！</p>

<h2>
<span id="chef-solo" class="fragment"></span><a href="#chef-solo"><i class="fa fa-link"></i></a>Chef Solo</h2>

<p>実際に使う Chef Solo についてお話する前に Chef についてお伝えしなければなりませんね。</p>

<h3>
<span id="chef-って" class="fragment"></span><a href="#chef-%E3%81%A3%E3%81%A6"><i class="fa fa-link"></i></a>Chef って？</h3>

<p>Chef は複数台のサーバーの構成を管理するためのツールです。1台の Chef サーバーと呼ばれるマスターノードみたいなのがいて、他のサーバーはその Chef サーバーを定期的に見に行くことで最新のサーバー構成を知り自身に適用していきます。入門 Chef-solo によると Facebook は数万から数十万台規模のサーバーを Chef で管理しているようです。となると Chef サーバー(マスターノード)は1台以上でもいけるのかもしれませんね。</p>

<p>Chef を使う上でお世話になるのが <code>knife</code> コマンドです。この knife は実際にレシピのひな形をつくったりとか、レシピをあるサーバーに適用したりとか、Chef が実際に調理する時の道具です。Chef という仮想の調理師が knife を振り回すことで料理(サーバー)ができる、そんなイメージですね。</p>

<p>さて次にたくさんある Chef の要素を必要なものだけ見ていきます。まずは構築手順のパッケージとして <strong>Cookbook</strong> というのがあります。概念としては RubyGems での <code>gem</code> とかと似てます。この Cookbook の中に実際に実行される <strong>Recipe</strong> が1個以上入っています。覚えるものはまずはこの2つで大丈夫です。実際には実行手順の汎用性を高めるために様々な要素が Chef にはあるのですが、全てハードコーディングして書けば最初はこれ以上いりません。</p>

<ul>
<li><strong>Chef はサーバー/クライアントモデルで複数台のサーバーを管理する</strong></li>
<li><strong>実際に使うコマンドは <code>knife</code></strong></li>
<li><strong>同じ領域の実行手順をまとめたものを Cookbook と呼ぶパッケージにまとめる。実際に実行されるのはその中の Recipe</strong></li>
</ul>

<h3>
<span id="chef-solo-1" class="fragment"></span><a href="#chef-solo-1"><i class="fa fa-link"></i></a>Chef Solo</h3>

<p>このように本来は複数台のマシンでサーバー・クライアントモデルで使う Chef ですが、1台でも使えるように Chef Solo というコマンドがついてきてます。この Chef Solo は自分自身に対して Cookbook と呼ばれる構築手順を実行することができます。</p>

<ul>
<li><strong>Chef Solo は自分自身に対してのみサーバー構築手順を実行する Chef のサブセット</strong></li>
</ul>

<h2>
<span id="vagrant--chef-solo" class="fragment"></span><a href="#vagrant--chef-solo"><i class="fa fa-link"></i></a>Vagrant + Chef Solo</h2>

<p>Vagrant はプロビジョニングツールとしていくつか選べるのですが、Vagrant + Chef Solo の場合、</p>

<ol>
<li>Vagrant が VM を立ち上げる</li>
<li>Cookbook を VM に転送する</li>
<li>VM 上で Chef Solo を実行する</li>
</ol>

<p>という手順になっています。</p>

<h2>
<span id="もっと便利にberkshelf--chef-solo--vagrant" class="fragment"></span><a href="#%E3%82%82%E3%81%A3%E3%81%A8%E4%BE%BF%E5%88%A9%E3%81%ABberkshelf--chef-solo--vagrant"><i class="fa fa-link"></i></a>もっと便利に、Berkshelf + Chef Solo + Vagrant</h2>

<p>Chef にはいくつかの抽象化するための要素があり、構築手順の汎用性を高めることができます。つまり1つの Cookbook をいろいろな OS、いろいろな設定に使いまわすことができるのです。</p>

<p>そこで、いろんな人が作った Cookbook を使いまわすために RubyGems に対する Bundler のような Cookbook 管理ツールがあります。それが Berkshelf です。</p>

<p><a href="http://berkshelf.com/" class="autolink" rel="nofollow noopener" target="_blank">http://berkshelf.com/</a></p>

<p>この Berkshelf は Vagrant Plugin も開発されていて Vagrant 連携もバッチリです☆ Vagrant にプロビジョニングツールとして Chef Solo を使う場合いくつかやり方があるのですが、おすすめするのが Berkshelf を足したやり方です。</p>

<h3>
<span id="vagrant-omnibus" class="fragment"></span><a href="#vagrant-omnibus"><i class="fa fa-link"></i></a>vagrant-omnibus</h3>

<p>他の人が作った Box に chef が入っていなくて Chef Solo が走らない！っていうのはよくあることです。これを回避するために <code>vagrant up</code> 時に Chef が入っているか確認してインストールしてくれる Vagrant プラグインが vagrant-omnibus です。</p>

<p><a href="https://github.com/schisamo/vagrant-omnibus" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/schisamo/vagrant-omnibus</a></p>

<p>README 通りにインストールして</p>

<div class="code-frame" data-lang="ruby">
<div class="code-lang"><span class="bold">Vagrantfile</span></div>
<div class="highlight"><pre><span></span><span class="no">Vagrant</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="no">VAGRANTFILE_API_VERSION</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">config</span><span class="o">|</span>
  <span class="c1"># ...</span>
  <span class="n">config</span><span class="o">.</span><span class="n">omnibus</span><span class="o">.</span><span class="n">chef_version</span> <span class="o">=</span> <span class="ss">:latest</span>
  <span class="c1"># ...</span>
<span class="k">end</span>
</pre></div>
</div>

<p>と書き加えればすぐに動きます。ベンリ！</p>

<h2>
<span id="berkshelf--chef-solo-とチュートリアル再開" class="fragment"></span><a href="#berkshelf--chef-solo-%E3%81%A8%E3%83%81%E3%83%A5%E3%83%BC%E3%83%88%E3%83%AA%E3%82%A2%E3%83%AB%E5%86%8D%E9%96%8B"><i class="fa fa-link"></i></a>Berkshelf + Chef Solo とチュートリアル再開</h2>

<p>さてこれで道具の紹介は終わったので実際にレシピを書いていきましょう。まずはインストールですね☆</p>

<div class="code-frame" data-lang="sh"><div class="highlight"><pre><span></span>vagrant plugin install vagrant-omnibus
vagrant plugin install vagrant-berkshelf
gem i berkshelf
</pre></div></div>

<p>とっても簡単ですね。 では Helloworld をしましょう！</p>

<p>Berkshelf を使うには <code>Berksfile</code> というファイルが必要です。<code>Gemfile</code> のようなものです。さきほどの <code>Vagrantfile</code> と同じディレクトリに配置しましょう。</p>

<div class="code-frame" data-lang="ruby">
<div class="code-lang"><span class="bold">Berksfile</span></div>
<div class="highlight"><pre><span></span><span class="n">site</span> <span class="ss">:opscode</span>
</pre></div>
</div>

<p>これは <code>Gemfile</code> でいうところの <code>source "https://rubygems.org"</code> と同じようなもので特にソースを指定しない場合は opscode からダウンロードします〜という意味です。</p>

<p>さて次に Cookbook を置くためのディレクトリの説明です。</p>

<p>詳しい作法をぼくはまだ良くわかってないのですが、汎用的な Cookbook を置く場所が <code>cookbooks</code> で、その環境構築固有の Cookbook を <code>site-cookbooks</code> に置くことが多いようです。<code>berks init</code> をしてみても <code>cookbooks</code> は git ignore の対象になったりしています。なのでその作法に従います。</p>

<p>ということで <code>site-cookbooks</code> というディレクトリをつくりましょう。おつぎに hello という Cookbook をつくります。</p>

<div class="code-frame" data-lang="sh"><div class="highlight"><pre><span></span><span class="nb">cd</span> site-cookbooks
berks cookbook hello
<span class="nb">cd</span> -
</pre></div></div>

<p>なにやら <code>hello/</code> 以下にいろいろ出力されたと思いますが、重要なのは <code>hello/recipes/default.rb</code> だけです。編集しましょう。</p>

<div class="code-frame" data-lang="ruby">
<div class="code-lang"><span class="bold">hello/recipes/default.rb</span></div>
<div class="highlight"><pre><span></span><span class="n">log</span> <span class="s2">"Hello World!!!!!!!!!!!!!"</span>
</pre></div>
</div>

<p>次に <code>Vagrantfile</code> と <code>Berksfile</code> に Berkshelf と vagrant-berkshelf プラグインのための設定を書いていきます。</p>

<div class="code-frame" data-lang="ruby">
<div class="code-lang"><span class="bold">Vagrantfile</span></div>
<div class="highlight"><pre><span></span><span class="no">Vagrant</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="no">VAGRANTFILE_API_VERSION</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">config</span><span class="o">|</span>
  <span class="c1"># ...</span>
  <span class="n">config</span><span class="o">.</span><span class="n">omnibus</span><span class="o">.</span><span class="n">chef_version</span> <span class="o">=</span> <span class="ss">:latest</span>
  <span class="n">config</span><span class="o">.</span><span class="n">berkshelf</span><span class="o">.</span><span class="n">enabled</span> <span class="o">=</span> <span class="kp">true</span>
  <span class="c1"># ...</span>
<span class="k">end</span>
</pre></div>
</div>

<div class="code-frame" data-lang="ruby">
<div class="code-lang"><span class="bold">Berksfile</span></div>
<div class="highlight"><pre><span></span><span class="n">site</span> <span class="ss">:opscode</span>
<span class="n">cookbook</span> <span class="s2">"hello"</span><span class="p">,</span> <span class="ss">path</span><span class="p">:</span> <span class="s2">"site-cookbooks/hello"</span>
</pre></div>
</div>

<p>最後に Chef Solo の設定を <code>Vagrantfile</code> に書き足します。</p>

<div class="code-frame" data-lang="ruby">
<div class="code-lang"><span class="bold">Vagrantfile</span></div>
<div class="highlight"><pre><span></span><span class="no">Vagrant</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="no">VAGRANTFILE_API_VERSION</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">config</span><span class="o">|</span>
  <span class="c1"># ...</span>
  <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">provision</span> <span class="ss">:chef_solo</span> <span class="k">do</span> <span class="o">|</span><span class="n">chef</span><span class="o">|</span>
    <span class="n">chef</span><span class="o">.</span><span class="n">run_list</span> <span class="o">=</span> <span class="o">[</span><span class="s2">"hello"</span><span class="o">]</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</div>

<p>最終的に <code>Vagrantfile</code> は次のようになります。</p>

<div class="code-frame" data-lang="ruby">
<div class="code-lang"><span class="bold">Vagrantfile</span></div>
<div class="highlight"><pre><span></span><span class="c1"># -*- mode: ruby -*-</span>
<span class="c1"># vi: set ft=ruby :</span>

<span class="c1"># Vagrantfile API/syntax version. Don't touch unless you know what you're doing!</span>
<span class="no">VAGRANTFILE_API_VERSION</span> <span class="o">=</span> <span class="s2">"2"</span>

<span class="no">Vagrant</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="no">VAGRANTFILE_API_VERSION</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">config</span><span class="o">|</span>

  <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">box</span> <span class="o">=</span> <span class="s2">"Debian7"</span>
  <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">box_url</span> <span class="o">=</span> <span class="s2">"https://opscode-vm-bento.s3.amazonaws.com/vagrant/opscode_debian-7.1.0_provisionerless.box"</span>
  <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">network</span> <span class="ss">:private_network</span><span class="p">,</span> <span class="ss">ip</span><span class="p">:</span> <span class="s2">"192.168.33.10"</span>

  <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">provider</span> <span class="ss">:virtualbox</span> <span class="k">do</span> <span class="o">|</span><span class="n">vb</span><span class="o">|</span>
    <span class="n">vb</span><span class="o">.</span><span class="n">gui</span> <span class="o">=</span> <span class="kp">false</span>
    <span class="n">vb</span><span class="o">.</span><span class="n">customize</span> <span class="o">[</span><span class="s2">"modifyvm"</span><span class="p">,</span> <span class="ss">:id</span><span class="p">,</span> <span class="s2">"--memory"</span><span class="p">,</span> <span class="s2">"1024"</span><span class="o">]</span>
  <span class="k">end</span>

  <span class="n">config</span><span class="o">.</span><span class="n">berkshelf</span><span class="o">.</span><span class="n">enabled</span> <span class="o">=</span> <span class="kp">true</span>
  <span class="n">config</span><span class="o">.</span><span class="n">omnibus</span><span class="o">.</span><span class="n">chef_version</span> <span class="o">=</span> <span class="ss">:latest</span>

  <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">provision</span> <span class="ss">:chef_solo</span> <span class="k">do</span> <span class="o">|</span><span class="n">chef</span><span class="o">|</span>
    <span class="n">chef</span><span class="o">.</span><span class="n">run_list</span> <span class="o">=</span> <span class="o">[</span><span class="s2">"hello"</span><span class="o">]</span>
  <span class="k">end</span>

<span class="k">end</span>
</pre></div>
</div>

<p>それではお待ちかねの <code>vagrant up</code> をしましょう！</p>

<p>まずは最初に立ち上げた VM を捨てて新しく up します。</p>

<div class="code-frame" data-lang="sh"><div class="highlight"><pre><span></span>vagrant destroy
</pre></div></div>

<p><code>y</code> と答えて無事デストロイされればお次は up です。</p>

<div class="code-frame" data-lang="sh"><div class="highlight"><pre><span></span>vagrant up
</pre></div></div>

<p>おそらく Chef のインストールにそれなりに時間がかかることと思います。VM の起動 -&gt; Chef のインストール -&gt; Chef Solo の実行、とうまく動けば成功です。ログに <code>Hello World!!!!</code> って表示されましたか？うんうん、表示された？やりましたね！</p>

<h2>
<span id="mysql-をインストール" class="fragment"></span><a href="#mysql-%E3%82%92%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB"><i class="fa fa-link"></i></a>MySQL をインストール☆</h2>

<p>最後にコミュニティの Cookbook を使ってみましょう。</p>

<p><a href="https://github.com/opscode-cookbooks/mysql" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/opscode-cookbooks/mysql</a></p>

<p>他の人が作った Cookbook を使う時のコツは README を読んで、そのあと <code>attributes/</code> と <code>recipes/</code> 以下を読むことです。この2つが Chef Solo では大きなキーです。</p>

<p>まずは README の <code>Attributes</code> の欄を読んでみます。大体ここは Chef 実行時に自分用に書き換えれる設定の一覧になってます。もし README に情報がなければ <code>attributes</code> 以下のファイルを直接読みましょう。OS 毎に設定を振り分けてるくらいであんまり難しくないです。</p>

<p>なんとなく設定項目がわかったら <code>Usage</code> を読みます。Opscode の MySQL Cookbook は親切にも Chef Solo の時のメモを書いてくれています！</p>

<p>さて大体のことはわかったと思いますので実践してみましょう。</p>

<h3>
<span id="設定ファイルカキカキ" class="fragment"></span><a href="#%E8%A8%AD%E5%AE%9A%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%82%AB%E3%82%AD%E3%82%AB%E3%82%AD"><i class="fa fa-link"></i></a>設定ファイルカキカキ</h3>

<p>まずは Berkshelf に MySQL Cookbook を使うってことを教えましょう。<code>Berksfile</code> にこう書き加えます。</p>

<div class="code-frame" data-lang="ruby">
<div class="code-lang"><span class="bold">Berksfile</span></div>
<div class="highlight"><pre><span></span><span class="n">cookbook</span> <span class="s2">"mysql"</span>
</pre></div>
</div>

<p>これだけで Opscode のサービスから Cookbook をインストールしてくれます。インストール先はデフォルトだと <code>~/.berkshelf</code> になるようです。</p>

<p>ではおつぎに Attributes の指定をします。この Attributes は Chef 本来のサーバー/クライアント運用であれば JSON 形式でサーバーからクライアントに渡されるものなので Vagrant-Chef でも <code>chef.json</code> という名前になっているようです。Hash で Attrubutes を設定していきます。</p>

<div class="code-frame" data-lang="ruby">
<div class="code-lang"><span class="bold">Vagrantfile</span></div>
<div class="highlight"><pre><span></span>  <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">provision</span> <span class="ss">:chef_solo</span> <span class="k">do</span> <span class="o">|</span><span class="n">chef</span><span class="o">|</span>
    <span class="n">chef</span><span class="o">.</span><span class="n">run_list</span> <span class="o">=</span> <span class="o">[</span>
      <span class="s2">"hello"</span><span class="p">,</span>
      <span class="s2">"mysql::client"</span><span class="p">,</span>
      <span class="s2">"mysql::server"</span>
    <span class="o">]</span>

    <span class="n">chef</span><span class="o">.</span><span class="n">json</span> <span class="o">=</span> <span class="p">{</span>
      <span class="ss">mysql</span><span class="p">:</span> <span class="p">{</span>
        <span class="ss">server_root_password</span><span class="p">:</span> <span class="s2">"iloverandompasswordsbutthiswilldo"</span><span class="p">,</span>
        <span class="ss">server_repl_password</span><span class="p">:</span> <span class="s2">"iloverandompasswordsbutthiswilldo"</span><span class="p">,</span>
        <span class="ss">server_debian_password</span><span class="p">:</span> <span class="s2">"iloverandompasswordsbutthiswilldo"</span><span class="p">,</span>
        <span class="ss">bind_address</span><span class="p">:</span> <span class="s2">"127.0.0.1"</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="k">end</span>
</pre></div>
</div>

<p>ついでに Chef の <code>run_list</code> にも実行するレシピとして mysql レシピを追加しています。これは Opscode の MySQL Cookbooks の <code>recipes/</code> 以下を見てもらえるとわかるのですが、このように <code>run_list</code> を設定すると <code>recipes</code> 以下の対応する名前のレシピが実行されます。Cookbook の名前のみを指定した場合(ここでは <code>hello</code> がそれ)、その Cookbook の <code>recipes/default.rb</code> が実行されます。</p>

<p>では VM を調理しましょう。えいや！</p>

<div class="code-frame" data-lang="sh"><div class="highlight"><pre><span></span>vagrant provision
</pre></div></div>

<p>オオー、上手に焼けました！さてさてうまくインストールされたか確認しましょう。</p>

<div class="code-frame" data-lang="sh"><div class="highlight"><pre><span></span>vagrant ssh

<span class="c1"># VM 上で</span>
mysql -uroot -piloverandompasswordsbutthiswilldo
</pre></div></div>

<p>MySQL サーバーにつなげたでしょうか？このようにして、コミュニティの Cookbook を有効活用できれば VM 構築がもっと楽になりますよ！</p>

<h2>
<span id="ボクタチのこれから" class="fragment"></span><a href="#%E3%83%9C%E3%82%AF%E3%82%BF%E3%83%81%E3%81%AE%E3%81%93%E3%82%8C%E3%81%8B%E3%82%89"><i class="fa fa-link"></i></a>ボクタチのこれから</h2>

<p>くぅ～疲れましたw これにて完結です！</p>

<p>たぶん、この分量だといろいろ足りなかったとおもいます。なので学習のポインタをカキカキさせて頂いておわりにします。</p>

<p>Vagrant について<br>
* 公式サイトが良いです。 <a href="http://docs.vagrantup.com/v2/" class="autolink" rel="nofollow noopener" target="_blank">http://docs.vagrantup.com/v2/</a><br>
* ベンリ Vagrant プラグイン <a href="https://github.com/jedi4ever/sahara" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/jedi4ever/sahara</a></p>

<p>Chef について<br>
* Docs <a href="http://docs.opscode.com/" class="autolink" rel="nofollow noopener" target="_blank">http://docs.opscode.com/</a> の Cookbooks あたりを読むと必要な情報が手に入ります。<br>
* まずは Resources を覚えるところからがいいと思います。 <a href="http://docs.opscode.com/resource.html" class="autolink" rel="nofollow noopener" target="_blank">http://docs.opscode.com/resource.html</a></p>

<p>Berkshelf について<br>
* 公式サイトが良いです。 <a href="http://berkshelf.com/" class="autolink" rel="nofollow noopener" target="_blank">http://berkshelf.com/</a><br>
* <code>:path</code> 指定してローカルの Cookbook を参照できたように <code>:git</code> とか <code>:github</code> とかのオプションを渡すとそこの Cookbook を参照できます。ベンリ！</p>

<p>Ruby のリテラルについて<br>
* たぶん Ruby を知らない人は%記法にびっくりすると思うので <a href="http://doc.ruby-lang.org/ja/2.0.0/doc/spec=2fliteral.html#percent" class="autolink" rel="nofollow noopener" target="_blank">http://doc.ruby-lang.org/ja/2.0.0/doc/spec=2fliteral.html#percent</a></p>

<p>Cookbook について<br>
* <a href="https://github.com/opscode-cookbooks" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/opscode-cookbooks</a> にベンリ Cookbook がある。<br>
* なにかしたいことがあれば "したいこと cookbook" とかでググればわりと出やすい。その場合 github に置かれていることが多いので Berkshelf の <code>:github</code> オプションが役に立ちます。</p>

<p><strong>それでは楽しい Vagrant ライフを！</strong></p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1" style="height:150px;">
<tr>
	<td rowspan="3">39位</td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="thumb-up-120px.png" /></i>1069</kbd>
		<a target="_blank" href="https://qiita.com/KDKTN/items/4c6986049d204f0645d8">コールバック……駆逐してやる…この世から…一匹…残らず!!</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-08-16<br />19:12:28</center>
	</td>
	<td style="width:200px;">
		<!--投稿者-->
		<center>
			@<a href="user/17886.html">KDKTN</a>(5件の記事)<br />(私立リリアン女学園高等部 所属)<br><img width="80" height="80" src="https://pbs.twimg.com/profile_images/3438615386/d591fae08d7433a2149c04ff8995ceec_normal.png">
		</center>
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[JavaScript]</b> <b>[Haskell]</b> <b>[jQuery]</b> <b>[TypeScript]</b> <b>[async]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<!--
		<div style="width:350px;height:150px;overflow:scroll;">%s</div>
		-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>このテキストは JavaScript のコールバック地獄に疲れたひとのためのコールバック駆逐術指南書です。対象読者は JavaScript道初段くらいの人です。このテキストを読むと、以下のそれぞれの手段における非同期処理制御の仕組み、利点および欠点がわかるようになるかもしれません。</p>

<ul>
<li>コールバック地獄</li>
<li>jQuery.Deferred</li>
<li>async.js</li>
<li>Concurrent.Thread</li>
<li>generators</li>
<li>co</li>
<li>fibers</li>
<li>Web Workers</li>
</ul>

<p>(※なぜか『進撃の巨人』の一部ネタバレが含まれるので注意してください)</p>

<h2>
<span id="それは何故人はコールバックするのかという話でしょうか" class="fragment"></span><a href="#%E3%81%9D%E3%82%8C%E3%81%AF%E4%BD%95%E6%95%85%E4%BA%BA%E3%81%AF%E3%82%B3%E3%83%BC%E3%83%AB%E3%83%90%E3%83%83%E3%82%AF%E3%81%99%E3%82%8B%E3%81%AE%E3%81%8B%E3%81%A8%E3%81%84%E3%81%86%E8%A9%B1%E3%81%A7%E3%81%97%E3%82%87%E3%81%86%E3%81%8B"><i class="fa fa-link"></i></a>それは『何故人はコールバックするのか』という話でしょうか？</h2>

<p>非同期処理って面倒ですよね。JavaScriptではいわゆる <strong>コールバック地獄</strong> というやつにしばしば陥りがちです。たとえば、Ajax でふたつのファイル hoge.txt と piyo.txt を持ってきて、それらを結合してコンソールに出力したいとします。もし同期的にリモートのファイルを読み込む関数 <code>get</code> があるとしたら、次のように書けるはずです。</p>

<div class="code-frame" data-lang="js"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">hoge</span> <span class="o">=</span> <span class="nx">get</span><span class="p">(</span><span class="s2">"hoge.txt"</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">piyo</span> <span class="o">=</span> <span class="nx">get</span><span class="p">(</span><span class="s2">"piyo.txt"</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">hoge</span> <span class="o">+</span> <span class="nx">piyo</span><span class="p">);</span>
</pre></div></div>

<p>でもそんな同期的な関数は JavaScript にはありません(XMLHttpRequest#open には同期的に読み込むオプションもありますが、パフォーマンス上の問題があることから使用は勧められません。Nodeにも同期的なファイル読み込み関数 <code>fs.readFileSync</code> がありますが、XHR と同様の理由であまり使用は勧められません)。たとえば、jQuery で非同期でファイルを取得する関数 <code>$.get</code> を使ったとしても、素直に書くと次のような悲惨なことになるわけです。</p>

<div class="code-frame" data-lang="js"><div class="highlight"><pre><span></span><span class="nx">$</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">"hoge.txt"</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">hoge</span><span class="p">){</span>
    <span class="nx">$</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">"piyo.txt"</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">piyo</span><span class="p">){</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">hoge</span> <span class="o">+</span> <span class="nx">piyo</span><span class="p">);</span>        
    <span class="p">});</span>
<span class="p">});</span>
</pre></div></div>

<p>もし非同期だけど直列に処理したいモノが３つ、４つと増えていったとすると、それにしたがってさらにネストは深くなっていきます。あまりネストが深くなるとソースコードが読みづらいので、自分などはたまにネストを押しつぶして次のように書いたりします。</p>

<div class="code-frame" data-lang="js"><div class="highlight"><pre><span></span><span class="c1">// こういうパターンを見たら、心のなかで var hoge = $.get("hoge.txt") と読み替える</span>
<span class="nx">$</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">"hoge.txt"</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">hoge</span><span class="p">){</span>    

<span class="c1">// なんだか var piyo = $.get("piyo.txt") に見えてきたぞ……？</span>
<span class="nx">$</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">"piyo.txt"</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">piyo</span><span class="p">){</span>

<span class="c1">// どうみても var nyan = $.get("nyan.txt") ですね</span>
<span class="nx">$</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">"nyan.txt"</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">nyan</span><span class="p">){</span>

<span class="c1">// var myon = $.get("myon.txt") のどこにコールバックが？</span>
<span class="nx">$</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">"myon.txt"</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">myon</span><span class="p">){</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">hoge</span> <span class="o">+</span> <span class="nx">piyo</span> <span class="o">+</span> <span class="nx">nyan</span> <span class="o">+</span> <span class="nx">nyan</span><span class="p">);</span>        




<span class="p">});});});});</span> <span class="c1">// ←見なかったことにしよう！(＾o＾)b</span>
</pre></div></div>

<p>JavaScripter は5重、6重のネストが書けるようになって一人前。熟練した JavaScript 職人は、息をするように20重や30重のネストを書きます。いやそんなことはないです。そして、本当の恐怖はエラー処理をちゃんと書くときに始まります。同期的な処理なら try/catch で囲めばまるごと例外を捕獲できますが、こういう非同期処理だといちいち個別に例外処理しなければなりません。なんとかならないものでしょうか。</p>

<h2>
<span id="有害なコールバックを駆除したたまたまjquerydeferredと恰好が似ていただけだ" class="fragment"></span><a href="#%E6%9C%89%E5%AE%B3%E3%81%AA%E3%82%B3%E3%83%BC%E3%83%AB%E3%83%90%E3%83%83%E3%82%AF%E3%82%92%E9%A7%86%E9%99%A4%E3%81%97%E3%81%9F%E3%81%9F%E3%81%BE%E3%81%9F%E3%81%BEjquerydeferred%E3%81%A8%E6%81%B0%E5%A5%BD%E3%81%8C%E4%BC%BC%E3%81%A6%E3%81%84%E3%81%9F%E3%81%A0%E3%81%91%E3%81%A0"><i class="fa fa-link"></i></a>有害なコールバックを駆除した!!たまたまjQuery.deferredと恰好が似ていただけだ!!</h2>

<p>こうした非同期処理の煩雑さを解決するために実に数多くの手段が考えだされてきましたが、その手段は大きくわけて２つあると思います。</p>

<ul>
<li>ネストが深くならないように、コールバックの構造を変形する(jQuery.Deferred, async.js など)</li>
<li>スレッド/ファイバー/コルーチンで処理の流れを複数つくり、同期処理する(generators, fibers, Web Workers など)</li>
</ul>

<p>前者の方法はあくまで非同期処理であり、現在の JavaScript でも実現可能な方法です。現在ごく一般的に行われているコールバックを駆使する方法の延長線上にあるので比較的理解しやすいでしょう。ただし解決は部分的であることがほとんどで、同期処理ほどの読みやすいコードが実現できることは稀です。</p>

<p>それに対し、後者の方法は現在の JavaScript 環境にまったく新しい機能を追加し同期処理できるようにするというものなので、非同期処理にまつわる煩雑さはほとんど解決しますが、使える環境がまだまだ限られることがほとんどです。また、これまで同期処理ができなかった部分が同期処理できるようになったとしても、その同期処理どうしが並列に処理されるというような複雑なケースも発生しうることがあり、同期処理と非同期処理が混在していてもわかりやすくコントロールする手段はやはり必要になります。</p>

<p>本テキストでは主に前者のカテゴリの手段についてどのようなものであるかを検討していきます。ただし、後者の手段を以ってしも非同期処理の煩雑さは残されることがあり、そういった残された問題をどう解決するかも含めて包括的に検討していきます。</p>

<p>まずは前者のカテゴリの手段を幾つか見ていきましょう。JavaScript の有名なライブラリといえば jQuery はまっさきに挙げられるもののひとつですが、jQuery にもこうした非同期処理の煩雑さを解消しようとする機能、 <a href="http://api.jquery.com/category/deferred-object/" rel="nofollow noopener" target="_blank">jQuery.deferred</a> があります。ちまたで話題の jQuery.deferred を使えば、さっきみたいなネスト地獄のコードもきっとおしゃれに書けるはず……！</p>

<div class="code-frame" data-lang="js"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">hoge</span><span class="p">;</span>
<span class="nx">$</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">"hoge.txt"</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">_hoge</span><span class="p">){</span>
        <span class="nx">hoge</span> <span class="o">=</span> <span class="nx">_hoge</span><span class="p">;</span>
        <span class="k">return</span> <span class="nx">$</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">"piyo.txt"</span><span class="p">);</span>
    <span class="p">})</span>
    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">piyo</span><span class="p">){</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">hoge</span> <span class="o">+</span> <span class="nx">piyo</span><span class="p">);</span>        
    <span class="p">});</span>
</pre></div></div>

<p>えっ……確かにネストは増えていかないけど、なんかむしろキモさが増してる気が……！だいたい、いったんコールバックの外の変数に待避しないと次のコールバックで参照できないとか、なんかもう根本から破綻してるとしか思えません。これならさっきのネスト地獄のほうがまだわかりやすいレベル。</p>

<p>は◯ブのほうで『 jQuery.deferred の例のコードがキモいのは、お前の使い方が悪いだけじゃね？』（意訳）という声を見かけたので、もう少し詳しく検討してみます。jQuery.deferred の圧倒的実力を見せつけてやろうではないですか。</p>

<p>上記の例では、<code>$.get("hoge.txt")</code> の結果が <code>then</code> のコールバックの引数 <code>hoge</code> に渡されてくるわけなのですが、このコールバックを抜けるから <code>hoge</code> にアクセスできなくなって、いったん外の変数に退避しなければならなくなったわけでした。したがって、これを抜ける前に続けて <code>$.get("piyo.txt")</code> の結果のほうまで受け取ってしまえばいいのではないでしょうか。コードは次のようになります。</p>

<div class="code-frame" data-lang="js"><div class="highlight"><pre><span></span><span class="nx">$</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">"hoge.txt"</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">_hoge</span><span class="p">){</span>
        <span class="k">return</span> <span class="nx">$</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">"piyo.txt"</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">piyo</span><span class="p">){</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">hoge</span> <span class="o">+</span> <span class="nx">piyo</span><span class="p">);</span>
        <span class="p">});;</span>
    <span class="p">});</span>
</pre></div></div>

<p>無駄な退避用の変数がなくなりました！……  <strong>って、これさっきのコールバック地獄じゃないですか</strong> 。使うファイルが増えるとどんどんネストが深くなっていきます。コールバック地獄を逃れようとして jQuery.deferred にすがったのに、これではあんまり意味がありません。</p>

<p>まだだ……まだ終わらんよ……！あの jQuery がこの程度の実力なわけがない！そうだ！最後にまとめてそれぞれの結果にアクセスしようとするのが良くないのでしょう。このように順番に処理していく場合、直前の処理から受け取れるのは基本的に１個まで。今回の目的だととにかく最終的に全部つながった文字列が得られればいいのだから、それぞれの <code>$.get</code> が終わったその時点で、それまでの文字列を積算してしまえばいいのです。つまり、あらたに次のような Deferred を作る関数 <code>accum</code> を定義しましょう。他人に与えられた deferred を使うだけなんて素人のやること、オリジナル Deferred を作ってこそ真の jQuery 使いといえます。</p>

<div class="code-frame" data-lang="js"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">accum</span><span class="p">(</span><span class="nx">path</span><span class="p">){</span>
    <span class="k">return</span> <span class="kd">function</span><span class="p">(</span><span class="nx">previous</span><span class="p">){</span>
        <span class="kd">var</span> <span class="nx">def</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">$</span><span class="p">.</span><span class="nx">Deferred</span><span class="p">();</span>
        <span class="nx">$</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">path</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">){</span>
            <span class="nx">def</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">previous</span> <span class="o">+</span> <span class="nx">data</span><span class="p">);</span>
        <span class="p">});</span>
        <span class="k">return</span> <span class="nx">def</span><span class="p">.</span><span class="nx">promise</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">"hoge.txt"</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">accum</span><span class="p">(</span><span class="s2">"piyo.txt"</span><span class="p">))</span>
    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">accum</span><span class="p">(</span><span class="s2">"pyon.txt"</span><span class="p">))</span>
    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">accum</span><span class="p">(</span><span class="s2">"nyan.txt"</span><span class="p">))</span>
    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">){</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
    <span class="p">});</span>

</pre></div></div>

<p>よし、これで OK! ネストも深くなっていかない！素晴らしい！……え？今度は piyo.txt のテキストだけ、全部大文字にしてくれだって？<code>accum</code> ではそんな処理はできません。じゃあまた新たにファイルを読み込んでそれを大文字にする deferred を定義して……。</p>

<p>め　ん　ど　く　さ　い。同期処理なら <code>hoge + piyo.toUpperCase() + pyon + nyan</code> で済むのに、なんでちょっと処理が変わるたびに新たな deferred を定義しなければならないのでしょうか。じゃ、じゃあ、全部配列にして送ってしまえばいい！</p>

<div class="code-frame" data-lang="js"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">accum2</span><span class="p">(</span><span class="nx">path</span><span class="p">){</span>
    <span class="k">return</span> <span class="kd">function</span><span class="p">(</span><span class="nx">array</span><span class="p">){</span>
        <span class="kd">var</span> <span class="nx">def</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">$</span><span class="p">.</span><span class="nx">Deferred</span><span class="p">();</span>
        <span class="nx">$</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">path</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">){</span>
            <span class="nx">array</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
            <span class="nx">def</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">array</span><span class="p">);</span>
        <span class="p">});</span>
        <span class="k">return</span> <span class="nx">def</span><span class="p">.</span><span class="nx">promise</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kd">var</span> <span class="nx">def</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">$</span><span class="p">.</span><span class="nx">Deferred</span><span class="p">();</span>
<span class="nx">def</span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">accum2</span><span class="p">(</span><span class="s2">"hoge.txt"</span><span class="p">))</span>
<span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">accum2</span><span class="p">(</span><span class="s2">"piyo.txt"</span><span class="p">))</span>
<span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">accum2</span><span class="p">(</span><span class="s2">"pyon.txt"</span><span class="p">))</span>
<span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">accum2</span><span class="p">(</span><span class="s2">"nyan.txt"</span><span class="p">))</span>
<span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">array</span><span class="p">){</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">array</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="nx">array</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="nx">toUpperCase</span><span class="p">()</span> <span class="o">+</span> <span class="nx">array</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">+</span> <span class="nx">array</span><span class="p">[</span><span class="mi">3</span><span class="p">]);</span>
<span class="p">});</span>
<span class="nx">def</span><span class="p">.</span><span class="nx">resolve</span><span class="p">([]);</span>
</pre></div></div>

<p><strong>って配列かよ！</strong> hoge とか piyo とかの名前はどこにいったんだよ！<code>array[3]</code> とか言われてもどのファイルの中身なのかさっぱりわからんよ！ちゃんと意味のあるデータを適当に配列に突っ込んじゃいけないって、プログラミング初めて習った時に口酸っぱくいわれたよ！</p>

<p>そうか、直列に処理するからいけないんだ。<code>$.when</code> を使って並列に処理すれば……。</p>

<div class="code-frame" data-lang="js"><div class="highlight"><pre><span></span><span class="nx">$</span><span class="p">.</span><span class="nx">when</span><span class="p">(</span><span class="nx">$</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">"hoge.txt"</span><span class="p">),</span> <span class="nx">$</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">"piyo.txt"</span><span class="p">)).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">hoge</span><span class="p">,</span> <span class="nx">piyo</span><span class="p">){</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">hoge</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="nx">piyo</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
<span class="p">});</span>
</pre></div></div>

<p>うーん。さっきよりはずっとマシになったかな。なんで結果の <code>hoge</code> と <code>piyo</code> が配列になってるの？<code>[0]</code>とかなんなん？というのはまあ目をつぶるとして、<code>$.get("hoge")</code> と <code>hoge</code> がやけに離れた位置になってしまいました。同期的に書いていた時には <code>var hoge = get("hoge");</code> みたいに一行ごとにまとまっていたのに……。もし必要なファイルが増えていくと、さらに離れ離れになっていって、どれとどれが対応しているのかもはやわからなくなってしまいます。同じような処理を追加しているのに、やけに離れた位置を２箇所づつ編集することになります。</p>

<div class="code-frame" data-lang="js"><div class="highlight"><pre><span></span><span class="nx">$</span><span class="p">.</span><span class="nx">when</span><span class="p">(</span>
    <span class="nx">$</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">"hoge.txt"</span><span class="p">),</span> 
    <span class="nx">$</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">"piyo.txt"</span><span class="p">),</span> 
    <span class="nx">$</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">"nyan.txt"</span><span class="p">),</span>   <span class="c1">// 増えた</span>
    <span class="nx">$</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">"myon.txt"</span><span class="p">),</span>   <span class="c1">// 増えた</span>
    <span class="nx">$</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">"pong.txt"</span><span class="p">),</span>   <span class="c1">// 増えた</span>
    <span class="nx">$</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">"chun.txt"</span><span class="p">)</span>    <span class="c1">// 増えた</span>
<span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span>
    <span class="nx">hoge</span><span class="p">,</span> 
    <span class="nx">piyo</span><span class="p">,</span>
    <span class="nx">nyan</span><span class="p">,</span>   <span class="c1">// 増えた</span>
    <span class="nx">pong</span><span class="p">,</span>   <span class="c1">// 増えた</span>
    <span class="nx">myon</span><span class="p">,</span>   <span class="c1">// 増えた</span>
    <span class="nx">chun</span>    <span class="c1">// 増えた</span>
<span class="p">){</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">hoge</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="nx">piyo</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="nx">nyan</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="nx">pong</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="nx">myon</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="nx">chun</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
<span class="p">});</span>
</pre></div></div>

<p>これだとうっかり非同期処理とその結果を代入する変数の順番を間違えるようなこともありそうです。上記のコード、実は <code>myon</code> と <code>pong</code> の変数の順序が入れ替わっています。お気付きになったでしょうか。気付くわけないですよね。</p>

<p>これが同期的だったら、次にように一行づつ編集して増やせるのに……。非同期処理とその結果を代入する変数が一行ごとにまとまっているので、jQuery.Deferred のものより遥かに読みやすく書きやすいと思います。</p>

<div class="code-frame" data-lang="js"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">hoge</span> <span class="o">=</span> <span class="nx">get</span><span class="p">(</span><span class="s2">"hoge.txt"</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">piyo</span> <span class="o">=</span> <span class="nx">get</span><span class="p">(</span><span class="s2">"piyo.txt"</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">nyan</span> <span class="o">=</span> <span class="nx">get</span><span class="p">(</span><span class="s2">"nyan.txt"</span><span class="p">);</span>  <span class="c1">// 増えた</span>
<span class="kd">var</span> <span class="nx">pong</span> <span class="o">=</span> <span class="nx">get</span><span class="p">(</span><span class="s2">"pong.txt"</span><span class="p">);</span>  <span class="c1">// 増えた</span>
<span class="kd">var</span> <span class="nx">myon</span> <span class="o">=</span> <span class="nx">get</span><span class="p">(</span><span class="s2">"myon.txt"</span><span class="p">);</span>  <span class="c1">// 増えた</span>
<span class="kd">var</span> <span class="nx">chun</span> <span class="o">=</span> <span class="nx">get</span><span class="p">(</span><span class="s2">"chun.txt"</span><span class="p">);</span>  <span class="c1">// 増えた</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">hoge</span> <span class="o">+</span> <span class="nx">piyo</span> <span class="o">+</span> <span class="nx">nyan</span> <span class="o">+</span> <span class="nx">pong</span> <span class="o">+</span> <span class="nx">myon</span> <span class="o">+</span> <span class="nx">chun</span><span class="p">);</span>
</pre></div></div>

<p>また、今回はたまたま hoge.txt の piyo.txt の読み込みは独立しているので <code>$.when</code> で並列に処理できますが、もし一方の処理がもう一方に依存している場合、たとえば hoge.txt には別のファイルのパスが書かれていて、次にそのパスのファイルを読まなければならない場合には並列には処理できません。その場合はさっきの書きづらいバージョンに戻るしかありません。</p>

<p>いろいろ検討してみましたが、ネストを増やさずに、しかもなるべく自然にそれぞれの非同期処理の結果にアクセスしようとすると、結局のところ外の変数に退避するのが一番手っ取り早いように思いました。もし何かもっといい方法があったら教えて下さい。自分には jQuery.deferred は使いこなせませんでした。でも俺が敗れ去っても、第二、第三の jQuery.deferred 使いが現れ、その真の実力を引き出してくれるでしょう。きっと。</p>

<h2>
<span id="asyncjsは調子に乗りすぎたいつか私が然るべき報いを" class="fragment"></span><a href="#asyncjs%E3%81%AF%E8%AA%BF%E5%AD%90%E3%81%AB%E4%B9%97%E3%82%8A%E3%81%99%E3%81%8E%E3%81%9F%E3%81%84%E3%81%A4%E3%81%8B%E7%A7%81%E3%81%8C%E7%84%B6%E3%82%8B%E3%81%B9%E3%81%8D%E5%A0%B1%E3%81%84%E3%82%92"><i class="fa fa-link"></i></a>async.jsは調子に乗りすぎた……いつか私が然るべき報いを</h2>

<p>非同期処理のフローを制御するライブラリとしては、<a href="https://github.com/caolan/async#parallel" rel="nofollow noopener" target="_blank">async.js</a> というものもあります。async.jsでもjQuery.deferredと似たような形式では書けるのですが、async.jsではさらに次のようも書けたりします。</p>

<div class="code-frame" data-lang="js"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">get</span><span class="p">(</span><span class="nx">path</span><span class="p">){</span>
    <span class="k">return</span> <span class="kd">function</span><span class="p">(</span><span class="nx">callback</span><span class="p">){</span>
        <span class="nx">$</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">path</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">){</span> <span class="nx">callback</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="nx">data</span><span class="p">);</span> <span class="p">});</span>
    <span class="p">};</span>
<span class="p">}</span>

<span class="nx">async</span><span class="p">.</span><span class="nx">parallel</span><span class="p">({</span>
    <span class="nx">hoge</span><span class="o">:</span> <span class="nx">get</span><span class="p">(</span><span class="s2">"hoge.txt"</span><span class="p">),</span>
    <span class="nx">piyo</span><span class="o">:</span> <span class="nx">get</span><span class="p">(</span><span class="s2">"piyo.txt"</span><span class="p">)</span>
<span class="p">},</span>
<span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">results</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">results</span><span class="p">.</span><span class="nx">hoge</span> <span class="o">+</span> <span class="nx">results</span><span class="p">.</span><span class="nx">piyo</span><span class="p">);</span>
<span class="p">});</span>
</pre></div></div>

<p><code>parallel</code> は <code>jQuery.when</code> と同様に並列に非同期処理する関数なのですが、名前と処理のテーブルとしてオブジェクトを渡すことができ、並列処理後に呼ばれるコールバックの引数のオブジェクトには、同名のプロパティで結果が格納されています。おお！わりとおしゃれだ！非同期で得たデータがそれぞれ直接変数に代入されるんじゃなくて <code>results</code> というオブジェクトにまとめられてるのはまあ許すとして、なんといっても <code>hoge: get("hoge.txt")</code> っていうかんじで <code>hoge</code> と <code>get("hoge.txt")</code> がすぐとなりにあるのが(・∀・)ｲｲ!! これなら処理がもっと増えていっても自然に追加できる！</p>

<div class="code-frame" data-lang="js"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">get</span><span class="p">(</span><span class="nx">path</span><span class="p">){</span>
    <span class="k">return</span> <span class="kd">function</span><span class="p">(</span><span class="nx">callback</span><span class="p">){</span>
        <span class="nx">$</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">path</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">){</span> <span class="nx">callback</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="nx">data</span><span class="p">);</span> <span class="p">});</span>
    <span class="p">};</span>
<span class="p">}</span>

<span class="nx">async</span><span class="p">.</span><span class="nx">parallel</span><span class="p">({</span>
    <span class="nx">hoge</span><span class="o">:</span> <span class="nx">get</span><span class="p">(</span><span class="s2">"hoge.txt"</span><span class="p">),</span>
    <span class="nx">piyo</span><span class="o">:</span> <span class="nx">get</span><span class="p">(</span><span class="s2">"piyo.txt"</span><span class="p">),</span>
    <span class="nx">nyan</span><span class="o">:</span> <span class="nx">get</span><span class="p">(</span><span class="s2">"nyan.txt"</span><span class="p">),</span>  <span class="c1">// 増えた</span>
    <span class="nx">pong</span><span class="o">:</span> <span class="nx">get</span><span class="p">(</span><span class="s2">"pong.txt"</span><span class="p">),</span>  <span class="c1">// 増えた</span>
    <span class="nx">myon</span><span class="o">:</span> <span class="nx">get</span><span class="p">(</span><span class="s2">"myon.txt"</span><span class="p">),</span>  <span class="c1">// 増えた</span>
    <span class="nx">chun</span><span class="o">:</span> <span class="nx">get</span><span class="p">(</span><span class="s2">"chun.txt"</span><span class="p">)</span>   <span class="c1">// 増えた</span>
<span class="p">},</span>
<span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">results</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">results</span><span class="p">.</span><span class="nx">hoge</span> <span class="o">+</span> <span class="nx">results</span><span class="p">.</span><span class="nx">piyo</span> <span class="o">+</span> <span class="nx">results</span><span class="p">.</span><span class="nx">nyan</span> <span class="o">+</span> <span class="nx">results</span><span class="p">.</span><span class="nx">pong</span> <span class="o">+</span> <span class="nx">results</span><span class="p">.</span><span class="nx">myon</span> <span class="o">+</span> <span class="nx">results</span><span class="p">.</span><span class="nx">chun</span><span class="p">);</span>
<span class="p">});</span>
</pre></div></div>

<p>だがちょっとまってほしい。<code>async.parallel</code> の型ってどうなっているんだろう？『 <strong>はあ!?なにいってんのおまえ!?</strong> 』とおっしゃるかもしれませんが、我々のような静的型付け過激派は動的型の JavaScript を書いている時でさえ型を意識するのです。そんな我々から見れば、こんな動的な API はまさしく粛清の対象。JavaScriptのようなヒトならざる魔性なら、他者の辛苦を蜜の味とするのも頷けます。でも、それは罪人の魂です。罰せられるべき悪徳です。</p>

<p>じゃあネスト地獄やjQuery.deferredはどうなんだよといいますと、実はネスト地獄スタイルやjQuery.deferredスタイルは一応ちゃんと静的型付けできるのです。試しにTypeScriptで型注釈をつけてみましょう(TypeScriptのステマ)。</p>

<div class="code-frame" data-lang="ts"><div class="highlight"><pre><span></span><span class="kr">declare</span> <span class="kd">var</span> <span class="nx">$</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">get</span><span class="p">(</span><span class="nx">path</span>: <span class="kt">string</span><span class="p">,</span> <span class="nx">callback</span><span class="o">:</span> <span class="p">(</span><span class="nx">data</span>: <span class="kt">string</span><span class="p">)</span><span class="o">=&gt;</span><span class="k">void</span><span class="p">)</span><span class="o">:</span> <span class="k">void</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">"hoge.txt"</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">hoge</span>: <span class="kt">string</span><span class="p">){</span>
    <span class="nx">$</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">"piyo.txt"</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">piyo</span>: <span class="kt">string</span><span class="p">){</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">hoge</span> <span class="o">+</span> <span class="nx">piyo</span><span class="p">);</span>        
    <span class="p">});</span>
<span class="p">});</span>
</pre></div></div>

<p>ネスト地獄は型付けという意味に関しては完璧です。一部の隙もありません。で……いや、やっぱりjQuery.deferredは静的型付けできませんでした。<code>$.when</code> に複数の引数を渡した場合、何をトチ狂ったのかコールバック関数の引数に <code>[data, textStatus, jqXHR]</code> という感じで全然違う型のオブジェクトをひとつの配列に押し込んで返してくるのが原因です。これが配列じゃなくてオブジェクトに入れて返してくるならちゃんとした静的型付けできるのですが……。自分に言わせれば、これはスタイルの問題というより単に jQuery の設計ミスだと思います。従って、jQuery.deferredスタイルも本質的には静的型付け可能、ということにしておきます。</p>

<p>それに対して、先ほどの <code>async.parallel</code> の場合では事前にどんなオブジェクトが渡されるかわかりませんから、どうにも静的型付けはできません。やっぱりネスト地獄やjQuery.deferredのほうがマシだったんだ！……いや、やっぱりどっちもどっちです。</p>

<h2>
<span id="俺にはわかるconcurrentthreadは本物の化け物だコールバックとは無関係になどんな力で押さえようともどんな檻に閉じこめようともコイツの意識を服従させることは誰にもできない" class="fragment"></span><a href="#%E4%BF%BA%E3%81%AB%E3%81%AF%E3%82%8F%E3%81%8B%E3%82%8Bconcurrentthread%E3%81%AF%E6%9C%AC%E7%89%A9%E3%81%AE%E5%8C%96%E3%81%91%E7%89%A9%E3%81%A0%E3%82%B3%E3%83%BC%E3%83%AB%E3%83%90%E3%83%83%E3%82%AF%E3%81%A8%E3%81%AF%E7%84%A1%E9%96%A2%E4%BF%82%E3%81%AB%E3%81%AA%E3%81%A9%E3%82%93%E3%81%AA%E5%8A%9B%E3%81%A7%E6%8A%BC%E3%81%95%E3%81%88%E3%82%88%E3%81%86%E3%81%A8%E3%82%82%E3%81%A9%E3%82%93%E3%81%AA%E6%AA%BB%E3%81%AB%E9%96%89%E3%81%98%E3%81%93%E3%82%81%E3%82%88%E3%81%86%E3%81%A8%E3%82%82%E3%82%B3%E3%82%A4%E3%83%84%E3%81%AE%E6%84%8F%E8%AD%98%E3%82%92%E6%9C%8D%E5%BE%93%E3%81%95%E3%81%9B%E3%82%8B%E3%81%93%E3%81%A8%E3%81%AF%E8%AA%B0%E3%81%AB%E3%82%82%E3%81%A7%E3%81%8D%E3%81%AA%E3%81%84"><i class="fa fa-link"></i></a>俺にはわかる、Concurrent.Threadは本物の化け物だ……『コールバック』とは無関係にな。どんな力で押さえようとも、どんな檻に閉じこめようとも、コイツの意識を服従させることは誰にもできない……！</h2>

<p><a href="http://sourceforge.net/apps/mediawiki/jsthread/index.php?title=Main_Page" rel="nofollow noopener" target="_blank">Concurrent.Thread</a> はJavaScriptで擬似的なマルチスレッドを実現するライブラリです。このライブラリでも <code>yield</code> ができるようですから、コールバック地獄の回避にも応用できそうです。どのようにして擬似的なマルチスレッドを実現しているかというと、JavaScript のソースコードをパースしてぶつ切りにし、setTimeout で適宜制御を譲りながら交互に実行することで擬似的なスレッドを構成するというもの。その発想がないわけではなかったが、まさか本当にやるとは思わなかった、という感想しかでてこない豪快な方法です。Web 上にはあまり情報がありませんが、作者自身による解説記事 <a href="http://www.infoq.com/jp/articles/js_multithread_2" rel="nofollow noopener" target="_blank">JavaScriptによるマルチスレッドの実現‐Concurrent.Threadの裏側</a> が参考になります。</p>

<p>Web 上で閲覧できるサンプルとしては<a href="http://jsdo.it/__gfx__/thread-example/" rel="nofollow noopener" target="_blank">Concurrent.Thread example</a>があります。一応Concurrent.Threadが吐き出したコードも眺めてみましたが、とてもヒトに理解できるコードではなかったので内部の理解は諦めました。なんかもうそこまでするなら、俺ならベースの言語として JavaScript じゃなくて静的型付けできる他の言語をベースに選ぶけど……。</p>

<p>環境を選ばずどこでも使えるのはメリットです。独自の形式に変換するので、デバッガがまともに使えないことが最大の欠点でしょうか。トラブルが起きた時の原因究明は絶望的です。JavaScript のパースも行うので、JavaScript の新しい機能は使えないでしょう。残念ながら、更新も止まっているようです。すごいライブラリには違いないのですが、あくまで研究用だと思っておくのがよさそうです。</p>

<h2>
<span id="私の特技はコールバックを削ぎ落とすことです必要に迫られればいつでも披露します私のgeneratorsを体験したい方がいればどうぞ一番先に近づいて来てください" class="fragment"></span><a href="#%E7%A7%81%E3%81%AE%E7%89%B9%E6%8A%80%E3%81%AF%E3%82%B3%E3%83%BC%E3%83%AB%E3%83%90%E3%83%83%E3%82%AF%E3%82%92%E5%89%8A%E3%81%8E%E8%90%BD%E3%81%A8%E3%81%99%E3%81%93%E3%81%A8%E3%81%A7%E3%81%99%E5%BF%85%E8%A6%81%E3%81%AB%E8%BF%AB%E3%82%89%E3%82%8C%E3%82%8C%E3%81%B0%E3%81%84%E3%81%A4%E3%81%A7%E3%82%82%E6%8A%AB%E9%9C%B2%E3%81%97%E3%81%BE%E3%81%99%E7%A7%81%E3%81%AEgenerators%E3%82%92%E4%BD%93%E9%A8%93%E3%81%97%E3%81%9F%E3%81%84%E6%96%B9%E3%81%8C%E3%81%84%E3%82%8C%E3%81%B0%E3%81%A9%E3%81%86%E3%81%9E%E4%B8%80%E7%95%AA%E5%85%88%E3%81%AB%E8%BF%91%E3%81%A5%E3%81%84%E3%81%A6%E6%9D%A5%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84"><i class="fa fa-link"></i></a>私の特技はコールバックを削ぎ落とすことです…必要に迫られればいつでも披露します…私のgeneratorsを体験したい方がいれば…どうぞ一番先に近づいて来てください</h2>

<p>さて、ここからは JavaScript に根本的に機能を追加して解決をはかる手段です。これらは同期的な処理を複数同時に行う、つまりマルチスレッディングを可能にしようというものですが、マルチスレッドもいくつかの種類にわけられます。</p>

<ol>
<li>メモリ空間を共有し、プリエンプティブに実行される古典的マルチスレッド</li>
<li>プリエンプティブに実行されるがメモリ空間を完全に分離する『プロセス』</li>
<li>メモリ空間を共有し、各スレッドが独自の判断で制御を譲る協調的マルチスレッド</li>
</ol>

<p>1 は効率よく実行できるので昔からよく使われてきましたが、デッドロックなどマルチスレッド特有の問題が多く発生しやすく非常に扱いが難しいので近年では直接使われることが少なくなっているように思います。Java や C# などにあるスレッドはこれで、排他制御をしそこねると非常にわかりにくいバグになります。</p>

<p>2 は安全に複数のスレッドを実行できるのでもうすぐ JavaScript にも Web Workers という形で導入されることが決まっています。Erlang などにも『プロセス』として言語に組み込まれていることで知られていますし、OS レベルで提供されるプロセス間通信もこれに近いものです。ただし、プロセス間でデータを直接共有できないので、プロセス同士のメッセージングが煩雑になったり効率が悪化しやすいです。</p>

<p>3 は generators として JavaScript にも導入される予定で、各スレッド(?)でデータを共有でき比較的安全で軽量である反面、各スレッドが独自の判断で制御を交代するのでスレッドの流れについてよく把握しておかないとうまくコードを書くことができません。</p>

<p>また、いずれの方法を取るにしろそれぞれのスレッドがまったく独立して動くわけではないので、常に同期処理と非同期処理をうまく混在させていかなくてはなりません。マルチスレッドを導入して同期処理が増えていったしても、非同期処理がなくなるわけではないのです。以下のいくつかの項ではかつて非同期に処理してきたものを同期で処理する方法を示しますが、その同期処理どうしをどのように並列して非同期に協調させるかということについてはほとんど述べられていません。そのような残された非同期処理については、先ほど触れた jQuery.deferred や async.js のようなフレームワークを利用して解決していくことになるでしょう。</p>

<p>まずは次期の JavaScript で導入される <strong><a href="http://wiki.ecmascript.org/doku.php?id=harmony:generators" rel="nofollow noopener" target="_blank">generators</a></strong> という機能をみていきます。generator があれば、 <strong>yield</strong> というキーワードを使って次のように書けるようになるみたいです(<code>get</code> は generator で使えるように適当に定義されているものとします)。</p>

<div class="code-frame" data-lang="js"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">generator</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span><span class="o">*</span><span class="p">(){</span>
    <span class="kd">var</span> <span class="nx">hoge</span> <span class="o">=</span> <span class="k">yield</span> <span class="nx">get</span><span class="p">(</span><span class="s2">"hoge.txt"</span><span class="p">,</span> <span class="nx">generator</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">piyo</span> <span class="o">=</span> <span class="k">yield</span> <span class="nx">get</span><span class="p">(</span><span class="s2">"piyo.txt"</span><span class="p">,</span> <span class="nx">generator</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">hoge</span> <span class="o">+</span> <span class="nx">piyo</span><span class="p">);</span>
<span class="p">})();</span>
<span class="nx">generator</span><span class="p">.</span><span class="nx">next</span><span class="p">();</span>
</pre></div></div>

<p>このコードではあくまで直列にファイルを操作しています。ここでいう『直列』というのは、このコードでは hoge.txt を読み込んで、 <strong>それが完了したら</strong> piyo.txt の読み込みを開始しているということです(ちなみにこういうのを『直列』と呼んでいるのはたぶん俺だけです)。でも、この場合別に hoge.txt と piyo.txt の読み込みは並列に行なって構いません。piyo.txt の読み込みをするときにいちいち hoge.txt の読み込みを待っていたら遅くなってしまいます。並列に処理したい場合は次のような感じになるでしょう。くわしくはもっと下の方の完全なコードを参照してください。</p>

<div class="code-frame" data-lang="ts"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">generator</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span><span class="o">*</span><span class="p">(){</span>
    <span class="kd">var</span> <span class="nx">x</span> <span class="o">=</span> <span class="nx">get</span><span class="p">(</span><span class="s2">"hoge.txt"</span><span class="p">,</span> <span class="nx">generator</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">y</span> <span class="o">=</span> <span class="nx">get</span><span class="p">(</span><span class="s2">"piyo.txt"</span><span class="p">,</span> <span class="nx">generator</span><span class="p">);</span>
    <span class="nx">yield</span><span class="p">;</span>
    <span class="nx">yield</span><span class="p">;</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">x</span><span class="p">()</span> <span class="o">+</span> <span class="nx">y</span><span class="p">());</span>
<span class="p">})();</span>
<span class="nx">generator</span><span class="p">.</span><span class="nx">next</span><span class="p">();</span>
</pre></div></div>

<p>並列で処理した結果を受け取るためにちょっと工夫しています。<code>get</code> は関数を返すようになっていて、この関数は <code>yield</code> から復帰したあとで呼び出すと、並列処理の結果を返すようになっています。</p>

<p>直列、並列いずれについても <code>generator</code> という変数が不思議な使われかたをしていて直感的にわかりづらいところがあったり、<code>get</code> にいちいち <code>generator</code> を渡さなければならないという難点はありますが、非同期処理としてのわかりやすさとしては比較的いい線をいっているように見えます。</p>

<p>他に気をつけるべき点としては、 <code>yield</code> の回数をうっかり間違えないようにすることあたりでしょうか。うっかりひとつ多く <code>yield</code> を書くと処理がそこでストップしてしまいますし、ひとつでも足りないとすべての非同期処理が完了しないまま先に進んでしまい、上のコードで言うと <code>y()</code> が <code>undefined</code> になってしまいます。非同期処理ひとつにたいして <code>yield</code> ひとつ、という対応関係が保証できないので、常に非同期処理が何個走っているか意識しておく必要があります。</p>

<p>かなり読みやすく直列な処理と並列な処理の書き分けもしやすいものの、おまじないともいえるような注意点がいろいろあるのがネックですし、そもそもこのコードが動く環境がほとんどないのが困ります。</p>

<h2>
<span id="我々はgeneratorsによってコールバックの侵攻を阻止するのみならずgenerators-の正体にたどり着くすべを獲得した" class="fragment"></span><a href="#%E6%88%91%E3%80%85%E3%81%AFgenerators%E3%81%AB%E3%82%88%E3%81%A3%E3%81%A6%E3%82%B3%E3%83%BC%E3%83%AB%E3%83%90%E3%83%83%E3%82%AF%E3%81%AE%E4%BE%B5%E6%94%BB%E3%82%92%E9%98%BB%E6%AD%A2%E3%81%99%E3%82%8B%E3%81%AE%E3%81%BF%E3%81%AA%E3%82%89%E3%81%9Agenerators-%E3%81%AE%E6%AD%A3%E4%BD%93%E3%81%AB%E3%81%9F%E3%81%A9%E3%82%8A%E7%9D%80%E3%81%8F%E3%81%99%E3%81%B9%E3%82%92%E7%8D%B2%E5%BE%97%E3%81%97%E3%81%9F"><i class="fa fa-link"></i></a>我々はgeneratorsによってコールバックの侵攻を阻止するのみならず、generators の正体にたどり着くすべを獲得した！</h2>

<p>さて、さきほどの generators の使い方についての表面的なコードを見て、なんとなく <code>yield</code>というキーワードを使えばいいことぐらいはわかったと思います。他の人が書いてくれたライブラリをありがたくダウンロードしてサンプルコードをコピペ、ちょっといじって実行してみてなんかエラーになったら詳しそうな先輩や同僚に見てもらって……っていう感じならそのくらいの理解でもいいのですが、自分でgeneratorsを使って同期的な仕組みを実装したくなる時もあるでしょう。それに、先ほどのコード、<code>yield get(...)</code> というような部分が何度かあるのが気になりませんでしたか？共通する部分があるなら、次のように関数としてまとめたくなりますよね。</p>

<div class="code-frame" data-lang="ts"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">hyperGet</span><span class="p">(</span><span class="nx">path</span><span class="p">,</span> <span class="nx">generator</span><span class="p">){</span>
    <span class="k">return</span> <span class="nx">yield</span> <span class="nx">get</span><span class="p">(</span><span class="nx">path</span><span class="p">,</span> <span class="nx">generator</span><span class="p">);</span>  <span class="c1">// 常にyieldもくっついているすごいgetだ！</span>
<span class="p">}</span>

<span class="kd">var</span> <span class="nx">generator</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span><span class="o">*</span><span class="p">(){</span>
    <span class="kd">var</span> <span class="nx">hoge</span> <span class="o">=</span> <span class="nx">hyperGet</span><span class="p">(</span><span class="s2">"hoge.txt"</span><span class="p">,</span> <span class="nx">generator</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">piyo</span> <span class="o">=</span> <span class="nx">hyperGet</span><span class="p">(</span><span class="s2">"piyo.txt"</span><span class="p">,</span> <span class="nx">generator</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">hoge</span> <span class="o">+</span> <span class="nx">piyo</span><span class="p">);</span>
<span class="p">})();</span>
<span class="nx">generator</span><span class="p">.</span><span class="nx">next</span><span class="p">();</span>
</pre></div></div>

<p>でもこのコードはうまく動きません。なぜなのでしょうか。これを理解するには、<code>yield</code> というキーワードの意味をちゃんと理解する必要があるのです。せっかくですから、generators の動作についても詳しく説明しておきます。generators は今後の非同期処理の主流になるはず。この知識はきっと無駄にならないと思いますが、面倒くさいひとは別に読まずに飛ばしてしまっていいと思います。他の手段について知りたい者は解散したまえ。……では今、ここを読んでいるものを新たな調査兵団として迎え入れます。よく恐怖に耐えてくれた。君たちは勇敢な戦士です。</p>

<p>Firefox Nightly で動く generators の完全なテストコードは次のようなものです。本当はXHRで実際にファイルを読むサンプルにしたかったんですが、Firefox のセキュリティ上の制限でローカルファイルが読めないので、代わりに <code>setTimeout</code> で非同期な処理をしているつもりにしています。<code>&lt;any&gt;</code> に無理矢理感が漂っていますが、これは TypeScript が generator に対応すれば必要なくなるはずです。<code>yield</code> は本当はキーワードですが、現時点の TypeScript でコンパイルできるように関数に見せかけてごまかしています。あと、さっきのサンプルコードとは違って <code>function*(){ ... }</code> っていう感じに functionキーワードの後ろにアスタリスクが付いていませんが、Firefox における generators の実装は現在提案されているものとは異なるということです。危なかった……もしこのアスタリスクが必要だったら、それが邪魔して TypeScript で書けなくなるところでした。このアスタリスクは正直要らない子だと俺も思います。 ポイントは <code>yield</code>、<code>next</code>、<code>send</code> です。</p>

<div class="code-frame" data-lang="ts"><div class="highlight"><pre><span></span><span class="kr">declare</span> <span class="kd">function</span> <span class="nx">yield</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="p">(</span><span class="nx">f</span><span class="o">:</span> <span class="p">()</span><span class="o">=&gt;</span><span class="nx">T</span><span class="p">)</span><span class="o">:</span> <span class="nx">T</span><span class="p">;</span>

<span class="kr">interface</span> <span class="nx">Generator</span> <span class="p">{</span>
    <span class="nx">send</span><span class="p">(</span><span class="nx">value</span>: <span class="kt">any</span><span class="p">)</span><span class="o">:</span> <span class="k">void</span><span class="p">;</span>
    <span class="nx">next</span><span class="p">()</span><span class="o">:</span> <span class="k">void</span><span class="p">;</span>
<span class="p">}</span>

<span class="kr">declare</span> <span class="kd">var</span> <span class="nx">StopIteration</span>: <span class="kt">new</span><span class="p">()</span><span class="o">=&gt;</span><span class="k">void</span><span class="p">;</span>

<span class="kd">function</span> <span class="nx">get</span><span class="p">(</span><span class="nx">path</span>: <span class="kt">string</span><span class="p">,</span> <span class="nx">generator</span>: <span class="kt">Generator</span><span class="p">)</span><span class="o">:</span> <span class="p">()</span><span class="o">=&gt;</span><span class="kt">string</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">value</span>: <span class="kt">string</span><span class="p">;</span>
    <span class="nx">setTimeout</span><span class="p">(()</span><span class="o">=&gt;</span><span class="p">{</span> 
        <span class="k">try</span><span class="p">{</span>
            <span class="nx">value</span> <span class="o">=</span> <span class="s2">"[content: "</span> <span class="o">+</span> <span class="nx">path</span> <span class="o">+</span> <span class="s2">"]"</span><span class="p">;</span>            
            <span class="nx">generator</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">value</span><span class="p">);</span>
        <span class="p">}</span><span class="k">catch</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span>
            <span class="k">if</span> <span class="p">(</span><span class="o">!</span> <span class="p">(</span><span class="nx">e</span> <span class="k">instanceof</span> <span class="nx">StopIteration</span><span class="p">))</span> <span class="k">throw</span> <span class="nx">e</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">},</span> <span class="mi">500</span><span class="p">);</span>
    <span class="k">return</span> <span class="p">()</span><span class="o">=&gt;</span><span class="nx">value</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">var</span> <span class="nx">generator</span>: <span class="kt">Generator</span> <span class="o">=</span> <span class="o">&lt;</span><span class="nx">any</span><span class="o">&gt;</span> <span class="p">(()</span><span class="o">=&gt;</span><span class="p">{</span>
    <span class="c1">// 直列バージョン</span>
    <span class="kd">var</span> <span class="nx">x</span>: <span class="kt">string</span> <span class="o">=</span> <span class="nx">yield</span><span class="p">(</span><span class="nx">get</span><span class="p">(</span><span class="s2">"hoge.txt"</span><span class="p">,</span> <span class="nx">generator</span><span class="p">));</span>
    <span class="kd">var</span> <span class="nx">y</span>: <span class="kt">string</span> <span class="o">=</span> <span class="nx">yield</span><span class="p">(</span><span class="nx">get</span><span class="p">(</span><span class="s2">"piyo.txt"</span><span class="p">,</span> <span class="nx">generator</span><span class="p">));</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">x</span> <span class="o">+</span> <span class="nx">y</span><span class="p">);</span>

    <span class="c1">// 並列バージョン</span>
    <span class="kd">var</span> <span class="nx">w</span><span class="o">:</span> <span class="p">()</span><span class="o">=&gt;</span><span class="kt">string</span> <span class="o">=</span> <span class="nx">get</span><span class="p">(</span><span class="s2">"hoge.txt"</span><span class="p">,</span> <span class="nx">generator</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">z</span><span class="o">:</span> <span class="p">()</span><span class="o">=&gt;</span><span class="kt">string</span> <span class="o">=</span> <span class="nx">get</span><span class="p">(</span><span class="s2">"piyo.txt"</span><span class="p">,</span> <span class="nx">generator</span><span class="p">);</span>
    <span class="nx">yield</span><span class="p">;</span>
    <span class="nx">yield</span><span class="p">;</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">w</span><span class="p">()</span> <span class="o">+</span> <span class="nx">z</span><span class="p">());</span>
<span class="p">})();</span>
<span class="nx">generator</span><span class="p">.</span><span class="nx">next</span><span class="p">();</span>
</pre></div></div>

<p>(1) まずは <code>var generator: Generator = &lt;any&gt; (()=&gt;{ ... })();</code> という無名関数の部分です。無名関数 <code>()=&gt;{ ... }</code> を直後に <code>()</code> で呼び出す<a href="http://d.hatena.ne.jp/shunsuk/20110824/1314190913" rel="nofollow noopener" target="_blank">即時関数パターン</a>になっていますが、そこは別にどうでもいいです。最初のポイントは、 <strong>この関数呼び出しで、この関数自身が呼び出されるわけじゃなくて、なぜか <code>Generator</code> オブジェクトが作成されて返ってくる</strong> ことです。これはこの無名関数の本体に <code>yield</code> が含まれているからです。なんだかよくわかりませんがそういうものです。</p>

<p>(2) その <code>Generator</code> オブジェクトが変数 <code>generator</code> に代入されます。 <strong>ここで <code>generator.next</code> を呼び出していますが、このときさっきの無名関数が呼び出されます</strong> 。意味がわかりませんが、そういうものです。</p>

<p>(3) この無名関数の一行目は <code>var x: string = yield(get("hoge.txt", generator));</code> となっています。ここで generatos で導入された新しいキーワード <code>yield</code>が出てきますが、ひとまずそのまま素直に <code>yield</code> の隣の式を実行します。<code>get("hoge.txt", generator)</code> という式なので、<code>get</code> 関数の定義に飛びます。<code>generator</code> を引数で渡していることにも注目です。</p>

<p>(4) <code>get</code> 関数の中身は <code>setTimeout</code> の呼び出しだけです。これが非同期処理の開始にあたります。非同期処理を開始しただけで今はとくに何もしません。500 ミリ秒後にタイマーをセットして終了です。この関数の返り値は並列処理するときに非同期処理の結果を受け取るためのトリックなので気にしないでください。<code>get</code> 関数を脱出します。</p>

<p>(5) さて、無名関数に戻ってくると、<code>get</code> 関数の返り値がまるで <code>yield</code> という関数に渡されているように見えます。でもこの <code>yield</code> が曲者です。 <strong>ここを実行しようとすると、なぜかさっきの (2) での <code>generator.next</code> の呼び出しが終了し、そこに戻ります。</strong> 実はまたココにあとで戻ってきます。<code>return</code> で抜けだしたらそこで終了なのに対して、 <code>yield</code> で逃げ出したらいつかまたそこに戻ってくるのです。</p>

<p>(6) なぜか (2) の <code>generator.next</code> の呼び出しが終了しました。さて、ここでスクリプトの最後に到達したので、一旦実行は終了です。</p>

<p>(7) ブラウザが一休みしているところで、さっき仕掛けた <code>setTimeout</code> 時限爆弾がついに起動します！これはつまり非同期処理の終了です。<code>setTimeout</code> で渡した方の無名関数に飛びます。</p>

<p>(8) try/catch とその次の代入式はひとまず無視して、 <strong>次にあるのは <code>generator.send(value)</code> です。これが実行されると、先ほど戻ってくると宣言した <code>yield</code> の位置に戻ります。<code>yield</code> で抜けだしたら、次の <code>next</code> や <code>send</code> で戻ってくるというのがポイントです。しかも、戻ってくるときに <code>send</code> に渡した引数を持ち帰って <code>yield</code> に戻ってきます。</strong> このサンプルコードでは、ファイルの中身を模して <code>"[content: hoge.txt]"</code> という文字列を返すようにしています。</p>

<p>(9) <strong><code>yield</code> に戻ってきたら、<code>yield(...)</code> という式の値が先ほど <code>send</code> に渡した値になります。</strong> そのため、この値が <code>hoge</code> に代入されるのです。<code>get</code> がファイルを取ってくる非同期処理だったら、<code>x</code> に hoge.txt の中身が代入されることになります。</p>

<p>(10) ここまでの (3) ～ (9) が  <code>var x: string = yield(get("hoge.txt", generator));</code> という行が引き起こす結果です。この次もほぼ同じような <code>var y: string = yield(get("piyo.txt", generator));</code> という式ですから、(3) ～ (9) のような処理がもう一回行われます。その結果、<code>y</code> にも piyo.txt の中身が読み込まれます。</p>

<p>(11) 最後に <code>console.log(x + y);</code> でふたつのファイルの中身が結合されて出力されます。</p>

<p>(12) この無名関数の終端まで到達すると、さきほどの <code>send</code> の呼び出しに戻ります。戻ると言っても、<code>send</code> で <code>StopIteration</code> という例外が起こったという形で戻ってきます。そのため、try/catch でこの例外を補足します。これは異常な状態というよりは、generators では generator の実行の通常の終了を示す例外なので、そのままもみ消してしまって構いません。それ以外の種類の例外はもみ消しては困るので、<code>instanceof</code> で判別して投げ直します。</p>

<p>generators の動作がつかめてきたでしょうか。ポイントをまとめると、次のようになります。</p>

<ul>
<li>yield が含まれた関数を呼び出すと、<code>Generator</code> オブジェクトが作成される</li>
<li>その <code>Generator</code> オブジェクトの <code>next</code> を呼び出すと、さっきの関数が実行が開始される</li>
<li>
<code>yield</code> に到達すると、直前に呼んだ <code>next</code> や <code>send</code> が終了する</li>
<li>
<code>next</code> や <code>send</code> を呼び出すと、最後に到達した <code>yield</code> に戻ってくる</li>
<li>関数の終端まで到達すると StopIteration が発生する</li>
</ul>

<p>こうやって通常の実行のコンテキストと generator のコンテキストを行き来して、マルチスレッドのような動作を実現しているのです。こんな奇妙な動作は従来の JavaScript ではどうやっても不可能です。これが generators の魔術なのです。</p>

<p>generators の用途は非同期処理だけではありません。このテキストでは触れませんが、調べてみるともっと面白い使い方がほかにもたくさん見つかると思います。</p>

<h2>
<span id="彼の持つcoとgeneratorsが組み合わさればこの街の奪還も不可能ではありません-人類の栄光を願いこれから死に行くせめてもの間にcoの戦術的価値を説きます" class="fragment"></span><a href="#%E5%BD%BC%E3%81%AE%E6%8C%81%E3%81%A4co%E3%81%A8generators%E3%81%8C%E7%B5%84%E3%81%BF%E5%90%88%E3%82%8F%E3%81%95%E3%82%8C%E3%81%B0%E3%81%93%E3%81%AE%E8%A1%97%E3%81%AE%E5%A5%AA%E9%82%84%E3%82%82%E4%B8%8D%E5%8F%AF%E8%83%BD%E3%81%A7%E3%81%AF%E3%81%82%E3%82%8A%E3%81%BE%E3%81%9B%E3%82%93-%E4%BA%BA%E9%A1%9E%E3%81%AE%E6%A0%84%E5%85%89%E3%82%92%E9%A1%98%E3%81%84%E3%81%93%E3%82%8C%E3%81%8B%E3%82%89%E6%AD%BB%E3%81%AB%E8%A1%8C%E3%81%8F%E3%81%9B%E3%82%81%E3%81%A6%E3%82%82%E3%81%AE%E9%96%93%E3%81%ABco%E3%81%AE%E6%88%A6%E8%A1%93%E7%9A%84%E4%BE%A1%E5%80%A4%E3%82%92%E8%AA%AC%E3%81%8D%E3%81%BE%E3%81%99"><i class="fa fa-link"></i></a>彼の持つcoとgeneratorsが組み合わされば、この街の奪還も不可能ではありません!! 人類の栄光を願い、これから死に行くせめてもの間に、coの戦術的価値を説きます!!</h2>

<p>generator を利用したもっと格好いいライブラリには <a href="https://github.com/visionmedia/co" rel="nofollow noopener" target="_blank">co</a> というものもあります。Node の開発版でしか動かないようで自分はまだ試していないのですが、どうやら次のように書けるようになるみたいです。</p>

<div class="code-frame" data-lang="js"><div class="highlight"><pre><span></span><span class="nx">co</span><span class="p">(</span><span class="kd">function</span> <span class="o">*</span><span class="p">(){</span>
  <span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="k">yield</span> <span class="nx">get</span><span class="p">(</span><span class="s1">'http://google.com'</span><span class="p">);</span>
  <span class="kd">var</span> <span class="nx">b</span> <span class="o">=</span> <span class="k">yield</span> <span class="nx">get</span><span class="p">(</span><span class="s1">'http://yahoo.com'</span><span class="p">);</span>
  <span class="kd">var</span> <span class="nx">c</span> <span class="o">=</span> <span class="k">yield</span> <span class="nx">get</span><span class="p">(</span><span class="s1">'http://cloudup.com'</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">status</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">status</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">status</span><span class="p">);</span>
<span class="p">})</span>

<span class="nx">co</span><span class="p">(</span><span class="kd">function</span> <span class="o">*</span><span class="p">(){</span>
  <span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="nx">get</span><span class="p">(</span><span class="s1">'http://google.com'</span><span class="p">);</span>
  <span class="kd">var</span> <span class="nx">b</span> <span class="o">=</span> <span class="nx">get</span><span class="p">(</span><span class="s1">'http://yahoo.com'</span><span class="p">);</span>
  <span class="kd">var</span> <span class="nx">c</span> <span class="o">=</span> <span class="nx">get</span><span class="p">(</span><span class="s1">'http://cloudup.com'</span><span class="p">);</span>
  <span class="kd">var</span> <span class="nx">res</span> <span class="o">=</span> <span class="k">yield</span> <span class="p">[</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">c</span><span class="p">];</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">res</span><span class="p">);</span>
<span class="p">})</span>
</pre></div></div>

<p>なんと！これまであった問題点がだいたい解決しています。co を知ってしまった今では、jQuery.deferredは<del>まるでゴミクズ</del>少々力不足のようにも思えます。自分は <code>get</code> にも Generator を渡す必要があると思っていたのですが、うまいことやると <code>get("hoge.txt")</code> みたいなコードだけで実現できるようです。<code>yield [a, b, c]</code> というのも謎で、ここだけちょっと静的型付けとの折り合いがつかなそうですが……？どうなっているのかはまだよくわかりませんが、とにかく凄そうです。将来の非同期処理の大本命と言っていいでしょう。</p>

<h2>
<span id="fibersです調理場に丁度頃合のものがあったのでつい" class="fragment"></span><a href="#fibers%E3%81%A7%E3%81%99%E8%AA%BF%E7%90%86%E5%A0%B4%E3%81%AB%E4%B8%81%E5%BA%A6%E9%A0%83%E5%90%88%E3%81%AE%E3%82%82%E3%81%AE%E3%81%8C%E3%81%82%E3%81%A3%E3%81%9F%E3%81%AE%E3%81%A7%E3%81%A4%E3%81%84"><i class="fa fa-link"></i></a>fibersです！調理場に丁度頃合のものがあったので！つい！</h2>

<p>Node 環境に限っては、<a href="https://github.com/laverdet/node-fibers" rel="nofollow noopener" target="_blank">fibers</a> を使うという選択肢もないことはありません。node-fibers では V8 にネイティブな fibers を追加します。Node限定、しかもどこのNode環境でも使えるとは限りませんが、根本的な解決策ではあります。fiber ならコンソールに出力し、１秒停止し、その後またコンソールに出力するという一連の処理を次のようにとても自然に書くことができるようになります。</p>

<div class="code-frame" data-lang="js"><div class="highlight"><pre><span></span><span class="nx">Fiber</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'wait... '</span> <span class="o">+</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">);</span>
    <span class="nx">sleep</span><span class="p">(</span><span class="mi">1000</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'ok... '</span> <span class="o">+</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">);</span>
<span class="p">}).</span><span class="nx">run</span><span class="p">();</span>
</pre></div></div>

<p>構文としては申し分なく、generators と並んでこれまで見てきた中ではもっとも扱いやすいもののひとつといえるでしょう。でも現実は非情で、もちろんブラウザではまったく使えません……。それに generatos が正式に導入されたら fibers はお払い箱になってしまう可能性が高いと思います。</p>

<h2>
<span id="あのぅみなさん上官の食糧庫からweb-workers盗ってきました後でみなさんで分けましょうスライスしてパンに挟んでむふふ" class="fragment"></span><a href="#%E3%81%82%E3%81%AE%E3%81%85%E3%81%BF%E3%81%AA%E3%81%95%E3%82%93%E4%B8%8A%E5%AE%98%E3%81%AE%E9%A3%9F%E7%B3%A7%E5%BA%AB%E3%81%8B%E3%82%89web-workers%E7%9B%97%E3%81%A3%E3%81%A6%E3%81%8D%E3%81%BE%E3%81%97%E3%81%9F%E5%BE%8C%E3%81%A7%E3%81%BF%E3%81%AA%E3%81%95%E3%82%93%E3%81%A7%E5%88%86%E3%81%91%E3%81%BE%E3%81%97%E3%82%87%E3%81%86%E3%82%B9%E3%83%A9%E3%82%A4%E3%82%B9%E3%81%97%E3%81%A6%E3%83%91%E3%83%B3%E3%81%AB%E6%8C%9F%E3%82%93%E3%81%A7%E3%82%80%E3%81%B5%E3%81%B5"><i class="fa fa-link"></i></a>あのぅ、みなさん……。上官の食糧庫から、Web Workers盗ってきました……。後でみなさんで分けましょう。スライスしてパンに挟んで…むふふ…。</h2>

<p>Web Workers はブラウザのような環境でマルチスレッドを実現する API です。これは fiber のような協調的マルチスレッドではなくて本当のマルチスレッドなので、 yield で時々処理を譲るということも必要ありません。まだ Working Draft の段階の仕様ですが最近の PC のブラウザなら大抵実装されていますし、Node 環境でも Web Worker の API を実装したものもあるようです。</p>

<p><a href="http://www.w3.org/TR/FileAPI/" rel="nofollow noopener" target="_blank">File API</a> には非同期 API のほかに同期API があって、Worker スレッド内で<code>FileReaderSync</code> を使えばブラウザのスレッドをブロックすることなく同期的にファイル操作をすることができます。Web Workers はマルチスレッドといっても、Web Workers の空間とブラウザの空間は完全に分離されていて、Worker とブラウザのスレッドの間はやはり非同期の API でやりとりすることになります。Worker スレッド側では <code>window</code> や <code>console</code> オブジェクトすらないので、Worker スレッドで処理した結果を出力するには <code>postMessage</code> でブラウザ側に結果を送り返し、ブラウザ側で <code>console.log</code> を呼び出します。Worker スレッド内で完結する処理であればとてもきれいに書けますが、頻繁にブラウザと Worker の間でやりとりがある場合は結局のところ非同期処理が多くなり、コールバックも増えてきます。ブラウザ側の処理と Worker 側の処理をどれだけうまく分離できるかが鍵になるでしょう。</p>

<p>Worker 内では XMLHttpRequest も使えます。ファイルをふたつ読み取り、結合して出力するサンプルは次のようになります。</p>

<div class="code-frame" data-lang="js">
<div class="code-lang"><span class="bold">app.js</span></div>
<div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">worker</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Worker</span><span class="p">(</span><span class="s2">"worker.js"</span><span class="p">);</span>
<span class="nx">worker</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
</pre></div>
</div>

<div class="code-frame" data-lang="js">
<div class="code-lang"><span class="bold">worker.js</span></div>
<div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">get</span><span class="p">(</span><span class="nx">path</span><span class="p">){</span>
    <span class="kd">var</span> <span class="nx">xhr</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">XMLHttpRequest</span><span class="p">();</span>
    <span class="nx">xhr</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="s2">"GET"</span><span class="p">,</span> <span class="nx">path</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
    <span class="nx">xhr</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
    <span class="k">return</span> <span class="nx">xhr</span><span class="p">.</span><span class="nx">responseText</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">var</span> <span class="nx">hoge</span> <span class="o">=</span> <span class="nx">get</span><span class="p">(</span><span class="s2">"hoge.txt"</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">piyo</span> <span class="o">=</span> <span class="nx">get</span><span class="p">(</span><span class="s2">"piyo.txt"</span><span class="p">);</span>
<span class="nx">postMessage</span><span class="p">(</span><span class="nx">hoge</span> <span class="o">+</span> <span class="nx">piyo</span><span class="p">);</span>
</pre></div>
</div>

<p>worker.js 側の処理は同期で書けてとてもきれいです。Web Workers は並列処理のためのフレームワークを提供するものではありませんから、例えばふたつのファイルを並行して読み込んで両方の完了を待つ場合はなにか別のライブラリを使うことになるでしょう。また、Web Workers が登場したのは比較的最近で、時間のかかる処理はそれまで非同期処理が基本でしたから、同期と非同期両方が用意してある API はそれほど多くありません。同期 API が用意されていない場合は、Web Workers では解決できませんから、また別の手段を考慮する必要があります。</p>

<p>また、どうしても気になるのはやはり静的型付け(いやまあ、そんなこと気にしてるのは俺だけですけど)。Worker 内ではもちろんきれいに型付けできますが、メッセージングに関しては <code>postMessage</code> というたった一本のパイプであらゆるデータをやりとりするわけで、もちろんここには静的型付けなんて望むべくもありません。<code>onmessage</code> で飛んでくるデータはいったい何なのかはさっぱりわからないので、やはりメッセージングの回数をどこまで減らせるかがポイントでしょう。</p>

<p>あと現時点の実際上の問題として、ブラウザでは Worker スレッドのデバッグができないというものがあります。代わりに <a href="https://code.google.com/p/fakeworker-js/" rel="nofollow noopener" target="_blank">fakeworker.js</a> で WebWorkers をシミュレートしてデバッグする方法はあります。</p>

<h2>
<span id="調査兵団に入ってとにかくコールバックをぶっ殺したいです" class="fragment"></span><a href="#%E8%AA%BF%E6%9F%BB%E5%85%B5%E5%9B%A3%E3%81%AB%E5%85%A5%E3%81%A3%E3%81%A6%E3%81%A8%E3%81%AB%E3%81%8B%E3%81%8F%E3%82%B3%E3%83%BC%E3%83%AB%E3%83%90%E3%83%83%E3%82%AF%E3%82%92%E3%81%B6%E3%81%A3%E6%AE%BA%E3%81%97%E3%81%9F%E3%81%84%E3%81%A7%E3%81%99"><i class="fa fa-link"></i></a>調査兵団に入って……とにかくコールバックをぶっ殺したいです……！</h2>

<p>いろいろな非同期処理の制御の方法を見てきましたが、どうもしっくりくるものが見つからないので、静的に型付け可能でしかも同期的に処理してるっぽく書けるライブラリを作ってみました。このライブラリを使うと、非同期処理を次のように書けます。</p>

<div class="code-frame" data-lang="ts"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">hoge</span> <span class="o">=</span> <span class="nx">masync</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">"hoge.txt"</span><span class="p">);</span>       <span class="c1">// get でファイルを ajax で持ってくる</span>
<span class="kd">var</span> <span class="nx">piyo</span> <span class="o">=</span> <span class="nx">masync</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">"piyo.txt"</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">main</span> <span class="o">=</span> <span class="nx">masync</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">masync</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">hoge</span><span class="p">,</span> <span class="nx">piyo</span><span class="p">));</span>      <span class="c1">// concat で結合、log で出力</span>
<span class="nx">masync</span><span class="p">.</span><span class="nx">run</span><span class="p">(</span><span class="nx">main</span><span class="p">);</span>                                     <span class="c1">// run で実際に実行される</span>
</pre></div></div>

<p>こんな感じで、非同期に取得しているはずのデータに対して自然に関数に適用できたりします。このとき、hoge.txt とpiyo.txtの読み込みは並列に走っています。もし直列に読み込みたい場合は、次のようにします。</p>

<div class="code-frame" data-lang="ts"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">hoge</span> <span class="o">=</span> <span class="nx">masync</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">"hoge.txt"</span><span class="p">);</span> 
<span class="kd">var</span> <span class="nx">piyo</span> <span class="o">=</span> <span class="nx">masync</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">"piyo.txt"</span><span class="p">);</span>
<span class="nx">masync</span><span class="p">.</span><span class="nx">run</span><span class="p">(</span>
    <span class="nx">hoge</span><span class="p">,</span>
    <span class="nx">piyo</span><span class="p">,</span>
    <span class="nx">masync</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">masync</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">hoge</span><span class="p">,</span> <span class="nx">piyo</span><span class="p">))</span>
<span class="p">);</span>
</pre></div></div>

<p><code>masync.run</code> は引数に与えた処理を直列に順番に実行していく関数です。<code>hoge</code> は式のなかに２回出てきますが、この時本当に２回非同期処理を行うのか、それとも先に出現した方だけ実行し２回目の評価では結果だけ再利用するかをオプションで選択できます。<del>式の中では変数の宣言を行えないので、変数の宣言は少し離れた別の行になってしまっているのがちょっと不満です。</del>変数の宣言と初期化の位置が離れてしまう問題は多分解決しました。 でも『AをBより先に実行したい』という場合は『Bを実行するためにAの結果が必要』という場合が多いので、直列な操作を直接記述することはさほど多くはないでしょう。このライブラリで自然に書いていけば、直列に処理しなければならない部分は直列に、そうでない部分は並列に自動的に処理してくれます。</p>

<p>少々不思議なのは、<code>masync.get</code> を呼び出しても、その非同期な処理の結果が実際に使われることがないのなら、その非同期処理は行われないということです。たとえば、</p>

<div class="code-frame" data-lang="ts"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">hoge</span> <span class="o">=</span> <span class="nx">masync</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">"hoge.txt"</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">piyo</span> <span class="o">=</span> <span class="nx">masync</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">"piyo.txt"</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">main</span> <span class="o">=</span> <span class="nx">masync</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">hoge</span><span class="p">);</span>
<span class="nx">masync</span><span class="p">.</span><span class="nx">run</span><span class="p">(</span><span class="nx">main</span><span class="p">);</span>
</pre></div></div>

<p>とすると <code>masync.log</code> で実際に出力しているのは hoge.txt の中身だけなので、piyo.txt への get は実際には行われません。『不要な操作は省略』というのも自動的にやってくれるのです。</p>

<p>同期的なデータと非同期的なデータを同じように扱えるので、たとえばhoge.txtにほかのファイルのパスが書いてあってhoge.txtのつぎに piyo.txt じゃなくてそれを読みたいという場合は、次のようにします。</p>

<div class="code-frame" data-lang="ts"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">hoge</span> <span class="o">=</span> <span class="nx">masync</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">"hoge.txt"</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">nyan</span> <span class="o">=</span> <span class="nx">masync</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">hoge</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">main</span> <span class="o">=</span> <span class="nx">masync</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">masync</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">hoge</span><span class="p">,</span> <span class="nx">nyan</span><span class="p">));</span>
<span class="nx">masync</span><span class="p">.</span><span class="nx">run</span><span class="p">(</span><span class="nx">main</span><span class="p">);</span>
</pre></div></div>

<p>これだとさっき並列に読み込んだ時のパターンに似ていますが、もしこれが並列だとすると hoge を読む前に nyan を読んでしまって失敗するということがときどき起こるはずです。でも内部でその辺りをうまく処理してくれて、nyan を読むのに hoge が必要だということから、ちゃんとhogeを先に読んでからnyanを読んでくれます。</p>

<p>先ほどの並列処理では並列に行っているすべての処理が完了してから次の処理に進んでいきますが、複数の処理を並列に行い、そのうちひとつでも完了すればすぐに次の処理に進む、という処理を実現する関数 <code>sooner</code> もあります。以下のコードで、piyo.txt より hoge.txt のほうがずっと大きいファイルなら、 piyo.txt の読み込みのほうが早く終わるので piyo.txt の内容が出力されます。それに対して、piyo.txt のほうがずっと大きければ hoge.txt の内容が出力されます。簡単に実装できたから実装してみただけで、正直この機能は何の役に立つのかよくわかりません。もし使い道が思いついたら教えてください。</p>

<div class="code-frame" data-lang="ts"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">hoge</span> <span class="o">=</span> <span class="nx">masync</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">"hoge.txt"</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">piyo</span> <span class="o">=</span> <span class="nx">masync</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">"piyo.txt"</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">main</span> <span class="o">=</span> <span class="nx">masync</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">masync</span><span class="p">.</span><span class="nx">sooner</span><span class="p">(</span><span class="nx">hoge</span><span class="p">,</span> <span class="nx">piyo</span><span class="p">));</span>
<span class="nx">masync</span><span class="p">.</span><span class="nx">run</span><span class="p">(</span><span class="nx">main</span><span class="p">);</span>
</pre></div></div>

<p>とはいえ、直列、並列(全部完了まで待つ)、並列(ひとつ終わるまで待つ)といった柔軟なコントロールフローが自在に記述できるのが便利だと思います。たとえば、あるファイルを読み込んでそれをすぐに出力する、という処理を行う関数 <code>getAndLog</code> を次のように簡単に定義できます。</p>

<div class="code-frame" data-lang="ts"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">getAndLog</span> <span class="o">=</span> <span class="nx">path</span> <span class="o">=&gt;</span> <span class="nx">masync</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="nx">masync</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">path</span><span class="p">),</span> <span class="nx">masync</span><span class="p">.</span><span class="nx">log</span><span class="p">);</span>
</pre></div></div>

<p><code>a</code>、<code>b</code>、<code>c</code>、<code>d</code> をそれぞれ  a.txt、b.txt、c.txt、d.txt を非同期に読み込んで出力する処理だとしましょう。<code>a</code>、<code>b</code>、<code>c</code>、<code>d</code> は <code>getAndLog</code> を使って次のように定義できます。</p>

<div class="code-frame" data-lang="ts"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="nx">getAndLog</span><span class="p">(</span><span class="s2">"a.txt"</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">b</span> <span class="o">=</span> <span class="nx">getAndLog</span><span class="p">(</span><span class="s2">"b.txt"</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">c</span> <span class="o">=</span> <span class="nx">getAndLog</span><span class="p">(</span><span class="s2">"c.txt"</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">d</span> <span class="o">=</span> <span class="nx">getAndLog</span><span class="p">(</span><span class="s2">"d.txt"</span><span class="p">);</span>
</pre></div></div>

<p>そして、<code>a</code> と並行して、<code>b</code> と <code>c</code> を直列にしたものを行い、そのあとで <code>d</code> を行う、というかなり複雑なコントロールをしたいという場合でも、次のようにとても自然に書けます。<code>masync.seq</code> および <code>masync.parallel</code> はそれぞれ直列処理、並列処理を明示的に行うときに使う関数です。</p>

<div class="code-frame" data-lang="ts"><div class="highlight"><pre><span></span><span class="nx">masync</span><span class="p">.</span><span class="nx">run</span><span class="p">(</span>
    <span class="nx">masync</span><span class="p">.</span><span class="nx">parallel</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">masync</span><span class="p">.</span><span class="nx">seq</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span> <span class="nx">c</span><span class="p">)),</span>
    <span class="nx">d</span>
<span class="p">);</span>
</pre></div></div>

<p>シーケンス図で描けば、例えばこんな処理になります。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>  =====================================&gt; 時間
a ---------&gt;
b ----------------&gt;
c                  ---&gt;
d                      ------------&gt;
</pre></div></div>

<p>ファイルの get だけでなく、一時停止のような処理もまるで同期処理のように自然に書けます。次のコードでは、実行するとまず <code>"hoge"</code> と出力し、1秒待機してから、そのあと <code>"piyo"</code> と出力します。</p>

<div class="code-frame" data-lang="ts"><div class="highlight"><pre><span></span><span class="nx">masync</span><span class="p">.</span><span class="nx">run</span><span class="p">(</span>
    <span class="nx">masync</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"hoge"</span><span class="p">),</span>    <span class="c1">// "hoge" と出力</span>
    <span class="nx">masync</span><span class="p">.</span><span class="nx">wait</span><span class="p">(</span><span class="mi">1000</span><span class="p">),</span>     <span class="c1">// 1秒待機</span>
    <span class="nx">masync</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"piyo"</span><span class="p">)</span>     <span class="c1">// "piyo" と出力</span>
<span class="p">);</span>
</pre></div></div>

<p>jQuery.deferred と相互にデータを交換する機能もつけときました。</p>

<div class="code-frame" data-lang="ts"><div class="highlight"><pre><span></span><span class="nx">masync</span><span class="p">.</span><span class="nx">run</span><span class="p">(</span>
    <span class="nx">masync</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span>
        <span class="nx">masync</span><span class="p">.</span><span class="nx">strcat</span><span class="p">(</span>
            <span class="c1">//  fromPromise で Promise を masync のデータ型に変換</span>
            <span class="nx">masync</span><span class="p">.</span><span class="nx">fromPromise</span><span class="p">(</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">"a.txt"</span><span class="p">)),</span>   
            <span class="nx">masync</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">"d.txt"</span><span class="p">)</span>
        <span class="p">)</span>
    <span class="p">)</span>
<span class="p">);</span>

<span class="c1">// masync.log のような一部の関数は Promise を直接受け取って処理できる</span>
<span class="nx">masync</span><span class="p">.</span><span class="nx">run</span><span class="p">(</span><span class="nx">masync</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">"a.txt"</span><span class="p">)));</span>

<span class="c1">// toPromise で masync のデータ型を Promise に変換</span>
<span class="nx">masync</span><span class="p">.</span><span class="nx">toPromise</span><span class="p">(</span><span class="nx">masync</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">"b.txt"</span><span class="p">)).</span><span class="nx">then</span><span class="p">((</span><span class="nx">data</span><span class="p">)</span><span class="o">=&gt;</span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">));</span>
</pre></div></div>

<p>ついでに Node の <code>fs.readFile</code> にもアクセスできるようにしときました。同期的に処理してるっぽくみえますが、同期 API のほうの <code>fs.readFileSync</code> ではなく、あくまで非同期版の <code>fs.readFile</code> をラップしています。ちなみに、引数の最後にコールバックを渡すという例の Node の非同期処理の規約に従った関数を masync の非同期処理に変換する関数も定義してありますので、それを使えば比較的簡単にほかの Node の API もラップできるはずです。</p>

<div class="code-frame" data-lang="ts"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="nx">masync</span><span class="p">.</span><span class="nx">fs</span><span class="p">.</span><span class="nx">readFile</span><span class="p">(</span><span class="s2">"a.txt"</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">b</span> <span class="o">=</span> <span class="nx">masync</span><span class="p">.</span><span class="nx">fs</span><span class="p">.</span><span class="nx">readFile</span><span class="p">(</span><span class="s2">"b.txt"</span><span class="p">);</span>
<span class="nx">masync</span><span class="p">.</span><span class="nx">run</span><span class="p">(</span><span class="nx">masync</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">masync</span><span class="p">.</span><span class="nx">strcat</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)));</span>
</pre></div></div>

<p>エラー処理も簡単です。一番簡単には、非同期処理の失敗時に別の値を返すようにする <code>recover</code> 関数を使うことができます。以下のコードで、<code>findFile</code> は指定したパスのファイルを <code>get</code> しますが、ファイルが取得できない場合は "Error: No such file: notexistsfile.txt" のようなメッセージを代わりに返します。ついでにいうと、こんなふうに非同期処理を関数としてまとめることもまったく問題ありません。</p>

<div class="code-frame" data-lang="ts"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">findFile</span><span class="p">(</span><span class="nx">path</span>: <span class="kt">string</span><span class="p">){</span>
    <span class="k">return</span> <span class="nx">masync</span><span class="p">.</span><span class="nx">recover</span><span class="p">(</span><span class="s2">"Error: No such file: "</span> <span class="o">+</span> <span class="nx">path</span><span class="p">,</span>
        <span class="nx">masync</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">path</span><span class="p">)</span>
    <span class="p">);</span>
<span class="p">}</span>

<span class="nx">masync</span><span class="p">.</span><span class="nx">run</span><span class="p">(</span>
    <span class="nx">masync</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">findFile</span><span class="p">(</span><span class="s2">"a.txt"</span><span class="p">)),</span>                <span class="c1">// a.txt のファイルの中身が出力される</span>
    <span class="nx">masync</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">findFile</span><span class="p">(</span><span class="s2">"noexistfile.txt"</span><span class="p">))</span>   <span class="c1">// "Error: No such file: notexistsfile.txt" と出力される</span>
<span class="p">);</span>
</pre></div></div>

<p>ある程度の簡単な処理ならコールバックを使わずに書けるのですが、もっと複雑な処理を行いたければ非同期で取得したデータに直接アクセスする必要も出てくるでしょう。そのための方法は幾つかあるのですが、比較的に直感的に理解しやすい方法として <code>eject</code> という関数を用意してあります。この関数の最初の引数に <code>get</code> などの返り値、第2引数に直接のデータを受け取る関数を渡すと、その関数に直接のデータが渡されます。このライブラリでも、生のデータにアクセスしようとするとついにコールバックが露呈します。</p>

<div class="code-frame" data-lang="ts"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">hoge</span> <span class="o">=</span> <span class="nx">masync</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">"hoge.txt"</span><span class="p">);</span> <span class="c1">// hoge は string ではない</span>
<span class="nx">masync</span><span class="p">.</span><span class="nx">run</span><span class="p">(</span>
    <span class="nx">masync</span><span class="p">.</span><span class="nx">eject</span><span class="p">(</span><span class="nx">hoge</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">){</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span> <span class="p">})</span> <span class="c1">// data は hoge.txt の中身。typeof data == "string"</span>
<span class="p">);</span>
</pre></div></div>

<p>このライブラリの特徴としては、以下のようなことが挙げられます。</p>

<ul>
<li>簡単な処理であればコールバックを完全に排除できる</li>
<li>同期処理っぽい見た目で書ける</li>
<li>TypeScript でガッチガチに静的型付けされていてる</li>
<li>どんな環境でも動く</li>
<li>非同期なデータの操作を簡単に定義できる</li>
</ul>

<p>特に、静的型付けされていることは大きなメリットで、ちょっとでも変な使い方をするとすぐコンパイルエラーになるので安心です(JavaScript からでも使えます)。こんなやたら長い記事をここまで読んできた方ならうっすら気付いていると思いますが、自分の静的型付けに関するこだわりは伊達や酔狂ではありません。このライブラリでも静的型付けについては徹底されていて、いわゆるダウンキャストのようなものが必要になる場面はいっさいなくなるように設計しています。あの子達の羨望の眼差しも、俺の潔癖すぎる性格を知れば幻滅するだろうね！</p>

<p>また、先程から何度も使っている <code>masync.log</code> は <code>console.log</code> の非同期操作バージョンなのですが、<code>masync.log</code> は <code>masync.lift</code> という関数を使って <code>masync.lift(console.log.bind(console))</code> と表すことができます。つまり、 <code>lift</code> は同期操作バージョンの関数を非同期操作バージョンの関数に変えてくれる関数なのです。<code>this</code> の扱いの関係で <code>bind</code> の呼び出しが必要になっていますが、<code>this</code> に依存しない関数、例えば <code>Math.abs</code> なら <code>masync.lift(Math.abs)</code> だけで非同期バージョンの <code>abs</code> になるのです。これは jQuery.deferred でいえば独自の Deferred を定義することに相当しますが、Deferred を定義するよりはるかに簡単です。</p>

<p>それに対し、欠点としては次のようなものが挙げられます。</p>

<ul>
<li>
<code>masync.run</code> で書ける直列な非同期処理の制限が一度に 26 個まで</li>
<li>同期的に処理しているように見えても、そこにデバッガのブレークポイントが仕掛けられるわけではない</li>
<li>
<del>変数の宣言と、実際に代入するソースコード上の位置が離れてしまう場合がある</del>多分解決しました</li>
</ul>

<p><code>masync.run</code>の引数が26個までという謎制限はもうすこしライブラリに手を入れればいくらでも緩和できるのですが、とりあえず26個あれば十分かなと思うのでこうなっています。<code>masync.seq</code> という関数を入れ子にすることでも回避できます。</p>

<p>デバッガのブレークポイントを仕掛けにくいのもつらいですが、どうしてもブレークポイントを仕掛けたければ、さきほど示したような <code>eject</code> のコールバック関数内にならブレークポイントを仕掛けることができます。</p>

<h2>
<span id="まるで化け物を見るような俺がそうだというのか" class="fragment"></span><a href="#%E3%81%BE%E3%82%8B%E3%81%A7%E5%8C%96%E3%81%91%E7%89%A9%E3%82%92%E8%A6%8B%E3%82%8B%E3%82%88%E3%81%86%E3%81%AA%E4%BF%BA%E3%81%8C%E3%81%9D%E3%81%86%E3%81%A0%E3%81%A8%E3%81%84%E3%81%86%E3%81%AE%E3%81%8B"><i class="fa fa-link"></i></a>まるで化け物を見るような...俺がそうだというのか…!?</h2>

<p>これらのコードにはコールバックは無いように見えますが、このライブラリが面倒なコールバックをほぼすべて覆い隠してくれるのです。実はライブラリ内部ではコールバックの嵐で大変なことになっています。見たらたぶん吐きます。というか、上記のコードはコールバックに見えないだけで、このライブラリは『コールバックがない』どころかむしろ <strong>これらのコードはすべてコールバックでできているといっても過言ではない</strong> レベルだったりします。 <strong>『すべてのコールバックを駆逐してやる！』と決意して兵士になったら、実は自分がコールバックだった</strong> とか、なんかどこかで聞いたことがあるような話ですね。なにそれこわい。ここでいわゆるタイトル回収です。</p>

<p>なんじゃそりゃ、いったいどーなってんだ？と思う人もいるとは思いますが、ソースコードは Haskell の Functor, Applicative, Monad あたりの概念がふんだんに使われていて、このあたりの知識がないひとにはちょっとばかり理解するのがたいへんです。例えば、先ほど挙げた <code>lift</code> は Haskell に存在する <a href="http://www.haskell.org/haskellwiki/Lifting" rel="nofollow noopener" target="_blank">lift</a> に対応する関数なのです。ほかにも、このライブラリで最初に定義されている関数は <code>fmap</code> という関数なのですが、よく訓練された Haskeller ならこの名前を見ただけで何の関数なのか一発で理解しますし、実装は見なくてもだいたい想像がつきます。ちなみに定義は</p>

<div class="code-frame" data-lang="ts"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">fmap</span><span class="o">&lt;</span><span class="nx">T</span><span class="p">,</span><span class="nx">S</span><span class="o">&gt;</span><span class="p">(</span><span class="nx">f</span><span class="o">:</span> <span class="p">(</span><span class="nx">t</span>: <span class="kt">T</span><span class="p">)</span><span class="o">=&gt;</span><span class="nx">S</span><span class="p">,</span> <span class="nx">x</span>: <span class="kt">Async</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="p">)</span><span class="o">:</span> <span class="nx">Async</span><span class="o">&lt;</span><span class="nx">S</span><span class="o">&gt;</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">ap</span><span class="p">(</span><span class="nx">pure</span><span class="p">(</span><span class="nx">f</span><span class="p">),</span> <span class="nx">x</span><span class="p">);</span>
<span class="p">}</span>
</pre></div></div>

<p>となっていますが、これを見た Haskeller は『ああ、やっぱりね』みたいに言い出します。このライブラリの実装の詳細について理解したければ、Haskell を学ぶのが最も早道だと思います。このライブラリの関数の実装はそれぞれ長くて 10数行なので一見簡単そうですが、とても抽象的な操作ばかりなので、Haskell を知らない人は処理の流れを追えば追うほどわけがわからなくなるので注意してください。 </p>

<p>（　Haskellを知っている人向けに説明すると、このライブラリは <strong>非同期処理モナドライブラリ</strong> なのです。また、いわゆる<a href="http://ja.wikipedia.org/wiki/%E7%B6%99%E7%B6%9A%E6%B8%A1%E3%81%97%E3%82%B9%E3%82%BF%E3%82%A4%E3%83%AB" rel="nofollow noopener" target="_blank">継続渡し</a> の応用で、成功と失敗の２系統の継続を管理するためのフレームワークを提供するものでもあります。　）</p>

<p>このへんの小難しい話にはみんな興味なさそうだし、もう疲れたのでこれ以上このライブラリの内部までの解説はしませんが、JavaScriptって<del>本当にクソ</del>本当に奥が深いですね。</p>

<p>この謎のライブラリのソースコードはこちら: <a href="https://github.com/kontan/masync" rel="nofollow noopener" target="_blank">kontan/masync</a> 直角三角形とかも見れます。readme に API リファレンスやほんのちょっとだけライブラリ内部の解説も書いておきましたので、知りたいヒトはどうぞ。あと、readme はネタ無しでとても真面目に書いていますので、ネタ混じりの文章にうんざりしたひとにもお勧めです。</p>

<h2>
<span id="まとめ" class="fragment"></span><a href="#%E3%81%BE%E3%81%A8%E3%82%81"><i class="fa fa-link"></i></a>まとめ</h2>

<ul>
<li><strong>generators がどのブラウザでも動くようになったら、co を使え。それまでは気合でなんとか持ちこたえろ</strong></li>
<li>Haskell ってすごい</li>
<li>俺のmasyncは並列と直列が両方そなわり最強に見える</li>
</ul>

<h2>
<span id="あのおなか痛いんで負傷者にしてもらっていいですか" class="fragment"></span><a href="#%E3%81%82%E3%81%AE%E3%81%8A%E3%81%AA%E3%81%8B%E7%97%9B%E3%81%84%E3%82%93%E3%81%A7%E8%B2%A0%E5%82%B7%E8%80%85%E3%81%AB%E3%81%97%E3%81%A6%E3%82%82%E3%82%89%E3%81%A3%E3%81%A6%E3%81%84%E3%81%84%E3%81%A7%E3%81%99%E3%81%8B"><i class="fa fa-link"></i></a>あの…おなか痛いんで…負傷者に…してもらって…いいですか!?</h2>

<p>このテキストはあくまで『非同期処理を使わざるをえないときに、どのようにコールバックのネストの多重化を防ぐか』を検討するもので、『ふたつのファイルを読み込んでつなげて出力』というのは問題を把握しやすくするための例題に過ぎませんでした。しかし途中から『手段に関わらずこの例題をどう処理するか』の話とごっちゃになってます。 同期処理が使えるなら同期で処理すればいいです。本来の論旨は『同期処理が使えないとき』であって、fibers や同期版 XHR、FileReaderSync の話はよく考えたら微妙に別件でした。つまり、Web Workers を例に挙げると、ファイルの読み込みについてはWeb Wokers で同期的に可能なのでその部分は本テキストの話題の対象ではなく、Web Workers での Worker スレッドとブラウザのスレッド間のメッセージングについては非同期処理を使わざるをえないがこれをどうするか、というのが本来このテキストで検討したかった対象です。でも関連性はある話題ですし有用ではありそうなので、これらの微妙に主旨からズレた部分の話題に関してもそのまま残しておきます。このテキストの主旨に関して混乱したかたがいたらごめんなさい。</p>

<h2>
<span id="さいごに" class="fragment"></span><a href="#%E3%81%95%E3%81%84%E3%81%94%E3%81%AB"><i class="fa fa-link"></i></a>さいごに</h2>

<blockquote>
<p>InfoQ: そのライブラリを改善できるような、例えば、もっと簡潔にできるなど、JavaScript言語に対する新たな機能や変更というのはありますか？</p>

<p>Isaac氏 (slide-flow-control): いいえ。私のフローコントロールがベストです。だれも改善なんてできません。これがベストなのは私自身に直接かかわっているからです。だから、外部の影響というのは私にとってはマイナスで、ベストではなくなるのです。もし私と同じ経験をしたいなら、フローコントロールライブラリを書くことをおすすめします。自分で書けばすぐにそれがベストだとわかるでしょう。もし他のライブラリの方がよさそうに見えたなら、大急ぎでエディターに戻って、恥を隠して、すぐに彼らのアイデアを自分自身の少し違ったやり方で再発明しましょう。そうすれば、今やそれがベストなのだと実感できるでしょう。</p>
</blockquote>

<p>――<a href="http://www.infoq.com/jp/articles/surviving-asynchronous-programming-in-javascript" rel="nofollow noopener" target="_blank">仮想パネル: JavaScriptで非同期プログラミングを乗り切る方法</a></p>

<h2>
<span id="参考文献" class="fragment"></span><a href="#%E5%8F%82%E8%80%83%E6%96%87%E7%8C%AE"><i class="fa fa-link"></i></a>参考文献</h2>

<ul>
<li><a href="http://techblog.yahoo.co.jp/programming/js_callback/" rel="nofollow noopener" target="_blank">JavaScriptとコールバック地獄</a></li>
<li><a href="http://qiita.com/yuku_t/items/3d1cf51d7ae91305eaaa" id="reference-72e5b29553dc4300af1a">
jQuery.Deferredを使って楽しい非同期生活を送る方法</a></li>
<li><a href="http://qiita.com/yuku_t/items/1b8ce6bba133a7eaeb23" id="reference-21c1fb4375ab7f5d60dd">結局jQuery.Deferredの何が嬉しいのか分からない、という人向けの小話</a></li>
<li><a href="http://techblog.yahoo.co.jp/programming/jquery-deferred/" rel="nofollow noopener" target="_blank">爆速でわかるjQuery.Deferred超入門</a></li>
<li><a href="http://www.infoq.com/jp/articles/surviving-asynchronous-programming-in-javascript" rel="nofollow noopener" target="_blank">仮想パネル: JavaScriptで非同期プログラミングを乗り切る方法</a></li>
<li><a href="http://shingekikyojin.net/archives/28229454.html" rel="nofollow noopener" target="_blank">進撃の巨人の名言・迷言をまとめようぜｗｗ</a></li>
<li><a href="http://shingekiword.blogspot.jp/" rel="nofollow noopener" target="_blank">進撃の巨人　名言　セリフ集</a></li>
<li><a href="http://www.geocities.jp/burontosan/" rel="nofollow noopener" target="_blank">ブロントさん名言集</a></li>
<li><a href="http://dic.nicovideo.jp/a/%E3%83%9C%E3%83%96%E3%83%BB%E3%83%AD%E3%82%B9" rel="nofollow noopener" target="_blank">ボブ・ロス</a></li>
<li><a href="http://nobuhusa.blog118.fc2.com/blog-entry-630.html" rel="nofollow noopener" target="_blank">はぁ！？なにいってんのおまえ！？</a></li>
<li><a href="http://wiki.cre.jp/typemoon/%E8%A8%80%E5%B3%B0%E7%B6%BA%E7%A4%BC" rel="nofollow noopener" target="_blank">言峰綺礼</a></li>
<li><a href="http://www.yuyushiki.net/" rel="nofollow noopener" target="_blank">ゆゆ式</a></li>
</ul>
</div>
	</td>
</tr>
</table>
<br />
<table border="1" style="height:150px;">
<tr>
	<td rowspan="3">40位</td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="thumb-up-120px.png" /></i>1038</kbd>
		<a target="_blank" href="https://qiita.com/suin/items/5c4e21fa284497782f71">俺史上最強のiptablesをさらす</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2012-08-20<br />19:44:40</center>
	</td>
	<td style="width:200px;">
		<!--投稿者-->
		<center>
			@<a href="user/889.html">suin</a>(697件の記事)<br />(ShouldBee 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/889/profile-images/1473682133">
		</center>
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Linux]</b> <b>[CentOS]</b> <b>[Ubuntu]</b> <b>[iptables]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<!--
		<div style="width:350px;height:150px;overflow:scroll;">%s</div>
		-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>iptablesを改めて勉強しなおしました。ツッコミ歓迎です^-^</p>

<p>GitHub: <a href="https://github.com/suin/iptables/blob/master/iptables.sh" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/suin/iptables/blob/master/iptables.sh</a></p>

<div class="code-frame" data-lang="sh">
<div class="code-lang"><span class="bold">iptables.sh</span></div>
<div class="highlight"><pre><span></span><span class="ch">#!/bin/bash</span>

<span class="c1">###########################################################</span>
<span class="c1"># このスクリプトの特徴</span>
<span class="c1">#</span>
<span class="c1"># 受信・通過については基本的に破棄し、ホワイトリストで許可するものを指定する。</span>
<span class="c1"># 送信については基本的に許可する。ただし、サーバが踏み台になり外部のサーバに迷惑をかける可能性があるので、</span>
<span class="c1"># 心配な場合は、送信も受信同様に基本破棄・ホワイトリストで許可するように書き換えると良い。</span>
<span class="c1">###########################################################</span>

<span class="c1">###########################################################</span>
<span class="c1"># 用語の統一</span>
<span class="c1"># わかりやすさのためルールとコメントの用語を以下に統一する</span>
<span class="c1"># ACCEPT : 許可</span>
<span class="c1"># DROP   : 破棄</span>
<span class="c1"># REJECT : 拒否</span>
<span class="c1">###########################################################</span>

<span class="c1">###########################################################</span>
<span class="c1"># チートシート</span>
<span class="c1">#</span>
<span class="c1"># -A, --append       指定チェインに1つ以上の新しいルールを追加</span>
<span class="c1"># -D, --delete       指定チェインから1つ以上のルールを削除</span>
<span class="c1"># -P, --policy       指定チェインのポリシーを指定したターゲットに設定</span>
<span class="c1"># -N, --new-chain    新しいユーザー定義チェインを作成</span>
<span class="c1"># -X, --delete-chain 指定ユーザー定義チェインを削除</span>
<span class="c1"># -F                 テーブル初期化</span>
<span class="c1">#</span>
<span class="c1"># -p, --protocol      プロコトル         プロトコル(tcp、udp、icmp、all)を指定</span>
<span class="c1"># -s, --source        IPアドレス[/mask]  送信元のアドレス。IPアドレスorホスト名を記述</span>
<span class="c1"># -d, --destination   IPアドレス[/mask]  送信先のアドレス。IPアドレスorホスト名を記述</span>
<span class="c1"># -i, --in-interface  デバイス           パケットが入ってくるインターフェイスを指定</span>
<span class="c1"># -o, --out-interface デバイス           パケットが出ていくインターフェイスを指定</span>
<span class="c1"># -j, --jump          ターゲット         条件に合ったときのアクションを指定</span>
<span class="c1"># -t, --table         テーブル           テーブルを指定</span>
<span class="c1"># -m state --state    状態              パケットの状態を条件として指定</span>
<span class="c1">#                                       stateは、 NEW、ESTABLISHED、RELATED、INVALIDが指定できる</span>
<span class="c1"># !                   条件を反転（～以外となる）</span>
<span class="c1">###########################################################</span>

<span class="c1"># パス</span>
<span class="nv">PATH</span><span class="o">=</span>/sbin:/usr/sbin:/bin:/usr/bin

<span class="c1">###########################################################</span>
<span class="c1"># IPの定義</span>
<span class="c1"># 必要に応じて定義する。定義しなくても動作する。</span>
<span class="c1">###########################################################</span>

<span class="c1"># 内部ネットワークとして許可する範囲</span>
<span class="c1"># LOCAL_NET="xxx.xxx.xxx.xxx/xx"</span>

<span class="c1"># 内部ネットワークとして一部制限付きで許可する範囲</span>
<span class="c1"># LIMITED_LOCAL_NET="xxx.xxx.xxx.xxx/xx"</span>

<span class="c1"># ZabbixサーバーIP</span>
<span class="c1"># ZABBIX_IP="xxx.xxx.xxx.xxx"</span>

<span class="c1"># 全てのIPを表す設定を定義</span>
<span class="c1"># ANY="0.0.0.0/0"</span>

<span class="c1"># 信頼可能ホスト(配列)</span>
<span class="c1"># ALLOW_HOSTS=(</span>
<span class="c1">#   "xxx.xxx.xxx.xxx"</span>
<span class="c1">#   "xxx.xxx.xxx.xxx"</span>
<span class="c1">#   "xxx.xxx.xxx.xxx"</span>
<span class="c1"># )</span>

<span class="c1"># 無条件破棄するリスト(配列)</span>
<span class="c1"># DENY_HOSTS=(</span>
<span class="c1">#   "xxx.xxx.xxx.xxx"</span>
<span class="c1">#   "xxx.xxx.xxx.xxx"</span>
<span class="c1">#   "xxx.xxx.xxx.xxx"</span>
<span class="c1"># )</span>

<span class="c1">###########################################################</span>
<span class="c1"># ポート定義</span>
<span class="c1">###########################################################</span>

<span class="nv">SSH</span><span class="o">=</span><span class="m">22</span>
<span class="nv">FTP</span><span class="o">=</span><span class="m">20</span>,21
<span class="nv">DNS</span><span class="o">=</span><span class="m">53</span>
<span class="nv">SMTP</span><span class="o">=</span><span class="m">25</span>,465,587
<span class="nv">POP3</span><span class="o">=</span><span class="m">110</span>,995
<span class="nv">IMAP</span><span class="o">=</span><span class="m">143</span>,993
<span class="nv">HTTP</span><span class="o">=</span><span class="m">80</span>,443
<span class="nv">IDENT</span><span class="o">=</span><span class="m">113</span>
<span class="nv">NTP</span><span class="o">=</span><span class="m">123</span>
<span class="nv">MYSQL</span><span class="o">=</span><span class="m">3306</span>
<span class="nv">NET_BIOS</span><span class="o">=</span><span class="m">135</span>,137,138,139,445
<span class="nv">DHCP</span><span class="o">=</span><span class="m">67</span>,68

<span class="c1">###########################################################</span>
<span class="c1"># 関数</span>
<span class="c1">###########################################################</span>

<span class="c1"># iptablesの初期化, すべてのルールを削除</span>
initialize<span class="o">()</span> 
<span class="o">{</span>
    iptables -F <span class="c1"># テーブル初期化</span>
    iptables -X <span class="c1"># チェーンを削除</span>
    iptables -Z <span class="c1"># パケットカウンタ・バイトカウンタをクリア</span>
    iptables -P INPUT   ACCEPT
    iptables -P OUTPUT  ACCEPT
    iptables -P FORWARD ACCEPT
<span class="o">}</span>

<span class="c1"># ルール適用後の処理</span>
finailize<span class="o">()</span>
<span class="o">{</span>
    /etc/init.d/iptables save <span class="o">&amp;&amp;</span> <span class="c1"># 設定の保存</span>
    /etc/init.d/iptables restart <span class="o">&amp;&amp;</span> <span class="c1"># 保存したもので再起動してみる</span>
    <span class="k">return</span> <span class="m">0</span>
    <span class="k">return</span> <span class="m">1</span>
<span class="o">}</span>

<span class="c1"># 開発用</span>
<span class="k">if</span> <span class="o">[</span> <span class="s2">"</span><span class="nv">$1</span><span class="s2">"</span> <span class="o">==</span> <span class="s2">"dev"</span> <span class="o">]</span>
<span class="k">then</span>
    iptables<span class="o">()</span> <span class="o">{</span> <span class="nb">echo</span> <span class="s2">"iptables </span><span class="nv">$@</span><span class="s2">"</span><span class="p">;</span> <span class="o">}</span>
    finailize<span class="o">()</span> <span class="o">{</span> <span class="nb">echo</span> <span class="s2">"finailize"</span><span class="p">;</span> <span class="o">}</span>
<span class="k">fi</span>

<span class="c1">###########################################################</span>
<span class="c1"># iptablesの初期化</span>
<span class="c1">###########################################################</span>
initialize

<span class="c1">###########################################################</span>
<span class="c1"># ポリシーの決定</span>
<span class="c1">###########################################################</span>
iptables -P INPUT   DROP <span class="c1"># すべてDROP。すべての穴をふさいでから必要なポートを空けていくのが良い。</span>
iptables -P OUTPUT  ACCEPT
iptables -P FORWARD DROP

<span class="c1">###########################################################</span>
<span class="c1"># 信頼可能なホストは許可</span>
<span class="c1">###########################################################</span>

<span class="c1"># ローカルホスト</span>
<span class="c1"># lo はローカルループバックのことで自分自身のホストを指す</span>
iptables -A INPUT -i lo -j ACCEPT <span class="c1"># SELF -&gt; SELF</span>

<span class="c1"># ローカルネットワーク</span>
<span class="c1"># $LOCAL_NET が設定されていれば LAN上の他のサーバとのやり取りを許可する</span>
<span class="k">if</span> <span class="o">[</span> <span class="s2">"</span><span class="nv">$LOCAL_NET</span><span class="s2">"</span> <span class="o">]</span>
<span class="k">then</span>
    iptables -A INPUT -p tcp -s <span class="nv">$LOCAL_NET</span> -j ACCEPT <span class="c1"># LOCAL_NET -&gt; SELF</span>
<span class="k">fi</span>

<span class="c1"># 信頼可能ホスト</span>
<span class="c1"># $ALLOW_HOSTS が設定されていれば そのホストとのやり取りを許可する</span>
<span class="k">if</span> <span class="o">[</span> <span class="s2">"</span><span class="si">${</span><span class="nv">ALLOW_HOSTS</span><span class="p">[@]</span><span class="si">}</span><span class="s2">"</span> <span class="o">]</span>
<span class="k">then</span>
    <span class="k">for</span> allow_host in <span class="si">${</span><span class="nv">ALLOW_HOSTS</span><span class="p">[@]</span><span class="si">}</span>
    <span class="k">do</span>
        iptables -A INPUT -p tcp -s <span class="nv">$allow_host</span> -j ACCEPT <span class="c1"># allow_host -&gt; SELF</span>
    <span class="k">done</span>
<span class="k">fi</span>

<span class="c1">###########################################################</span>
<span class="c1"># $DENY_HOSTSからのアクセスは破棄</span>
<span class="c1">###########################################################</span>
<span class="k">if</span> <span class="o">[</span> <span class="s2">"</span><span class="si">${</span><span class="nv">DENY_HOSTS</span><span class="p">[@]</span><span class="si">}</span><span class="s2">"</span> <span class="o">]</span>
<span class="k">then</span>
    <span class="k">for</span> host in <span class="si">${</span><span class="nv">DENY_HOSTS</span><span class="p">[@]</span><span class="si">}</span>
    <span class="k">do</span>
        iptables -A INPUT -s <span class="nv">$ip</span> -m limit --limit <span class="m">1</span>/s -j LOG --log-prefix <span class="s2">"deny_host: "</span>
        iptables -A INPUT -s <span class="nv">$ip</span> -j DROP
    <span class="k">done</span>
<span class="k">fi</span>

<span class="c1">###########################################################</span>
<span class="c1"># セッション確立後のパケット疎通は許可</span>
<span class="c1">###########################################################</span>
iptables -A INPUT  -p tcp -m state --state ESTABLISHED,RELATED -j ACCEPT

<span class="c1">###########################################################</span>
<span class="c1"># 攻撃対策: Stealth Scan</span>
<span class="c1">###########################################################</span>
iptables -N STEALTH_SCAN <span class="c1"># "STEALTH_SCAN" という名前でチェーンを作る</span>
iptables -A STEALTH_SCAN -j LOG --log-prefix <span class="s2">"stealth_scan_attack: "</span>
iptables -A STEALTH_SCAN -j DROP

<span class="c1"># ステルススキャンらしきパケットは "STEALTH_SCAN" チェーンへジャンプする</span>
iptables -A INPUT -p tcp --tcp-flags SYN,ACK SYN,ACK -m state --state NEW -j STEALTH_SCAN
iptables -A INPUT -p tcp --tcp-flags ALL NONE -j STEALTH_SCAN

iptables -A INPUT -p tcp --tcp-flags SYN,FIN SYN,FIN         -j STEALTH_SCAN
iptables -A INPUT -p tcp --tcp-flags SYN,RST SYN,RST         -j STEALTH_SCAN
iptables -A INPUT -p tcp --tcp-flags ALL SYN,RST,ACK,FIN,URG -j STEALTH_SCAN

iptables -A INPUT -p tcp --tcp-flags FIN,RST FIN,RST -j STEALTH_SCAN
iptables -A INPUT -p tcp --tcp-flags ACK,FIN FIN     -j STEALTH_SCAN
iptables -A INPUT -p tcp --tcp-flags ACK,PSH PSH     -j STEALTH_SCAN
iptables -A INPUT -p tcp --tcp-flags ACK,URG URG     -j STEALTH_SCAN

<span class="c1">###########################################################</span>
<span class="c1"># 攻撃対策: フラグメントパケットによるポートスキャン,DOS攻撃</span>
<span class="c1"># namap -v -sF などの対策</span>
<span class="c1">###########################################################</span>
iptables -A INPUT -f -j LOG --log-prefix <span class="s1">'fragment_packet:'</span>
iptables -A INPUT -f -j DROP

<span class="c1">###########################################################</span>
<span class="c1"># 攻撃対策: Ping of Death</span>
<span class="c1">###########################################################</span>
<span class="c1"># 毎秒1回を超えるpingが10回続いたら破棄</span>
iptables -N PING_OF_DEATH <span class="c1"># "PING_OF_DEATH" という名前でチェーンを作る</span>
iptables -A PING_OF_DEATH -p icmp --icmp-type echo-request <span class="se">\</span>
         -m hashlimit <span class="se">\</span>
         --hashlimit <span class="m">1</span>/s <span class="se">\</span>
         --hashlimit-burst <span class="m">10</span> <span class="se">\</span>
         --hashlimit-htable-expire <span class="m">300000</span> <span class="se">\</span>
         --hashlimit-mode srcip <span class="se">\</span>
         --hashlimit-name t_PING_OF_DEATH <span class="se">\</span>
         -j RETURN

<span class="c1"># 制限を超えたICMPを破棄</span>
iptables -A PING_OF_DEATH -j LOG --log-prefix <span class="s2">"ping_of_death_attack: "</span>
iptables -A PING_OF_DEATH -j DROP

<span class="c1"># ICMP は "PING_OF_DEATH" チェーンへジャンプ</span>
iptables -A INPUT -p icmp --icmp-type echo-request -j PING_OF_DEATH

<span class="c1">###########################################################</span>
<span class="c1"># 攻撃対策: SYN Flood Attack</span>
<span class="c1"># この対策に加えて Syn Cookie を有効にすべし。</span>
<span class="c1">###########################################################</span>
iptables -N SYN_FLOOD <span class="c1"># "SYN_FLOOD" という名前でチェーンを作る</span>
iptables -A SYN_FLOOD -p tcp --syn <span class="se">\</span>
         -m hashlimit <span class="se">\</span>
         --hashlimit <span class="m">200</span>/s <span class="se">\</span>
         --hashlimit-burst <span class="m">3</span> <span class="se">\</span>
         --hashlimit-htable-expire <span class="m">300000</span> <span class="se">\</span>
         --hashlimit-mode srcip <span class="se">\</span>
         --hashlimit-name t_SYN_FLOOD <span class="se">\</span>
         -j RETURN

<span class="c1"># 解説</span>
<span class="c1"># -m hashlimit                       ホストごとに制限するため limit ではなく hashlimit を利用する</span>
<span class="c1"># --hashlimit 200/s                  秒間に200接続を上限にする</span>
<span class="c1"># --hashlimit-burst 3                上記の上限を超えた接続が3回連続であれば制限がかかる</span>
<span class="c1"># --hashlimit-htable-expire 300000   管理テーブル中のレコードの有効期間（単位：ms</span>
<span class="c1"># --hashlimit-mode srcip             送信元アドレスでリクエスト数を管理する</span>
<span class="c1"># --hashlimit-name t_SYN_FLOOD       /proc/net/ipt_hashlimit に保存されるハッシュテーブル名</span>
<span class="c1"># -j RETURN                          制限以内であれば、親チェーンに戻る</span>

<span class="c1"># 制限を超えたSYNパケットを破棄</span>
iptables -A SYN_FLOOD -j LOG --log-prefix <span class="s2">"syn_flood_attack: "</span>
iptables -A SYN_FLOOD -j DROP

<span class="c1"># SYNパケットは "SYN_FLOOD" チェーンへジャンプ</span>
iptables -A INPUT -p tcp --syn -j SYN_FLOOD

<span class="c1">###########################################################</span>
<span class="c1"># 攻撃対策: HTTP DoS/DDoS Attack</span>
<span class="c1">###########################################################</span>
iptables -N HTTP_DOS <span class="c1"># "HTTP_DOS" という名前でチェーンを作る</span>
iptables -A HTTP_DOS -p tcp -m multiport --dports <span class="nv">$HTTP</span> <span class="se">\</span>
         -m hashlimit <span class="se">\</span>
         --hashlimit <span class="m">1</span>/s <span class="se">\</span>
         --hashlimit-burst <span class="m">100</span> <span class="se">\</span>
         --hashlimit-htable-expire <span class="m">300000</span> <span class="se">\</span>
         --hashlimit-mode srcip <span class="se">\</span>
         --hashlimit-name t_HTTP_DOS <span class="se">\</span>
         -j RETURN

<span class="c1"># 解説</span>
<span class="c1"># -m hashlimit                       ホストごとに制限するため limit ではなく hashlimit を利用する</span>
<span class="c1"># --hashlimit 1/s                    秒間1接続を上限とする</span>
<span class="c1"># --hashlimit-burst 100              上記の上限を100回連続で超えると制限がかかる</span>
<span class="c1"># --hashlimit-htable-expire 300000   管理テーブル中のレコードの有効期間（単位：ms</span>
<span class="c1"># --hashlimit-mode srcip             送信元アドレスでリクエスト数を管理する</span>
<span class="c1"># --hashlimit-name t_HTTP_DOS        /proc/net/ipt_hashlimit に保存されるハッシュテーブル名</span>
<span class="c1"># -j RETURN                          制限以内であれば、親チェーンに戻る</span>

<span class="c1"># 制限を超えた接続を破棄</span>
iptables -A HTTP_DOS -j LOG --log-prefix <span class="s2">"http_dos_attack: "</span>
iptables -A HTTP_DOS -j DROP

<span class="c1"># HTTPへのパケットは "HTTP_DOS" チェーンへジャンプ</span>
iptables -A INPUT -p tcp -m multiport --dports <span class="nv">$HTTP</span> -j HTTP_DOS

<span class="c1">###########################################################</span>
<span class="c1"># 攻撃対策: IDENT port probe</span>
<span class="c1"># identを利用し攻撃者が将来の攻撃に備えるため、あるいはユーザーの</span>
<span class="c1"># システムが攻撃しやすいかどうかを確認するために、ポート調査を実行</span>
<span class="c1"># する可能性があります。</span>
<span class="c1"># DROP ではメールサーバ等のレスポンス低下になるため REJECTする</span>
<span class="c1">###########################################################</span>
iptables -A INPUT -p tcp -m multiport --dports <span class="nv">$IDENT</span> -j REJECT --reject-with tcp-reset

<span class="c1">###########################################################</span>
<span class="c1"># 攻撃対策: SSH Brute Force</span>
<span class="c1"># SSHはパスワード認証を利用しているサーバの場合、パスワード総当り攻撃に備える。</span>
<span class="c1"># 1分間に5回しか接続トライをできないようにする。</span>
<span class="c1"># SSHクライアント側が再接続を繰り返すのを防ぐためDROPではなくREJECTにする。</span>
<span class="c1"># SSHサーバがパスワード認証ONの場合、以下をアンコメントアウトする</span>
<span class="c1">###########################################################</span>
<span class="c1"># iptables -A INPUT -p tcp --syn -m multiport --dports $SSH -m recent --name ssh_attack --set</span>
<span class="c1"># iptables -A INPUT -p tcp --syn -m multiport --dports $SSH -m recent --name ssh_attack --rcheck --seconds 60 --hitcount 5 -j LOG --log-prefix "ssh_brute_force: "</span>
<span class="c1"># iptables -A INPUT -p tcp --syn -m multiport --dports $SSH -m recent --name ssh_attack --rcheck --seconds 60 --hitcount 5 -j REJECT --reject-with tcp-reset</span>

<span class="c1">###########################################################</span>
<span class="c1"># 攻撃対策: FTP Brute Force</span>
<span class="c1"># FTPはパスワード認証のため、パスワード総当り攻撃に備える。</span>
<span class="c1"># 1分間に5回しか接続トライをできないようにする。</span>
<span class="c1"># FTPクライアント側が再接続を繰り返すのを防ぐためDROPではなくREJECTにする。</span>
<span class="c1"># FTPサーバを立ち上げている場合、以下をアンコメントアウトする</span>
<span class="c1">###########################################################</span>
<span class="c1"># iptables -A INPUT -p tcp --syn -m multiport --dports $FTP -m recent --name ftp_attack --set</span>
<span class="c1"># iptables -A INPUT -p tcp --syn -m multiport --dports $FTP -m recent --name ftp_attack --rcheck --seconds 60 --hitcount 5 -j LOG --log-prefix "ftp_brute_force: "</span>
<span class="c1"># iptables -A INPUT -p tcp --syn -m multiport --dports $FTP -m recent --name ftp_attack --rcheck --seconds 60 --hitcount 5 -j REJECT --reject-with tcp-reset</span>

<span class="c1">###########################################################</span>
<span class="c1"># 全ホスト(ブロードキャストアドレス、マルチキャストアドレス)宛パケットは破棄</span>
<span class="c1">###########################################################</span>
iptables -A INPUT -d <span class="m">192</span>.168.1.255   -j LOG --log-prefix <span class="s2">"drop_broadcast: "</span>
iptables -A INPUT -d <span class="m">192</span>.168.1.255   -j DROP
iptables -A INPUT -d <span class="m">255</span>.255.255.255 -j LOG --log-prefix <span class="s2">"drop_broadcast: "</span>
iptables -A INPUT -d <span class="m">255</span>.255.255.255 -j DROP
iptables -A INPUT -d <span class="m">224</span>.0.0.1       -j LOG --log-prefix <span class="s2">"drop_broadcast: "</span>
iptables -A INPUT -d <span class="m">224</span>.0.0.1       -j DROP

<span class="c1">###########################################################</span>
<span class="c1"># 全ホスト(ANY)からの入力許可</span>
<span class="c1">###########################################################</span>

<span class="c1"># ICMP: ping に応答する設定</span>
iptables -A INPUT -p icmp -j ACCEPT <span class="c1"># ANY -&gt; SELF</span>

<span class="c1"># HTTP, HTTPS</span>
iptables -A INPUT -p tcp -m multiport --dports <span class="nv">$HTTP</span> -j ACCEPT <span class="c1"># ANY -&gt; SELF</span>

<span class="c1"># SSH: ホストを制限する場合は TRUST_HOSTS に信頼ホストを書き下記をコメントアウトする</span>
iptables -A INPUT -p tcp -m multiport --dports <span class="nv">$SSH</span> -j ACCEPT <span class="c1"># ANY -&gt; SEL</span>

<span class="c1"># FTP</span>
<span class="c1"># iptables -A INPUT -p tcp -m multiport --dports $FTP -j ACCEPT # ANY -&gt; SELF</span>

<span class="c1"># DNS</span>
<span class="c1"># iptables -A INPUT -p tcp -m multiport --sports $DNS -j ACCEPT # ANY -&gt; SELF</span>
<span class="c1"># iptables -A INPUT -p udp -m multiport --sports $DNS -j ACCEPT # ANY -&gt; SELF</span>

<span class="c1"># SMTP</span>
<span class="c1"># iptables -A INPUT -p tcp -m multiport --sports $SMTP -j ACCEPT # ANY -&gt; SELF</span>

<span class="c1"># POP3</span>
<span class="c1"># iptables -A INPUT -p tcp -m multiport --sports $POP3 -j ACCEPT # ANY -&gt; SELF</span>

<span class="c1"># IMAP</span>
<span class="c1"># iptables -A INPUT -p tcp -m multiport --sports $IMAP -j ACCEPT # ANY -&gt; SELF</span>

<span class="c1">###########################################################</span>
<span class="c1"># ローカルネットワーク(制限付き)からの入力許可</span>
<span class="c1">###########################################################</span>

<span class="k">if</span> <span class="o">[</span> <span class="s2">"</span><span class="nv">$LIMITED_LOCAL_NET</span><span class="s2">"</span> <span class="o">]</span>
<span class="k">then</span>
    <span class="c1"># SSH</span>
    iptables -A INPUT -p tcp -s <span class="nv">$LIMITED_LOCAL_NET</span> -m multiport --dports <span class="nv">$SSH</span> -j ACCEPT <span class="c1"># LIMITED_LOCAL_NET -&gt; SELF</span>

    <span class="c1"># FTP</span>
    iptables -A INPUT -p tcp -s <span class="nv">$LIMITED_LOCAL_NET</span> -m multiport --dports <span class="nv">$FTP</span> -j ACCEPT <span class="c1"># LIMITED_LOCAL_NET -&gt; SELF</span>

    <span class="c1"># MySQL</span>
    iptables -A INPUT -p tcp -s <span class="nv">$LIMITED_LOCAL_NET</span> -m multiport --dports <span class="nv">$MYSQL</span> -j ACCEPT <span class="c1"># LIMITED_LOCAL_NET -&gt; SELF</span>
<span class="k">fi</span>

<span class="c1">###########################################################</span>
<span class="c1"># 特定ホストからの入力許可</span>
<span class="c1">###########################################################</span>

<span class="k">if</span> <span class="o">[</span> <span class="s2">"</span><span class="nv">$ZABBIX_IP</span><span class="s2">"</span> <span class="o">]</span>
<span class="k">then</span>
    <span class="c1"># Zabbix関連を許可</span>
    iptables -A INPUT -p tcp -s <span class="nv">$ZABBIX_IP</span> --dport <span class="m">10050</span> -j ACCEPT <span class="c1"># Zabbix -&gt; SELF</span>
<span class="k">fi</span>

<span class="c1">###########################################################</span>
<span class="c1"># それ以外</span>
<span class="c1"># 上記のルールにも当てはまらなかったものはロギングして破棄</span>
<span class="c1">###########################################################</span>
iptables -A INPUT  -j LOG --log-prefix <span class="s2">"drop: "</span>
iptables -A INPUT  -j DROP

<span class="c1">###########################################################</span>
<span class="c1"># SSH 締め出し回避策</span>
<span class="c1"># 30秒間スリープしてその後 iptables をリセットする。</span>
<span class="c1"># SSH が締め出されていなければ、 Ctrl-C を押せるはず。</span>
<span class="c1">###########################################################</span>
<span class="nb">trap</span> <span class="s1">'finailize &amp;&amp; exit 0'</span> <span class="m">2</span> <span class="c1"># Ctrl-C をトラップする</span>
<span class="nb">echo</span> <span class="s2">"In 30 seconds iptables will be automatically reset."</span>
<span class="nb">echo</span> <span class="s2">"Don't forget to test new SSH connection!"</span>
<span class="nb">echo</span> <span class="s2">"If there is no problem then press Ctrl-C to finish."</span>
sleep <span class="m">30</span>
<span class="nb">echo</span> <span class="s2">"rollback..."</span>
initialize
</pre></div>
</div>

<p>ツッコミをうけての変更:</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ git log-graph 
* 65e8249 2012-08-23 Hidehito Nozawa aka Suin fix: -m multiport --dport"s"
</pre></div></div>
</div>
	</td>
</tr>
</table>
<br />
<table border="1" style="height:150px;">
<tr>
	<td rowspan="3">41位</td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="thumb-up-120px.png" /></i>1033</kbd>
		<a target="_blank" href="https://qiita.com/yusabana/items/8ce54577d959bb085b37">Rails4 今のところ最強なデバッグツール達</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-10-24<br />03:17:55</center>
	</td>
	<td style="width:200px;">
		<!--投稿者-->
		<center>
			@<a href="user/6038.html">yusabana</a>(31件の記事)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/6038/profile-images/1473682512">
		</center>
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Ruby]</b> <b>[Rails]</b> <b>[pry]</b> <b>[debug]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<!--
		<div style="width:350px;height:150px;overflow:scroll;">%s</div>
		-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p><strong>Gemfile</strong> の 「group :test, :development do」ブロックに書いている <strong>個人的に最強な設定</strong> を晒したいと思います。(2013/10/24 現在)</p>

<h2>
<span id="作業環境" class="fragment"></span><a href="#%E4%BD%9C%E6%A5%AD%E7%92%B0%E5%A2%83"><i class="fa fa-link"></i></a>作業環境</h2>

<ul>
<li>Ruby 2.0.0p247</li>
<li>Rails 4.0.0</li>
</ul>

<h2>
<span id="gemfileに設定している内容" class="fragment"></span><a href="#gemfile%E3%81%AB%E8%A8%AD%E5%AE%9A%E3%81%97%E3%81%A6%E3%81%84%E3%82%8B%E5%86%85%E5%AE%B9"><i class="fa fa-link"></i></a>Gemfileに設定している内容</h2>

<p><strong><em>※ コメントに随時変更したものを追記しますー</em></strong></p>

<div class="code-frame" data-lang="ruby">
<div class="code-lang"><span class="bold">Gemfile</span></div>
<div class="highlight"><pre><span></span><span class="n">group</span> <span class="ss">:test</span><span class="p">,</span> <span class="ss">:development</span> <span class="k">do</span>
  <span class="n">gem</span> <span class="s1">'pry-rails'</span>
  <span class="n">gem</span> <span class="s1">'pry-doc'</span>
  <span class="n">gem</span> <span class="s1">'pry-stack_explorer'</span>

  <span class="k">if</span> <span class="no">RUBY_VERSION</span> <span class="o">&gt;=</span> <span class="s1">'2.0.0'</span>
    <span class="n">gem</span> <span class="s1">'pry-byebug'</span>
  <span class="k">else</span>
    <span class="c1"># 以下はRuby1.9の時のみ使う(pry-byebugの代わりに)</span>
    <span class="c1"># debuggerは1.9以下でしか動作しない, remote は byebug で使えないようになった</span>
    <span class="n">gem</span> <span class="s1">'pry-debugger'</span>
    <span class="n">gem</span> <span class="s1">'pry-remote'</span>
  <span class="k">end</span>

  <span class="n">gem</span> <span class="s1">'better_errors'</span>
  <span class="n">gem</span> <span class="s1">'binding_of_caller'</span>

  <span class="n">gem</span> <span class="s1">'hirb'</span>
  <span class="n">gem</span> <span class="s1">'hirb-unicode'</span>

  <span class="n">gem</span> <span class="s1">'tapp'</span>
  <span class="n">gem</span> <span class="s1">'awesome_print'</span>
  <span class="n">gem</span> <span class="s1">'quiet_assets'</span>
  <span class="n">gem</span> <span class="s1">'annotate'</span><span class="p">,</span> <span class="ss">git</span><span class="p">:</span> <span class="s1">'git://github.com/ctran/annotate_models.git'</span>
  <span class="n">gem</span> <span class="s1">'timecop'</span>
  <span class="n">gem</span> <span class="s1">'rspec-rails'</span>
  <span class="n">gem</span> <span class="s1">'guard-rspec'</span>
  <span class="n">gem</span> <span class="s1">'factory_girl_rails'</span>
  <span class="n">gem</span> <span class="s1">'database_rewinder'</span>
<span class="k">end</span>
</pre></div>
</div>

<h3>
<span id="1pry-rails-について" class="fragment"></span><a href="#1pry-rails-%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6"><i class="fa fa-link"></i></a>1.pry-rails について</h3>

<p><code>rails console</code>をirbではなくpryにしてくれる<br>
<a href="https://github.com/rweng/pry-rails" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/rweng/pry-rails</a></p>

<h3>
<span id="2pry-doc-について" class="fragment"></span><a href="#2pry-doc-%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6"><i class="fa fa-link"></i></a>2.pry-doc について</h3>

<p>pry上でクラスやメソッドなどのドキュメントや定義元のソースコードを確認できる</p>

<div class="code-frame" data-lang="rb">
<div class="code-lang"><span class="bold">pry-doc</span></div>
<div class="highlight"><pre><span></span><span class="err">■ドキュメントを見る</span>
<span class="n">show</span><span class="o">-</span><span class="n">doc</span> <span class="nb">String</span><span class="o">.</span><span class="n">nil?</span>
<span class="no">OR</span>
<span class="p">?</span> <span class="nb">String</span><span class="o">.</span><span class="n">nil?</span>

<span class="err">■ソースを見る</span>
<span class="n">show</span><span class="o">-</span><span class="n">source</span> <span class="nb">String</span><span class="o">.</span><span class="n">nil?</span>
<span class="no">OR</span>
<span class="err">$</span> <span class="nb">String</span><span class="o">.</span><span class="n">nil?</span>
</pre></div>
</div>

<p><a href="https://github.com/pry/pry-doc" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/pry/pry-doc</a></p>

<h3>
<span id="3-デバッガーの各種gem" class="fragment"></span><a href="#3-%E3%83%87%E3%83%90%E3%83%83%E3%82%AC%E3%83%BC%E3%81%AE%E5%90%84%E7%A8%AEgem"><i class="fa fa-link"></i></a>3 デバッガーの各種Gem</h3>

<h4>
<span id="3-ⅰ-pry-byebugruby20以上専用-について" class="fragment"></span><a href="#3-%E2%85%B0-pry-byebugruby20%E4%BB%A5%E4%B8%8A%E5%B0%82%E7%94%A8-%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6"><i class="fa fa-link"></i></a>3-Ⅰ. pry-byebug(ruby2.0以上専用) について</h4>

<p><code>ブレークポイント</code>を仕込みたいソースコード上に<code>binding.pry</code> という文字列を仕込むことで、<code>rails server</code>で起動したコンソール上でブレークポイントを通るときにpryによるデバッガが立ち上がる。</p>

<p><em>注) pry-byebug は <code>Ruby2.0 以上</code> でしか使えない</em><br>
<a href="http://qiita.com/joker1007/items/f132db1b4a5e3f9278e9" id="reference-8f9cf2b86ca702fcc3c5">Ruby 2.0 向けのデバッガー byebugについて</a><br>
<a href="http://qiita.com/awakia/items/b79188f1cc710bae4b8d" id="reference-602d42a4ca4d04e349b0">pryでのデバッグ中にnextがstepの様な挙動をしてしまう問題の解決法</a><br>
<a href="http://philippos2.github.io/blog/2013/07/28/about-byebug-for-debug-with-pry/" rel="nofollow noopener" target="_blank">About-byebug-for-debug-with-pry</a></p>

<h4>
<span id="3-ⅱ-pry-stack_explorer-について" class="fragment"></span><a href="#3-%E2%85%B1-pry-stack_explorer-%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6"><i class="fa fa-link"></i></a>3-Ⅱ. pry-stack_explorer について</h4>

<p>pry-stack_explorerはデバッガ起動時に<code>show-stack</code>と入力することでその時のスタックの情報が見られる。</p>

<p>■pry-stack_explorerで使えるコマンド</p>

<table>
<thead>
<tr>
<th style="text-align: center">コマンド</th>
<th style="text-align: center">機能</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center">show-stack</td>
<td style="text-align: center">スタック表示</td>
</tr>
<tr>
<td style="text-align: center">up</td>
<td style="text-align: center">親のフレームに移動</td>
</tr>
<tr>
<td style="text-align: center">down</td>
<td style="text-align: center">参照されているフレームに移動</td>
</tr>
<tr>
<td style="text-align: center">frame</td>
<td style="text-align: center">詳細フレームに移動</td>
</tr>
</tbody>
</table>

<h4>
<span id="3-ⅲ-pry-debuggerruby19以下専用-について" class="fragment"></span><a href="#3-%E2%85%B2-pry-debuggerruby19%E4%BB%A5%E4%B8%8B%E5%B0%82%E7%94%A8-%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6"><i class="fa fa-link"></i></a>3-Ⅲ. pry-debugger(ruby1.9以下専用) について</h4>

<p>pry-byebugと使う用途は同じ。</p>

<p><em>注) pry-debugger は <code>Ruby1.9 以下</code> でしか使えない。</em><br>
<a href="https://github.com/nixme/pry-debugger" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/nixme/pry-debugger</a><br>
<a href="https://github.com/pry/pry/wiki/Available-plugins#pry-debugger" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/pry/pry/wiki/Available-plugins#pry-debugger</a></p>

<h4>
<span id="3-ⅳ-pry-remote-について" class="fragment"></span><a href="#3-%E2%85%B3-pry-remote-%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6"><i class="fa fa-link"></i></a>3-Ⅳ. pry-remote について</h4>

<p>アプリサーバを<code>バックグランド</code>で動かしている時 (<a href="http://pow.cx/" rel="nofollow noopener" target="_blank">Pow!!</a> または <a href="http://unicorn.bogomips.org/" rel="nofollow noopener" target="_blank">Unicorn</a>をデーモンモードで動かしている時など) に<code>pry-remote</code>というコマンドでデバッグコンソールを立ち上げることができる。<br>
<a href="https://github.com/pry/pry/wiki/Available-plugins#wiki-pry-remote" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/pry/pry/wiki/Available-plugins#wiki-pry-remote</a></p>

<p>アプリサーバを<code>フォアグランド</code>で動かしている時 (<code>rails server</code> で立ち上げている時など) は<code>pry-byebug</code> や <code>pry-debugger</code> のみ入れておけば起動したコンソールから確認できるので<code>pry-remote</code>は必要ない。</p>

<p><em>注）pry-byebugではpry-remoteをサポートしていないので使えない</em><br>
<a href="https://github.com/deivid-rodriguez/pry-byebug/blob/master/CHANGELOG.md#100-101-2013-05-07" rel="nofollow noopener" target="_blank">Dropped pry-remote support というリリースログ</a></p>

<h3>
<span id="4better_errors-binding_of_caller-について" class="fragment"></span><a href="#4better_errors-binding_of_caller-%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6"><i class="fa fa-link"></i></a>4.better_errors, binding_of_caller について</h3>

<p>エラー時にブラウザに表示するエラー画面をいい感じにしてくれる。<code>binding_of_caller</code>を入れることで、エラー画面でREPLを操作できるようになる。<br>
<a href="http://blog.livedoor.jp/sasata299/archives/51937655.html" rel="nofollow noopener" target="_blank">Railsならbetter_errorsを入れるとデバッグがはかどるなぁ </a></p>

<h3>
<span id="5hirb-hirb-unicode-について" class="fragment"></span><a href="#5hirb-hirb-unicode-%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6"><i class="fa fa-link"></i></a>5.hirb, hirb-unicode について</h3>

<p>ActiveRecordのデータをテーブル形式で表示してくれる。<br>
<a href="http://rochefort.hatenablog.com/entry/20120104/p1" class="autolink" rel="nofollow noopener" target="_blank">http://rochefort.hatenablog.com/entry/20120104/p1</a><br>
<a href="https://github.com/pry/pry/wiki/FAQ#wiki-hirb" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/pry/pry/wiki/FAQ#wiki-hirb</a><br>
<a href="http://morizyun.github.io/blog/pry-tips-rails-ruby/" rel="nofollow noopener" target="_blank">Pryの秘めた力を最大限引き出す4つの拡張機能[Rails] 「モデルの中身を綺麗に表示」を参照</a></p>

<div class="code-frame" data-lang="rb">
<div class="code-lang"><span class="bold">pryを開いている時に一時的にhirbを無効/有効にする</span></div>
<div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="no">Hirb</span><span class="o">.</span><span class="n">disable</span>

<span class="o">&gt;</span> <span class="no">Hirb</span><span class="o">.</span><span class="n">enable</span>
</pre></div>
</div>

<h3>
<span id="6tapp-について" class="fragment"></span><a href="#6tapp-%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6"><i class="fa fa-link"></i></a>6.tapp について</h3>

<p>任意のオブジェクトやメソッドに<code>.tapp</code>としてメソッドチェインを形成することで、その時のオブジェクトの状態を出力させる。<br>
メソッドチェインの途中のオブジェクトの状態を確認したいときに、処理を止めることなくデバッグプリントさせる。<br>
<a href="http://namakesugi.blog42.fc2.com/blog-entry-108.html" class="autolink" rel="nofollow noopener" target="_blank">http://namakesugi.blog42.fc2.com/blog-entry-108.html</a></p>

<h3>
<span id="7awesome_print-について" class="fragment"></span><a href="#7awesome_print-%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6"><i class="fa fa-link"></i></a>7.awesome_print について</h3>

<p><code>p</code> や <code>puts</code>　などのようにプリントデバッグにとても有用な <code>ap</code> メソッドを定義してくれる。pryコンソールの出力のフォーマットもawesom_printを利用している。(.pryrcで定義）<br>
<a href="http://qiita.com/Linda_pp/items/d75d7c3953faa34a1f0e" class="autolink" id="reference-53484701aada9c6caa8d">http://qiita.com/Linda_pp/items/d75d7c3953faa34a1f0e</a><br>
<a href="https://github.com/pry/pry/wiki/FAQ#wiki-awesome_print" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/pry/pry/wiki/FAQ#wiki-awesome_print</a></p>

<h3>
<span id="8quiet_assets-について" class="fragment"></span><a href="#8quiet_assets-%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6"><i class="fa fa-link"></i></a>8.quiet_assets について</h3>

<p>assets関連のファイルへのアクセスログを出力させないようにする<br>
<a href="https://github.com/evrone/quiet_assets" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/evrone/quiet_assets</a></p>

<h3>
<span id="9annotate-について" class="fragment"></span><a href="#9annotate-%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6"><i class="fa fa-link"></i></a>9.annotate について</h3>

<p>DBの定義情報を読み取り、ModelのクラスファイルにコメントでDBの情報を書き込む<br>
<a href="http://yoshifumisato.jeez.jp/wordpress/post/rails/693" class="autolink" rel="nofollow noopener" target="_blank">http://yoshifumisato.jeez.jp/wordpress/post/rails/693</a><br>
<a href="https://github.com/ctran/annotate_models" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/ctran/annotate_models</a></p>

<h3>
<span id="10timecop-について" class="fragment"></span><a href="#10timecop-%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6"><i class="fa fa-link"></i></a>10.timecop について</h3>

<p>一時的に日時を任意に、設定する<br>
<a href="https://github.com/travisjeffery/timecop" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/travisjeffery/timecop</a></p>

<h3>
<span id="11guard-rspec-について" class="fragment"></span><a href="#11guard-rspec-%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6"><i class="fa fa-link"></i></a>11.guard-rspec について</h3>

<p><a href="https://github.com/johnbintz/guard-rails" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/johnbintz/guard-rails</a><br>
Guardfileの定義情報をもとに、ファイル更新の都度テストを実行させる。Guardfileは基本的に<code>guard init</code>コマンドで自動生成したもの。<code>cmd: 'spring rspec -f doc'</code> となっているところだけ変更している状態。</p>

<p>そのためこのファイルでguardを動かすためには以下の2つの条件が必要です。</p>

<ol>
<li>rspecを入れている</li>
<li>springを入れている</li>
</ol>

<div class="code-frame" data-lang="ruby">
<div class="code-lang"><span class="bold">Guardfile</span></div>
<div class="highlight"><pre><span></span><span class="c1"># A sample Guardfile</span>
<span class="c1"># More info at https://github.com/guard/guard#readme</span>

<span class="n">guard</span> <span class="ss">:rspec</span><span class="p">,</span> <span class="ss">cmd</span><span class="p">:</span> <span class="s1">'spring rspec -f doc'</span> <span class="k">do</span>
  <span class="n">watch</span><span class="p">(</span><span class="sr">%r{^spec/.+_spec\.rb$}</span><span class="p">)</span>
  <span class="n">watch</span><span class="p">(</span><span class="sr">%r{^lib/(.+)\.rb$}</span><span class="p">)</span>     <span class="p">{</span> <span class="o">|</span><span class="n">m</span><span class="o">|</span> <span class="s2">"spec/lib/</span><span class="si">#{</span><span class="n">m</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span><span class="si">}</span><span class="s2">_spec.rb"</span> <span class="p">}</span>
  <span class="n">watch</span><span class="p">(</span><span class="s1">'spec/spec_helper.rb'</span><span class="p">)</span>  <span class="p">{</span> <span class="s2">"spec"</span> <span class="p">}</span>

  <span class="c1"># Rails example</span>
  <span class="n">watch</span><span class="p">(</span><span class="sr">%r{^app/(.+)\.rb$}</span><span class="p">)</span>                           <span class="p">{</span> <span class="o">|</span><span class="n">m</span><span class="o">|</span> <span class="s2">"spec/</span><span class="si">#{</span><span class="n">m</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span><span class="si">}</span><span class="s2">_spec.rb"</span> <span class="p">}</span>
  <span class="n">watch</span><span class="p">(</span><span class="sr">%r{^app/(.*)(\.erb|\.haml|\.slim)$}</span><span class="p">)</span>          <span class="p">{</span> <span class="o">|</span><span class="n">m</span><span class="o">|</span> <span class="s2">"spec/</span><span class="si">#{</span><span class="n">m</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span><span class="si">}#{</span><span class="n">m</span><span class="o">[</span><span class="mi">2</span><span class="o">]</span><span class="si">}</span><span class="s2">_spec.rb"</span> <span class="p">}</span>
  <span class="n">watch</span><span class="p">(</span><span class="sr">%r{^app/controllers/(.+)_(controller)\.rb$}</span><span class="p">)</span>  <span class="p">{</span> <span class="o">|</span><span class="n">m</span><span class="o">|</span> <span class="o">[</span><span class="s2">"spec/routing/</span><span class="si">#{</span><span class="n">m</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span><span class="si">}</span><span class="s2">_routing_spec.rb"</span><span class="p">,</span> <span class="s2">"spec/</span><span class="si">#{</span><span class="n">m</span><span class="o">[</span><span class="mi">2</span><span class="o">]</span><span class="si">}</span><span class="s2">s/</span><span class="si">#{</span><span class="n">m</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span><span class="si">}</span><span class="s2">_</span><span class="si">#{</span><span class="n">m</span><span class="o">[</span><span class="mi">2</span><span class="o">]</span><span class="si">}</span><span class="s2">_spec.rb"</span><span class="p">,</span> <span class="s2">"spec/acceptance/</span><span class="si">#{</span><span class="n">m</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span><span class="si">}</span><span class="s2">_spec.rb"</span><span class="o">]</span> <span class="p">}</span>
  <span class="n">watch</span><span class="p">(</span><span class="sr">%r{^spec/support/(.+)\.rb$}</span><span class="p">)</span>                  <span class="p">{</span> <span class="s2">"spec"</span> <span class="p">}</span>
  <span class="n">watch</span><span class="p">(</span><span class="s1">'config/routes.rb'</span><span class="p">)</span>                           <span class="p">{</span> <span class="s2">"spec/routing"</span> <span class="p">}</span>
  <span class="n">watch</span><span class="p">(</span><span class="s1">'app/controllers/application_controller.rb'</span><span class="p">)</span>  <span class="p">{</span> <span class="s2">"spec/controllers"</span> <span class="p">}</span>

  <span class="c1"># Capybara features specs</span>
  <span class="n">watch</span><span class="p">(</span><span class="sr">%r{^app/views/(.+)/.*\.(erb|haml|slim)$}</span><span class="p">)</span>     <span class="p">{</span> <span class="o">|</span><span class="n">m</span><span class="o">|</span> <span class="s2">"spec/features/</span><span class="si">#{</span><span class="n">m</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span><span class="si">}</span><span class="s2">_spec.rb"</span> <span class="p">}</span>

  <span class="c1"># Turnip features and steps</span>
  <span class="n">watch</span><span class="p">(</span><span class="sr">%r{^spec/acceptance/(.+)\.feature$}</span><span class="p">)</span>
  <span class="n">watch</span><span class="p">(</span><span class="sr">%r{^spec/acceptance/steps/(.+)_steps\.rb$}</span><span class="p">)</span>   <span class="p">{</span> <span class="o">|</span><span class="n">m</span><span class="o">|</span> <span class="no">Dir</span><span class="o">[</span><span class="no">File</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s2">"**/</span><span class="si">#{</span><span class="n">m</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span><span class="si">}</span><span class="s2">.feature"</span><span class="p">)</span><span class="o">][</span><span class="mi">0</span><span class="o">]</span> <span class="o">||</span> <span class="s1">'spec/acceptance'</span> <span class="p">}</span>
<span class="k">end</span>
</pre></div>
</div>

<h3>
<span id="12factory_girl_rails-について" class="fragment"></span><a href="#12factory_girl_rails-%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6"><i class="fa fa-link"></i></a>12.factory_girl_rails について</h3>

<p>データの生成をフィクスチャからファクトリーに変更する。<br>
<a href="https://github.com/thoughtbot/factory_girl" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/thoughtbot/factory_girl</a></p>

<h3>
<span id="13database_rewinder-について" class="fragment"></span><a href="#13database_rewinder-%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6"><i class="fa fa-link"></i></a>13.database_rewinder について</h3>

<p><code>database_rewinder</code> はテスト毎にデータをクリアすることに対応するためのGem<br>
<a href="https://github.com/amatsuda/database_rewinder" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/amatsuda/database_rewinder</a></p>

<hr>

<h3>
<span id="ぼくのpryrc" class="fragment"></span><a href="#%E3%81%BC%E3%81%8F%E3%81%AEpryrc"><i class="fa fa-link"></i></a>ぼくの「.pryrc」</h3>

<p>参考のページを見つつ取り入れられるところは取り入れて「.pryrc」を作っている。<br>
「.pryrc」にはpryの設定と、関連するライブラリの連携設定などを記述。<br>
【参考】<br>
<a href="https://github.com/JuanitoFatas/dotpryrc/" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/JuanitoFatas/dotpryrc/</a><br>
<a href="https://github.com/pry/pry/wiki/Pry-rc" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/pry/pry/wiki/Pry-rc</a></p>

<div class="code-frame" data-lang="ruby">
<div class="code-lang"><span class="bold">.pryrc</span></div>
<div class="highlight"><pre><span></span><span class="c1">## Settings</span>
<span class="no">Pry</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">color</span> <span class="o">=</span> <span class="kp">true</span>
<span class="no">Pry</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">editor</span> <span class="o">=</span> <span class="s2">"vim"</span>

<span class="no">Pry</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">prompt</span> <span class="o">=</span> <span class="nb">proc</span> <span class="k">do</span> <span class="o">|</span><span class="n">obj</span><span class="p">,</span> <span class="n">level</span><span class="p">,</span> <span class="n">_</span><span class="o">|</span>
  <span class="n">prompt</span> <span class="o">=</span> <span class="s2">""</span>
  <span class="n">prompt</span> <span class="o">&lt;&lt;</span> <span class="s2">"</span><span class="si">#{</span><span class="no">Rails</span><span class="o">.</span><span class="n">version</span><span class="si">}</span><span class="s2">@"</span> <span class="k">if</span> <span class="n">defined?</span><span class="p">(</span><span class="no">Rails</span><span class="p">)</span>
  <span class="n">prompt</span> <span class="o">&lt;&lt;</span> <span class="s2">"</span><span class="si">#{</span><span class="no">RUBY_VERSION</span><span class="si">}</span><span class="s2">"</span>
  <span class="s2">"</span><span class="si">#{</span><span class="n">prompt</span><span class="si">}</span><span class="s2"> (</span><span class="si">#{</span><span class="n">obj</span><span class="si">}</span><span class="s2">)&gt; "</span>
<span class="k">end</span>


<span class="c1">## Alias</span>
<span class="no">Pry</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">commands</span><span class="o">.</span><span class="n">alias_command</span> <span class="s2">"lM"</span><span class="p">,</span> <span class="s2">"ls -M"</span>
<span class="c1"># Ever get lost in pryland? try w!</span>
<span class="no">Pry</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">commands</span><span class="o">.</span><span class="n">alias_command</span> <span class="s1">'w'</span><span class="p">,</span> <span class="s1">'whereami'</span>
<span class="c1"># Clear Screen</span>
<span class="no">Pry</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">commands</span><span class="o">.</span><span class="n">alias_command</span> <span class="s1">'.clr'</span><span class="p">,</span> <span class="s1">'.clear'</span>


<span class="c1">## Below others cooperation</span>

<span class="c1"># refs: https://github.com/pry/pry/wiki/FAQ#wiki-awesome_print</span>
<span class="k">if</span> <span class="n">defined?</span> <span class="no">AwesomePrint</span>
  <span class="k">begin</span>
    <span class="nb">require</span> <span class="s1">'awesome_print'</span>
    <span class="no">Pry</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">print</span> <span class="o">=</span> <span class="nb">proc</span> <span class="p">{</span> <span class="o">|</span><span class="n">output</span><span class="p">,</span> <span class="n">value</span><span class="o">|</span> <span class="no">Pry</span><span class="o">::</span><span class="no">Helpers</span><span class="o">::</span><span class="no">BaseHelpers</span><span class="o">.</span><span class="n">stagger_output</span><span class="p">(</span><span class="s2">"=&gt; </span><span class="si">#{</span><span class="n">value</span><span class="o">.</span><span class="n">ai</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span> <span class="n">output</span><span class="p">)</span> <span class="p">}</span>
    <span class="c1"># Pry.config.print = proc { |output, value| output.puts value.ai } #ページングなし</span>
  <span class="k">rescue</span> <span class="no">LoadError</span> <span class="o">=&gt;</span> <span class="n">err</span>
    <span class="nb">puts</span> <span class="s2">"no awesome_print :("</span>
    <span class="nb">puts</span> <span class="n">err</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="c1"># refs: https://github.com/pry/pry/wiki/FAQ#wiki-hirb</span>
<span class="k">if</span> <span class="n">defined?</span> <span class="no">Hirb</span>
 <span class="no">Hirb</span><span class="o">::</span><span class="no">View</span><span class="o">.</span><span class="n">instance_eval</span> <span class="k">do</span>
   <span class="k">def</span> <span class="nf">enable_output_method</span>
     <span class="vi">@output_method</span> <span class="o">=</span> <span class="kp">true</span>
     <span class="vi">@old_print</span> <span class="o">=</span> <span class="no">Pry</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">print</span>
     <span class="no">Pry</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">print</span> <span class="o">=</span> <span class="nb">proc</span> <span class="k">do</span> <span class="o">|</span><span class="n">output</span><span class="p">,</span> <span class="n">value</span><span class="o">|</span>
       <span class="no">Hirb</span><span class="o">::</span><span class="no">View</span><span class="o">.</span><span class="n">view_or_page_output</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="o">||</span> <span class="vi">@old_print</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">output</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
     <span class="k">end</span>
   <span class="k">end</span>

   <span class="k">def</span> <span class="nf">disable_output_method</span>
     <span class="no">Pry</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">print</span> <span class="o">=</span> <span class="vi">@old_print</span>
     <span class="vi">@output_method</span> <span class="o">=</span> <span class="kp">nil</span>
   <span class="k">end</span>
 <span class="k">end</span>

 <span class="no">Hirb</span><span class="o">.</span><span class="n">enable</span>
<span class="k">end</span>

<span class="c1"># refs: https://github.com/deivid-rodriguez/pry-byebug#matching-byebug-behaviour</span>
<span class="k">if</span> <span class="n">defined?</span><span class="p">(</span><span class="no">PryByebug</span><span class="p">)</span>
  <span class="no">Pry</span><span class="o">.</span><span class="n">commands</span><span class="o">.</span><span class="n">alias_command</span> <span class="s1">'c'</span><span class="p">,</span> <span class="s1">'continue'</span>
  <span class="no">Pry</span><span class="o">.</span><span class="n">commands</span><span class="o">.</span><span class="n">alias_command</span> <span class="s1">'s'</span><span class="p">,</span> <span class="s1">'step'</span>
  <span class="no">Pry</span><span class="o">.</span><span class="n">commands</span><span class="o">.</span><span class="n">alias_command</span> <span class="s1">'n'</span><span class="p">,</span> <span class="s1">'next'</span>
  <span class="no">Pry</span><span class="o">.</span><span class="n">commands</span><span class="o">.</span><span class="n">alias_command</span> <span class="s1">'f'</span><span class="p">,</span> <span class="s1">'finish'</span>
<span class="k">end</span>
</pre></div>
</div>

<p>以上。<br>
ところどころ参考サイトへのリンクを貼らせていただきました！ありがとうございます。</p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1" style="height:150px;">
<tr>
	<td rowspan="3">42位</td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="thumb-up-120px.png" /></i>1020</kbd>
		<a target="_blank" href="https://qiita.com/TsuyoshiUshio@github/items/89030baca68b05a9783d">Chefを読んで実行するための全知識</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2014-03-16<br />18:42:33</center>
	</td>
	<td style="width:200px;">
		<!--投稿者-->
		<center>
			@<a href="user/3470.html">TsuyoshiUshio@github</a>(123件の記事)<br />(Simplearchitect 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/3470/profile-images/1473683187">
		</center>
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[chef]</b> <b>[chef-solo]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<!--
		<div style="width:350px;height:150px;overflow:scroll;">%s</div>
		-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>このドキュメントでは、Chefを実行して、インフラを作成したい人が、既存のレシピがあるのを前提に、Chefの概要を理解するためのドキュメントです。Chef-soloの構成のみに対応した記述になっています。理解が間違えているところとかあればご指摘ください。</p>

<h2>
<span id="1-chefの概要" class="fragment"></span><a href="#1-chef%E3%81%AE%E6%A6%82%E8%A6%81"><i class="fa fa-link"></i></a>1. Chefの概要</h2>

<h3>
<span id="11-chefとは" class="fragment"></span><a href="#11-chef%E3%81%A8%E3%81%AF"><i class="fa fa-link"></i></a>1.1. Chefとは</h3>

<p>シェフは、インフラストラクチャーをコードに変換するための自動化プラットフォームです。仮想環境でも、物理環境でも、クラウドでも使う事ができます。インフラストラクチャを自動化することで、プロダクトのマーケット投入を早めたり、スケールや複雑さに対応したり、システムを安全に保ちます。</p>

<h3>
<span id="12-chefの仕組み" class="fragment"></span><a href="#12-chef%E3%81%AE%E4%BB%95%E7%B5%84%E3%81%BF"><i class="fa fa-link"></i></a>1.2. Chefの仕組み</h3>

<p>Chefはサーバーをセットアップして、希望の状態にするための「クックブック」「ノードオブジェクト」というDSL(設定ファイルっぽいもの)をローカルのワークステーションで作成します。それらのDSLをローカルのバーチャルマシンや、クラウド、物理サーバーに反映させると、サーバーのセットアップが完了します。</p>

<p><a href="https://camo.qiitausercontent.com/ab55c5ec505afacfff5e5e960dea8c4a6b60e416/687474703a2f2f7777772e676574636865662e636f6d2f696d616765732f63686172742d62617369632d696e7374616c6c6174696f6e2e6a7067" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/ab55c5ec505afacfff5e5e960dea8c4a6b60e416/687474703a2f2f7777772e676574636865662e636f6d2f696d616765732f63686172742d62617369632d696e7374616c6c6174696f6e2e6a7067" alt="Chefの全体像" data-canonical-src="http://www.getchef.com/images/chart-basic-installation.jpg"></a></p>

<h3>
<span id="13-chefで使われる用語" class="fragment"></span><a href="#13-chef%E3%81%A7%E4%BD%BF%E3%82%8F%E3%82%8C%E3%82%8B%E7%94%A8%E8%AA%9E"><i class="fa fa-link"></i></a>1.3. Chefで使われる用語</h3>

<p>Chefで使われる代表的な用語は次のような物です。chefはServer-Client形式のものと、単独で使うものがありますが、本ドキュメントでは後者を取り扱います。</p>

<h4>
<span id="131-cookbookとreceipe" class="fragment"></span><a href="#131-cookbook%E3%81%A8receipe"><i class="fa fa-link"></i></a>1.3.1. cookbookとreceipe</h4>

<p>cookbookというのは、お料理本の意味で、複数のreceipe(レシピ)を含みます。一つのcookbookが一つの料理の料理方法が載っています。例えばカレーです。receipeは、カレーでも、様々なカレーがあるので、そのカレーの種類だけ作り方があり、それがreceipeにまとまっているイメージです。<br>
 　技術的にいうと、MySQLとかApacheとか毎にcookbookがあり、その中にいくつかreceipeがあります。例えばMySQLのMasterとか、Slaveとかです。具体的なreceipeを適用すると、そこで設定されたとおりに、実際のサーバーが出来上がります.receipeには、こうなってほしいという望まれるサーバーの状態が定義されています。</p>

<h4>
<span id="132-knife" class="fragment"></span><a href="#132-knife"><i class="fa fa-link"></i></a>1.3.2. knife</h4>

<p>chefは料理の例えになっています。料理をするには包丁とかが必要になります。<a href="http://docs.opscode.com/chef/knife.html" rel="nofollow noopener" target="_blank">knife</a>は、実際にcookbookをサーバーに適用する時に使うコマンドです。</p>

<h3>
<span id="14-chefの考え方" class="fragment"></span><a href="#14-chef%E3%81%AE%E8%80%83%E3%81%88%E6%96%B9"><i class="fa fa-link"></i></a>1.4. Chefの考え方</h3>

<h4>
<span id="141-immutable-infrastructure" class="fragment"></span><a href="#141-immutable-infrastructure"><i class="fa fa-link"></i></a>1.4.1. Immutable Infrastructure</h4>

<p>最近は仮想化の発達により、クラウドや、仮想マシンにより、カンタンにサーバーのインスタンスを作ったり、壊したりということができるようになりました。また、アプリケーションのインストール等も従来は、手で手順を作って、その手順に従ってコマンドを打って環境を作っていました。最近は、サーバーへのインストールや設定、そしてインスタンスの起動や停止といったことまで「プログラム」で実行できるようになりました。この動きをInfrastracture as a codeといいます。この流れで出てきた考えがImmutable infrastructureという考えです。通常のサーバーは一度セットアップのあとは、ライブラリのバージョンアップ、設定変更にあわせて、サーバーで操作を行い、サーバーの状態を変更してきました。ところが、こういう事をすると、サーバーにより、差異がでてきたり、インストールしているパッケージの整合性が取れなくなったり、挙動がおかしくなったり、操作ミスしたりといったようにいろいろな問題が発生してきます。</p>

<p>　ですので、一度作成したサーバーのレシピは、サーバー側では設定変更を行わず、あくまで、Chefのようなプロビジョニングツールの方で、レシピ等を変更するようにします。つまり、サーバーの状態はいつも同じ（不変）な状態をキープできるようになります。そうすると、どこでも、何回セットアップしたとしても、まったく同じ状態のサーバーがでてきます。<br>
　<br>
　ポイントは、サーバー側で設定変更等をしないことです。あくまでレシピを変更しましょう。<br>
　</p>

<h4>
<span id="142-冪等性" class="fragment"></span><a href="#142-%E5%86%AA%E7%AD%89%E6%80%A7"><i class="fa fa-link"></i></a>1.4.2. 冪等性</h4>

<p>レシピを作るときには、冪等性という性質をもっている事が重要視されます。冪等性は、Chefにおいては、何回レシピを適用しても、結果（サーバーの状態）が同じになるような性質です。例えば、最初にApacheのレシピを作ったときに、まず、Aapcheをインストールするところまで作ったとして、レシピを流してサーバーを作りました。次に、設定ファイルの変更をレシピに追加して、再度レシピを同じサーバーに流れた時にも、１からインスタンスを上げて同じレシピを流した時でも同じ結果が得られるような作りにしましょうということです。　</p>

<h4>
<span id="143-捨てやすくすること" class="fragment"></span><a href="#143-%E6%8D%A8%E3%81%A6%E3%82%84%E3%81%99%E3%81%8F%E3%81%99%E3%82%8B%E3%81%93%E3%81%A8"><i class="fa fa-link"></i></a>1.4.3. 捨てやすくすること</h4>

<p>　Chefのようなツールがあれば、サーバーがおかしくなったらいつでも、それを捨てて、すぐにクラウドでインスタンスを立ち上げて、Chefを流して、セットアップするというのが非常に短時間でできます。<br>
　だから、一度作成したインスタンスをずっと使おうという発想ではなくて、今まで使っていたインスタンスはいつでも捨ててChefを流したら同じ状態になるような設計にしましょう。</p>

<h2>
<span id="2-chefの実行方法" class="fragment"></span><a href="#2-chef%E3%81%AE%E5%AE%9F%E8%A1%8C%E6%96%B9%E6%B3%95"><i class="fa fa-link"></i></a>2. Chefの実行方法</h2>

<h3>
<span id="21-chefのインストール" class="fragment"></span><a href="#21-chef%E3%81%AE%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB"><i class="fa fa-link"></i></a>2.1. chefのインストール</h3>

<p>次のコマンドもしくは、Gemfileに記述しましょう</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>% gem install chef
% gem install knife-solo 
</pre></div></div>

<p>尚、このGemが使える前提条件は次の通りです。</p>

<ul>
<li>Unix, Linux, MacOSX, MS Windows</li>
<li>MacOSXの場合はXCodeをインストールする</li>
<li>githubのアカウントが必要なのでgitもインストールしておく</li>
<li>サーバーにアクセスできるようにする(SSHで)</li>
<li>サーバーのドメイン名か、IPAddressが事前にあること</li>
</ul>

<p><a href="http://docs.opscode.com/install_workstation.html" rel="nofollow noopener" target="_blank">Install Chef 11.x on Workspation</a></p>

<h3>
<span id="22-初期セットアップ" class="fragment"></span><a href="#22-%E5%88%9D%E6%9C%9F%E3%82%BB%E3%83%83%E3%83%88%E3%82%A2%E3%83%83%E3%83%97"><i class="fa fa-link"></i></a>2.2. 初期セットアップ</h3>

<h4>
<span id="221-リポジトリの設定" class="fragment"></span><a href="#221-%E3%83%AA%E3%83%9D%E3%82%B8%E3%83%88%E3%83%AA%E3%81%AE%E8%A8%AD%E5%AE%9A"><i class="fa fa-link"></i></a>2.2.1. リポジトリの設定</h4>

<p>chefのファイルは、GitHub等のレポジトリで管理するのが望ましいでしょう。１つのプロジェクトに対して１つのchef用リポジトリというレベルの粒度で作成しましょう。</p>

<p>knifeコマンドを使ってリポジトリを初期化します。knifeの設定ファイル(~/.chef/knife.rb)等が作成されます。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>% knife solo init chef
</pre></div></div>

<h3>
<span id="23-ディレクトリの構造" class="fragment"></span><a href="#23-%E3%83%87%E3%82%A3%E3%83%AC%E3%82%AF%E3%83%88%E3%83%AA%E3%81%AE%E6%A7%8B%E9%80%A0"><i class="fa fa-link"></i></a>2.3. ディレクトリの構造</h3>

<p>適当ですが、私のプロジェクトのchefディレクトリ以下は次のような構成になっています。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ tree -L 2
.
|-- Berksfile
|-- Berksfile.lock
|-- Gemfile
|-- Gemfile.lock
|-- cookbooks
|   |-- Berksfile.lock
|   |-- apache2
|   |-- apt
|   |-- aws
|   |-- build-essential
|   |-- chef_handler
|   |-- database
|   |-- homebrew
|   |-- iptables
|   |-- logrotate
|   |-- mysql
|   |-- openssl
|   |-- pacman
|   |-- postgresql
|   |-- windows
|   |-- xfs
|   `-- yum
|-- data_bags
|-- environments
|-- nodes
|   |-- vagrant.json
|   `-- mysql01.json
|-- roles
|   |-- all_in_one.json
|   |-- app_server.json
|   |-- mysql_master_server.json
|   |-- mysql_slave_server.json
|   `-- varnish_server.json
|-- site-cookbooks
|   |-- info-base
|   |-- mysql55
|   |-- mysql56
|   `-- varnish
`-- vendor
    `-- bundle
</pre></div></div>

<h4>
<span id="231-一般的なディレクトリ" class="fragment"></span><a href="#231-%E4%B8%80%E8%88%AC%E7%9A%84%E3%81%AA%E3%83%87%E3%82%A3%E3%83%AC%E3%82%AF%E3%83%88%E3%83%AA"><i class="fa fa-link"></i></a>2.3.1. 一般的なディレクトリ</h4>

<p>各ディレクトリについて説明していきます。</p>

<table>
<thead>
<tr>
<th style="text-align: left">ディレクトリ</th>
<th style="text-align: right">名称</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left">cookbooks</td>
<td style="text-align: right">インターネットから取得したcookbookが複数格納されます</td>
</tr>
<tr>
<td style="text-align: left">data_bags</td>
<td style="text-align: right">ドメインデータが格納されます</td>
</tr>
<tr>
<td style="text-align: left">environments</td>
<td style="text-align: right">staging/production等環境固有の状態が格納されます</td>
</tr>
<tr>
<td style="text-align: left">nodes</td>
<td style="text-align: right">個別のノードの状態が格納されます</td>
</tr>
<tr>
<td style="text-align: left">roles</td>
<td style="text-align: right">役割(web-server/db-server等)の状態が格納されます</td>
</tr>
<tr>
<td style="text-align: left">site-cookbooks</td>
<td style="text-align: right">自作のcookbookが作成されます</td>
</tr>
</tbody>
</table>

<h5>
<span id="2311-cookbooks" class="fragment"></span><a href="#2311-cookbooks"><i class="fa fa-link"></i></a>2.3.1.1. cookbooks</h5>

<p>インターネットから取得したcookbookが格納されます。このセクションは自分で触らない方がよいと思います。中身を読むだけにしましょう。Berksというツールを使って、このcookbookを取得します。<a href="http://community.opscode.com/cookbooks" rel="nofollow noopener" target="_blank">Opscode Community</a>に存在するcookbookを取得して使う事ができます。</p>

<p>cookbookの具体的な中身に関してはこの後解説いたします。</p>

<h5>
<span id="2312-data_bags" class="fragment"></span><a href="#2312-data_bags"><i class="fa fa-link"></i></a>2.3.1.2. data_bags</h5>

<p>このセクションには、OSでセットアップするユーザ等、OSセットアップに関する「ドメイン」のデータを格納します。<br>
 具体的にはSSHの鍵のデータもここで保持されたりします。</p>

<h5>
<span id="2313-environments" class="fragment"></span><a href="#2313-environments"><i class="fa fa-link"></i></a>2.3.1.3. environments</h5>

<p>staging/production/develop等の環境の違いに関する設定が記述されます。</p>

<h5>
<span id="2314-nodes" class="fragment"></span><a href="#2314-nodes"><i class="fa fa-link"></i></a>2.3.1.4. nodes</h5>

<p>　個別の具体的なnodeに対する設定や状態が記述されます。</p>

<h5>
<span id="2315-roles" class="fragment"></span><a href="#2315-roles"><i class="fa fa-link"></i></a>2.3.1.5. roles</h5>

<p>web-server, db-server等、サーバーの種類別の設定や状態が記述されます。</p>

<h5>
<span id="2316-site-cookbooks" class="fragment"></span><a href="#2316-site-cookbooks"><i class="fa fa-link"></i></a>2.3.1.6. site-cookbooks</h5>

<p>cookbooks以外の、自分たちで作ったcookbookをここに格納します。 </p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ tree -L 3

|-- chef
|   |-- Berksfile
|   |-- Berksfile.lock
|   |-- Gemfile
|   |-- Gemfile.lock
|   |-- cookbooks
|   |   |-- Berksfile.lock
|   |   |-- apache2
|   |   |-- apt
|   |   |-- aws
|   |   |-- build-essential
|   |   |-- chef_handler
|   |   |-- database
|   |   |-- homebrew
|   |   |-- iptables
|   |   |-- logrotate
|   |   |-- mysql
|   |   |-- openssl
|   |   |-- pacman
|   |   |-- postgresql
|   |   |-- windows
|   |   |-- xfs
|   |   `-- yum
|   |-- data_bags
|   |-- environments
|   |-- nodes
|   |   |-- vagrant.json
|   |   |-- info_ec2.json
|   |   `-- mysql01.json
|   |-- roles
|   |   |-- all_in_one.json
|   |   |-- app_server.json
|   |   |-- mysql_master_server.json
|   |   |-- mysql_slave_server.json
|   |   `-- varnish_server.json
|   |-- site-cookbooks
|   |   |-- info-base
|   |   |-- mysql55
|   |   |-- mysql56
|   |   `-- varnish
|   `-- vendor
|       `-- bundle
</pre></div></div>

<h3>
<span id="23-chefのファイルの読み方" class="fragment"></span><a href="#23-chef%E3%81%AE%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AE%E8%AA%AD%E3%81%BF%E6%96%B9"><i class="fa fa-link"></i></a>2.3. Chefのファイルの読み方</h3>

<p>chefの設定を読み解くためには、nodesディレクトリにある、nodeオブジェクトファイル(jsonファイル)からたどってみるのがいいと思います。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ tree -L 2
.
|-- Berksfile
|-- Berksfile.lock
|-- Gemfile
|-- Gemfile.lock
|-- cookbooks
|   |-- Berksfile.lock
|   |-- apache2
|   |-- apt
|   |-- aws
|   |-- build-essential
|   |-- chef_handler
|   |-- database
|   |-- homebrew
|   |-- iptables
|   |-- logrotate
|   |-- mysql
|   |-- openssl
|   |-- pacman
|   |-- postgresql
|   |-- windows
|   |-- xfs
|   `-- yum
|-- data_bags
|-- environments
|-- nodes
|   |-- vagrant.json
|   `-- mysql01.json
|-- roles
|   |-- all_in_one.json
|   |-- app_server.json
|   |-- mysql_master_server.json
|   |-- mysql_slave_server.json
|   `-- varnish_server.json
|-- site-cookbooks
|   |-- info-base
|   |-- mysql55
|   |-- mysql56
|   `-- varnish
`-- vendor
    `-- bundle
</pre></div></div>

<h4>
<span id="231-nodesnodeファイル" class="fragment"></span><a href="#231-nodesnode%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB"><i class="fa fa-link"></i></a>2.3.1. nodes/nodeファイル</h4>

<p>ちなみに、nodes/roles/environmentのディレクトリのファイルは、書き方は同じになっています。これらは設定を整理するために分割されているだけです。後述の特定のルールによって設定が上書きされます。例えば今のnodeファイルを見てみましょう。</p>

<p>これは、rolesにあるall_in_oneというのを実行(run_list)する事だけが示されています。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span># vagrant.json

{"run_list":["role[all_in_one]"]}
</pre></div></div>

<p>じゃあ、次にRoleのall_in_one.jsonを見てみます。</p>

<h4>
<span id="232-rolesのファイル" class="fragment"></span><a href="#232-roles%E3%81%AE%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB"><i class="fa fa-link"></i></a>2.3.2. rolesのファイル</h4>

<p>文法は先ほどのものと同じです。<br>
こちらのファイルはいろいろ定義されていますね。このroleは、Vagrantで作ったローカルの仮想マシンに、全てのプロダクトをぶち込むファイルになっています。<br>
読むポイントは次の要素です。</p>

<table>
<thead>
<tr>
<th style="text-align: left">ディレクトリ</th>
<th style="text-align: right">名称</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left">default_attributes</td>
<td style="text-align: right">レシピの設定内容を定義します</td>
</tr>
<tr>
<td style="text-align: left">description</td>
<td style="text-align: right">ファイルの目的を記述します</td>
</tr>
<tr>
<td style="text-align: left">run_list</td>
<td style="text-align: right">実行するレシピを順に記述します</td>
</tr>
<tr>
<td style="text-align: left">override_attributes</td>
<td style="text-align: right">レシピの設定内容を強制的に上書きします</td>
</tr>
</tbody>
</table>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>{
    "name": "all_in_one",
    "chef_type": "role",
    "json_class": "Chef::Role",
    "default_attributes": {
        "mysql": {
            "server_root_password" : "password",
            "server_repl_password" : "password",
            "server_debian_password" : "password"
        },
        "varnish": {
            "backend_host" : "127.0.0.1",
            "backend_port" : "8080",
            "listen_port" : "80"
        }
    },
    "description": "For vargrant environment. All in one package",
    "run_list": [
        "base::packages",
        "info-base",
        "ruby",
        "ruby::passenger",
        "apache2",
        "supervisor",
        "varnish",
        "yum::remi",
        "mysql::server"
    ],
    "env_run_lists" : {},
    "override_attributes": {
        "yum" : {
            "remi" : {
                "includepkgs" : "compat-mysql* mysql*"
            }
        },
        "apache": {
            "listen_ports" : ["8080"]
        }
    }
}
</pre></div></div>

<p>基本的に大きなポイントはrun_listと、attributesの設定です。run_listは、実行するレシピ、attributeは、サーバーの設定ファイルに書かれるような設定値を定義します。この設定値は、cookbook/role/environment/nodeで定義されたものが、下記のルールの従って上書きされます。最終的な上書きされた結果がサーバーに反映されます。多分サーバーを作る時は、cookbookには、デフォルトの値が書かれて、roleで、webサーバー等のサーバー種別毎に決まった値が設定されます。environmentには、staging/production毎に違うような値のみを記述します。最終的にnodeでnode毎に違う情報（ホスト名等）のみを上書きします。こうしておくと、設定値がDRYになるのでオススメです。</p>

<p>この上書きルールですが、下記の図がわかりやすいかと思います。</p>

<p><a href="https://camo.qiitausercontent.com/2c96238fcb39f34960c50aec84835ee8329e1b30/687474703a2f2f646f63732e6f7073636f64652e636f6d2f5f696d616765732f6f766572766965775f636865665f617474726962757465735f707265636564656e63652e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/2c96238fcb39f34960c50aec84835ee8329e1b30/687474703a2f2f646f63732e6f7073636f64652e636f6d2f5f696d616765732f6f766572766965775f636865665f617474726962757465735f707265636564656e63652e706e67" alt="" data-canonical-src="http://docs.opscode.com/_images/overview_chef_attributes_precedence.png"></a><br>
<a href="https://camo.qiitausercontent.com/e37d6d8166f9e781cc16bc1fa9ea070f9056400f/687474703a2f2f646f63732e6f7073636f64652e636f6d2f5f696d616765732f6f766572766965775f636865665f617474726962757465735f7461626c652e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/e37d6d8166f9e781cc16bc1fa9ea070f9056400f/687474703a2f2f646f63732e6f7073636f64652e636f6d2f5f696d616765732f6f766572766965775f636865665f617474726962757465735f7461626c652e706e67" alt="" data-canonical-src="http://docs.opscode.com/_images/overview_chef_attributes_table.png"></a></p>

<p>具体的には例えば次のページにかいてあります。</p>

<p><a href="http://docs.opscode.com/essentials_roles.html" rel="nofollow noopener" target="_blank">About Roles</a></p>

<p>他にもenvironment等も設定される可能性がありますので、書き方が同じなので省略します。次に、具体的なcookbookを見てみましょう。単純なのがよいので、私の作成したvarnishのモノを見てみましょう。</p>

<h4>
<span id="233-cookbookの読み方" class="fragment"></span><a href="#233-cookbook%E3%81%AE%E8%AA%AD%E3%81%BF%E6%96%B9"><i class="fa fa-link"></i></a>2.3.3. cookbookの読み方</h4>

<p>cookbookを自分で作りたい時は次のコマンドで実行します。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ knife cookbook create varnish -o site-cookbooks
</pre></div></div>

<p>site-cookbooksのvarnishディレクトリに行くと次のようなファイルができています。読む側とすると重要なのは、attributes, receipes, templatesの３つです。それぞれ次のような意味です。</p>

<table>
<thead>
<tr>
<th style="text-align: left">ディレクトリ</th>
<th style="text-align: right">名称</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left">attributes</td>
<td style="text-align: right">デフォルトの設定情報を定義します</td>
</tr>
<tr>
<td style="text-align: left">files</td>
<td style="text-align: right">アップロードしたいファイルを格納します</td>
</tr>
<tr>
<td style="text-align: left">receipes</td>
<td style="text-align: right">レシピの実行内容を記述します</td>
</tr>
<tr>
<td style="text-align: left">templates</td>
<td style="text-align: right">設定ファイルのテンプレートを記述します</td>
</tr>
</tbody>
</table>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ tree
.
├── CHANGELOG.md
├── README.md
├── attributes
│   └── default.rb
├── definitions
├── files
│   └── default
├── libraries
├── metadata.rb
├── providers
├── recipes
│   └── default.rb
├── resources
└── templates
    └── default
        ├── default.vcl.erb
        └── varnish.erb
</pre></div></div>

<p>最初に読みたいのは、receipe/default.rbです。cookbookがrun_listで実行されたらまずコレが呼ばれます。細かい事は説明しませんが、書いてあることだけを説明します。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>remote_file "/tmp/#{node['varnish']['file_name']}" do
  source "#{node['varnish']['remote_uri']}"
end


rpm_package node['varnish']['rpm_package_name'] do
    action :install
    options "--nosignature"
    provider Chef::Provider::Package::Rpm
   source "/tmp/#{node['varnish']['file_name']}"
end

package "varnish" do
  action :install
end

template "/etc/varnish/default.vcl" do
  source "default.vcl.erb"
  mode  644
  owner "root"
  group "root"
  notifies :restart, "service[varnish]"
  action :create
end

template "/etc/sysconfig/varnish" do
  source "varnish.erb"
  mode  644
  owner "root"
  group "root"
  notifies :restart, "service[varnish]"
  action :create
end

service "varnish" do
  supports :status =&gt; true, :restart =&gt; true, :reload =&gt; true
  action [ :enable, :start ]
end
</pre></div></div>

<p>ちなみにvarnishのインストール手順 (CentOS)はこんな感じです</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>% rpm --nosignature -i http://repo.varnish-cache.org/redhat/varnish-3.0/el6/noarch/varnish-release/varnish-release-3.0-1.el6.noarch.rpm
% yum install varnish
</pre></div></div>

<p>これは、インストールだけですが、設定ファイルとして、/etc/varnish/default.vclと、/etc/sysconfig/varnishを設定する必要があります。</p>

<p>尚、package等のアクションは、"chef package"などでgoogleすれば、一撃でリファレンスがでてきます。<br>
例えばここです <a href="http://docs.opscode.com/resource_package.html" rel="nofollow noopener" target="_blank">package - Chef docs</a></p>

<h5>
<span id="2331-remote_file" class="fragment"></span><a href="#2331-remote_file"><i class="fa fa-link"></i></a>2.3.3.1. remote_file</h5>

<p>リモートからファイルをとってきて格納するための記述です</p>

<h5>
<span id="2332-rpm_package" class="fragment"></span><a href="#2332-rpm_package"><i class="fa fa-link"></i></a>2.3.3.2. rpm_package</h5>

<p>これは、rpmコマンドに相当する記述です。</p>

<h5>
<span id="2333-package" class="fragment"></span><a href="#2333-package"><i class="fa fa-link"></i></a>2.3.3.3. package</h5>

<p>yum, apt等のパッケージインストールのためのコマンドです。OSによって発行されるコマンドが異なります。</p>

<h5>
<span id="2334-template" class="fragment"></span><a href="#2334-template"><i class="fa fa-link"></i></a>2.3.3.4. template</h5>

<p>設定ファイルを作成したり、書き換えたりします。notifiesという設定をすると、このファイルが書き換えられた後のアクションが記述できます。ここでは、varnishの設定ファイルが書き換えられたら再起動になっています。</p>

<h5>
<span id="2335-service" class="fragment"></span><a href="#2335-service"><i class="fa fa-link"></i></a>2.3.3.5. service</h5>

<p>サービス化と自動起動の設定をします。</p>

<h5>
<span id="2336-bash" class="fragment"></span><a href="#2336-bash"><i class="fa fa-link"></i></a>2.3.3.6 bash</h5>

<p>この他によく使われる物としてbashというアクションがあります。これは、サーバー側でコマンドを発行するためのものです。出来るだけbashを使わないようにします。というのも、他のアクションは、冪等性が考慮されているので、何回実行しても同じ結果になるようになっています。ところが自分でこのbashを作ると、冪等性のコーディングをしないといけませんし、OS毎の挙動の違いも場合によっては自分で書かないといけません。これは面倒です。</p>

<h5>
<span id="attributes" class="fragment"></span><a href="#attributes"><i class="fa fa-link"></i></a>attributes</h5>

<p>　さて、default.rbでは、node['varnish']['file_name']といったような記述が見受けられます。これらの変数の具体的な定義がattributesに書かれています。この値はRole/Environment/Nodeで上書きされる可能性があります。<br>
　<br>
<code><br>
default['varnish']['versions']   = "3.0-1.el6"<br>
default['varnish']['file_name']  = "varnish-release-3.0-1.el6.noarch.rpm"<br>
default['varnish']['remote_uri'] = "http://repo.varnish-cache.org/redhat/varnish-3.0/el6/noarch/varnish-release/varnish-release-3.0-1.el6.noarch.rpm"<br>
default['varnish']['rpm_package_name'] = "varnish-release"<br>
default['varnish']['backend_host'] = "127.0.0.1"<br>
default['varnish']['backend_port'] = "80"<br>
default['varnish']['listen_port'] = "6081"<br>
</code></p>

<h5>
<span id="templates" class="fragment"></span><a href="#templates"><i class="fa fa-link"></i></a>templates</h5>

<p>templateアクションで設定ファイルを作る事を選択した場合は、templatesディレクトリの下に定義ファイルを作りましょう。上記のattributesで設定した値を使う事ができます</p>

<p>default.vcl.erb</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span> backend default {
.host = "&lt;%= node['varnish']['backend_host']%&gt;";
.port = "&lt;%= node['varnish']['backend_port']%&gt;";
}

acl backend_apps { "127.0.0.1";}

sub vcl_recv {
   if (client.ip ~ backend_apps &amp;&amp; req.http.X-REFRESH) {
     set req.hash_always_miss = true;
   }
}

</pre></div></div>

<p>他のcookbook等もこれで一通り読み込むことができます。</p>

<h3>
<span id="24-chefの実行" class="fragment"></span><a href="#24-chef%E3%81%AE%E5%AE%9F%E8%A1%8C"><i class="fa fa-link"></i></a>2.4. Chefの実行</h3>

<p>さて、Chefのnodeオブジェクトを実行して、実際にサーバーを望ましい状態にしてみましょう。</p>

<h4>
<span id="241-berksfile" class="fragment"></span><a href="#241-berksfile"><i class="fa fa-link"></i></a>2.4.1. Berksfile</h4>

<p>そのまえに、まず、プロジェクトで使うcookbookを取得してみましょう。自分で作るもの以外は既存のものを使用して、attribute部分のみをrole/environment/nodeで書き換えることができます。Berksは、rubyのGemfileのcookbook版みたいな感じです。ここに欲しいcookbookを書いておきましょう。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>site :opscode
cookbook 'mysql', '~&gt; 4.0.20'
cookbook 'database'
cookbook 'apache2'
cookbook 'yum'

</pre></div></div>

<p>そして、実行します。</p>

<p><a href="http://berkshelf.com/" rel="nofollow noopener" target="_blank">Berkshelf</a></p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>% gem install berkshelf
% berks install
</pre></div></div>

<p>berkshelfのgemはGemfileに書いておくといいでしょう。これによりcookbooksディレクトリ以下にcookbookが取得されます。</p>

<h4>
<span id="242-レシピの実行" class="fragment"></span><a href="#242-%E3%83%AC%E3%82%B7%E3%83%94%E3%81%AE%E5%AE%9F%E8%A1%8C"><i class="fa fa-link"></i></a>2.4.2. レシピの実行</h4>

<p>さて、遂にレシピを実行する時がきました。読み込んで理解したレシピを流してみましょう。<br>
ここでは、解説しませんが、Vagrant等をつかって、仮想マシンを用意しておきましょう。</p>

<h5>
<span id="2421-事前設定" class="fragment"></span><a href="#2421-%E4%BA%8B%E5%89%8D%E8%A8%AD%E5%AE%9A"><i class="fa fa-link"></i></a>2.4.2.1. 事前設定</h5>

<p>レシピを流したいサーバーに、<code>% ssh server_name</code> でログイン出来るように設定しておきましょう。<a href="http://www.vagrantup.com/" rel="nofollow noopener" target="_blank">vargrant</a>を使っていない場合は必要ありませんが、vargantの環境の場合は次のようなコマンドが有効です。sshの設定は周りの人に聞いてみてください。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>% vagrant ssh-config --host server_name &gt;&gt; ~/.ssh/config
</pre></div></div>

<h5>
<span id="2422-why-run" class="fragment"></span><a href="#2422-why-run"><i class="fa fa-link"></i></a>2.4.2.2. Why-Run</h5>

<p>実際にレシピを流す前に、サーバーにレシピを流したら一体どうなるか？(Why-Run)を確認するコマンドがあります。実行はnode以下のファイルを指定するといいでしょう。-WオプションがWhy-Runのオプションです。これを実行すると、サーバーで実行される予定の内容がプリントされます。もしエラーが発生したら、上記のファイルを修正します。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>bundle exec knife solo cook server_name nodes/vagrant.json -W
</pre></div></div>

<h5>
<span id="2423-knife-solo" class="fragment"></span><a href="#2423-knife-solo"><i class="fa fa-link"></i></a>2.4.2.3. knife-solo</h5>

<p><a href="http://docs.opscode.com/chef/knife.html" rel="nofollow noopener" target="_blank">knife solo</a>コマンドのサブコマンドcookで実際にサーバーをレシピの状態に反映させてみます。Why-Runで動作確認したら、-Wオプションをとってコマンド実行しましょう。 ここでは、server_nameというsshでログインできるサーバーにnodes/vagrant.jsonのnodeオブジェクトから呼ばれるレシピが実行されます。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>bundle exec knife solo cook server_name nodes/vagrant.json
</pre></div></div>

<p>これで、無事サーバーがセットアップされるはずです。</p>

<h2>
<span id="4-参考文献" class="fragment"></span><a href="#4-%E5%8F%82%E8%80%83%E6%96%87%E7%8C%AE"><i class="fa fa-link"></i></a>4. 参考文献</h2>

<p><a href="http://docs.opscode.com/" rel="nofollow noopener" target="_blank">Chef</a></p>

<p><a href="http://www.amazon.co.jp/%E5%85%A5%E9%96%80Chef-Solo-Infrastructure-as-Code-ebook/dp/B00BSPH158" rel="nofollow noopener" target="_blank">入門 Chef Solo</a></p>

<p><strong>Chef Fundamentals Module 1</strong> (下のアイコンをクリックすると、チュートリアルが見れます！) </p>

<p><a href="https://learnchef.opscode.com/screencasts/fundi-webinar-week-1/" rel="nofollow noopener" target="_blank"><img src="https://camo.qiitausercontent.com/f56f666052765fbae2c4494f251f0982d4acdccd/68747470733a2f2f7777772e796f75747562652e636f6d2f79742f6272616e642f6d656469612f696d6167652f79742d6272616e642d646f776e6c6f6164732d6c6f676f2d666f722d7765622e706e67" alt="Chef Fundamentals Module 1" data-canonical-src="https://www.youtube.com/yt/brand/media/image/yt-brand-downloads-logo-for-web.png"></a><br>
ちなみに、同じところに沢山のChefのVideoチュートリアルがあります.</p>

<p>他にも<a href="http://www.youtube.com/user/Opscode" rel="nofollow noopener" target="_blank">Youtube Opscode</a>でもいろいろな講演をみることができます。</p>

<p>以上です</p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1" style="height:150px;">
<tr>
	<td rowspan="3">43位</td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="thumb-up-120px.png" /></i>986</kbd>
		<a target="_blank" href="https://qiita.com/phimcall/items/4c559b70f70ea7f1953b">登録されるとつらいユーザー名リスト</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2014-02-15<br />13:58:41</center>
	</td>
	<td style="width:200px;">
		<!--投稿者-->
		<center>
			@<a href="user/33819.html">phimcall</a>(5件の記事)<br />(株式会社Bizcast 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/33819/profile-images/1473686204">
		</center>
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[知見]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<!--
		<div style="width:350px;height:150px;overflow:scroll;">%s</div>
		-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>Twitter, GitHub, Qiita などのように root/(username) でユーザーページをルーティングするところが増えてきている. このルーティングを採用し,  help などのユーザー名を許可すると, root/help が奪われてしまう. そこで, 登録時に validate で, ある程度排除するのが習わしになっていると思うが, 急に root 直下に置きたいページが増えたときなどに取得されていると悲しいことになる.</p>

<p>また, サブドメインを利用するサービスだと, api などをうっかり取られてしまうケースが後を絶たない. <a href="http://api.hatenablog.com/" class="autolink" rel="nofollow noopener" target="_blank">http://api.hatenablog.com/</a> みたいに取られることによる面白みもあるが, おおむねつらい. 実際, twitter では search アカウントが取られていて, TweetDeck では twitter.com/search~~ という URL をうまく解釈できず, search ユーザーの情報を表示する挙動となり, つらさの伝播が観測される.</p>

<p>そこで, 必要になりそうな名前をリザーブリストとして共有しておき, 悲しみを防ぎたい. 適当に思いついたのまとめただけだから, あとはたのんだ. なお, 複数形については意図的に除外しているので注意してほしい. (2014/02/18 1:29追記: 色々ジャンル分け等崩壊してきたのでどうにかしたい)</p>

<h3>
<span id="便利情報" class="fragment"></span><a href="#%E4%BE%BF%E5%88%A9%E6%83%85%E5%A0%B1"><i class="fa fa-link"></i></a>便利情報</h3>

<ul>
<li>同様の趣旨の rubygem: <a href="https://github.com/rono23/reserved_word" rel="nofollow noopener" target="_blank">rono23/reserved_word</a>
</li>
<li><a href="https://dev.twitter.com/docs/api/1.1/get/help/configuration" rel="nofollow noopener" target="_blank">Twitter の non_username_paths</a></li>
<li>差別用語等のリスト: <a href="https://github.com/shutterstock/List-of-Dirty-Naughty-Obscene-and-Otherwise-Bad-Words" rel="nofollow noopener" target="_blank">shutterstock/List-of-Dirty-Naughty-Obscene-and-Otherwise-Bad-Words</a>
</li>
<li>名前空間について: <a href="http://www.slideshare.net/tadsan/ss-31387472" rel="nofollow noopener" target="_blank">これからの名前の話をしよう</a>
</li>
</ul>

<h3>
<span id="基本" class="fragment"></span><a href="#%E5%9F%BA%E6%9C%AC"><i class="fa fa-link"></i></a>基本</h3>

<p>index, home, top, help, about, security, contact, connect, support, faq, form, mail, update, mobile, phone, portal</p>

<h3>
<span id="紹介" class="fragment"></span><a href="#%E7%B4%B9%E4%BB%8B"><i class="fa fa-link"></i></a>紹介</h3>

<p>tour, tutorial, navigation(navi), manual, doc, company, store, shop, topic, news, information(info), howto, pr, press, release, sitemap,</p>

<h3>
<span id="課金" class="fragment"></span><a href="#%E8%AA%B2%E9%87%91"><i class="fa fa-link"></i></a>課金</h3>

<p>plan, price, business, premium, member</p>

<h3>
<span id="規約" class="fragment"></span><a href="#%E8%A6%8F%E7%B4%84"><i class="fa fa-link"></i></a>規約</h3>

<p>term, privacy, rule, inquiry, legal, policy</p>

<h3>
<span id="リソース" class="fragment"></span><a href="#%E3%83%AA%E3%82%BD%E3%83%BC%E3%82%B9"><i class="fa fa-link"></i></a>リソース</h3>

<p>icon, image(img), photo, css, stylesheet(style), script, src, js, javascript, dist, asset, source, static, file, flash, swf, xml, json, sag, cgi</p>

<h3>
<span id="ページ" class="fragment"></span><a href="#%E3%83%9A%E3%83%BC%E3%82%B8"><i class="fa fa-link"></i></a>ページ</h3>

<p>account, user, item, entry, article, page, archive, tag, category, event, contest, word, product, project, download, video, blog, diary, site, popular, i (my, me), owner, profile, self, old, first, last, start, end, special, design, theme, purpose, book, read, organization, community, group, all</p>

<h3>
<span id="機能" class="fragment"></span><a href="#%E6%A9%9F%E8%83%BD"><i class="fa fa-link"></i></a>機能</h3>

<p>status(state), search, explore, share, feature, upload, rss, atom, widget, api, wiki, bookmark, captcha, comment, jump, ranking, setting, config, tool, connect, notify, recent, report, system(sys), message(msg), log, analysis, query, call, calendar, friend, graph, watch, cart, activity</p>

<h3>
<span id="認証" class="fragment"></span><a href="#%E8%AA%8D%E8%A8%BC"><i class="fa fa-link"></i></a>認証</h3>

<p>password, auth, session, register, login, logout, signup, signin, signout, forgot, admin, root, secure</p>

<h3>
<span id="編集" class="fragment"></span><a href="#%E7%B7%A8%E9%9B%86"><i class="fa fa-link"></i></a>編集</h3>

<p>get, show, create, edit, update, post, destroy, delete, remove, reset, error, new, dashboard</p>

<h3>
<span id="求人" class="fragment"></span><a href="#%E6%B1%82%E4%BA%BA"><i class="fa fa-link"></i></a>求人</h3>

<p>recruit, join, offer, career, corp</p>

<h3>
<span id="特定のアプリケーションで使われるもの" class="fragment"></span><a href="#%E7%89%B9%E5%AE%9A%E3%81%AE%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E3%81%A7%E4%BD%BF%E3%82%8F%E3%82%8C%E3%82%8B%E3%82%82%E3%81%AE"><i class="fa fa-link"></i></a>特定のアプリケーションで使われるもの</h3>

<ul>
<li>Apache: cgi-bin, server-status, balancer-manager, ldap-status, server-info, svn</li>
</ul>

<h3>
<span id="sql-等で使う単語" class="fragment"></span><a href="#sql-%E7%AD%89%E3%81%A7%E4%BD%BF%E3%81%86%E5%8D%98%E8%AA%9E"><i class="fa fa-link"></i></a>SQL 等で使う単語</h3>

<ul>
<li>2 字: as, by, if, is, on, or</li>
<li>3 字: add, dir, off, out, put</li>
<li>4 字: case, else, find, then, when</li>
<li>5 字~: count, order, select, switch</li>
</ul>

<h3>
<span id="その他" class="fragment"></span><a href="#%E3%81%9D%E3%81%AE%E4%BB%96"><i class="fa fa-link"></i></a>その他</h3>

<p>school, developer(dev), test, bug, code, guest, app, maintenance, roc, id, bot, game, forum, contribute, usage, feed, ad, service, official, language, repository, spec, license, <a href="https://www.google.co.jp/search?q=asct+%E7%89%B9%E5%AE%9A" rel="nofollow noopener" target="_blank">asct</a>, dictionary(dict), version(ver), gift, alpha, beta, tux, year, public, private, default, request(req), data, master, die, exit, eval, issue, thread, diagram</p>

<h3>
<span id="怖いやつ" class="fragment"></span><a href="#%E6%80%96%E3%81%84%E3%82%84%E3%81%A4"><i class="fa fa-link"></i></a>怖いやつ</h3>

<p>undef, nan, null, empty, 0</p>

<h2>
<span id="サブドメイン" class="fragment"></span><a href="#%E3%82%B5%E3%83%96%E3%83%89%E3%83%A1%E3%82%A4%E3%83%B3"><i class="fa fa-link"></i></a>サブドメイン</h2>

<h3>
<span id="基本-1" class="fragment"></span><a href="#%E5%9F%BA%E6%9C%AC-1"><i class="fa fa-link"></i></a>基本</h3>

<p>www</p>

<h3>
<span id="その他-1" class="fragment"></span><a href="#%E3%81%9D%E3%81%AE%E4%BB%96-1"><i class="fa fa-link"></i></a>その他</h3>

<ul>
<li><a href="http://ja.wikipedia.org/wiki/%E5%9B%BD%E5%88%A5%E3%82%B3%E3%83%BC%E3%83%89%E3%83%88%E3%83%83%E3%83%97%E3%83%AC%E3%83%99%E3%83%AB%E3%83%89%E3%83%A1%E3%82%A4%E3%83%B3" rel="nofollow noopener" target="_blank">国別コードトップレベルドメイン</a></li>
</ul>
</div>
	</td>
</tr>
</table>
<br />
<table border="1" style="height:150px;">
<tr>
	<td rowspan="3">44位</td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="thumb-up-120px.png" /></i>986</kbd>
		<a target="_blank" href="https://qiita.com/hshimo/items/1ecb7ed1b567aacbe559">Node.js を5分で大雑把に理解する</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-11-25<br />00:56:02</center>
	</td>
	<td style="width:200px;">
		<!--投稿者-->
		<center>
			@<a href="user/24976.html">hshimo</a>(307件の記事)<br />(Consensus Base Inc. 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/24976/profile-images/1473684230">
		</center>
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Node.js]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<!--
		<div style="width:350px;height:150px;overflow:scroll;">%s</div>
		-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>随時更新します。</p>

<h2>
<span id="対象の人" class="fragment"></span><a href="#%E5%AF%BE%E8%B1%A1%E3%81%AE%E4%BA%BA"><i class="fa fa-link"></i></a>対象の人</h2>

<ul>
<li>使ったことないけど、軽く理解はしておきたい人</li>
<li>本格的に勉強する前に、大まかな概要を知りたい人</li>
</ul>

<h2>
<span id="特徴" class="fragment"></span><a href="#%E7%89%B9%E5%BE%B4"><i class="fa fa-link"></i></a>特徴</h2>

<ul>
<li>サーバーサイドのJavaScript</li>
<li>非同期 (I/Oの処理結果を待たず処理を進める) 

<ul>
<li>ノンブロッキングI/O (I/Oの結果を待たないで処理をすすめる。I/O処理が終了したらコールバック関数を実行。)</li>
</ul>
</li>
<li>イベントドリブン (何かしらのキッカケで動き始める)</li>
<li>シングルスレッド (メモリ消費が少ない、仕事切り替えが少ないので速い)</li>
<li>JavaScript エンジンが Google の V8 で速い</li>
</ul>

<h3>
<span id="nodejsで作られたアプリの特徴" class="fragment"></span><a href="#nodejs%E3%81%A7%E4%BD%9C%E3%82%89%E3%82%8C%E3%81%9F%E3%82%A2%E3%83%97%E3%83%AA%E3%81%AE%E7%89%B9%E5%BE%B4"><i class="fa fa-link"></i></a>Node.jsで作られたアプリの特徴</h3>

<ul>
<li>小さいデータや小さい計算の場合、速い</li>
<li>メモリ消費量が少ない</li>
<li>ローカルとリモートとのデータのやり取りをシームレスに行うフレームワーク(Meteor)などが出てきている</li>
<li>サーバ側、クライアント側で処理の共通化ができる (入力値チェックなど)</li>
<li>サーバサイドのコード変更した場合、Node.jsアプリの再起動が必要(な場合が多い)</li>
<li>リアルタイムなアプリケーションに合う

<ul>
<li>シングルページアプリケーションに合っている</li>
<li>WebSocketを利用するアプリに合っている</li>
</ul>
</li>
</ul>

<h2>
<span id="nodejs-は何を解決する" class="fragment"></span><a href="#nodejs-%E3%81%AF%E4%BD%95%E3%82%92%E8%A7%A3%E6%B1%BA%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>node.js は何を解決する?</h2>

<ul>
<li>C10K問題 (クライアント１万台接続問題)を解決する

<ul>
<li>従来のWebサーバは、1万接続もあるとパフォーマンスが落ちる。ので、その問題を解決する</li>
</ul>
</li>
</ul>

<h2>
<span id="どのように解決する" class="fragment"></span><a href="#%E3%81%A9%E3%81%AE%E3%82%88%E3%81%86%E3%81%AB%E8%A7%A3%E6%B1%BA%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>どのように解決する?</h2>

<ul>
<li>ノンブロッキングI/O 

<ul>
<li>I/Oの待ちをなくすことで、沢山の接続を速くこなすことができる</li>
</ul>
</li>
</ul>

<p>例えば、ハードディスクの入出力のスピードは、CPUやメモリーから見ると非常に遅い。書き込み完了を待っているのは非常に時間の無駄なので、ハードディスクに書き込む命令を出して、書き込めたかの結果を待たず次の処理をどんどん進めてしまうので非常に処理を早くすすめられる。書き込めた場合にコールバックが呼ばれる。</p>

<h2>
<span id="フレームワーク" class="fragment"></span><a href="#%E3%83%95%E3%83%AC%E3%83%BC%E3%83%A0%E3%83%AF%E3%83%BC%E3%82%AF"><i class="fa fa-link"></i></a>フレームワーク?</h2>

<ul>
<li>Node.jsは、フレームワークではありません。ライブラリでもありません。</li>
<li>JavaScript アプリケーションのプラットフォーム</li>
<li>Node.jsでは、Webサーバとアプリケーションが同じ
PHPのWebサイトで無理やり例えると、Apache + mod_php + Webアプリ です。なので、Node.js の Hello Worldのサンプルは、HTTPを受付け、200とヘッダーと内容を返す、というのが多い</li>
</ul>

<h2>
<span id="サーバーサイドjavascript" class="fragment"></span><a href="#%E3%82%B5%E3%83%BC%E3%83%90%E3%83%BC%E3%82%B5%E3%82%A4%E3%83%89javascript"><i class="fa fa-link"></i></a>サーバーサイドJavaScript</h2>

<ul>
<li>ファイル読み書きは、fsモジュールを使う</li>
</ul>

<h2>
<span id="nodejs-上の有名なフレームワーク" class="fragment"></span><a href="#nodejs-%E4%B8%8A%E3%81%AE%E6%9C%89%E5%90%8D%E3%81%AA%E3%83%95%E3%83%AC%E3%83%BC%E3%83%A0%E3%83%AF%E3%83%BC%E3%82%AF"><i class="fa fa-link"></i></a>node.js 上の有名なフレームワーク</h2>

<ul>
<li>Express (シンプルなフレームワーク)</li>
<li>Backbone.js</li>
<li>Sails (Railsライクなフレームワーク)</li>
<li>Meteor </li>
</ul>

<p>訂正) AngularJS (Angular2)を、node.jsのフレームワークと記載しておりましたが、ご指摘によりJavaScriptのフロントエンドのフレームワークということで削除いたしました。</p>

<h2>
<span id="基礎用語" class="fragment"></span><a href="#%E5%9F%BA%E7%A4%8E%E7%94%A8%E8%AA%9E"><i class="fa fa-link"></i></a>基礎用語</h2>

<ul>
<li>コールバック関数(非同期の処理が終わったら呼ばれる関数)</li>
<li>CommonJS (共通化しようとしている規格)</li>
<li>libuv (libev, libeio) 非同期I/Oライブラリ, イベントループ・ライブラリ</li>
<li>DIRT (data-intensive real-time) DIRTy アプリ</li>
<li>npm (node package manager) 

<ul>
<li>沢山のモジュールとそのバージョンやモジュールの依存性を管理する</li>
</ul>
</li>
</ul>

<h2>
<span id="クライアントサイド-javascript-との違い" class="fragment"></span><a href="#%E3%82%AF%E3%83%A9%E3%82%A4%E3%82%A2%E3%83%B3%E3%83%88%E3%82%B5%E3%82%A4%E3%83%89-javascript-%E3%81%A8%E3%81%AE%E9%81%95%E3%81%84"><i class="fa fa-link"></i></a>クライアントサイド JavaScript との違い</h2>

<ul>
<li>ホストオブジェクト: ブラウザの globalな window オブジェクト</li>
<li>require</li>
<li>モジュール: ファイルI/Oなど</li>
<li>C/C++プラグインで拡張可能</li>
<li>npm: パッケージマネージャー</li>
</ul>

<h2>
<span id="参考" class="fragment"></span><a href="#%E5%8F%82%E8%80%83"><i class="fa fa-link"></i></a>参考</h2>

<p><a href="http://www.slideshare.net/SatoshiTakami/intoroduction-nodejs" title="Node js 入門" rel="nofollow noopener" target="_blank">Node js 入門</a></p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1" style="height:150px;">
<tr>
	<td rowspan="3">45位</td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="thumb-up-120px.png" /></i>974</kbd>
		<a target="_blank" href="https://qiita.com/takeharu/items/9d1c3577f8868f7b07b5">【入門】Vimで高速で移動~プラグインなしでの移動まとめ~</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2014-03-19<br />19:46:27</center>
	</td>
	<td style="width:200px;">
		<!--投稿者-->
		<center>
			@<a href="user/10962.html">takeharu</a>(18件の記事)<br />(サイバーエージェント 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/10962/profile-images/1510984508">
		</center>
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Vim]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<!--
		<div style="width:350px;height:150px;overflow:scroll;">%s</div>
		-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>最近聞かれたので、<br>
自分がよく使う<code>Vim</code>の移動コマンドをまとめてみました。</p>

<p>プラグインいらずの素の<code>Vim</code>ですが、<br>
プラグインなしで十分高速に移動できます。</p>

<p>特に一行一文字検索の<code>f</code>コマンドとか、<br>
変更してきた箇所をもどれる<code>g;</code>コマンドとかが使えてくると本当に便利です。<br>
あっ、この記事は主にファイル内の移動に限っています。</p>

<h2>
<span id="基本移動" class="fragment"></span><a href="#%E5%9F%BA%E6%9C%AC%E7%A7%BB%E5%8B%95"><i class="fa fa-link"></i></a>基本移動</h2>

<p>初心者はまず、矢印キーを脱却して、<code>h, j, k, l</code>へ。<br>
<code>10j</code>のように数字を先に打つと、一気に数字分移動できる</p>

<table>
<thead>
<tr>
<th style="text-align: center">コマンド</th>
<th style="text-align: center">移動内容</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center">h</td>
<td style="text-align: center">左へひとつ</td>
</tr>
<tr>
<td style="text-align: center">j</td>
<td style="text-align: center">下へひとつ</td>
</tr>
<tr>
<td style="text-align: center">k</td>
<td style="text-align: center">上へひとつ</td>
</tr>
<tr>
<td style="text-align: center">l</td>
<td style="text-align: center">右へひとつ</td>
</tr>
</tbody>
</table>

<h5>
<span id="ステップアップ" class="fragment"></span><a href="#%E3%82%B9%E3%83%86%E3%83%83%E3%83%97%E3%82%A2%E3%83%83%E3%83%97"><i class="fa fa-link"></i></a>ステップアップ</h5>

<p>表示上の行移動</p>

<table>
<thead>
<tr>
<th style="text-align: center">コマンド</th>
<th style="text-align: center">移動内容</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center">gj</td>
<td style="text-align: center">下へひとつ</td>
</tr>
<tr>
<td style="text-align: center">gk</td>
<td style="text-align: center">上へひとつ</td>
</tr>
</tbody>
</table>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>115 abcdefg
    hijklmn
116 abcd
</pre></div></div>

<p>115行目のbにカーソルがある場合、</p>

<p>通常の<code>j</code>移動だと、<code>b➡b</code><br>
表示行の<code>gj</code>移動だと、<code>b➡i</code></p>

<h2>
<span id="行移動" class="fragment"></span><a href="#%E8%A1%8C%E7%A7%BB%E5%8B%95"><i class="fa fa-link"></i></a>行移動</h2>

<table>
<thead>
<tr>
<th style="text-align: center">コマンド</th>
<th style="text-align: center">移動内容</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center">0</td>
<td style="text-align: center">行の先頭へ(インデント無視して先頭へ)</td>
</tr>
<tr>
<td style="text-align: center">^</td>
<td style="text-align: center">行の先頭へ</td>
</tr>
<tr>
<td style="text-align: center">$</td>
<td style="text-align: center">行の末尾へ</td>
</tr>
<tr>
<td style="text-align: center">+</td>
<td style="text-align: center">下の行の先頭へ</td>
</tr>
<tr>
<td style="text-align: center">-</td>
<td style="text-align: center">上の行の先頭へ</td>
</tr>
</tbody>
</table>

<h5>
<span id="ステップアップ-1" class="fragment"></span><a href="#%E3%82%B9%E3%83%86%E3%83%83%E3%83%97%E3%82%A2%E3%83%83%E3%83%97-1"><i class="fa fa-link"></i></a>ステップアップ</h5>

<p>前述同様<code>g</code>をつけると表示上の移動へ（直感的）</p>

<h2>
<span id="ページ移動" class="fragment"></span><a href="#%E3%83%9A%E3%83%BC%E3%82%B8%E7%A7%BB%E5%8B%95"><i class="fa fa-link"></i></a>ページ移動</h2>

<p>ガッと移動したい場合</p>

<table>
<thead>
<tr>
<th style="text-align: center">コマンド</th>
<th style="text-align: center">移動内容</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center">ctrl + u</td>
<td style="text-align: center">半画面分 上へ</td>
</tr>
<tr>
<td style="text-align: center">ctrl + d</td>
<td style="text-align: center">半画面分 下へ</td>
</tr>
<tr>
<td style="text-align: center">ctrl + b</td>
<td style="text-align: center">一画面分 上へ</td>
</tr>
<tr>
<td style="text-align: center">ctrl + f</td>
<td style="text-align: center">一画面分 下へ</td>
</tr>
<tr>
<td style="text-align: center">{</td>
<td style="text-align: center">段落毎に上へ</td>
</tr>
<tr>
<td style="text-align: center">}</td>
<td style="text-align: center">段落毎に下へ</td>
</tr>
<tr>
<td style="text-align: center">gg</td>
<td style="text-align: center">そのファイルの先頭へ</td>
</tr>
<tr>
<td style="text-align: center">G</td>
<td style="text-align: center">そのファイルの末尾へ</td>
</tr>
</tbody>
</table>

<p>他には<code>:100</code>で行指定で移動できる。<br>
この場合だと、100行目に移動。</p>

<h2>
<span id="単語移動" class="fragment"></span><a href="#%E5%8D%98%E8%AA%9E%E7%A7%BB%E5%8B%95"><i class="fa fa-link"></i></a>単語移動</h2>

<table>
<thead>
<tr>
<th style="text-align: center">コマンド</th>
<th style="text-align: center">移動内容</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center">w</td>
<td style="text-align: center">単語の先頭に進む</td>
</tr>
<tr>
<td style="text-align: center">b</td>
<td style="text-align: center">単語の先頭に戻る</td>
</tr>
<tr>
<td style="text-align: center">e</td>
<td style="text-align: center">単語の末尾に進む</td>
</tr>
<tr>
<td style="text-align: center">ge</td>
<td style="text-align: center">単語の末尾に戻る</td>
</tr>
</tbody>
</table>

<p>単語分を進むか戻るか、さらに大文字もある。</p>

<h5>
<span id="ステップアップ-2" class="fragment"></span><a href="#%E3%82%B9%E3%83%86%E3%83%83%E3%83%97%E3%82%A2%E3%83%83%E3%83%97-2"><i class="fa fa-link"></i></a>ステップアップ</h5>

<table>
<thead>
<tr>
<th style="text-align: center">コマンド</th>
<th style="text-align: center">移動内容</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center">W</td>
<td style="text-align: center">単語の先頭に進む</td>
</tr>
<tr>
<td style="text-align: center">B</td>
<td style="text-align: center">単語の先頭に戻る</td>
</tr>
<tr>
<td style="text-align: center">E</td>
<td style="text-align: center">単語の末尾に進む</td>
</tr>
<tr>
<td style="text-align: center">gE</td>
<td style="text-align: center">単語の末尾に戻る</td>
</tr>
</tbody>
</table>

<p>違いは次のような単語を一語とみるかどうか</p>

<p><code>abc.def.ghi</code></p>

<p>小文字なら5単語 <code>abc . def . ghi</code><br>
大文字なら1単語 <code>abc.def.ghi</code></p>

<p><code>a➡i</code>に行きたい場合、<br>
<code>e</code>移動なら5回 <code>a➡c➡.➡f➡.➡i</code><br>
<code>E</code>移動なら1回 <code>a➡i</code></p>

<h2>
<span id="一行一文字検索" class="fragment"></span><a href="#%E4%B8%80%E8%A1%8C%E4%B8%80%E6%96%87%E5%AD%97%E6%A4%9C%E7%B4%A2"><i class="fa fa-link"></i></a>一行一文字検索</h2>

<p>これホント便利。多用してます。</p>

<table>
<thead>
<tr>
<th style="text-align: center">コマンド</th>
<th style="text-align: center">移動内容</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center">f</td>
<td style="text-align: center">その行の順方向に一文字検索</td>
</tr>
<tr>
<td style="text-align: center">F</td>
<td style="text-align: center">その行の逆方向に一文字検索</td>
</tr>
<tr>
<td style="text-align: center">t</td>
<td style="text-align: center">その行の順方向に一文字検索(カーソルは文字の手前)</td>
</tr>
<tr>
<td style="text-align: center">T</td>
<td style="text-align: center">その行の逆方向に一文字検索(カーソルは文字の手前)</td>
</tr>
</tbody>
</table>

<p><code>abcdefg hijklmn</code></p>

<p><code>a</code>にカーソルがある場合、<br>
<code>fi</code>で一気に<code>i</code>に移動。</p>

<h5>
<span id="ステップアップ-3" class="fragment"></span><a href="#%E3%82%B9%E3%83%86%E3%83%83%E3%83%97%E3%82%A2%E3%83%83%E3%83%97-3"><i class="fa fa-link"></i></a>ステップアップ</h5>

<p>これとfキーの組み合わせが、本当に便利。</p>

<table>
<thead>
<tr>
<th style="text-align: center">コマンド</th>
<th style="text-align: center">移動内容</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center">;</td>
<td style="text-align: center">順方向に繰り返し検索</td>
</tr>
<tr>
<td style="text-align: center">,</td>
<td style="text-align: center">逆方向に繰り返し検索</td>
</tr>
</tbody>
</table>

<p><code>abcdefg abcdefg abcdefg</code></p>

<p><code>a</code>から三つ目の<code>e</code>に行く場合、<br>
<code>fe</code> <code>;</code> <code>;</code><br>
そこから二つ目の<code>e</code>に戻る場合<br>
<code>,</code></p>

<h2>
<span id="検索移動" class="fragment"></span><a href="#%E6%A4%9C%E7%B4%A2%E7%A7%BB%E5%8B%95"><i class="fa fa-link"></i></a>検索移動</h2>

<p>一般的なページ内文字列検索</p>

<table>
<thead>
<tr>
<th style="text-align: center">コマンド</th>
<th style="text-align: center">移動内容</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center">/</td>
<td style="text-align: center">順方向に文字列検索</td>
</tr>
<tr>
<td style="text-align: center">?</td>
<td style="text-align: center">逆方向に文字列検索</td>
</tr>
<tr>
<td style="text-align: center">n</td>
<td style="text-align: center">順方向に繰り返し検索</td>
</tr>
<tr>
<td style="text-align: center">N</td>
<td style="text-align: center">逆方向に繰り返し検索</td>
</tr>
</tbody>
</table>

<p><code>abcde abced abcedf</code></p>

<p>この場合、<code>/edf</code>で末尾の<code>edf</code>に移動。<br>
複数行にわたって検索可能。</p>

<h2>
<span id="括弧移動" class="fragment"></span><a href="#%E6%8B%AC%E5%BC%A7%E7%A7%BB%E5%8B%95"><i class="fa fa-link"></i></a>括弧移動</h2>

<p>これは<code>d</code>の削除とか<code>y</code>のコピーと合わせて使うと便利。</p>

<table>
<thead>
<tr>
<th style="text-align: center">コマンド</th>
<th style="text-align: center">移動内容</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center">%</td>
<td style="text-align: center">対となる括弧へ移動</td>
</tr>
</tbody>
</table>

<p><code>(abc)</code></p>

<p>カーソルが<code>(</code>から<code>%</code>コマンドで<code>)</code>へ移動</p>

<h2>
<span id="tips" class="fragment"></span><a href="#tips"><i class="fa fa-link"></i></a>TIPS</h2>

<h4>
<span id="ジャンプリストを辿る" class="fragment"></span><a href="#%E3%82%B8%E3%83%A3%E3%83%B3%E3%83%97%E3%83%AA%E3%82%B9%E3%83%88%E3%82%92%E8%BE%BF%E3%82%8B"><i class="fa fa-link"></i></a>ジャンプリストを辿る</h4>

<p>ファイル内も移動できるけど、ファイル間の移動に便利。<br>
直前に編集していたファイルに戻りたいとか。<br>
今回の記事にはそぐわないかな。。</p>

<table>
<thead>
<tr>
<th style="text-align: center">コマンド</th>
<th style="text-align: center">移動内容</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center">ctrl + o</td>
<td style="text-align: center">ジャンプしてきた箇所に戻る</td>
</tr>
<tr>
<td style="text-align: center">ctrl + i</td>
<td style="text-align: center">ジャンプしてきた箇所に進む</td>
</tr>
</tbody>
</table>

<h4>
<span id="変更リストを辿る" class="fragment"></span><a href="#%E5%A4%89%E6%9B%B4%E3%83%AA%E3%82%B9%E3%83%88%E3%82%92%E8%BE%BF%E3%82%8B"><i class="fa fa-link"></i></a>変更リストを辿る</h4>

<p>自分がしたファイルの変更履歴をたどれる。便利。</p>

<table>
<thead>
<tr>
<th style="text-align: center">コマンド</th>
<th style="text-align: center">移動内容</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center">g;</td>
<td style="text-align: center">変更してきた箇所に戻る</td>
</tr>
<tr>
<td style="text-align: center">g,</td>
<td style="text-align: center">変更してきた箇所に進む</td>
</tr>
</tbody>
</table>

<h4>
<span id="マーク移動" class="fragment"></span><a href="#%E3%83%9E%E3%83%BC%E3%82%AF%E7%A7%BB%E5%8B%95"><i class="fa fa-link"></i></a>マーク移動</h4>

<p>あんまり使っていないから、要望があるまでカット。</p>

<h2>
<span id="最後に" class="fragment"></span><a href="#%E6%9C%80%E5%BE%8C%E3%81%AB"><i class="fa fa-link"></i></a>最後に</h2>

<p>この移動と組み合わせて削除とかコピーとかいろいろできることが、<br>
vimの移動の便利なところですね。</p>

<h1>
<span id="外部アカウント" class="fragment"></span><a href="#%E5%A4%96%E9%83%A8%E3%82%A2%E3%82%AB%E3%82%A6%E3%83%B3%E3%83%88"><i class="fa fa-link"></i></a>外部アカウント</h1>

<p>技術情報のみつぶやくアカウント作成しました。VimやNeoVimの最新情報も発信していきます。<br>
<a href="https://twitter.com/takeharumikami" rel="nofollow noopener" target="_blank">Twitterはこちら</a><br>
<a href="http://cloud.feedly.com/#subscription%2Ffeed%2Fhttp%3A%2F%2Fqiita.com%2Ftakeharu%2Ffeed" rel="nofollow noopener" target="_blank">Feedlyのフォローはこちら</a></p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1" style="height:150px;">
<tr>
	<td rowspan="3">46位</td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="thumb-up-120px.png" /></i>973</kbd>
		<a target="_blank" href="https://qiita.com/alpaca_taichou/items/ab2ad83ddbaf2f6ce7fb"> vim使っているrubyistで、これ入れていないのはヤバいプラグインまとめ 9個　(2013-10-04更新)</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2012-09-10<br />10:16:34</center>
	</td>
	<td style="width:200px;">
		<!--投稿者-->
		<center>
			@<a href="user/7978.html">alpaca_taichou</a>(12件の記事)<br />(Moneyforward 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/7978/profile-images/1508186255">
		</center>
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Ruby]</b> <b>[Vim]</b> <b>[ctags]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<!--
		<div style="width:350px;height:150px;overflow:scroll;">%s</div>
		-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;">
<h2>
<span id="rubyの開発効率を高めたい" class="fragment"></span><a href="#ruby%E3%81%AE%E9%96%8B%E7%99%BA%E5%8A%B9%E7%8E%87%E3%82%92%E9%AB%98%E3%82%81%E3%81%9F%E3%81%84"><i class="fa fa-link"></i></a>Rubyの開発効率を高めたい！</h2>

<p>vimでRubyやRails開発するときに、デフォルトの状態では非力ですよね。<br>
開発効率を高める9つのプラグインを紹介します。</p>

<ul>
<li>
<strong>alpaca_tags</strong>　　　ctagsの非同期生成</li>
<li>
<strong>neosnippet</strong>　　　Rails/sinatra/rspec等の補完</li>
<li>
<strong>swtich.vim</strong>　　　　<code>.present?</code>:<code>.brank?</code>など対応するキーワードを切り替える</li>
<li>
<strong>rubocop</strong>　　　　文法エラー、スタイルチェック</li>
<li>
<strong>vim-rails</strong>　　　　Railsプロジェクト用プラグイン</li>
<li>
<strong>unite-rails</strong>　　　　Railsプロジェクト用Unite-source</li>
<li>
<strong>vim-endwise</strong>　　　<code>if...end</code>など対応するキーワードの自動補完</li>
<li>
<strong>ruby-matchit</strong>　　 <code>%</code>を拡張して、<code>def...end</code>等のキーワードを移動出来るようにする。</li>
<li>
<strong>vim-ref</strong>　　　　　Ruby/Gemsのリファレンスを引く</li>
</ul>

<h2>
<span id="インストール" class="fragment"></span><a href="#%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB"><i class="fa fa-link"></i></a>インストール</h2>

<p>vimのプラグイン管理には<a href="http://qiita.com/items/1c32d3f24cc2919203eb">NeoBundle</a>を使います。<br>
<a href="https://gist.github.com/6695766" rel="nofollow noopener" target="_blank">一括インストールはコチラ</a></p>

<h2>
<span id="alpacatags" class="fragment"></span><a href="#alpacatags"><i class="fa fa-link"></i></a><a href="https://github.com/alpaca-tc/alpaca_tags" rel="nofollow noopener" target="_blank">AlpacaTags</a>
</h2>

<p>Vim + Ctagsってかなり便利ですよね。<br>
tagジャンプの機能を使えば、プロジェクト内のメソッドやクラスの探索を一瞬で行えます。</p>

<p>ただし、IDEと違って手動で生成するのが面倒。。<br>
そう思っていた時期が僕にもありました。</p>

<p><strong>自動化すればいいじゃないか</strong></p>

<p>Gemfile更新のタイミング、ファイル保存のタイミングで自動的にコマンドを実行すれば、<br>
いつでも新鮮なtagsを使うことが出来ます。</p>

<p><a href="https://camo.qiitausercontent.com/74f63358ab98acabe49b5b9ff1cbf161346f47e4/687474703a2f2f6769667a6f2e6e65742f306e55564f4264584d522e676966" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/74f63358ab98acabe49b5b9ff1cbf161346f47e4/687474703a2f2f6769667a6f2e6e65742f306e55564f4264584d522e676966" alt="image" data-canonical-src="http://gifzo.net/0nUVOBdXMR.gif"></a></p>

<ul>
<li>
<code>:AlpacaTagsUpdate</code>

<ul>
<li>Git配下のtagsを生成します。</li>
</ul>
</li>
<li>
<code>:AlpacaTagsBundle</code>

<ul>
<li>Gemfileからgemのtagsを生成します。</li>
</ul>
</li>
<li>
<code>:AlpacaTagsSet</code>

<ul>
<li>生成したtagsを読み込みます。</li>
</ul>
</li>
<li>
<code>Unite tags</code>

<ul>
<li>uniteを使ってtagを操作します</li>
</ul>
</li>
</ul>

<p><a href="https://gist.github.com/6581417" rel="nofollow noopener" target="_blank">オススメの設定</a></p>

<h2>
<span id="neosnippet" class="fragment"></span><a href="#neosnippet"><i class="fa fa-link"></i></a><a href="https://github.com/Shougo/neosnippet.vim" rel="nofollow noopener" target="_blank">neosnippet</a>
</h2>

<p>snippets補完は、入力中の文字に対して予め容易された一連の処理を展開する補完です。<br>
これは、一度使ってみると癖になります。</p>

<p><a href="https://camo.qiitausercontent.com/4f8c6ca8fcbb190756937ad0aebcda5714506e84/687474703a2f2f6769667a6f2e6e65742f4e3533377856436b36382e676966" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/4f8c6ca8fcbb190756937ad0aebcda5714506e84/687474703a2f2f6769667a6f2e6e65742f4e3533377856436b36382e676966" alt="Rspec demo" data-canonical-src="http://gifzo.net/N537xVCk68.gif"></a></p>

<p><a href="https://gist.github.com/4521425" rel="nofollow noopener" target="_blank"> オススメの設定 </a></p>

<p>Railsを覚えたてのころ、僕は本気でsnippetsを書いて <strong>全てを補完</strong> することにしました。<br>
View/Controller/Route/Migration/Rspecを補完したneosnippetに死角はありません。(無駄は多い)<br>
Railsで動的に読み込むsnippetを変える場合は、後述するvim-railsを使いましょう。</p>

<p><a href="http://cl.ly/3o471d471T3a/download/ruby_snip.zip" rel="nofollow noopener" target="_blank">Snippetsダウンロード(書き換えて使ってください)</a></p>

<h2>
<span id="switchvim" class="fragment"></span><a href="#switchvim"><i class="fa fa-link"></i></a><a href="https://github.com/AndrewRadev/switch.vim" rel="nofollow noopener" target="_blank">switch.vim</a>
</h2>

<p><strong>入れておいて、絶対損は無い</strong> と言い切りましょう。<br>
<code>:Switch</code>をいうコマンドを実行すると、<br>
[<code>true</code>,<code>false</code>]や[<code>.blank?</code>,<code>.present?</code>]といった定義されたキーワードの切り換えを行えます。</p>

<p><a href="https://camo.qiitausercontent.com/a99577863150d78b36e6f72c5daa2b5eed1e53c4/687474703a2f2f6769667a6f2e6e65742f746a3356704a713055552e676966" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/a99577863150d78b36e6f72c5daa2b5eed1e53c4/687474703a2f2f6769667a6f2e6e65742f746a3356704a713055552e676966" alt="Switch demo" data-canonical-src="http://gifzo.net/tj3VpJq0UU.gif"></a></p>

<p>正規表現やキーワードの定義が可能です。</p>

<p>僕は、Railsのcontrollerで記述するstatusをSwitchで切り替えています。<br>
<code>[404, ':not_found']</code>などと設定しておくと、結構便利ですよ。</p>

<p><a href="https://gist.github.com/6696152" rel="nofollow noopener" target="_blank">オススメの設定はコチラ</a></p>

<h2>
<span id="rubocop" class="fragment"></span><a href="#rubocop"><i class="fa fa-link"></i></a><a href="https://github.com/bbatsov/rubocop" rel="nofollow noopener" target="_blank">rubocop</a>
</h2>

<p>rubocopを使うと、Rubyのコードがコーディングルールに遵守されているかチェック出来ます。チームで開発する場合には必須ですね。<br>
詳細は<a href="http://qiita.com/yuku_t/items/0ac33cea18e10f14e185" id="reference-791c763a2edbb82e6d56">コチラの記事</a>が参考になります。</p>

<h2>
<span id="vim-rails" class="fragment"></span><a href="#vim-rails"><i class="fa fa-link"></i></a><a href="https://github.com/tpope/vim-rails" rel="nofollow noopener" target="_blank">vim-rails</a>
</h2>

<p>railsを書くときに、移動をスマートにしたり、vimからコマンドを実行する事が出来ます。<br>
私がvimを使う理由は、vim-railsによってコードが何よりも書きやすいからに他なりません。</p>

<p><code>:R</code>でview - controllerを移動したり、<code>:A</code>でテストコードとを行き来出来ます。</p>

<p><a href="http://www.youtube.com/watch?v=30P8DSNOZuU" rel="nofollow noopener" target="_blank"> Youtube </a></p>

<p><a href="https://gist.github.com/4521441" rel="nofollow noopener" target="_blank"> オススメの設定 </a></p>

<p>ちなみに、<code>autocmd User Rails/spec/models/*</code>といった構文はもう使えなくなりました。<br>
未だにこちらを使い人は、<a href="https://gist.github.com/5975234" rel="nofollow noopener" target="_blank">コチラを参照</a>してください<br>
また、NeoSnippetと併用する場合は下記のように記述します。</p>

<div class="code-frame" data-lang="vim">
<div class="code-lang"><span class="bold">.vimrc</span></div>
<div class="highlight"><pre><span></span>autocmd <span class="nb">User</span> Rails.<span class="k">view</span>*                 NeoSnippetSource <span class="p">~</span><span class="sr">/.vim/</span>snippet/<span class="k">ruby</span>.rails.<span class="k">view</span>.snip
autocmd <span class="nb">User</span> Rails.controller*           NeoSnippetSource <span class="p">~</span><span class="sr">/.vim/</span>snippet/<span class="k">ruby</span>.rails.controller.snip
autocmd <span class="nb">User</span> Rails<span class="sr">/db/</span>migrate<span class="sr">/*          NeoSnippetSource ~/</span>.<span class="k">vim</span><span class="sr">/snippet/</span><span class="k">ruby</span>.rails.migrate.snip
autocmd <span class="nb">User</span> Rails<span class="sr">/config/</span>routes.rb      NeoSnippetSource <span class="p">~</span><span class="sr">/.vim/</span>snippet/<span class="k">ruby</span>.rails.route.snip
</pre></div>
</div>

<h2>
<span id="unite-unite-rails" class="fragment"></span><a href="#unite-unite-rails"><i class="fa fa-link"></i></a><a href="https://github.com/basyura/unite-rails" rel="nofollow noopener" target="_blank">unite, unite-rails</a>
</h2>

<p><code>:Unite rails/&lt;Tab&gt;</code>で、Unite上にviews/controllersなどを一覧表示させる事が出来ます。<br>
これをキーマップに指定して、vim-railsと組み合わせればRails内の移動を最速で行う事が出来ます。</p>

<p>僕はRailsの開発時に <em>必ず2ステップ</em> 以下で移動出来るようにしています。<br>
Gemfileやrspecやroutes.rbなども一瞬です。素敵。</p>

<p>オススメの設定は<a href="https://gist.github.com/4521467" rel="nofollow noopener" target="_blank"> こちら </a></p>

<h2>
<span id="vim-endwise" class="fragment"></span><a href="#vim-endwise"><i class="fa fa-link"></i></a><a href="https://github.com/tpope/vim-endwise" rel="nofollow noopener" target="_blank">vim-endwise</a>
</h2>

<p><code>if...end</code>や<code>def...end</code>など、 <strong>対になる文字を自動で書き出してくれるプラグイン</strong> です。<br>
<code>if</code>まで押して、<code>&lt;CR&gt;</code>すると自動で<code>if...end</code>まで書き出してくれます。</p>

<p>ruby以外にも、幾つかの言語で対応しているのでオススメです。<br>
neocompleteと一緒に使う場合は、neocompleteのdocをちゃんと読むと良いでしょう。</p>

<p><a href="https://gist.github.com/4521460" rel="nofollow noopener" target="_blank">オススメ?の設定</a></p>

<h2>
<span id="vim-ref-vim-ref-ri" class="fragment"></span><a href="#vim-ref-vim-ref-ri"><i class="fa fa-link"></i></a><a href="https://github.com/thinca/vim-ref" rel="nofollow noopener" target="_blank">vim-ref</a> <a href="https://github.com/yuku-t/vim-ref-ri" rel="nofollow noopener" target="_blank">vim-ref-ri</a>
</h2>

<p>vim-refはvim上からリファレンスを引く事が出来る便利なプラグインです。<br>
<a href="http://blog.remora.cx/2010/12/vim-ref-with-unite.html" rel="nofollow noopener" target="_blank">Uniteと組み合わせて使うことも出来ます</a></p>

<p><code>Ref ri link_to</code>でrails内のlink_toのリファレンスを見ることが出来るようになります。</p>

<ul>
<li>w3mやlynxをインストールする</li>
</ul>

<p>リファレンスの閲覧に必要なのでhomebrewなどでインストールしましょう。</p>

<p><code>brew install w3m</code> or <code>brew install lynx</code></p>

<ul>
<li>vimの設定を追加する</li>
</ul>

<p>設定が無くても使えますが、あればより使いやすくなります。<br>
riのPATHは各々書き換えてください。</p>

<p><a href="https://gist.github.com/4521470" rel="nofollow noopener" target="_blank"> オススメの設定 </a></p>

<h2>
<span id="おまけmatchit" class="fragment"></span><a href="#%E3%81%8A%E3%81%BE%E3%81%91matchit"><i class="fa fa-link"></i></a>おまけ<a href="https://github.com/vim-scripts/ruby-matchit" rel="nofollow noopener" target="_blank">matchit</a>
</h2>

<p>vimには、対になる文字の上で<code>%</code>を押す事で、対応する()や{}を移動する機能が備わっています。<br>
matchitを有効にすれば、rubyでよく使う<code>def...end</code>なども%で移動出来るようになります。</p>

<div class="code-frame" data-lang="vim"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="p">!</span>exists<span class="p">(</span><span class="s1">'loaded_matchit'</span><span class="p">)</span>
<span class="c">  " matchitを有効化</span>
  runtime macros/matchit.<span class="k">vim</span>
<span class="k">endif</span>
</pre></div></div>

<h2>
<span id="独り言" class="fragment"></span><a href="#%E7%8B%AC%E3%82%8A%E8%A8%80"><i class="fa fa-link"></i></a>独り言</h2>

<p>コードばかり書いてたら、いつの間にか街に就活生が溢れていました。<br>
この記事を見ている学生エンジニアは、きっとRuby系の会社へ就活しに行くんですね。。。</p>

<p>ファイト！</p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1" style="height:150px;">
<tr>
	<td rowspan="3">47位</td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="thumb-up-120px.png" /></i>972</kbd>
		<a target="_blank" href="https://qiita.com/usamik26/items/56d0d3ba7a1300625f92">既に git 管理しているファイルをあえて無視したい</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2012-12-12<br />01:38:19</center>
	</td>
	<td style="width:200px;">
		<!--投稿者-->
		<center>
			@<a href="user/6204.html">usamik26</a>(43件の記事)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/6204/profile-images/1473682679">
		</center>
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Git]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<!--
		<div style="width:350px;height:150px;overflow:scroll;">%s</div>
		-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>git でファイルを無視するには、通常は <code>.gitignore</code> や <code>.git/info/exclude</code> を使います。<br>
しかし、既に git 管理下にあるファイルは、これらの設定があっても無視されません。</p>

<p>以下の方法を使えば、git 管理下にあるファイルをあえて無視することが可能です。</p>

<h1>
<span id="方法" class="fragment"></span><a href="#%E6%96%B9%E6%B3%95"><i class="fa fa-link"></i></a>方法</h1>

<p>次の2つの方法があります。どちらを使っても、ファイルの変更を無視できます。</p>

<h2>
<span id="方法1-assume-unchanged" class="fragment"></span><a href="#%E6%96%B9%E6%B3%951-assume-unchanged"><i class="fa fa-link"></i></a>方法(1) assume-unchanged</h2>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>git update-index --assume-unchanged [ファイル名]
</pre></div></div>

<p>この設定を取り消すには次のようにします。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>git update-index --no-assume-unchanged [ファイル名]
</pre></div></div>

<h2>
<span id="方法2-skip-worktree" class="fragment"></span><a href="#%E6%96%B9%E6%B3%952-skip-worktree"><i class="fa fa-link"></i></a>方法(2) skip-worktree</h2>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>git update-index --skip-worktree [ファイル名]
</pre></div></div>

<p>この設定を取り消すには次のようにします。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>git update-index --no-skip-worktree [ファイル名]
</pre></div></div>

<h1>
<span id="設定の確認" class="fragment"></span><a href="#%E8%A8%AD%E5%AE%9A%E3%81%AE%E7%A2%BA%E8%AA%8D"><i class="fa fa-link"></i></a>設定の確認</h1>

<p>上記の設定がされているファイルを確認するには、次のようにします。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>git ls-files -v
</pre></div></div>

<ul>
<li>assume-unchanged 設定のファイルは、状態が小文字で表示されます。</li>
<li>skip-worktree 設定のファイルは、状態が S と表示されます。</li>
</ul>

<h1>
<span id="assume-unchanged-と-skip-worktree-の違い" class="fragment"></span><a href="#assume-unchanged-%E3%81%A8-skip-worktree-%E3%81%AE%E9%81%95%E3%81%84"><i class="fa fa-link"></i></a>assume-unchanged と skip-worktree の違い</h1>

<p>この2つは、以下の点が違います。</p>

<ul>
<li>assume-unchanged : そのファイルが作業ツリー上で変更されているときでも、git はその変更を無視して変更されていないとみなします。</li>
<li>skip-worktree : そのファイルが作業ツリー上で変更されているときには、git はその変更を保ちます。</li>
</ul>

<p>これは、以下のような状況で動作の違いとしてあらわれます。</p>

<h2>
<span id="作業ツリー上でもリポジトリ上でもファイル更新があってそれをマージするとき" class="fragment"></span><a href="#%E4%BD%9C%E6%A5%AD%E3%83%84%E3%83%AA%E3%83%BC%E4%B8%8A%E3%81%A7%E3%82%82%E3%83%AA%E3%83%9D%E3%82%B8%E3%83%88%E3%83%AA%E4%B8%8A%E3%81%A7%E3%82%82%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E6%9B%B4%E6%96%B0%E3%81%8C%E3%81%82%E3%81%A3%E3%81%A6%E3%81%9D%E3%82%8C%E3%82%92%E3%83%9E%E3%83%BC%E3%82%B8%E3%81%99%E3%82%8B%E3%81%A8%E3%81%8D"><i class="fa fa-link"></i></a>作業ツリー上でもリポジトリ上でもファイル更新があって、それをマージするとき</h2>

<ul>
<li>assume-unchanged : 作業ツリー上の更新は破棄されて、リポジトリの内容が取り込まれます。</li>
<li>skip-worktree : 作業ツリー上の更新は保持されて、リポジトリの内容は取り込まれません。</li>
</ul>

<h2>
<span id="作業ツリー上でファイル更新があってgit-reset---hard-を実行したとき" class="fragment"></span><a href="#%E4%BD%9C%E6%A5%AD%E3%83%84%E3%83%AA%E3%83%BC%E4%B8%8A%E3%81%A7%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E6%9B%B4%E6%96%B0%E3%81%8C%E3%81%82%E3%81%A3%E3%81%A6git-reset---hard-%E3%82%92%E5%AE%9F%E8%A1%8C%E3%81%97%E3%81%9F%E3%81%A8%E3%81%8D"><i class="fa fa-link"></i></a>作業ツリー上でファイル更新があって、<code>git reset --hard</code> を実行したとき</h2>

<ul>
<li>assume-unchanged : 作業ツリー上の更新は破棄されます。</li>
<li>skip-worktree : 作業ツリー上の更新は保持されます。</li>
</ul>

<h1>
<span id="何のために使うのか" class="fragment"></span><a href="#%E4%BD%95%E3%81%AE%E3%81%9F%E3%82%81%E3%81%AB%E4%BD%BF%E3%81%86%E3%81%AE%E3%81%8B"><i class="fa fa-link"></i></a>何のために使うのか</h1>

<p>そもそも、何のためにファイルを無視したいのでしょうか。</p>

<h2>
<span id="更新確認しなくていいファイルを無視することで-git-status-などを高速化したい" class="fragment"></span><a href="#%E6%9B%B4%E6%96%B0%E7%A2%BA%E8%AA%8D%E3%81%97%E3%81%AA%E3%81%8F%E3%81%A6%E3%81%84%E3%81%84%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%82%92%E7%84%A1%E8%A6%96%E3%81%99%E3%82%8B%E3%81%93%E3%81%A8%E3%81%A7-git-status-%E3%81%AA%E3%81%A9%E3%82%92%E9%AB%98%E9%80%9F%E5%8C%96%E3%81%97%E3%81%9F%E3%81%84"><i class="fa fa-link"></i></a>更新確認しなくていいファイルを無視することで git status などを高速化したい</h2>

<p>例えば、ネットワークドライブを使っていてファイルアクセスが遅い場合などがそうです。</p>

<p>このために用意されたのが、assume-unchanged 設定です。<br>
この設定がされていると、ファイルをチェックしなくなるので高速になるというわけです。</p>

<h2>
<span id="git-管理しているファイルがビルド時に更新されてしまうが普段は無視したい" class="fragment"></span><a href="#git-%E7%AE%A1%E7%90%86%E3%81%97%E3%81%A6%E3%81%84%E3%82%8B%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%8C%E3%83%93%E3%83%AB%E3%83%89%E6%99%82%E3%81%AB%E6%9B%B4%E6%96%B0%E3%81%95%E3%82%8C%E3%81%A6%E3%81%97%E3%81%BE%E3%81%86%E3%81%8C%E6%99%AE%E6%AE%B5%E3%81%AF%E7%84%A1%E8%A6%96%E3%81%97%E3%81%9F%E3%81%84"><i class="fa fa-link"></i></a>git 管理しているファイルがビルド時に更新されてしまうが普段は無視したい</h2>

<p>開発環境によっては、こんな困ったファイルがあったりします。</p>

<ul>
<li>ビルド時に自動生成するファイルではないので git 管理したい</li>
<li>ビルド時にそのファイルがあると日付だけ更新される</li>
</ul>

<p>あるいは、ビルドで生成するファイルを git に入れている場合もあるかもしれません。</p>

<p>こういったファイルは、作業ツリー上では頻繁に更新しますが、git には触ってほしくありません。<br>
このときには、skip-worktree 設定が使えます。</p>

<h1>
<span id="まとめ" class="fragment"></span><a href="#%E3%81%BE%E3%81%A8%E3%82%81"><i class="fa fa-link"></i></a>まとめ</h1>

<p>git 管理下のファイルを無視する方法について書きました。</p>

<p>git は様々な細かいニーズに答えて開発されていると思います。</p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1" style="height:150px;">
<tr>
	<td rowspan="3">48位</td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="thumb-up-120px.png" /></i>942</kbd>
		<a target="_blank" href="https://qiita.com/yuku_t/items/2f5341e4aa635800a0a1">アプリエンジニア向け：「サーバがなんか重い」時にすること</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2012-02-03<br />01:42:00</center>
	</td>
	<td style="width:200px;">
		<!--投稿者-->
		<center>
			@<a href="user/153.html">yuku_t</a>(195件の記事)<br />(Increments inc. 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/153/profile-images/1505784567">
		</center>
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Linux]</b> <b>[server]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<!--
		<div style="width:350px;height:150px;overflow:scroll;">%s</div>
		-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>アプリケーションエンジニアの人には「なんか重い」という状況に遭遇したらインフラの人にタスクを投げる、という人もいるかも知れません。けど、その重さのどこに原因があるのか。CPUか、ネットワークか、IOかくらいの診断はできた方がアプリ開発においても有益です。</p>

<p>「せっかくつくったシステムがなんか重い」</p>

<p>そんな時にアプリケーションエンジニアとしてできることを書きます。</p>

<p>本職のインフラの人にはぬるい内容だと思います。何を隠そう僕自身がアプリ寄りの人間なので、突っ込んだ話はできないのです。あしからずご了承ください。</p>

<h1>
<span id="なんかサーバが重いなー" class="fragment"></span><a href="#%E3%81%AA%E3%82%93%E3%81%8B%E3%82%B5%E3%83%BC%E3%83%90%E3%81%8C%E9%87%8D%E3%81%84%E3%81%AA%E3%83%BC"><i class="fa fa-link"></i></a>なんかサーバが重いなー</h1>

<h2>
<span id="まずはロードアベレージを調べる" class="fragment"></span><a href="#%E3%81%BE%E3%81%9A%E3%81%AF%E3%83%AD%E3%83%BC%E3%83%89%E3%82%A2%E3%83%99%E3%83%AC%E3%83%BC%E3%82%B8%E3%82%92%E8%AA%BF%E3%81%B9%E3%82%8B"><i class="fa fa-link"></i></a>まずはロードアベレージを調べる</h2>

<p>サーバが重いと思ったら、まず真っ先にすべきことは対象ホストにSSH接続してロードアベレージを調べることでしょう。ロードアベレージとは <strong>実行されずに待たされているプロセスの数</strong> のことで、多すぎるとやばいと認識しておきましょう。ロードアベレージだけでは何が原因で重くなっているのか判断することはできないけれど、検査のとっかかりとして行います。</p>

<p>ロードアベレージがどれくらいの数値がヤバいのかは、CPUのコアの数とかに依存する（らしい）もので、一概に「Xを超えていたらまずい」と言い切ることができません。なので、日頃からロードアベレージをちょくちょく確認し「あれ、いつもよりロードアベレージ高いな」と言えるようになることが重要なのだろうと思います。</p>

<ul>
<li>使うコマンド: top、uptime</li>
</ul>

<p>topはロードアベレージの他にも今走ってるプロセスを占有してるメモリ量とかでソートしたり色々できる便利コマンドです。uptimeはほぼロードアベレージだけを表示してくれるコマンドです。</p>

<p>topの方やれることが多いので普段はこちらを使えばいいですが、本当に切迫しているサーバ上だと、topの実行すらままならないという状況もあり得るので、uptimeの存在も頭の片隅においておくべきでしょう。</p>

<p>top使うと右上にload averageに続いて小数が3つ表示されます。これがロードアベレージで、左から過去１分５分１５分の間の数値を表しています。強いていうなら <strong>1分と5分のやつだけ高かったら、最近始めたプロセスが原因だと推測できる</strong> というくらい。</p>

<h3>
<span id="ロードアベレージが低かった場合" class="fragment"></span><a href="#%E3%83%AD%E3%83%BC%E3%83%89%E3%82%A2%E3%83%99%E3%83%AC%E3%83%BC%E3%82%B8%E3%81%8C%E4%BD%8E%E3%81%8B%E3%81%A3%E3%81%9F%E5%A0%B4%E5%90%88"><i class="fa fa-link"></i></a>ロードアベレージが低かった場合</h3>

<p>ロードアベレージが低いのに重い、ということは原因は外部にあうことが疑われます。ネットワークの問題や、リモートホスト（例えばWebサーバとDBサーバが別ホストにあって、Webサーバのロードアベレージが低いなら、DBサーバを疑ってみるみたいな）に原因がある可能性があります。なのでサーバのネットワークIOの様子を見てみるといいでしょう。</p>

<ul>
<li>使うコマンド: dstat、netstat</li>
</ul>

<p>dstatとnetstatは両方statで終わってますが、実は他にもvmstat、iostat、ifstatなんかもあります。このdstatというのは、これら乱立したXXXstatコマンドをひとまとめにし、かつ、使いやすくしよう、という目的で作られた後発ツールです。なので、使うならdstatがいいと思います。</p>

<p>例えば <code>dstat --tcp</code> とやるとTCPコネクションの様子を見たり <code>dstat --net</code> とやるとネットワークの様子を見ることができますが、、、はっきり言ってアプリの人間には意味不明だと思いますので、調べても分からない場合は素直にインフラに強い人に尋ねましょう。</p>

<h3>
<span id="ロードアベレージが高かった場合" class="fragment"></span><a href="#%E3%83%AD%E3%83%BC%E3%83%89%E3%82%A2%E3%83%99%E3%83%AC%E3%83%BC%E3%82%B8%E3%81%8C%E9%AB%98%E3%81%8B%E3%81%A3%E3%81%9F%E5%A0%B4%E5%90%88"><i class="fa fa-link"></i></a>ロードアベレージが高かった場合</h3>

<p>この場合はホストの中に問題があると想像できます。続いてCPUとIOのどちらに原因があるか探ります。</p>

<h2>
<span id="cpu使用率とio待ち状態を調べる" class="fragment"></span><a href="#cpu%E4%BD%BF%E7%94%A8%E7%8E%87%E3%81%A8io%E5%BE%85%E3%81%A1%E7%8A%B6%E6%85%8B%E3%82%92%E8%AA%BF%E3%81%B9%E3%82%8B"><i class="fa fa-link"></i></a>CPU使用率とIO待ち状態を調べる</h2>

<ul>
<li>使うコマンド: sar、dstat、vmstat</li>
</ul>

<p><code>sar -u</code> や <code>dstat -a</code> などを実行します。sarの場合で話をすると、見るべきは <code>%user</code> <code>%system</code> <code>%iowait</code> の項目です。</p>

<h3>
<span id="userが高い場合" class="fragment"></span><a href="#user%E3%81%8C%E9%AB%98%E3%81%84%E5%A0%B4%E5%90%88"><i class="fa fa-link"></i></a>%userが高い場合</h3>

<p>ユーザプログラムがボトルネックになっていると考えられます。どのプログラムに原因があるか調べましょう。</p>

<ul>
<li>使うコマンド: top、dstat、pidstat</li>
</ul>

<p><code>top</code> はプロセスの一覧をCPU使用率やメモリ占有率などでソートする機能があります。例えば<code>top</code>を実行してからおもむろに <code>m</code> と打つとメモリ順でソートしてくれます。<code>dstat --top-cpu</code> とすることで最もCPUを使っているプロセスを表示することもできます。</p>

<p><code>pidstat</code> は特定のプロセスの統計情報を調べるのに使います。問題のプロセスがある程度しぼれたら <code>pidstat -u -p PID,PID,PID</code> をします。PIDには怪しいプロセスのPIDを入れます。-u はCPU使用率を表示するオプションです。</p>

<p>ここで、CPUに負荷がかかっているのは、ディスクI/Oやメモリなどが適切に働いているか、プログラムが暴走しているかのどちらかです。後者の場合は完全にアプリケーションエンジニアのデバッグの仕事です。前者かつスループットが上がらない、という場合は、アプリケーションエンジニアとしてはアルゴリズムの改善などで対処できますが、インフラの人とサーバの増設などを検討することも必要かも知れません。前者でかつスループットが高い状態というのは、リソースを余すことなく使えているということなので、むしろ理想的な状態であるといえますが、将来的にリソースが足りなくなる可能性が高いので、早めにリソース増強の算段を建てたほうがいいかも知れません。</p>

<h3>
<span id="systemが高い場合" class="fragment"></span><a href="#system%E3%81%8C%E9%AB%98%E3%81%84%E5%A0%B4%E5%90%88"><i class="fa fa-link"></i></a>%systemが高い場合</h3>

<p>これはカーネル空間の処理に時間を取られていることを意味します。この場合に考えられるのは、I/O待ちでCPU時間を消費しているか、大きいプロセスをforkしまくっている等（らしい）です。なので %system が高い場合 %iowait が高い場合も多いようです。</p>

<p>この場合はI/O待ち状態のプロセスを探します</p>

<ul>
<li>使うコマンド: top、dstat</li>
</ul>

<p><code>dstat --top-bio</code> で最もブロックI/Oをしているプロセスが、<code>dstat --top-io</code>で最もI/Oをしているプロセスが表示されます。</p>

<h3>
<span id="user-も-system-も低いのに-iowait-が高い場合" class="fragment"></span><a href="#user-%E3%82%82-system-%E3%82%82%E4%BD%8E%E3%81%84%E3%81%AE%E3%81%AB-iowait-%E3%81%8C%E9%AB%98%E3%81%84%E5%A0%B4%E5%90%88"><i class="fa fa-link"></i></a>%user も %system も低いのに %iowait が高い場合</h3>

<p>何かのプロセスでスワップが発生している可能性があります。</p>

<ul>
<li>使うコマンド: top、free、sar、dstat、vmstat</li>
</ul>

<p><code>sar -W</code> や <code>dstat --swap</code> はスワップインとスワップアウトの状況、<code>free</code> はシステム全体のメモリ使用状況が調べらることができます。<code>top</code> でメモリ使用量でソートすればメモリを沢山使っているプロセスを発見することができます。</p>

<p>スワップが確認された場合、アプリケーションエンジニアとしてはメモリリークがないか調べ、問題箇所を修正することで対処できます。そうでない場合は、純粋に搭載メモリが足りていないのでメモリの増設などを検討しましょう。</p>

<h2>
<span id="まとめ" class="fragment"></span><a href="#%E3%81%BE%E3%81%A8%E3%82%81"><i class="fa fa-link"></i></a>まとめ</h2>

<ul>
<li>問題があったらまずはロードアベレージを調べましょう</li>
<li>ロードアベレージが低い場合は、外部に問題がある可能性があります。</li>
<li>ロードアベレージが高い場合は、内部に問題がある可能性があります。CPU、IOのどこに問題があるのか調べましょう。</li>
<li>
<code>dstat</code> 便利です</li>
</ul>
</div>
	</td>
</tr>
</table>
<br />
<table border="1" style="height:150px;">
<tr>
	<td rowspan="3">49位</td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="thumb-up-120px.png" /></i>930</kbd>
		<a target="_blank" href="https://qiita.com/yuku_t/items/0c1aff03949cb1b8fe6b">vimgrepとQuickfix知らないVimmerはちょっとこっち来い</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-03-11<br />10:52:41</center>
	</td>
	<td style="width:200px;">
		<!--投稿者-->
		<center>
			@<a href="user/153.html">yuku_t</a>(195件の記事)<br />(Increments inc. 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/153/profile-images/1505784567">
		</center>
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Vim]</b> <b>[Git]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<!--
		<div style="width:350px;height:150px;overflow:scroll;">%s</div>
		-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>「vim入門」系記事で解説されないためか、意外と使い方が知られていないvimgrep。</p>

<ul>
<li>ファイルを開いては検索、開いては検索ってしてる？</li>
<li>grepするためにvimから出てる？</li>
<li>grep結果を見て改めてvimで開き直してる？</li>
</ul>

<p>それ、vimgrep使えば256倍早くなる（かも）よ。</p>

<h1>
<span id="簡単なまとめ" class="fragment"></span><a href="#%E7%B0%A1%E5%8D%98%E3%81%AA%E3%81%BE%E3%81%A8%E3%82%81"><i class="fa fa-link"></i></a>簡単なまとめ</h1>

<p>vimgrepは…</p>

<ul>
<li>ファイルをまたいで検索できる</li>
<li>grepやgit-grepよりは遅いので巨大プロジェクトでは検索対象を絞ったほうがいい

<ul>
<li>ワイルドカード使うと簡単に絞り込める</li>
<li>繰り返し同じ対象から検索する場合はargument listを使うと捗る</li>
<li>gitリポジトリではgit-ls-filesと組み合わせる</li>
</ul>
</li>
<li>該当箇所に素早く移動＆編集できる

<ul>
<li>quickfix-windowと組み合わせると更に捗る</li>
</ul>
</li>
</ul>

<h2>
<span id="この記事読むと分かること" class="fragment"></span><a href="#%E3%81%93%E3%81%AE%E8%A8%98%E4%BA%8B%E8%AA%AD%E3%82%80%E3%81%A8%E5%88%86%E3%81%8B%E3%82%8B%E3%81%93%E3%81%A8"><i class="fa fa-link"></i></a>この記事読むと分かること</h2>

<ul>
<li>
<code>:vimgrep</code>コマンドの使い方</li>
<li>
<code>:cwindow</code>コマンドの使い方</li>
<li>
<code>:args</code>コマンドの使い方</li>
<li>gitリポジトリで便利に使う方法</li>
</ul>

<h2>
<span id="この記事読んでも分からないこと" class="fragment"></span><a href="#%E3%81%93%E3%81%AE%E8%A8%98%E4%BA%8B%E8%AA%AD%E3%82%93%E3%81%A7%E3%82%82%E5%88%86%E3%81%8B%E3%82%89%E3%81%AA%E3%81%84%E3%81%93%E3%81%A8"><i class="fa fa-link"></i></a>この記事読んでも分からないこと</h2>

<ul>
<li>vimの正規表現</li>
<li>Quickfixの詳細</li>
<li>
<code>:grep</code>コマンドの使い方</li>
</ul>

<h2>
<span id="関連するvim-help" class="fragment"></span><a href="#%E9%96%A2%E9%80%A3%E3%81%99%E3%82%8Bvim-help"><i class="fa fa-link"></i></a>関連するvim-help</h2>

<p>より詳しいことは以下のヘルプを読むこと。</p>

<ul>
<li>quickfix.txt

<ul>
<li>:vimgrep</li>
<li>:cwindow</li>
</ul>
</li>
<li>:args</li>
<li>cmdline-special</li>
<li>pattern-overview</li>
<li>wildcards</li>
</ul>

<h1>
<span id="vimgrepの使い方" class="fragment"></span><a href="#vimgrep%E3%81%AE%E4%BD%BF%E3%81%84%E6%96%B9"><i class="fa fa-link"></i></a>vimgrepの使い方</h1>

<p>vimgrepは名前に <em>grep</em> が含まれていることからも分かるように、パターンに一致する箇所をファイルから検索するためのコマンドだ。書式は以下のとおり。（蛇足だと思うが<code>:vim[grep]</code>は<code>[grep]</code>が省略可能である、つまり<code>:vim</code>でもよいという意味。）</p>

<div class="code-frame" data-lang="vim"><div class="highlight"><pre><span></span><span class="p">:</span><span class="k">vim</span>[<span class="k">grep</span>] {pattern} {<span class="k">file</span>} ...
</pre></div></div>

<p>要するに<code>{file} ...</code>で指定したファイルの中から<code>{pattern}</code>で一致する箇所を検索する 。</p>

<p><code>{pattern}</code>には正規表現も使える。vimの正規表現については<code>:help pattern-overview</code>参照。</p>

<p><code>{file}</code>にはいくつかの特殊文字があり、ひとつひとつ指定しなくてもワイルドカードで特定のディレクトリ以下のファイル全て、のように指定することなどもできる。いくつか後述するが、より詳しくは<code>:help cmdline-special</code>参照。</p>

<p>このとき検索にヒットした箇所をQuickfixのerror listという形式で管理する。これがどういう風に使えるかは後述する「Quickfixと組み合わせる」を参照。</p>

<p>ちなみにvimには<code>:grep</code>もある。こちらはシステムのgrepコマンドをvimから呼び出すためのもの。詳細は<code>:help :grep</code>を参照。</p>

<h2>
<span id="vimgrepとの違い" class="fragment"></span><a href="#vimgrep%E3%81%A8%E3%81%AE%E9%81%95%E3%81%84"><i class="fa fa-link"></i></a>vimgrepと/の違い</h2>

<p>ところでvimで検索と言えば<code>/</code>（スラッシュ）もあるが一体何が違うのか。</p>

<table>
<thead>
<tr>
<th>　</th>
<th>/</th>
<th>vimgrep</th>
</tr>
</thead>
<tbody>
<tr>
<td>正規表現使える</td>
<td>yes</td>
<td>yes</td>
</tr>
<tr>
<td>検索対象</td>
<td>カレントバッファ</td>
<td>引数で指定する</td>
</tr>
<tr>
<td>ヒット件数</td>
<td>分からない</td>
<td>分かる</td>
</tr>
<tr>
<td>次の検索結果へ移動する</td>
<td><code>n</code></td>
<td><code>:cn[ext]</code></td>
</tr>
<tr>
<td>前の検索結果へ移動する</td>
<td><code>N</code></td>
<td>
<code>:cN[ext]</code> <code>:cp[revious]</code>
</td>
</tr>
<tr>
<td>Quickfix使える</td>
<td>no</td>
<td>yes</td>
</tr>
</tbody>
</table>

<p><code>/</code>（スラッシュ）を使うと現在開いているファイルの中で検索できることは、vimmerなら当然知っているだろう。この現在開いているファイルをvimではカレントバッファ（current buffer）と呼ぶ。</p>

<p><code>/</code>ではヒット件数は分からないが、vimgrepを使うと<code>(1 of 5)</code>のように表示されるので何件ヒットしたのかが一目で分かる。この場合は5ヶ所ヒットした内で1つ目の結果を表示していることを意味する。<br>
<code>:cnext</code>を実行すればカーソルが次の位置に移動し<code>(2 of 5)</code>と表示される。</p>

<p>私はいちいち<code>:cnext</code>とか打つのがだるいので次のように設定している。qはQuickfixのqのつもり。</p>

<div class="code-frame" data-lang="vim">
<div class="code-lang"><span class="bold">.vimrc</span></div>
<div class="highlight"><pre><span></span><span class="nb">nnoremap</span> [<span class="k">q</span> :cprevious<span class="p">&lt;</span>CR<span class="p">&gt;</span>   <span class="c">" 前へ</span>
<span class="nb">nnoremap</span> ]<span class="k">q</span> :cnext<span class="p">&lt;</span>CR<span class="p">&gt;</span>       <span class="c">" 次へ</span>
<span class="nb">nnoremap</span> [Q :<span class="p">&lt;</span>C<span class="p">-</span><span class="k">u</span><span class="p">&gt;</span><span class="k">cfirst</span><span class="p">&lt;</span>CR<span class="p">&gt;</span> <span class="c">" 最初へ</span>
<span class="nb">nnoremap</span> ]Q :<span class="p">&lt;</span>C<span class="p">-</span><span class="k">u</span><span class="p">&gt;</span><span class="k">clast</span><span class="p">&lt;</span>CR<span class="p">&gt;</span>  <span class="c">" 最後へ</span>
</pre></div>
</div>

<h2>
<span id="カレントバッファに対してvimgrepする" class="fragment"></span><a href="#%E3%82%AB%E3%83%AC%E3%83%B3%E3%83%88%E3%83%90%E3%83%83%E3%83%95%E3%82%A1%E3%81%AB%E5%AF%BE%E3%81%97%E3%81%A6vimgrep%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>カレントバッファに対してvimgrepする</h2>

<p>vimgrepはファイルを横断して検索できるのが便利だが、カレントバッファを検索するために<code>/</code>の代わりに使うのも有りだ。カレントバッファを対象にするには<code>{file}</code>に<code>%</code>と指定する。<br>
つまり<code>/hoge</code>の代わりに<code>:vim hoge %</code>を実行すれば、現在開いているファイルを対象にしたvimgrepになる。</p>

<div class="code-frame" data-lang="vim"><div class="highlight"><pre><span></span><span class="c">" カレントバッファを対象にする</span>
<span class="p">:</span><span class="k">vim</span> {pattern} %
</pre></div></div>

<h2>
<span id="ワイルドカードで複数指定する" class="fragment"></span><a href="#%E3%83%AF%E3%82%A4%E3%83%AB%E3%83%89%E3%82%AB%E3%83%BC%E3%83%89%E3%81%A7%E8%A4%87%E6%95%B0%E6%8C%87%E5%AE%9A%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>ワイルドカードで複数指定する</h2>

<p><code>{file} ...</code>で複数のファイルを指定できるとは言っても、一つ一つ列挙するなんてやっていられないだろう。それに特定のディレクトリ以下のファイルを対象に検索したい、ということが大半だ。</p>

<p>こういうときはワイルドカードを使う。以下の例を見ればだいたい雰囲気はつかめるだろう。より詳しくは<code>:help wildcards</code>参照。</p>

<div class="code-frame" data-lang="vim"><div class="highlight"><pre><span></span><span class="c">" カレントディレクトリ以下のあらゆるファイルを対象にする</span>
<span class="p">:</span><span class="k">vim</span> {pattern} **
<span class="c">" app/views以下のあらゆるファイルを対象にする（ディレクトリを再帰的に検索）</span>
<span class="p">:</span><span class="k">vim</span> {pattern} app<span class="sr">/views/</span>**
<span class="c">" app/views/users内のファイルを対象にする</span>
<span class="p">:</span><span class="k">vim</span> {pattern} app<span class="sr">/views/</span>users/*
<span class="c">" app/views以下のerbファイルを対象にする</span>
<span class="p">:</span><span class="k">vim</span> {pattern} app<span class="sr">/views/</span>**/*.erb
<span class="c">" app/views以下で_で始まるerbファイルを対象にする</span>
<span class="p">:</span><span class="k">vim</span> {pattern} app<span class="sr">/views/</span>**/_*.erb
</pre></div></div>

<p>また<code>{file}</code>はカレントディレクトリからの相対パスで指定する。カレントディレクトリは<code>:pwd</code>で確認可能。また<code>:cd</code>でvim起動後に変更することも可能。</p>

<p>ワイルドカードで出来る限り絞り込むのはパフォーマンス的に重要だ。vimgrepで対象となったファイルは全て一旦vimによってメモリに載せられたのちに検索が実行される。不要なファイルを外しておくことでメモリ消費を抑えることができる。またvimgrepは通常のgrepコマンドやgit-grepよりは遅い。</p>

<h2>
<span id="何度も同じ検索対象を使う場合" class="fragment"></span><a href="#%E4%BD%95%E5%BA%A6%E3%82%82%E5%90%8C%E3%81%98%E6%A4%9C%E7%B4%A2%E5%AF%BE%E8%B1%A1%E3%82%92%E4%BD%BF%E3%81%86%E5%A0%B4%E5%90%88"><i class="fa fa-link"></i></a>何度も同じ検索対象を使う場合</h2>

<p>同じ<code>{file}</code>に対して<code>{pattern}</code>を変えながら何度も検索する、という場合を考えてみる。例えば特定のディレクトリ内にアプリケーションコードが格納されており、その中のファイルだけを対象に検索したい、というような感じだ。愚直にやるなら次のような感じでコマンドを実行することになる。vimが多少は補完してくれるとは言っても、何度も何度もpath/to/search/dir/**と入力するのはつらすぎる。</p>

<div class="code-frame" data-lang="vim"><div class="highlight"><pre><span></span><span class="p">:</span><span class="k">vim</span> foo <span class="nb">path</span><span class="sr">/to/</span>search<span class="sr">/dir/</span>**
<span class="p">:</span><span class="k">vim</span> bar <span class="nb">path</span><span class="sr">/to/</span>search<span class="sr">/dir/</span>**
<span class="p">:</span><span class="k">vim</span> baz <span class="nb">path</span><span class="sr">/to/</span>search<span class="sr">/dir/</span>**
<span class="p">:</span><span class="k">vim</span> hoge <span class="nb">path</span><span class="sr">/to/</span>search<span class="sr">/dir/</span>**
<span class="p">:</span><span class="k">vim</span> piyo <span class="nb">path</span><span class="sr">/to/</span>search<span class="sr">/dir/</span>**
</pre></div></div>

<p>こういう場合は<code>:ar[gs]</code>コマンドを使う。さきほどの例は次のように置き換えられる。つまるところ<code>:args</code>で入力された値を<code>##</code>で指定できるわけだ。ちなみに<code>:args</code>はvimが内部で管理しているargument listを置き換えるためのコマンドで、argument listは最初vim起動時に<code>vim</code>コマンドに引数で渡されたファイルが入っている。</p>

<div class="code-frame" data-lang="vim"><div class="highlight"><pre><span></span><span class="p">:</span><span class="k">ar</span> <span class="nb">path</span><span class="sr">/to/</span>search<span class="sr">/dir/</span>**
<span class="p">:</span><span class="k">vim</span> foo ##
<span class="p">:</span><span class="k">vim</span> bar ##
<span class="p">:</span><span class="k">vim</span> baz ##
<span class="p">:</span><span class="k">vim</span> hoge ##
<span class="p">:</span><span class="k">vim</span> piyo ##
</pre></div></div>

<p>この例を見れば分かるように<code>:args</code>にはワイルドカードを指定できる。これはこれで極めて便利だが、シェルコマンドを指定してその標準出力を受け取ることも可能だ。これを利用するには`を使う。これは工夫次第で更に便利になる。後述する「Gitリポジトリで使う場合」などはその典型だ。</p>

<div class="code-frame" data-lang="vim"><div class="highlight"><pre><span></span><span class="p">:</span><span class="k">ar</span> `find . <span class="p">-</span>name \\*.rb`
</pre></div></div>

<h2>
<span id="gitリポジトリで使う場合" class="fragment"></span><a href="#git%E3%83%AA%E3%83%9D%E3%82%B8%E3%83%88%E3%83%AA%E3%81%A7%E4%BD%BF%E3%81%86%E5%A0%B4%E5%90%88"><i class="fa fa-link"></i></a>Gitリポジトリで使う場合</h2>

<p>Gitプロジェクトで下記を実行するとインデックスされていないファイルも含めて全て検索される。</p>

<div class="code-frame" data-lang="vim"><div class="highlight"><pre><span></span><span class="c">" gitリポジトリのルートでこれを実行してはいけない</span>
<span class="p">:</span><span class="k">vim</span> {pattern} **
</pre></div></div>

<p>Gitで管理しているプロジェクトではインデックスされているファイルだけを対象にしたいことが大半だ。<br>
そういうときはgit-ls-filesと<code>:args</code>を組み合わせる。git-ls-filesについて詳しくは<code>man git-ls-files</code>を参照してほしいが、簡単な話がGitでインデックスされているファイルの一覧を標準出力する。パスを指定することで絞り込むこともできることも合わせて言っておく。こうすれば以後そのvimプロセス内では <code>##</code> で必要なファイルに対して検索ができる。</p>

<p>標準出力を使ったファイルの指定は <code>:vimgrep</code>の<code>{file}</code>にも指定できるので、一回だけならわざわざ<code>:args</code>を使う必要はない。</p>

<div class="code-frame" data-lang="vim"><div class="highlight"><pre><span></span><span class="c">" インデックスされている全てのファイルを対象にする</span>
<span class="p">:</span><span class="k">vim</span> {pattern} `git <span class="k">ls</span><span class="p">-</span><span class="k">files</span>`

<span class="c">" appディレクトリ内でインデックスされているファイルを対象にする</span>
<span class="p">:</span><span class="k">vim</span> {pattern} `git <span class="k">ls</span><span class="p">-</span><span class="k">files</span> app`

<span class="c">" appディレクトリ内でインデックスされている.htmlファイルを対象にする</span>
<span class="p">:</span><span class="k">vim</span> {pattern} `git <span class="k">ls</span><span class="p">-</span><span class="k">files</span> app<span class="sr">/**/</span>*.html`
</pre></div></div>

<p>こうすればgit-grepするためにいちいちvimから出て行く必要はなくなる。</p>

<h2>
<span id="バッファされている全てのファイルに対して検索する" class="fragment"></span><a href="#%E3%83%90%E3%83%83%E3%83%95%E3%82%A1%E3%81%95%E3%82%8C%E3%81%A6%E3%81%84%E3%82%8B%E5%85%A8%E3%81%A6%E3%81%AE%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AB%E5%AF%BE%E3%81%97%E3%81%A6%E6%A4%9C%E7%B4%A2%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>バッファされている全てのファイルに対して検索する</h2>

<p>現在バッファに乗っているファイルを対象に検索したいという場合もあるだろう。そういうときは<code>:bufdo</code>と<code>:vimgrepa[dd]</code>を組み合わせる。<code>:bufdo</code>は開いているバッファに対して後続のコマンドを実行して回るコマンド。<code>:vimgrepadd</code>は新しいQuickfixのリストを作るのでなく追加する。</p>

<div class="code-frame" data-lang="vim"><div class="highlight"><pre><span></span><span class="p">:</span><span class="k">bufdo</span> <span class="k">vimgrepa</span> {pattern} %
</pre></div></div>

<p>複数ウィンドウを開いていて、それらを対象にしたいなら<code>:bufdo</code>の代わりに<code>:windo</code>を使う。また<code>:vimgrepadd</code>は追加するものであることから、連続実行すると前の検索結果が残ってしまう。一旦Quickfixをリセットするには<code>:cex[pr]</code>コマンドに<code>””</code>を渡す。</p>

<div class="code-frame" data-lang="vim"><div class="highlight"><pre><span></span><span class="p">:</span><span class="k">cex</span> <span class="s2">""</span>
</pre></div></div>

<h1>
<span id="quickfixと組み合わせる" class="fragment"></span><a href="#quickfix%E3%81%A8%E7%B5%84%E3%81%BF%E5%90%88%E3%82%8F%E3%81%9B%E3%82%8B"><i class="fa fa-link"></i></a>Quickfixと組み合わせる</h1>

<p>vimgrepの基本的な使い方は掌握されたことだろう。</p>

<p>ところでvimgrepは検索結果を一覧表示できたら嬉しいとは思わないだろうか？<code>:cnext</code>を連打して一つ一つ見て回るのは、見たいのが検索結果の一部だった場合は特に、不毛だ。</p>

<p>ここで使うのが<code>:cw[indow]</code>コマンドだ。実行すると新しいウィンドウが作られ、そこにvimgrepの検索結果の一覧が表示される。一行が一件の検索結果に対応し、それぞれファイルのパス、ヒットした箇所のそのファイル内での位置、その行全体が表示される。<br>
このウィンドウ上で特定の行へ移動しEnterを押すとその検索位置が表示されてカーソルがそこに移動する。このとき作られたウィンドウは消えずに残っているので、Ctrl-wを使って移動して改めて他の検索結果を選択することもできる。</p>

<p>vimgrepしてから<code>:cwindow</code>したのでは二回コマンドを実行しなければならず若干面倒くさい。次のように一回で書いてしまうのがよい。以下を実行するといきなり検索結果一覧のウィンドウが表示され、カーソルがそのウィンドウの最初の行に移動する。</p>

<div class="code-frame" data-lang="vim"><div class="highlight"><pre><span></span><span class="p">:</span><span class="k">vim</span> {pattern} {<span class="k">file</span>} <span class="p">|</span> <span class="k">cw</span>
</pre></div></div>

<p>ちなみにここで作られたウィンドウはvim用語ではquickfix-windowと呼ばれる。<br>
QuickfixというのはとあるCコンパイラが出力するコンパイルエラー形式のこと（らしく）、それをファイルに保存してvimから読み込んでエラー箇所を簡単に飛べると嬉しいよね、という動機で作られた機能の総称。vimgrepの検索結果は自動的にこの形式で読み込まれるため、Quickfixの結果を一覧表示するquickfix-windowで一覧表示できる、というわけだ。<br>
詳しくは<code>:help quickfix</code>を参照。あと<code>:help 30.1</code>なんかも読むとよい。</p>

<p>それとQuickfixは<code>+quickfix</code>なvimでないと使えないので注意。</p>

<h2>
<span id="自動的にquickfix-windowを開く" class="fragment"></span><a href="#%E8%87%AA%E5%8B%95%E7%9A%84%E3%81%ABquickfix-window%E3%82%92%E9%96%8B%E3%81%8F"><i class="fa fa-link"></i></a>自動的にquickfix-windowを開く</h2>

<p><code>| cw</code> を書くのが面倒くさい場合はvimがQuickfixにフックするためのイベントを用意しているので、それを使うとよい。<br>
下記設定の場合<code>:vimgrep</code>に加えて<code>:grep</code>、<code>:Ggrep</code>でも自動的にquickfix-windowを開くようになる。</p>

<div class="code-frame" data-lang="vim">
<div class="code-lang"><span class="bold">.vimrc</span></div>
<div class="highlight"><pre><span></span>autocmd <span class="nb">QuickFixCmdPost</span> *<span class="k">grep</span>* <span class="k">cwindow</span>
</pre></div>
</div>

<h1>
<span id="まとめ" class="fragment"></span><a href="#%E3%81%BE%E3%81%A8%E3%82%81"><i class="fa fa-link"></i></a>まとめ</h1>

<p>vimgrepを使えばvimから出ること無くファイルを横断して検索することができる。もうCtrl-Zで抜けてfgで戻るなどという人生の浪費をしなくてよいのだ。</p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1" style="height:150px;">
<tr>
	<td rowspan="3">50位</td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="thumb-up-120px.png" /></i>925</kbd>
		<a target="_blank" href="https://qiita.com/mpyw/items/2f9955db1c02eeef43ea">$_GET, $_POSTなどを受け取る際の処理</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-07-15<br />20:14:32</center>
	</td>
	<td style="width:200px;">
		<!--投稿者-->
		<center>
			@<a href="user/25060.html">mpyw</a>(255件の記事)<br />(シナプス株式会社 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/25060/profile-images/1473684251">
		</center>
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[PHP]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<!--
		<div style="width:350px;height:150px;overflow:scroll;">%s</div>
		-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;">
<h1>
<span id="予備知識" class="fragment"></span><a href="#%E4%BA%88%E5%82%99%E7%9F%A5%E8%AD%98"><i class="fa fa-link"></i></a>予備知識</h1>

<p>PHPはフォームから送信された値などをコード実行開始に自動的に変数として使えるようにしてくれる非常に便利なプログラミング言語です．しかし，それをそのまま用いるとエラーが発生したり，脆弱性になってしまったりするケースがたくさんあります．使う前には適当なチェック処理が必要です．</p>

<h2>
<span id="どういった変数が対象になるか" class="fragment"></span><a href="#%E3%81%A9%E3%81%86%E3%81%84%E3%81%A3%E3%81%9F%E5%A4%89%E6%95%B0%E3%81%8C%E5%AF%BE%E8%B1%A1%E3%81%AB%E3%81%AA%E3%82%8B%E3%81%8B"><i class="fa fa-link"></i></a>どういった変数が対象になるか</h2>

<p>以下に挙げられた変数は，ユーザーが勝手に値や構造を書き換えたり，送信をそもそも行わずにアクセスしたりすることが可能な<ins>信用できない変数</ins>だと思ってください．例え，ラジオボタンで選択肢を限定していたり，隠し要素として埋め込んでいたりしたとしても，これに該当してしまいます．</p>

<h3>
<span id="_get" class="fragment"></span><a href="#_get"><i class="fa fa-link"></i></a><code>$_GET</code>
</h3>

<ul>
<li>アクセスされたURLの <code>?</code> 以降のクエリーストリングに含まれる情報．</li>
<li>
<code>method</code> 属性の値が <code>get</code> であるフォームから送られた情報．</li>
</ul>

<h3>
<span id="_post" class="fragment"></span><a href="#_post"><i class="fa fa-link"></i></a><code>$_POST</code>
</h3>

<ul>
<li>
<code>method</code> 属性の値が <code>post</code> であるフォームから送られた情報．</li>
</ul>

<h3>
<span id="_cookie" class="fragment"></span><a href="#_cookie"><i class="fa fa-link"></i></a><code>$_COOKIE</code>
</h3>

<ul>
<li>Webブラウザから送信されるクッキー．</li>
</ul>

<h3>
<span id="_request" class="fragment"></span><a href="#_request"><i class="fa fa-link"></i></a><code>$_REQUEST</code>
</h3>

<ul>
<li>
<code>$_GET</code> <code>$_POST</code> <code>$_COOKIE</code> の内容が合成されて作られたもの．</li>
</ul>

<p>なお， <code>$_SESSION</code> はサーバー側に保存される変数なので，このチェック対象にはなりません．チェックすべきはセッションの有効期限が切れていないか，つまり <code>$_SESSION</code> が空になってしまっていないかどうかです．</p>

<div class="code-frame" data-lang="php">
<div class="code-lang"><span class="bold">セッションの有効期限切れをチェック</span></div>
<div class="highlight"><pre><span></span><span class="nb">session_start</span><span class="p">();</span>
<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nv">$_SESSION</span><span class="p">)</span> <span class="p">{</span>
    <span class="cm">/* セッション有効期限切れに対応する処理 */</span>
<span class="p">}</span>
</pre></div>
</div>

<p>これらの特殊な変数に関する詳細は <a href="http://qiita.com/mpyw/items/7852213f478e8c5a2802" id="reference-995d72aaf60c193be0aa">「リクエストパラメータ・セッションに関するまとめ」</a> で詳しく解説しています．</p>

<h2>
<span id="phpのエラーの種類" class="fragment"></span><a href="#php%E3%81%AE%E3%82%A8%E3%83%A9%E3%83%BC%E3%81%AE%E7%A8%AE%E9%A1%9E"><i class="fa fa-link"></i></a>PHPのエラーの種類</h2>

<p>PHPには主に以下のようなエラーがあります． (これで全てではありません)</p>

<h3>
<span id="e_parse-別名-parse-error-syntax-error-文法エラー" class="fragment"></span><a href="#e_parse-%E5%88%A5%E5%90%8D-parse-error-syntax-error-%E6%96%87%E6%B3%95%E3%82%A8%E3%83%A9%E3%83%BC"><i class="fa fa-link"></i></a><strong>E_PARSE</strong> (別名: Parse Error, Syntax Error, 文法エラー)</h3>

<p>コードが文法的に誤っているときに発生します．一切の処理を行いません．</p>

<h3>
<span id="e_error-別名-fatal-error-致命的なエラー" class="fragment"></span><a href="#e_error-%E5%88%A5%E5%90%8D-fatal-error-%E8%87%B4%E5%91%BD%E7%9A%84%E3%81%AA%E3%82%A8%E3%83%A9%E3%83%BC"><i class="fa fa-link"></i></a><strong>E_ERROR</strong> (別名: Fatal Error, 致命的なエラー)</h3>

<p>処理を継続することが不可能になってしまった場合に発生します．発生したところで処理を停止します．これが発生するリスクを持つコードを書いてはいけません．</p>

<h3>
<span id="e_warning-別名-warning-警告" class="fragment"></span><a href="#e_warning-%E5%88%A5%E5%90%8D-warning-%E8%AD%A6%E5%91%8A"><i class="fa fa-link"></i></a><strong>E_WARNING</strong> (別名: Warning, 警告)</h3>

<p>処理を継続することは可能ですが，想定外の問題が起こったときに発生します．これが発生するリスクを持つコードは可能な限り書かないでおくべきです．</p>

<h3>
<span id="e_notice-別名-notice-通知" class="fragment"></span><a href="#e_notice-%E5%88%A5%E5%90%8D-notice-%E9%80%9A%E7%9F%A5"><i class="fa fa-link"></i></a><strong>E_NOTICE</strong> (別名: Notice, 通知)</h3>

<p>処理を継続することは可能ですが，想定内の問題が起こったときに発生します．これは手を抜いて無視する人と丁寧に対応する人に二分されますが，<ins>対応の仕方を知らないまま手抜きをするようなプログラマになってはならない</ins>と私は考えるので，ここでは徹底的に対応することにします．</p>

<h2>
<span id="エラー発生による弊害" class="fragment"></span><a href="#%E3%82%A8%E3%83%A9%E3%83%BC%E7%99%BA%E7%94%9F%E3%81%AB%E3%82%88%E3%82%8B%E5%BC%8A%E5%AE%B3"><i class="fa fa-link"></i></a>エラー発生による弊害</h2>

<ul>
<li>本番環境でエラーメッセージが表示されてしまうと，サーバーを攻撃しようと企む人にヒントを与えてしまう事になります．</li>
<li>ページのデザインが崩れて不格好になります．</li>
</ul>

<p>このため，エラーを表示させるのはデバッグ環境だけにすることが殆どです．但し，エラーを非表示にしたとしても…</p>

<ul>
<li>処理速度が低下します． </li>
<li>php.iniの設定によってはエラーログが溜まります．</li>
<li>php.iniの <strong>error_reporting</strong> の設定によっては表示されないエラーもありますが，処理速度の低下は防げません．</li>
<li>
<strong><a href="http://www.php.net/manual/ja/language.operators.errorcontrol.php" rel="nofollow noopener" target="_blank">エラー制御演算子</a> <code>@</code></strong> を使えば表示はされなくなりますが，処理速度の低下は防げません．またデバッグ環境で何らかのバグが発生してしまった状態でも，バグに関わるエラーメッセージが全て表示されなくなってしまいます．デバッグ作業がより難航することになるので，可能な限りこの演算子に頼ることは避けたほうが無難でしょう．</li>
</ul>

<p>このようにさまざまなデメリットがあるので，可能な限りエラー発生を防ぐように書きましょう．</p>

<h2>
<span id="全てのエラーを表示" class="fragment"></span><a href="#%E5%85%A8%E3%81%A6%E3%81%AE%E3%82%A8%E3%83%A9%E3%83%BC%E3%82%92%E8%A1%A8%E7%A4%BA"><i class="fa fa-link"></i></a>全てのエラーを表示</h2>

<p>php.iniを以下のように編集すれば全てのエラーが表示されるようになります．</p>

<div class="code-frame" data-lang="ini">
<div class="code-lang"><span class="bold">php.iniでの恒久的な設定</span></div>
<div class="highlight"><pre><span></span><span class="na">error_reporting</span> <span class="o">=</span> <span class="s">-1</span>
<span class="na">display_errors</span> <span class="o">=</span> <span class="s">On</span>
</pre></div>
</div>

<p>もしphp.iniの書き換えが出来ない場合，使用しているサーバーがApacheであれば以下のように <strong>.htaccess</strong> ファイルを設置することで対応できます．</p>

<div class="code-frame" data-lang="apache">
<div class="code-lang"><span class="bold">.htaccessでの恒久的な設定</span></div>
<div class="highlight"><pre><span></span><span class="nb">php_value</span> error_reporting -1
<span class="nb">php_flag</span> display_errors <span class="k">On</span>
</pre></div>
</div>

<p>それも不可能な場合や一時的に有効にしたい場合は，スクリプトの先頭で以下のコードを実行すればそれ以降は全てのエラーが表示されるようになります．但し <strong>E_PARSE</strong> はコードを読み取る段階で発生するエラーなので，これには対応することが出来ません．</p>

<div class="code-frame" data-lang="php"><div class="highlight"><pre><span></span><span class="nb">error_reporting</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
<span class="nb">ini_set</span><span class="p">(</span><span class="s1">'display_errors'</span><span class="p">,</span> <span class="s1">'On'</span><span class="p">);</span>
</pre></div></div>

<h2>
<span id="比較演算子--と--の比較" class="fragment"></span><a href="#%E6%AF%94%E8%BC%83%E6%BC%94%E7%AE%97%E5%AD%90--%E3%81%A8--%E3%81%AE%E6%AF%94%E8%BC%83"><i class="fa fa-link"></i></a>比較演算子 <code>==</code> と <code>===</code> の比較</h2>

<p>入門書などでは <code>==</code> が主体的に使われていることが多いですが，私は <code>===</code> に全て統一して使うことを推奨します．前者は <strong>型の相互変換</strong> を勝手に行います．PHP以外の言語出身者からすれば，これほど気持ち悪いものは無いでしょう．</p>

<ul>
<li><a href="http://us1.php.net/manual/ja/language.operators.comparison.php" rel="nofollow noopener" target="_blank">PHP Manual - 比較演算子</a></li>
</ul>

<h2>
<span id="htmlspecialchars-関数によるエスケープ処理" class="fragment"></span><a href="#htmlspecialchars-%E9%96%A2%E6%95%B0%E3%81%AB%E3%82%88%E3%82%8B%E3%82%A8%E3%82%B9%E3%82%B1%E3%83%BC%E3%83%97%E5%87%A6%E7%90%86"><i class="fa fa-link"></i></a><a href="http://www.php.net/manual/ja/function.htmlspecialchars.php" rel="nofollow noopener" target="_blank">htmlspecialchars</a> 関数によるエスケープ処理</h2>

<p>HTML中で特殊な意味を持つ文字列は必ずエスケープしなければなりません．ユーザーから入力された値に対してこの処理を怠ると <strong><a href="http://ja.wikipedia.org/wiki/%E3%82%AF%E3%83%AD%E3%82%B9%E3%82%B5%E3%82%A4%E3%83%88%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%97%E3%83%86%E3%82%A3%E3%83%B3%E3%82%B0" rel="nofollow noopener" target="_blank">クロスサイトスクリプティング</a></strong> に関する脆弱性が発生してしまいます．</p>

<p>この処理を行うタイミングは<ins>表示する直前</ins>にしましょう．それ以外の場所でこの処理を行うべきではありません．例えばデータベースやファイルに格納するときにあらかじめエスケープしてしまうのは，ソフトウェア構成上の誤りだと言えます．</p>

<h3>
<span id="string" class="fragment"></span><a href="#string"><i class="fa fa-link"></i></a><code>$string</code>
</h3>

<p>エスケープしたい文字列を渡します．</p>

<h3>
<span id="flags" class="fragment"></span><a href="#flags"><i class="fa fa-link"></i></a><code>$flags</code>
</h3>

<p>フラグを指定します．省略した場合のデフォルト値は <code>ENT_COMPAT</code> となります．実際には <code>ENT_HTML401</code> との論理和となりますが，この関数の挙動には影響を及ぼさないのでここでは触れないことにします．詳しくは <strong><a href="http://qiita.com/mpyw/items/939c526dd5de6619b565" id="reference-cd98f1bf32985e4cae22">「htmlspecialchars関数やhtmlentities関数で使用されるフラグの検証」</a></strong> を参照してください．</p>

<h4>
<span id="ent_compat-でエスケープされる文字" class="fragment"></span><a href="#ent_compat-%E3%81%A7%E3%82%A8%E3%82%B9%E3%82%B1%E3%83%BC%E3%83%97%E3%81%95%E3%82%8C%E3%82%8B%E6%96%87%E5%AD%97"><i class="fa fa-link"></i></a><font color="silver">ENT_COMPAT でエスケープされる文字</font>
</h4>

<p><code>&lt;</code> <code>&gt;</code> <code>&amp;</code> <code>"</code></p>

<p>属性値を全てダブルクオーテーションで括っているのであればこれで問題はありません．但し，エスケープすれば安全だと思って安易に属性値として埋め込むのは避けましょう．例えば以下のケースではリンクをクリックしたときにJavaScriptが実行されてしまいます．</p>

<div class="code-frame" data-lang="php">
<div class="code-lang"><span class="bold">不十分なXSS対策</span></div>
<div class="highlight"><pre><span></span><span class="c1">// $_POST['url'] = "javascript:alert('XSS')"; とする</span>
<span class="nv">$url</span> <span class="o">=</span> <span class="nb">htmlspecialchars</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'url'</span><span class="p">]);</span>
<span class="k">echo</span> <span class="s1">'&lt;a href="'</span> <span class="o">.</span> <span class="nv">$url</span> <span class="o">.</span> <span class="s1">'"&gt;リンク&lt;/a&gt;'</span><span class="p">;</span>
</pre></div>
</div>

<h4>
<span id="ent_quotes-でエスケープされる文字" class="fragment"></span><a href="#ent_quotes-%E3%81%A7%E3%82%A8%E3%82%B9%E3%82%B1%E3%83%BC%E3%83%97%E3%81%95%E3%82%8C%E3%82%8B%E6%96%87%E5%AD%97"><i class="fa fa-link"></i></a><font color="silver">ENT_QUOTES でエスケープされる文字</font>
</h4>

<p><code>&lt;</code> <code>&gt;</code> <code>&amp;</code> <code>'</code> <code>"</code></p>

<p>これを指定しておくのが一番無難ですが，こちらも上記と同様に埋め込む対象となる属性によってはリスクが発生するので細心の注意を払ってください．</p>

<h3>
<span id="encoding" class="fragment"></span><a href="#encoding"><i class="fa fa-link"></i></a><code>$encoding</code>
</h3>

<p>エンコーディングを指定します． PHP5.4以降とPHP5.3以前でデフォルト値が異なり，前者では <code>UTF-8</code> ，後者では <code>ISO-8859-1</code> となっています．前者であれば指定を省略することが可能ですが，バージョンによって挙動が異なってしまうのも問題なので，省略せずに指定することがマニュアルでも強く推奨されています．</p>

<p><ins>ここまでは省略できない必須パラメータだと思ってください</ins>．</p>

<h3>
<span id="double_encode" class="fragment"></span><a href="#double_encode"><i class="fa fa-link"></i></a><code>$double_encode</code>
</h3>

<p><code>&amp;amp;</code> <code>&amp;lt;</code> <code>&amp;gt;</code> </p>

<p>のように既にエスケープされている文字をもう一度エスケープして</p>

<p><code>&amp;amp;amp;</code> <code>&amp;amp;lt;</code> <code>&amp;amp;gt;</code></p>

<p>とするかどうかを論理値で指定します．デフォルトは <code>true</code> です．</p>

<h3>
<span id="ラクに記述できる方法" class="fragment"></span><a href="#%E3%83%A9%E3%82%AF%E3%81%AB%E8%A8%98%E8%BF%B0%E3%81%A7%E3%81%8D%E3%82%8B%E6%96%B9%E6%B3%95"><i class="fa fa-link"></i></a>ラクに記述できる方法</h3>

<p>表示するときに毎回</p>

<div class="code-frame" data-lang="html+php"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlspecialchars</span><span class="p">(</span><span class="nv">$str</span><span class="p">,</span> <span class="nx">ENT_QUOTES</span><span class="p">,</span> <span class="s1">'UTF-8'</span><span class="p">);</span> <span class="cp">?&gt;</span><span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</pre></div></div>

<p>と書くのは非常に煩わしいので，</p>

<div class="code-frame" data-lang="php"><div class="highlight"><pre><span></span><span class="k">function</span> <span class="nf">h</span><span class="p">(</span><span class="nv">$str</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="nb">htmlspecialchars</span><span class="p">(</span><span class="nv">$str</span><span class="p">,</span> <span class="nx">ENT_QUOTES</span><span class="p">,</span> <span class="s1">'UTF-8'</span><span class="p">);</span>
<span class="p">}</span>
</pre></div></div>

<p>のような関数を作っておくと</p>

<div class="code-frame" data-lang="html+php"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nx">h</span><span class="p">(</span><span class="nv">$str</span><span class="p">);</span> <span class="cp">?&gt;</span><span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</pre></div></div>

<p>として簡潔に書くことが出来ます．ここから末尾のセミコロンは省略して</p>

<div class="code-frame" data-lang="html+php"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nx">h</span><span class="p">(</span><span class="nv">$str</span><span class="p">)</span> <span class="cp">?&gt;</span><span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</pre></div></div>

<p>とすることができ，更に <strong>echo短縮構文</strong> を使えば何と</p>

<div class="code-frame" data-lang="html+php"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span><span class="cp">&lt;?</span><span class="o">=</span><span class="nx">h</span><span class="p">(</span><span class="nv">$str</span><span class="p">)</span><span class="cp">?&gt;</span><span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</pre></div></div>

<p>ここまで短く出来てしまいます．非常に便利な構文なのですが，これがデフォルトで使えるのは <strong>PHP5.4以降</strong> のみで，それより古いバージョンの場合はphp.iniで <code>short_open_tag</code> が有効化されている場合にしか使えません．もしphp.iniの書き換えが出来ない場合，使用しているサーバーがApacheであれば以下のように <strong>.htaccess</strong> ファイルを設置することで対応できます．</p>

<div class="code-frame" data-lang="apache">
<div class="code-lang"><span class="bold">.htaccess</span></div>
<div class="highlight"><pre><span></span><span class="nb">php_flag</span> short_open_tag <span class="k">on</span>
</pre></div>
</div>

<h1>
<span id="チェック処理の概要" class="fragment"></span><a href="#%E3%83%81%E3%82%A7%E3%83%83%E3%82%AF%E5%87%A6%E7%90%86%E3%81%AE%E6%A6%82%E8%A6%81"><i class="fa fa-link"></i></a>チェック処理の概要</h1>

<h2>
<span id="isset" class="fragment"></span><a href="#isset"><i class="fa fa-link"></i></a><a href="http://www.php.net/manual/ja/function.isset.php" rel="nofollow noopener" target="_blank">isset</a>
</h2>

<h3>
<span id="エラーの発生するケース" class="fragment"></span><a href="#%E3%82%A8%E3%83%A9%E3%83%BC%E3%81%AE%E7%99%BA%E7%94%9F%E3%81%99%E3%82%8B%E3%82%B1%E3%83%BC%E3%82%B9"><i class="fa fa-link"></i></a>エラーの発生するケース</h3>

<p>PHPでは，原則的に未定義の変数や配列インデックスの値を表示または取得しようとしたとき， <strong>E_NOTICE</strong> レベルのエラーが発生します．</p>

<ul>
<li>変数が未定義<br>
→ <strong>Notice:  Undefined variable</strong>
</li>
<li>配列インデックスが未定義<br>
→ <strong>Notice:  Undefined index</strong>
</li>
</ul>

<p>つまり，手抜きコーディングでよくある以下のようなチェック処理は不適当です．</p>

<div class="code-frame" data-lang="php"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'email'</span><span class="p">]</span> <span class="o">==</span> <span class="s1">''</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$errors</span><span class="p">[]</span> <span class="o">=</span> <span class="s1">'Eメールアドレスが入力されていません'</span><span class="p">;</span>
<span class="p">}</span>
</pre></div></div>

<p>実際にフォームから送信してそのページに遷移した場合にはエラーは発生しませんが，<ins>直接そのページにアクセスした場合には</ins><strong><code>$_POST['email']</code></strong><ins>は未定義</ins>となるので，以下のエラーが発生してしまいます．</p>

<div class="code-frame" data-lang="txt">
<div class="code-lang"><span class="bold">エラー</span></div>
<div class="highlight"><pre><span></span>Notice:  Undefined index: email
</pre></div>
</div>

<p>なお，この手抜きのケースでは <code>===</code> を用いることは出来ません． 未定義の値を <strong>E_NOTICE</strong> レベルのエラーを発生しながら強引に取得しようとしたときその値は <code>NULL</code> と見なされるので， <strong>型の相互変換</strong> により <code>NULL</code> を <code>""</code> として判定させなければ正しい動作をすることが出来ないからです．</p>

<h3>
<span id="エラーの発生を防ぐ方法" class="fragment"></span><a href="#%E3%82%A8%E3%83%A9%E3%83%BC%E3%81%AE%E7%99%BA%E7%94%9F%E3%82%92%E9%98%B2%E3%81%90%E6%96%B9%E6%B3%95"><i class="fa fa-link"></i></a>エラーの発生を防ぐ方法</h3>

<p><a href="http://www.php.net/manual/ja/function.isset.php" rel="nofollow noopener" target="_blank">isset</a> は，変数が <strong>未定義でない</strong> かつ <strong>NULLでない</strong> ことをエラーを発生させずにチェックすることが出来ます．但し，外部からの入力を格納した変数が <code>NULL</code> を取るケースは存在しないので，このような使い方をする上では単に未定義でないかどうかのチェックを行うものとして考えていただいて構いません．</p>

<div class="code-frame" data-lang="php"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'email'</span><span class="p">]))</span> <span class="p">{</span>
    <span class="nv">$errors</span><span class="p">[]</span> <span class="o">=</span> <span class="s1">'Eメールアドレスが送信されていません'</span><span class="p">;</span>
<span class="p">}</span> <span class="k">elseif</span> <span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'email'</span><span class="p">]</span> <span class="o">===</span> <span class="s1">''</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$errors</span><span class="p">[]</span> <span class="o">=</span> <span class="s1">'Eメールアドレスが入力されていません'</span><span class="p">;</span>
<span class="p">}</span>
</pre></div></div>

<p>「送信されていない」と「入力されていない」を区別する必要がない場合，以下のようにまとめてしまっても構いません．</p>

<div class="code-frame" data-lang="php"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'email'</span><span class="p">])</span> <span class="o">||</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'email'</span><span class="p">]</span> <span class="o">===</span> <span class="s1">''</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$errors</span><span class="p">[]</span> <span class="o">=</span> <span class="s1">'Eメールアドレスが入力されていません'</span><span class="p">;</span>
<span class="p">}</span>
</pre></div></div>

<h2>
<span id="is_string-関数is_array-関数" class="fragment"></span><a href="#is_string-%E9%96%A2%E6%95%B0is_array-%E9%96%A2%E6%95%B0"><i class="fa fa-link"></i></a><a href="http://www.php.net/manual/ja/function.is-string.php" rel="nofollow noopener" target="_blank">is_string</a> 関数<br><a href="http://www.php.net/manual/ja/function.is-array.php" rel="nofollow noopener" target="_blank">is_array</a> 関数</h2>

<p>最初に紹介した <a href="http://www.php.net/manual/ja/function.isset.php" rel="nofollow noopener" target="_blank">isset</a> によるチェックだけで自然な利用方法でも発生してしまう大半のエラーは防ぐことが出来ます．しかし，厳密に全てのエラーを潰すにはまだ不十分です．外部からの入力で受け取るものには <strong>文字列</strong> と <strong>配列</strong> の2種類があるからです．</p>

<p>例えば，こういうコードがあったとします．</p>

<div class="code-frame" data-lang="php">
<div class="code-lang"><span class="bold">http</span></div>
<div class="highlight"><pre><span></span><span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_GET</span><span class="p">[</span><span class="s1">'var'</span><span class="p">]))</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="nv">$_GET</span><span class="p">[</span><span class="s1">'var'</span><span class="p">];</span>
    <span class="k">echo</span> <span class="nb">htmlspecialchars</span><span class="p">(</span><span class="nv">$_GET</span><span class="p">[</span><span class="s1">'var'</span><span class="p">],</span> <span class="nx">ENT_QUOTES</span><span class="p">,</span> <span class="s1">'UTF-8'</span><span class="p">);</span>
    <span class="k">echo</span> <span class="nv">$items</span><span class="p">[</span><span class="nv">$_GET</span><span class="p">[</span><span class="s1">'var'</span><span class="p">]];</span>
    <span class="k">echo</span> <span class="mi">1</span> <span class="o">+</span> <span class="nv">$_GET</span><span class="p">[</span><span class="s1">'var'</span><span class="p">];</span>
<span class="p">}</span>
</pre></div>
</div>

<p>一見これで十分なように思えますが，エラーを完璧に潰すにはまだ不十分です．</p>

<p><code>http://example.com/test.php?var[]=hoge</code></p>

<p>正確にURLエンコードすれば</p>

<p><code>http://example.com/test.php?var%5B%5D=hoge</code></p>

<p>のようなクエリを受け取った時に， <code>$_GET['var']</code> は以下のような <strong>配列</strong> になってしまいます．</p>

<div class="code-frame" data-lang="php"><div class="highlight"><pre><span></span><span class="p">[</span><span class="mi">0</span> <span class="o">=&gt;</span> <span class="s1">'hoge'</span><span class="p">]</span>
</pre></div></div>

<p>故にこの例では上から順に</p>

<div class="code-frame" data-lang="txt">
<div class="code-lang"><span class="bold">エラー</span></div>
<div class="highlight"><pre><span></span>Notice:  Array to string conversion
Warning:  htmlspecialchars() expects parameter 1 to be string, array given
Warning:  Illegal offset type
Fatal error:  Unsupported operand types
</pre></div>
</div>

<p>のようなエラーが発生してしまいます．</p>

<ul>
<li>配列が <strong>E_NOTICE</strong> レベルのエラーを発生しながら文字列に強引に変換されたとき， <code>"Array"</code> という扱いになる．</li>
<li>入力値をそのままPHPの組み込み関数に渡している場合， <strong>E_WARNING</strong> レベルのエラーを発生してしまうケースが多い．</li>
<li>配列のオフセットにスカラー値または <code>NULL</code> 以外を指定したとき， <strong>E_WARNING</strong> レベルのエラーが発生する．</li>
<li>計算不可能なオペランド構成で <code>+</code> <code>-</code> などの演算子を使用したとき， <strong>E_ERROR</strong> レベルのエラーが発生する．</li>
</ul>

<p>こういった事態を防ぐためには，厳密に <strong>文字列であるかどうか</strong> もしくは <strong>配列でないかどうか</strong> をチェックする処理が必要です．先ほど述べたように，可能性は <strong>文字列</strong> と <strong>配列</strong> の2種類しかないので，以下のどちらのパターンを採用しても構いません．意味が分かりやすいと思ったほうを選んでください．</p>

<div class="code-frame" data-lang="php">
<div class="code-lang"><span class="bold">文字列であることをチェックしたい場合</span></div>
<div class="highlight"><pre><span></span><span class="nb">is_string</span><span class="p">(</span><span class="nv">$var</span><span class="p">)</span>
<span class="o">!</span><span class="nb">is_array</span><span class="p">(</span><span class="nv">$var</span><span class="p">)</span>
</pre></div>
</div>

<div class="code-frame" data-lang="php">
<div class="code-lang"><span class="bold">配列であることをチェックしたい場合</span></div>
<div class="highlight"><pre><span></span><span class="o">!</span><span class="nb">is_string</span><span class="p">(</span><span class="nv">$var</span><span class="p">)</span>
<span class="nb">is_array</span><span class="p">(</span><span class="nv">$var</span><span class="p">)</span>
</pre></div>
</div>

<p>ここでは <a href="http://www.php.net/manual/ja/function.is-string.php" rel="nofollow noopener" target="_blank">is_string</a> 関数の返り値の否定を用います．</p>

<div class="code-frame" data-lang="php"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'email'</span><span class="p">]))</span> <span class="p">{</span>
    <span class="nv">$errors</span><span class="p">[]</span> <span class="o">=</span> <span class="s1">'Eメールアドレスが送信されていません'</span><span class="p">;</span>
<span class="p">}</span> <span class="k">elseif</span> <span class="p">(</span><span class="o">!</span><span class="nb">is_string</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'email'</span><span class="p">]))</span> <span class="p">{</span>
    <span class="nv">$errors</span><span class="p">[]</span> <span class="o">=</span> <span class="s1">'Eメールアドレスが不正送信されました'</span><span class="p">;</span>
<span class="p">}</span> <span class="k">elseif</span> <span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'email'</span><span class="p">]</span> <span class="o">===</span> <span class="s1">''</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$errors</span><span class="p">[]</span> <span class="o">=</span> <span class="s1">'Eメールアドレスが入力されていません'</span><span class="p">;</span>
<span class="p">}</span>
</pre></div></div>

<p>「送信されていない」と「不正送信された」と「入力されていない」を区別する必要がない場合，以下のようにまとめてしまっても構いません．</p>

<div class="code-frame" data-lang="php"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'email'</span><span class="p">])</span> <span class="o">||</span> <span class="o">!</span><span class="nb">is_string</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'email'</span><span class="p">])</span> <span class="o">||</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'email'</span><span class="p">]</span> <span class="o">===</span> <span class="s1">''</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$errors</span><span class="p">[]</span> <span class="o">=</span> <span class="s1">'Eメールアドレスが入力されていません'</span><span class="p">;</span>
<span class="p">}</span>
</pre></div></div>

<p>配列の場合は各要素ごとのチェックも必要です．</p>

<div class="code-frame" data-lang="php"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'params'</span><span class="p">])</span> <span class="o">||</span> <span class="o">!</span><span class="nb">is_array</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'params'</span><span class="p">]))</span> <span class="p">{</span>
    <span class="nv">$errors</span><span class="p">[]</span> <span class="o">=</span> <span class="s1">'パラメータが送信されていません'</span><span class="p">;</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">foreach</span> <span class="p">(</span><span class="nv">$params</span> <span class="k">as</span> <span class="nv">$key</span> <span class="o">=&gt;</span> <span class="nv">$value</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">is_string</span><span class="p">(</span><span class="nv">$value</span><span class="p">))</span> <span class="p">{</span>
            <span class="nv">$errors</span><span class="p">[]</span> <span class="o">=</span> <span class="s2">"パラメータ</span><span class="si">{</span><span class="nv">$key</span><span class="si">}</span><span class="s2">が不正です"</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div></div>

<h2>
<span id="empty" class="fragment"></span><a href="#empty"><i class="fa fa-link"></i></a><a href="http://www.php.net/manual/ja/function.empty.php" rel="nofollow noopener" target="_blank">empty</a>
</h2>

<p><a href="http://www.php.net/manual/ja/function.empty.php" rel="nofollow noopener" target="_blank">empty</a> は，変数が <strong>未定義である</strong> または <strong>型の相互変換により<code>false</code>と等しいと見なされる値である</strong> ことをエラーを発生させずにチェックすることが出来ます．つまり以下のセットはそれぞれ同じ意味となります．</p>

<div class="code-frame" data-lang="php">
<div class="code-lang"><span class="bold">空と見なす場合</span></div>
<div class="highlight"><pre><span></span><span class="o">!</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$var</span><span class="p">)</span> <span class="o">||</span> <span class="nv">$var</span> <span class="o">==</span> <span class="k">false</span>
<span class="o">!</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$var</span><span class="p">)</span> <span class="o">||</span> <span class="o">!</span><span class="nv">$var</span>
<span class="k">empty</span><span class="p">(</span><span class="nv">$var</span><span class="p">)</span>
</pre></div>
</div>

<div class="code-frame" data-lang="php">
<div class="code-lang"><span class="bold">空でないと見なす場合</span></div>
<div class="highlight"><pre><span></span><span class="nb">isset</span><span class="p">(</span><span class="nv">$var</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nv">$var</span> <span class="o">==</span> <span class="k">true</span>
<span class="nb">isset</span><span class="p">(</span><span class="nv">$var</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nv">$var</span>
<span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$var</span><span class="p">)</span>
</pre></div>
</div>

<p><code>""</code> は <code>false</code> と見なされる値の1つなので，最初の <a href="http://www.php.net/manual/ja/function.empty.php" rel="nofollow noopener" target="_blank">isset</a> だけを用いた例はこのように書くことも出来ます．</p>

<div class="code-frame" data-lang="php"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="p">(</span><span class="k">empty</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'email'</span><span class="p">]))</span> <span class="p">{</span>
    <span class="nv">$errors</span><span class="p">[]</span> <span class="o">=</span> <span class="s1">'Eメールアドレスが入力されていません'</span><span class="p">;</span>
<span class="p">}</span>
</pre></div></div>

<p>2番目に紹介した <a href="http://www.php.net/manual/ja/function.is-string.php" rel="nofollow noopener" target="_blank">is_string</a> 関数によるチェックも織り交ぜるなら以下のようになります．</p>

<div class="code-frame" data-lang="php"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="p">(</span><span class="k">empty</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'email'</span><span class="p">])</span> <span class="o">||</span> <span class="o">!</span><span class="nb">is_string</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'email'</span><span class="p">]))</span> <span class="p">{</span>
    <span class="nv">$errors</span><span class="p">[]</span> <span class="o">=</span> <span class="s1">'Eメールアドレスが入力されていません'</span><span class="p">;</span>
<span class="p">}</span>
</pre></div></div>

<p>但し，<code>""</code> だけでなく <code>"0"</code> も <code>false</code> と見なされてしまい， <strong>「入力したのに入力していないと言われた」</strong> と利用者から文句が飛んでくるかもしれません．これぐらいの手抜きは場合によっては許されると思いますが，厳密な処理に拘る場合には避けるべきでしょう．著者はかなり気にします．</p>

<h1>
<span id="フィルタ関数の活用" class="fragment"></span><a href="#%E3%83%95%E3%82%A3%E3%83%AB%E3%82%BF%E9%96%A2%E6%95%B0%E3%81%AE%E6%B4%BB%E7%94%A8"><i class="fa fa-link"></i></a>フィルタ関数の活用</h1>

<p>ここからは</p>

<ol>
<li>スクリプトの先頭のほうで送信されてきた値をチェックする．有効なものであれば適当なローカル変数にその値を代入し， <strong>未定義</strong> もしくは <strong>想定外の型</strong> であれば <code>""</code> <code>NULL</code> <code>false</code> などを代入する．</li>
<li>そのローカル変数を用いて条件分岐を行い，適宜エラーに該当するかどうかをチェックする．</li>
</ol>

<p>という処理フローを想定して「1.」の部分のコードを提示します．こちらの方が全体的な見通しが良くなり，入力フォームを再表示するときの利便性も向上するからです．</p>

<h2>
<span id="文字列のみを許可する" class="fragment"></span><a href="#%E6%96%87%E5%AD%97%E5%88%97%E3%81%AE%E3%81%BF%E3%82%92%E8%A8%B1%E5%8F%AF%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>文字列のみを許可する</h2>

<div class="code-frame" data-lang="php"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'name'</span><span class="p">]))</span> <span class="p">{</span>
    <span class="nv">$name</span> <span class="o">=</span> <span class="k">null</span><span class="p">;</span>
<span class="p">}</span> <span class="k">elseif</span> <span class="p">(</span><span class="o">!</span><span class="nb">is_string</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'name'</span><span class="p">]))</span> <span class="p">{</span>
    <span class="nv">$name</span> <span class="o">=</span> <span class="k">false</span><span class="p">;</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nv">$name</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'name'</span><span class="p">];</span>
<span class="p">}</span>
</pre></div></div>

<p><strong><a href="http://www.php.net/manual/ja/function.filter-input.php" rel="nofollow noopener" target="_blank">filter_input</a></strong> 関数を利用すれば，これと等価な処理をもっと美しく書くことが出来ます．</p>

<div class="code-frame" data-lang="php"><div class="highlight"><pre><span></span><span class="nv">$name</span> <span class="o">=</span> <span class="nb">filter_input</span><span class="p">(</span><span class="nx">INPUT_POST</span><span class="p">,</span> <span class="s1">'name'</span><span class="p">);</span>
</pre></div></div>

<p>文字列として送信されてきた場合のみ何か処理を行いたい場合は</p>

<div class="code-frame" data-lang="php"><div class="highlight"><pre><span></span><span class="nv">$name</span> <span class="o">=</span> <span class="nb">filter_input</span><span class="p">(</span><span class="nx">INPUT_POST</span><span class="p">,</span> <span class="s1">'name'</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="nb">is_string</span><span class="p">(</span><span class="nv">$name</span><span class="p">))</span> <span class="p">{</span>
    <span class="cm">/* 文字列として送信されてきた場合のみ実行したい処理 */</span>
<span class="p">}</span>
</pre></div></div>

<p>と書けば良いでしょう．</p>

<h2>
<span id="文字列を強制する" class="fragment"></span><a href="#%E6%96%87%E5%AD%97%E5%88%97%E3%82%92%E5%BC%B7%E5%88%B6%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>文字列を強制する</h2>

<div class="code-frame" data-lang="php"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'name'</span><span class="p">])</span> <span class="o">||</span> <span class="o">!</span><span class="nb">is_string</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'name'</span><span class="p">]))</span> <span class="p">{</span>
    <span class="nv">$name</span> <span class="o">=</span> <span class="s1">''</span><span class="p">;</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nv">$name</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'name'</span><span class="p">];</span>
<span class="p">}</span>
</pre></div></div>

<p>分岐パターンと代入先が1種類しかないので， <strong><a href="http://www.php.net/manual/ja/language.operators.comparison.php#language.operators.comparison.ternary" rel="nofollow noopener" target="_blank">三項演算子</a></strong> を利用することが出来ます．</p>

<div class="code-frame" data-lang="php">
<div class="code-lang"><span class="bold">&amp;&amp;を使う場合</span></div>
<div class="highlight"><pre><span></span><span class="nv">$name</span> <span class="o">=</span> <span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'name'</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="nb">is_string</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'name'</span><span class="p">])</span> <span class="o">?</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'name'</span><span class="p">]</span> <span class="o">:</span> <span class="s1">''</span><span class="p">;</span>
</pre></div>
</div>

<div class="code-frame" data-lang="php">
<div class="code-lang"><span class="bold">||を使う場合</span></div>
<div class="highlight"><pre><span></span><span class="nv">$name</span> <span class="o">=</span> <span class="o">!</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'name'</span><span class="p">])</span> <span class="o">||</span> <span class="o">!</span><span class="nb">is_string</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'name'</span><span class="p">])</span> <span class="o">?</span> <span class="s1">''</span> <span class="o">:</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'name'</span><span class="p">];</span>
</pre></div>
</div>

<p><a href="http://www.php.net/manual/ja/function.filter-input.php" rel="nofollow noopener" target="_blank">filter_input</a> 関数と文字列へのキャストを利用すれば，これらと等価な処理をもっと美しく書くことが出来ます．</p>

<div class="code-frame" data-lang="php"><div class="highlight"><pre><span></span><span class="nv">$name</span> <span class="o">=</span> <span class="p">(</span><span class="nx">string</span><span class="p">)</span><span class="nb">filter_input</span><span class="p">(</span><span class="nx">INPUT_POST</span><span class="p">,</span> <span class="s1">'name'</span><span class="p">);</span>
</pre></div></div>

<h2>
<span id="1次元配列を強制する" class="fragment"></span><a href="#1%E6%AC%A1%E5%85%83%E9%85%8D%E5%88%97%E3%82%92%E5%BC%B7%E5%88%B6%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>1次元配列を強制する</h2>

<div class="code-frame" data-lang="php"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'items'</span><span class="p">]))</span> <span class="p">{</span>
    <span class="nv">$items</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'items'</span><span class="p">];</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">is_array</span><span class="p">(</span><span class="nv">$items</span><span class="p">))</span> <span class="p">{</span>
        <span class="nv">$items</span> <span class="o">=</span> <span class="p">[</span><span class="nv">$items</span><span class="p">];</span>
    <span class="p">}</span>
    <span class="k">foreach</span> <span class="p">(</span><span class="nv">$items</span> <span class="k">as</span> <span class="nv">$key</span> <span class="o">=&gt;</span> <span class="nv">$value</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">is_string</span><span class="p">(</span><span class="nv">$value</span><span class="p">))</span> <span class="p">{</span>
            <span class="nb">unset</span><span class="p">(</span><span class="nv">$items</span><span class="p">[</span><span class="nv">$key</span><span class="p">]);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nv">$items</span> <span class="o">=</span> <span class="p">[];</span>
<span class="p">}</span>
</pre></div></div>

<p><strong>配列へのキャスト</strong> と <strong><a href="http://www.php.net/manual/ja/function.array-filter.php" rel="nofollow noopener" target="_blank">array_filter</a></strong> 関数を利用すれば，これと等価な処理をもっと美しく書くことが出来ます．</p>

<div class="code-frame" data-lang="php"><div class="highlight"><pre><span></span><span class="nv">$items</span> <span class="o">=</span> <span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'items'</span><span class="p">])</span> <span class="o">?</span> <span class="p">(</span><span class="k">array</span><span class="p">)</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'items'</span><span class="p">]</span> <span class="o">:</span> <span class="p">[];</span>
<span class="nv">$items</span> <span class="o">=</span> <span class="nb">array_filter</span><span class="p">(</span><span class="nv">$items</span><span class="p">,</span> <span class="s1">'is_string'</span><span class="p">);</span>
</pre></div></div>

<p>配列から文字列への強引なキャストでは <strong>E_NOTICE</strong> レベルのエラーが発生してしまいますが，<ins>文字列から配列へのキャストではエラーが発生しません</ins>．キー <code>0</code> に対する値を1つ持つ配列としてエラー無しにキャストされます．</p>

<h2>
<span id="指定したキーに限定して1次元配列を強制する" class="fragment"></span><a href="#%E6%8C%87%E5%AE%9A%E3%81%97%E3%81%9F%E3%82%AD%E3%83%BC%E3%81%AB%E9%99%90%E5%AE%9A%E3%81%97%E3%81%A61%E6%AC%A1%E5%85%83%E9%85%8D%E5%88%97%E3%82%92%E5%BC%B7%E5%88%B6%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>指定したキーに限定して1次元配列を強制する</h2>

<h3>
<span id="テキストの配列を対象とする場合" class="fragment"></span><a href="#%E3%83%86%E3%82%AD%E3%82%B9%E3%83%88%E3%81%AE%E9%85%8D%E5%88%97%E3%82%92%E5%AF%BE%E8%B1%A1%E3%81%A8%E3%81%99%E3%82%8B%E5%A0%B4%E5%90%88"><i class="fa fa-link"></i></a>テキストの配列を対象とする場合</h3>

<div class="code-frame" data-lang="html"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">form</span> <span class="na">method</span><span class="o">=</span><span class="s">"post"</span> <span class="na">action</span><span class="o">=</span><span class="s">""</span><span class="p">&gt;</span>
A: <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">"text"</span> <span class="na">name</span><span class="o">=</span><span class="s">"texts[a]"</span><span class="p">&gt;&lt;</span><span class="nt">br</span><span class="p">&gt;</span>
B: <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">"text"</span> <span class="na">name</span><span class="o">=</span><span class="s">"texts[b]"</span><span class="p">&gt;&lt;</span><span class="nt">br</span><span class="p">&gt;</span>
C: <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">"text"</span> <span class="na">name</span><span class="o">=</span><span class="s">"texts[c]"</span><span class="p">&gt;&lt;</span><span class="nt">br</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">"submit"</span> <span class="na">value</span><span class="o">=</span><span class="s">"送信"</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>
</pre></div></div>

<p>テキストボックスは<ins>入力内容が無くても空文字列として送信されます</ins>が，不正なリクエストに備えるには結局冗長に書かざるを得ません．</p>

<div class="code-frame" data-lang="php"><div class="highlight"><pre><span></span><span class="k">foreach</span> <span class="p">([</span><span class="s1">'a'</span><span class="p">,</span> <span class="s1">'b'</span><span class="p">,</span> <span class="s1">'c'</span><span class="p">]</span> <span class="k">as</span> <span class="nv">$i</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$texts</span><span class="p">[</span><span class="nv">$i</span><span class="p">]</span> <span class="o">=</span>
        <span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'text'</span><span class="p">][</span><span class="nv">$i</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="nb">is_string</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'text'</span><span class="p">][</span><span class="nv">$i</span><span class="p">])</span> <span class="o">?</span>
        <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'text'</span><span class="p">][</span><span class="nv">$i</span><span class="p">]</span> <span class="o">:</span>
        <span class="s1">''</span>
    <span class="p">;</span>
<span class="p">}</span>
</pre></div></div>

<h3>
<span id="チェックボックスの配列を対象とする場合" class="fragment"></span><a href="#%E3%83%81%E3%82%A7%E3%83%83%E3%82%AF%E3%83%9C%E3%83%83%E3%82%AF%E3%82%B9%E3%81%AE%E9%85%8D%E5%88%97%E3%82%92%E5%AF%BE%E8%B1%A1%E3%81%A8%E3%81%99%E3%82%8B%E5%A0%B4%E5%90%88"><i class="fa fa-link"></i></a>チェックボックスの配列を対象とする場合</h3>

<div class="code-frame" data-lang="html"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">form</span> <span class="na">method</span><span class="o">=</span><span class="s">"post"</span> <span class="na">action</span><span class="o">=</span><span class="s">""</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">"checkbox"</span> <span class="na">name</span><span class="o">=</span><span class="s">"checks[a]"</span> <span class="na">value</span><span class="o">=</span><span class="s">"1"</span><span class="p">&gt;</span>A<span class="p">&lt;</span><span class="nt">br</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">"checkbox"</span> <span class="na">name</span><span class="o">=</span><span class="s">"checks[b]"</span> <span class="na">value</span><span class="o">=</span><span class="s">"1"</span><span class="p">&gt;</span>B<span class="p">&lt;</span><span class="nt">br</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">"checkbox"</span> <span class="na">name</span><span class="o">=</span><span class="s">"checks[c]"</span> <span class="na">value</span><span class="o">=</span><span class="s">"1"</span><span class="p">&gt;</span>C<span class="p">&lt;</span><span class="nt">br</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">"submit"</span> <span class="na">value</span><span class="o">=</span><span class="s">"送信"</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>
</pre></div></div>

<p>チェックボックスに関しては，<ins>チェックしていないものは送信されません</ins>．また，今回のように値を実際には必要とせず，単純にチェックされたかされなかったかのみを判定したい場合は</p>

<ul>
<li>チェックされたもの → <code>true</code>
</li>
<li>チェックされなかったもの → <code>false</code>
</li>
</ul>

<p>として存在させておいた方が何かと扱いやすいと思います．これを実現するには以下のようにします．</p>

<div class="code-frame" data-lang="php"><div class="highlight"><pre><span></span><span class="k">foreach</span> <span class="p">([</span><span class="s1">'a'</span><span class="p">,</span> <span class="s1">'b'</span><span class="p">,</span> <span class="s1">'c'</span><span class="p">]</span> <span class="k">as</span> <span class="nv">$i</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$checks</span><span class="p">[</span><span class="nv">$i</span><span class="p">]</span> <span class="o">=</span> <span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'checks'</span><span class="p">][</span><span class="nv">$i</span><span class="p">]);</span>
<span class="p">}</span>
</pre></div></div>

<h2>
<span id="指定した値に限定して1次元配列を強制する" class="fragment"></span><a href="#%E6%8C%87%E5%AE%9A%E3%81%97%E3%81%9F%E5%80%A4%E3%81%AB%E9%99%90%E5%AE%9A%E3%81%97%E3%81%A61%E6%AC%A1%E5%85%83%E9%85%8D%E5%88%97%E3%82%92%E5%BC%B7%E5%88%B6%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>指定した値に限定して1次元配列を強制する</h2>

<p>先ほどのチェックボックスの例に関して，今度はキーではなく値に着目し，想定されない値は含まないようにします．</p>

<div class="code-frame" data-lang="html"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">form</span> <span class="na">method</span><span class="o">=</span><span class="s">"post"</span> <span class="na">action</span><span class="o">=</span><span class="s">""</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">"checkbox"</span> <span class="na">name</span><span class="o">=</span><span class="s">"checks[]"</span> <span class="na">value</span><span class="o">=</span><span class="s">"a"</span><span class="p">&gt;</span>A<span class="p">&lt;</span><span class="nt">br</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">"checkbox"</span> <span class="na">name</span><span class="o">=</span><span class="s">"checks[]"</span> <span class="na">value</span><span class="o">=</span><span class="s">"b"</span><span class="p">&gt;</span>B<span class="p">&lt;</span><span class="nt">br</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">"checkbox"</span> <span class="na">name</span><span class="o">=</span><span class="s">"checks[]"</span> <span class="na">value</span><span class="o">=</span><span class="s">"c"</span><span class="p">&gt;</span>C<span class="p">&lt;</span><span class="nt">br</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">"submit"</span> <span class="na">value</span><span class="o">=</span><span class="s">"送信"</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>
</pre></div></div>

<p><strong><a href="http://www.php.net/manual/ja/function.array-intersect.php" rel="nofollow noopener" target="_blank">array_intersect</a></strong> 関数で値に注目したときの共通項を計算します． <code>0</code> から始まる数字添え字配列にした方が綺麗なので，必要に応じて最後に <strong><a href="http://www.php.net/manual/ja/function.array-values.php" rel="nofollow noopener" target="_blank">array_values</a></strong> 関数を通しておきます．</p>

<div class="code-frame" data-lang="php"><div class="highlight"><pre><span></span><span class="nv">$checks</span> <span class="o">=</span> <span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'checks'</span><span class="p">])</span> <span class="o">?</span> <span class="p">(</span><span class="k">array</span><span class="p">)</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'checks'</span><span class="p">]</span> <span class="o">:</span> <span class="p">[];</span>
<span class="nv">$checks</span> <span class="o">=</span> <span class="nb">array_values</span><span class="p">(</span><span class="nb">array_intersect</span><span class="p">(</span><span class="nv">$checks</span><span class="p">,</span> <span class="p">[</span><span class="s1">'a'</span><span class="p">,</span> <span class="s1">'b'</span><span class="p">,</span> <span class="s1">'c'</span><span class="p">]));</span>
</pre></div></div>

<h1>
<span id="更なるステップアップ" class="fragment"></span><a href="#%E6%9B%B4%E3%81%AA%E3%82%8B%E3%82%B9%E3%83%86%E3%83%83%E3%83%97%E3%82%A2%E3%83%83%E3%83%97"><i class="fa fa-link"></i></a>更なるステップアップ</h1>

<h2>
<span id="可変変数-の利用" class="fragment"></span><a href="#%E5%8F%AF%E5%A4%89%E5%A4%89%E6%95%B0-%E3%81%AE%E5%88%A9%E7%94%A8"><i class="fa fa-link"></i></a><a href="http://www.php.net/manual/ja/language.variables.variable.php" rel="nofollow noopener" target="_blank">可変変数</a> の利用</h2>

<p><a href="http://www.php.net/manual/ja/function.filter-input.php" rel="nofollow noopener" target="_blank">filter_input</a> 関数を利用するとかなりコードを短くできますが，それでも項目数だけ繰り返しコールする必要がありました．</p>

<div class="code-frame" data-lang="php"><div class="highlight"><pre><span></span><span class="nv">$name</span> <span class="o">=</span> <span class="p">(</span><span class="nx">string</span><span class="p">)</span><span class="nb">filter_input</span><span class="p">(</span><span class="nx">INPUT_POST</span><span class="p">,</span> <span class="s1">'name'</span><span class="p">);</span>
<span class="nv">$email</span> <span class="o">=</span> <span class="p">(</span><span class="nx">string</span><span class="p">)</span><span class="nb">filter_input</span><span class="p">(</span><span class="nx">INPUT_POST</span><span class="p">,</span> <span class="s1">'email'</span><span class="p">);</span>
<span class="nv">$comment</span> <span class="o">=</span> <span class="p">(</span><span class="nx">string</span><span class="p">)</span><span class="nb">filter_input</span><span class="p">(</span><span class="nx">INPUT_POST</span><span class="p">,</span> <span class="s1">'comment'</span><span class="p">);</span>
</pre></div></div>

<p>これを <strong><a href="http://www.php.net/manual/ja/language.variables.variable.php" rel="nofollow noopener" target="_blank">可変変数</a></strong> という機能を利用することで，どれだけ項目が増えても1つ分の記述だけで済ませることが出来ます．但し，<ins>変数名 </ins><strong><code>$v</code></strong><ins> と一致する </ins><strong><code>'v'</code></strong><ins> が配列内に存在すると正しい処理が行えなくなる</ins>ので十分注意してください．</p>

<div class="code-frame" data-lang="php"><div class="highlight"><pre><span></span><span class="k">foreach</span> <span class="p">([</span><span class="s1">'name'</span><span class="p">,</span> <span class="s1">'email'</span><span class="p">,</span> <span class="s1">'comment'</span><span class="p">]</span> <span class="k">as</span> <span class="nv">$v</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$$v</span> <span class="o">=</span> <span class="p">(</span><span class="nx">string</span><span class="p">)</span><span class="nb">filter_input</span><span class="p">(</span><span class="nx">INPUT_POST</span><span class="p">,</span> <span class="nv">$v</span><span class="p">);</span>
<span class="p">}</span>
</pre></div></div>

<p>もちろん，以下のように特定の配列やオブジェクトの中に格納することも可能です．お好みに応じて適当に使い分けてください．</p>

<div class="code-frame" data-lang="php">
<div class="code-lang"><span class="bold">配列のインデックスを定義する</span></div>
<div class="highlight"><pre><span></span><span class="k">foreach</span> <span class="p">([</span><span class="s1">'name'</span><span class="p">,</span> <span class="s1">'email'</span><span class="p">,</span> <span class="s1">'comment'</span><span class="p">]</span> <span class="k">as</span> <span class="nv">$v</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$p</span><span class="p">[</span><span class="nv">$v</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="nx">string</span><span class="p">)</span><span class="nb">filter_input</span><span class="p">(</span><span class="nx">INPUT_POST</span><span class="p">,</span> <span class="nv">$v</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>

<div class="code-frame" data-lang="php">
<div class="code-lang"><span class="bold">オブジェクトのプロパティを定義する</span></div>
<div class="highlight"><pre><span></span><span class="nv">$p</span> <span class="o">=</span> <span class="k">new</span> <span class="k">stdClass</span><span class="p">;</span>
<span class="k">foreach</span> <span class="p">([</span><span class="s1">'name'</span><span class="p">,</span> <span class="s1">'email'</span><span class="p">,</span> <span class="s1">'comment'</span><span class="p">]</span> <span class="k">as</span> <span class="nv">$v</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$p</span><span class="o">-&gt;</span><span class="nv">$v</span> <span class="o">=</span> <span class="p">(</span><span class="nx">string</span><span class="p">)</span><span class="nb">filter_input</span><span class="p">(</span><span class="nx">INPUT_POST</span><span class="p">,</span> <span class="nv">$v</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>

<h2>
<span id="自分でフィルタリング用の関数を作る" class="fragment"></span><a href="#%E8%87%AA%E5%88%86%E3%81%A7%E3%83%95%E3%82%A3%E3%83%AB%E3%82%BF%E3%83%AA%E3%83%B3%E3%82%B0%E7%94%A8%E3%81%AE%E9%96%A2%E6%95%B0%E3%82%92%E4%BD%9C%E3%82%8B"><i class="fa fa-link"></i></a>自分でフィルタリング用の関数を作る</h2>

<p>複雑な配列をフォームから受け取る場合などには，上記の工夫だけでは間に合わないかもしれません．そういったときには自分でフィルタリング用の関数を作って処理をするのが適当です．以下に私が自作したとても便利な関数を紹介しておきます．</p>

<ul>
<li><a href="http://qiita.com/mpyw/items/5a7242269f51dfabc973" id="reference-a1c7d3884471c15f34b3">Qiita - filter_input_simple</a></li>
<li><a href="http://qiita.com/mpyw/items/c39b9ee695a5c2e74627" id="reference-e7164e910ac4431d083a">Qiita - filter_input_array_recursive</a></li>
</ul>

<h2>
<span id="具体的な値に関するバリデーションを行う" class="fragment"></span><a href="#%E5%85%B7%E4%BD%93%E7%9A%84%E3%81%AA%E5%80%A4%E3%81%AB%E9%96%A2%E3%81%99%E3%82%8B%E3%83%90%E3%83%AA%E3%83%87%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E3%82%92%E8%A1%8C%E3%81%86"><i class="fa fa-link"></i></a>具体的な値に関するバリデーションを行う</h2>

<p>ここまでは</p>

<ol>
<li>未定義ではないか</li>
<li>想定外の型ではないか</li>
</ol>

<p>という処理のみに着目してきましたが，実際には</p>

<ol>
<li>未定義ではないか</li>
<li>想定外の型ではないか</li>
<li><strong>誤った形式の値ではないか</strong></li>
</ol>

<p>という処理になることがほとんどでしょう．EメールアドレスやURLなどのチェックがこれに該当します．詳しくは以下のまとめにて紹介しています．</p>

<ul>
<li><a href="http://qiita.com/mpyw/items/346f1789ad0e1b969ebc" id="reference-5f40947e6e0ba5ee4f4d">Qiita - PHPで各種バリデーション</a></li>
</ul>

<h2>
<span id="推薦記事" class="fragment"></span><a href="#%E6%8E%A8%E8%96%A6%E8%A8%98%E4%BA%8B"><i class="fa fa-link"></i></a>推薦記事</h2>

<ul>
<li>
<a href="http://qiita.com/7968/items/4bf4d6f28284146c288f" id="reference-704a10eaabe3f3c3b3c0">Qiita - 【PHP超入門】HTTP（GET・POST）について</a> by <a href="/7968" class="user-mention js-hovercard" title="7968" data-hovercard-target-type="user" data-hovercard-target-name="7968">@7968</a>
</li>
</ul>
</div>
	</td>
</tr>
</table>
<br />
<table border="1" style="height:150px;">
<tr>
	<td rowspan="3">51位</td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="thumb-up-120px.png" /></i>903</kbd>
		<a target="_blank" href="https://qiita.com/uasi/items/80660f9aa20afaf671f3">Objective-C のプロパティ属性のガイドライン</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-05-07<br />16:50:41</center>
	</td>
	<td style="width:200px;">
		<!--投稿者-->
		<center>
			@<a href="user/735.html">uasi</a>(117件の記事)<br />(Increments 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/735/profile-images/1473681692">
		</center>
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Objective-C]</b> <b>[Mac]</b> <b>[Xcode]</b> <b>[iOS]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<!--
		<div style="width:350px;height:150px;overflow:scroll;">%s</div>
		-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>Objective-C のプロパティの属性を指定するとき従うべきガイドラインをまとめた。</p>

<h2>
<span id="できる限り-nonatomic-を指定する" class="fragment"></span><a href="#%E3%81%A7%E3%81%8D%E3%82%8B%E9%99%90%E3%82%8A-nonatomic-%E3%82%92%E6%8C%87%E5%AE%9A%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>できる限り <code>nonatomic</code> を指定する</h2>

<p><code>atomic</code> にしてもパフォーマンスが悪化するだけでほとんどメリットがない（参考：<a href="http://stackoverflow.com/questions/588866/atomic-vs-nonatomic-properties" rel="nofollow noopener" target="_blank">StackOverflow - Atomic vs nonatomic properties</a>）。</p>

<div class="code-frame" data-lang="objc"><div class="highlight"><pre><span></span><span class="k">@property</span> <span class="p">(</span><span class="k">nonatomic</span><span class="p">)</span> <span class="kt">id</span> <span class="n">value</span><span class="p">;</span>
</pre></div></div>

<p><code>nonatomic</code> と <code>atomic</code> の使い分けの指針は次のとおり：</p>

<blockquote>
<ul>
<li>参照型: メモリアドレスのみの書き込みなので、常にnonatomicでよい</li>
<li>プリミティブ型:

<ul>
<li>int, BOOL等ワンステップでの書き込みが可能: 常にnonatomicでよい</li>
<li>単一のスレッドからしかアクセスされない: 設計に気をつけつつnonatomic推奨</li>
<li>複数のスレッドからのアクセスがあり、long,構造体などサイズの大きい値: atomic推奨</li>
</ul>
</li>
</ul>
</blockquote>

<p>(<a href="#comment-bcdf4e94f134605184e8">thx to</a> <a href="/takasek" class="user-mention js-hovercard" title="takasek" data-hovercard-target-type="user" data-hovercard-target-name="takasek">@takasek</a>)</p>

<p>複数のスレッドから同時に読み書きが行われる可能性があるプロパティには <code>atomic</code> を指定する。 <code>atomic</code> を指定することで getter と setter が排他的に実行されるようになり、値の書き込みに複数のメモリ操作命令が必要な型（構造体など）が中間状態で読み出されることがなくなる。</p>

<p><code>atomic</code> を指定してもスレッドセーフになるとは限らない点に注意すること。たとえば、 <code>obj.atomicInt++</code> を複数スレッドで同時に実行すると、実行した回数より値が小さくなることがある（参考：<a href="http://ameblo.jp/tomotaken/entry-10818354164.html" rel="nofollow noopener" target="_blank">Objective-Cでatomicな宣言プロパティがatomicであるとは限らない話｜スマホとアドテク開発記</a>）。</p>

<p>スレッドセーフ性を保証したいときは、 <code>atomic</code> よりも <code>@synchronized</code> や <code>NSLock</code> などの排他制御のほうが適切なこともあるので、よく検討すること。</p>

<h2>
<span id="strong-と-assign-は省略してもよい" class="fragment"></span><a href="#strong-%E3%81%A8-assign-%E3%81%AF%E7%9C%81%E7%95%A5%E3%81%97%E3%81%A6%E3%82%82%E3%82%88%E3%81%84"><i class="fa fa-link"></i></a><code>strong</code> と <code>assign</code> は省略してもよい</h2>

<p>オブジェクト型のプロパティは <code>strong</code> が、それ以外の型のプロパティは <code>assign</code> がデフォルトであるため、省略することができる。 <code>weak</code> や <code>copy</code> のプロパティと桁をそろえるために、あるいは既存のコードとスタイルを一致させるために、明示してもよい。</p>

<p>注：Xcode 4.2.xまでは、オブジェクト型プロパティの <code>strong</code> の省略は認められない。</p>

<div class="code-frame" data-lang="objc"><div class="highlight"><pre><span></span><span class="c1">// 省略</span>
<span class="k">@property</span> <span class="p">(</span><span class="k">nonatomic</span><span class="p">)</span> <span class="kt">id</span> <span class="n">object</span><span class="p">;</span>
<span class="k">@property</span> <span class="p">(</span><span class="k">nonatomic</span><span class="p">)</span> <span class="n">NSInteger</span> <span class="n">primitiveValue</span><span class="p">;</span>

<span class="c1">// または明示</span>
<span class="k">@property</span> <span class="p">(</span><span class="k">nonatomic</span><span class="p">,</span> <span class="k">strong</span><span class="p">)</span> <span class="kt">id</span> <span class="n">object</span><span class="p">;</span>
<span class="k">@property</span> <span class="p">(</span><span class="k">nonatomic</span><span class="p">,</span> <span class="k">assign</span><span class="p">)</span> <span class="n">NSInteger</span> <span class="n">primitiveValue</span><span class="p">;</span>
</pre></div></div>

<h2>
<span id="outlet-には基本的に-weak-を指定する" class="fragment"></span><a href="#outlet-%E3%81%AB%E3%81%AF%E5%9F%BA%E6%9C%AC%E7%9A%84%E3%81%AB-weak-%E3%82%92%E6%8C%87%E5%AE%9A%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>Outlet には基本的に <code>weak</code> を指定する</h2>

<p>Outlet が参照するオブジェクトは、大抵は何らかのビューのサブビューである。サブビューはそのスーパービューによって保持されるので、 outlet は <code>weak</code>で構わない。 <code>weak</code> にすることで意図しない循環参照を予防できる。ただし、次のようなオブジェクトを参照する outlet は <code>strong</code> にしなければならない：</p>

<ul>
<li>Nib のトップレベルオブジェクト（ウィンドウ、他のビューに属さないビュー、 <code>NSObjectController</code> などビュー以外のオブジェクト）</li>
<li>サブビューのうち、 <code>-removeFromSuperview</code> を呼ぶなどして一時的にビュー階層から取り除かれる可能性があるもの</li>
</ul>

<p>（参考：<a href="https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/LoadingResources/CocoaNibs/CocoaNibs.html#//apple_ref/doc/uid/10000051i-CH4-SW6" rel="nofollow noopener" target="_blank">Managing the Lifetimes of Objects from Nib Files</a>、<a href="http://blog.natsuapps.com/2011/11/ios5-arc-weakproperty-for-outle.html" rel="nofollow noopener" target="_blank">[iOS5] ARC : Outletにはweakプロパティを使おう</a>）</p>

<div class="code-frame" data-lang="objc"><div class="highlight"><pre><span></span><span class="k">@property</span> <span class="p">(</span><span class="k">nonatomic</span><span class="p">,</span> <span class="k">weak</span><span class="p">)</span> <span class="kt">IBOutlet</span> <span class="n">NSView</span> <span class="o">*</span><span class="n">view</span><span class="p">;</span>
<span class="k">@property</span> <span class="p">(</span><span class="k">nonatomic</span><span class="p">,</span> <span class="k">strong</span><span class="p">)</span> <span class="kt">IBOutlet</span> <span class="n">NSWindow</span> <span class="o">*</span><span class="n">window</span><span class="p">;</span>
<span class="k">@property</span> <span class="p">(</span><span class="k">nonatomic</span><span class="p">,</span> <span class="k">strong</span><span class="p">)</span> <span class="kt">IBOutlet</span> <span class="n">NSView</span> <span class="o">*</span><span class="n">removableView</span><span class="p">;</span>
</pre></div></div>

<h2>
<span id="デリゲートプロパティには-weak-を指定する" class="fragment"></span><a href="#%E3%83%87%E3%83%AA%E3%82%B2%E3%83%BC%E3%83%88%E3%83%97%E3%83%AD%E3%83%91%E3%83%86%E3%82%A3%E3%81%AB%E3%81%AF-weak-%E3%82%92%E6%8C%87%E5%AE%9A%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>デリゲートプロパティには <code>weak</code> を指定する</h2>

<p>あるオブジェクトをそのオブジェクト自身のデリゲートにするような状況では循環参照が発生するため、デリゲートプロパティを <code>strong</code> にするとオブジェクトが解放されなくなる。特別な事情がなければデリゲートプロパティは <code>weak</code> にすべきである。</p>

<p>Cocoa のデリゲートプロパティは、 <code>NSURLConnection</code> や <code>CAAnimation</code> などの例外を除き <code>weak</code> か <code>unsafe_unretained</code> になっている。</p>

<div class="code-frame" data-lang="objc"><div class="highlight"><pre><span></span><span class="k">@property</span> <span class="p">(</span><span class="k">nonatomic</span><span class="p">,</span> <span class="k">weak</span><span class="p">)</span> <span class="kt">id</span> <span class="n">delegate</span><span class="p">;</span>
</pre></div></div>

<h2>
<span id="weak-参照してはいけないクラスに注意する" class="fragment"></span><a href="#weak-%E5%8F%82%E7%85%A7%E3%81%97%E3%81%A6%E3%81%AF%E3%81%84%E3%81%91%E3%81%AA%E3%81%84%E3%82%AF%E3%83%A9%E3%82%B9%E3%81%AB%E6%B3%A8%E6%84%8F%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a><code>weak</code> 参照してはいけないクラスに注意する</h2>

<p>OS X では、 UI に関係するクラスのうちのいくつかが <code>weak</code> 参照に対応していない（参考：<a href="http://qiita.com/uasi/items/ee71a476ec3ef9c3c10d" id="reference-6092b60e866b12c62f09"><br>
weak 参照してはいけない Cocoa のクラス一覧</a>）。これらのクラスを弱参照したい場合は <code>unsafe_unretained</code> 参照を使うこと。</p>

<h2>
<span id="mutable-なサブクラスがある型には-copy-を指定する" class="fragment"></span><a href="#mutable-%E3%81%AA%E3%82%B5%E3%83%96%E3%82%AF%E3%83%A9%E3%82%B9%E3%81%8C%E3%81%82%E3%82%8B%E5%9E%8B%E3%81%AB%E3%81%AF-copy-%E3%82%92%E6%8C%87%E5%AE%9A%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>Mutable なサブクラスがある型には <code>copy</code> を指定する</h2>

<p><code>NSString</code> 型などの、対応する <code>NSMutable...</code> 型があるプロパティには <code>copy</code> を指定する。Mutable なオブジェクトの <code>copy</code> メソッドは immutable なオブジェクトを返すため、プロパティにセットされる値が immutable であることを保証できる。</p>

<p>Immutable オブジェクトの <code>copy</code> メソッドは、オブジェクトをコピーせずインスタンス自身を返すため、パフォーマンスが悪化することはない。</p>

<div class="code-frame" data-lang="objc"><div class="highlight"><pre><span></span><span class="k">@property</span> <span class="p">(</span><span class="k">nonatomic</span><span class="p">,</span> <span class="k">copy</span><span class="p">)</span> <span class="bp">NSString</span> <span class="o">*</span><span class="n">string</span><span class="p">;</span>
</pre></div></div>

<h2>
<span id="readonly-と対応するプロパティには-readwrite-を明示する" class="fragment"></span><a href="#readonly-%E3%81%A8%E5%AF%BE%E5%BF%9C%E3%81%99%E3%82%8B%E3%83%97%E3%83%AD%E3%83%91%E3%83%86%E3%82%A3%E3%81%AB%E3%81%AF-readwrite-%E3%82%92%E6%98%8E%E7%A4%BA%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a><code>readonly</code> と対応するプロパティには <code>readwrite</code> を明示する</h2>

<p>あるプロパティをクラス外部からは <code>readonly</code> にする場合、クラス内での定義には <code>readwrite</code> を明示する：</p>

<div class="code-frame" data-lang="objc"><div class="highlight"><pre><span></span><span class="cm">/*** Foo.h ***/</span>
<span class="k">@interface</span> <span class="nc">Foo</span>
<span class="k">@property</span> <span class="p">(</span><span class="k">nonatomic</span><span class="p">,</span> <span class="k">readonly</span><span class="p">)</span> <span class="kt">id</span> <span class="n">value</span><span class="p">;</span>
<span class="k">@end</span>

<span class="cm">/*** Foo.m ***/</span>
<span class="k">@interface</span> <span class="nc">Foo</span> <span class="p">()</span>
<span class="k">@property</span> <span class="p">(</span><span class="k">nonatomic</span><span class="p">,</span> <span class="k">readwrite</span><span class="p">)</span> <span class="kt">id</span> <span class="n">value</span><span class="p">;</span>
<span class="k">@end</span>
</pre></div></div>

<p><code>readwrite</code> はデフォルトであり省略可能だが、クラス外に <code>readonly</code> で公開するプロパティだけ <code>readwrite</code> を明示するルールにすると分かりやすい。</p>

<h2>
<span id="あるプロパティをヘッダと実装の両方に書くときはオーナーシップ属性を一致させる" class="fragment"></span><a href="#%E3%81%82%E3%82%8B%E3%83%97%E3%83%AD%E3%83%91%E3%83%86%E3%82%A3%E3%82%92%E3%83%98%E3%83%83%E3%83%80%E3%81%A8%E5%AE%9F%E8%A3%85%E3%81%AE%E4%B8%A1%E6%96%B9%E3%81%AB%E6%9B%B8%E3%81%8F%E3%81%A8%E3%81%8D%E3%81%AF%E3%82%AA%E3%83%BC%E3%83%8A%E3%83%BC%E3%82%B7%E3%83%83%E3%83%97%E5%B1%9E%E6%80%A7%E3%82%92%E4%B8%80%E8%87%B4%E3%81%95%E3%81%9B%E3%82%8B"><i class="fa fa-link"></i></a>あるプロパティをヘッダと実装の両方に書くときはオーナーシップ属性を一致させる</h2>

<p>下の例のようにオーナーシップ属性が一致していないと、 "ARC forbids synthesizing a property of an Objective-C object with unspecified ownership or storage attribute" とエラーが出る。</p>

<div class="code-frame" data-lang="objc"><div class="highlight"><pre><span></span><span class="c1">// 誤った指定の例</span>

<span class="cm">/*** Foo.h ***/</span>
<span class="k">@interface</span> <span class="nc">Foo</span>
<span class="k">@property</span> <span class="p">(</span><span class="k">nonatomic</span><span class="p">,</span> <span class="k">readonly</span><span class="p">)</span> <span class="kt">id</span> <span class="n">value</span><span class="p">;</span> <span class="c1">// 暗黙的に `strong` を指定</span>
<span class="k">@end</span>

<span class="cm">/*** Foo.m ***/</span>
<span class="k">@interface</span> <span class="nc">Foo</span> <span class="p">()</span>
<span class="k">@property</span> <span class="p">(</span><span class="k">nonatomic</span><span class="p">,</span> <span class="k">copy</span><span class="p">,</span> <span class="k">readwrite</span><span class="p">)</span> <span class="kt">id</span> <span class="n">value</span><span class="p">;</span> <span class="c1">// `copy` を指定</span>
<span class="k">@end</span>
</pre></div></div>

<h2>
<span id="ブロック型のプロパティには-copy-を指定する" class="fragment"></span><a href="#%E3%83%96%E3%83%AD%E3%83%83%E3%82%AF%E5%9E%8B%E3%81%AE%E3%83%97%E3%83%AD%E3%83%91%E3%83%86%E3%82%A3%E3%81%AB%E3%81%AF-copy-%E3%82%92%E6%8C%87%E5%AE%9A%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>ブロック型のプロパティには <code>copy</code> を指定する</h2>

<p>関数本体の中に記述されたブロックリテラルの記憶領域はスタックに確保される。ブロックオブジェクトをプロパティにセットするためには、 <code>copy</code> メソッドを呼んで記憶領域がヒープに確保されたブロックを作らなければならない。</p>

<div class="code-frame" data-lang="objc"><div class="highlight"><pre><span></span><span class="k">typedef</span> <span class="nf">void</span> <span class="p">(</span><span class="o">^</span><span class="n">MyCallback</span><span class="p">)(</span><span class="kt">void</span><span class="p">);</span>
<span class="k">@property</span> <span class="p">(</span><span class="k">nonatomic</span><span class="p">,</span> <span class="k">copy</span><span class="p">)</span> <span class="n">MyCallback</span> <span class="n">callback</span><span class="p">;</span>
</pre></div></div>

<p>ブロック型のプロパティにオーナーシップ属性を指定しないと、暗黙的な <code>strong</code> にはならず、  "ARC forbids synthesizing a property of an Objective-C object with unspecified ownership or storage attribute" とエラーが出る。明示的に <code>strong</code> を指定しても警告は出ないが、そうすべきではない。</p>

<h2>
<span id="bool-型のプロパティには-is-で始まる名前の-getter-を指定する" class="fragment"></span><a href="#bool-%E5%9E%8B%E3%81%AE%E3%83%97%E3%83%AD%E3%83%91%E3%83%86%E3%82%A3%E3%81%AB%E3%81%AF-is-%E3%81%A7%E5%A7%8B%E3%81%BE%E3%82%8B%E5%90%8D%E5%89%8D%E3%81%AE-getter-%E3%82%92%E6%8C%87%E5%AE%9A%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>BOOL 型のプロパティには is で始まる名前の getter を指定する</h2>

<p>getter をメソッドとして呼び出すときは名前が is で始まるほうが自然。</p>

<div class="code-frame" data-lang="objc"><div class="highlight"><pre><span></span><span class="k">@property</span> <span class="p">(</span><span class="k">readonly</span><span class="p">,</span> <span class="k">getter</span><span class="o">=</span><span class="n">isBlue</span><span class="p">)</span> <span class="kt">BOOL</span> <span class="n">blue</span><span class="p">;</span>
</pre></div></div>

<div class="code-frame" data-lang="objc"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="p">(</span><span class="n">color</span><span class="p">.</span><span class="n">blue</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>
<span class="k">if</span> <span class="p">(</span><span class="n">color</span><span class="p">.</span><span class="n">isBlue</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>
<span class="k">if</span> <span class="p">([</span><span class="n">color</span> <span class="n">isBlue</span><span class="p">])</span> <span class="p">{</span> <span class="p">}</span>
</pre></div></div>

<p>（参考：<a href="https://developer.apple.com/library/ios/releasenotes/ObjectiveC/ModernizationObjC/AdoptingModernObjective-C/AdoptingModernObjective-C.html#//apple_ref/doc/uid/TP40014150-CH1-SW4" rel="nofollow noopener" target="_blank">Adopting Modern Objective-C</a>）</p>

<h1>
<span id="まとめ" class="fragment"></span><a href="#%E3%81%BE%E3%81%A8%E3%82%81"><i class="fa fa-link"></i></a>まとめ</h1>

<div class="code-frame" data-lang="objc"><div class="highlight"><pre><span></span><span class="cm">/*** Foo.h ***/</span>

<span class="k">@interface</span> <span class="nc">Foo</span>

<span class="c1">// strong や assign は省略可</span>
<span class="k">@property</span> <span class="p">(</span><span class="k">nonatomic</span><span class="p">)</span> <span class="kt">id</span> <span class="n">object</span><span class="p">;</span>
<span class="k">@property</span> <span class="p">(</span><span class="k">nonatomic</span><span class="p">)</span> <span class="n">NSInteger</span> <span class="n">primitiveValue</span><span class="p">;</span>

<span class="c1">// Outlet は weak にする（トップレベルオブジェクトは strong）</span>
<span class="k">@property</span> <span class="p">(</span><span class="k">nonatomic</span><span class="p">,</span> <span class="k">weak</span><span class="p">)</span> <span class="kt">IBOutlet</span> <span class="n">NSView</span> <span class="o">*</span><span class="n">view</span><span class="p">;</span>
<span class="k">@property</span> <span class="p">(</span><span class="k">nonatomic</span><span class="p">,</span> <span class="k">strong</span><span class="p">)</span> <span class="kt">IBOutlet</span> <span class="n">NSWindow</span> <span class="o">*</span><span class="n">window</span><span class="p">;</span>

<span class="c1">// Delegate は weak にする</span>
<span class="k">@property</span> <span class="p">(</span><span class="k">nonatomic</span><span class="p">,</span> <span class="k">weak</span><span class="p">)</span> <span class="kt">id</span> <span class="n">delegate</span><span class="p">;</span>

<span class="c1">// Mutable なサブクラスがある型は copy にする</span>
<span class="k">@property</span> <span class="p">(</span><span class="k">nonatomic</span><span class="p">,</span> <span class="k">copy</span><span class="p">)</span> <span class="bp">NSString</span> <span class="o">*</span><span class="n">possiblyMutable</span><span class="p">;</span>

<span class="c1">// 後述</span>
<span class="k">@property</span> <span class="p">(</span><span class="k">nonatomic</span><span class="p">,</span> <span class="k">readonly</span><span class="p">)</span> <span class="kt">id</span> <span class="n">internallyWritable</span><span class="p">;</span>
<span class="k">@property</span> <span class="p">(</span><span class="k">nonatomic</span><span class="p">,</span> <span class="k">copy</span><span class="p">,</span> <span class="k">readonly</span><span class="p">)</span> <span class="kt">id</span> <span class="n">internallyWritableByCopy</span><span class="p">;</span>

<span class="c1">// ブロック型は copy にする</span>
<span class="k">typedef</span> <span class="nf">void</span> <span class="p">(</span><span class="o">^</span><span class="n">MyCallback</span><span class="p">)(</span><span class="kt">void</span><span class="p">);</span>
<span class="k">@property</span> <span class="p">(</span><span class="k">nonatomic</span><span class="p">,</span> <span class="k">copy</span><span class="p">)</span> <span class="n">MyCallback</span> <span class="n">callback</span><span class="p">;</span>

<span class="c1">// BOOL 型の getter 名は is で始める</span>
<span class="k">@property</span> <span class="p">(</span><span class="k">nonatomic</span><span class="p">,</span> <span class="k">getter</span><span class="o">=</span><span class="n">isBlue</span><span class="p">)</span> <span class="kt">BOOL</span> <span class="n">blue</span><span class="p">;</span>

<span class="k">@end</span>

<span class="cm">/*** Foo.m ***/</span>

<span class="k">@interface</span> <span class="nc">Foo</span> <span class="p">()</span>

<span class="c1">// 外部から readonly にするプロパティには readwrite を明示する</span>
<span class="k">@property</span> <span class="p">(</span><span class="k">nonatomic</span><span class="p">,</span> <span class="k">readwrite</span><span class="p">)</span> <span class="kt">id</span> <span class="n">internallyWritable</span><span class="p">;</span>
<span class="k">@property</span> <span class="p">(</span><span class="k">nonatomic</span><span class="p">,</span> <span class="k">copy</span><span class="p">,</span> <span class="k">readwrite</span><span class="p">)</span> <span class="kt">id</span> <span class="n">internallyWritableByCopy</span><span class="p">;</span>

<span class="k">@end</span>

</pre></div></div>

<h1>
<span id="属性の順序について" class="fragment"></span><a href="#%E5%B1%9E%E6%80%A7%E3%81%AE%E9%A0%86%E5%BA%8F%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6"><i class="fa fa-link"></i></a>属性の順序について</h1>

<p>属性を並べる順番は任意だが、既存のコードにプロパティを追加するなら周りのスタイルに合わせるべきである。新規に書く場合、筆者は以下の順番を推奨する：</p>

<div class="code-frame" data-lang="objc"><div class="highlight"><pre><span></span><span class="k">@property</span> <span class="p">(</span><span class="k">nonatomic</span><span class="p">,</span> <span class="k">strong</span><span class="p">,</span> <span class="k">readonly</span><span class="p">,</span> <span class="k">getter</span><span class="o">=</span><span class="n">foo</span><span class="p">,</span> <span class="k">setter</span><span class="o">=</span><span class="nl">setFoo</span><span class="p">:)</span> <span class="kt">id</span> <span class="n">foo</span><span class="p">;</span>
</pre></div></div>

<p><code>nonatomic</code> はほぼ常に指定されるので、 <code>@property (nonatomic</code> までを定型文としてとらえる。 <code>strong</code> や <code>weak</code> も（デフォルト値を省略しないなら）常に必要なので2番目に書く。 <code>getter</code> と <code>setter</code> は最後に指定する。仮にその後に属性を書くと、 getter/setter 名が長い場合に目で追いづらくなるだろう。</p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1" style="height:150px;">
<tr>
	<td rowspan="3">52位</td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="thumb-up-120px.png" /></i>900</kbd>
		<a target="_blank" href="https://qiita.com/icoxfog417/items/2ac773c33a8b34288551">お前のAngular.jsはもうMVCではない。と言われないためのTutorial</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-12-18<br />23:15:06</center>
	</td>
	<td style="width:200px;">
		<!--投稿者-->
		<center>
			@<a href="user/25990.html">icoxfog417</a>(145件の記事)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/25990/profile-images/1484303516">
		</center>
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[JavaScript]</b> <b>[AngularJS]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<!--
		<div style="width:350px;height:150px;overflow:scroll;">%s</div>
		-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>JavaScriptフレームワークに興味あるし、Angular.jsを使ってみようかな・・・</p>

<p>そんな純真無垢なあなたを混沌の世紀末に引きずり込むのが、ほかでもない<a href="http://docs.angularjs.org/tutorial/" rel="nofollow noopener" target="_blank">Tutorial</a>なのです。</p>

<p>TutorialではほぼControllerしか出てこないので、素直にこの通り書いているとまず間違いなく３カウントでControllerにコードが集中するいわゆるFat Controllerになり、せっかくMVCフレームワークも地獄の荒野になります。</p>

<p>実は、Angular.jsでまず目を通すべきなのは<a href="http://docs.angularjs.org/guide/concepts" rel="nofollow noopener" target="_blank">Developer GuideのConceptual Overview</a>です。これを読めばどう処理を分割するかがきちんと書かれていますが、以下ではそれ＋経験をもとにAngular.jsで正しくMVCを使用するためのポイントをまとめました。</p>

<h1>
<span id="angularjsの３原則" class="fragment"></span><a href="#angularjs%E3%81%AE%EF%BC%93%E5%8E%9F%E5%89%87"><i class="fa fa-link"></i></a>Angular.jsの３原則</h1>

<h2>
<span id="1controllerはイベントハンドリングとdata-bindingに集中する" class="fragment"></span><a href="#1controller%E3%81%AF%E3%82%A4%E3%83%99%E3%83%B3%E3%83%88%E3%83%8F%E3%83%B3%E3%83%89%E3%83%AA%E3%83%B3%E3%82%B0%E3%81%A8data-binding%E3%81%AB%E9%9B%86%E4%B8%AD%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>1.ControllerはイベントハンドリングとData Bindingに集中する</h2>

<p>これはAngular.jsに限らず、あらゆるフレームワークで言えることです。JavaScriptフレームワークにおけるControllerの役割は以下２つで、それに集中していることが望ましいです。</p>

<ul>
<li><p>バインディング(Model -&gt; View)<br>
Controller内で管理するModel(またはそのリスト)の変更を、Viewに反映します。具体的には<code>ng-bind</code>/<code>ng-model</code>、<code>ng-repeat</code>の設定に該当します。Angular.jsではこれらを設定するだけで自動的に変更が反映されます。</p></li>
<li><p>イベントハンドリング(View -&gt; Model)<br>
イベントの発生を検知し、対応する動作(関数)を呼び出します。具体的には<code>ng-click</code>等の設定に該当します。<br>
呼び出す関数は、Controllerに直接実装する以外に、Modelクラス、Serviceによる実装などの選択肢があります。この関数の実装をどのように分割するのかが、Fat Controllerを避けるポイントとなります(後述)。</p></li>
</ul>

<h2>
<span id="2viewが複雑になったらdirectivefilterを使う" class="fragment"></span><a href="#2view%E3%81%8C%E8%A4%87%E9%9B%91%E3%81%AB%E3%81%AA%E3%81%A3%E3%81%9F%E3%82%89directivefilter%E3%82%92%E4%BD%BF%E3%81%86"><i class="fa fa-link"></i></a>2.Viewが複雑になったらDirective・Filterを使う</h2>

<p>サイト内で共通で使用するデザインなどは、これを別途templateにしdirectiveとしてコンポーネント化することができます。<br>
下記では、<code>template.html</code>にデザインを分離し、それを<code>myTemplate</code>というdirectiveにして使用しています。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>&lt;div ng-repeat="m in models"&gt;
 &lt;my-template&gt;&lt;/my-template&gt; &lt;!-- Directiveを呼び出し --&gt;
&lt;/div&gt;

&lt;script&gt;
    var myApp = angular.module("myApp",[]);
    ・・・
    myApp.directive("myTemplate",function(){ //template.htmlへ切り出し
        return {
        restrict: 'E',
        templateUrl: 'template.html'
        };
    })
&lt;/script&gt;
</pre></div></div>

<p>directiveについての詳細は<a href="http://docs.angularjs.org/guide/directive" rel="nofollow noopener" target="_blank">公式ドキュメント</a>、また手前味噌ですが<a href="http://qiita.com/icoxfog417/items/59a07c9a74084114fe23" id="reference-dc8ba0f871d4d7d53c7a">こちらの記事</a>を参照ください。<br>
これでデザインをコンポーネント化できるほか、表示用のロジックをControllerから分離することができます。</p>

<p>FilterはいわゆるHelperのように使用することができ、数値を通貨で表示したりカンマ区切りで表示したりといった、細かいところに使えます。<br>
例としては、以下のような感じです。<code>date</code>は最初から組み込まれているFilterなので、何にも書かないでもこれだけで動作します。Filterへは、<code>:</code>で引数を渡すことができます。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>&lt;div ng-app&gt;
    {{1288323623006 | date:'yyyy/MM/dd'}}&lt;br&gt;
&lt;/div&gt;
</pre></div></div>

<p>また、こちらも組み込まれている<code>filter</code>(紛らわしいですが、filterというFilterです)を配列に適用することで絞り込みもできます(この使い方のイメージのほうが強いかもしれません)。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>&lt;div ng-app ng-init="names = ['john','risa','mike','jhonasan','kensiro']"&gt;
    &lt;input type="text" ng-model="searchText" /&gt;
    &lt;div ng-repeat="n in names | filter:searchText" &gt;{{n}}&lt;/div&gt;
&lt;/div&gt;
</pre></div></div>

<h2>
<span id="3serviceによるコンポーネント化を行う" class="fragment"></span><a href="#3service%E3%81%AB%E3%82%88%E3%82%8B%E3%82%B3%E3%83%B3%E3%83%9D%E3%83%BC%E3%83%8D%E3%83%B3%E3%83%88%E5%8C%96%E3%82%92%E8%A1%8C%E3%81%86"><i class="fa fa-link"></i></a>3.Serviceによるコンポーネント化を行う</h2>

<p><code>ng-click</code>で呼び出される関数が数百行あって、Controller内には特定のイベントでしか使わないグローバル変数があふれる・・・という事態になっては、JavaScriptフレームワークを利用するメリットがありません。ここは適切にコンポーネント化を行いましょう。そのためにAngular.jsに用意されている仕組みが、Serviceになります。</p>

<p>ここでいったん用語を整理しておきますが、Angular.jsを構築するオブジェクトは以下2つに分けられます。</p>

<ul>
<li>Service<br>
ユーザーがAPIを自由に決められるもの。なお、すべてsingletonとして扱われます(インスタンスは一つしか作成されず、使いまわされる)。</li>
<li>Specialized object<br>
controllerや directiveなど、Angular.jsによりAPIが定められているもの。</li>
</ul>

<p>そしてServiceの作成方法(recipe)には以下の種類があります。</p>

<h3>
<span id="value" class="fragment"></span><a href="#value"><i class="fa fa-link"></i></a>Value</h3>

<p>値を定義するServiceを作成するrecipeです。具体的にはサーバーサイドのAPIのURLなど、アプリケーション全体の定数管理などに利用します。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>var myApp = angular.module('myApp', []);
myApp.value('clientId', 'a12345654321x');
</pre></div></div>

<h3>
<span id="factory" class="fragment"></span><a href="#factory"><i class="fa fa-link"></i></a>Factory</h3>

<p>Valueだけでは処理を記述できないので、引数を取った関数を記載できるrecipeです。<br>
先程の<code>clientId</code>をFactoryベースで書き直すと、以下のようになります。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>myApp.factory('clientId', function clientIdFactory() {
  return 'a12345654321x';
});
</pre></div></div>

<p>当然、下記のように関数も記載できます。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>myModule.factory('greeter', function($window) {
  return {
    greet: function(text) {
      $window.alert(text);
    }
  };
});
</pre></div></div>

<p>このように<code>factory</code>は単一の値だけでなく、関数やオブジェクトなども返却でき、その意味では最も汎用的に利用できるrecipeとなります。</p>

<h3>
<span id="service" class="fragment"></span><a href="#service"><i class="fa fa-link"></i></a>Service</h3>

<p>JavaScriptクラスを生成するrecipeとなり、「ServiceをService recipeで作る」と、そうした意味になります。このため、Angular.js界隈で「Service」といった場合、どちらの文脈で話しているか判断する必要があります。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>function Greeter(clientId) {
  this.clientId = clientId;
  this.greet = function() {
    return "Hello " + this.clientId;
  }
}
myApp.service('Greeter', ["clientId", Greeting]);
</pre></div></div>

<p>ValueやFactoryと異なり、指定(return)した値がそのまま利用されるのでなく、オブジェクトがnewされて利用されます(上記の場合、new Greeterが行われます。ただ、シングルトンとして扱われるためnewされるのは1回のみです)。</p>

<p>既存資産がオブジェクト指向に則りJavaScriptクラスを利用して設計されているなら、Serviceとの相性が良くなります。</p>

<h3>
<span id="provider" class="fragment"></span><a href="#provider"><i class="fa fa-link"></i></a>Provider</h3>

<p>Providerは一番汎用的なrecipeで、他のrecipeはすべてProviderの簡易記法に該当します。<br>
Factory/Serviceと異なり、<code>config</code>でも利用できるという特性がありますが、逆に言うと<code>config</code>でどうしても利用したい場合を除き使うべきでないようです。</p>

<h3>
<span id="constant" class="fragment"></span><a href="#constant"><i class="fa fa-link"></i></a>Constant</h3>

<p>Valueと同様ですが、<code>config</code>でも利用できるという特性があります。見た感じとドキュメントの位置的なものから、Providerとセットで使うような印象を受けます。普通の定数/パラメーター管理ならValueで十分でしょう。</p>

<p>上記の詳細は、公式の<a href="https://docs.angularjs.org/guide/providers" rel="nofollow noopener" target="_blank">Providers</a>を参照ください。かなり詳しく書かれています。</p>

<p>過去、FactoryとServiceどちらを使えばよいのか、ということがたびたび議論されてきましたが、<code>1.2.7</code>以降のドキュメント整備と<code>Value</code>recipeの登場により、明確に境界を引くことができるようになりました。</p>

<p><strong>値の管理ならValue、関数ならFactory、JavaScriptクラスならServiceを利用する。</strong></p>

<p>定数管理はValue、それ以外はFactoryを利用して記述しておき、Factoryで書いていたけれども一定のまとまりが出てきたもの、あるいはconstructorによる初期化処理が必要になったなどしてクラス化したくなった場合、Serviceにするというのが素直かなと思います(既に手元にJavaScriptクラス資産がある場合この限りでない)。<br>
Controllerを除くSpecialized object(directiveやfilterなど)もFactoryで実装されており、全体としてFactoryで実装するというのは筋にかなっているかなと思います。<br>
Serviceにする場合でも、上記のとおりrecipeの切り替えによる記載の変更はわずかであり、切り替えの負担はそれほどないと思います。</p>

<p>Service recipeを利用した処理のモジュール化の実例として、<a href="http://jsfiddle.net/icoxfog417/DG24c/" rel="nofollow noopener" target="_blank">サンプル</a>を作ってみました。</p>

<p>Serviceに切り出す対象の処理は、「Modelにメソッドとして実装するのも、Controllerに実装するのも適切ではない処理」ということなのでどんなサンプルにするか悩みましたが、こんな形のゲームっぽいものにしました。</p>

<p>1秒ごとに草がはえていき、牛を投入すると草を食べてくれるが5回食べるとおなか一杯で死んじゃうというものです。</p>

<p>Modelでは牛の状態(今までどれだけ草を食ったか)、Controllerでは経過秒数を管理しています。そして、経過秒数による状態の評価(草＆牛の数の計算)をServiceとして切り出しました。<br>
これをControllerで実装していたらまさに「ロジックがControllerに混在している」状態となり、かといって、牛Modelで扱うには不適当・・・なので、まさにServiceの出番なはず。</p>

<p>こんな視点でServiceをうまく使うことができれば、ゲームなどModelの状態変化が複雑に絡み合う場合でもうまく実装できると思います(そしてAngular.jsの場合単体テストが簡単になるというのもうれしいポイント)。</p>

<p>上記の３原則を覚えておけば、お前のAngular.jsはもうMVCではない・・・と言われないハズ。</p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1" style="height:150px;">
<tr>
	<td rowspan="3">53位</td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="thumb-up-120px.png" /></i>885</kbd>
		<a target="_blank" href="https://qiita.com/icoxfog417/items/3c68e1a4de7121658e29">新・三大JavaScriptフレームワークの実践(Backbone.js Knockout.js Angular.js)</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-09-15<br />21:03:09</center>
	</td>
	<td style="width:200px;">
		<!--投稿者-->
		<center>
			@<a href="user/25990.html">icoxfog417</a>(145件の記事)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/25990/profile-images/1484303516">
		</center>
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Backbone.js]</b> <b>[AngularJS]</b> <b>[knockoutjs]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<!--
		<div style="width:350px;height:150px;overflow:scroll;">%s</div>
		-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>JavaScriptフレームワークは<a href="http://codebrief.com/2012/01/the-top-10-javascript-mvc-frameworks-reviewed/" rel="nofollow noopener" target="_blank">数多い</a>が、結局どれを選んだらよいのかよくわからん、ということはよくある。</p>

<p>今回は、メジャーどころの三大フレームワークを使ってまったく同じ機能のTodoアプリを作成してみました。<br>
そのソースコードは、下記の通りjsFiddleで参照＆稼働させてみることができます。これで（きれいごとではない）クセやコード量などを感じてみてもらえればよいと思います。</p>

<table>
<thead>
<tr>
<th style="text-align: left">FW</th>
<th style="text-align: left">jsFiddle</th>
<th style="text-align: left">所感</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left">Backbone.js</td>
<td style="text-align: left"><a href="http://jsfiddle.net/icoxfog417/pfxP5/" rel="nofollow noopener" target="_blank">Todo①</a></td>
<td style="text-align: left">大規模開発向きか。簡単なアプリなら割に合わない</td>
</tr>
<tr>
<td style="text-align: left">Knockout.js</td>
<td style="text-align: left"><a href="http://jsfiddle.net/icoxfog417/sujqa/" rel="nofollow noopener" target="_blank">Todo②</a></td>
<td style="text-align: left">わかりやすい。面倒な面はあるが、不可解でドツボにはまることがあまりない</td>
</tr>
<tr>
<td style="text-align: left">Angular.js</td>
<td style="text-align: left"><a href="http://jsfiddle.net/icoxfog417/nLC3g/" rel="nofollow noopener" target="_blank">Todo③</a></td>
<td style="text-align: left">便利。ただ、自由度が高すぎて統制をかけたい場合は向かないかも</td>
</tr>
</tbody>
</table>

<p><strong>Todoリストの機能</strong><br>
1.テキストボックスから、Enterで追加できる<br>
2.登録したTodoはダブルクリックで編集可能になり、Enterで編集確定できる<br>
3.登録されているTodoの総件数がフッターに表示される<br>
4.完了したTodoがある場合、それらをリストから消すボタンが表示される<br>
5.全選択/解除を行うチェックボックスがある</p>

<h2>
<span id="個人的な結論" class="fragment"></span><a href="#%E5%80%8B%E4%BA%BA%E7%9A%84%E3%81%AA%E7%B5%90%E8%AB%96"><i class="fa fa-link"></i></a>個人的な結論</h2>

<p>趣味開発で使うならAngular.js・仕事で使うならKnockout.jsをお勧めしたい。</p>

<p>まず、フレームワークを選択する際は、以下3つの選択基準を持つとよいと思う。</p>

<p><strong>1.開発の規模</strong><br>
大規模ならBackbone.jsはお勧めできる。<br>
書き方が決まっていて、チュートリアルに目を通せば(面倒なのは置いておいて)何を作らなければならないかは簡単に理解できる。そこそこの人数で長い時間の開発を行うなら、UIチームはアプリケーションとView、サーバーサイドはModelとCollection、という感じで分業もしやすいと思う。UIバインディング型のフレームワークは性質上画面DOMありきなので、バインディング部分のモジュール化は結構頭を使う必要があると思う。</p>

<p><strong>2.フレームワークに求めるもの</strong><br>
コードを構造化したいのか、生産性を上げたいのか、両方の場合どちらの優先度が高いのかを考えるとよいと思う。<br>
生産性の向上ならUIバインディング型のKnockout.jsやAngular.jsがお勧めだ。<br>
これらは、普通に使ってて便利！と思える瞬間が多い。個人で開発する場合構造化に迫られる人はあんまりいないと思うので、そういう場合にも良い。</p>

<p><strong>3.趣味</strong><br>
使い始めるとその後拘束されることになるので、なんだかんだ言って第一印象は重要だ。今回は実際に書いたコードを掲載しているので、参考になれば。</p>

<p>以下は、所感の詳細。</p>

<h2>
<span id="backbonejs" class="fragment"></span><a href="#backbonejs"><i class="fa fa-link"></i></a>Backbone.js</h2>

<p>確かにこれを使えばJavaScriptはきれいに書ける気がする。が、手間はかなりかかる。<br>
今回Todoリストを表示するのに、まずTodoのModel、これを表示するためのView、リスト表示するためのCollection、そして最後にアプリケーション、と4つもオブジェクトを作る必要がある。<br>
将来的な使いまわしを考えるならこれが活きてくるのかもしれないが、そうするとそこそこ大規模でないと割に合わないと思う。あと「軽い」とよく言われるがその分他ライブラリ(jQuery/Underscore.js etc)に依存しているので、そこは要注意(特にjQueryはすでにプロジェクトで使っているバージョンがあったりするので)。</p>

<h2>
<span id="knockoutjs" class="fragment"></span><a href="#knockoutjs"><i class="fa fa-link"></i></a>Knockout.js</h2>

<p>わかりやすい、というのが第一印象。DOMとJavaScript側ViewModelの対応関係は見通しがよく、理解しやすい。<br>
イベント/テンプレートバインディングなど効果の実感できる機能がすぐに使え、JavaScriptフレームワークを初めて使う、またチームで展開してみたい、という時にお勧めできる。<br>
独自タグがないのでHTMLはHTMLとして完成されるのもポイントが高い(他のフレームワークは、そんな属性ない警告や不明タグ警告がそこそこ出る)・・・が、その分煩雑な記述が要求されることも多い(特にIF文)のは注意。</p>

<h2>
<span id="angularjs" class="fragment"></span><a href="#angularjs"><i class="fa fa-link"></i></a>Angular.js</h2>

<p>形としてはKnockout.jsに近いが、より簡単にかける。<br>
具体的に簡単な点としては、Knockout.jsだと単純に値を書きたい場合でも<code>&lt;span data-bind="text:hoge"&gt;&lt;/span&gt;</code>みたいな形でDOMを経由しないといけないが、Angular.jsでは<code>{{hoge}}</code>と一発でかける(ただ、逆にng-click="function(){xxx}"みたいにはかけないので、一長一短?)。<br>
今回のTodoアプリでは、選択しているのが1つなら"item"、複数なら"items"にするというようなしちめんどくさい機能があるのだが、こういう細かい実装があるときこの差が結構出てくる。</p>

<p>ただ、自由に書ける反面統制がききにくそうで、そこは注意が必要と感じた。チームで使うなら、Model定義とtemplateについては要ルール整備と思う→カオスにならないためということで、<a href="http://qiita.com/icoxfog417/items/2ac773c33a8b34288551" id="reference-0324f77939e3923fc6a2">まとめました</a>。<br>
また、Backbone.jsにおけるUnderscore.js、Knockoutにおけるko.utilsみたいなサポートライブラリがないので、「配列から画面で選択された要素を削除する」みたいな簡単な処理でも書くのが面倒なことがある(今回のTodoリストでも・・・)。</p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1" style="height:150px;">
<tr>
	<td rowspan="3">54位</td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="thumb-up-120px.png" /></i>879</kbd>
		<a target="_blank" href="https://qiita.com/xtetsuji/items/555a1ef19ed21ee42873">GitHubでFork/cloneしたリポジトリを本家リポジトリに追従する</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-04-11<br />23:42:52</center>
	</td>
	<td style="width:200px;">
		<!--投稿者-->
		<center>
			@<a href="user/8760.html">xtetsuji</a>(43件の記事)<br />(Gaiax Co.Ltd. 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/8760/profile-images/1473681145">
		</center>
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Git]</b> <b>[GitHub]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<!--
		<div style="width:350px;height:150px;overflow:scroll;">%s</div>
		-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>(興味深い手法があれば随時追加していきます at 2013/04/11)</p>

<p>ネットを検索すると、色々な手法が出てきますが、自分としては<a href="http://www.amazon.co.jp/dp/4774156167?tag=tetsujijp-22" rel="nofollow noopener" target="_blank">「WEB+DB PRESS plus 開発ツール徹底攻略」</a>p.71 に載っていた以下の手法がシンプルで良く理解できました。</p>

<p>本家リポジトリの例として、実際にGitHubに存在する練習用リポジトリ <code>git@github.com:DQNEO/Renshu.git</code> を使います</p>

<p>あなた (<em>youraccount</em>) が既にForkしているRenshuリポジトリをcloneします。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ git clone git@github.com:youraccount/Renshu.git
Cloning into 'Renshu'...
remote: Counting objects: 109, done.
remote: Compressing objects: 100% (70/70), done.
remote: Total 109 (delta 15), reused 109 (delta 15)
Receiving objects: 100% (109/109), 12.34 KiB, done.
Resolving deltas: 100% (15/15), done.    
$ cd Renshu
</pre></div></div>

<p>ブランチは以下のような状態になっているはずです (他にもあるかもしれません)。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ git branch -a 
* master
  remotes/origin/HEAD -&gt; origin/master
  remotes/origin/master
</pre></div></div>

<p>リモートリポジトリとして、オリジナルのリポジトリを <strong>upstream</strong> という名前で設定します。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ git remote add upstream git://github.com/DQNEO/Renshu.git
</pre></div></div>

<p>以後、このリポジトリは <strong>upstream</strong> という名前で本家リポジトリを参照します。一度設定すれば再設定の必要は無いようです。</p>

<p>ブランチを確認すると、以下のように remotes/upstream/master が加わったことが分かります。環境によっては後述の <code>git fetch upstream</code> の操作を行った後で出てくる場合もありますので、出てこない場合には <code>git fetch upstream</code> を試した後に再度 <code>git branch -a</code> で確認してみてください。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ git branch -a
* master
  remotes/origin/HEAD -&gt; origin/master
  remotes/origin/master
  remotes/upstream/master
</pre></div></div>

<p>本家リポジトリの変更を取り出すためには <strong>fetch</strong> と <strong>merge</strong> の手順を取ります。</p>

<p>まずfetch</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ git fetch upstream
remote: Counting objects: 1, done.
remote: Total 1 (delta 0), reused 1 (delta 0)
Unpacking objects: 100% (1/1), done.
From git://github.com/DQNEO/Renshu
 * [new branch]      develop    -&gt; upstream/develop
 * [new branch]      master     -&gt; upstream/master
</pre></div></div>

<p>そしてmerge</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ git merge upstream/master
Updating fe579f8..a1e70ae
Fast-forward
</pre></div></div>

<p>変更が無い場合には "Already up-to-date." と表示されて終わりです。今回は差分があったので、コミットIDがfe579f8からa1e70aeまでの差分がmergeされました。</p>

<p>詳細は<a href="http://www.amazon.co.jp/dp/4774156167?tag=tetsujijp-22" rel="nofollow noopener" target="_blank">当該書籍</a>を参照ください。</p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1" style="height:150px;">
<tr>
	<td rowspan="3">55位</td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="thumb-up-120px.png" /></i>872</kbd>
		<a target="_blank" href="https://qiita.com/maccotsan/items/d51c992a20385427e689">エンジニアのための配色まとめ</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2014-03-02<br />06:17:06</center>
	</td>
	<td style="width:200px;">
		<!--投稿者-->
		<center>
			@<a href="user/3860.html">maccotsan</a>(35件の記事)<br />(None 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/3860/profile-images/1473683611">
		</center>
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[配色]</b> <b>[Webデザイン]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<!--
		<div style="width:350px;height:150px;overflow:scroll;">%s</div>
		-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>自分用のまとめです。</p>

<h2>
<span id="色彩の三属性" class="fragment"></span><a href="#%E8%89%B2%E5%BD%A9%E3%81%AE%E4%B8%89%E5%B1%9E%E6%80%A7"><i class="fa fa-link"></i></a>色彩の三属性</h2>

<p>色は彩度・明度・色相の三属性（三要素とも呼ぶ）から成り立っている。</p>

<h3>
<span id="1色相" class="fragment"></span><a href="#1%E8%89%B2%E7%9B%B8"><i class="fa fa-link"></i></a>1.色相</h3>

<ul>
<li>色味の違いのこと。</li>
<li>同じ赤でも赤紫・黄みの赤などがあるように、色相の数は無数に存在。</li>
</ul>

<h4>
<span id="色相環" class="fragment"></span><a href="#%E8%89%B2%E7%9B%B8%E7%92%B0"><i class="fa fa-link"></i></a>色相環</h4>

<p><a href="https://camo.qiitausercontent.com/13ae3e9b467cf3887fe36c7729f7de9b572887cc/687474703a2f2f75706c6f61642e77696b696d656469612e6f72672f77696b6970656469612f636f6d6d6f6e732f642f64622f484c53436f6c6f7253706163652e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/13ae3e9b467cf3887fe36c7729f7de9b572887cc/687474703a2f2f75706c6f61642e77696b696d656469612e6f72672f77696b6970656469612f636f6d6d6f6e732f642f64622f484c53436f6c6f7253706163652e706e67" alt="色相 - Wikipedia" title="色相 - Wikipedia" data-canonical-src="http://upload.wikimedia.org/wikipedia/commons/d/db/HLSColorSpace.png"></a><br>
<em>via <a href="http://upload.wikimedia.org/wikipedia/commons/d/db/HLSColorSpace.png" rel="nofollow noopener" target="_blank">色相 - Wikipedia</a></em></p>

<ul>
<li>赤、黄、緑、青、紫といった色を、順序立てて並べた図。</li>
<li>それぞれ色の反対側に補色がくるように作られている。</li>
<li>虹と同じ。</li>
</ul>

<h4>
<span id="類似色" class="fragment"></span><a href="#%E9%A1%9E%E4%BC%BC%E8%89%B2"><i class="fa fa-link"></i></a>類似色</h4>

<ul>
<li>色相環の隣り合う色のこと。</li>
</ul>

<h4>
<span id="補色" class="fragment"></span><a href="#%E8%A3%9C%E8%89%B2"><i class="fa fa-link"></i></a>補色</h4>

<ul>
<li>色相環において、反対側に存在する色同士のこと。</li>
<li>補色同士の関係は、お互いを引き立てる効果がある。</li>
<li>純色や、明度の同じ補色同士を組み合わせると、お互いが主張しすぎてハレーションを起こし見づらくなるので注意する。</li>
</ul>

<h3>
<span id="2彩度" class="fragment"></span><a href="#2%E5%BD%A9%E5%BA%A6"><i class="fa fa-link"></i></a>2.彩度</h3>

<p>色の鮮やかさの度合い。</p>

<p><a href="https://camo.qiitausercontent.com/7d55029f73c806ed440230e67c70682f168ce1a0/687474703a2f2f7777772e77656263726561746f72626f782e636f6d2f77702d636f6e74656e742f75706c6f6164732f323031302f30332f73617475726174696f6e2e6a7067" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/7d55029f73c806ed440230e67c70682f168ce1a0/687474703a2f2f7777772e77656263726561746f72626f782e636f6d2f77702d636f6e74656e742f75706c6f6164732f323031302f30332f73617475726174696f6e2e6a7067" alt="配色パターンからWebデザインを考える | Webクリエイターボックス" title="配色パターンからWebデザインを考える | Webクリエイターボックス" data-canonical-src="http://www.webcreatorbox.com/wp-content/uploads/2010/03/saturation.jpg"></a><br>
<em>via <a href="http://www.webcreatorbox.com/wp-content/uploads/2010/03/saturation.jpg" rel="nofollow noopener" target="_blank">配色パターンからWebデザインを考える | Webクリエイターボックス</a></em></p>

<table>
<thead>
<tr>
<th style="text-align: left">彩度</th>
<th>特徴</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left">高い</td>
<td>派手・華やか・目立つ</td>
</tr>
<tr>
<td style="text-align: left">低い</td>
<td>地味・おだやか・上品</td>
</tr>
</tbody>
</table>

<h4>
<span id="無彩色" class="fragment"></span><a href="#%E7%84%A1%E5%BD%A9%E8%89%B2"><i class="fa fa-link"></i></a>無彩色</h4>

<ul>
<li>白と黒との混合で得られる色（白と黒自体も含む）の総称。</li>
<li>白・黒・さまざまな濃度の灰色が含まれる。</li>
<li>彩度が0であることを表す。</li>
<li>無彩色でない色は、有彩色である。</li>
</ul>

<p><a href="https://camo.qiitausercontent.com/e6b8bcba6fa53f11096a3a53a60fb44bbd763c0f/687474703a2f2f752e6a696d646f2e636f6d2f77777735362f6f2f73653662333833346131633239623265642f696d672f69636162313130383234616237303539662f313330373334343935332f7374642f696d6167652e676966" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/e6b8bcba6fa53f11096a3a53a60fb44bbd763c0f/687474703a2f2f752e6a696d646f2e636f6d2f77777735362f6f2f73653662333833346131633239623265642f696d672f69636162313130383234616237303539662f313330373334343935332f7374642f696d6167652e676966" alt="写真技術　色と陰影（手代木さんblogより） - 写真技術と光への道でフォトディレクション-Jimdo撮影編" title="写真技術　色と陰影（手代木さんblogより） - 写真技術と光への道でフォトディレクション-Jimdo撮影編" data-canonical-src="http://u.jimdo.com/www56/o/se6b3834a1c29b2ed/img/icab110824ab7059f/1307344953/std/image.gif"></a><br>
<em>via <a href="http://u.jimdo.com/www56/o/se6b3834a1c29b2ed/img/icab110824ab7059f/1307344953/std/image.gif" rel="nofollow noopener" target="_blank">写真技術　色と陰影（手代木さんblogより） - 写真技術と光への道でフォトディレクション-Jimdo撮影編</a></em></p>

<h4>
<span id="有彩色" class="fragment"></span><a href="#%E6%9C%89%E5%BD%A9%E8%89%B2"><i class="fa fa-link"></i></a>有彩色</h4>

<ul>
<li>白、黒、灰色以外の色味を持った色のこと。</li>
<li>有彩色にはさらに、純色、清色、中間色に分類される。</li>
</ul>

<p>以下のような図を、 <strong>等色相面</strong> と言う。</p>

<p><a href="https://camo.qiitausercontent.com/c71f3b825d155cfed0634708b61e38faadaf889f/687474703a2f2f7777772e6e6f696564657369676e2e636f6d2f636f6e74656e74732f77702f77702d636f6e74656e742f75706c6f6164732f323031332f30372f65326332306334643662323935616530623032383836323233646330663233302e6a7067" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/c71f3b825d155cfed0634708b61e38faadaf889f/687474703a2f2f7777772e6e6f696564657369676e2e636f6d2f636f6e74656e74732f77702f77702d636f6e74656e742f75706c6f6164732f323031332f30372f65326332306334643662323935616530623032383836323233646330663233302e6a7067" alt="純色、清色、中間色｜株式会社ノイエデザイン" title="純色、清色、中間色｜株式会社ノイエデザイン" data-canonical-src="http://www.noiedesign.com/contents/wp/wp-content/uploads/2013/07/e2c20c4d6b295ae0b02886223dc0f230.jpg"></a><br>
<em>via <a href="http://www.noiedesign.com/contents/wp/wp-content/uploads/2013/07/e2c20c4d6b295ae0b02886223dc0f230.jpg" rel="nofollow noopener" target="_blank">純色、清色、中間色｜株式会社ノイエデザイン</a></em></p>

<h5>
<span id="純色" class="fragment"></span><a href="#%E7%B4%94%E8%89%B2"><i class="fa fa-link"></i></a>純色</h5>

<ul>
<li>各色相において、最も彩度が高い色。</li>
<li>ただし、色空間によっては純色以外にも彩度が最大になる色がある。</li>
</ul>

<h5>
<span id="清色" class="fragment"></span><a href="#%E6%B8%85%E8%89%B2"><i class="fa fa-link"></i></a>清色</h5>

<ul>
<li>清色はさらに、明清色、暗清色に分類される。</li>
<li>清色にはくすんだ印象がなく、濁りがない色という特徴がある。</li>
</ul>

<h6>
<span id="明清色" class="fragment"></span><a href="#%E6%98%8E%E6%B8%85%E8%89%B2"><i class="fa fa-link"></i></a>明清色</h6>

<ul>
<li>純色に白だけを加えた色。</li>
<li>ピンクや水色など</li>
</ul>

<h6>
<span id="暗清色" class="fragment"></span><a href="#%E6%9A%97%E6%B8%85%E8%89%B2"><i class="fa fa-link"></i></a>暗清色</h6>

<ul>
<li>純色に黒だけを加えた色。</li>
<li>紺色や茶色など</li>
</ul>

<h5>
<span id="中間色濁色" class="fragment"></span><a href="#%E4%B8%AD%E9%96%93%E8%89%B2%E6%BF%81%E8%89%B2"><i class="fa fa-link"></i></a>中間色（濁色）</h5>

<ul>
<li>純色に灰色を加えた色。</li>
<li>ベージュやオリーブグリーンなど</li>
</ul>

<h3>
<span id="3明度" class="fragment"></span><a href="#3%E6%98%8E%E5%BA%A6"><i class="fa fa-link"></i></a>3.明度</h3>

<p>色の明るさの度合い。</p>

<p><a href="https://camo.qiitausercontent.com/4aa5b236d85dfa85b1fa59daa91f1b3bdf3ef5e4/687474703a2f2f7777772e77656263726561746f72626f782e636f6d2f77702d636f6e74656e742f75706c6f6164732f323031302f30332f76616c75652e6a7067" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/4aa5b236d85dfa85b1fa59daa91f1b3bdf3ef5e4/687474703a2f2f7777772e77656263726561746f72626f782e636f6d2f77702d636f6e74656e742f75706c6f6164732f323031302f30332f76616c75652e6a7067" alt="配色パターンからWebデザインを考える | Webクリエイターボックス" title="配色パターンからWebデザインを考える | Webクリエイターボックス" data-canonical-src="http://www.webcreatorbox.com/wp-content/uploads/2010/03/value.jpg"></a><br>
<em>via <a href="http://www.webcreatorbox.com/wp-content/uploads/2010/03/value.jpg" rel="nofollow noopener" target="_blank">配色パターンからWebデザインを考える | Webクリエイターボックス</a></em></p>

<table>
<thead>
<tr>
<th style="text-align: left">明度</th>
<th>特徴</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left">高い</td>
<td>明るい、さわやか、爽快、清潔感のある</td>
</tr>
<tr>
<td style="text-align: left">低い</td>
<td>暗い、重厚、落ち着いた、高級感</td>
</tr>
</tbody>
</table>

<h4>
<span id="tipsコントラストを意識する" class="fragment"></span><a href="#tips%E3%82%B3%E3%83%B3%E3%83%88%E3%83%A9%E3%82%B9%E3%83%88%E3%82%92%E6%84%8F%E8%AD%98%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>Tips:コントラストを意識する</h4>

<p><a href="https://camo.qiitausercontent.com/b2aadcb068ea4b164626e98d4ceba23ee658da5b/687474703a2f2f737461742e616d6562612e6a702f757365725f696d616765732f32303134303231392f31302f63612d31706978656c2f64332f34612f702f6f303630303034323931323835313230303535322e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/b2aadcb068ea4b164626e98d4ceba23ee658da5b/687474703a2f2f737461742e616d6562612e6a702f757365725f696d616765732f32303134303231392f31302f63612d31706978656c2f64332f34612f702f6f303630303034323931323835313230303535322e706e67" alt="色を色で見ないで｜1 pixel｜サイバーエージェント公式クリエイターズブログ" title="色を色で見ないで｜1 pixel｜サイバーエージェント公式クリエイターズブログ" data-canonical-src="http://stat.ameba.jp/user_images/20140219/10/ca-1pixel/d3/4a/p/o0600042912851200552.png"></a><br>
<em>via <a href="http://stat.ameba.jp/user_images/20140219/10/ca-1pixel/d3/4a/p/o0600042912851200552.png" rel="nofollow noopener" target="_blank">色を色で見ないで｜1 pixel｜サイバーエージェント公式クリエイターズブログ</a></em></p>

<blockquote>
<p>モチーフの『構造』を理解し、『本質』を見抜く。<br>
<em>via <a href="http://ameblo.jp/ca-1pixel/entry-11770516521.html" rel="nofollow noopener" target="_blank">色を色で見ないで｜1 pixel｜サイバーエージェント公式クリエイターズブログ</a></em></p>
</blockquote>

<h4>
<span id="色によって感じる明るさの違い" class="fragment"></span><a href="#%E8%89%B2%E3%81%AB%E3%82%88%E3%81%A3%E3%81%A6%E6%84%9F%E3%81%98%E3%82%8B%E6%98%8E%E3%82%8B%E3%81%95%E3%81%AE%E9%81%95%E3%81%84"><i class="fa fa-link"></i></a>色によって感じる明るさの違い</h4>

<ul>
<li>暖色系(黄色等)の色は明るく見え、寒色系（紺等）の色は暗く見える。</li>
</ul>

<p><a href="https://camo.qiitausercontent.com/fb3e333f3b6bd7dc9f2fc41aa7bb24b06d5a4d8f/687474703a2f2f696d6167652e736c696465736861726563646e2e636f6d2f72616e646f6d2d3131303832353035343732302d70687061707030312f39352f736c6964652d392d3732382e6a70673f63623d31333134323639333631" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/fb3e333f3b6bd7dc9f2fc41aa7bb24b06d5a4d8f/687474703a2f2f696d6167652e736c696465736861726563646e2e636f6d2f72616e646f6d2d3131303832353035343732302d70687061707030312f39352f736c6964652d392d3732382e6a70673f63623d31333134323639333631" alt="配色が苦手でも、これを読めばスキルアップできるおすすめスライド6選。 | Handy Web Design" title="配色が苦手でも、これを読めばスキルアップできるおすすめスライド6選。 | Handy Web Design" data-canonical-src="http://image.slidesharecdn.com/random-110825054720-phpapp01/95/slide-9-728.jpg?cb=1314269361"></a><br>
<em>via <a href="http://image.slidesharecdn.com/random-110825054720-phpapp01/95/slide-9-728.jpg?cb=1314269361" rel="nofollow noopener" target="_blank">配色が苦手でも、これを読めばスキルアップできるおすすめスライド6選。 | Handy Web Design</a></em></p>

<h6>
<span id="ナチュラルハーモニー" class="fragment"></span><a href="#%E3%83%8A%E3%83%81%E3%83%A5%E3%83%A9%E3%83%AB%E3%83%8F%E3%83%BC%E3%83%A2%E3%83%8B%E3%83%BC"><i class="fa fa-link"></i></a>ナチュラルハーモニー</h6>

<ul>
<li>配色のうち明るい方に黄色に近い色を採用し、暗い方に青色に近い色を採用すること。</li>
</ul>

<h6>
<span id="コンプレックスハーモニー" class="fragment"></span><a href="#%E3%82%B3%E3%83%B3%E3%83%97%E3%83%AC%E3%83%83%E3%82%AF%E3%82%B9%E3%83%8F%E3%83%BC%E3%83%A2%E3%83%8B%E3%83%BC"><i class="fa fa-link"></i></a>コンプレックスハーモニー</h6>

<ul>
<li>配色のうち明るい方に青色に近い色を、暗い方に黄色に近い色を配色すること。</li>
<li>コンプレックスハーモニーは、違和感を与える配色になるので気をつけて使う必要があるが、モダンな印象を与えることも。</li>
</ul>

<h2>
<span id="色調トーン" class="fragment"></span><a href="#%E8%89%B2%E8%AA%BF%E3%83%88%E3%83%BC%E3%83%B3"><i class="fa fa-link"></i></a>色調（トーン）</h2>

<p><a href="https://camo.qiitausercontent.com/ccba7f20e52f938ae3458186e623a508072e921a/687474703a2f2f7777772e73696b696b656e2e636f2e6a702f706363732f6669672f70636373746f6e652e6a7067" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/ccba7f20e52f938ae3458186e623a508072e921a/687474703a2f2f7777772e73696b696b656e2e636f2e6a702f706363732f6669672f70636373746f6e652e6a7067" alt="日本色研事業株式会社　HomePage" title="日本色研事業株式会社　HomePage" data-canonical-src="http://www.sikiken.co.jp/pccs/fig/pccstone.jpg"></a><br>
<em>via <a href="http://www.sikiken.co.jp/pccs/fig/pccstone.jpg" rel="nofollow noopener" target="_blank">日本色研事業株式会社　HomePage</a></em></p>

<ul>
<li>３属性の組み合わせ</li>
<li>配色とは、トーンとトーンの組み合わせのこと。</li>
<li>色相、彩度、明度のうち、彩度と明度から色を分けたもの。</li>
<li>一つの色に対して、彩度や明度の差で様々な色のパターンが作れる。（「色調/トーンが違う」と表現）</li>
<li>色調から色の組み合わせを選択する場合、明るめの色と暗めの色を選択するとコントラストの差によって視認性が高くなる。</li>
<li>逆にコントラストの差が少ないものを選択すると、視認性が低くなる。</li>
</ul>

<h2>
<span id="寒色暖色中性色" class="fragment"></span><a href="#%E5%AF%92%E8%89%B2%E6%9A%96%E8%89%B2%E4%B8%AD%E6%80%A7%E8%89%B2"><i class="fa fa-link"></i></a>寒色、暖色、中性色</h2>

<h3>
<span id="寒色" class="fragment"></span><a href="#%E5%AF%92%E8%89%B2"><i class="fa fa-link"></i></a>寒色</h3>

<ul>
<li>見た時に冷たさを感じる色</li>
<li>青、青緑、青紫</li>
<li>陰気、鎮静</li>
<li>後退色（奥に引っ込んで見える）</li>
</ul>

<h3>
<span id="暖色" class="fragment"></span><a href="#%E6%9A%96%E8%89%B2"><i class="fa fa-link"></i></a>暖色</h3>

<ul>
<li>見た時に温かみを感じる色</li>
<li>赤紫・赤・オレンジ・黄色</li>
<li>陽気、興奮、リラックス</li>
<li>進出色（前に出て見える）</li>
</ul>

<p><a href="https://camo.qiitausercontent.com/95cd09407b6926ec7880d02612efad602ab10c45/687474703a2f2f68616e647977656264657369676e2e6e65742f77702d636f6e74656e742f75706c6f6164732f323031322f30372f3037303930392e6a7067" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/95cd09407b6926ec7880d02612efad602ab10c45/687474703a2f2f68616e647977656264657369676e2e6e65742f77702d636f6e74656e742f75706c6f6164732f323031322f30372f3037303930392e6a7067" alt="１２色の色が与える印象について。配色に困った時のいろいろ。 | Handy Web Design" title="１２色の色が与える印象について。配色に困った時のいろいろ。 | Handy Web Design" data-canonical-src="http://handywebdesign.net/wp-content/uploads/2012/07/070909.jpg"></a><br>
<em>via <a href="http://handywebdesign.net/wp-content/uploads/2012/07/070909.jpg" rel="nofollow noopener" target="_blank">１２色の色が与える印象について。配色に困った時のいろいろ。 | Handy Web Design</a></em></p>

<h3>
<span id="中性色" class="fragment"></span><a href="#%E4%B8%AD%E6%80%A7%E8%89%B2"><i class="fa fa-link"></i></a>中性色</h3>

<ul>
<li>黄緑、緑、紫</li>
</ul>

<h4>
<span id="中間色" class="fragment"></span><a href="#%E4%B8%AD%E9%96%93%E8%89%B2"><i class="fa fa-link"></i></a>中間色</h4>

<blockquote>
<p>一方、『中間色』とは、考えのまったく異なる色を指す名前で、【グレー(灰色）を含んだ鈍い色調の一連の色】を指しています。したがって、グレーを加えていけば、暖色系も寒色系も中性色も『中間色』となるのです。<br>
<em>via <a href="http://blog.livedoor.jp/questions2/archives/52438341.html" rel="nofollow noopener" target="_blank">色彩　Question and Answer:中性色と中間色の違いは？ - livedoor Blog（ブログ）</a></em></p>
</blockquote>

<h2>
<span id="混色" class="fragment"></span><a href="#%E6%B7%B7%E8%89%B2"><i class="fa fa-link"></i></a>混色</h2>

<ul>
<li>混色には大きく分けて加法混色と減法混色がある。</li>
<li>色には光の３原色（RGB)と色の３原色（CMY）がある。</li>
<li>WEBデザインはRGBで、DTPはCMYKを使って配色を決めるのが一般的。</li>
</ul>

<p><a href="https://camo.qiitausercontent.com/61d5f4d4e253146a5b8b25514aab23469f23b31d/687474703a2f2f7777772e73696b696b656e2e636f2e6a702f636f6c6f72732f6669672d632f6b6f6e73686f6b752d312e6a7067" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/61d5f4d4e253146a5b8b25514aab23469f23b31d/687474703a2f2f7777772e73696b696b656e2e636f2e6a702f636f6c6f72732f6669672d632f6b6f6e73686f6b752d312e6a7067" alt="日本色研事業株式会社　HomePage" title="日本色研事業株式会社　HomePage" data-canonical-src="http://www.sikiken.co.jp/colors/fig-c/konshoku-1.jpg"></a><br>
<em>via <a href="http://www.sikiken.co.jp/colors/fig-c/konshoku-1.jpg" rel="nofollow noopener" target="_blank">日本色研事業株式会社　HomePage</a></em></p>

<h3>
<span id="加法混色" class="fragment"></span><a href="#%E5%8A%A0%E6%B3%95%E6%B7%B7%E8%89%B2"><i class="fa fa-link"></i></a>加法混色</h3>

<p>加法混色には、同時加法混色、併置加法混色、継時加法混色がある。</p>

<h4>
<span id="同時加法混色" class="fragment"></span><a href="#%E5%90%8C%E6%99%82%E5%8A%A0%E6%B3%95%E6%B7%B7%E8%89%B2"><i class="fa fa-link"></i></a>同時加法混色</h4>

<ul>
<li>加法混色の３原色 = ＲＧＢ（レッド・グリーン・ブルーの３色）</li>
<li>基本は黒でそこに色を足していくことで特定の色を表す。</li>
<li>全てが重なった状態が白になる。</li>
<li>テレビなどの電子機器に使われる。</li>
<li>RGB色空間は可視光空間なので色域が広く、彩度が高い。（放っておくと高彩度の配色になりやすく、難易度が高い）</li>
</ul>

<h4>
<span id="併置加法混色" class="fragment"></span><a href="#%E4%BD%B5%E7%BD%AE%E5%8A%A0%E6%B3%95%E6%B7%B7%E8%89%B2"><i class="fa fa-link"></i></a>併置加法混色</h4>

<ul>
<li>小さな色点を高密度で並べることで起きる混色。</li>
<li>モザイク画や点描画、織物などに使われる。</li>
<li>離れたところから見ると混色された絵として見ることができる。</li>
</ul>

<p><a href="https://camo.qiitausercontent.com/4a162434d3c4f1eb6825e3eef420b235ecd91049/687474703a2f2f726f636b37372e6663327765622e636f6d2f6d61696e2f636f6c6f722f636f6c6f72312d362e66696c65732f6865697469312e676966" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/4a162434d3c4f1eb6825e3eef420b235ecd91049/687474703a2f2f726f636b37372e6663327765622e636f6d2f6d61696e2f636f6c6f722f636f6c6f72312d362e66696c65732f6865697469312e676966" alt="混色│色彩学講座" title="混色│色彩学講座" data-canonical-src="http://rock77.fc2web.com/main/color/color1-6.files/heiti1.gif"></a><br>
<em>via <a href="http://rock77.fc2web.com/main/color/color1-6.files/heiti1.gif" rel="nofollow noopener" target="_blank">混色│色彩学講座</a></em></p>

<h4>
<span id="継時加法混色回転混色" class="fragment"></span><a href="#%E7%B6%99%E6%99%82%E5%8A%A0%E6%B3%95%E6%B7%B7%E8%89%B2%E5%9B%9E%E8%BB%A2%E6%B7%B7%E8%89%B2"><i class="fa fa-link"></i></a>継時加法混色（回転混色）</h4>

<ul>
<li>塗り分けた円板を高速で回転させると異なる一つの色に見える。</li>
</ul>

<p><a href="https://camo.qiitausercontent.com/3e0073f41b62bb46e5e7a8d0fbe71a9ab81febd2/687474703a2f2f696c6c7573747261746f722d6f6b2e636f6d2f696c6c7573747261746f725f6b6f7a612f636f6c6f722f636f6c6f725f61737365742f6f7374776173645f6b616974656e6b6f6e676f2e676966" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/3e0073f41b62bb46e5e7a8d0fbe71a9ab81febd2/687474703a2f2f696c6c7573747261746f722d6f6b2e636f6d2f696c6c7573747261746f725f6b6f7a612f636f6c6f722f636f6c6f725f61737365742f6f7374776173645f6b616974656e6b6f6e676f2e676966" alt="Illustrator基礎講座-カラー" title="Illustrator基礎講座-カラー" data-canonical-src="http://illustrator-ok.com/illustrator_koza/color/color_asset/ostwasd_kaitenkongo.gif"></a><br>
<em>via <a href="http://illustrator-ok.com/illustrator_koza/color/color_asset/ostwasd_kaitenkongo.gif" rel="nofollow noopener" target="_blank">Illustrator基礎講座-カラー</a></em></p>

<h3>
<span id="減法混色" class="fragment"></span><a href="#%E6%B8%9B%E6%B3%95%E6%B7%B7%E8%89%B2"><i class="fa fa-link"></i></a>減法混色</h3>

<ul>
<li>減法混色の3原色 = ＣＭＹ（シアン・マゼンタ・イエロー）</li>
<li>基本は白でそこに色を足していくことで特定の色を表す。</li>
<li>全てが重なった状態が黒になる。</li>
<li>印刷物等に使われる。</li>
</ul>

<h4>
<span id="ｃｍｙｋ" class="fragment"></span><a href="#%EF%BD%83%EF%BD%8D%EF%BD%99%EF%BD%8B"><i class="fa fa-link"></i></a>ＣＭＹＫ</h4>

<blockquote>
<p>ＣＭＹの３色で作った黒は完全な黒とは色味が違うため、別にＫ（ブラック）という黒専用のものが用意されています。これは印刷の基本となるプロセスカラー（４つの色）と呼ばれていて、ＣＭＹＫと表現します。ちなみにブラックがBじゃなくてKなのは、ＢはBlue（青）を表すためです。<br>
<em>via <a href="http://handywebdesign.net/2012/07/12colors-give-you-the-impression/" rel="nofollow noopener" target="_blank">１２色の色が与える印象について。配色に困った時のいろいろ。 | Handy Web Design</a></em></p>
</blockquote>

<h2>
<span id="色立体" class="fragment"></span><a href="#%E8%89%B2%E7%AB%8B%E4%BD%93"><i class="fa fa-link"></i></a>色立体</h2>

<ul>
<li>色相、明度、彩度の全ての要素の色の変化を表す3次元の図。</li>
</ul>

<p><a href="https://camo.qiitausercontent.com/5388ac295f8ea1688960456e5487195e49ab6879/687474703a2f2f67632e7366632e6b65696f2e61632e6a702f636c6173732f323030355f31343633302f736c696465732f30352f696d672f3131302e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/5388ac295f8ea1688960456e5487195e49ab6879/687474703a2f2f67632e7366632e6b65696f2e61632e6a702f636c6173732f323030355f31343633302f736c696465732f30352f696d672f3131302e706e67" alt="5.13　マンセル色立体" title="5.13　マンセル色立体" data-canonical-src="http://gc.sfc.keio.ac.jp/class/2005_14630/slides/05/img/110.png"></a><br>
<em>via <a href="http://gc.sfc.keio.ac.jp/class/2005_14630/slides/05/img/110.png" rel="nofollow noopener" target="_blank">5.13　マンセル色立体</a></em></p>

<h2>
<span id="表色系" class="fragment"></span><a href="#%E8%A1%A8%E8%89%B2%E7%B3%BB"><i class="fa fa-link"></i></a>表色系</h2>

<ul>
<li>色立体に色を配置するときの基本ルール。</li>
<li>表色系には、混色系と顕色系がある。</li>
</ul>

<h3>
<span id="混色系" class="fragment"></span><a href="#%E6%B7%B7%E8%89%B2%E7%B3%BB"><i class="fa fa-link"></i></a>混色系</h3>

<ul>
<li>色や光の三原色を混ぜ合わせて表現。</li>
<li>RGB（HSB/HSV）やCMY、XYZ表色系など</li>
<li>機械向き</li>
</ul>

<h3>
<span id="顕色系" class="fragment"></span><a href="#%E9%A1%95%E8%89%B2%E7%B3%BB"><i class="fa fa-link"></i></a>顕色系</h3>

<ul>
<li>色相、彩度、明度で表現。</li>
<li>マンセル表色系やPCCSなど</li>
<li>人間向き</li>
</ul>

<h4>
<span id="マンセル色空間" class="fragment"></span><a href="#%E3%83%9E%E3%83%B3%E3%82%BB%E3%83%AB%E8%89%B2%E7%A9%BA%E9%96%93"><i class="fa fa-link"></i></a>マンセル色空間</h4>

<ul>
<li>顔料ベースの減法混色。</li>
<li>必然的に彩度がほどよく抑えられるため、調和のとれた色を選びやすい。</li>
<li>向かい合わせになっている色同士が物理補色の関係になっている。</li>
<li>つまり、色を混ぜ合わせれば無彩色になる。</li>
</ul>

<h4>
<span id="pccs日本色研配色体系" class="fragment"></span><a href="#pccs%E6%97%A5%E6%9C%AC%E8%89%B2%E7%A0%94%E9%85%8D%E8%89%B2%E4%BD%93%E7%B3%BB"><i class="fa fa-link"></i></a>PCCS（日本色研配色体系）</h4>

<ul>
<li>色彩調和を目的に作られた（配色向き）</li>
<li>Hue（色相）+ Tone（トーン）で色を表す = <strong>ヒュートーンシステム</strong>
</li>
<li>向かい合わせになっている色同士が心理補色の関係になっている。</li>
<li>つまり、互いに残像として見ることのできる補色対。</li>
</ul>

<h2>
<span id="和色" class="fragment"></span><a href="#%E5%92%8C%E8%89%B2"><i class="fa fa-link"></i></a>和色</h2>

<blockquote>
<p>和風なデザインにする場合、黒・白・赤を基準に彩度の低い色がプラスされることが多いです。「和風にしたいからとりあえず彩度下げとけー」って考えもあながち間違っていないかも。。<br>
<em>via <a href="http://www.webcreatorbox.com/tech/web-design-color-scheme/" rel="nofollow noopener" target="_blank">配色パターンからWebデザインを考える | Webクリエイターボックス</a></em></p>
</blockquote>

<h2>
<span id="視認性を高める" class="fragment"></span><a href="#%E8%A6%96%E8%AA%8D%E6%80%A7%E3%82%92%E9%AB%98%E3%82%81%E3%82%8B"><i class="fa fa-link"></i></a>視認性を高める</h2>

<p><a href="https://camo.qiitausercontent.com/b5eb2e208ff3d9ef07a81d74ddbfcbd01cf0e3a9/687474703a2f2f68616e647977656264657369676e2e6e65742f77702d636f6e74656e742f75706c6f6164732f323031322f30372f3037303930372e6a7067" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/b5eb2e208ff3d9ef07a81d74ddbfcbd01cf0e3a9/687474703a2f2f68616e647977656264657369676e2e6e65742f77702d636f6e74656e742f75706c6f6164732f323031322f30372f3037303930372e6a7067" alt="１２色の色が与える印象について。配色に困った時のいろいろ。 | Handy Web Design" title="１２色の色が与える印象について。配色に困った時のいろいろ。 | Handy Web Design" data-canonical-src="http://handywebdesign.net/wp-content/uploads/2012/07/070907.jpg"></a><br>
<em>via <a href="http://handywebdesign.net/wp-content/uploads/2012/07/070907.jpg" rel="nofollow noopener" target="_blank">１２色の色が与える印象について。配色に困った時のいろいろ。 | Handy Web Design</a></em></p>

<h2>
<span id="誘目性を高める" class="fragment"></span><a href="#%E8%AA%98%E7%9B%AE%E6%80%A7%E3%82%92%E9%AB%98%E3%82%81%E3%82%8B"><i class="fa fa-link"></i></a>誘目性を高める</h2>

<ul>
<li>赤〜黄色の彩度の高い色</li>
<li>明度差をつける</li>
</ul>

<h2>
<span id="対比現象と同化現象" class="fragment"></span><a href="#%E5%AF%BE%E6%AF%94%E7%8F%BE%E8%B1%A1%E3%81%A8%E5%90%8C%E5%8C%96%E7%8F%BE%E8%B1%A1"><i class="fa fa-link"></i></a>対比現象と同化現象</h2>

<ul>
<li>色の組み合わせよっては、単色で見たときと色が違って見えることがある。</li>
<li>目の錯覚を利用した錯視画像はこの現象を利用している。</li>
</ul>

<h2>
<span id="色の選び方" class="fragment"></span><a href="#%E8%89%B2%E3%81%AE%E9%81%B8%E3%81%B3%E6%96%B9"><i class="fa fa-link"></i></a>色の選び方</h2>

<p>伝えたいテーマに基づいたメインカラーを決め、そこを基準にベースカラー、アクセントカラーを決定する。</p>

<p><a href="https://camo.qiitausercontent.com/4979e607af8d917ab4584d8663d4faedb76edf8b/687474703a2f2f696d6167652e736c696465736861726563646e2e636f6d2f72616e646f6d2d3133313030343036333335312d70687061707030312f39352f736c6964652d33352d3633382e6a70673f63623d31333830383930393239" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/4979e607af8d917ab4584d8663d4faedb76edf8b/687474703a2f2f696d6167652e736c696465736861726563646e2e636f6d2f72616e646f6d2d3133313030343036333335312d70687061707030312f39352f736c6964652d33352d3633382e6a70673f63623d31333830383930393239" alt="配色が苦手でも、これを読めばスキルアップできるおすすめスライド6選。 | Handy Web Design" title="配色が苦手でも、これを読めばスキルアップできるおすすめスライド6選。 | Handy Web Design" data-canonical-src="http://image.slidesharecdn.com/random-131004063351-phpapp01/95/slide-35-638.jpg?cb=1380890929"></a><br>
<em>via <a href="http://image.slidesharecdn.com/random-131004063351-phpapp01/95/slide-35-638.jpg?cb=1380890929" rel="nofollow noopener" target="_blank">配色が苦手でも、これを読めばスキルアップできるおすすめスライド6選。 | Handy Web Design</a></em></p>

<h3>
<span id="1メインカラーを決める" class="fragment"></span><a href="#1%E3%83%A1%E3%82%A4%E3%83%B3%E3%82%AB%E3%83%A9%E3%83%BC%E3%82%92%E6%B1%BA%E3%82%81%E3%82%8B"><i class="fa fa-link"></i></a>1.メインカラーを決める</h3>

<ul>
<li>明度の低い色が扱いやすい（視認性が高い）</li>
</ul>

<h4>
<span id="色の意味から考える" class="fragment"></span><a href="#%E8%89%B2%E3%81%AE%E6%84%8F%E5%91%B3%E3%81%8B%E3%82%89%E8%80%83%E3%81%88%E3%82%8B"><i class="fa fa-link"></i></a>色の意味から考える</h4>

<ul>
<li>色にはその色から自然と連想するキーワードがある。</li>
<li>意味を理解せずに色の選択はできない。</li>
<li>目的に合った色を選択しなければ、見る人に適切な意味を伝えることができず、誤った意味を伝えてしまう場合もある。</li>
<li>色彩設計でもっとも重要なのは、「何を伝えたいか。」</li>
</ul>

<table>
<thead>
<tr>
<th style="text-align: left">色</th>
<th>代表的な意味</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left">赤</td>
<td>情熱、活発、積極的、外向性、興奮、勇気、欲望、革命、力、勇敢、活気、注意</td>
</tr>
<tr>
<td style="text-align: left">橙</td>
<td>友情、食欲、活力、行動、冒険、陽気、成功、活動的、発展的、好意的、善意、安定、幸福、太陽</td>
</tr>
<tr>
<td style="text-align: left">黄</td>
<td>楽しい、元気、上昇志向、知性、好奇心、洞察力、決断力、想像力、快活、協力</td>
</tr>
<tr>
<td style="text-align: left">黄緑</td>
<td>若々しい、調和、知恵、勇気、希望、順応</td>
</tr>
<tr>
<td style="text-align: left">緑</td>
<td>自然、安定、秩序、平和、健康、調和、地球、静か、安全、安心、信頼、若者</td>
</tr>
<tr>
<td style="text-align: left">青緑</td>
<td>カジュアル、洗練、冷静、治癒</td>
</tr>
<tr>
<td style="text-align: left">青</td>
<td>清潔、冷静、安定、信頼、誠実、知恵、神秘、調和、知性、落ち着き</td>
</tr>
<tr>
<td style="text-align: left">紺</td>
<td>革新的、豊かさ、専門的、信頼、知識、法則、論理</td>
</tr>
<tr>
<td style="text-align: left">紫</td>
<td>気品、高貴、神秘的、想像</td>
</tr>
<tr>
<td style="text-align: left">桃</td>
<td>可憐、好意、慈愛、愛情、尊敬、感謝、女性的、絶妙、快活、幸福、友情、優しい</td>
</tr>
<tr>
<td style="text-align: left">白</td>
<td>純白、清潔、高貴、洗練、平和、明快、献身、単純</td>
</tr>
<tr>
<td style="text-align: left">黒</td>
<td>高貴、神秘、洗練、不安、優雅</td>
</tr>
<tr>
<td style="text-align: left">灰</td>
<td>調和・憂鬱・不安・過去・薄暗い・思い出</td>
</tr>
<tr>
<td style="text-align: left">銀</td>
<td>冷たさ・金属・洗練・硬い・上品</td>
</tr>
<tr>
<td style="text-align: left">金</td>
<td>成功・高級・富・頂点・輝き・豪華</td>
</tr>
</tbody>
</table>

<h3>
<span id="2ベースカラーを決める" class="fragment"></span><a href="#2%E3%83%99%E3%83%BC%E3%82%B9%E3%82%AB%E3%83%A9%E3%83%BC%E3%82%92%E6%B1%BA%E3%82%81%E3%82%8B"><i class="fa fa-link"></i></a>2.ベースカラーを決める</h3>

<ul>
<li>背景に使用される。</li>
<li>明度が高く、彩度が低い色や、無彩色が多い。</li>
</ul>

<h3>
<span id="3アクセントカラーを決める" class="fragment"></span><a href="#3%E3%82%A2%E3%82%AF%E3%82%BB%E3%83%B3%E3%83%88%E3%82%AB%E3%83%A9%E3%83%BC%E3%82%92%E6%B1%BA%E3%82%81%E3%82%8B"><i class="fa fa-link"></i></a>3.アクセントカラーを決める</h3>

<ul>
<li>部分的に強調するアクセントとなる色。</li>
<li>彩度の高い色や、メインカラーと捕色関係に当たる色を選ぶとより効果的。</li>
<li>ただし補色を使った配色は扱いが難しい。色の扱いに不慣れな人は色相差を小さめに。</li>
</ul>

<h3>
<span id="4色の割合を考える-70255の法則" class="fragment"></span><a href="#4%E8%89%B2%E3%81%AE%E5%89%B2%E5%90%88%E3%82%92%E8%80%83%E3%81%88%E3%82%8B-70255%E3%81%AE%E6%B3%95%E5%89%87"><i class="fa fa-link"></i></a>4.色の割合を考える [70:25:5]の法則</h3>

<ul>
<li>ベースカラーを70％、メインカラーを25%、アクセントカラーを5％で割り振るとバランスよく見える。</li>
</ul>

<p><a href="https://camo.qiitausercontent.com/6723d8af10259d29b5c1b8ef70dc7fd90796dc14/687474703a2f2f696d6167652e736c696465736861726563646e2e636f6d2f72616e646f6d2d3131303832353035343732302d70687061707030312f39352f736c6964652d31362d3732382e6a70673f63623d31333134323639333631" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/6723d8af10259d29b5c1b8ef70dc7fd90796dc14/687474703a2f2f696d6167652e736c696465736861726563646e2e636f6d2f72616e646f6d2d3131303832353035343732302d70687061707030312f39352f736c6964652d31362d3732382e6a70673f63623d31333134323639333631" alt="配色が苦手でも、これを読めばスキルアップできるおすすめスライド6選。 | Handy Web Design" title="配色が苦手でも、これを読めばスキルアップできるおすすめスライド6選。 | Handy Web Design" data-canonical-src="http://image.slidesharecdn.com/random-110825054720-phpapp01/95/slide-16-728.jpg?cb=1314269361"></a><br>
<em>via <a href="http://image.slidesharecdn.com/random-110825054720-phpapp01/95/slide-16-728.jpg?cb=1314269361" rel="nofollow noopener" target="_blank">配色が苦手でも、これを読めばスキルアップできるおすすめスライド6選。 | Handy Web Design</a></em></p>

<h3>
<span id="5カラーを分割する" class="fragment"></span><a href="#5%E3%82%AB%E3%83%A9%E3%83%BC%E3%82%92%E5%88%86%E5%89%B2%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>5.カラーを分割する</h3>

<ul>
<li>それぞれの割合の中で使用する色を増やす。</li>
<li>色相が同じでトーンが違う色</li>
<li>トーンが同じで色相が違う色</li>
</ul>

<p><a href="https://camo.qiitausercontent.com/8b17e0af7e477e84d274ef3e56a268169bd9db1a/687474703a2f2f696d6167652e736c696465736861726563646e2e636f6d2f72616e646f6d2d3131303832353035343732302d70687061707030312f39352f736c6964652d33312d3732382e6a70673f63623d31333134323639333631" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/8b17e0af7e477e84d274ef3e56a268169bd9db1a/687474703a2f2f696d6167652e736c696465736861726563646e2e636f6d2f72616e646f6d2d3131303832353035343732302d70687061707030312f39352f736c6964652d33312d3732382e6a70673f63623d31333134323639333631" alt="配色が苦手でも、これを読めばスキルアップできるおすすめスライド6選。 | Handy Web Design" title="配色が苦手でも、これを読めばスキルアップできるおすすめスライド6選。 | Handy Web Design" data-canonical-src="http://image.slidesharecdn.com/random-110825054720-phpapp01/95/slide-31-728.jpg?cb=1314269361"></a><br>
<em>via <a href="http://image.slidesharecdn.com/random-110825054720-phpapp01/95/slide-31-728.jpg?cb=1314269361" rel="nofollow noopener" target="_blank">配色が苦手でも、これを読めばスキルアップできるおすすめスライド6選。 | Handy Web Design</a></em></p>

<h2>
<span id="ジャッドの色彩調和論" class="fragment"></span><a href="#%E3%82%B8%E3%83%A3%E3%83%83%E3%83%89%E3%81%AE%E8%89%B2%E5%BD%A9%E8%AA%BF%E5%92%8C%E8%AB%96"><i class="fa fa-link"></i></a>ジャッドの色彩調和論</h2>

<ul>
<li>20世紀半ばまでの先人たちの色彩調和論を"4つの原理"にまとめたもの。</li>
</ul>

<h3>
<span id="1秩序の原理" class="fragment"></span><a href="#1%E7%A7%A9%E5%BA%8F%E3%81%AE%E5%8E%9F%E7%90%86"><i class="fa fa-link"></i></a>1.秩序の原理</h3>

<ul>
<li>一定の法則によって規則的に選ばれた色は調和する</li>
<li>規則的に色を選ぶ（補色、色相から等間隔で選ぶなど）</li>
</ul>

<p><a href="https://camo.qiitausercontent.com/5bdaa98ec2ccaf0b9c311d9df413daa71543909d/687474703a2f2f7765626e6175742e6a702f64657369676e2f696d672f696d675f64657369676e5f3133313031375f30312e6a7067" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/5bdaa98ec2ccaf0b9c311d9df413daa71543909d/687474703a2f2f7765626e6175742e6a702f64657369676e2f696d672f696d675f64657369676e5f3133313031375f30312e6a7067" alt="「色相環」とか「トーン」ってどう使うの？配色のコツは「ジャッドの色彩調和論」 | Design | WebNAUT" title="「色相環」とか「トーン」ってどう使うの？配色のコツは「ジャッドの色彩調和論」 | Design | WebNAUT" data-canonical-src="http://webnaut.jp/design/img/img_design_131017_01.jpg"></a><br>
<em>via <a href="http://webnaut.jp/design/img/img_design_131017_01.jpg" rel="nofollow noopener" target="_blank">「色相環」とか「トーン」ってどう使うの？配色のコツは「ジャッドの色彩調和論」 | Design | WebNAUT</a></em></p>

<h4>
<span id="同一調和--アイデンティティidentity" class="fragment"></span><a href="#%E5%90%8C%E4%B8%80%E8%AA%BF%E5%92%8C--%E3%82%A2%E3%82%A4%E3%83%87%E3%83%B3%E3%83%86%E3%82%A3%E3%83%86%E3%82%A3identity"><i class="fa fa-link"></i></a>同一調和 / アイデンティティ（Identity）</h4>

<ul>
<li>同じ色相のみを使った配色</li>
<li>非常に調和が取れる一方、単調になりやすい。</li>
<li>明度や彩度差をもたせてコントラストを取ると良い。</li>
</ul>

<h4>
<span id="類似調和--アナロジーanalogy" class="fragment"></span><a href="#%E9%A1%9E%E4%BC%BC%E8%AA%BF%E5%92%8C--%E3%82%A2%E3%83%8A%E3%83%AD%E3%82%B8%E3%83%BCanalogy"><i class="fa fa-link"></i></a>類似調和 / アナロジー（Analogy）</h4>

<ul>
<li>二つの色相差が25から43度の類似を使った配色法。</li>
<li>色の違いもわかり、強すぎない。ソフト。</li>
<li>明度や彩度に大きくコントラストをとるとうまくいきやすい。</li>
<li>失敗しにくい配色。</li>
</ul>

<h4>
<span id="インターミディエートintermediate" class="fragment"></span><a href="#%E3%82%A4%E3%83%B3%E3%82%BF%E3%83%BC%E3%83%9F%E3%83%87%E3%82%A3%E3%82%A8%E3%83%BC%E3%83%88intermediate"><i class="fa fa-link"></i></a>インターミディエート（Intermediate）</h4>

<ul>
<li>色相環で90度の位置にある色同士を使った配色</li>
<li>バランスよく安定感がある。</li>
</ul>

<h4>
<span id="対比調和--ダイアードdyad" class="fragment"></span><a href="#%E5%AF%BE%E6%AF%94%E8%AA%BF%E5%92%8C--%E3%83%80%E3%82%A4%E3%82%A2%E3%83%BC%E3%83%89dyad"><i class="fa fa-link"></i></a>対比調和 / ダイアード（Dyad）</h4>

<ul>
<li>色相環の正反対にある色同士の配色。</li>
<li>派手。主張が強い。失敗すると目が痛い。</li>
<li>どちらかの明度を上げた場合、補色である色の明度は落とすのがポイント。</li>
<li>コンプリメンタリー（Complementary）とも呼ばれる。</li>
</ul>

<h4>
<span id="オポーネントopornent" class="fragment"></span><a href="#%E3%82%AA%E3%83%9D%E3%83%BC%E3%83%8D%E3%83%B3%E3%83%88opornent"><i class="fa fa-link"></i></a>オポーネント（Opornent）</h4>

<ul>
<li>インターミディエートとダイアードの間での2色配色。</li>
</ul>

<h4>
<span id="スプリットコンプリメンタリーsplit-complementary" class="fragment"></span><a href="#%E3%82%B9%E3%83%97%E3%83%AA%E3%83%83%E3%83%88%E3%82%B3%E3%83%B3%E3%83%97%E3%83%AA%E3%83%A1%E3%83%B3%E3%82%BF%E3%83%AA%E3%83%BCsplit-complementary"><i class="fa fa-link"></i></a>スプリットコンプリメンタリー（Split Complementary）</h4>

<ul>
<li>基準色とその補色の類似色を使った配色。</li>
<li>カラフル。</li>
</ul>

<h4>
<span id="トライアドtriad" class="fragment"></span><a href="#%E3%83%88%E3%83%A9%E3%82%A4%E3%82%A2%E3%83%89triad"><i class="fa fa-link"></i></a>トライアド（Triad）</h4>

<ul>
<li>色相環を三等分した位置にある3色での配色。</li>
<li>バランスの取れた配色の組み合わせ。</li>
</ul>

<h4>
<span id="テトラードtetrad" class="fragment"></span><a href="#%E3%83%86%E3%83%88%E3%83%A9%E3%83%BC%E3%83%89tetrad"><i class="fa fa-link"></i></a>テトラード（Tetrad）</h4>

<ul>
<li>色相環を5つに分けた色</li>
<li>もしくはトライアドに白と黒を加えた5色の配色。</li>
</ul>

<h4>
<span id="ヘクサードhexad" class="fragment"></span><a href="#%E3%83%98%E3%82%AF%E3%82%B5%E3%83%BC%E3%83%89hexad"><i class="fa fa-link"></i></a>ヘクサード（Hexad）</h4>

<ul>
<li>色相環を正六角形分けた6色</li>
<li>もしくはテトラードに白と黒を加えた6色の配色。</li>
</ul>

<h3>
<span id="2馴染みの原理" class="fragment"></span><a href="#2%E9%A6%B4%E6%9F%93%E3%81%BF%E3%81%AE%E5%8E%9F%E7%90%86"><i class="fa fa-link"></i></a>2.馴染みの原理</h3>

<ul>
<li>目に馴染んでいる色を選ぶ（グラディエーション、影などの陰影、自然に存在する色など）</li>
<li>実際に自然に存在する配色は人間にとって受け入れやすい。</li>
<li>真っ黒というものは自然界には存在しないので、うっすらと色を含ませたほうが馴染むことも。</li>
<li>ナチュラルハーモニーを利用する</li>
</ul>

<p><a href="https://camo.qiitausercontent.com/7fc3ce034130eabc72f83690649470624eeba19f/687474703a2f2f7765626e6175742e6a702f64657369676e2f696d672f696d675f64657369676e5f3133313031375f30322e6a7067" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/7fc3ce034130eabc72f83690649470624eeba19f/687474703a2f2f7765626e6175742e6a702f64657369676e2f696d672f696d675f64657369676e5f3133313031375f30322e6a7067" alt="「色相環」とか「トーン」ってどう使うの？配色のコツは「ジャッドの色彩調和論」 | Design | WebNAUT" title="「色相環」とか「トーン」ってどう使うの？配色のコツは「ジャッドの色彩調和論」 | Design | WebNAUT" data-canonical-src="http://webnaut.jp/design/img/img_design_131017_02.jpg"></a><br>
<em>via <a href="http://webnaut.jp/design/img/img_design_131017_02.jpg" rel="nofollow noopener" target="_blank">「色相環」とか「トーン」ってどう使うの？配色のコツは「ジャッドの色彩調和論」 | Design | WebNAUT</a></em></p>

<h3>
<span id="3類似の原理" class="fragment"></span><a href="#3%E9%A1%9E%E4%BC%BC%E3%81%AE%E5%8E%9F%E7%90%86"><i class="fa fa-link"></i></a>3.類似の原理</h3>

<ul>
<li>共通性のある色を選ぶ（色相が近い色、彩度、明度を揃えた配色）</li>
</ul>

<p><a href="https://camo.qiitausercontent.com/bd8b2a093796918ba1e1732d256e90372037cd9b/687474703a2f2f7765626e6175742e6a702f64657369676e2f696d672f696d675f64657369676e5f3133313031375f30332e6a7067" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/bd8b2a093796918ba1e1732d256e90372037cd9b/687474703a2f2f7765626e6175742e6a702f64657369676e2f696d672f696d675f64657369676e5f3133313031375f30332e6a7067" alt="「色相環」とか「トーン」ってどう使うの？配色のコツは「ジャッドの色彩調和論」 | Design | WebNAUT" title="「色相環」とか「トーン」ってどう使うの？配色のコツは「ジャッドの色彩調和論」 | Design | WebNAUT" data-canonical-src="http://webnaut.jp/design/img/img_design_131017_03.jpg"></a><br>
<em>via <a href="http://webnaut.jp/design/img/img_design_131017_03.jpg" rel="nofollow noopener" target="_blank">「色相環」とか「トーン」ってどう使うの？配色のコツは「ジャッドの色彩調和論」 | Design | WebNAUT</a></em></p>

<h4>
<span id="ドミナントカラー配色" class="fragment"></span><a href="#%E3%83%89%E3%83%9F%E3%83%8A%E3%83%B3%E3%83%88%E3%82%AB%E3%83%A9%E3%83%BC%E9%85%8D%E8%89%B2"><i class="fa fa-link"></i></a>ドミナントカラー配色</h4>

<p>色相を統一して、トーン（明度・彩度）を変化させた配色。</p>

<h4>
<span id="トーンオントーン配色" class="fragment"></span><a href="#%E3%83%88%E3%83%BC%E3%83%B3%E3%82%AA%E3%83%B3%E3%83%88%E3%83%BC%E3%83%B3%E9%85%8D%E8%89%B2"><i class="fa fa-link"></i></a>トーンオントーン配色</h4>

<p>ドミナントカラーよりも明度差を大きくした配色。</p>

<h4>
<span id="ドミナントトーン配色" class="fragment"></span><a href="#%E3%83%89%E3%83%9F%E3%83%8A%E3%83%B3%E3%83%88%E3%83%88%E3%83%BC%E3%83%B3%E9%85%8D%E8%89%B2"><i class="fa fa-link"></i></a>ドミナントトーン配色</h4>

<p>トーン（明度・彩度）を統一して、色相を変化させた配色。</p>

<h4>
<span id="トーンイントーン配色" class="fragment"></span><a href="#%E3%83%88%E3%83%BC%E3%83%B3%E3%82%A4%E3%83%B3%E3%83%88%E3%83%BC%E3%83%B3%E9%85%8D%E8%89%B2"><i class="fa fa-link"></i></a>トーンイントーン配色</h4>

<p>ドミトナントトーンよりも、明度差の小さい配色。</p>

<h4>
<span id="カマイユ配色" class="fragment"></span><a href="#%E3%82%AB%E3%83%9E%E3%82%A4%E3%83%A6%E9%85%8D%E8%89%B2"><i class="fa fa-link"></i></a>カマイユ配色</h4>

<ul>
<li>色相・トーン差がほとんどなく、区別がつかないほど微妙な色調の違いによる配色。</li>
<li>素材の異なるものの組み合わせで、微妙に色が変化があるのもカマイユ配色の一種。</li>
</ul>

<h4>
<span id="フォカマイユ配色" class="fragment"></span><a href="#%E3%83%95%E3%82%A9%E3%82%AB%E3%83%9E%E3%82%A4%E3%83%A6%E9%85%8D%E8%89%B2"><i class="fa fa-link"></i></a>フォ・カマイユ配色</h4>

<p>カマイユ配色に対し色相・トーンもやや変化をつけた配色。</p>

<h4>
<span id="グラデーション配色" class="fragment"></span><a href="#%E3%82%B0%E3%83%A9%E3%83%87%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E9%85%8D%E8%89%B2"><i class="fa fa-link"></i></a>グラデーション配色</h4>

<ul>
<li>3色以上の多色を色相・彩度・明度を一定の法則に従って段階的に変化させる配色。</li>
<li>リズム感が生まれ立体感や遠近感などの視覚効果を得られる。</li>
</ul>

<h3>
<span id="4明瞭性の原理" class="fragment"></span><a href="#4%E6%98%8E%E7%9E%AD%E6%80%A7%E3%81%AE%E5%8E%9F%E7%90%86"><i class="fa fa-link"></i></a>4.明瞭性の原理</h3>

<ul>
<li>コントラストの効いた配色をする</li>
</ul>

<p><a href="https://camo.qiitausercontent.com/0ba6aaadea1f70f4f202d9c076b08895cbef9e27/687474703a2f2f7765626e6175742e6a702f64657369676e2f696d672f696d675f64657369676e5f3133313031375f30342e6a7067" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/0ba6aaadea1f70f4f202d9c076b08895cbef9e27/687474703a2f2f7765626e6175742e6a702f64657369676e2f696d672f696d675f64657369676e5f3133313031375f30342e6a7067" alt="「色相環」とか「トーン」ってどう使うの？配色のコツは「ジャッドの色彩調和論」 | Design | WebNAUT" title="「色相環」とか「トーン」ってどう使うの？配色のコツは「ジャッドの色彩調和論」 | Design | WebNAUT" data-canonical-src="http://webnaut.jp/design/img/img_design_131017_04.jpg"></a><br>
<em>via <a href="http://webnaut.jp/design/img/img_design_131017_04.jpg" rel="nofollow noopener" target="_blank">「色相環」とか「トーン」ってどう使うの？配色のコツは「ジャッドの色彩調和論」 | Design | WebNAUT</a></em></p>

<h4>
<span id="トリコロール配色" class="fragment"></span><a href="#%E3%83%88%E3%83%AA%E3%82%B3%E3%83%AD%E3%83%BC%E3%83%AB%E9%85%8D%E8%89%B2"><i class="fa fa-link"></i></a>トリコロール配色</h4>

<ul>
<li>フランス国旗に代表される、明快なはっきりとした三色配色。</li>
<li>トリプル・カラー・ワークとも呼ばる。</li>
<li>間に白などの低彩度色や無彩色を挟んで調和させるセパレーションカラーを置く事が多い。</li>
</ul>

<h4>
<span id="セパレーションカラー" class="fragment"></span><a href="#%E3%82%BB%E3%83%91%E3%83%AC%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E3%82%AB%E3%83%A9%E3%83%BC"><i class="fa fa-link"></i></a>セパレーションカラー</h4>

<ul>
<li>低彩度色や無彩色を色と色の間に挟んで調和させる技法。</li>
<li>ハレーションが生じたり、隣接した為ぼやけた色を引き締める。</li>
</ul>

<h4>
<span id="ビコロール配色ダイアード配色" class="fragment"></span><a href="#%E3%83%93%E3%82%B3%E3%83%AD%E3%83%BC%E3%83%AB%E9%85%8D%E8%89%B2%E3%83%80%E3%82%A4%E3%82%A2%E3%83%BC%E3%83%89%E9%85%8D%E8%89%B2"><i class="fa fa-link"></i></a>ビコロール配色（ダイアード配色）</h4>

<ul>
<li>明快なはっきりとした二色配色。</li>
<li>隣接する色によっては、ハレーションが生じたり、ぼやける事があるので注意が必要。</li>
</ul>

<h4>
<span id="コントラスト配色" class="fragment"></span><a href="#%E3%82%B3%E3%83%B3%E3%83%88%E3%83%A9%E3%82%B9%E3%83%88%E9%85%8D%E8%89%B2"><i class="fa fa-link"></i></a>コントラスト配色</h4>

<ul>
<li>反対色でつくる配色</li>
<li>くっきりとしメリハリがあり力強い印象になる。</li>
<li>コントラストには、色相・彩度・明度それぞれのコントラストがある。</li>
<li>秩序の原理のダイアードもこの配色</li>
</ul>

<h2>
<span id="配色ツールを使う" class="fragment"></span><a href="#%E9%85%8D%E8%89%B2%E3%83%84%E3%83%BC%E3%83%AB%E3%82%92%E4%BD%BF%E3%81%86"><i class="fa fa-link"></i></a>配色ツールを使う</h2>

<h3>
<span id="カラースキームいろいろ" class="fragment"></span><a href="#%E3%82%AB%E3%83%A9%E3%83%BC%E3%82%B9%E3%82%AD%E3%83%BC%E3%83%A0%E3%81%84%E3%82%8D%E3%81%84%E3%82%8D"><i class="fa fa-link"></i></a>カラースキームいろいろ</h3>

<p><a href="https://kuler.adobe.com/create/color-wheel/" rel="nofollow noopener" target="_blank">Color wheel | Color schemes - Adobe Kuler</a><br>
<a href="http://hue360.herokuapp.com/" rel="nofollow noopener" target="_blank">[ HUE / 360 ] The Color Scheme Application</a><br>
<a href="http://colourco.de/" rel="nofollow noopener" target="_blank">colourcode - find your colour scheme</a><br>
<a href="http://colorschemedesigner.com/" rel="nofollow noopener" target="_blank">Color Scheme Designer 3</a><br>
<a href="http://0to255.com/" rel="nofollow noopener" target="_blank">0to255</a><br>
<a href="http://nipponcolors.com/" rel="nofollow noopener" target="_blank">NIPPON COLORS - 日本の伝統色</a><br>
<a href="http://ironodata.info/" rel="nofollow noopener" target="_blank">配色の見本帳 | キーカラーで選ぶ配色パターン</a></p>

<h2>
<span id="色覚テスト" class="fragment"></span><a href="#%E8%89%B2%E8%A6%9A%E3%83%86%E3%82%B9%E3%83%88"><i class="fa fa-link"></i></a>色覚テスト</h2>

<p><a href="http://www.xrite.com/online-color-test-challenge" rel="nofollow noopener" target="_blank">Online Color Challenge</a></p>

<blockquote>
<p>程度こそ違えど女性では255人に1人。男性では12人に1人の割合で何かしらの色覚異常を持っているとのこと。Wikipedia「色覚異常」での記載では、日本人だともっと低くて、女性で500人に1人、男性で20人に1人の割合くらいみたいですね。  男性に多い理由は、ご存知の方も多いかと思いますが、X染色体の異常による遺伝的な要因が強いため。<br>
<em>via <a href="http://www.gizmodo.jp/2014/03/online_color_challenge.html" rel="nofollow noopener" target="_blank">あなたは色がどれだけ見えていますか？　グラデーションで色の正確さを計測できる「Online Color Challenge」 : ギズモード・ジャパン</a></em></p>
</blockquote>

<h2>
<span id="その他" class="fragment"></span><a href="#%E3%81%9D%E3%81%AE%E4%BB%96"><i class="fa fa-link"></i></a>その他</h2>

<p><a href="http://ios7colors.com/" rel="nofollow noopener" target="_blank">iOS 7 colors</a><br>
<a href="http://phpspot.org/blog/archives/2014/03/colors.html" rel="nofollow noopener" target="_blank">新旧の標準カラーパレットのまとめ「Colors」:phpspot開発日誌</a></p>

<h2>
<span id="参考サイト" class="fragment"></span><a href="#%E5%8F%82%E8%80%83%E3%82%B5%E3%82%A4%E3%83%88"><i class="fa fa-link"></i></a>参考サイト</h2>

<p><a href="http://ja.wikipedia.org/wiki/%E8%89%B2" rel="nofollow noopener" target="_blank">色 - Wikipedia</a><br>
<a href="http://wp.yat-net.com/?p=4036" rel="nofollow noopener" target="_blank">配色を考えやすくするための様々なルール - YATのBLOG</a><br>
<a href="http://www.webcreatorbox.com/tech/web-design-color-scheme/" rel="nofollow noopener" target="_blank">配色パターンからWebデザインを考える | Webクリエイターボックス</a><br>
<a href="http://www.webcreatorbox.com/tech/color-tool-web-design/" rel="nofollow noopener" target="_blank">配色に自信がなくても！Webデザインが好きになる配色ツールと使い方 | Webクリエイターボックス</a><br>
<a href="http://handywebdesign.net/2012/07/12colors-give-you-the-impression/" rel="nofollow noopener" target="_blank">１２色の色が与える印象について。配色に困った時のいろいろ。 | Handy Web Design</a><br>
<a href="http://colorstalk.jp/warm-color-cool-color/" rel="nofollow noopener" target="_blank">暖色と寒色 ≫ 色の色々な話</a><br>
<a href="http://blog.livedoor.jp/questions2/archives/52438341.html" rel="nofollow noopener" target="_blank">色彩　Question and Answer:中性色と中間色の違いは？ - livedoor Blog（ブログ）</a><br>
<a href="http://handywebdesign.net/2013/12/slide-share-about-color/" rel="nofollow noopener" target="_blank">配色が苦手でも、これを読めばスキルアップできるおすすめスライド6選。 | Handy Web Design</a><br>
<a href="http://webnaut.jp/design/645.html" rel="nofollow noopener" target="_blank">「色相環」とか「トーン」ってどう使うの？配色のコツは「ジャッドの色彩調和論」 | Design | WebNAUT</a><br>
<a href="http://www.sikiken.co.jp/colors/index.html" rel="nofollow noopener" target="_blank">日本色研事業株式会社　HomePage</a><br>
<a href="http://plaza.rakuten.co.jp/sachiki/diary/200904300000/" rel="nofollow noopener" target="_blank">色相環　マンセルとＰＣＣＳのちがい | 発信～色＊駅 - 楽天ブログ</a></p>

<h2>
<span id="参考文献" class="fragment"></span><a href="#%E5%8F%82%E8%80%83%E6%96%87%E7%8C%AE"><i class="fa fa-link"></i></a>参考文献</h2>

<p><a href="http://www.amazon.co.jp/A%E3%83%BBF%E3%83%BBT%E8%89%B2%E5%BD%A9%E6%A4%9C%E5%AE%9A%E5%85%AC%E5%BC%8F%E3%83%86%E3%82%AD%E3%82%B9%E3%83%883%E7%B4%9A%E7%B7%A8-A%E3%83%BBF%E3%83%BBT%E5%85%AC%E5%BC%8F%E3%83%86%E3%82%AD%E3%82%B9%E3%83%88%E7%B7%A8%E9%9B%86%E5%A7%94%E5%93%A1%E4%BC%9A/dp/4901257188" rel="nofollow noopener" target="_blank">Amazon.co.jp： A・F・T色彩検定公式テキスト3級編: A・F・T公式テキスト編集委員会, 社)全国服飾教育者連合会(A・F・T): 本</a></p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1" style="height:150px;">
<tr>
	<td rowspan="3">56位</td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="thumb-up-120px.png" /></i>866</kbd>
		<a target="_blank" href="https://qiita.com/yuku_t/items/6844aac6008911401b19">A/Bテストよりすごい？バンディットアルゴリズムとは一体何者か</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-03-24<br />14:55:43</center>
	</td>
	<td style="width:200px;">
		<!--投稿者-->
		<center>
			@<a href="user/153.html">yuku_t</a>(195件の記事)<br />(Increments inc. 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/153/profile-images/1505784567">
		</center>
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[ABtesting]</b> <b>[BanditAlgorithms]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<!--
		<div style="width:350px;height:150px;overflow:scroll;">%s</div>
		-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>オバマ大統領の再選に大きく寄与したことで大きな注目を集めているA/Bテスト。A/Bテストを導入した、することを検討している、という開発現場も多いのではないだろうか。</p>

<p>そんな中、Web上で次のような議論を見つけた。</p>

<ul>
<li><a href="http://stevehanov.ca/blog/index.php?id=132" rel="nofollow noopener" target="_blank">20 lines of code that will beat A/B testing every time</a></li>
<li><a href="http://visualwebsiteoptimizer.com/split-testing-blog/multi-armed-bandit-algorithm/" rel="nofollow noopener" target="_blank">Why multi-armed bandit algorithm is not “better” than A/B testing</a></li>
</ul>

<p>一言でまとめると「A/Bテストよりバンディットアルゴリズムの方がすごいよ」「いやいやA/Bテストの方がすごいし」ということだ。</p>

<p>で、バンディットアルゴリズムとは一体何者なのか？</p>

<p>そこで<a href="http://www.amazon.co.jp/gp/product/B00AM86Y0K/ref=as_li_ss_tl?ie=UTF8&amp;camp=247&amp;creative=7399&amp;creativeASIN=B00AM86Y0K&amp;linkCode=as2&amp;tag=qiita-taka84u9-22" rel="nofollow noopener" target="_blank">Bandit Algorithms for Website Optimization (O'REILLY)</a>を読んでみた。その結果分かったことを踏まえてざっくりと解説する。（O'REILLYのサイトに行けば日本語版も売っている）</p>

<p><a href="https://camo.qiitausercontent.com/b177e208db23a7287bfbb23402110ba4d25a1c8f/687474703a2f2f77732e6173736f632d616d617a6f6e2e6a702f776964676574732f713f5f656e636f64696e673d55544638264153494e3d3134343933343133333026466f726d61743d5f534c3136305f2649443d4173696e496d616765264d61726b6574506c6163653d4a50265365727669636556657273696f6e3d32303037303832322657533d31267461673d6b6d67752d3232" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/b177e208db23a7287bfbb23402110ba4d25a1c8f/687474703a2f2f77732e6173736f632d616d617a6f6e2e6a702f776964676574732f713f5f656e636f64696e673d55544638264153494e3d3134343933343133333026466f726d61743d5f534c3136305f2649443d4173696e496d616765264d61726b6574506c6163653d4a50265365727669636556657273696f6e3d32303037303832322657533d31267461673d6b6d67752d3232" alt="Bandit Algorithms for Website Optimization" data-canonical-src="http://ws.assoc-amazon.jp/widgets/q?_encoding=UTF8&amp;ASIN=1449341330&amp;Format=_SL160_&amp;ID=AsinImage&amp;MarketPlace=JP&amp;ServiceVersion=20070822&amp;WS=1&amp;tag=kmgu-22"></a> </p>

<h1>
<span id="要約" class="fragment"></span><a href="#%E8%A6%81%E7%B4%84"><i class="fa fa-link"></i></a>要約</h1>

<p>バンディットアルゴリズムとは…</p>

<ul>
<li>実データに基いてWebサイトなどの改善を行う手法の総称</li>
<li>活用（exploit）と探索（explore）の2つから成る</li>
<li>さまざまなアルゴリズムが考案されている</li>
</ul>

<h2>
<span id="この記事を読むと分かること" class="fragment"></span><a href="#%E3%81%93%E3%81%AE%E8%A8%98%E4%BA%8B%E3%82%92%E8%AA%AD%E3%82%80%E3%81%A8%E5%88%86%E3%81%8B%E3%82%8B%E3%81%93%E3%81%A8"><i class="fa fa-link"></i></a>この記事を読むと分かること</h2>

<ul>
<li>A/Bテストの概要</li>
<li>バンディットアルゴリズムの概要

<ul>
<li>Epsilon-Greedy Algorithm</li>
<li>狭義のA/BテストはEpsilon-Greedy Algorithmにおいて<code>ε = 1</code>の場合に等しい</li>
</ul>
</li>
</ul>

<h2>
<span id="この記事を読んでも分からないこと" class="fragment"></span><a href="#%E3%81%93%E3%81%AE%E8%A8%98%E4%BA%8B%E3%82%92%E8%AA%AD%E3%82%93%E3%81%A7%E3%82%82%E5%88%86%E3%81%8B%E3%82%89%E3%81%AA%E3%81%84%E3%81%93%E3%81%A8"><i class="fa fa-link"></i></a>この記事を読んでも分からないこと</h2>

<ul>
<li>Epsilon-Greedy Algorithmより洗練された手法の詳細

<ul>
<li>Softmax Algorithm</li>
<li>UCB Algorithm</li>
</ul>
</li>
<li>バンディットアルゴリズムを実世界で利用する方法</li>
</ul>

<h1>
<span id="そもそもabテストとは何か" class="fragment"></span><a href="#%E3%81%9D%E3%82%82%E3%81%9D%E3%82%82ab%E3%83%86%E3%82%B9%E3%83%88%E3%81%A8%E3%81%AF%E4%BD%95%E3%81%8B"><i class="fa fa-link"></i></a>そもそもA/Bテストとは何か</h1>

<p>オバマ大統領の選挙キャンペーンで用いられ、再選に大きく寄与したことで一躍有名になったA/Bテストは、これまで人間の主観に依存していた様々な事柄の改善に対する意思決定方法を置きかえる、データに基づいた工学的なアプローチだ。</p>

<p>と、説明するとなんだか仰々しい感じがするが、その中身は気が抜けるほど単純である。</p>

<p>N種類のデザインを作ってユーザをランダムに振り分け、一番良い結果を導き出した法を採用する、という手法のことだ。A/Bテストという言葉はAとBという2種類のデザインを用いたために付けられた名前だが、別にNは2である必要は無い。ここでいう良い結果、というのは例えばコンバージョン率であったり、サイト滞在時間のような数値として計測できるものを用いる。オバマ大統領の選挙戦では選挙資金の寄付額などを用いたことが知られている。</p>

<p>大事なことは人の主観ではなくデータに基いて最適なデザインを模索するという点だ。データではなく主観に頼った場合、得てして発言力のある人の意見（CEOとかプロデューサーとか）が反映されることから、このような意思決定方法をHIPPO（Highest Paid Person's Opinion - 高給取りの意見）と呼ぶ。</p>

<p>しかしながら、A/Bテストという言葉は「人の意見ではなくデータに基いて判断する方法の総称」として扱われていることも多い。特に非学術的ニュースメディアではその傾向が強いように思う。下記に挙げる記事はその一例だ。</p>

<ul>
<li><a href="http://wired.jp/2012/12/29/abtest_vol5-2/" rel="nofollow noopener" target="_blank">A/Bテストがビジネスルールを変えていく（あるいは、ぼくらの人生すらも？）&lt;&lt; WIRED.jp</a></li>
<li><a href="http://matome.naver.jp/odai/2130457591894883201" rel="nofollow noopener" target="_blank">【WEBマーケター必見】ABテスト最新事例19選 - NAVER まとめ</a></li>
</ul>

<p>どちらが正しくて、どちらが間違っている、という話はここではしない。ここで言いたいのは、「A/Bテスト」という単語を見たときそれが広義の意味で使われているのか、狭義の意味で使われているのか、読者が文脈に応じて読み分ける必要がある、ということだ。</p>

<p>本稿は狭義の意味で用いている。</p>

<h1>
<span id="バンディットアルゴリズムとは" class="fragment"></span><a href="#%E3%83%90%E3%83%B3%E3%83%87%E3%82%A3%E3%83%83%E3%83%88%E3%82%A2%E3%83%AB%E3%82%B4%E3%83%AA%E3%82%BA%E3%83%A0%E3%81%A8%E3%81%AF"><i class="fa fa-link"></i></a>バンディットアルゴリズムとは</h1>

<p>そんなA/Bテストと同じ文脈で語られる言葉に <strong>バンディットアルゴリズム</strong> （Bandit Algorithms）がある。これもA/Bテスト同様にデータに基づいた意思決定手法である。</p>

<p>これもA/Bテスト同様に複数のデザインを用意し、ユーザを振り分けて実際にテストして、その結果から最適なデザインを探すのだが、この個々のデザインを歴史的な経緯から <strong>腕</strong> （arm）と呼ぶ。</p>

<p>バンディットアルゴリズムは、もともとギャンブルに対する最適な戦略を考えることから始まった。</p>

<p>目の前に5つのスロットマシーンがある。それぞれのマシーンの当たる確率とその時の報酬は異なる。さて、手元に1000枚のコインがあるとき、そのコインをどのように配分すれば得られる報酬を最大化できるだろうか？</p>

<p>一般的なスロットマシーンには腕と呼ばれる棒がついており、コインを投入してその棒を引くとドラムが回転し始める。つまりここでやっていることは最も効率的な腕の引き方を考えていることと同じだ。</p>

<p>そういった訳で、バンディットアルゴリズムでは一つ一つのデザインを腕と呼ぶ。実際、Wikipediaでは <em><a href="http://en.wikipedia.org/wiki/Multi-armed_bandit" rel="nofollow noopener" target="_blank">Multi-armed bandit</a></em> という名前の項目でバンディットアルゴリズムは説明されている。</p>

<p>そして、今の喩え話をWebアプリケーション開発の文脈に置きかえると、5つのデザインと1000人のユーザがいるとき、どのようにユーザを分配すれば最も効果的かを考える、ということになる。</p>

<h2>
<span id="バンディットアルゴリズムとabテストは何が違うのか" class="fragment"></span><a href="#%E3%83%90%E3%83%B3%E3%83%87%E3%82%A3%E3%83%83%E3%83%88%E3%82%A2%E3%83%AB%E3%82%B4%E3%83%AA%E3%82%BA%E3%83%A0%E3%81%A8ab%E3%83%86%E3%82%B9%E3%83%88%E3%81%AF%E4%BD%95%E3%81%8C%E9%81%95%E3%81%86%E3%81%AE%E3%81%8B"><i class="fa fa-link"></i></a>バンディットアルゴリズムとA/Bテストは何が違うのか</h2>

<p>それは既知の知識を活用するかどうかだ、と説明されることが多いようだ。</p>

<p>重要な要素として、バンディットアルゴリズムは <strong>活用</strong> （exploitation）と <strong>探求</strong> （exploration）の２つから構成される。活用は現時点で最もよいとされている腕を使うことであり、探求は候補の腕の中でどれが最も優れているかをテストすることだ。A/Bテストは全てのユーザを探求に割り振り、活用は行わない。</p>

<p>この立場からすれば「ユーザのX％でA/Bテストを実施する」というのは間違った表現だ、ということになるだろう。</p>

<h2>
<span id="何故バンディットアルゴリズムは活用を行うのか" class="fragment"></span><a href="#%E4%BD%95%E6%95%85%E3%83%90%E3%83%B3%E3%83%87%E3%82%A3%E3%83%83%E3%83%88%E3%82%A2%E3%83%AB%E3%82%B4%E3%83%AA%E3%82%BA%E3%83%A0%E3%81%AF%E6%B4%BB%E7%94%A8%E3%82%92%E8%A1%8C%E3%81%86%E3%81%AE%E3%81%8B"><i class="fa fa-link"></i></a>何故バンディットアルゴリズムは"活用"を行うのか</h2>

<p>何故バンディットアルゴリズムで活用を行うのか。</p>

<p>その理由を一言で言うなら <strong>リスクマネジメントの為</strong> である。</p>

<p>バンディットアルゴリズムの目的は最良の腕を見つけることであることは間違い無いのだが、別に我々は研究目的でWebサイトを運営しているのではない。本質的には <strong>収益を最大化すること</strong> が目的なのだ。その意味でこれまでに一定の結果を残してきた腕と、どんな結果をもたらすか分からない腕を同列に扱うことは、短期的な収益減のリスクを伴う。そこで、ある程度のユーザには現時点でもっともよいと思われるものを提示し、残りのユーザに対してテストを行うのだ。</p>

<h2>
<span id="abテスト支持派の主張" class="fragment"></span><a href="#ab%E3%83%86%E3%82%B9%E3%83%88%E6%94%AF%E6%8C%81%E6%B4%BE%E3%81%AE%E4%B8%BB%E5%BC%B5"><i class="fa fa-link"></i></a>A/Bテスト支持派の主張</h2>

<p>多くの場合この"活用を行なう"という点においてバンディットアルゴリズムの方が優れていると説明されることが多いのだが、面白いことに、全く同じ理由でA/Bテストの方が優れていると主張する意見もある。つまり"活用が無い"からA/Bテストは優れている、というのだ。</p>

<p>何故A/Bテスト支持者が活用は不要だと考えるかというと、それは、スピードが損なわれるためだ。</p>

<p>ユーザを活用に回すとその分探求が遅れる。A/Bテスト支持派の意見は、多少の犠牲を払ってでも素早く最適な腕を見つけることが大切だ、というところに集約されるように思う。また、探求が早いということは直ぐに腕の良し悪しの区別がつくので、悪い腕を引き続けて損失が膨らむような愚は犯さない、ということでもある。</p>

<p>だが果たして本当にそうなのだろうか？例えば自動的に探求と活用の割合を調整するようなバンディットアルゴリズムであれば、ここでA/Bテスト支持派が行なっている指摘は意味を成さなくなるだろう。</p>

<p>バンディットアルゴリズムを評価する上でどのような評価軸があるのだろうか。</p>

<h2>
<span id="バンディットアルゴリズムを評価するための6つの指標" class="fragment"></span><a href="#%E3%83%90%E3%83%B3%E3%83%87%E3%82%A3%E3%83%83%E3%83%88%E3%82%A2%E3%83%AB%E3%82%B4%E3%83%AA%E3%82%BA%E3%83%A0%E3%82%92%E8%A9%95%E4%BE%A1%E3%81%99%E3%82%8B%E3%81%9F%E3%82%81%E3%81%AE6%E3%81%A4%E3%81%AE%E6%8C%87%E6%A8%99"><i class="fa fa-link"></i></a>バンディットアルゴリズムを評価するための6つの指標</h2>

<p><a href="http://www.amazon.co.jp/gp/product/B00AM86Y0K/ref=as_li_ss_tl?ie=UTF8&amp;camp=247&amp;creative=7399&amp;creativeASIN=B00AM86Y0K&amp;linkCode=as2&amp;tag=qiita-taka84u9-22" rel="nofollow noopener" target="_blank">Bandit Algorithms for Website Optimization</a>ではバンディットアルゴリズムを評価する6つの指標として下記のものが列挙されている。</p>

<table>
<thead>
<tr>
<th>指標</th>
<th>意味</th>
</tr>
</thead>
<tbody>
<tr>
<td>Curiosity</td>
<td>探求から得られた知見を利用するか。一つ一つのテストは独立しているか否か。</td>
</tr>
<tr>
<td>Increased Exploitation over Time</td>
<td>自動的に探求の割合が減っていくか。</td>
</tr>
<tr>
<td>Strategic Exploration</td>
<td>何を最大化するか。利益か、得られる知見か、それともその両方か。</td>
</tr>
<tr>
<td>Number of Tunable Parameters</td>
<td>何個のパラメータを調整しなければならないか。（少ないほど良い）</td>
</tr>
<tr>
<td>Initialization Strategy</td>
<td>各腕に対する初期値の割り当て方</td>
</tr>
<tr>
<td>Context-Aware</td>
<td>ユーザと腕の相性などを考慮するか。例えば男性、女性を区別できるか、など。</td>
</tr>
</tbody>
</table>

<h2>
<span id="epsilon-greedyアルゴリズム" class="fragment"></span><a href="#epsilon-greedy%E3%82%A2%E3%83%AB%E3%82%B4%E3%83%AA%E3%82%BA%E3%83%A0"><i class="fa fa-link"></i></a>Epsilon-Greedyアルゴリズム</h2>

<p>バンディットアルゴリズムは活用と探求を行う、と言われてもピンとこないかも知れない。そこで最も単純なバンディットアルゴリズムである <strong>Epsilon-Greedyアルゴリズム</strong> を紹介する。</p>

<p>Epsilon-Greedyアルゴリズムの考え方は極めてシンプルで、<code>0 ≦ ε ≦ 1</code>を満たす<code>ε</code>に対して、全てのユーザの内<code>1 - ε</code>は活用、<code>ε</code>は探求を行う。そして探求に割り当てられたユーザをテストしたい腕に改めて割り振る。この<code>ε</code>の値を調整することで、活用と探求の割合を増減させることができるわけだ。</p>

<ul>
<li>
<code>ε = 0</code>の場合探求は一切行われないのでこれはバンディットアルゴリズムを使っていないのと同じ状況だ。</li>
<li>
<code>ε</code>を少しずつ増やしていくと、次第に探求の割合が増えていく。</li>
<li>
<code>ε = 1</code>の時、活用は一切行われず全てのユーザが探求に回される。</li>
</ul>

<p>そんなEpsilon-Greedyアルゴリズムだが、先ほど紹介した6つの評価指標に照らしてみると、いくつもの欠点があることが分かる。</p>

<table>
<thead>
<tr>
<th>指標</th>
<th>Epsilon-Greedyアルゴリズムの評価</th>
</tr>
</thead>
<tbody>
<tr>
<td>Curiosity</td>
<td>常に全ての腕が選ばれる確率が等しい。</td>
</tr>
<tr>
<td>Increased Exploitation over Time</td>
<td>
<code>ε</code>の値は一定なので、探求の割合は減少しない。</td>
</tr>
<tr>
<td>Strategic Exploration</td>
<td>何を最大化するか。利益か、得られる知見か、それともその両方か。</td>
</tr>
<tr>
<td>Number of Tunable Parameters</td>
<td>調整するパラメータは<code>ε</code>の1つ</td>
</tr>
<tr>
<td>Initialization Strategy</td>
<td>全ての腕が同じ評価</td>
</tr>
<tr>
<td>Context-Aware</td>
<td>コンテキストは一切考慮しない</td>
</tr>
</tbody>
</table>

<h1>
<span id="epsilon-greedyアルゴリズムを改良する" class="fragment"></span><a href="#epsilon-greedy%E3%82%A2%E3%83%AB%E3%82%B4%E3%83%AA%E3%82%BA%E3%83%A0%E3%82%92%E6%94%B9%E8%89%AF%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>Epsilon-Greedyアルゴリズムを改良する</h1>

<p>Epsilon-Greedyアルゴリズムより優れたアルゴリズムは勿論存在する。<a href="http://www.amazon.co.jp/gp/product/B00AM86Y0K/ref=as_li_ss_tl?ie=UTF8&amp;camp=247&amp;creative=7399&amp;creativeASIN=B00AM86Y0K&amp;linkCode=as2&amp;tag=qiita-taka84u9-22" rel="nofollow noopener" target="_blank">Bandit Algorithms for Website Optimization</a>で紹介されているのは下記のものだ。（残念ながら各アルゴリズムの詳細を説明するだけの気力がないので、詳しく知りたい人は本書を実際に読んで欲しい。）</p>

<h2>
<span id="softmaxアルゴリズム" class="fragment"></span><a href="#softmax%E3%82%A2%E3%83%AB%E3%82%B4%E3%83%AA%E3%82%BA%E3%83%A0"><i class="fa fa-link"></i></a>Softmaxアルゴリズム</h2>

<p>Epsilon-Greedyアルゴリズムの大きな問題点の1つがCuriosity性が無いことだ。つまり、既にダメだと分かっている腕も等確率で選択されてしまい、損失が膨らむのだ。</p>

<p>Softmaxアルゴリズムは特にこの点においてEpsilon-Greedyアルゴリズムを改良したものになっている。探求が進む内に得られた期待値に応じて腕を重み付けし、それに基いて腕を選択する。また<code>ε</code>の値を探求が進むに連れて自動的に増加させる、より発展的なアルゴリズムも紹介されている。これによってSoftmaxアルゴリズムは放置しておくだけで勝手に一番いい腕だけを使うようになるわけだ。</p>

<h2>
<span id="ucbアルゴリズム" class="fragment"></span><a href="#ucb%E3%82%A2%E3%83%AB%E3%82%B4%E3%83%AA%E3%82%BA%E3%83%A0"><i class="fa fa-link"></i></a>UCBアルゴリズム</h2>

<p>Softmaxアルゴリズムは、各腕を引くことでどれだけ報酬が得られるか、という情報は使っているが、 <strong>各腕についてどれだけ知っているか</strong> は考慮されていない。つまり、本当は悪いのに良いと勘違いされた腕は、そのうち勘違いが是正されるが、本当は良いのに悪いと勘違いされた腕は無視されるのでいつまでも勘違いされたままになる可能性があるのだ。</p>

<p>UCBアルゴリズム（Upper Confidence Bound Algorithm）は名前からも分かるように、得られた評価値の信頼性を自動的に高めようとする。つまり、あまり良くわかっていない腕は積極的に試していくのだ。そのため本の中でも、Softmaxアルゴリズムに評価実験で劣るという結果が出た。だが、重要な点としてUCBはSoftmaxアルゴリズムと違って「Initialization Strategy」が自動化されるという強みがある。</p>

<p>また「Context-Aware」性を持ったUCBとしてLinUCBとGLMUCBという2つの改良版が紹介されている。LinUCBは線形回帰、GLMUCBは一般化線形回帰を用いて腕の価値を再評価する。（これらについては本書の中でも名前が紹介されている程度なので、詳しくは引用されている論文を当たらなければならない。）</p>

<h1>
<span id="現実的にバンディットアルゴリズムは使えるのか" class="fragment"></span><a href="#%E7%8F%BE%E5%AE%9F%E7%9A%84%E3%81%AB%E3%83%90%E3%83%B3%E3%83%87%E3%82%A3%E3%83%83%E3%83%88%E3%82%A2%E3%83%AB%E3%82%B4%E3%83%AA%E3%82%BA%E3%83%A0%E3%81%AF%E4%BD%BF%E3%81%88%E3%82%8B%E3%81%AE%E3%81%8B"><i class="fa fa-link"></i></a>現実的にバンディットアルゴリズムは使えるのか</h1>

<p>最後に、このような理論を考えるときに重要なことは、その理論を現実の問題に応用出来るのか、ということだ。<br>
が、この点についても7章で詳しく論じられているので詳しくはそちらを参照して欲しい。</p>

<h1>
<span id="結局バンディットアルゴリズムはabテストより優れているのか" class="fragment"></span><a href="#%E7%B5%90%E5%B1%80%E3%83%90%E3%83%B3%E3%83%87%E3%82%A3%E3%83%83%E3%83%88%E3%82%A2%E3%83%AB%E3%82%B4%E3%83%AA%E3%82%BA%E3%83%A0%E3%81%AFab%E3%83%86%E3%82%B9%E3%83%88%E3%82%88%E3%82%8A%E5%84%AA%E3%82%8C%E3%81%A6%E3%81%84%E3%82%8B%E3%81%AE%E3%81%8B"><i class="fa fa-link"></i></a>結局バンディットアルゴリズムはA/Bテストより優れているのか</h1>

<p>まず前提として、ここでいうA/Bテストとは「全てのユーザをランダムに振り分けてテストする」ものである、ということをご確認いただきたい。</p>

<p>この場合のA/Bテストは<code>ε = 1</code>なEpsilon-Greedyアルゴリズムと等しい。故に「A/Bテストとバンディットアルゴリズムを比較すること」は「ゴールデンリトリバーと犬を比較すること」のようなもので、特に意味が無い。</p>

<p>A/BテストとEpsilon-Greedyアルゴリズムの比較という意味では、一長一短な面があると言えるだろう。Epsilon-Greedyアルゴリズムは非常にナイーブな実装であり、いくつもの問題を抱えているためだ。</p>

<p>その一方でEpsilon-Greedyアルゴリズムの問題点を改善した手法がいくつも提案されている。本稿とりあげたSoftmaxアルゴリズムやUCBアルゴリズムなどがその一例だ。これらとA/Bテストを比較するなら、バンディットアルゴリズムに軍配が上がると言えるのではないだろうか。</p>

<p>だが現実問題としてどれだけ実際のシステムの改善に応用出来るか、という話になると、実装コストなどさまざまな点も考慮しなければならなくなり、それらを勘案すると一概に「A/Bテストよりバンディットアルゴリズムの方が優れている」と言い切れないのではないだろうか。</p>

<h1>
<span id="合わせて読みたい" class="fragment"></span><a href="#%E5%90%88%E3%82%8F%E3%81%9B%E3%81%A6%E8%AA%AD%E3%81%BF%E3%81%9F%E3%81%84"><i class="fa fa-link"></i></a>合わせて読みたい</h1>

<ul>
<li><a href="http://stevehanov.ca/blog/index.php?id=132" rel="nofollow noopener" target="_blank">20 lines of code that will beat A/B testing every time</a></li>
</ul>

<p>バンディットアルゴリズムの方が優れているよ、という趣旨のブログ記事。</p>

<ul>
<li><a href="http://visualwebsiteoptimizer.com/split-testing-blog/multi-armed-bandit-algorithm/" rel="nofollow noopener" target="_blank">Why multi-armed bandit algorithm is not “better” than A/B testing</a></li>
</ul>

<p>上の記事に対する反論という形でA/Bテストの優位性を主張しているブログ記事。実際にA/Bテストとバンディットアルゴリズムの比較を行なっているが、ここで用いているのはEpsilon-Greedyアルゴリズムであることに注意。</p>

<ul>
<li><a href="http://www.amazon.co.jp/gp/product/B00AM86Y0K/ref=as_li_ss_tl?ie=UTF8&amp;camp=247&amp;creative=7399&amp;creativeASIN=B00AM86Y0K&amp;linkCode=as2&amp;tag=qiita-taka84u9-22" rel="nofollow noopener" target="_blank">Bandit Algorithms for Website Optimization (O'REILLY)</a></li>
</ul>

<p>バンディットアルゴリズムについての入門書籍。おそらくここまでしっかりまとまった本は他に無いのではないだろうか。洋書だが英文は簡単で比較的読みやすかった印象。古くからある知見に加えて、最近発表された学術論文の内容も取り扱われており、今後より深く勉強したくなった人のための文献紹介という面でも有用だと感じた。</p>

<ul>
<li><a href="http://www.amazon.co.jp/dp/4627826613" rel="nofollow noopener" target="_blank">強化学習 (森北出版)</a></li>
</ul>

<p>翻訳和書。第2章の29ページ分がバンディット問題に関する、様々なアルゴリズムの効果と解説。</p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1" style="height:150px;">
<tr>
	<td rowspan="3">57位</td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="thumb-up-120px.png" /></i>865</kbd>
		<a target="_blank" href="https://qiita.com/cd01/items/da9a36582372e7d0a7f6">それ PowerShell でできるよ</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2014-02-15<br />01:15:16</center>
	</td>
	<td style="width:200px;">
		<!--投稿者-->
		<center>
			@<a href="user/24596.html">cd01</a>(11件の記事)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/24596/profile-images/1473684151">
		</center>
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[PowerShell]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<!--
		<div style="width:350px;height:150px;overflow:scroll;">%s</div>
		-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;">
<h1>
<span id="summary" class="fragment"></span><a href="#summary"><i class="fa fa-link"></i></a>Summary</h1>

<p>普段使い用 PowerShell メモ</p>

<h1>
<span id="思惑" class="fragment"></span><a href="#%E6%80%9D%E6%83%91"><i class="fa fa-link"></i></a>思惑</h1>

<p>個人的には、 PowerShell はスクリプトをゴリゴリ書くよりも、<br>
ちょこちょこ作業するのに向いていると思っている。<br>
ただ、しばらく使っていないと忘れたりするので、そういうものをまとめてみる。<br>
Linux で、grep とか使って、よくやりそうな感じのやつ。</p>

<p>共用パソコンなどの自分の環境以外でも使えることを想定しているので、<br>
できるだけデフォルトの状態で、できるものに限定する。</p>

<p>また、普段使い想定なので、タイプ数を減らすのを優先していたりするので、<br>
PowerShell の文法的には微妙なところも多少ある。</p>

<h1>
<span id="grep" class="fragment"></span><a href="#grep"><i class="fa fa-link"></i></a>grep</h1>

<p>それ <code>Select-String</code> でできるよ</p>

<div class="code-frame" data-lang="ps1"><div class="highlight"><pre><span></span><span class="nb">Select-String</span> <span class="n">-Path</span> <span class="p">.\</span><span class="n">foo</span><span class="p">.</span><span class="n">txt</span> <span class="n">-Pattern</span> <span class="s2">"bar"</span>
</pre></div></div>

<h1>
<span id="find--name-hogehoge" class="fragment"></span><a href="#find--name-hogehoge"><i class="fa fa-link"></i></a>find -name hogehoge</h1>

<p>それ（以下略</p>

<div class="code-frame" data-lang="ps1"><div class="highlight"><pre><span></span><span class="n">ls</span> <span class="n">-r</span> <span class="p">|</span> <span class="n">where</span> <span class="p">{</span> <span class="nv">$_</span><span class="p">.</span><span class="n">Name</span> <span class="o">-match</span> <span class="s2">"hogehoge"</span> <span class="p">}</span>
</pre></div></div>

<h1>
<span id="cat" class="fragment"></span><a href="#cat"><i class="fa fa-link"></i></a>cat</h1>

<div class="code-frame" data-lang="ps1"><div class="highlight"><pre><span></span><span class="nb">Get-Content</span> <span class="p">.\</span><span class="n">foo</span><span class="p">.</span><span class="n">txt</span>
</pre></div></div>

<p>最初から <code>cat</code> がエイリアスに設定されてるはずなので、 <code>cat</code> でも可</p>

<h1>
<span id="sort-uniq" class="fragment"></span><a href="#sort-uniq"><i class="fa fa-link"></i></a>sort, uniq</h1>

<div class="code-frame" data-lang="ps1"><div class="highlight"><pre><span></span><span class="nb">Get-Content</span> <span class="p">.\</span><span class="n">test</span><span class="p">.</span><span class="n">txt</span> <span class="p">|</span> <span class="nb">Sort-Object</span> <span class="p">|</span> <span class="nb">Get-Unique</span>

<span class="c"># デフォルトのエイリアスを使って、↓みたいにも可能</span>
<span class="n">cat</span> <span class="p">.\</span><span class="n">test</span><span class="p">.</span><span class="n">txt</span> <span class="p">|</span> <span class="n">sort</span> <span class="p">|</span> <span class="n">uniq</span>
</pre></div></div>

<h1>
<span id="wc--l" class="fragment"></span><a href="#wc--l"><i class="fa fa-link"></i></a>wc -l</h1>

<div class="code-frame" data-lang="ps1"><div class="highlight"><pre><span></span><span class="p">$(</span><span class="n">cat</span> <span class="p">.\</span><span class="n">test</span><span class="p">.</span><span class="n">txt</span><span class="p">).</span><span class="n">Length</span>
</pre></div></div>

<h1>
<span id="diff" class="fragment"></span><a href="#diff"><i class="fa fa-link"></i></a>diff</h1>

<div class="code-frame" data-lang="ps1"><div class="highlight"><pre><span></span><span class="nb">Compare-Object</span> <span class="p">$(</span><span class="n">cat</span> <span class="p">.\</span><span class="n">a</span><span class="p">.</span><span class="n">txt</span><span class="p">)</span> <span class="p">$(</span><span class="n">cat</span> <span class="p">.\</span><span class="n">b</span><span class="p">.</span><span class="n">txt</span><span class="p">)</span>
</pre></div></div>

<p>ただし、表示形式は微妙。 unified で見たい・・・</p>

<h1>
<span id="sed" class="fragment"></span><a href="#sed"><i class="fa fa-link"></i></a>sed</h1>

<div class="code-frame" data-lang="ps1"><div class="highlight"><pre><span></span><span class="nb">Get-Content</span> <span class="p">.\</span><span class="n">foo</span><span class="p">.</span><span class="n">txt</span> <span class="p">|</span> <span class="p">%</span> <span class="p">{</span> <span class="nv">$_</span> <span class="o">-replace</span> <span class="s2">"posh"</span><span class="p">,</span><span class="s2">"PowerShell"</span> <span class="p">}</span>
</pre></div></div>

<h1>
<span id="tail" class="fragment"></span><a href="#tail"><i class="fa fa-link"></i></a>tail</h1>

<div class="code-frame" data-lang="ps1"><div class="highlight"><pre><span></span><span class="c"># PowerShell 2.0</span>
<span class="nb">Get-Content</span> <span class="p">.\</span><span class="n">error</span><span class="p">.</span><span class="n">log</span> <span class="n">-Wait</span>

<span class="c"># PowerShell 3.0+</span>
<span class="nb">Get-Content</span> <span class="p">.\</span><span class="n">error</span><span class="p">.</span><span class="n">log</span> <span class="n">-Wait</span> <span class="n">-Tail</span> <span class="n">5</span>
</pre></div></div>

<h1>
<span id="wget" class="fragment"></span><a href="#wget"><i class="fa fa-link"></i></a>wget</h1>

<div class="code-frame" data-lang="ps1"><div class="highlight"><pre><span></span><span class="p">(</span><span class="nb">new-object</span> <span class="n">net</span><span class="p">.</span><span class="n">webclient</span><span class="p">).</span><span class="n">DownloadFile</span><span class="p">(</span><span class="s2">"URL"</span><span class="p">,</span> <span class="s2">"保存先の絶対パス"</span><span class="p">)</span>
</pre></div></div>

<p>新しめの PowerShell だと ↓ みたいにも可能</p>

<div class="code-frame" data-lang="ps1"><div class="highlight"><pre><span></span><span class="nb">Invoke-WebRequest</span> <span class="n">http</span><span class="err">:</span><span class="p">//</span><span class="n">files</span><span class="p">.</span><span class="n">kaoriya</span><span class="p">.</span><span class="n">net</span><span class="p">/</span><span class="n">goto</span><span class="p">/</span><span class="n">vim74w64</span> <span class="n">-OutFile</span> <span class="p">.\</span><span class="n">vim</span><span class="p">.</span><span class="n">zip</span>
</pre></div></div>

<h1>
<span id="curl" class="fragment"></span><a href="#curl"><i class="fa fa-link"></i></a>curl</h1>

<div class="code-frame" data-lang="ps1"><div class="highlight"><pre><span></span><span class="nb">Invoke-RestMethod</span> <span class="n">-Uri</span> <span class="s2">"http://localhost:1234/poshcomplete/"</span> <span class="n">-Method</span> <span class="n">POST</span> <span class="n">-Body</span> <span class="s2">"text=test"</span>
</pre></div></div>

<h1>
<span id="unzip" class="fragment"></span><a href="#unzip"><i class="fa fa-link"></i></a>unzip</h1>

<div class="code-frame" data-lang="ps1"><div class="highlight"><pre><span></span><span class="c"># .NET 4.5+</span>
<span class="c"># 末尾のセミコロンが無いと表示されないので付けています．付けていてもコードとしては動きます（どうみてもバッドノウハウｗ</span>
<span class="no">[System.IO.Compression.Zipfile]</span><span class="p">::</span><span class="n">ExtractToDirectory</span><span class="p">(</span><span class="s2">"圧縮ファイルの絶対パス"</span><span class="p">,</span> <span class="s2">"解凍先の絶対パス"</span><span class="p">);</span>
</pre></div></div>

<h1>
<span id="xargs" class="fragment"></span><a href="#xargs"><i class="fa fa-link"></i></a>xargs</h1>

<div class="code-frame" data-lang="ps1"><div class="highlight"><pre><span></span><span class="n">ls</span> <span class="p">.\</span> <span class="p">|</span> <span class="p">%</span> <span class="p">{</span> <span class="n">cat</span> <span class="nv">$_</span><span class="p">.</span><span class="n">FullName</span> <span class="p">}</span>
</pre></div></div>

<h1>
<span id="man" class="fragment"></span><a href="#man"><i class="fa fa-link"></i></a>man</h1>

<div class="code-frame" data-lang="ps1"><div class="highlight"><pre><span></span><span class="n">man</span> <span class="n">Foo-Bar</span>
</pre></div></div>

<h1>
<span id="その他便利そうなものを少し" class="fragment"></span><a href="#%E3%81%9D%E3%81%AE%E4%BB%96%E4%BE%BF%E5%88%A9%E3%81%9D%E3%81%86%E3%81%AA%E3%82%82%E3%81%AE%E3%82%92%E5%B0%91%E3%81%97"><i class="fa fa-link"></i></a>その他便利そうなものを少し</h1>

<h2>
<span id="なんとなくループ回したいときとか" class="fragment"></span><a href="#%E3%81%AA%E3%82%93%E3%81%A8%E3%81%AA%E3%81%8F%E3%83%AB%E3%83%BC%E3%83%97%E5%9B%9E%E3%81%97%E3%81%9F%E3%81%84%E3%81%A8%E3%81%8D%E3%81%A8%E3%81%8B"><i class="fa fa-link"></i></a>なんとなくループ回したいときとか</h2>

<div class="code-frame" data-lang="ps1"><div class="highlight"><pre><span></span><span class="s2">"PS"</span><span class="p">,</span> <span class="s2">"posh"</span><span class="p">,</span> <span class="s2">"PowerShell"</span> <span class="p">|</span> <span class="p">%</span> <span class="p">{</span> <span class="n">echo</span> <span class="nv">$_</span> <span class="p">}</span>
<span class="n">0</span><span class="p">..</span><span class="n">255</span> <span class="p">|</span> <span class="p">%</span> <span class="p">{</span> <span class="n">echo</span> <span class="nv">$_</span> <span class="p">}</span>
<span class="n">cat</span> <span class="p">.\</span><span class="n">filepathlist</span><span class="p">.</span><span class="n">txt</span> <span class="p">|</span> <span class="p">%</span> <span class="p">{</span> <span class="n">cat</span> <span class="nv">$_</span> <span class="p">}</span> <span class="c"># テキストファイルの中身を 1 行ずつループで回す</span>
</pre></div></div>

<h2>
<span id="応答なし" class="fragment"></span><a href="#%E5%BF%9C%E7%AD%94%E3%81%AA%E3%81%97"><i class="fa fa-link"></i></a>応答なし</h2>

<div class="code-frame" data-lang="ps1"><div class="highlight"><pre><span></span><span class="n">kill</span> <span class="n">-name</span> <span class="n">iexplore</span>
</pre></div></div>

<h2>
<span id="最終更新日時とかで絞り込みたいとき" class="fragment"></span><a href="#%E6%9C%80%E7%B5%82%E6%9B%B4%E6%96%B0%E6%97%A5%E6%99%82%E3%81%A8%E3%81%8B%E3%81%A7%E7%B5%9E%E3%82%8A%E8%BE%BC%E3%81%BF%E3%81%9F%E3%81%84%E3%81%A8%E3%81%8D"><i class="fa fa-link"></i></a>最終更新日時とかで絞り込みたいとき</h2>

<div class="code-frame" data-lang="ps1"><div class="highlight"><pre><span></span><span class="c"># 30日以内に更新した1KB以上のファイル一覧</span>
<span class="n">ls</span> <span class="p">|</span> <span class="n">where</span> <span class="p">{</span> <span class="p">($(</span><span class="nb">Get-Date</span><span class="p">)</span> <span class="p">-</span> <span class="nv">$_</span><span class="p">.</span><span class="n">LastWriteTime</span><span class="p">).</span><span class="n">Days</span> <span class="o">-lt</span> <span class="n">30</span> <span class="p">}</span> <span class="p">|</span> <span class="n">where</span> <span class="p">{</span> <span class="nv">$_</span><span class="p">.</span><span class="n">Length</span> <span class="o">-gt</span> <span class="n">1KB</span> <span class="p">}</span>
</pre></div></div>

<p>where で絞り込めるので、ファイルサイズとかで絞り込んだりする。</p>

<h2>
<span id="タイマー" class="fragment"></span><a href="#%E3%82%BF%E3%82%A4%E3%83%9E%E3%83%BC"><i class="fa fa-link"></i></a>タイマー</h2>

<div class="code-frame" data-lang="ps1"><div class="highlight"><pre><span></span><span class="nv">$n</span> <span class="p">=</span> <span class="n">3</span>
<span class="n">timeout</span> <span class="p">$(</span><span class="nv">$n</span> <span class="p">*</span> <span class="n">60</span><span class="p">);</span> <span class="n">shutdown</span> <span class="n">-h</span>
</pre></div></div>

<p>n 分後にハイバネーション</p>

<h2>
<span id="powershell-as-a-電卓" class="fragment"></span><a href="#powershell-as-a-%E9%9B%BB%E5%8D%93"><i class="fa fa-link"></i></a>PowerShell as a "電卓"</h2>

<div class="code-frame" data-lang="ps1"><div class="highlight"><pre><span></span><span class="n">1</span> <span class="p">+</span> <span class="n">2</span> <span class="p">+</span> <span class="no">[Math]</span><span class="p">::</span><span class="n">Pow</span><span class="p">(</span><span class="n">2</span><span class="p">,</span> <span class="n">10</span><span class="p">)</span>
</pre></div></div>

<p>普通に演算子を使って、単純な計算をしたり、 <code>System.Math</code> を使って、いろいろしたり</p>

<h2>
<span id="ディレクトリの中の合計サイズ調べるとき" class="fragment"></span><a href="#%E3%83%87%E3%82%A3%E3%83%AC%E3%82%AF%E3%83%88%E3%83%AA%E3%81%AE%E4%B8%AD%E3%81%AE%E5%90%88%E8%A8%88%E3%82%B5%E3%82%A4%E3%82%BA%E8%AA%BF%E3%81%B9%E3%82%8B%E3%81%A8%E3%81%8D"><i class="fa fa-link"></i></a>ディレクトリの中の合計サイズ調べるとき</h2>

<div class="code-frame" data-lang="ps1"><div class="highlight"><pre><span></span><span class="n">gci</span> <span class="p">.\</span> <span class="p">|</span> <span class="n">where</span> <span class="p">{</span> <span class="nv">$_</span><span class="p">.</span><span class="n">PSIsContainer</span> <span class="p">}</span> <span class="p">|</span> <span class="p">%</span> <span class="p">{</span> <span class="nb">Write-Host</span> <span class="n">-NoNewline</span> <span class="p">(</span><span class="nv">$_</span><span class="p">.</span><span class="n">Name</span> <span class="p">+</span> <span class="s2">"</span><span class="se">`t</span><span class="s2">"</span><span class="p">);</span> <span class="p">(</span><span class="n">gci</span> <span class="nv">$_</span><span class="p">.</span><span class="n">Name</span> <span class="n">-Recurse</span> <span class="p">|</span> <span class="n">measure</span> <span class="n">-Property</span> <span class="n">Length</span> <span class="n">-Sum</span><span class="p">).</span><span class="n">Sum</span><span class="p">;</span> <span class="p">}</span>
</pre></div></div>

<h2>
<span id="net-の確認" class="fragment"></span><a href="#net-%E3%81%AE%E7%A2%BA%E8%AA%8D"><i class="fa fa-link"></i></a>.NET の確認</h2>

<p>unzip とか、電卓の Math とかみたいに、.NET も呼べるので、ちょっとメソッド確認したいときとかに使える。<br>
読み込まれていないものを使いたいときは、 <code>Add-Type -AssemblyName System.HogeHoge</code> みたいにして読み込んで使う。</p>

<h2>
<span id="履歴からスクリプトを作る元を出力する" class="fragment"></span><a href="#%E5%B1%A5%E6%AD%B4%E3%81%8B%E3%82%89%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%97%E3%83%88%E3%82%92%E4%BD%9C%E3%82%8B%E5%85%83%E3%82%92%E5%87%BA%E5%8A%9B%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>履歴からスクリプトを作る元を出力する</h2>

<p>インタラクティブに実行していって、それを出力して編集してスクリプト作る</p>

<div class="code-frame" data-lang="ps1"><div class="highlight"><pre><span></span><span class="nb">Get-History</span> <span class="p">|</span> <span class="p">%</span> <span class="p">{</span> <span class="nb">Out-File</span> <span class="n">-InputObject</span> <span class="nv">$_</span><span class="p">.</span><span class="n">CommandLine</span> <span class="n">-Encoding</span> <span class="k">default</span> <span class="n">-Append</span> <span class="p">~/</span><span class="n">foobar</span><span class="p">.</span><span class="n">ps1</span> <span class="p">}</span>
</pre></div></div>

<h2>
<span id="jq" class="fragment"></span><a href="#jq"><i class="fa fa-link"></i></a>jq</h2>

<p>jq みたいなことできるコマンドも、比較的新しいバージョンならできる。<br>
オブジェクトで返ってくるので便利。<br>
csv とかも、オブジェクトで返ってくるコマンドレットがあるので便利。<br>
説明が面倒なので、下記のリンク先を見るとか、ググるとかしてください。</p>

<p><a href="http://tech.guitarrapc.com/entry/2013/08/10/220803" rel="nofollow noopener" target="_blank">PowerShell で JSON をファイル入出力 する - tech.guitarrapc.cóm</a></p>

<h2>
<span id="eject" class="fragment"></span><a href="#eject"><i class="fa fa-link"></i></a>eject</h2>

<div class="code-frame" data-lang="ps1"><div class="highlight"><pre><span></span><span class="p">(</span><span class="nb">New-Object</span> <span class="n">-com</span> <span class="n">WMPlayer</span><span class="p">.</span><span class="n">OCX</span><span class="p">.</span><span class="n">7</span><span class="p">).</span><span class="n">cdromCollection</span><span class="p">.</span><span class="n">Item</span><span class="p">(</span><span class="n">0</span><span class="p">).</span><span class="n">Eject</span><span class="p">()</span>
</pre></div></div>

<p>(☝ ՞ਊ ՞)☝ウイーン</p>

<h1>
<span id="おわりに" class="fragment"></span><a href="#%E3%81%8A%E3%82%8F%E3%82%8A%E3%81%AB"><i class="fa fa-link"></i></a>おわりに</h1>

<p>ここまで書いて気がついたけど、オライリーのクックブックに、似たようなこと書いてた（分量が全然違うけど<br>
他にも、見なおしてみたら、役に立ちそうなこと書いてあったから、再読するべき。</p>

<p>この手のシェルを使って仕事するのと、マウスでクリッククリックしまくって手作業で仕事を処理するのとでは、<br>
効率が全然違うので、面倒な仕事は、さっさと終わらせて、本質的な作業に時間を割けるようにしたいですね。</p>

<h1>
<span id="see-also" class="fragment"></span><a href="#see-also"><i class="fa fa-link"></i></a>see also</h1>

<ul>
<li><a href="http://winscript.jp/powershell/258" rel="nofollow noopener" target="_blank">CD-ROMトレイを取り出せるPowerShell関数、「Dismount-CDDrive」作った - PowerShell Scripting Weblog</a></li>
<li><a href="http://tech.guitarrapc.com/entry/2013/04/15/220408" rel="nofollow noopener" target="_blank">PowerShellでtail -fを再現する - tech.guitarrapc.com</a></li>
</ul>
</div>
	</td>
</tr>
</table>
<br />
<table border="1" style="height:150px;">
<tr>
	<td rowspan="3">58位</td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="thumb-up-120px.png" /></i>864</kbd>
		<a target="_blank" href="https://qiita.com/ukitaka/items/64e4589e37944bf032d9">Googleから学ぶ ヌルヌルサクサクなスライドメニュー</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-06-08<br />02:10:03</center>
	</td>
	<td style="width:200px;">
		<!--投稿者-->
		<center>
			@<a href="user/14846.html">ukitaka</a>(4件の記事)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/14846/profile-images/1474100048">
		</center>
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[CSS]</b> <b>[JavaScript]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<!--
		<div style="width:350px;height:150px;overflow:scroll;">%s</div>
		-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;">
<h2>
<span id="スマフォwebページのスライドメニュー" class="fragment"></span><a href="#%E3%82%B9%E3%83%9E%E3%83%95%E3%82%A9web%E3%83%9A%E3%83%BC%E3%82%B8%E3%81%AE%E3%82%B9%E3%83%A9%E3%82%A4%E3%83%89%E3%83%A1%E3%83%8B%E3%83%A5%E3%83%BC"><i class="fa fa-link"></i></a>スマフォwebページのスライドメニュー</h2>

<p>アプリでは当たり前のように実装されているスライドメニューですが、webページではなかなか使い心地のよいスライドメニューが実装されているのは見かけません。<br>
スマートフォンのブラウザではjavascriptでのアニメーションはどうしてもガタガタになってしまうし、ちらつきやスクロール制御のめんどくささからもうwebページでネイティブアプリ並のスライドメニューを実装するなんて無理と思っていました。<br>
Facebookのwebページですらボタンの反応は悪いしアニメーションも動かないし最悪です。</p>

<h2>
<span id="一方google先生はパーフェクトなスライドメニューを実装していた" class="fragment"></span><a href="#%E4%B8%80%E6%96%B9google%E5%85%88%E7%94%9F%E3%81%AF%E3%83%91%E3%83%BC%E3%83%95%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AA%E3%82%B9%E3%83%A9%E3%82%A4%E3%83%89%E3%83%A1%E3%83%8B%E3%83%A5%E3%83%BC%E3%82%92%E5%AE%9F%E8%A3%85%E3%81%97%E3%81%A6%E3%81%84%E3%81%9F"><i class="fa fa-link"></i></a>一方Google先生はパーフェクトなスライドメニューを実装していた</h2>

<p><a href="https://camo.qiitausercontent.com/b1853a3ff142315fbbd1d4c326eb53191a252ddf/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f31343834362f33313230363662322d663565632d396436612d373333332d3134376263623835396232342e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/b1853a3ff142315fbbd1d4c326eb53191a252ddf/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f31343834362f33313230363662322d663565632d396436612d373333332d3134376263623835396232342e706e67" alt="写真 2013-06-07 22 17 19.png" title="Googleのスマフォwebページ" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/14846/312066b2-f5ec-9d6a-7333-147bcb859b24.png"></a></p>

<p><strong>さすがGoogle先生！ 俺達に出来ないことを(</strong></p>

<p>Googleのスライドメニューは以下の点でパーフェクトです。<br>
1. スライドのアニメーションがとても滑らか・ちらつかない<br>
2.  ボタンの反応にストレスを感じない<br>
3.  メインコンテンツ部分のどこをさわってもメニューが閉じる<br>
4.  横スクロール対策がしっかりされている<br>
5. メニューだけスクロールできる</p>

<p><strong>今回はこれらがどのように実装されているのか調査しながら、jQueryのプラグインとしてスライドメニューを実装しました。</strong><br>
<strong>具体的なソースはあまり載せていないので、この記事の最後に貼ってあるサンプルページとgithubを見てみてください。</strong></p>

<h2>
<span id="アニメーションについて" class="fragment"></span><a href="#%E3%82%A2%E3%83%8B%E3%83%A1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6"><i class="fa fa-link"></i></a>アニメーションについて</h2>

<p>GoogleといえばFlash使わずjavascriptでなんでもやっちゃうイメージが強かったので、当然<strong>スライドのアニメーションもjavascriptを使っている</strong>と思ってソースを眺めていると、CSSにこんな記述がありました。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>    -webkit-transform: translateX(0);
    -webkit-transition: .2s -webkit-transform ease-in-out;
</pre></div></div>

<p>CSS3のアニメーション...だと...！<br>
<a href="http://www.htmq.com/css3/transform.shtml" rel="nofollow noopener" target="_blank">参考 CSS3 - transform</a></p>

<p><strong>スマートフォンではjavascriptではクラスの切り替えのみを行い、アニメーションはCSSに任せるのが定石</strong>のようですねー。<br>
また、Googleは<code>translateX</code>を使っていますが、よくある実装としては<code>translate3d</code>を使い<strong>GPUアクセラレーター</strong>を有効にすることでにぬるぬる描画を実現していることが多いです。</p>

<p>あとソースを読んでいて気づいた細かいテクニックとしては</p>

<h4>
<span id="実際に動かすのはコンテンツ部分" class="fragment"></span><a href="#%E5%AE%9F%E9%9A%9B%E3%81%AB%E5%8B%95%E3%81%8B%E3%81%99%E3%81%AE%E3%81%AF%E3%82%B3%E3%83%B3%E3%83%86%E3%83%B3%E3%83%84%E9%83%A8%E5%88%86"><i class="fa fa-link"></i></a>実際に動かすのはコンテンツ部分</h4>

<p>　　メニューはz-indexに負の値をもって奥に隠れているだけです。<br>
　　横スクロール対策にもなっている</p>

<h4>
<span id="目立たない要素はアニメーション時はhiddenにする" class="fragment"></span><a href="#%E7%9B%AE%E7%AB%8B%E3%81%9F%E3%81%AA%E3%81%84%E8%A6%81%E7%B4%A0%E3%81%AF%E3%82%A2%E3%83%8B%E3%83%A1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E6%99%82%E3%81%AFhidden%E3%81%AB%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>目立たない要素はアニメーション時はhiddenにする</h4>

<p>　　アニメーションを軽くするための努力</p>

<h4>
<span id="はじっこのちらつきは背景色でカバーする" class="fragment"></span><a href="#%E3%81%AF%E3%81%98%E3%81%A3%E3%81%93%E3%81%AE%E3%81%A1%E3%82%89%E3%81%A4%E3%81%8D%E3%81%AF%E8%83%8C%E6%99%AF%E8%89%B2%E3%81%A7%E3%82%AB%E3%83%90%E3%83%BC%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>はじっこのちらつきは背景色でカバーする</h4>

<p>　　実装してみてわかってのですが、メニュークローズ時にbodyの色がちらつきます。<br>
　　Googleではメニューとちらつく部分の背景色を同じにすることで対策しているようです。</p>

<h2>
<span id="イベントについて" class="fragment"></span><a href="#%E3%82%A4%E3%83%99%E3%83%B3%E3%83%88%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6"><i class="fa fa-link"></i></a>イベントについて</h2>

<p>Facebookのスライドメニューの反応が悪いように感じるのは、おそらく<code>onclick</code>でアニメーションを発火しているからです。<br>
スマートフォンでは<code>onclick</code>の発生が遅いので、スマフォ特有の<code>ontouchstart</code>や<code>ontouchend</code>を使うことでストレスなく操作できます。</p>

<p><strong>メニューオープンはメニューボタンのontouchend、クローズはコンテンツ部分のontouchstart</strong>にするのがよさそうです。</p>

<h2>
<span id="メニューのスクロールについて" class="fragment"></span><a href="#%E3%83%A1%E3%83%8B%E3%83%A5%E3%83%BC%E3%81%AE%E3%82%B9%E3%82%AF%E3%83%AD%E3%83%BC%E3%83%AB%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6"><i class="fa fa-link"></i></a>メニューのスクロールについて</h2>

<p>今回実装する上で一番苦労したがこれでした。<br>
実際にさわってみるとわかりますがGoogleのスライドメニューはネイティブアプリと同じようにメニュー部分だけがスクロールでき、項目が多い場合でも対応できます。</p>

<p>なぜ苦労したか、<strong>結論から言うとスクロールの処理を自前で書いていたからです。</strong></p>

<p>まず考えたのはメニュー部分を<code>overflow: scroll</code>などでスクロール可能にし、<code>event.preventDefault()</code>でページ全体にイベント伝播しないようにする方法でしたが、結局うまくいかず。<br>
困って再度Googleのソースを見てみるとメニューを囲っているdivに怪しい記述が...</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>style="-webkit-transform:translate3d(0px, 0px, 0px)"
</pre></div></div>

<p>さきほども登場した<code>translate3d</code>ですね！<br>
Googleのjsは当然 圧縮難読化されているので実際に確認してはいないのですが、どうやら<strong>メニュー部分の<code>ontouchmove</code>を拾って、styleにy軸方向の値を設定した<code>translate3d</code>を連続的に書き込むこと</strong>でスライドを実装しているようです。<br>
実際この実装方法でうまくいきました。</p>

<h2>
<span id="今回作成したプログラムのソース--サンプルページ" class="fragment"></span><a href="#%E4%BB%8A%E5%9B%9E%E4%BD%9C%E6%88%90%E3%81%97%E3%81%9F%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%A0%E3%81%AE%E3%82%BD%E3%83%BC%E3%82%B9--%E3%82%B5%E3%83%B3%E3%83%97%E3%83%AB%E3%83%9A%E3%83%BC%E3%82%B8"><i class="fa fa-link"></i></a>今回作成したプログラムのソース &amp; サンプルページ</h2>

<p>今回作ったものを載せておきます<br>
<a href="http://encircle.jp/sp/" rel="nofollow noopener" target="_blank">サンプルページ</a><br>
※iPhone5でのみ動作確認してあります<br>
※PCでは動きません(ontouch系が使えないので)</p>

<p>githubにもおいてあります<br>
<a href="https://github.com/ukitaka/jSlideMenu" rel="nofollow noopener" target="_blank">github - jSlideMenu</a></p>

<h2>
<span id="まとめ" class="fragment"></span><a href="#%E3%81%BE%E3%81%A8%E3%82%81"><i class="fa fa-link"></i></a>まとめ</h2>

<h4>
<span id="javascriptでなくcss3のアニメーションを使おう" class="fragment"></span><a href="#javascript%E3%81%A7%E3%81%AA%E3%81%8Fcss3%E3%81%AE%E3%82%A2%E3%83%8B%E3%83%A1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E3%82%92%E4%BD%BF%E3%81%8A%E3%81%86"><i class="fa fa-link"></i></a>・javascriptでなくCSS3のアニメーションを使おう</h4>

<h4>
<span id="ちらつくならtranslate3dを使おう" class="fragment"></span><a href="#%E3%81%A1%E3%82%89%E3%81%A4%E3%81%8F%E3%81%AA%E3%82%89translate3d%E3%82%92%E4%BD%BF%E3%81%8A%E3%81%86"><i class="fa fa-link"></i></a>・ちらつくならtranslate3dを使おう</h4>

<h4>
<span id="ontouch系を使おう" class="fragment"></span><a href="#ontouch%E7%B3%BB%E3%82%92%E4%BD%BF%E3%81%8A%E3%81%86"><i class="fa fa-link"></i></a>・ontouch系を使おう</h4>

<h2>
<span id="最後に" class="fragment"></span><a href="#%E6%9C%80%E5%BE%8C%E3%81%AB"><i class="fa fa-link"></i></a>最後に</h2>

<h4>
<span id="css3すげぇ" class="fragment"></span><a href="#css3%E3%81%99%E3%81%92%E3%81%87"><i class="fa fa-link"></i></a>CSS3すげぇ</h4>

<p>　角丸くできるだけかと思ってました。ごめんなさい。</p>

<h4>
<span id="googleすげぇ" class="fragment"></span><a href="#google%E3%81%99%E3%81%92%E3%81%87"><i class="fa fa-link"></i></a>Googleすげぇ</h4>

<p>　とても参考になりました。</p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1" style="height:150px;">
<tr>
	<td rowspan="3">59位</td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="thumb-up-120px.png" /></i>862</kbd>
		<a target="_blank" href="https://qiita.com/wadako111/items/5eb8e30aca1737ba6ba5">一日18時間VimでRailsを開発している僕が選ぶVim Tips 10選</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2014-02-08<br />21:37:25</center>
	</td>
	<td style="width:200px;">
		<!--投稿者-->
		<center>
			@<a href="user/9373.html">wadako111</a>(11件の記事)<br />(レジュプレス株式会社 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/9373/profile-images/1473757082">
		</center>
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Vim]</b> <b>[Rails]</b> <b>[Rails4]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<!--
		<div style="width:350px;height:150px;overflow:scroll;">%s</div>
		-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;">
<h3>
<span id="寝ている時間以外はvimとrailsを触っている僕が選ぶvim-tips10選を紹介します" class="fragment"></span><a href="#%E5%AF%9D%E3%81%A6%E3%81%84%E3%82%8B%E6%99%82%E9%96%93%E4%BB%A5%E5%A4%96%E3%81%AFvim%E3%81%A8rails%E3%82%92%E8%A7%A6%E3%81%A3%E3%81%A6%E3%81%84%E3%82%8B%E5%83%95%E3%81%8C%E9%81%B8%E3%81%B6vim-tips10%E9%81%B8%E3%82%92%E7%B4%B9%E4%BB%8B%E3%81%97%E3%81%BE%E3%81%99"><i class="fa fa-link"></i></a>寝ている時間以外はVimとRailsを触っている僕が選ぶVim Tips10選を紹介します。</h3>

<p>Vimを使い始めて3ヶ月ぐらいの人にオススメです。<br>
※ あんまりRailsは関係ありません。</p>

<h1>
<span id="diw-ノーマルモード" class="fragment"></span><a href="#diw-%E3%83%8E%E3%83%BC%E3%83%9E%E3%83%AB%E3%83%A2%E3%83%BC%E3%83%89"><i class="fa fa-link"></i></a>diw （ノーマルモード）</h1>

<h4>
<span id="カーソル上の単語を消す" class="fragment"></span><a href="#%E3%82%AB%E3%83%BC%E3%82%BD%E3%83%AB%E4%B8%8A%E3%81%AE%E5%8D%98%E8%AA%9E%E3%82%92%E6%B6%88%E3%81%99"><i class="fa fa-link"></i></a>カーソル上の単語を消す</h4>

<p>こいつがなくてはVimを使う意味が無いというほどよく使うコマンド。<br>
ノーマルモードで <code>hoge</code> という文字列上の、どこかにカーソルがある状態で<code>diw</code>とタイプすると<code>hoge</code>という単語が消えます。</p>

<p>この何を単語とするのか、その判定が非常に秀逸で、直感にマッチしていて便利です。<br>
たとえば、<code>|</code>をカーソル位置だとして、<br>
<code>ho|ge bar</code> -&gt; <code>bar</code><br>
<code>ho|ge.bar</code> -&gt; <code>.bar</code><br>
<code>"ho|ge"</code> -&gt; <code>""</code><br>
<code>&lt;di|v&gt;</code> -&gt; <code>&lt;&gt;</code></p>

<p>このように、うまい感じに特殊記号等を避けて、単語を削除してくれます。</p>

<p><code>ciw</code>とタイプすることで、<code>hoge</code>を削除後、挿入モードになることも可能。</p>

<h1>
<span id="di-ノーマルモード" class="fragment"></span><a href="#di-%E3%83%8E%E3%83%BC%E3%83%9E%E3%83%AB%E3%83%A2%E3%83%BC%E3%83%89"><i class="fa fa-link"></i></a>di" （ノーマルモード）</h1>

<h4>
<span id="ダブルコーテーションで囲まれた文字列を消す" class="fragment"></span><a href="#%E3%83%80%E3%83%96%E3%83%AB%E3%82%B3%E3%83%BC%E3%83%86%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E3%81%A7%E5%9B%B2%E3%81%BE%E3%82%8C%E3%81%9F%E6%96%87%E5%AD%97%E5%88%97%E3%82%92%E6%B6%88%E3%81%99"><i class="fa fa-link"></i></a>""（ダブルコーテーション）で囲まれた文字列を消す</h4>

<p><code>diw</code> と似たようなコマンドで、<code>""</code>で囲まれた文字列を消してくれます。<br>
このコマンドの便利なところは、カーソル位置が<code>""</code>内に無くても良いところ。</p>

<p>例えば、カーソル位置を<code>|</code>だとして、<br>
<code>hoge = "f|oo bar"</code>という状態で、<code>di"</code>とタイプすると、当然<code>hoge = "|"</code>になります。<br>
しかし、なんと、<br>
<code>ho|ge = "foo bar"</code> という状態で、<code>di"</code>とタイプしても<code>hoge = "|"</code>となります</p>

<p>つまり現在位置が<code>""</code>内に含まれて無くても、その行内で今あるカーソル位置よりも後ろに<code>""</code>で囲まれた文字列があれば、そこまで移動して消去してくれるのです。</p>

<h1>
<span id="-ノーマルモード" class="fragment"></span><a href="#-%E3%83%8E%E3%83%BC%E3%83%9E%E3%83%AB%E3%83%A2%E3%83%BC%E3%83%89"><i class="fa fa-link"></i></a>* （ノーマルモード）</h1>

<h4>
<span id="カーソル位置にある単語を検索する" class="fragment"></span><a href="#%E3%82%AB%E3%83%BC%E3%82%BD%E3%83%AB%E4%BD%8D%E7%BD%AE%E3%81%AB%E3%81%82%E3%82%8B%E5%8D%98%E8%AA%9E%E3%82%92%E6%A4%9C%E7%B4%A2%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>カーソル位置にある単語を検索する</h4>

<p><code>*</code> のお陰で自分で検索する文字列を打つことが半分以下に減りました。<br>
<code>*</code>は今あるカーソル位置の単語を検索してくれます。 <code>diw</code> と同じように、単語の判定が秀逸。</p>

<p><code>hoge fo|o bar</code> -&gt; <code>foo</code>を検索<br>
<code>fo|o.bar</code> -&gt; <code>foo</code>を検索</p>

<p>ControllerやModelで、変数がどこで使われているのかを素早く検索するときに便利です。</p>

<h1>
<span id="c-a-c-x-ノーマルモード" class="fragment"></span><a href="#c-a-c-x-%E3%83%8E%E3%83%BC%E3%83%9E%E3%83%AB%E3%83%A2%E3%83%BC%E3%83%89"><i class="fa fa-link"></i></a>C-a, C-x （ノーマルモード）</h1>

<h4>
<span id="数値をインクリメントデクリメントする" class="fragment"></span><a href="#%E6%95%B0%E5%80%A4%E3%82%92%E3%82%A4%E3%83%B3%E3%82%AF%E3%83%AA%E3%83%A1%E3%83%B3%E3%83%88%E3%83%87%E3%82%AF%E3%83%AA%E3%83%A1%E3%83%B3%E3%83%88%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>数値をインクリメント、デクリメントする</h4>

<p>ノーマルモードで <code>3</code> にカーソルがあったとして、<code>C-a</code>（Ctrl+a） とタイプすると <code>4</code>になります。<br>
また、<code>C-x</code>（Ctrl+x）とタイプすると、逆に<code>2</code>になります。</p>

<p>これだけ見ると全く使いどころの無いコマンドに見えますが、ある２つのテクニックを知っているだけで、<br>
CSSを書くのに非常に便利なコマンドになります。</p>

<h5>
<span id="数値と組み合わせる" class="fragment"></span><a href="#%E6%95%B0%E5%80%A4%E3%81%A8%E7%B5%84%E3%81%BF%E5%90%88%E3%82%8F%E3%81%9B%E3%82%8B"><i class="fa fa-link"></i></a>数値と組み合わせる</h5>

<p>ただ<code>C-a</code>とタイプするのではなく、<code>3C-a</code>, <code>10C-a</code>のようにコマンドの前に数値を入力します。<br>
Vimでは基本的に、先に数値を入力しておくことで、その数値回数だけそのあとのコマンドを繰り返します。<br>
つまり、<code>3C-a</code> は <code>C-a</code> を3回繰り返す、 <code>10C-a</code> は <code>C-a</code> を10回繰り返すという意味です。</p>

<p>これによって、例えばCSSで <code>margin: 8px</code>という記述があり、<code>15px</code>に直したいというときも <code>7C-a</code> で修正できます。</p>

<h5>
<span id="数値にカーソルを置かないで使う" class="fragment"></span><a href="#%E6%95%B0%E5%80%A4%E3%81%AB%E3%82%AB%E3%83%BC%E3%82%BD%E3%83%AB%E3%82%92%E7%BD%AE%E3%81%8B%E3%81%AA%E3%81%84%E3%81%A7%E4%BD%BF%E3%81%86"><i class="fa fa-link"></i></a>数値にカーソルを置かないで使う</h5>

<p>この <code>C-a</code>, <code>C-x</code> について、実はなんと数値上にカーソルがなくても使えます。<br>
先に紹介した <code>di"</code> のように、その行において、カーソルのある位置から後ろに数値があれば、それをインクリメントしてくれます。</p>

<p>したがって、 <code>ma|rgin: 8px</code> こんな状態だとしても、<code>5C-a</code> とタイプすることで <code>margin: |13px</code> と、インクリメントすることができ、更にカーソル位置も数値の場所に移動します。</p>

<p>CSSを書くときはこの<code>C-a</code>（Ctrl+a)と<code>C-x</code>（Ctrl+x）がないとやってられません。</p>

<h1>
<span id="unite" class="fragment"></span><a href="#unite"><i class="fa fa-link"></i></a>Unite</h1>

<h4>
<span id="ファイラ-httpsgithubcomshougounitevim-" class="fragment"></span><a href="#%E3%83%95%E3%82%A1%E3%82%A4%E3%83%A9-httpsgithubcomshougounitevim-"><i class="fa fa-link"></i></a>ファイラ（ <a href="https://github.com/Shougo/unite.vim" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/Shougo/unite.vim</a> ）</h4>

<p>唯一Railsに関係するTipsな気がします。Uniteの説明は「vim unite」でググれば色々と出てくることでしょう。<br>
※ :help unite でも簡単なexampleや説明があります。<br>
今回はuniteはファイラとして利用する場合について説明します。</p>

<p>とりあえずキーバインドとして僕は以下のように <code>.vimrc</code> に書いています。</p>

<div class="code-frame" data-lang="vim"><div class="highlight"><pre><span></span>NeoBundle <span class="s1">'Shougo/unite.vim'</span>
<span class="k">let</span> <span class="k">g</span>:unite_enable_start_insert <span class="p">=</span> <span class="m">1</span>
<span class="k">let</span> <span class="k">g</span>:unite_enable_split_vertically <span class="p">=</span> <span class="m">0</span>
<span class="k">let</span> <span class="k">g</span>:unite_winwidth <span class="p">=</span> <span class="m">40</span>
<span class="nb">nnoremap</span> <span class="p">&lt;</span><span class="k">silent</span><span class="p">&gt;</span> <span class="p">,</span>uf :<span class="p">&lt;</span>C<span class="p">-</span><span class="k">u</span><span class="p">&gt;</span>UniteWithBufferDir <span class="p">-</span>buffer<span class="p">-</span>name<span class="p">=</span><span class="k">files</span> <span class="k">file</span> <span class="k">file</span>/<span class="k">new</span><span class="p">&lt;</span>CR<span class="p">&gt;</span>
<span class="nb">nnoremap</span> <span class="p">&lt;</span><span class="k">silent</span><span class="p">&gt;</span> <span class="p">,</span>um :<span class="p">&lt;</span>C<span class="p">-</span><span class="k">u</span><span class="p">&gt;</span>Unite  file_mru <span class="p">&lt;</span>CR<span class="p">&gt;</span>
<span class="nb">nnoremap</span> <span class="p">&lt;</span><span class="k">silent</span><span class="p">&gt;</span> <span class="p">,</span>urc :<span class="p">&lt;</span>C<span class="p">-</span><span class="k">u</span><span class="p">&gt;</span>Unite file_rec<span class="sr">/async:app/</span>controllers/ <span class="p">&lt;</span>CR<span class="p">&gt;</span>
<span class="nb">nnoremap</span> <span class="p">&lt;</span><span class="k">silent</span><span class="p">&gt;</span> <span class="p">,</span>urfc :<span class="p">&lt;</span>C<span class="p">-</span><span class="k">u</span><span class="p">&gt;</span>Unite <span class="k">file</span> <span class="k">file</span><span class="sr">/new -input=app/</span>controllers/ <span class="p">&lt;</span>CR<span class="p">&gt;</span>
<span class="nb">nnoremap</span> <span class="p">&lt;</span><span class="k">silent</span><span class="p">&gt;</span> <span class="p">,</span>urm :<span class="p">&lt;</span>C<span class="p">-</span><span class="k">u</span><span class="p">&gt;</span>Unite file_rec<span class="sr">/async:app/</span>models/ <span class="p">&lt;</span>CR<span class="p">&gt;</span>
<span class="nb">nnoremap</span> <span class="p">&lt;</span><span class="k">silent</span><span class="p">&gt;</span> <span class="p">,</span>urfm :<span class="p">&lt;</span>C<span class="p">-</span><span class="k">u</span><span class="p">&gt;</span>Unite <span class="k">file</span> <span class="k">file</span><span class="sr">/new -input=app/</span>models/ <span class="p">&lt;</span>CR<span class="p">&gt;</span>
<span class="nb">nnoremap</span> <span class="p">&lt;</span><span class="k">silent</span><span class="p">&gt;</span> <span class="p">,</span>urv :<span class="p">&lt;</span>C<span class="p">-</span><span class="k">u</span><span class="p">&gt;</span>Unite file_rec<span class="sr">/async:app/</span>views/ <span class="p">&lt;</span>CR<span class="p">&gt;</span>
<span class="nb">nnoremap</span> <span class="p">&lt;</span><span class="k">silent</span><span class="p">&gt;</span> <span class="p">,</span>urfv :<span class="p">&lt;</span>C<span class="p">-</span><span class="k">u</span><span class="p">&gt;</span>Unite <span class="k">file</span> <span class="k">file</span><span class="sr">/new -input=app/</span>views/ <span class="p">&lt;</span>CR<span class="p">&gt;</span>
<span class="nb">nnoremap</span> <span class="p">&lt;</span><span class="k">silent</span><span class="p">&gt;</span> <span class="p">,</span>urs :<span class="p">&lt;</span>C<span class="p">-</span><span class="k">u</span><span class="p">&gt;</span>Unite file_rec<span class="sr">/async:app/</span>assets<span class="sr">/stylesheets/</span> <span class="p">&lt;</span>CR<span class="p">&gt;</span>
<span class="nb">nnoremap</span> <span class="p">&lt;</span><span class="k">silent</span><span class="p">&gt;</span> <span class="p">,</span>urfs :<span class="p">&lt;</span>C<span class="p">-</span><span class="k">u</span><span class="p">&gt;</span>Unite <span class="k">file</span> <span class="k">file</span><span class="sr">/new -input=app/</span>assets<span class="sr">/stylesheets/</span> <span class="p">&lt;</span>CR<span class="p">&gt;</span>
<span class="nb">nnoremap</span> <span class="p">&lt;</span><span class="k">silent</span><span class="p">&gt;</span> <span class="p">,</span>urj :<span class="p">&lt;</span>C<span class="p">-</span><span class="k">u</span><span class="p">&gt;</span>Unite file_rec<span class="sr">/async:app/</span>assets<span class="sr">/javascripts/</span> <span class="p">&lt;</span>CR<span class="p">&gt;</span>
<span class="nb">nnoremap</span> <span class="p">&lt;</span><span class="k">silent</span><span class="p">&gt;</span> <span class="p">,</span>urfj :<span class="p">&lt;</span>C<span class="p">-</span><span class="k">u</span><span class="p">&gt;</span>Unite <span class="k">file</span> <span class="k">file</span><span class="sr">/new -input=app/</span>assets<span class="sr">/javascripts/</span> <span class="p">&lt;</span>CR<span class="p">&gt;</span>
<span class="nb">nnoremap</span> <span class="p">&lt;</span><span class="k">silent</span><span class="p">&gt;</span> <span class="p">,</span>uro :<span class="p">&lt;</span>C<span class="p">-</span><span class="k">u</span><span class="p">&gt;</span>Unite file_rec<span class="sr">/async:config/</span> <span class="p">&lt;</span>CR<span class="p">&gt;</span>
<span class="nb">nnoremap</span> <span class="p">&lt;</span><span class="k">silent</span><span class="p">&gt;</span> <span class="p">,</span>urfo :<span class="p">&lt;</span>C<span class="p">-</span><span class="k">u</span><span class="p">&gt;</span>Unite <span class="k">file</span> <span class="k">file</span><span class="sr">/new -input=config/</span> <span class="p">&lt;</span>CR<span class="p">&gt;</span>
<span class="nb">nnoremap</span> <span class="p">&lt;</span><span class="k">silent</span><span class="p">&gt;</span> <span class="p">,</span>url :<span class="p">&lt;</span>C<span class="p">-</span><span class="k">u</span><span class="p">&gt;</span>Unite file_rec<span class="sr">/async:lib/</span> <span class="p">&lt;</span>CR<span class="p">&gt;</span>
<span class="nb">nnoremap</span> <span class="p">&lt;</span><span class="k">silent</span><span class="p">&gt;</span> <span class="p">,</span>urfl :<span class="p">&lt;</span>C<span class="p">-</span><span class="k">u</span><span class="p">&gt;</span>Unite <span class="k">file</span> <span class="k">file</span><span class="sr">/new -input=lib/</span> <span class="p">&lt;</span>CR<span class="p">&gt;</span>
<span class="nb">nnoremap</span> <span class="p">&lt;</span><span class="k">silent</span><span class="p">&gt;</span> <span class="p">,</span>urr :<span class="p">&lt;</span>C<span class="p">-</span><span class="k">u</span><span class="p">&gt;</span>Unite file_rec<span class="sr">/async:spec/</span> <span class="p">&lt;</span>CR<span class="p">&gt;</span>
<span class="nb">nnoremap</span> <span class="p">&lt;</span><span class="k">silent</span><span class="p">&gt;</span> <span class="p">,</span>urfr :<span class="p">&lt;</span>C<span class="p">-</span><span class="k">u</span><span class="p">&gt;</span>Unite <span class="k">file</span> <span class="k">file</span><span class="sr">/new -input=spec/</span> <span class="p">&lt;</span>CR<span class="p">&gt;</span>
</pre></div></div>

<p>実際に <code>,urc</code> 等をノーマルモードでタイプしてみると、どんな動きをするのか理解できると思います。<br>
以前は <code>rails.vim</code> をファイラとしては利用していたのですが、ファイル数の増加に伴い、 <code>:RView hoge.rb</code> のような指定方法は、補完を使ったとしても難しくなってしまい、Uniteに移行しました。<br>
この設定によって、rails.vim以上のファイル移動速度を発揮しています。</p>

<p>また、これは実行しているVimのカレントディレクトリを、Railsプロジェクト直下にしておく必要があります。</p>

<h1>
<span id="g-ノーマルモード" class="fragment"></span><a href="#g-%E3%83%8E%E3%83%BC%E3%83%9E%E3%83%AB%E3%83%A2%E3%83%BC%E3%83%89"><i class="fa fa-link"></i></a>g; （ノーマルモード）</h1>

<h4>
<span id="前に変更した場所へカーソルを移動する" class="fragment"></span><a href="#%E5%89%8D%E3%81%AB%E5%A4%89%E6%9B%B4%E3%81%97%E3%81%9F%E5%A0%B4%E6%89%80%E3%81%B8%E3%82%AB%E3%83%BC%E3%82%BD%E3%83%AB%E3%82%92%E7%A7%BB%E5%8B%95%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>前に変更した場所へカーソルを移動する</h4>

<p>Vimは他のエディタとは違い、いつどこで変更を行ったのかを記録しています。<br>
それをさかのぼって、前に変更したところにカーソルを持って行ってくれるのが、この <code>g;</code> です。</p>

<p>このコマンドの存在によって、例えば、大変な行数があるファイルを編集しているときに、そのファイルの先頭を参照し、またさきほど変更していたところから編集し直す、といったことが非常に容易になります。</p>

<p>あんまり知られてないけど、一度使い始めたら、無いと困っちゃうコマンドです。</p>

<h1>
<span id="c-h-いつでも" class="fragment"></span><a href="#c-h-%E3%81%84%E3%81%A4%E3%81%A7%E3%82%82"><i class="fa fa-link"></i></a>C-h （いつでも）</h1>

<h4>
<span id="backspacedeleteキー" class="fragment"></span><a href="#backspacedelete%E3%82%AD%E3%83%BC"><i class="fa fa-link"></i></a>backspace（delete）キー</h4>

<p>Vimはまるで関係ありませんが、 基本的に<code>C-h</code> はBackSpaceキー（OSXならばdelete）に相当します。<br>
backspaceはキーボードの右上にあり、これを使っていると右小指が痛くなってしまうので、手にやさしい <code>C-h</code> を使うことにしています。</p>

<h1>
<span id="c-m-いつでも" class="fragment"></span><a href="#c-m-%E3%81%84%E3%81%A4%E3%81%A7%E3%82%82"><i class="fa fa-link"></i></a>C-m （いつでも）</h1>

<h4>
<span id="enterキー" class="fragment"></span><a href="#enter%E3%82%AD%E3%83%BC"><i class="fa fa-link"></i></a>Enterキー</h4>

<p>こいつもVimに全く関係ありませんが、基本的に <code>C-m</code>はEnterキーに相当します。<br>
私は普段、日本語キーボードを利用しておりEnterキーは非常に遠く、また右小指が痛くなってしまうので、これからは一生 <code>C-m</code> を使うことに決めました。</p>

<h1>
<span id="dap-ノーマルモード" class="fragment"></span><a href="#dap-%E3%83%8E%E3%83%BC%E3%83%9E%E3%83%AB%E3%83%A2%E3%83%BC%E3%83%89"><i class="fa fa-link"></i></a>dap （ノーマルモード）</h1>

<h4>
<span id="パラグラフを消去" class="fragment"></span><a href="#%E3%83%91%E3%83%A9%E3%82%B0%E3%83%A9%E3%83%95%E3%82%92%E6%B6%88%E5%8E%BB"><i class="fa fa-link"></i></a>パラグラフを消去</h4>

<div class="code-frame" data-lang="rb"><div class="highlight"><pre><span></span>  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">hoge</span>
    <span class="n">foo</span> <span class="n">hoge</span> <span class="n">bar</span>
    <span class="n">bar</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="o">...</span>
</pre></div></div>

<p>この状態で <code>def hoge ... end</code> の中にカーソルがあるとき、 <code>dap</code> とタイプすることで</p>

<div class="code-frame" data-lang="rb"><div class="highlight"><pre><span></span>  <span class="k">end</span>

  <span class="k">def</span> <span class="o">...</span>
</pre></div></div>

<p><code>def hoge ... end</code> のパラグラフが消去されます。</p>

<p>どんな要素を持ってパラグラフなのかは、詳しくは調べてはいませんが、「改行のない連続した行」な気がします。<br>
つまり、</p>

<div class="code-frame" data-lang="rb"><div class="highlight"><pre><span></span><span class="n">hoge</span> <span class="n">hoge</span>

<span class="n">foo</span> <span class="n">foo</span>
<span class="n">foo</span> <span class="n">foo</span>

<span class="n">bar</span> <span class="n">bar</span>
<span class="n">bar</span> <span class="n">bar</span>
<span class="n">bar</span> <span class="n">bar</span>
</pre></div></div>

<p>このような状態ならば、 <code>hoge</code> のパラグラフ、 <code>foo</code> のパラグラフ、 <code>bar</code> のパラグラフの3つのパラグラフが存在します。</p>

<p>例に上げたとおり、メソッドをまるまる削除するのに便利です。</p>

<h1>
<span id="c--ノーマルモード" class="fragment"></span><a href="#c--%E3%83%8E%E3%83%BC%E3%83%9E%E3%83%AB%E3%83%A2%E3%83%BC%E3%83%89"><i class="fa fa-link"></i></a>C-^ （ノーマルモード）</h1>

<h4>
<span id="前に開いたファイルを開く" class="fragment"></span><a href="#%E5%89%8D%E3%81%AB%E9%96%8B%E3%81%84%E3%81%9F%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%82%92%E9%96%8B%E3%81%8F"><i class="fa fa-link"></i></a>前に開いたファイルを開く</h4>

<p>そのウィンドウで以前開いていたファイルを開きます。<br>
<code>A.rb</code>を開いた後、<code>B.rb</code> を開いたところで <code>C-^</code> とタイプすると <code>A.rb</code> が開きます。</p>

<p>このコマンドの良い点は、 <code>C-^</code> によって <code>A.rb</code> が開かれた状態で、また <code>C-^</code> とタイプすると、<code>B.rb</code> に戻ってくる点です。<br>
往々にして、他のエディタはこのようなコマンドは、どんどん前のファイルを開いていってしまい、結局元のファイルを開くことが難しくなってしまうことが多いのですが、このコマンドならば、ちょっと参照するために <code>A.rb</code> を開き、またすぐ <code>B.rb</code> に戻ってくる、みたいなことが簡単にできるのです。流石。</p>

<h1>
<span id="タブ機能" class="fragment"></span><a href="#%E3%82%BF%E3%83%96%E6%A9%9F%E8%83%BD"><i class="fa fa-link"></i></a>タブ機能</h1>

<h4>
<span id="vimにもタブ機能があったんです" class="fragment"></span><a href="#vim%E3%81%AB%E3%82%82%E3%82%BF%E3%83%96%E6%A9%9F%E8%83%BD%E3%81%8C%E3%81%82%E3%81%A3%E3%81%9F%E3%82%93%E3%81%A7%E3%81%99"><i class="fa fa-link"></i></a>Vimにもタブ機能があったんです。</h4>

<p>僕はVimを使い出して、1年ぐらいしてから知ったのですが、VimにもChromeのようなタブ機能があったんです。<br>
<a href="http://qiita.com/wadako111/items/755e753677dd72d8036d" id="reference-58011b2049e551e5fa6c">vimのすごい便利なのにあまり使われていない「タブページ」機能</a><br>
以前僕が書いた記事を参照してみると良いでしょう。</p>

<p><a href="https://camo.qiitausercontent.com/7c8142ae2f0a87f6b490c5647b8f10b63561df49/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f393337332f33316665646163342d356639342d666462342d623062302d3566613236636630643866612e6a706567" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/7c8142ae2f0a87f6b490c5647b8f10b63561df49/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f393337332f33316665646163342d356639342d666462342d623062302d3566613236636630643866612e6a706567" alt="5e38065d-2b82-248c-e9fd-e5a62c270b61.jpeg" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/9373/31fedac4-5f94-fdb4-b0b0-5fa26cf0d8fa.jpeg"></a></p>

<p>　<br>
　<br>
以上です。知っていた事項もあるかもしれませんが、少なくとも僕が上記の事項に気づくのには、Vimを使い出してから1年ぐらいかかりました。<br>
皆様のVimライフがより良いものになれば幸いです。</p>

<p>P.S.<br>
<a href="http://storys.jp" rel="nofollow noopener" target="_blank">STORYS.JP</a>、 <a href="https://coincheck.jp" rel="nofollow noopener" target="_blank">coincheck</a> などのサービスを運営、開発しています。興味のある方はぜひ <a href="http://qiita.com/wadako111">和田</a>まで連絡を！</p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1" style="height:150px;">
<tr>
	<td rowspan="3">60位</td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="thumb-up-120px.png" /></i>851</kbd>
		<a target="_blank" href="https://qiita.com/kuni-nakaji/items/d11219e4ad7c74ece748">調べなきゃ寝れない！と調べたら余計に寝れなくなったソケットの話</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2014-03-02<br />15:02:53</center>
	</td>
	<td style="width:200px;">
		<!--投稿者-->
		<center>
			@<a href="user/8726.html">kuni-nakaji</a>(17件の記事)<br><img width="80" height="80" src="https://gravatar.com/avatar/616811c1dbc547b20370eb444106d841?d=https%3A%2F%2Fidenticons.github.com%2F9c6a6d1079bb1facaa63a8f0aaa5e195.png&r=x">
		</center>
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Linux]</b> <b>[MySQL]</b> <b>[nginx]</b> <b>[CentOS]</b> <b>[Memcached]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<!--
		<div style="width:350px;height:150px;overflow:scroll;">%s</div>
		-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;">
<h1>
<span id="課題" class="fragment"></span><a href="#%E8%AA%B2%E9%A1%8C"><i class="fa fa-link"></i></a>課題</h1>

<p>最近良く名前を聞くようになったソケット通信が速度が早くて良い的な話をしてたものの、ソケットってそんなに最近出てきたようなことだっけか？と曖昧になったので調べなきゃ寝れない！ということで調べてみた</p>

<h1>
<span id="プロトコルの種類" class="fragment"></span><a href="#%E3%83%97%E3%83%AD%E3%83%88%E3%82%B3%E3%83%AB%E3%81%AE%E7%A8%AE%E9%A1%9E"><i class="fa fa-link"></i></a>プロトコルの種類</h1>

<p>通信といえばTCP/UDPだろうと再度確認</p>

<table>
<thead>
<tr>
<th>プロトコル</th>
<th>概要</th>
<th>備考</th>
</tr>
</thead>
<tbody>
<tr>
<td>TCP/IP</td>
<td>信頼性が高い</td>
<td>データグラム(電文)が届いたかどうかを誤りチェックしていて、届いていない場合は再送要求をする。<br>到着順序が保証されていて、到着したデータは並べ替えられる。<br>それらが失敗した場合はエラーになるようになっている</td>
</tr>
<tr>
<td>UDP/IP</td>
<td>基本的な通信</td>
<td>データグラム(電文)は一方的に送信され、相手に届いたかどうかのチェック等はしない。<br>エラーの検知はしない。変な受信データもただ破棄されるのみのため、その分単純で高速。</td>
</tr>
</tbody>
</table>

<p>ただ、ソケットの話はここでは出てこない</p>

<h1>
<span id="ソケットはどこの話か" class="fragment"></span><a href="#%E3%82%BD%E3%82%B1%E3%83%83%E3%83%88%E3%81%AF%E3%81%A9%E3%81%93%E3%81%AE%E8%A9%B1%E3%81%8B"><i class="fa fa-link"></i></a>ソケットはどこの話か？</h1>

<p>ソケットのタイプ<br>
<a href="https://camo.qiitausercontent.com/f1c46f5df4cc2dc78cfbfae2dc9825f0fb4b4c86/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f383732362f66306135366637332d623166352d393562622d386462612d3539643838396537366536322e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/f1c46f5df4cc2dc78cfbfae2dc9825f0fb4b4c86/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f383732362f66306135366637332d623166352d393562622d386462612d3539643838396537366536322e706e67" alt="osi.png" title="osi.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/8726/f0a56f73-b1f5-95bb-8dba-59d889e76e62.png"></a></p>

<p>OSI参照モデルではセッション層部分。TCP/UDPより上のレイヤーだった。</p>

<h1>
<span id="あれソケットって普通の通信じゃね" class="fragment"></span><a href="#%E3%81%82%E3%82%8C%E3%82%BD%E3%82%B1%E3%83%83%E3%83%88%E3%81%A3%E3%81%A6%E6%99%AE%E9%80%9A%E3%81%AE%E9%80%9A%E4%BF%A1%E3%81%98%E3%82%83%E3%81%AD"><i class="fa fa-link"></i></a>あれ？ソケットって普通の通信じゃね？</h1>

<p>ソケットにも種類があるのか調べてみた。</p>

<table>
<thead>
<tr>
<th>ソケット</th>
<th>概要</th>
<th>特定方法</th>
<th>通信箇所</th>
</tr>
</thead>
<tbody>
<tr>
<td>INETドメイン</td>
<td>ネットワーク上でマシンを越えてのプロセス間通信</td>
<td>IPアドレス+ポート番号</td>
<td>他マシンと通信可</td>
</tr>
<tr>
<td>UNIXドメイン</td>
<td>同じマシン上で動いているプロセスが通信を行うためのソケット。<br>アドレス・名前空間としてファイルシステムを使用している。<br>ファイルシステム内のinodeとしてプロセスから参照される。</td>
<td>ファイル名で一致</td>
<td>自マシンのみ</td>
</tr>
</tbody>
</table>

<p>なるほど、最近ソケット通信、ソケット通信と言ってるのはUNIXドメインソケットの事か！</p>

<h1>
<span id="unixドメインソケットって何がいいの" class="fragment"></span><a href="#unix%E3%83%89%E3%83%A1%E3%82%A4%E3%83%B3%E3%82%BD%E3%82%B1%E3%83%83%E3%83%88%E3%81%A3%E3%81%A6%E4%BD%95%E3%81%8C%E3%81%84%E3%81%84%E3%81%AE"><i class="fa fa-link"></i></a>UNIXドメインソケットって何がいいの？</h1>

<p><a href="http://osnet.cs.binghamton.edu/publications/TR-20070820.pdf" rel="nofollow noopener" target="_blank">Performance Analysis of Various Mechanisms for Inter-process Communication</a>に素晴らしい検証があった。</p>

<blockquote>
<p>It was hypothesized that pipes would have the highest throughtput due to its limited functionality, since it is half-duplex, but this was not true. For almost all of the data sizes transferred, Unix domain sockets performed better than both TCP sockets and pipes, as can be seen in Figure 1 below.</p>

<p>On some machines, Unix domain sockets reached transfer rates as high as 1500 MB/s. </p>
</blockquote>

<p><a href="https://camo.qiitausercontent.com/191ba4a618b4744cfe64066c25b458499c8648d7/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f383732362f61386162366330352d356235612d643935312d633839612d3531303438343663313963382e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/191ba4a618b4744cfe64066c25b458499c8648d7/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f383732362f61386162366330352d356235612d643935312d633839612d3531303438343663313963382e706e67" alt="osnet_cs_binghamton_edu_publications_TR-20070820_pdf-2.png" title="osnet_cs_binghamton_edu_publications_TR-20070820_pdf-2.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/8726/a8ab6c05-5b5a-d951-c89a-5104846c19c8.png"></a></p>

<p>UNIXドメインソケットは、TCPソケット(INETドメインソケット)よりも遥かにスループットが優れてるらしい。Solaris(UltraSPARC processor)ではアーキテクチャの違いからUNIXドメインソケットのほうが遅いらしい。</p>

<p>よし、これで寝れる</p>

<p><a href="https://twitter.com/pnoordhuis/status/195614999283109888" rel="nofollow noopener" target="_blank">Redis コア開発者 @pnoordhuis のツイート</a></p>

<blockquote>
<p>TIL that "an abstract socket address is distinguished by the fact that sun_path[0] is a null byte ('\0')". Anybody knows why this exists?</p>
</blockquote>

<p>えーと、抽象名前空間ソケット？？まだ、UNIXドメインソケットにも種類があるのか？</p>

<h1>
<span id="unixドメインソケットの種類" class="fragment"></span><a href="#unix%E3%83%89%E3%83%A1%E3%82%A4%E3%83%B3%E3%82%BD%E3%82%B1%E3%83%83%E3%83%88%E3%81%AE%E7%A8%AE%E9%A1%9E"><i class="fa fa-link"></i></a>UNIXドメインソケットの種類</h1>

<p><a href="http://man7.org/linux/man-pages/man7/unix.7.html" rel="nofollow noopener" target="_blank">unix - sockets for local interprocess communication</a></p>

<table>
<thead>
<tr>
<th>種類</th>
<th>概要</th>
</tr>
</thead>
<tbody>
<tr>
<td>ファイルシステムパス名(pathname)</td>
<td>きっと一番知られている一般的な手法。<a href="http://linuxjm.sourceforge.jp/html/LDP_man-pages/man2/bind.2.html" rel="nofollow noopener" target="_blank">bind(2)</a>を使用して、NULL終端(\0)されたファイルシステム上のパスに結びつけることができる。ファイルを使用しているため、パーミッションを調整する必要がある。サーバプロセスが終了するときには、<a href="http://linuxjm.sourceforge.jp/html/LDP_man-pages/man2/unlink.2.html" rel="nofollow noopener" target="_blank">unlink(2)</a>で名前を削除し、場合によってはそれが参照しているファイルも削除するのがお作法。</td>
</tr>
<tr>
<td>無名(unnamed)</td>
<td>
<a href="http://linuxjm.sourceforge.jp/html/LDP_man-pages/man2/bind.2.html" rel="nofollow noopener" target="_blank">bind(2)</a>を使ってパス名に結び付けることができないストリーム型のソケットは名前を持たない。<a href="http://linuxjm.sourceforge.jp/html/LDP_man-pages/man2/socketpair.2.html" rel="nofollow noopener" target="_blank">socketpair(2)</a>を使うと、名前のついていない CONNECTED なソケットのペアが生成される。fork してファイルディスクリプターを繋ぎ直してあげれば、pipe で実現するのと同じような双方向のプロセス間通信ができる。</td>
</tr>
<tr>
<td>抽象名前空間(abstract)</td>
<td>sun_pathにファイルシステムのパスではなく、NULLバイト(\0)であることで区別される。NULLバイト以降に名前(文字列)を渡すが、ファイルパス名とは関係ない。ファイルシステムと紐付いていないので、 ファイルシステムのパーミッションなどに関係なくソケット通信できてしまう。Linuxでのみ利用可能。<a href="http://linuxjm.sourceforge.jp/html/LDP_man-pages/man2/unlink.2.html" rel="nofollow noopener" target="_blank">unlink(2)</a>で終了する必要がない。</td>
</tr>
</tbody>
</table>

<h1>
<span id="どのunixドメインかを見極めるには" class="fragment"></span><a href="#%E3%81%A9%E3%81%AEunix%E3%83%89%E3%83%A1%E3%82%A4%E3%83%B3%E3%81%8B%E3%82%92%E8%A6%8B%E6%A5%B5%E3%82%81%E3%82%8B%E3%81%AB%E3%81%AF"><i class="fa fa-link"></i></a>どのUNIXドメインかを見極めるには</h1>

<p><code>$netstat -al --protocol=unix</code> で確認する</p>

<h3>
<span id="ファイルシステムパス名" class="fragment"></span><a href="#%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%82%B7%E3%82%B9%E3%83%86%E3%83%A0%E3%83%91%E3%82%B9%E5%90%8D"><i class="fa fa-link"></i></a>ファイルシステムパス名</h3>

<p>I-Node path部分にファイルパス名が表示されている</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>Active UNIX domain sockets (only servers)
Proto RefCnt Flags       Type       State         I-Node Path
unix  2      [ ACC ]     STREAM     LISTENING     154823 /var/lib/mysql/mysql.sock
</pre></div></div>

<h3>
<span id="無名" class="fragment"></span><a href="#%E7%84%A1%E5%90%8D"><i class="fa fa-link"></i></a>無名</h3>

<p>I-Nodeは割り振られるが、pathは表示されない</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>Active UNIX domain sockets (only servers)
Proto RefCnt Flags       Type       State         I-Node Path
unix  3      [ ]         STREAM     CONNECTED     175322
</pre></div></div>

<h3>
<span id="抽象名前空間" class="fragment"></span><a href="#%E6%8A%BD%E8%B1%A1%E5%90%8D%E5%89%8D%E7%A9%BA%E9%96%93"><i class="fa fa-link"></i></a>抽象名前空間</h3>

<p>I-Node path部分に@がついた名前が表示される</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>Active UNIX domain sockets (only servers)
Proto RefCnt Flags       Type       State         I-Node Path
unix  2      [ ACC ]     STREAM     LISTENING     6653   @/com/ubuntu/upstart
</pre></div></div>

<h1>
<span id="unixドメインソケットをサポートしているサービス" class="fragment"></span><a href="#unix%E3%83%89%E3%83%A1%E3%82%A4%E3%83%B3%E3%82%BD%E3%82%B1%E3%83%83%E3%83%88%E3%82%92%E3%82%B5%E3%83%9D%E3%83%BC%E3%83%88%E3%81%97%E3%81%A6%E3%81%84%E3%82%8B%E3%82%B5%E3%83%BC%E3%83%93%E3%82%B9"><i class="fa fa-link"></i></a>UNIXドメインソケットをサポートしているサービス</h1>

<table>
<thead>
<tr>
<th>ミドルウェア</th>
<th>概要</th>
<th>種類</th>
<th>使用方法</th>
<th>連携ミドルウェア</th>
</tr>
</thead>
<tbody>
<tr>
<td>Nginx</td>
<td>web server</td>
<td>pathname</td>
<td><a href="http://wiki.nginx.org/HttpUpstreamModule" rel="nofollow noopener" target="_blank">server divective</a></td>
<td>unicorn, gunicorn, php-fpm, etc...</td>
</tr>
<tr>
<td>Unicorn</td>
<td>ap server</td>
<td>pathname</td>
<td><a href="http://unicorn.bogomips.org/Unicorn/Configurator.html" rel="nofollow noopener" target="_blank">Public Instance Methods</a></td>
<td></td>
</tr>
<tr>
<td>Mysql</td>
<td>db server</td>
<td>pathname</td>
<td></td>
<td></td>
</tr>
<tr>
<td>Redis</td>
<td>KVS</td>
<td>pathname</td>
<td><a href="http://redis.io/topics/benchmarks" rel="nofollow noopener" target="_blank">How fast is Redis?</a></td>
<td></td>
</tr>
<tr>
<td>Memcached</td>
<td>KVS</td>
<td>pathname</td>
<td><a href="http://docs.oracle.com/cd/E17952_01/refman-5.6-en/ha-memcached-using.html" rel="nofollow noopener" target="_blank">Using memcached</a></td>
<td></td>
</tr>
<tr>
<td>upstart</td>
<td>deamon</td>
<td>abstract</td>
<td></td>
<td></td>
</tr>
<tr>
<td>sytemd</td>
<td>deamon</td>
<td>abstract</td>
<td></td>
<td></td>
</tr>
<tr>
<td>OS?</td>
<td>kernelプロセス?</td>
<td>unnamed</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>

<h1>
<span id="まとめ" class="fragment"></span><a href="#%E3%81%BE%E3%81%A8%E3%82%81"><i class="fa fa-link"></i></a>まとめ</h1>

<p>ソケット通信は今度からUNIXドメインソケット通信と言うこと(どのマニュアルにもちゃんと書いてあったけど笑)。TCPで接続することばっかりやってきたので、気にもしてなかったがKVSとかの接続はUNIXドメインソケット通信にしたらもう少し効率よく使えるのではないかと。まだまだ、調べたらいろいろありそうなので継続調査。</p>

<p>もう寝ます笑</p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1" style="height:150px;">
<tr>
	<td rowspan="3">61位</td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="thumb-up-120px.png" /></i>849</kbd>
		<a target="_blank" href="https://qiita.com/sky_y/items/80bcd0f353ef5b8980ee">多様なフォーマットに対応！ドキュメント変換ツールPandocを知ろう</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2012-12-24<br />16:46:38</center>
	</td>
	<td style="width:200px;">
		<!--投稿者-->
		<center>
			@<a href="user/10473.html">sky_y</a>(21件の記事)<br />(フリープログラマ 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/10473/profile-images/1473681716">
		</center>
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[HTML]</b> <b>[Haskell]</b> <b>[TeX]</b> <b>[Markdown]</b> <b>[Pandoc]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<!--
		<div style="width:350px;height:150px;overflow:scroll;">%s</div>
		-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>==============================================</p>

<h2>
<span id="追記140207" class="fragment"></span><a href="#%E8%BF%BD%E8%A8%98140207"><i class="fa fa-link"></i></a>追記（14.02.07）</h2>

<p><a href="http://johnmacfarlane.net/pandoc/README.html" rel="nofollow noopener" target="_blank">Pandoc User’s Guide</a>を日本語に全訳しました。<br>
よろしければご参照ください。</p>

<ul>
<li><a href="http://sky-y.github.io/site-pandoc-jp/users-guide/" rel="nofollow noopener" target="_blank">Pandoc ユーザーズガイド 日本語版</a></li>
</ul>

<h2>
<span id="はじめに" class="fragment"></span><a href="#%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB"><i class="fa fa-link"></i></a>はじめに</h2>

<p>今回は、ドキュメント作成Tips Advent Calendar 2012の1日目<br>
（<a href="http://qiita.com/items/b92e9ce4b941545c8af5">マインドマップから全てを紡ぎ出す - XMind+Pandocのドキュメント作成術 -</a>）<br>
で少し紹介した<strong>Pandoc</strong>というツールについて、もう少し深く掘り下げて紹介したいと思います。</p>

<h3>
<span id="markdownとかrestructuredtextとか流行ってますよね" class="fragment"></span><a href="#markdown%E3%81%A8%E3%81%8Brestructuredtext%E3%81%A8%E3%81%8B%E6%B5%81%E8%A1%8C%E3%81%A3%E3%81%A6%E3%81%BE%E3%81%99%E3%82%88%E3%81%AD"><i class="fa fa-link"></i></a>MarkdownとかreStructuredTextとか、流行ってますよね</h3>

<p>いわゆる軽量マークアップ言語が最近流行しています。特にMarkdownは猫も杓子もMarkdownな状態ですね。</p>

<p>一方で、Word文書、LaTeX、PDFなどの形式が提出文書として指定される場合も多々あります。</p>

<p>MarkdownやreSTで書いた文書を色々なフォーマットに変換できたら嬉しいですよね。</p>

<h3>
<span id="電子書籍epubも流行ってますよね" class="fragment"></span><a href="#%E9%9B%BB%E5%AD%90%E6%9B%B8%E7%B1%8Depub%E3%82%82%E6%B5%81%E8%A1%8C%E3%81%A3%E3%81%A6%E3%81%BE%E3%81%99%E3%82%88%E3%81%AD"><i class="fa fa-link"></i></a>電子書籍（EPUB）も流行ってますよね</h3>

<p>Kindleの上陸により、電子書籍を作成する需要が高まっています。</p>

<p>一方で、HTMLで書いた文書がしこたま溜まっていたり、<br>
（特に学術系の方は）LaTeXで作成した本や論文がいっぱいあったりして、<br>
それらを電子書籍化したい、という方も多いと思います。</p>

<p>HTMLやLaTeXがEPUBに変換できたら嬉しいですよね。</p>

<h3>
<span id="それらを実現するのがpandocです" class="fragment"></span><a href="#%E3%81%9D%E3%82%8C%E3%82%89%E3%82%92%E5%AE%9F%E7%8F%BE%E3%81%99%E3%82%8B%E3%81%AE%E3%81%8Cpandoc%E3%81%A7%E3%81%99"><i class="fa fa-link"></i></a>それらを実現するのがPandocです</h3>

<p>Pandocは<strong>Markdown, HTML, LaTeX, reStructuredTextなどを<br>
様々な形式(Markdown, reST, HTML, LaTeX, Word, PDFなどなど)に変換出来る強力なツールです。</strong></p>

<p>Pandocが日本であまり知られていないのは、非常に残念に思います。<br>
ここでは、ドキュメント作成の強い味方となるPandocについて、入門編として紹介します。</p>

<h2>
<span id="pandocとは" class="fragment"></span><a href="#pandoc%E3%81%A8%E3%81%AF"><i class="fa fa-link"></i></a>Pandocとは</h2>

<p>Pandocは、Haskell製のドキュメント変換ツールです。<br>
この手のツールとしては、reStructuredTextを用いる<a href="http://sphinx-users.jp/" rel="nofollow noopener" target="_blank">Sphinx</a>が有名で、<br>
他にも特定のマークアップ言語用のツールが多数存在します。</p>

<p>しかしながら、Pandocはこのようなツールとは大きく違う点があります。<br>
それは、<strong>対応フォーマットが恐ろしく豊富な点</strong>と、<strong>開発が活発な点です</strong>。</p>

<h3>
<span id="長所" class="fragment"></span><a href="#%E9%95%B7%E6%89%80"><i class="fa fa-link"></i></a>長所</h3>

<h4>
<span id="とにかく対応フォーマットが豊富" class="fragment"></span><a href="#%E3%81%A8%E3%81%AB%E3%81%8B%E3%81%8F%E5%AF%BE%E5%BF%9C%E3%83%95%E3%82%A9%E3%83%BC%E3%83%9E%E3%83%83%E3%83%88%E3%81%8C%E8%B1%8A%E5%AF%8C"><i class="fa fa-link"></i></a>とにかく対応フォーマットが豊富</h4>

<p>まずは、対応フォーマットを見て下さい。</p>

<h5>
<span id="入力" class="fragment"></span><a href="#%E5%85%A5%E5%8A%9B"><i class="fa fa-link"></i></a>入力</h5>

<p>入力フォーマットは、以下に対応しています：</p>

<ul>
<li>Markdown</li>
<li>Textile</li>
<li>reStructuredText</li>
<li>HTML</li>
<li>LaTeX</li>
<li>DocBook XML</li>
<li>OPML (追記 14.05.09)</li>
<li>Emacs Org-mode (追記 14.05.09)</li>
<li>Literate Haskell (Markdown,reST,LaTeX)</li>
</ul>

<h5>
<span id="出力" class="fragment"></span><a href="#%E5%87%BA%E5%8A%9B"><i class="fa fa-link"></i></a>出力</h5>

<p>出力フォーマットは以下の通りです（一部省略しています）：</p>

<ul>
<li>Plain Text</li>
<li>Markdown</li>
<li>reStructuredText</li>
<li>HTML

<ul>
<li>XHTML</li>
<li>HTML 5</li>
<li>HTMLスライドショー (Slidy, Slideous, DZSlides or S5)</li>
</ul>
</li>
<li>DocBook XML</li>
<li>LaTeX

<ul>
<li>プレゼン用スタイルファイル beamer も出力可</li>
</ul>
</li>
<li>RTF</li>
<li>ODT</li>
<li>Word docx</li>
<li>MediaWiki markup</li>
<li>EPUB</li>
<li>Emacs Org-Mode</li>
<li>OPML (追記 14.05.09)</li>
<li>Adobe InDesign ICML (追記 14.05.09)</li>
<li>PDF (LaTeXをインストールしている場合のみ)</li>
</ul>

<p>詳細はこちらをご覧ください。</p>

<ul>
<li><a href="http://johnmacfarlane.net/pandoc/README.html" rel="nofollow noopener" target="_blank">Pandoc User's Guide</a></li>
</ul>

<h4>
<span id="開発が活発" class="fragment"></span><a href="#%E9%96%8B%E7%99%BA%E3%81%8C%E6%B4%BB%E7%99%BA"><i class="fa fa-link"></i></a>開発が活発</h4>

<p>Pandocは2012年12月現在、開発が比較的活発です。</p>

<p>その証拠に、Pandocの開発用グループである <a href="https://groups.google.com/forum/?fromgroups#!forum/pandoc-discuss" rel="nofollow noopener" target="_blank">pandoc-discuss - Google グループ</a> で、2012年12月1日〜12月22日に更新されたトピック（スレッド）は33件ありました。</p>

<h5>
<span id="開発が比較的容易" class="fragment"></span><a href="#%E9%96%8B%E7%99%BA%E3%81%8C%E6%AF%94%E8%BC%83%E7%9A%84%E5%AE%B9%E6%98%93"><i class="fa fa-link"></i></a>開発が比較的容易</h5>

<p>（以下、推測ですが）開発が活発な要因としては、開発が比較的容易であることが考えられます。</p>

<h6>
<span id="機能ごとにモジュール化されている" class="fragment"></span><a href="#%E6%A9%9F%E8%83%BD%E3%81%94%E3%81%A8%E3%81%AB%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB%E5%8C%96%E3%81%95%E3%82%8C%E3%81%A6%E3%81%84%E3%82%8B"><i class="fa fa-link"></i></a>機能ごとにモジュール化されている</h6>

<p>Pandocは書き出しモジュール (Writer)、読み込みモジュール (Reader)などのように、<br>
うまくモジュール化されています。<br>
そのため、部分ごとの拡張が比較的容易になっています。</p>

<h6>
<span id="haskellのパーサコンビネータparsecをうまく利用している" class="fragment"></span><a href="#haskell%E3%81%AE%E3%83%91%E3%83%BC%E3%82%B5%E3%82%B3%E3%83%B3%E3%83%93%E3%83%8D%E3%83%BC%E3%82%BFparsec%E3%82%92%E3%81%86%E3%81%BE%E3%81%8F%E5%88%A9%E7%94%A8%E3%81%97%E3%81%A6%E3%81%84%E3%82%8B"><i class="fa fa-link"></i></a>HaskellのパーサコンビネータParsecをうまく利用している</h6>

<p>また、PandocはHaskellで書かれています。<br>
Haskellには、構文解析を行うためのパーサコンビネータParsecがあり、Pandocはこれを有効活用しています。<br>
Parsecは正規表現よりも強力(LL(n)文法が解析可)なため、HTMLなどタグを囲むような文法を容易に解析できます。</p>

<p>しかもParsecは単なるHaskellのライブラリなので、Haskellの文法知識だけで理解できます。<br>
そのため、特別な文法を覚える必要があるyaccなどのパーサジェネレータに比べて、<br>
Parsecの方が分かりやすく簡潔に書けます。</p>

<p>以上の理由から、Pandocは開発が容易であることが考えられます。</p>

<h5>
<span id="最近org-mode用読み込みモジュールの開発がスタート" class="fragment"></span><a href="#%E6%9C%80%E8%BF%91org-mode%E7%94%A8%E8%AA%AD%E3%81%BF%E8%BE%BC%E3%81%BF%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB%E3%81%AE%E9%96%8B%E7%99%BA%E3%81%8C%E3%82%B9%E3%82%BF%E3%83%BC%E3%83%88"><i class="fa fa-link"></i></a>最近、Org-mode用読み込みモジュールの開発がスタート</h5>

<p>（以下、Emacs Org-modeユーザ向けになりますが）<br>
<del>これまで書き出ししか対応していなかったOrg-mode文書に対して、<br>
読み込みモジュール(Reader)の開発が始まっているそうです。</del></p>

<ul>
<li><a href="https://github.com/jgm/pandoc/issues/476" rel="nofollow noopener" target="_blank">Org-Mode Reader · Issue #476 · jgm/pandoc</a></li>
</ul>

<p><del>これが完成すれば、さらにPandocの世界が広がること間違い無しです。<br>
楽しみにしましょう。</del></p>

<p>Emacs Org-modeの読み込みモジュールが完成しました！（14.05.09現在）</p>

<h3>
<span id="短所" class="fragment"></span><a href="#%E7%9F%AD%E6%89%80"><i class="fa fa-link"></i></a>短所</h3>

<p>一方で、Pandocにも短所があります。</p>

<h4>
<span id="独自の読み込み書き込みエンジンにより処理するため文書の仕様をカバーできていない場合がある" class="fragment"></span><a href="#%E7%8B%AC%E8%87%AA%E3%81%AE%E8%AA%AD%E3%81%BF%E8%BE%BC%E3%81%BF%E6%9B%B8%E3%81%8D%E8%BE%BC%E3%81%BF%E3%82%A8%E3%83%B3%E3%82%B8%E3%83%B3%E3%81%AB%E3%82%88%E3%82%8A%E5%87%A6%E7%90%86%E3%81%99%E3%82%8B%E3%81%9F%E3%82%81%E6%96%87%E6%9B%B8%E3%81%AE%E4%BB%95%E6%A7%98%E3%82%92%E3%82%AB%E3%83%90%E3%83%BC%E3%81%A7%E3%81%8D%E3%81%A6%E3%81%84%E3%81%AA%E3%81%84%E5%A0%B4%E5%90%88%E3%81%8C%E3%81%82%E3%82%8B"><i class="fa fa-link"></i></a>独自の読み込み・書き込みエンジンにより処理するため、文書の仕様をカバーできていない場合がある</h4>

<p>Pandocは独自の読み込み・書き込みエンジンにより処理を行っています。<br>
そのため、文書の仕様に沿っていない部分もあります。</p>

<p>また、内部的にはHTMLで表現できる形式で処理されているため、その表現能力を超えるようなことはできません。<br>
この欠点は、特にLaTeX（使った事無いですが、おそらくreSTも）に影響します。</p>

<h2>
<span id="pandocのインストール" class="fragment"></span><a href="#pandoc%E3%81%AE%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB"><i class="fa fa-link"></i></a>Pandocのインストール</h2>

<p>ダウンロードは以下のページからできます： <a href="http://johnmacfarlane.net/pandoc/installing.html" rel="nofollow noopener" target="_blank">Pandoc - Installing</a></p>

<h3>
<span id="プログラマの方" class="fragment"></span><a href="#%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9E%E3%81%AE%E6%96%B9"><i class="fa fa-link"></i></a>プログラマの方</h3>

<p>パッケージマネージャに慣れている方や、現在Haskellを扱っている・今後Haskellを触ってみたい方には、<br>
Haskell Platform (cabal) によるインストールを強くおすすめします。<br>
こちらの方が、アップデートが手軽にできます。</p>

<h4>
<span id="手順" class="fragment"></span><a href="#%E6%89%8B%E9%A0%86"><i class="fa fa-link"></i></a>手順</h4>

<h5>
<span id="1-haskell-platformをインストール" class="fragment"></span><a href="#1-haskell-platform%E3%82%92%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB"><i class="fa fa-link"></i></a>1. Haskell Platformをインストール</h5>

<ul>
<li><a href="http://www.haskell.org/platform/" rel="nofollow noopener" target="_blank">The Haskell Platform</a></li>
</ul>

<h5>
<span id="2-端末コマンドプロンプトで以下を実行" class="fragment"></span><a href="#2-%E7%AB%AF%E6%9C%AB%E3%82%B3%E3%83%9E%E3%83%B3%E3%83%89%E3%83%97%E3%83%AD%E3%83%B3%E3%83%97%E3%83%88%E3%81%A7%E4%BB%A5%E4%B8%8B%E3%82%92%E5%AE%9F%E8%A1%8C"><i class="fa fa-link"></i></a>2. 端末・コマンドプロンプトで以下を実行</h5>

<div class="code-frame" data-lang="Bash"><div class="highlight"><pre><span></span>$ cabal update
$ cabal install pandoc
</pre></div></div>

<h3>
<span id="一般の方" class="fragment"></span><a href="#%E4%B8%80%E8%88%AC%E3%81%AE%E6%96%B9"><i class="fa fa-link"></i></a>一般の方</h3>

<ul>
<li>Windows, MacにはPandoc単体のインストーラがあります。</li>
<li>Linuxはパッケージマネージャ(apt, yumなど)に入っている場合があります。</li>
</ul>

<h2>
<span id="基本的な使い方" class="fragment"></span><a href="#%E5%9F%BA%E6%9C%AC%E7%9A%84%E3%81%AA%E4%BD%BF%E3%81%84%E6%96%B9"><i class="fa fa-link"></i></a>基本的な使い方</h2>

<p>ここでは例としてMarkdownを入力形式とし、HTMLを出力してみます。<br>
もちろんHTML, LaTeX, reStructuredTextなどを入力としてもOKです。</p>

<h3>
<span id="markdownからhtmlに変換" class="fragment"></span><a href="#markdown%E3%81%8B%E3%82%89html%E3%81%AB%E5%A4%89%E6%8F%9B"><i class="fa fa-link"></i></a>MarkdownからHTMLに変換</h3>

<h4>
<span id="手順-1" class="fragment"></span><a href="#%E6%89%8B%E9%A0%86-1"><i class="fa fa-link"></i></a>手順</h4>

<h5>
<span id="1-mac-linuxの方はターミナル端末をwindowsの方はコマンドプロンプトを開きます" class="fragment"></span><a href="#1-mac-linux%E3%81%AE%E6%96%B9%E3%81%AF%E3%82%BF%E3%83%BC%E3%83%9F%E3%83%8A%E3%83%AB%E7%AB%AF%E6%9C%AB%E3%82%92windows%E3%81%AE%E6%96%B9%E3%81%AF%E3%82%B3%E3%83%9E%E3%83%B3%E3%83%89%E3%83%97%E3%83%AD%E3%83%B3%E3%83%97%E3%83%88%E3%82%92%E9%96%8B%E3%81%8D%E3%81%BE%E3%81%99"><i class="fa fa-link"></i></a>1. Mac, Linuxの方はターミナル（端末）を、Windowsの方はコマンドプロンプトを開きます</h5>

<h5>
<span id="2-公式サイトのreadmemarkdown形式を適当な場所にダウンロードします" class="fragment"></span><a href="#2-%E5%85%AC%E5%BC%8F%E3%82%B5%E3%82%A4%E3%83%88%E3%81%AEreadmemarkdown%E5%BD%A2%E5%BC%8F%E3%82%92%E9%81%A9%E5%BD%93%E3%81%AA%E5%A0%B4%E6%89%80%E3%81%AB%E3%83%80%E3%82%A6%E3%83%B3%E3%83%AD%E3%83%BC%E3%83%89%E3%81%97%E3%81%BE%E3%81%99"><i class="fa fa-link"></i></a>2. 公式サイトの<a href="http://johnmacfarlane.net/pandoc/demo/README" rel="nofollow noopener" target="_blank">README</a>(Markdown形式)を適当な場所にダウンロードします</h5>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span><span class="c1"># Mac, Linuxの方はwgetやcurl -OでもOK</span>
$ wget http://johnmacfarlane.net/pandoc/demo/README
</pre></div></div>

<h5>
<span id="3-readmeのある場所に移動cdしreadmeをinputmdに名前変更します" class="fragment"></span><a href="#3-readme%E3%81%AE%E3%81%82%E3%82%8B%E5%A0%B4%E6%89%80%E3%81%AB%E7%A7%BB%E5%8B%95cd%E3%81%97readme%E3%82%92inputmd%E3%81%AB%E5%90%8D%E5%89%8D%E5%A4%89%E6%9B%B4%E3%81%97%E3%81%BE%E3%81%99"><i class="fa fa-link"></i></a>3. READMEのある場所に移動(cd)し、READMEをinput.mdに名前変更します</h5>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span><span class="c1"># Mac, Linux </span>
$ <span class="nb">cd</span> ~/hoge
$ mv README input.md
</pre></div></div>

<h5>
<span id="4-以下のコマンドを入力" class="fragment"></span><a href="#4-%E4%BB%A5%E4%B8%8B%E3%81%AE%E3%82%B3%E3%83%9E%E3%83%B3%E3%83%89%E3%82%92%E5%85%A5%E5%8A%9B"><i class="fa fa-link"></i></a>4. 以下のコマンドを入力：</h5>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>$ pandoc input.md -s -o output.html
</pre></div></div>

<ul>
<li>input.md: 入力するMarkdown文書の名前</li>
<li>-o output.html : 出力するHTMLファイル名</li>
<li>-s: standalone（完結したフォーマットで出力）

<ul>
<li>HTML文書、LaTeX文書を出力する場合は、基本的に -s (standalone) オプションを付けましょう</li>
<li>.bashrc/.zshrc のaliasに指定しておいてもいいかも：

<ul>
<li><code>alias pandoc="pandoc -s"</code></li>
</ul>
</li>
</ul>
</li>
</ul>

<h4>
<span id="そのままブラウザでプレビューするとき" class="fragment"></span><a href="#%E3%81%9D%E3%81%AE%E3%81%BE%E3%81%BE%E3%83%96%E3%83%A9%E3%82%A6%E3%82%B6%E3%81%A7%E3%83%97%E3%83%AC%E3%83%93%E3%83%A5%E3%83%BC%E3%81%99%E3%82%8B%E3%81%A8%E3%81%8D"><i class="fa fa-link"></i></a>そのままブラウザでプレビューするとき</h4>

<h5>
<span id="mac" class="fragment"></span><a href="#mac"><i class="fa fa-link"></i></a>Mac</h5>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>$ pandoc input.md -s -o output.html <span class="o">&amp;&amp;</span> open output.html
</pre></div></div>

<h5>
<span id="linux" class="fragment"></span><a href="#linux"><i class="fa fa-link"></i></a>Linux</h5>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>$ pandoc input.md -s -o output.html <span class="o">&amp;&amp;</span> gnome-open output.html
$ pandoc input.md -s -o output.html <span class="o">&amp;&amp;</span> firefox output.html
</pre></div></div>

<ul>
<li>Linux使いならニュアンスは分かると思うので、適当にいじってください</li>
</ul>

<h4>
<span id="形式を明示的に指定することもできます" class="fragment"></span><a href="#%E5%BD%A2%E5%BC%8F%E3%82%92%E6%98%8E%E7%A4%BA%E7%9A%84%E3%81%AB%E6%8C%87%E5%AE%9A%E3%81%99%E3%82%8B%E3%81%93%E3%81%A8%E3%82%82%E3%81%A7%E3%81%8D%E3%81%BE%E3%81%99"><i class="fa fa-link"></i></a>形式を明示的に指定することもできます</h4>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>$ pandoc -f markdown -t html input.md -s -o output.html
</pre></div></div>

<ul>
<li>-f 入力形式</li>
<li>-t 出力形式</li>
</ul>

<p>形式の明示は、ファイルを指定せずにパイプで処理する際に必要です。</p>

<ul>
<li>出力ファイル(-o)を指定しない場合は、-tオプションで指定した形式で標準出力に出してくれます（一部形式を除く）</li>
</ul>

<h2>
<span id="おすすめ使い方ベスト5" class="fragment"></span><a href="#%E3%81%8A%E3%81%99%E3%81%99%E3%82%81%E4%BD%BF%E3%81%84%E6%96%B9%E3%83%99%E3%82%B9%E3%83%885"><i class="fa fa-link"></i></a>おすすめ使い方ベスト5</h2>

<p>ここからは、おすすめの使い方を紹介します。</p>

<h3>
<span id="ベスト5まとめ" class="fragment"></span><a href="#%E3%83%99%E3%82%B9%E3%83%885%E3%81%BE%E3%81%A8%E3%82%81"><i class="fa fa-link"></i></a>ベスト5まとめ</h3>

<ol>
<li>MarkdownをEmacs Org-mode文書、reStructuredTextに変換する</li>
<li>Markdownをdocx/odt文書に変換する</li>
<li>MarkdownをLaTeX文書に変換する</li>
<li>Markdownをプレゼン文書に変換する</li>
<li>LaTeX文書をEPUBに変換する</li>
</ol>

<h3>
<span id="1-markdownをemacs-org-mode文書restructuredtextに変換する" class="fragment"></span><a href="#1-markdown%E3%82%92emacs-org-mode%E6%96%87%E6%9B%B8restructuredtext%E3%81%AB%E5%A4%89%E6%8F%9B%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>1. MarkdownをEmacs Org-mode文書、reStructuredTextに変換する</h3>

<p>出力ファイル(-o)の拡張子を変えるだけです。</p>

<h4>
<span id="org-mode文書" class="fragment"></span><a href="#org-mode%E6%96%87%E6%9B%B8"><i class="fa fa-link"></i></a>Org-mode文書</h4>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>pandoc input.md -o output.org
</pre></div></div>

<ul>
<li>ファイル形式を指定する場合は <code>-t org</code>
</li>
</ul>

<h4>
<span id="restructuredtext" class="fragment"></span><a href="#restructuredtext"><i class="fa fa-link"></i></a>reStructuredText</h4>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>pandoc input.md -o output.rst
</pre></div></div>

<ul>
<li>ファイル形式を指定する場合は <code>-t rst</code>
</li>
</ul>

<p>簡単ですね。</p>

<h3>
<span id="2-markdownをdocxodt文書に変換する" class="fragment"></span><a href="#2-markdown%E3%82%92docxodt%E6%96%87%E6%9B%B8%E3%81%AB%E5%A4%89%E6%8F%9B%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>2. Markdownをdocx/odt文書に変換する</h3>

<h4>
<span id="word文書docx" class="fragment"></span><a href="#word%E6%96%87%E6%9B%B8docx"><i class="fa fa-link"></i></a>Word文書(docx)</h4>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>pandoc input.md -o output.docx
</pre></div></div>

<ul>
<li>ファイル形式を指定する場合は <code>-t docx</code>
</li>
</ul>

<h4>
<span id="libreoffice-writer文書odt" class="fragment"></span><a href="#libreoffice-writer%E6%96%87%E6%9B%B8odt"><i class="fa fa-link"></i></a>LibreOffice Writer文書(odt)</h4>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>pandoc input.md -o output.odt
</pre></div></div>

<ul>
<li>ファイル形式を指定する場合は <code>-t odt</code>
</li>
</ul>

<h3>
<span id="3-markdownをlatex文書に変換する" class="fragment"></span><a href="#3-markdown%E3%82%92latex%E6%96%87%E6%9B%B8%E3%81%AB%E5%A4%89%E6%8F%9B%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>3. MarkdownをLaTeX文書に変換する</h3>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>pandoc input.md -s -o output.tex
</pre></div></div>

<h4>
<span id="注意" class="fragment"></span><a href="#%E6%B3%A8%E6%84%8F"><i class="fa fa-link"></i></a>注意</h4>

<p>Macの場合、Emacsで開くと濁点が分離します。<br>
(MacのUnicodeが、NFDという形式を標準としているためです。NFC形式に変換する必要があります。)</p>

<h5>
<span id="emacs上で直す方法" class="fragment"></span><a href="#emacs%E4%B8%8A%E3%81%A7%E7%9B%B4%E3%81%99%E6%96%B9%E6%B3%95"><i class="fa fa-link"></i></a>Emacs上で直す方法</h5>

<p>こちらを参照して下さい：</p>

<ul>
<li>  <a href="http://d.hatena.ne.jp/sky-y/20120805/1344169124" rel="nofollow noopener" target="_blank">Emacs小ネタ:MacでPDFからコピーすると濁点が分離する問題を直す</a>
</li>
</ul>

<h5>
<span id="端末上で直す" class="fragment"></span><a href="#%E7%AB%AF%E6%9C%AB%E4%B8%8A%E3%81%A7%E7%9B%B4%E3%81%99"><i class="fa fa-link"></i></a>端末上で直す</h5>

<p>iconvコマンド（後述）を使うと、以下で直ります：</p>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>iconv -f UTF-8-MAC -t UTF-8 output.tex
</pre></div></div>

<ul>
<li>  標準出力に出るので、パイプで適当に処理して下さい</li>
</ul>

<h3>
<span id="4-markdownをプレゼン文書に変換する" class="fragment"></span><a href="#4-markdown%E3%82%92%E3%83%97%E3%83%AC%E3%82%BC%E3%83%B3%E6%96%87%E6%9B%B8%E3%81%AB%E5%A4%89%E6%8F%9B%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>4. Markdownをプレゼン文書に変換する</h3>

<h4>
<span id="準備" class="fragment"></span><a href="#%E6%BA%96%E5%82%99"><i class="fa fa-link"></i></a>準備</h4>

<p>公式サイトのSLIDESをダウンロードします。</p>

<ul>
<li><a href="http://johnmacfarlane.net/pandoc/demo/SLIDES" rel="nofollow noopener" target="_blank">SLIDES</a></li>
<li>または <code>wget http://johnmacfarlane.net/pandoc/demo/SLIDES</code>
</li>
</ul>

<h4>
<span id="latex-beamer" class="fragment"></span><a href="#latex-beamer"><i class="fa fa-link"></i></a>LaTeX Beamer</h4>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>pandoc -t beamer SLIDES -o output_beamer.pdf
</pre></div></div>

<h4>
<span id="htmlスライド-slidy" class="fragment"></span><a href="#html%E3%82%B9%E3%83%A9%E3%82%A4%E3%83%89-slidy"><i class="fa fa-link"></i></a>HTMLスライド (Slidy)</h4>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>pandoc -t slidy SLIDES -s -o output_slidy.html
</pre></div></div>

<ul>
<li>-sオプションの付け忘れに注意！</li>
</ul>

<h3>
<span id="5-latex文書をepubに変換する" class="fragment"></span><a href="#5-latex%E6%96%87%E6%9B%B8%E3%82%92epub%E3%81%AB%E5%A4%89%E6%8F%9B%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>5. LaTeX文書をEPUBに変換する</h3>

<p>Pandocを使うと（少しの手間はありますが）LaTeX文書をいとも簡単にEPUB形式の電子書籍を作れます。</p>

<h4>
<span id="準備-1" class="fragment"></span><a href="#%E6%BA%96%E5%82%99-1"><i class="fa fa-link"></i></a>準備</h4>

<p>公式サイトのexample4.texをダウンロード</p>

<ul>
<li><a href="http://johnmacfarlane.net/pandoc/demo/example4.tex" rel="nofollow noopener" target="_blank">example4.tex</a></li>
<li>または <code>wget http://johnmacfarlane.net/pandoc/demo/example4.tex</code>
</li>
</ul>

<h4>
<span id="コマンド" class="fragment"></span><a href="#%E3%82%B3%E3%83%9E%E3%83%B3%E3%83%89"><i class="fa fa-link"></i></a>コマンド</h4>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>pandoc example4.tex -o output.epub
</pre></div></div>

<h4>
<span id="epubのプレビュー" class="fragment"></span><a href="#epub%E3%81%AE%E3%83%97%E3%83%AC%E3%83%93%E3%83%A5%E3%83%BC"><i class="fa fa-link"></i></a>EPUBのプレビュー</h4>

<h5>
<span id="mac-1" class="fragment"></span><a href="#mac-1"><i class="fa fa-link"></i></a>Mac</h5>

<p>Murasakiがおすすめです： <a href="http://genjiapp.com/mac/murasaki/index.html" rel="nofollow noopener" target="_blank">Murasaki</a></p>

<h5>
<span id="linux-windows" class="fragment"></span><a href="#linux-windows"><i class="fa fa-link"></i></a>Linux, Windows</h5>

<p>Calibreが良いそうです： <a href="http://calibre-ebook.com/" rel="nofollow noopener" target="_blank">Calibre</a></p>

<h4>
<span id="注意-1" class="fragment"></span><a href="#%E6%B3%A8%E6%84%8F-1"><i class="fa fa-link"></i></a>注意</h4>

<ul>
<li>
<p>LaTeXで <code>\input</code> を使っている場合は、<br>
参照先ファイルをすべて元のTeXファイルに埋め込んでください。</p>

<ul>
<li>Pandocが <code>\input</code> に対応していないためです。</li>
</ul>
</li>
<li>
<p>画像ファイルは全てpng形式にしてください。</p>

<ul>
<li>EPS画像しか無い場合、ImageMagickのmogrifyコマンドで変換するのが一番楽ちんです。</li>
</ul>
</li>
</ul>

<h2>
<span id="日本語文書をpdfで出力する方法" class="fragment"></span><a href="#%E6%97%A5%E6%9C%AC%E8%AA%9E%E6%96%87%E6%9B%B8%E3%82%92pdf%E3%81%A7%E5%87%BA%E5%8A%9B%E3%81%99%E3%82%8B%E6%96%B9%E6%B3%95"><i class="fa fa-link"></i></a>日本語文書をPDFで出力する方法</h2>

<p>Pandocには、LaTeXを使ってPDFを出力する機能があります。<br>
これを使えると便利ですが、日本語文書（特にMacの場合）ちょっとややこしいです。<br>
というのも、Pandoc標準の設定では、日本語の通らないpdfTeXを使用するためです。</p>

<p>そこで、日本語に対応し、Pandocがサポートしている<strong>LuaLaTeX</strong>を使用します。</p>

<h3>
<span id="準備-2" class="fragment"></span><a href="#%E6%BA%96%E5%82%99-2"><i class="fa fa-link"></i></a>準備</h3>

<h4>
<span id="lualatex" class="fragment"></span><a href="#lualatex"><i class="fa fa-link"></i></a>LuaLaTeX</h4>

<p>単体でインストールするのは難しいので、TeX Live 2012というパッケージをインストールします。<br>
（これ以外のインストール方法は知らないです・・・。）</p>

<ul>
<li><a href="http://oku.edu.mie-u.ac.jp/%7Eokumura/texwiki/?TeX%20Live" rel="nofollow noopener" target="_blank">TeX Live - TeX Wiki</a></li>
</ul>

<p>TeX環境が古くなっている方は、これを機にTeX環境を一新するとよいと思います。<br>
（ただし、卒論や原稿提出前の方は、やめておいたほうがよいと思われます・・・（汗））</p>

<h4>
<span id="iconv-mac" class="fragment"></span><a href="#iconv-mac"><i class="fa fa-link"></i></a>iconv (Mac)</h4>

<p>Macの場合は、iconvという文字コードを変換するツールをインストールしておきます。<br>
HomebrewかMacportsでインストールできると思います。</p>

<h3>
<span id="コマンド-1" class="fragment"></span><a href="#%E3%82%B3%E3%83%9E%E3%83%B3%E3%83%89-1"><i class="fa fa-link"></i></a>コマンド</h3>

<h4>
<span id="mac以外のosの場合" class="fragment"></span><a href="#mac%E4%BB%A5%E5%A4%96%E3%81%AEos%E3%81%AE%E5%A0%B4%E5%90%88"><i class="fa fa-link"></i></a>Mac以外のOSの場合</h4>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>pandoc input.md -o output.pdf -V <span class="nv">documentclass</span><span class="o">=</span>ltjarticle --latex-engine<span class="o">=</span>lualatex
</pre></div></div>

<h4>
<span id="macの場合" class="fragment"></span><a href="#mac%E3%81%AE%E5%A0%B4%E5%90%88"><i class="fa fa-link"></i></a>Macの場合</h4>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>iconv -f UTF-8-MAC -t UTF-8 input.md <span class="p">|</span> pandoc -f markdown -o output.pdf -V <span class="nv">documentclass</span><span class="o">=</span>ltjarticle --latex-engine<span class="o">=</span>lualatex
</pre></div></div>

<p>長いので、よく使う場合はaliasかシェルスクリプトにしておくことをおすすめします</p>

<ul>
<li>以下を.bashrc/.zshrcに追加</li>
</ul>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span><span class="nb">alias</span> <span class="nv">pandocpdf</span><span class="o">=</span><span class="s2">"pandoc -V documentclass=ltjarticle --latex-engine=lualatex -t pdf"</span>
</pre></div></div>

<h2>
<span id="その他のデモ" class="fragment"></span><a href="#%E3%81%9D%E3%81%AE%E4%BB%96%E3%81%AE%E3%83%87%E3%83%A2"><i class="fa fa-link"></i></a>その他のデモ</h2>

<p>こちらにいっぱいあります：</p>

<ul>
<li><a href="http://johnmacfarlane.net/pandoc/demos.html" rel="nofollow noopener" target="_blank">Pandoc - Demos</a></li>
</ul>

<h2>
<span id="まとめ" class="fragment"></span><a href="#%E3%81%BE%E3%81%A8%E3%82%81"><i class="fa fa-link"></i></a>まとめ</h2>

<p>PandocはMarkdown, HTML, LaTeX, reStructuredTextなどを様々な形式に変換出来る強力なツールです。<br>
パイプ処理などをうまく使ったりすると、さらに便利に使えるかもしれません。<br>
また、開発も進んでいるため、今後新たな可能性が広がるかもしれません。</p>

<p>しかし、まだ日本であまり知られておらず、非常にもったいなく思います。<br>
まずはPandocを試してみて下さい。<br>
そして感銘を受けた方は、ぜひ友人にどんどん布教してください！</p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1" style="height:150px;">
<tr>
	<td rowspan="3">62位</td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="thumb-up-120px.png" /></i>845</kbd>
		<a target="_blank" href="https://qiita.com/emadurandal/items/a60886152a4c99ce1017">Rails開発環境の構築（rbenvでRuby導入からBundler、Rails導入まで）（Macport編）</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-01-28<br />18:30:52</center>
	</td>
	<td style="width:200px;">
		<!--投稿者-->
		<center>
			@<a href="user/12753.html">emadurandal</a>(42件の記事)<br />(フリーランス 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/12753/profile-images/1473682524">
		</center>
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Ruby]</b> <b>[Rails]</b> <b>[Mac]</b> <b>[macports]</b> <b>[rbenv]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<!--
		<div style="width:350px;height:150px;overflow:scroll;">%s</div>
		-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>※お願い：最近時間がなかなか取れず、Rails5.xの時代になったというのに未だに5.xでの確認ができておりません。どなたか、5.xでも本記事の内容がうまくいった、と確認されました方はコメント欄にてご一報をいただけますと大変嬉しいです。</p>

<p>（本記事は今の所Rails 3.x〜4.2 対応です）</p>

<p>（<a href="http://qiita.com/emadurandal/items/e43c4896be1df60caef0" id="reference-ddbcb67f8d8f74dfd444">Homebrew編</a>も公開しました）</p>

<h2>
<span id="はじめにrailsをローカルインストールするという発想" class="fragment"></span><a href="#%E3%81%AF%E3%81%98%E3%82%81%E3%81%ABrails%E3%82%92%E3%83%AD%E3%83%BC%E3%82%AB%E3%83%AB%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB%E3%81%99%E3%82%8B%E3%81%A8%E3%81%84%E3%81%86%E7%99%BA%E6%83%B3"><i class="fa fa-link"></i></a>はじめに：Railsをローカルインストールするという発想</h2>

<p>今さらですが、Mac環境でrbenvを使って、Ruby・Rails環境を構築するための記事をまとめてみました。</p>

<p>bundlerでgemをRailsプロジェクト内にローカルインストールすることで、ruby環境を汚さずにRailsプロジェクトを生成できることを目的とします。<br>
Rails自体もローカルインストールすることで、その都度好きなバージョンのRailsプロジェクトを生成し、共存させることができます（←ここ重要。古い書籍のRailsコードを試す時とか便利です）。</p>

<p>突っ込みどころがありましたら、遠慮なくコメントくださいませ。<br>
（MacPorts使っているのは私の好みの問題なので、Homebrew使ってない奴は負け組とかそういうコメントはご勘弁ください^^;　Homebrewの人でも参考になる内容だとは思います。）<br>
　→<a href="http://qiita.com/emadurandal/items/e43c4896be1df60caef0">Homebrew編</a>公開しました！</p>

<p>あと、Markdown初心者なので、記事のレイアウトが見にくいかもしれません。徐々に改善していたいと思います。<br>
→tadsan様が、全文のMarkdownを修正して、レイアウトを綺麗にしてくださいました。ありがとうございます！</p>

<h2>
<span id="前提環境" class="fragment"></span><a href="#%E5%89%8D%E6%8F%90%E7%92%B0%E5%A2%83"><i class="fa fa-link"></i></a>前提環境</h2>

<ul>
<li>OSはMacを前提とする。（OSX Mountain Lion/Marvericks/Yosemiteで動作確認）</li>
<li>Railsのバージョンは3.x〜4.1.xを前提とする。</li>
<li>Rubyのビルドに必要なパッケージの導入にはMacPortsを使う（Gemに関してはもちろんBundler）。</li>
</ul>

<p>Macを前提としているが、パッケージ管理ソフト以外の部分に関しては、Linux等でも使えるノウハウである。</p>

<p>Homebrewを使っている人でも、殆どの部分は使えるノウハウである（CONFIGURE_OPTS環境変数に指定するパスだけ気をつけてください）。</p>

<h2>
<span id="本マニュアルが目指すこと" class="fragment"></span><a href="#%E6%9C%AC%E3%83%9E%E3%83%8B%E3%83%A5%E3%82%A2%E3%83%AB%E3%81%8C%E7%9B%AE%E6%8C%87%E3%81%99%E3%81%93%E3%81%A8"><i class="fa fa-link"></i></a>本マニュアルが目指すこと</h2>

<ul>
<li>Ruby環境は、rbenvを使って、複数のバージョンを切り替えられるようにして導入する。</li>
<li>rbenv環境下のRuby環境に追加インストールするGemはbundlerのみ。</li>
<li>Railsもローカルにインストールすることで、Ruby環境を特定のバージョンのRailsで汚さずに、複数のバージョンのRailsプロジェクトを作成・共存できるようにする。</li>
<li>ほとんどのGemは、Railsプロジェクト内に閉じた形でインストール・管理する（つまり、Railsプロジェクトのvender/bundleディレクトリ内にGemをインストールする）</li>
<li>構築したRuby環境は、MacPortsに依存しない。</li>
</ul>

<h2>
<span id="rbenvとは" class="fragment"></span><a href="#rbenv%E3%81%A8%E3%81%AF"><i class="fa fa-link"></i></a>rbenvとは</h2>

<p>Ruby環境のバージョン切り替えツールである。Ruby（に限らないが）はバージョンの差違によって、ソフトウェアが正常に動いたり動かなかったり、といったことが往々にしてある。<br>
そこで、特定のバージョンのRubyをドノーマルにインストールしてそれを使い続けるのではなく、バージョン切り替えツールでインストール・管理することで、使いたいソフトウェアや開発するプロジェクトに応じて複数のRuby環境を使い分けるのが最近のトレンドになっている。</p>

<p>Ruby環境のバージョン切り替えツールとしては、以前はRVMというものがあった（使っていらっしゃる方、過去形にしてすみません汗）が、以下のような特徴があり、</p>

<ul>
<li>ヘビーウェイト・多機能。</li>
<li>cdを独自のものに置き換えてしまう。</li>
<li>Bundlerなどと相性が悪い。</li>
</ul>

<p>ちょっと使うのに抵抗があるという人が多かったのも事実。そうした状況を受けて（？）、あのRuby on Railsで有名な37signalsが作った、より軽量な代替ツールがrbenvである。<br>
以下のような特徴を持つ。</p>

<ul>
<li>動作がRVMより速い。</li>
<li>既存コマンドを置き換えるような怖いことをしない。</li>
<li>環境変数によって自動的にRubyバージョンを切り替え可能。</li>
<li>gemの管理はBundlerで行うことが前提。</li>
<li>rubyをOSのシステム深部でなく、自分のホームディレクトリ以下（<code>.rbenv</code>ディレクトリ）にインストールできるので、OSの環境を汚さないという点でも安心感がある。</li>
</ul>

<p>rbenvとRVMのより詳細な比較については、以下のサイト様のページをご覧ください。<br>
「<a href="http://passingloop.tumblr.com/post/10512902196/difference-between-rbenv-and-rvm" rel="nofollow noopener" target="_blank">rbenv と RVM との違い</a>」（passingloop様のサイトより）</p>

<p>それぞれ設計思想が違うので、どちらを使うかは好みの問題でもあるが、しかし今後のトレンドとしてはRVMよりrbenvになりそうな感じなので、本記事ではrbenvを使う。</p>

<h2>
<span id="rbenvrubyのインストール" class="fragment"></span><a href="#rbenvruby%E3%81%AE%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB"><i class="fa fa-link"></i></a>rbenv、Rubyのインストール</h2>

<p>rbenvとそのプラグインruby-buildをインストールする。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ git clone git://github.com/sstephenson/rbenv.git ~/.rbenv
$ mkdir -p ~/.rbenv/plugins
$ git clone https://github.com/sstephenson/ruby-build.git ~/.rbenv/plugins/ruby-build
</pre></div></div>

<p>rbenv用の以下の設定を <code>.bash_profile</code> に設定する。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>export PATH="$HOME/.rbenv/bin:$PATH"
eval "$(rbenv init -)"
</pre></div></div>

<p>書き換えた <code>.bash_profile</code> の設定を読み込む。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ source ~/.bash_profile
</pre></div></div>

<p>MacPortsをインストールする。そしてportを最新の状態にする。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ sudo port selfupdate
$ sudo port sync
</pre></div></div>

<blockquote>
<p>(なぜ、今流行のHomebrewでなく、MacPortsを使うのか。以下の利点があるからである。<br>
* Homebrewによって、/usr/localディレクトリをいじられるのが嫌な人にとっては、/optに全てをインストールするMacPortsは安心感がある。<br>
* 環境を再構築したくなったら、/optディレクトリを消すだけで良い。消すのではなく、リネームして、後で戻すことも可能。<br>
* 複数台のMacで共通の環境を作りたい場合は、/optディレクトリをrsyncするだけで実現できる。<br>
* 昔のMacPortsはソースからビルドしていたので遅かったが、最近のバージョンではバイナリからインストールしてくれるため、すでに「MacPortsは遅い」という定評は過去の物となった。</p>
</blockquote>

<p>OpenSSLをインストールしないとrbenv環境での <code>bundle install</code> が失敗するらしいので、MacPortsでOpenSSLをインストールする。（参照：pygo様：<a href="http://d.hatena.ne.jp/CortYuming/20120618/p1" class="autolink" rel="nofollow noopener" target="_blank">http://d.hatena.ne.jp/CortYuming/20120618/p1</a> ）</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ sudo port install openssl
</pre></div></div>

<p>readlineとiconvがないと動かないgemがあるらしいので、MacPortsでこの二つをインストール。<br>
（参照：tech.portalshit.net様：<a href="http://tech.portalshit.net/2011/11/15/i-am-new-with-rbenv/" class="autolink" rel="nofollow noopener" target="_blank">http://tech.portalshit.net/2011/11/15/i-am-new-with-rbenv/</a> ）</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ sudo port install readline
$ sudo port install libiconv
</pre></div></div>

<p>インストール可能なRubyのバージョンを調べる。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ rbenv install -l
</pre></div></div>

<p>MacPort で インストールした openssl、readline、iconv のパスを教えて、rbenv でRubyをインストール。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ CONFIGURE_OPTS="--with-openssl-dir=/opt/local --with-readline-dir=/opt/local --with-iconv-dir=/opt/local" rbenv install 2.0.0-p195 # ←バージョン番号は読み替えてね
$ rbenv rehash
</pre></div></div>

<p>以下のコマンドで、インストールしたRubyのバージョンのリストを確認できる</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ rbenv versions
</pre></div></div>

<p>インストールしたRubyを有効にする</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ rbenv global 2.0.0-p195
</pre></div></div>

<h2>
<span id="ssl証明書のインポート" class="fragment"></span><a href="#ssl%E8%A8%BC%E6%98%8E%E6%9B%B8%E3%81%AE%E3%82%A4%E3%83%B3%E3%83%9D%E3%83%BC%E3%83%88"><i class="fa fa-link"></i></a>SSL証明書のインポート</h2>

<p>ここまでの状態のRubyだと、SSL通信を行う処理をしようとした時に、</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>/Users/hoge/.rbenv/versions/2.0.0-p195/lib/ruby/2.0.0/net/http.rb:918:in `connect': SSL_connect returned=1 errno=0 state=SSLv3 read server certificate B: certificate verify failed (Twitter::Error::ClientError)
</pre></div></div>

<p>というエラーが起きます。そこで、対策として証明書をセットアップします。</p>

<p>まずは、証明書のパスを確認し、</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ ruby -ropenssl -e "p OpenSSL::X509::DEFAULT_CERT_FILE"
"/opt/local/etc/openssl/cert.pem"
</pre></div></div>

<p>返ってきたパスに対して、証明書をダウンロードします。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ sudo curl "http://curl.haxx.se/ca/cacert.pem" -o /opt/local/etc/openssl/cert.pem
</pre></div></div>

<p>（参考ページ:<a href="http://k-shogo.github.io/article/2013/08/22/ruby-ssl-connect-error/" rel="nofollow noopener" target="_blank">rubyでSSL利用時に証明書エラーが発生する場合の対応</a>）</p>

<p>これでOKです。</p>

<h2>
<span id="bundlerのインストール" class="fragment"></span><a href="#bundler%E3%81%AE%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB"><i class="fa fa-link"></i></a>Bundlerのインストール</h2>

<p>Railsで利用するGemは各プロジェクト毎にbundlerで管理するようにしたいので</p>

<ul>
<li>GEMでRuby環境にbundlerのみをインストール</li>
<li>bundlerを使って一時的にrailsをローカルにインストール
（Railsプロジェクトを作成するためだけに使用。railsすらローカルディレクトリにインストールする）</li>
<li>ローカルのrailsでプロジェクト(今回の例では”example”)を作成</li>
<li>railsをローカルインストールするために使ったbundlerの環境を削除</li>
<li>exampleプロジェクト内で必要なgemをbundlerでローカルインストール</li>
</ul>

<p>という手順を踏む。でははじめよう。</p>

<p>GEMでRuby環境にbundlerのみをインストールする。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ rbenv exec gem install bundler
$ rbenv rehash
</pre></div></div>

<p>ちなみに現在有効なrubyにインストールされたgemの確認は以下のコマンドで行う。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ rbenv exec gem list
</pre></div></div>

<p>インストールしたgemパッケージの保存場所を調べるには以下のコマンドを使う。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ rbenv exec gem which bundler
</pre></div></div>

<h2>
<span id="railsのローカルインストールとrailsプロジェクトの作成" class="fragment"></span><a href="#rails%E3%81%AE%E3%83%AD%E3%83%BC%E3%82%AB%E3%83%AB%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB%E3%81%A8rails%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AE%E4%BD%9C%E6%88%90"><i class="fa fa-link"></i></a>RailsのローカルインストールとRailsプロジェクトの作成</h2>

<p><strong>（新規Railsプロジェクトを作る時は、常にこのステップから行う）</strong></p>

<p>bundlerを使って一時的にrailsをローカルにインストール。（Railsプロジェクトを作成するためだけに使用。railsすらローカルディレクトリにインストールする）<br>
まず、Railsプロジェクトを作りたいディレクトリに移動して、そこで <code>Gemfile</code> を作る。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ cat &lt;&lt; EOS &gt; Gemfile
source "http://rubygems.org"
gem "rails", "4.1.1" # ←ローカルインストールしたいRailsのバージョンを指定。指定しなければ最新版が入る。
EOS
</pre></div></div>

<p>railsを <code>vender/bundle</code> ディレクトリ以下にインストールする。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ bundle install --path vendor/bundle
</pre></div></div>

<p>（このように、 <code>bundle install</code> する際に <code>--path vendor/bundle</code> をつけることで、gemのインストール先がRuby環境でなく、 ローカルの<code>vendor/bundle</code> ディレクトリ以下になる）</p>

<p>インストールしたgemを確認したい場合は、以下を実行。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ bundle list
</pre></div></div>

<p>railsでプロジェクト(今回の例では”example”)を作成。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ bundle exec rails new example --skip-bundle
</pre></div></div>

<p>（ <code>vendor/bundle</code> に入ったgemを使ってコマンドを実行したい場合は上記のように <code>bundle exec 〜</code> のようにする）<br>
（ <code>--skip-bundle</code> の指定を忘れないように！そうでないと <code>bundle install</code> が発動し、Ruby環境にgemがインストールされてしまう！）</p>

<p>railsをローカルインストールするために使ったbundlerの環境と、ローカルのrailsを削除する。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ rm -f Gemfile
$ rm -f Gemfile.lock
$ rm -rf .bundle
$ rm -rf vendor/bundle
</pre></div></div>

<h2>
<span id="railsプロジェクトの環境セットアップ" class="fragment"></span><a href="#rails%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AE%E7%92%B0%E5%A2%83%E3%82%BB%E3%83%83%E3%83%88%E3%82%A2%E3%83%83%E3%83%97"><i class="fa fa-link"></i></a>Railsプロジェクトの環境セットアップ</h2>

<p>必要に応じて、example内のGemfileの内容を編集する（Rspecとか、Guardとか、色々入れるよね）。</p>

<p>次に、example内に移動し、Gemfileに書かれたGemのインストールを行う。<br>
この際も <code>--path vendor/bundle</code> オプションをつけて <code>bundle install</code> することでプロジェクト内に閉じた状態でGemをインストールすることができる。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ cd example
$ bundle install --path vendor/bundle
</pre></div></div>

<p>(この <code>bundle install --path vendor/bundle</code> で、再びrails(及び関連Gem)が今度はRailsプロジェクトの <code>vender/bundle</code> ディレクトリ以下にインストールされる)</p>

<p>以下の２つの理由から、Gitの管理対象から <code>vendor/bundle</code> ディレクトリを外す。<br>
* <code>vendor/bundle</code>ディレクトリにあるGemsは容量を食うのでGitリポジトリに入れたくない。<br>
* GemfileやGemfile.lockファイルはGitの管理対象なので、cloneした人はそれをもとに<code>bundle install --path vendor/bundle</code>すれば、簡単に同じGem環境を導入できる。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ echo '/vendor/bundle' &gt;&gt; .gitignore
</pre></div></div>

<h2>
<span id="railsプロジェクトの起動" class="fragment"></span><a href="#rails%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AE%E8%B5%B7%E5%8B%95"><i class="fa fa-link"></i></a>Railsプロジェクトの起動</h2>

<p>以下のようにして、Railsの起動に成功したら、この記事の目的は達成された。おめでとう！</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ bundle exec rails server
</pre></div></div>

<h1>
<span id="以下tips" class="fragment"></span><a href="#%E4%BB%A5%E4%B8%8Btips"><i class="fa fa-link"></i></a>以下、Tips</h1>

<h2>
<span id="gemのインストール先の判断ruby環境下-or-bundlerでのローカルインストールについて" class="fragment"></span><a href="#gem%E3%81%AE%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB%E5%85%88%E3%81%AE%E5%88%A4%E6%96%ADruby%E7%92%B0%E5%A2%83%E4%B8%8B-or-bundler%E3%81%A7%E3%81%AE%E3%83%AD%E3%83%BC%E3%82%AB%E3%83%AB%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6"><i class="fa fa-link"></i></a>gemのインストール先の判断（Ruby環境下 or bundlerでのローカルインストール）について</h2>

<p>基本的には、そのプロジェクトでのみ使いたいgemであれば、bundlerで<code>bundle install --path vendor/bundle</code>して、プロジェクトに閉じた形でgemをローカルインストールし、<code>bundle exec ~</code>で実行する形を取るのがよい。<br>
ただし、<code>bundler</code>や<code>pry</code>など、</p>

<ul>
<li>どのプロジェクトでも共通して使いたい。</li>
<li>複数のバージョンを使い分ける必要性が基本的になく、常に最新バージョンであればよい。</li>
</ul>

<p>という性質のgemであれば、bundlerでローカルインストールするのでなく、<code>rbenv exec gem install ~</code>としてRuby環境に直接インストールしてしまった方が利便性が高い。<br>
gemの特性と自分の利用シーンに合わせて、gemのインストール場所は使い分けよう。</p>

<h2>
<span id="間違えてruby環境の方にいろんなgemが入ってしまった場合の対処" class="fragment"></span><a href="#%E9%96%93%E9%81%95%E3%81%88%E3%81%A6ruby%E7%92%B0%E5%A2%83%E3%81%AE%E6%96%B9%E3%81%AB%E3%81%84%E3%82%8D%E3%82%93%E3%81%AAgem%E3%81%8C%E5%85%A5%E3%81%A3%E3%81%A6%E3%81%97%E3%81%BE%E3%81%A3%E3%81%9F%E5%A0%B4%E5%90%88%E3%81%AE%E5%AF%BE%E5%87%A6"><i class="fa fa-link"></i></a>間違えてRuby環境の方にいろんなGemが入ってしまった場合の対処</h2>

<p>以下で全てのgemをアンインストールする。その後、標準でインストールされていたgemやbundlerを入れ直すこと。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ rbenv exec gem list | awk '{print "rbenv exec gem uninstall " $1}' | sh -xv
</pre></div></div>

<p>あるいは、以下の方法でRuby環境ごと削除して、rubyを導入しなおしても良い。</p>

<h2>
<span id="不要になったバージョンのruby環境を削除する" class="fragment"></span><a href="#%E4%B8%8D%E8%A6%81%E3%81%AB%E3%81%AA%E3%81%A3%E3%81%9F%E3%83%90%E3%83%BC%E3%82%B8%E3%83%A7%E3%83%B3%E3%81%AEruby%E7%92%B0%E5%A2%83%E3%82%92%E5%89%8A%E9%99%A4%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>不要になったバージョンのRuby環境を削除する</h2>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>$ rbenv uninstall -f <span class="m">2</span>.0.0-p195
$ rbenv rehash
</pre></div></div>

<h2>
<span id="rbenvを最新版に更新する" class="fragment"></span><a href="#rbenv%E3%82%92%E6%9C%80%E6%96%B0%E7%89%88%E3%81%AB%E6%9B%B4%E6%96%B0%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>rbenvを最新版に更新する</h2>

<p>rbenvのインストール方法によるが、今回はgit cloneでインストールしたため、普通にgit pullすればよい。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ cd ~/.rbenv/
$ git pull
$ cd ~/.rbenv/plugins/ruby-build/
$ git pull
</pre></div></div>

<h2>
<span id="rbenvで193-p125より古いrubyをビルドインストールする" class="fragment"></span><a href="#rbenv%E3%81%A7193-p125%E3%82%88%E3%82%8A%E5%8F%A4%E3%81%84ruby%E3%82%92%E3%83%93%E3%83%AB%E3%83%89%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>rbenvで、1.9.3-p125より古いrubyをビルド・インストールする</h2>

<p>1.9.3-p125 より前のバージョンのrubyはllvm-gccではなくGCCでコンパイルされていたようです。よって、Xcode4.2以降がインストールされている場合、GCCがないので（/usr/bin/gccはllvm-gccへのシンボリックリンクとなっている）、ビルドに失敗します。</p>

<p>以下のような感じで失敗します。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$CONFIGURE_OPTS="--with-openssl-dir=/opt/local --with-readline-dir=/opt/local --with-iconv-dir=/opt/local" rbenv install 1.8.7-p370

ERROR: This package must be compiled with GCC, but ruby-build couldn't
find a suitable `gcc` executable on your system. Please install GCC
and try again.

DETAILS: Apple no longer includes the official GCC compiler with Xcode
as of version 4.2. Instead, the `gcc` executable is a symlink to
`llvm-gcc`, a modified version of GCC which outputs LLVM bytecode.
For most programs the `llvm-gcc` compiler works fine. However,
versions of Ruby older than 1.9.3-p125 are incompatible with
`llvm-gcc`. To build older versions of Ruby you must have the official
GCC compiler installed on your system.

TO FIX THE PROBLEM: Install the official GCC compiler using these
packages: https://github.com/kennethreitz/osx-gcc-installer/downloads
You will need to install the official GCC compiler to build older
versions of Ruby even if you have installed Apple's Command Line Tools
for Xcode package. The Command Line Tools for Xcode package only
includes `llvm-gcc`.

BUILD FAILED
</pre></div></div>

<p>この対策としては、MacPortsでapple-gcc42をインストールすることです（Homebrewでも同じものがあるようです）。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ sudo port install apple-gcc42
</pre></div></div>

<p>すると、 <code>/opt/local/bin/gcc-apple-4.2</code> ができるので、同階層にgcc-apple-4.2へのシンボリックリンクをgccという名前で作ります。</p>

<p>さらに、ビルドにautoconfが必要なので、それもインストールします。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ sudo port install autoconf
</pre></div></div>

<p>そうして、rubyをもう一度ビルドしてみましょう。今回、ビルドを通すため、さらにいくつかのオプションを追加しています。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ CONFIGURE_OPTS="--with-arch=x86_64 --with-openssl-dir=/opt/local --with-readline-dir=/opt/local --with-iconv-dir=/opt/local --without-tk" CFLAGS="-arch x86_64" LDFLAGS="-arch x86_64" rbenv install 1.8.7-p370
</pre></div></div>

<h1>
<span id="謝辞" class="fragment"></span><a href="#%E8%AC%9D%E8%BE%9E"><i class="fa fa-link"></i></a>謝辞</h1>

<p>以下のサイト様の情報をかなり使わせていただきました。ていうかかなりの部分をコp（ry</p>

<ul>
<li>
<a href="http://d.hatena.ne.jp/clmind/20111109/1320814435" rel="nofollow noopener" target="_blank">吾輩のメモである</a>（clmind様）</li>
</ul>

<p>以下のサイト様からも情報をいただきました。</p>

<ul>
<li>
<a href="http://d.hatena.ne.jp/CortYuming/20120618/p1" rel="nofollow noopener" target="_blank">pygo</a>（CortYuming様）</li>
<li>
<a href="http://tech.portalshit.net/2011/11/15/i-am-new-with-rbenv/" rel="nofollow noopener" target="_blank">tech.portalshit.net</a>様</li>
</ul>

<h1>
<span id="こちらの記事もどうぞ" class="fragment"></span><a href="#%E3%81%93%E3%81%A1%E3%82%89%E3%81%AE%E8%A8%98%E4%BA%8B%E3%82%82%E3%81%A9%E3%81%86%E3%81%9E"><i class="fa fa-link"></i></a>こちらの記事もどうぞ</h1>

<p>と思ったんですが、以下の記事はもう古いので参考にしないでください。そのうち更新します。すみません。</p>

<p><del>Ruby、Rails環境のセットアップをマスターしたら、今度は「ぼくがかんがえたさいきょうのRailsてすとかんきょう」を手に入れましょう。以下の記事をどうぞ。</del></p>

<p><del>* <a href="http://qiita.com/emadurandal/items/1062364905f89910297d" id="reference-8ff849537fdadb5c3709">だれがなんといおうとぼくこそさいきょうのRails4テストかんきょう（ｒｙ</a></del></p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1" style="height:150px;">
<tr>
	<td rowspan="3">63位</td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="thumb-up-120px.png" /></i>845</kbd>
		<a target="_blank" href="https://qiita.com/kodam/items/4b10f9c304e4c94a95f1">プログラミングの本を無料で手に入れる方法</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2012-02-14<br />09:15:51</center>
	</td>
	<td style="width:200px;">
		<!--投稿者-->
		<center>
			@<a href="user/2436.html">kodam</a>(19件の記事)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/2436/profile-images/1473681523">
		</center>
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Qiita]</b> <b>[Java]</b> <b>[PHP]</b> <b>[C++]</b> <b>[Book]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<!--
		<div style="width:350px;height:150px;overflow:scroll;">%s</div>
		-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>プログラミングの原作本はオープンソースになって公開されていることがあります。<br>
例えば、<br>
・<a href="http://www.qtrac.eu/marksummerfield.html" rel="nofollow noopener" target="_blank">C++ GUI Programming with Qt 4 (First Edition)</a><br>
・<a href="http://www.qtrac.eu/marksummerfield.html" rel="nofollow noopener" target="_blank">C++ GUI Programming with Qt 3</a><br>
・<a href="http://www.oualline.com/books.free/free-books.html" rel="nofollow noopener" target="_blank">The C++ Hackers Guide</a><br>
・<a href="http://www.oualline.com/books.free/teach/intro.html" rel="nofollow noopener" target="_blank">Teachers' Guide to Practical C++ Programming</a><br>
・<a href="http://en.wikibooks.org/wiki/PHP_Programming" rel="nofollow noopener" target="_blank">PHP Programming</a><br>
・<a href="http://www.artima.com/pins1ed/" rel="nofollow noopener" target="_blank">Programming Scala</a><br>
・<a href="http://book.realworldhaskell.org/read/" rel="nofollow noopener" target="_blank">Real World Haskell――実戦で学ぶ関数型言語プログラミング</a><br>
・<a href="http://majesticseacreature.com/rbp-book/pdfs/rbp_1-0.pdf" rel="nofollow noopener" target="_blank">Ruby Best Practices</a><br>
・<a href="http://www.readwriteweb.com/hack/2010/12/6-free-javascript-e-books.php" rel="nofollow noopener" target="_blank">7 Free JavaScript E-Books and Tutorials</a><br>
・<a href="http://programmer.97things.oreilly.com/wiki/index.php/Contributions_Appearing_in_the_Book" rel="nofollow noopener" target="_blank">プログラマが知るべき97のこと</a><br>
・<a href="http://97things.oreilly.com/wiki/index.php/97_Things_Every_Software_Architect_Should_Know_-_The_Book" rel="nofollow noopener" target="_blank">ソフトウェアアーキテクトの知るべき97のこと</a></p>

<p>Amazonで気になる本を調べて、”原作者 言語 free ebook”と検索すれば出てきます。<br>
調べれば調べるほどたくさんあるんですねｗ　他に良書があれば教えて下さい。</p>

<p>【追記】<br>
著作権的に怪しいのは削除しました。原作者のホームページに行けばだいたい書いています。</p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1" style="height:150px;">
<tr>
	<td rowspan="3">64位</td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="thumb-up-120px.png" /></i>824</kbd>
		<a target="_blank" href="https://qiita.com/kidach1/items/e63c1607705178aa257c">Vagrant basics</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-10-09<br />19:57:39</center>
	</td>
	<td style="width:200px;">
		<!--投稿者-->
		<center>
			@<a href="user/48274.html">kidach1</a>(84件の記事)<br />(Akatsuki Inc. 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/48274/profile-images/1473691291">
		</center>
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[vagrant]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<!--
		<div style="width:350px;height:150px;overflow:scroll;">%s</div>
		-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;">
<h2>
<span id="概要" class="fragment"></span><a href="#%E6%A6%82%E8%A6%81"><i class="fa fa-link"></i></a>概要</h2>

<p>仮想環境（VirtualBoxなど）上への仮想マシンの立ち上げ、操作が可能。</p>

<h2>
<span id="用語" class="fragment"></span><a href="#%E7%94%A8%E8%AA%9E"><i class="fa fa-link"></i></a>用語</h2>

<h3>
<span id="プロバイダ" class="fragment"></span><a href="#%E3%83%97%E3%83%AD%E3%83%90%E3%82%A4%E3%83%80"><i class="fa fa-link"></i></a>プロバイダ</h3>

<p>仮想環境<br>
eg.VirtualBoxやVM Ware、EC2など</p>

<h3>
<span id="プロビジョニング" class="fragment"></span><a href="#%E3%83%97%E3%83%AD%E3%83%93%E3%82%B8%E3%83%A7%E3%83%8B%E3%83%B3%E3%82%B0"><i class="fa fa-link"></i></a>プロビジョニング</h3>

<p>ミドルウェアの設定やインストールを行うツール<br>
eg.シェルスクリプト、Chef（chef-solo, chef-client）、Puppetなど</p>

<h3>
<span id="boxファイル" class="fragment"></span><a href="#box%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB"><i class="fa fa-link"></i></a>Boxファイル</h3>

<p>仮想マシン起動の際にベースとなるイメージファイルのこと。<br>
仮想環境ごとに必要。<br>
通常はOSイメージから作成する。<br>
Vagrant利用の上で最低限必要な設定（Vagrantユーザの作成、sshdの起動、プロビジョニングツールのインストール）のみを行っておくのが普通。</p>

<h3>
<span id="vagrantfile" class="fragment"></span><a href="#vagrantfile"><i class="fa fa-link"></i></a>Vagrantfile</h3>

<p>構築する仮装マシンのスペックやプロビジョニングツールの指定など、仮想マシンの構成を記述する。<br>
Rubyベース。<br>
基本的に、本ファイルとプロビジョニングツールの設定ファイルの2つがあれば、どこでも同じ環境を再現できる。</p>

<h2>
<span id="コマンド" class="fragment"></span><a href="#%E3%82%B3%E3%83%9E%E3%83%B3%E3%83%89"><i class="fa fa-link"></i></a>コマンド</h2>

<h3>
<span id="基本" class="fragment"></span><a href="#%E5%9F%BA%E6%9C%AC"><i class="fa fa-link"></i></a>基本</h3>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span># バージョン確認
$ vagrant -v

# ヘルプ
$ vagrant -h
</pre></div></div>

<h3>
<span id="仮想環境のベースとなるboxファイルを準備" class="fragment"></span><a href="#%E4%BB%AE%E6%83%B3%E7%92%B0%E5%A2%83%E3%81%AE%E3%83%99%E3%83%BC%E3%82%B9%E3%81%A8%E3%81%AA%E3%82%8Bbox%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%82%92%E6%BA%96%E5%82%99"><i class="fa fa-link"></i></a>仮想環境のベースとなるBoxファイルを準備</h3>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ vagrant box add NAME URL
</pre></div></div>

<div class="code-frame" data-lang="sample"><div class="highlight"><pre><span></span># sample
$ vagrant box add centos64 http://developer.nrel.gov/downloads/vagrant-boxes/CentOS-6.4-x86_64-v20130427.box
（Vagrantfileのconfig.vm.boxディレクトリで指定する。）
</pre></div></div>

<p>BoxファイルはVeeweeで作成することも出来る。<br>
<a href="http://www.ryuzee.com/contents/blog/6614" class="autolink" rel="nofollow noopener" target="_blank">http://www.ryuzee.com/contents/blog/6614</a></p>

<h3>
<span id="box一覧の確認" class="fragment"></span><a href="#box%E4%B8%80%E8%A6%A7%E3%81%AE%E7%A2%BA%E8%AA%8D"><i class="fa fa-link"></i></a>Box一覧の確認</h3>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ vagrant box list
</pre></div></div>

<h3>
<span id="vagrantfileの作成" class="fragment"></span><a href="#vagrantfile%E3%81%AE%E4%BD%9C%E6%88%90"><i class="fa fa-link"></i></a>Vagrantfileの作成</h3>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ vagrant init BOX_NAME
</pre></div></div>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span># sample
$ vagrant init centos64
</pre></div></div>

<h3>
<span id="vagrantfileの設定" class="fragment"></span><a href="#vagrantfile%E3%81%AE%E8%A8%AD%E5%AE%9A"><i class="fa fa-link"></i></a>Vagrantfileの設定</h3>

<div class="code-frame" data-lang="ruby">
<div class="code-lang"><span class="bold">sample.rb</span></div>
<div class="highlight"><pre><span></span><span class="err">$</span> <span class="no">Vagrant</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="no">VAGRANTFILE_API_VERSION</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">config</span><span class="o">|</span>
    <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">box</span><span class="o">=</span><span class="s2">"centos64"</span>

    <span class="sr">//</span><span class="err">ネットワークの設定</span>
    <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">network</span> <span class="ss">:private_network</span><span class="p">,</span> <span class="ss">ip</span><span class="p">:</span><span class="s2">"192.168.33.10"</span>

    <span class="sr">//</span><span class="no">GUI</span><span class="err">モードの設定</span>
    <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">provider</span> <span class="ss">:virtualbox</span> <span class="k">do</span> <span class="o">|</span><span class="n">vb</span><span class="o">|</span>
        <span class="n">vb</span><span class="o">.</span><span class="n">gui</span> <span class="o">=</span> <span class="kp">true</span>
    <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</div>

<p>※ホストオンリーネットワーク<br>
　→ホストOSとゲストOS間でのみ通信できるネットワーク。<br>
　　上記では、ゲスト側に192.168.33.10（任意）を割り当てている。</p>

<p>以下は古い書き方。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>誤）config.vm.network :hostonly, "192.168.33.10"
</pre></div></div>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>正）config.vm.network :private_network, ip:"192.168.33.10"
</pre></div></div>

<h3>
<span id="仮想マシンの起動" class="fragment"></span><a href="#%E4%BB%AE%E6%83%B3%E3%83%9E%E3%82%B7%E3%83%B3%E3%81%AE%E8%B5%B7%E5%8B%95"><i class="fa fa-link"></i></a>仮想マシンの起動</h3>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ vagrant up
</pre></div></div>

<p>※Vagrantfileと同じディレクトリで実行する</p>

<p>GUIモードにしているとVirtualBoxが起動するので、id/passともに"vagrant"でログイン</p>

<h3>
<span id="sshでログイン" class="fragment"></span><a href="#ssh%E3%81%A7%E3%83%AD%E3%82%B0%E3%82%A4%E3%83%B3"><i class="fa fa-link"></i></a>sshでログイン</h3>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ vagrant ssh
</pre></div></div>

<p>※仮想マシンにてsshdが起動している必要あり。</p>

<h3>
<span id="通常の方法でssh出来るようにする" class="fragment"></span><a href="#%E9%80%9A%E5%B8%B8%E3%81%AE%E6%96%B9%E6%B3%95%E3%81%A7ssh%E5%87%BA%E6%9D%A5%E3%82%8B%E3%82%88%E3%81%86%E3%81%AB%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>通常の方法でssh出来るようにする。</h3>

<p>Chef Soloをknife-soloで動かすことを見越して、通常のsshアクセス、つまり</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ ssh 192.168.33.10
</pre></div></div>

<p>でsshできるようにする。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span># ~/.ssh/config
Host 192.168.33.*
IdentityFile ~/.vagrant.d/insecure_private_key
User vagrant
</pre></div></div>

<p>もしくは</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ vagrant ssh-config --host melody
</pre></div></div>

<p>で仮想サーバへのssh設定を吐き出してくれるため、</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ vagrant ssh-config --host melody &gt;&gt; ~/.ssh/config
</pre></div></div>

<p>とすることで</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ ssh melody
</pre></div></div>

<p>でログインできるようになる。</p>

<h3>
<span id="sshログイン時の設定確認" class="fragment"></span><a href="#ssh%E3%83%AD%E3%82%B0%E3%82%A4%E3%83%B3%E6%99%82%E3%81%AE%E8%A8%AD%E5%AE%9A%E7%A2%BA%E8%AA%8D"><i class="fa fa-link"></i></a>sshログイン時の設定確認</h3>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ vagrant ssh-config
</pre></div></div>

<h3>
<span id="status確認" class="fragment"></span><a href="#status%E7%A2%BA%E8%AA%8D"><i class="fa fa-link"></i></a>status確認</h3>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ vagrant status
</pre></div></div>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>Current machine states:
default                   running (virtualbox)
（仮想マシン名）　　（status）
</pre></div></div>

<h3>
<span id="仮想マシンの停止" class="fragment"></span><a href="#%E4%BB%AE%E6%83%B3%E3%83%9E%E3%82%B7%E3%83%B3%E3%81%AE%E5%81%9C%E6%AD%A2"><i class="fa fa-link"></i></a>仮想マシンの停止</h3>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ vagrant halt
</pre></div></div>

<h3>
<span id="仮想マシンの削除" class="fragment"></span><a href="#%E4%BB%AE%E6%83%B3%E3%83%9E%E3%82%B7%E3%83%B3%E3%81%AE%E5%89%8A%E9%99%A4"><i class="fa fa-link"></i></a>仮想マシンの削除</h3>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ vagrant destroy
</pre></div></div>

<h3>
<span id="仮想マシンのエクスポート" class="fragment"></span><a href="#%E4%BB%AE%E6%83%B3%E3%83%9E%E3%82%B7%E3%83%B3%E3%81%AE%E3%82%A8%E3%82%AF%E3%82%B9%E3%83%9D%E3%83%BC%E3%83%88"><i class="fa fa-link"></i></a>仮想マシンのエクスポート</h3>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ vagrant package
</pre></div></div>

<p>→package.boxという名前のBoxファイルが生成される。<br>
それを配布し、受け取った側は</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ vagrant box add new_box package.box
</pre></div></div>

<p>で利用できる。</p>

<h2>
<span id="vagrantをより便利に" class="fragment"></span><a href="#vagrant%E3%82%92%E3%82%88%E3%82%8A%E4%BE%BF%E5%88%A9%E3%81%AB"><i class="fa fa-link"></i></a>vagrantをより便利に</h2>

<h3>
<span id="sahara" class="fragment"></span><a href="#sahara"><i class="fa fa-link"></i></a>sahara</h3>

<p>saharaを用いると、簡単に仮想マシンの状態保存・ロールバックが出来ます。</p>

<p>saharaでVagrantの状態管理<br>
<a href="http://qiita.com/kidachi_/items/ba365905b2a770c72be1" class="autolink" id="reference-e1ec2122e92826d8c95f">http://qiita.com/kidachi_/items/ba365905b2a770c72be1</a></p>

<h3>
<span id="chef関連" class="fragment"></span><a href="#chef%E9%96%A2%E9%80%A3"><i class="fa fa-link"></i></a>chef関連</h3>

<p>サーバ構成管理ツールといえばchef。</p>

<p>Chefの基本<br>
<a href="http://qiita.com/kidachi_/items/9d569b8673e70ef93f0e" class="autolink" id="reference-72be65dc6ee81cd15506">http://qiita.com/kidachi_/items/9d569b8673e70ef93f0e</a></p>

<p>knife-soloによるChefの実行<br>
<a href="http://qiita.com/kidachi_/items/b222fb2892e6108c46d5" class="autolink" id="reference-37e57e9cc006bba50b99">http://qiita.com/kidachi_/items/b222fb2892e6108c46d5</a></p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1" style="height:150px;">
<tr>
	<td rowspan="3">65位</td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="thumb-up-120px.png" /></i>818</kbd>
		<a target="_blank" href="https://qiita.com/kawaz/items/07d67a851fd49c1c183e">S3の料金体系が分かりにくいと聞かれたので纏めた</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-07-19<br />11:42:26</center>
	</td>
	<td style="width:200px;">
		<!--投稿者-->
		<center>
			@<a href="user/18726.html">kawaz</a>(146件の記事)<br />(株式会社ずんシステム 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/18726/profile-images/1473682513">
		</center>
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[AWS]</b> <b>[S3]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<!--
		<div style="width:350px;height:150px;overflow:scroll;">%s</div>
		-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;">
<h1>
<span id="課金ポイントは3つ" class="fragment"></span><a href="#%E8%AA%B2%E9%87%91%E3%83%9D%E3%82%A4%E3%83%B3%E3%83%88%E3%81%AF3%E3%81%A4"><i class="fa fa-link"></i></a>課金ポイントは3つ</h1>

<p>そんなに難しいことはないと思いますが <strong>課金ポイントは3つ</strong> あります。</p>

<h2>
<span id="ストレージ容量" class="fragment"></span><a href="#%E3%82%B9%E3%83%88%E3%83%AC%E3%83%BC%E3%82%B8%E5%AE%B9%E9%87%8F"><i class="fa fa-link"></i></a>ストレージ容量</h2>

<p>単純に保存容量に対して課金されます。<br>
低冗長化ストレージを指定すると2割くらい安くできます。</p>

<p>ログだとか家族写真の保存だとかメインだとデータ転送よりここにお金がかかってきます。（容量でかいけど古いやつは殆どアクセスしないようなのはライフサイクル設定でGlacierに移動する手もあります）</p>

<h2>
<span id="データ転送" class="fragment"></span><a href="#%E3%83%87%E3%83%BC%E3%82%BF%E8%BB%A2%E9%80%81"><i class="fa fa-link"></i></a>データ転送</h2>

<p>課金されるのは送信だけです。受信（S3へのアップロード）は無料です。</p>

<p>また、<code>インターネットへの送信</code>と<code>別のAWSリージョンまたはCloudFrontへの送信</code>で別料金が設定されてますが、小～中規模のシステムならサーバ群は1リージョンに纏まってることが多いでしょうから、CroudFront利用時くらいにしかその料金は発生しないと思います。しかもCroudFront利用時は殆どのトラフィックはCroudFrontで処理されるから転送量はそっちに計上されて、S3からの送信は殆ど無視出来る感じになるでしょう。</p>

<p>あと <strong>同一リージョン内の(AZ非依存な)AWSサービスとの通信は無料</strong> です。例えば同一リージョンのEC2とS3間の通信は送信も受信も無料。</p>

<p>なので特殊な用途以外では、 <strong>一番高いインターネットへのデータ送信だけ考えておけばよい</strong> と思います。</p>

<h2>
<span id="リクエスト数" class="fragment"></span><a href="#%E3%83%AA%E3%82%AF%E3%82%A8%E3%82%B9%E3%83%88%E6%95%B0"><i class="fa fa-link"></i></a>リクエスト数</h2>

<p>多分これがあるせいでS3の料金が分かりにくいって言われるんでしょうね。<br>
S3ではGET/PUT/POST/LIST/COPYなどのリクエスト数に対しての課金もあります。</p>

<ul>
<li>GET は安い（$0.0037/10,000req、OPTION/HEADとかも、↓以外は全部この料金）</li>
<li>PUT/POST/LIST/COPY は高め（$0.0047/1,000req、GETの12.7倍）</li>
<li>DELETE は無料</li>
</ul>

<p>例えば1日100万GETされると月に3千万リクエストで課金は$11.1になります。<br>
データ転送コストの一部という感覚です。</p>

<h1>
<span id="適当に計算してみた感じ" class="fragment"></span><a href="#%E9%81%A9%E5%BD%93%E3%81%AB%E8%A8%88%E7%AE%97%E3%81%97%E3%81%A6%E3%81%BF%E3%81%9F%E6%84%9F%E3%81%98"><i class="fa fa-link"></i></a>適当に計算してみた感じ</h1>

<p>CDN用途で使ったとして、キャッシュとか考えずに適当に計算してみると↓こんな感じ。<br>
※2014/07/04に東京リージョンで計算した値です（前の価格覚えてないけど消費税UPで変わったかもしれないので再計算）。<br>
※2014/12/01にAWS初の<a href="http://aws.amazon.com/jp/blogs/aws/aws-data-transfer-price-reduction/" rel="nofollow noopener" target="_blank">データ転送量値下げ</a>キタ！後で再計算予定だけどとりあえず<font color="red">下の表の転送料金部分を25%OFFくらいで見ておけ</font>ばOK!<br>
※数字の単位は K=1024, G=1024*1024, T=1024^3, P=1024^4 です。</p>

<table>
<thead>
<tr>
<th style="text-align: right">GETリクエスト数</th>
<th style="text-align: right">平均ファイルサイズ</th>
<th style="text-align: right">データ転送量</th>
<th style="text-align: right">転送料金</th>
<th style="text-align: right">リクエスト料金</th>
<th style="text-align: right">合計料金</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: right">3千万(100万/日)</td>
<td style="text-align: right">1KB</td>
<td style="text-align: right">28.6GB</td>
<td style="text-align: right">$5 .55</td>
<td style="text-align: right">$11 .10</td>
<td style="text-align: right">$16 .65</td>
</tr>
<tr>
<td style="text-align: right">3千万(100万/日)</td>
<td style="text-align: right">1.95KB</td>
<td style="text-align: right">55.8GB</td>
<td style="text-align: right"><strong>$11 .01</strong></td>
<td style="text-align: right"><strong>$11 .10</strong></td>
<td style="text-align: right">$22 .11</td>
</tr>
<tr>
<td style="text-align: right">3千万(100万/日)</td>
<td style="text-align: right">50KB</td>
<td style="text-align: right">1.4TB</td>
<td style="text-align: right">$287 .33</td>
<td style="text-align: right">$11 .10</td>
<td style="text-align: right">$298 .43</td>
</tr>
<tr>
<td style="text-align: right">3千万(100万/日)</td>
<td style="text-align: right">100KB</td>
<td style="text-align: right">2.8TB</td>
<td style="text-align: right">$574 .86</td>
<td style="text-align: right">$11 .10</td>
<td style="text-align: right">$585 .96</td>
</tr>
<tr>
<td style="text-align: right">3千万(100万/日)</td>
<td style="text-align: right">1MB</td>
<td style="text-align: right">28.6TB</td>
<td style="text-align: right">$5,068 .03</td>
<td style="text-align: right">$11 .10</td>
<td style="text-align: right">$5,080 .13</td>
</tr>
<tr>
<td style="text-align: right">3億(1千万/日)</td>
<td style="text-align: right">1KB</td>
<td style="text-align: right">286.1GB</td>
<td style="text-align: right">$57 .31</td>
<td style="text-align: right">$111 .00</td>
<td style="text-align: right">$168 .31</td>
</tr>
<tr>
<td style="text-align: right">3億(1千万/日)</td>
<td style="text-align: right">1.95KB</td>
<td style="text-align: right">557.9GB</td>
<td style="text-align: right"><strong>$111 .94</strong></td>
<td style="text-align: right"><strong>$111 .10</strong></td>
<td style="text-align: right">$222 .94</td>
</tr>
<tr>
<td style="text-align: right">3億(1千万/日)</td>
<td style="text-align: right">50KB</td>
<td style="text-align: right">14.0TB</td>
<td style="text-align: right">$2700 .33</td>
<td style="text-align: right">$111 .10</td>
<td style="text-align: right">$2,811 .33</td>
</tr>
<tr>
<td style="text-align: right">3億(1千万/日)</td>
<td style="text-align: right">100KB</td>
<td style="text-align: right">27.9TB</td>
<td style="text-align: right">$4,960 .54</td>
<td style="text-align: right">$111 .10</td>
<td style="text-align: right">$5,071 .54</td>
</tr>
<tr>
<td style="text-align: right">3億(1千万/日)</td>
<td style="text-align: right">1MB</td>
<td style="text-align: right">286.1TB</td>
<td style="text-align: right">$40,258 .35</td>
<td style="text-align: right">$111 .10</td>
<td style="text-align: right">$40,369 .35</td>
</tr>
<tr>
<td style="text-align: right">30億(1億/日)</td>
<td style="text-align: right">1KB</td>
<td style="text-align: right">2.8TB</td>
<td style="text-align: right">$574 .86</td>
<td style="text-align: right">$1,111 .00</td>
<td style="text-align: right">$1,684 .86</td>
</tr>
<tr>
<td style="text-align: right">30億(1億/日)</td>
<td style="text-align: right">1.95KB</td>
<td style="text-align: right">5.4TB</td>
<td style="text-align: right"><strong>$1,121 .18</strong></td>
<td style="text-align: right"><strong>$1,111 .00</strong></td>
<td style="text-align: right">$2.231 .18</td>
</tr>
<tr>
<td style="text-align: right">30億(1億/日)</td>
<td style="text-align: right">50KB</td>
<td style="text-align: right">139.7TB</td>
<td style="text-align: right">$21,113 .33</td>
<td style="text-align: right">$1,111 .00</td>
<td style="text-align: right">$22.223 .33</td>
</tr>
<tr>
<td style="text-align: right">30億(1億/日)</td>
<td style="text-align: right">100KB</td>
<td style="text-align: right">279.4TB</td>
<td style="text-align: right">$39,386 .31</td>
<td style="text-align: right">$1,111 .00</td>
<td style="text-align: right">$40,496 .31</td>
</tr>
<tr>
<td style="text-align: right">30億(1億/日)</td>
<td style="text-align: right">1MB</td>
<td style="text-align: right">3.1PB</td>
<td style="text-align: right">お問い合わせ</td>
<td style="text-align: right">$1,111 .00</td>
<td style="text-align: right">お問い合わせ</td>
</tr>
</tbody>
</table>

<ul>
<li>平均ファイルサイズが2KB以下だと、<code>リクエスト数</code> &gt; <code>データ転送</code> &gt; <code>ストレージ容量</code>
</li>
<li>平均ファイルサイズが2KB以上だと、<code>データ転送</code> &gt; <code>リクエスト数</code> &gt; <code>ストレージ容量</code>
</li>
</ul>

<p>という順番でお金がかるっぽいです。</p>

<p>なので分割されたJS/CSSはconcatして小さい画像はCSSスプライトも活用してリクエスト数を減らしてやりましょう、サイトパフォーマンスが上がるだけじゃなく財布にも優しくなります。</p>

<p>それからやっぱ転送量が一番金がかかるのでクライアントキャッシュ出来るものはどんどんキャッシュさせて圧縮できるものは圧縮しときましょう。</p>

<p>ちなみにS3の前にCloudFrontを挟むとS3のリクエスト数とデータ転送量は大幅に減ります。ですが減った分はCloudFront側で計上されるのでゼロになるわけじゃありません、データ転送料金はCloudFrontの方が多少安く設定されています。特にデータ転送量が巨大になってきた場合はCloudFrontを経由したほうが、ボリュームディスカウントが効いてきたり、またリザーブド契約をすることで大幅な割引を受けたりも出来るので是非検討しましょう。特に年間とおして月平均10TB以上使う場合はCloudFrontの営業に連絡を取るべきです。</p>

<h1>
<span id="月額計算機amazon-web-services-simple-monthly-calculator" class="fragment"></span><a href="#%E6%9C%88%E9%A1%8D%E8%A8%88%E7%AE%97%E6%A9%9Famazon-web-services-simple-monthly-calculator"><i class="fa fa-link"></i></a>月額計算機（Amazon Web Services Simple Monthly Calculator）</h1>

<p>とりあえずAWSの課金で悩んだら以下のページから見積もりできるので、実際の数字を入れて見てみるのが理解への近道です。<br>
<a href="https://calculator.s3.amazonaws.com/calc5.html?lng=ja_JP" rel="nofollow noopener" target="_blank">Amazon Web Services Simple Monthly Calculator</a></p>

<p>S3の料金なら、左メニューからAmazon S3をクリックして、リージョン選択をしてとりあえずは、ストレージ&gt;ストレージ、データ転送&gt;データ転送、リクエスト&gt;GET、の値を入力しておけば十分でしょう。</p>

<p>あとこの計算機は、デフォで <strong>右上の分かりにくいところにある初年度無料枠のチェックボックス</strong> がONになってるので長期的な見積もりをしたい場合は外しておきましょう。</p>

<h1>
<span id="値下げについて" class="fragment"></span><a href="#%E5%80%A4%E4%B8%8B%E3%81%92%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6"><i class="fa fa-link"></i></a>値下げについて</h1>

<ul>
<li>容量に対する課金は過去に何度も値下げがされています。きっと今後も定期的に値下げがあることが期待できます。</li>
<li>
<strike>データ転送量と</strike>あとコール回数依存の課金（S3の場合はリクエスト数）に関しては、僕の記憶が確かなら全AWSサービスに対しても一度も値下げが無いと思います。特にデータ転送に関わる部分は高額になりがちなので安くなると嬉しいなーと毎回思うけどビクともしません、聖域なんですかね？

<ul>
<li>2014年12月1日から、多分AWSで初の<a href="http://aws.amazon.com/jp/blogs/aws/aws-data-transfer-price-reduction/" rel="nofollow noopener" target="_blank">データ転送量の値下げ</a>キター！！全体的に大体25%くらいは安くなるぞぉぉぉおーー！</li>
</ul>
</li>
</ul>

<h1>
<span id="関連リンク" class="fragment"></span><a href="#%E9%96%A2%E9%80%A3%E3%83%AA%E3%83%B3%E3%82%AF"><i class="fa fa-link"></i></a>関連リンク</h1>

<p><a href="http://aws.amazon.com/jp/s3/pricing/" rel="nofollow noopener" target="_blank">Amazon S3 料金表</a><br>
<a href="https://calculator.s3.amazonaws.com/calc5.html?lng=ja_JP" rel="nofollow noopener" target="_blank">Amazon Web Services Simple Monthly Calculator</a></p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1" style="height:150px;">
<tr>
	<td rowspan="3">66位</td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="thumb-up-120px.png" /></i>816</kbd>
		<a target="_blank" href="https://qiita.com/maccotsan/items/f320036e19f8d3b798c1">SublimeTextの教科書で紹介されてるプラグインまとめ</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2014-03-21<br />08:00:17</center>
	</td>
	<td style="width:200px;">
		<!--投稿者-->
		<center>
			@<a href="user/3860.html">maccotsan</a>(35件の記事)<br />(None 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/3860/profile-images/1473683611">
		</center>
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[SublimeText]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<!--
		<div style="width:350px;height:150px;overflow:scroll;">%s</div>
		-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p><a href="https://camo.qiitausercontent.com/746a6830f8728cef0cd1ac5f2332cfb9f877496c/687474703a2f2f696d672e6970732e636f2e6a702f696a2f31332f313131333130313130362f313131333130313130362d313730782e6a7067" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/746a6830f8728cef0cd1ac5f2332cfb9f877496c/687474703a2f2f696d672e6970732e636f2e6a702f696a2f31332f313131333130313130362f313131333130313130362d313730782e6a7067" alt="Impress Japan: Web制作者のためのSublime Textの教科書 今すぐ最高のエディタを使いこなすプロのノウハウ" title="Impress Japan: Web制作者のためのSublime Textの教科書 今すぐ最高のエディタを使いこなすプロのノウハウ" data-canonical-src="http://img.ips.co.jp/ij/13/1113101106/1113101106-170x.jpg"></a><br>
<em>via <a href="http://www.impressjapan.jp/books/1113101106" rel="nofollow noopener" target="_blank">Impress Japan: Web制作者のためのSublime Textの教科書 今すぐ最高のエディタを使いこなすプロのノウハウ</a></em></p>

<p>サンプルPDF4章の目次より</p>

<p>※説明は私の調べたものなのでかなり適当です。</p>

<h2>
<span id="sidebarenhancements" class="fragment"></span><a href="#sidebarenhancements"><i class="fa fa-link"></i></a>SideBarEnhancements</h2>

<p>サイドバー右クリックのメニューを拡張</p>

<p><a href="https://github.com/titoBouzout/SideBarEnhancements" rel="nofollow noopener" target="_blank">titoBouzout/SideBarEnhancements</a></p>

<h2>
<span id="lineendings" class="fragment"></span><a href="#lineendings"><i class="fa fa-link"></i></a>LineEndings</h2>

<p>改行コードの変更。</p>

<p><a href="https://github.com/SublimeText/LineEndings" rel="nofollow noopener" target="_blank">SublimeText/LineEndings</a></p>

<p>※現状、SublimeText3で動かないです。143Pのコラムで動かし方について言及がある模様。</p>

<h2>
<span id="trailingspaces" class="fragment"></span><a href="#trailingspaces"><i class="fa fa-link"></i></a>TrailingSpaces</h2>

<p>行末の半角スペースを削除。</p>

<p><a href="https://github.com/SublimeText/TrailingSpaces" rel="nofollow noopener" target="_blank">SublimeText/TrailingSpaces</a></p>

<h2>
<span id="focus-last-tab" class="fragment"></span><a href="#focus-last-tab"><i class="fa fa-link"></i></a>Focus Last Tab</h2>

<blockquote>
<p>Sublime Text 2 では、Chrome などのタブブラウザーと同じように command + 1 〜 9 で切り替えができます。 唯一違うのは、command + 9 は最後のタブではなく、9番目のタブに切り替わること。 つまり9個以上タブを開いていない場合には機能しません。  この挙動を Chrome などと揃えるために Focus Last Tab というパッケージを入れてみました。<br>
<em>via <a href="http://www.understandard.net/tool/tool010.html" rel="nofollow noopener" target="_blank">Sublime Text 2 のタブ選択をブラウザーと同じようにする // understandard</a></em></p>
</blockquote>

<p><a href="https://github.com/eproxus/focus_last_tab" rel="nofollow noopener" target="_blank">eproxus/focus_last_tab</a></p>

<h2>
<span id="quick-file-open" class="fragment"></span><a href="#quick-file-open"><i class="fa fa-link"></i></a>Quick File Open</h2>

<blockquote>
<p>よく使うファイルをすぐに呼び出せるようにする Package<br>
<em>via <a href="http://www.understandard.net/tool/tool013.html" rel="nofollow noopener" target="_blank">よく使うファイルをすぐに呼び出せるようにする Sublime Text Package // understandard</a></em></p>
</blockquote>

<p><a href="https://github.com/gsingh93/sublime-quick-file-open" rel="nofollow noopener" target="_blank">gsingh93/sublime-quick-file-open</a></p>

<h2>
<span id="gotorecent" class="fragment"></span><a href="#gotorecent"><i class="fa fa-link"></i></a>GotoRecent</h2>

<blockquote>
<p>GotoRecent　最近開いたファイルを簡単に　ショートカット「Ctrl+shift+R」<br>
<em>via <a href="http://shirura.jugem.jp/?eid=144" rel="nofollow noopener" target="_blank">Sublime Text 2を導入をしてみた。参考サイトなど | 零のメモ張</a></em></p>
</blockquote>

<p><a href="https://github.com/paccator/GotoRecent" rel="nofollow noopener" target="_blank">paccator/GotoRecent</a></p>

<h2>
<span id="recentactivefiles" class="fragment"></span><a href="#recentactivefiles"><i class="fa fa-link"></i></a>RecentActiveFiles</h2>

<blockquote>
<p>直近で利用したファイル一覧を表示可能になります。 ⌘ + k + ⌘ + t のキーバインドで表示します。<br>
<em>via <a href="http://qiita.com/fakestarbaby/items/bd72acb2eda25b5523d0" id="reference-7a235de0a2a6373abff4">Rails - オレオレ Sublime Text 環境まとめ - Qiita</a></em></p>
</blockquote>

<p><a href="https://github.com/jugyo/SublimeRecentActiveFiles" rel="nofollow noopener" target="_blank">jugyo/SublimeRecentActiveFiles</a></p>

<h2>
<span id="zip-browser" class="fragment"></span><a href="#zip-browser"><i class="fa fa-link"></i></a>Zip Browser</h2>

<p>Zipアーカイブの中身を表示<br>
※目次では'Zip Browse'となってるけどたぶんタイポでこれのことだと思う。</p>

<p><a href="https://bitbucket.org/klorenz/sublimezipbrowser/src/11b667184e5d?at=default" rel="nofollow noopener" target="_blank">klorenz / SublimeZipBrowser / ソース / — Bitbucket</a></p>

<h2>
<span id="local-history" class="fragment"></span><a href="#local-history"><i class="fa fa-link"></i></a>Local History</h2>

<blockquote>
<p>GitやSVNがなくても使える簡易バージョン管理ができる<br>
<em>via <a href="http://dev.classmethod.jp/tool/html-corder-sublime-text-2-customize/" rel="nofollow noopener" target="_blank">【追記】【寄せあつめ】今さらだけどSublime Text 2の基本とカスタマイズ【&amp;Vim化】【4日目】 ｜ Developers.IO</a></em></p>
</blockquote>

<p><a href="https://github.com/vishr/local-history" rel="nofollow noopener" target="_blank">vishr/local-history</a></p>

<h2>
<span id="sublimeonsavebuild" class="fragment"></span><a href="#sublimeonsavebuild"><i class="fa fa-link"></i></a>SublimeOnSaveBuild</h2>

<blockquote>
<p>ファイル保存時に自動でビルドさせる<br>
<em>via <a href="http://y-anz-m.blogspot.jp/2012/11/sublime-text-2.html" rel="nofollow noopener" target="_blank">Y.A.M の 雑記帳: Sublime Text 2 でファイル保存時に自動でビルドさせる</a></em></p>
</blockquote>

<p><a href="https://github.com/alexnj/SublimeOnSaveBuild" rel="nofollow noopener" target="_blank">alexnj/SublimeOnSaveBuild</a></p>

<h2>
<span id="advancednewfile" class="fragment"></span><a href="#advancednewfile"><i class="fa fa-link"></i></a>AdvancedNewFile</h2>

<blockquote>
<p>新規のフォルダやファイルをダイアログから素早く作成する。<br>
<em>via <a href="http://www.d-wood.com/blog/2013/11/08_4994.html" rel="nofollow noopener" target="_blank">Sublime Text: AdvancedNewFile で、フォルダやファイルを素早く作成する (Nettuts+ Fetch も) | deadwood</a></em></p>
</blockquote>

<p><a href="https://github.com/skuroda/Sublime-AdvancedNewFile" rel="nofollow noopener" target="_blank">skuroda/Sublime-AdvancedNewFile</a></p>

<h2>
<span id="terminal" class="fragment"></span><a href="#terminal"><i class="fa fa-link"></i></a>Terminal</h2>

<blockquote>
<p>ターミナルを起動させる<br>
<em>via <a href="http://www.absolute-keitarou.net/blog/?p=292" rel="nofollow noopener" target="_blank">SublimeTextからMacのターミナルを起動させるプラグインで作業効率ガチ上げ！ | メモ帳代わりのブログ</a></em></p>
</blockquote>

<p><a href="https://github.com/wbond/sublime_terminal" rel="nofollow noopener" target="_blank">wbond/sublime_terminal</a></p>

<h2>
<span id="boundkeys" class="fragment"></span><a href="#boundkeys"><i class="fa fa-link"></i></a>BoundKeys</h2>

<p>キーバインド設定一覧を表示</p>

<p><a href="https://github.com/CodeEffect/BoundKeys" rel="nofollow noopener" target="_blank">CodeEffect/BoundKeys</a></p>

<h2>
<span id="superselect" class="fragment"></span><a href="#superselect"><i class="fa fa-link"></i></a>SuperSelect</h2>

<blockquote>
<p>Cmd+D(Ctrl+D)を拡張する。任意の単語を順番に、スキップしながら、反転するなど。使い方は公式サイトを参照。<br>
<em>via <a href="https://gist.github.com/konitter/4652460" rel="nofollow noopener" target="_blank">Sublime Text 2 Packages.</a></em></p>
</blockquote>

<p><a href="https://github.com/codecarson/SublimeSuperSelect" rel="nofollow noopener" target="_blank">codecarson/SublimeSuperSelect</a></p>

<h2>
<span id="bufferscroll" class="fragment"></span><a href="#bufferscroll"><i class="fa fa-link"></i></a>BufferScroll</h2>

<p>スクロールやキャレット位置を記憶して復元</p>

<p><a href="https://github.com/titoBouzout/BufferScroll" rel="nofollow noopener" target="_blank">titoBouzout/BufferScroll</a></p>

<h2>
<span id="nettuts-fetch" class="fragment"></span><a href="#nettuts-fetch"><i class="fa fa-link"></i></a>Nettuts+ Fetch</h2>

<blockquote>
<p>外部リソースを簡単なコマンドで手元にpullする事ができます。  例えば、普段からよく使うjQueryやリセット用のCSS、 常用するフレームワークや、Wordpress等のCMS等、 設定さえしておけば、コマンド一発（正確には三発）でダウンロード・展開してくれます。<br>
<em>via <a href="http://blog.mach3.jp/2012/01/10/sublime-text-and-nettuts-fetch.html" rel="nofollow noopener" target="_blank">Sublime TextとNettuts+ Fetchで音速のスタートアップ – Mach3.laBlog</a></em></p>
</blockquote>

<p><a href="https://github.com/weslly/Nettuts-Fetch" rel="nofollow noopener" target="_blank">weslly/Nettuts-Fetch</a></p>

<h2>
<span id="cdnjs" class="fragment"></span><a href="#cdnjs"><i class="fa fa-link"></i></a>cdnjs</h2>

<blockquote>
<p>様々な有名jsライブラリを公開しているCDNサービスから、 使いたいライブラリを選択してscriptタグとして挿入できるパッケージ<br>
<em>via <a href="http://leko.jp/archives/453" rel="nofollow noopener" target="_blank">Sublime Text2の作業効率を加速させるパッケージ12個 | WEB EGG</a></em></p>
</blockquote>

<p><a href="https://github.com/dafrancis/Sublime-Text--cdnjs" rel="nofollow noopener" target="_blank">dafrancis/Sublime-Text--cdnjs</a></p>

<h2>
<span id="brackethighlighter" class="fragment"></span><a href="#brackethighlighter"><i class="fa fa-link"></i></a>BracketHighlighter</h2>

<p>開始/終了タグの強調</p>

<p><a href="https://github.com/facelessuser/BracketHighlighter" rel="nofollow noopener" target="_blank">facelessuser/BracketHighlighter</a></p>

<h2>
<span id="sublimecodeintel" class="fragment"></span><a href="#sublimecodeintel"><i class="fa fa-link"></i></a>SublimeCodeIntel</h2>

<blockquote>
<p>ユーザー定義変数/関数の補完や定義元ジャンプができるようになる。<br>
<em>via <a href="http://wada811.blogspot.com/2013/02/sublime-text-2-sublime-code-intel.html" rel="nofollow noopener" target="_blank">[SublimeText2]SublimeCodeIntelで更にIDE化 | DevAchieve</a></em></p>
</blockquote>

<p><a href="https://github.com/SublimeCodeIntel/SublimeCodeIntel" rel="nofollow noopener" target="_blank">SublimeCodeIntel/SublimeCodeIntel</a></p>

<h2>
<span id="sublimelinter" class="fragment"></span><a href="#sublimelinter"><i class="fa fa-link"></i></a>SublimeLinter</h2>

<blockquote>
<p>文法チェックをリアルタイムでしてくれる<br>
<em>via <a href="http://blog.livedoor.jp/noanoa07/archives/1961271.html" rel="nofollow noopener" target="_blank">noanoa 日々の日記 : Sublime Text 3 での SublimeLinter の設定</a></em></p>
</blockquote>

<p><a href="https://github.com/SublimeLinter/SublimeLinter3" rel="nofollow noopener" target="_blank">SublimeLinter/SublimeLinter3</a></p>

<h2>
<span id="all-autocomplete" class="fragment"></span><a href="#all-autocomplete"><i class="fa fa-link"></i></a>All Autocomplete</h2>

<blockquote>
<p>標準の自動補完（オートコンプリート）機能を強化し、マッチする文字列があればサジェストする。<br>
<em>via <a href="http://fusyomono1.blogspot.jp/2013/03/sublime-text2-sublime-text2-sublime.html" rel="nofollow noopener" target="_blank">不肖者の人生実験</a></em></p>
</blockquote>

<p><a href="https://github.com/alienhard/SublimeAllAutocomplete" rel="nofollow noopener" target="_blank">alienhard/SublimeAllAutocomplete</a></p>

<h2>
<span id="alignment" class="fragment"></span><a href="#alignment"><i class="fa fa-link"></i></a>Alignment</h2>

<blockquote>
<p>選択範囲の整形。<br>
<em>via <a href="http://powerful-code.com/blog/2012/11/plugins-for-st2/" rel="nofollow noopener" target="_blank">[SublimeText2]「第0回 Sublime Text 2 勉強会」で紹介されたプラグインまとめ - The Powerful Code</a></em></p>
</blockquote>

<p><a href="https://github.com/wbond/sublime_alignment" rel="nofollow noopener" target="_blank">wbond/sublime_alignment</a></p>

<h2>
<span id="tag" class="fragment"></span><a href="#tag"><i class="fa fa-link"></i></a>Tag</h2>

<blockquote>
<p>閉じタグ &lt;/ 打つと補完してくれるので地味に便利！<br>
<em>via <a href="http://qiita.com/tatsuoSakurai/items/cd9e22a9dc4e10ea6deb" id="reference-1849c12ee1fefc7ea5b1">SublimeText2/3 環境設定とか（基本3） - Qiita</a></em></p>
</blockquote>

<p><a href="https://github.com/SublimeText/Tag" rel="nofollow noopener" target="_blank">SublimeText/Tag</a></p>

<h2>
<span id="csscomb" class="fragment"></span><a href="#csscomb"><i class="fa fa-link"></i></a>CSScomb</h2>

<blockquote>
<p>CSSのプロパティをソートしてくれる便利ツールです。またソートするプロパティの順番も自分でカスタマイズ可能！ものぐさな自分にとって痒いところに手が届くマストなツールです。<br>
<em>via <a href="http://dev.classmethod.jp/tool/csscomb/" rel="nofollow noopener" target="_blank">【便利ツール】CSScomb for sublime text 2で、CSSプロパティを整理・整頓【16日目】 ｜ Developers.IO</a></em></p>
</blockquote>

<p><a href="https://github.com/csscomb/CSScomb-for-Sublime" rel="nofollow noopener" target="_blank">csscomb/csscomb-for-sublime</a></p>

<h2>
<span id="smart-delete" class="fragment"></span><a href="#smart-delete"><i class="fa fa-link"></i></a>Smart Delete</h2>

<p>キャレット位置前後のスペースを一発で削除する</p>

<p><a href="https://github.com/mac2000/sublime-smart-delete" rel="nofollow noopener" target="_blank">mac2000/sublime-smart-delete</a></p>

<h2>
<span id="goto-css-declaration" class="fragment"></span><a href="#goto-css-declaration"><i class="fa fa-link"></i></a>Goto-CSS-Declaration</h2>

<blockquote>
<p>htmlを編集中に、ショートカットキー一発でcssの該当idやclass、要素にジャンプできる<br>
<em>via <a href="http://d.hatena.ne.jp/keyword/css" rel="nofollow noopener" target="_blank">じっくり解説！Sublime Text 2 プラグイン 「Goto-CSS-Declaration」 - フロントエンドとかPCとかスマホとか</a></em></p>
</blockquote>

<p><a href="https://github.com/rmaksim/Sublime-Text-2-Goto-CSS-Declaration" rel="nofollow noopener" target="_blank">rmaksim/Sublime-Text-2-Goto-CSS-Declaration</a></p>

<h2>
<span id="view-in-browser" class="fragment"></span><a href="#view-in-browser"><i class="fa fa-link"></i></a>View in Browser</h2>

<p>HTMLをブラウザでプレビュー</p>

<p><a href="https://github.com/adampresley/sublime-view-in-browser" rel="nofollow noopener" target="_blank">adampresley/sublime-view-in-browser</a></p>

<h2>
<span id="browser-reflesh" class="fragment"></span><a href="#browser-reflesh"><i class="fa fa-link"></i></a>Browser Reflesh</h2>

<blockquote>
<p>ファイルを保存すると同時にブラウザのプレビューを更新してくれる<br>
<em>via <a href="http://number333.org/2013/11/07/sublime-text-browser-refresh/" rel="nofollow noopener" target="_blank">SublimeTextで保存した瞬間にブラウザプレビューを更新してくれるパッケージ「Browser Refresh」の使い方 | iPhone・Macの情報発信ブログ "NUMBER333"</a></em></p>
</blockquote>

<p><a href="https://github.com/gcollazo/BrowserRefresh-Sublime" rel="nofollow noopener" target="_blank">gcollazo/BrowserRefresh-Sublime</a></p>

<h2>
<span id="livereload" class="fragment"></span><a href="#livereload"><i class="fa fa-link"></i></a>LiveReload</h2>

<blockquote>
<p>ファイル保存のたびにブラウザを自動リロードしてくれる<br>
<em>via <a href="http://weblog.masakiyoshida.com/tools/sublimetext2-livereload/" rel="nofollow noopener" target="_blank">Sublime Text 2 に LiveReload を導入する【Windows】 | weblog</a></em></p>
</blockquote>

<p><a href="https://github.com/dz0ny/LiveReload-sublimetext2" rel="nofollow noopener" target="_blank">dz0ny/LiveReload-sublimetext2</a></p>

<h2>
<span id="live-style" class="fragment"></span><a href="#live-style"><i class="fa fa-link"></i></a>Live Style</h2>

<p>ブラウザプレビューのリアルタイム更新。</p>

<p><a href="https://github.com/emmetio/livestyle-sublime" rel="nofollow noopener" target="_blank">emmetio/livestyle-sublime</a></p>

<h2>
<span id="sass" class="fragment"></span><a href="#sass"><i class="fa fa-link"></i></a>Sass</h2>

<p>Sassのシンタックスハイライトとコード補完</p>

<p><a href="https://github.com/nathos/sass-textmate-bundle" rel="nofollow noopener" target="_blank">nathos/sass-textmate-bundle</a></p>

<h2>
<span id="scss" class="fragment"></span><a href="#scss"><i class="fa fa-link"></i></a>SCSS</h2>

<p>SCSSのシンタックスハイライトとコード補完</p>

<p><a href="https://github.com/MarioRicalde/SCSS.tmbundle" rel="nofollow noopener" target="_blank">MarioRicalde/SCSS.tmbundle</a></p>

<h2>
<span id="sass-build" class="fragment"></span><a href="#sass-build"><i class="fa fa-link"></i></a>SASS Build</h2>

<blockquote>
<p>SulimeText内でSassをコンパイルすることができます。<br>
<em>via <a href="http://book.scss.jp/about/c7/editor/st.html" rel="nofollow noopener" target="_blank">SublimeText（Windows、Mac）をSassで使いやすい設定にする | Web制作者のためのSassの教科書 - 公式サポートサイト</a></em></p>
</blockquote>

<p><a href="https://github.com/jaumefontal/SASS-Build-SublimeText2" rel="nofollow noopener" target="_blank">jaumefontal/SASS-Build-SublimeText2</a></p>

<h2>
<span id="sass-snippets" class="fragment"></span><a href="#sass-snippets"><i class="fa fa-link"></i></a>SASS Snippets</h2>

<blockquote>
<p>関数などのスニペットが入っています。<br>
<em>via <a href="http://book.scss.jp/about/c7/editor/st.html" rel="nofollow noopener" target="_blank">SublimeText（Windows、Mac）をSassで使いやすい設定にする | Web制作者のためのSassの教科書 - 公式サポートサイト</a></em></p>
</blockquote>

<p><a href="https://github.com/npostulart/SCSS-Snippets" rel="nofollow noopener" target="_blank">npostulart/SCSS-Snippets</a></p>

<h2>
<span id="compass" class="fragment"></span><a href="#compass"><i class="fa fa-link"></i></a>Compass</h2>

<blockquote>
<p>Compassのスニペットと、Compassをコンパイルすることができます。<br>
<em>via <a href="http://book.scss.jp/about/c7/editor/st.html" rel="nofollow noopener" target="_blank">SublimeText（Windows、Mac）をSassで使いやすい設定にする | Web制作者のためのSassの教科書 - 公式サポートサイト</a></em></p>
</blockquote>

<p><a href="https://github.com/WhatWeDo/Sublime-Text-2-Compass-Build-System" rel="nofollow noopener" target="_blank">whatwedo/Sublime-Text-2-Compass-Build-System</a></p>

<h2>
<span id="less" class="fragment"></span><a href="#less"><i class="fa fa-link"></i></a>LESS</h2>

<p>LESS のシンタックスハイライト。</p>

<p><a href="https://github.com/danro/LESS-sublime" rel="nofollow noopener" target="_blank">danro/LESS-sublime</a></p>

<h2>
<span id="less-build" class="fragment"></span><a href="#less-build"><i class="fa fa-link"></i></a>LESS-build</h2>

<p>LESSのコンパイル。</p>

<p><a href="https://github.com/berfarah/LESS-build-sublime" rel="nofollow noopener" target="_blank">berfarah/LESS-build-sublime</a></p>

<h2>
<span id="stylus" class="fragment"></span><a href="#stylus"><i class="fa fa-link"></i></a>Stylus</h2>

<p>Stylusのコンパイルとシンタックスハイライト。</p>

<p><a href="https://github.com/billymoon/Stylus" rel="nofollow noopener" target="_blank">billymoon/Stylus</a></p>

<h2>
<span id="haml" class="fragment"></span><a href="#haml"><i class="fa fa-link"></i></a>Haml</h2>

<p>Hamlのシンタックスハイライト。</p>

<p><a href="https://github.com/phuibonhoa/handcrafted-haml-textmate-bundle" rel="nofollow noopener" target="_blank">phuibonhoa/handcrafted-haml-textmate-bundle</a></p>

<h2>
<span id="jade" class="fragment"></span><a href="#jade"><i class="fa fa-link"></i></a>Jade</h2>

<p>Jadeののシンタックスハイライト。</p>

<p><a href="https://github.com/davidrios/jade-tmbundle" rel="nofollow noopener" target="_blank">github.​com</a></p>

<h2>
<span id="jade-build" class="fragment"></span><a href="#jade-build"><i class="fa fa-link"></i></a>Jade Build</h2>

<p>Jadeのコンパイル。</p>

<p><a href="http://mutian.github.io/Jade-Build/" rel="nofollow noopener" target="_blank">mutian.​github.​io</a></p>

<h2>
<span id="ruby-slim" class="fragment"></span><a href="#ruby-slim"><i class="fa fa-link"></i></a>Ruby Slim</h2>

<p>Slimのシンタックスハイライト。</p>

<p><a href="https://github.com/slim-template/ruby-slim.tmbundle" rel="nofollow noopener" target="_blank">slim-template/ruby-slim.tmbundle</a></p>

<h2>
<span id="handlebars" class="fragment"></span><a href="#handlebars"><i class="fa fa-link"></i></a>Handlebars</h2>

<p>Handlebarのシンタックスハイライト。</p>

<p><a href="https://github.com/daaain/Handlebars" rel="nofollow noopener" target="_blank">daaain/Handlebars</a></p>

<h2>
<span id="twitter-bootstrap-snippets" class="fragment"></span><a href="#twitter-bootstrap-snippets"><i class="fa fa-link"></i></a>Twitter Bootstrap Snippets</h2>

<p>Bootstrapのスニペット。</p>

<p><a href="https://github.com/devtellect/sublime-twitter-bootstrap-snippets" rel="nofollow noopener" target="_blank">devtellect/sublime-twitter-bootstrap-snippets</a></p>

<h2>
<span id="bootstrap-3-snippets" class="fragment"></span><a href="#bootstrap-3-snippets"><i class="fa fa-link"></i></a>Bootstrap 3 Snippets</h2>

<p>Bootstrap3のスニペット。</p>

<p><a href="https://github.com/JasonMortonNZ/bs3-sublime-plugin" rel="nofollow noopener" target="_blank">JasonMortonNZ/bs3-sublime-plugin</a></p>

<h2>
<span id="bootstrap-3-jade-snippets" class="fragment"></span><a href="#bootstrap-3-jade-snippets"><i class="fa fa-link"></i></a>Bootstrap 3 Jade Snippets</h2>

<p>Bootstrap-Jadeのスニペット。</p>

<p><a href="https://github.com/rs459/bootstrap3-jade-sublime-plugin" rel="nofollow noopener" target="_blank">rs459/bootstrap3-jade-sublime-plugin</a></p>

<h2>
<span id="foundation-5-snippets" class="fragment"></span><a href="#foundation-5-snippets"><i class="fa fa-link"></i></a>Foundation 5 Snippets</h2>

<p>Foundation5のスニペット。</p>

<p><a href="https://github.com/zurb/foundation-5-sublime-snippets" rel="nofollow noopener" target="_blank">zurb/foundation-5-sublime-snippets</a></p>

<h2>
<span id="wordpress" class="fragment"></span><a href="#wordpress"><i class="fa fa-link"></i></a>Wordpress</h2>

<p>Wordpressのコード補完。</p>

<p><a href="https://github.com/purplefish32/sublime-text-2-wordpress" rel="nofollow noopener" target="_blank">purplefish32/sublime-text-2-wordpress</a></p>

<h2>
<span id="search-wordpress-codex" class="fragment"></span><a href="#search-wordpress-codex"><i class="fa fa-link"></i></a>Search Wordpress Codex</h2>

<p>WordPress Codexを検索できるようにする。</p>

<p><a href="https://github.com/welovewordpress/SublimeWordPressCodex" rel="nofollow noopener" target="_blank">welovewordpress/SublimeWordPressCodex</a></p>

<h2>
<span id="search-stack-overflow" class="fragment"></span><a href="#search-stack-overflow"><i class="fa fa-link"></i></a>Search Stack Overflow</h2>

<p>Stack Overflowを検索できるようにする。</p>

<p><a href="https://github.com/ericmartel/Sublime-Text-2-Stackoverflow-Plugin" rel="nofollow noopener" target="_blank">ericmartel/Sublime-Text-2-Stackoverflow-Plugin</a></p>

<h2>
<span id="can-i-use" class="fragment"></span><a href="#can-i-use"><i class="fa fa-link"></i></a>Can I Use</h2>

<p>選択した要素の各ブラウザ対応状況を調べる</p>

<p><a href="http://azd325.github.io/sublime-text-caniuse/" rel="nofollow noopener" target="_blank">Sublime-text-caniuse by Azd325</a></p>

<h2>
<span id="emmet" class="fragment"></span><a href="#emmet"><i class="fa fa-link"></i></a>Emmet</h2>

<p>Emmetを使えるようにする。</p>

<p><a href="https://github.com/sergeche/emmet-sublime" rel="nofollow noopener" target="_blank">sergeche/emmet-sublime</a></p>

<h2>
<span id="hayaku" class="fragment"></span><a href="#hayaku"><i class="fa fa-link"></i></a>Hayaku</h2>

<p>Hayakuを使えるようにする。</p>

<p><a href="https://github.com/hayaku/hayaku" rel="nofollow noopener" target="_blank">hayaku/hayaku</a></p>

<h2>
<span id="inc-dec-value" class="fragment"></span><a href="#inc-dec-value"><i class="fa fa-link"></i></a>Inc-Dec-Value</h2>

<blockquote>
<p>テキスト中に含まれる数字と#fffffなどを増減できます。 option + 上下矢印キーで動かせるようになります。忘れがちですが地味に便利です。<br>
<em>via <a href="http://news.ko-zu.com/package/" rel="nofollow noopener" target="_blank">SublimeText2を3ヶ月使ってみて利用を決めたPackageまとめ</a></em></p>
</blockquote>

<p><a href="https://github.com/rmaksim/Sublime-Text-2-Inc-Dec-Value" rel="nofollow noopener" target="_blank">rmaksim/Sublime-Text-2-Inc-Dec-Value</a></p>

<h2>
<span id="autofilename" class="fragment"></span><a href="#autofilename"><i class="fa fa-link"></i></a>AutoFileName</h2>

<blockquote>
<p>htmlやcssを書いているときに、ファイルを指定する事よくあります。 そんな時にめちゃ便利なプラグインです。  例えば、htmlのimgタグを入力中に、別の階層にある画像ファイルを指定する場合、ディレクトリを構造を移動しながら、ファイルを選択して指定することができ、さらに、画像の width heightも自動的にセットしてくれます。<br>
<em>via <a href="http://charlie.hateblo.jp/entry/2013/04/19/112120" rel="nofollow noopener" target="_blank">じっくり解説！Sublime Text 2 プラグイン 「AutoFileName」 - フロントエンドとかPCとかスマホとか</a></em></p>
</blockquote>

<p><a href="https://github.com/BoundInCode/AutoFileName" rel="nofollow noopener" target="_blank">BoundInCode/AutoFileName</a></p>

<h2>
<span id="colorpicker" class="fragment"></span><a href="#colorpicker"><i class="fa fa-link"></i></a>Colorpicker</h2>

<p>カラーピッカー。</p>

<p><a href="https://github.com/weslly/ColorPicker" rel="nofollow noopener" target="_blank">weslly/ColorPicker</a></p>

<h2>
<span id="image2base64" class="fragment"></span><a href="#image2base64"><i class="fa fa-link"></i></a>image2Base64</h2>

<blockquote>
<p>画像ファイルをSublime Textにドロップした時に 自動的にbase64エンコードした文字列に変換してくれるようになります。<br>
<em>via <a href="http://leko.jp/archives/453" rel="nofollow noopener" target="_blank">Sublime Text2の作業効率を加速させるパッケージ12個 | WEB EGG</a></em></p>
</blockquote>

<p><a href="https://github.com/tm-minty/sublime-text-2-image2base64" rel="nofollow noopener" target="_blank">tm-minty/sublime-text-2-image2base64</a></p>

<h2>
<span id="javascript-console" class="fragment"></span><a href="#javascript-console"><i class="fa fa-link"></i></a>JavaScript Console</h2>

<p>Javascriptのスニペット。</p>

<p><a href="https://github.com/caiogondim/js-console-sublime-snippets" rel="nofollow noopener" target="_blank">caiogondim/js-console-sublime-snippets</a></p>

<h2>
<span id="javascript-patterns" class="fragment"></span><a href="#javascript-patterns"><i class="fa fa-link"></i></a>JavaScript Patterns</h2>

<p>JavaScriptパターンのスニペット。</p>

<p><a href="https://github.com/caiogondim/js-patterns-sublime-snippets" rel="nofollow noopener" target="_blank">caiogondim/js-patterns-sublime-snippets</a></p>

<h2>
<span id="jquery" class="fragment"></span><a href="#jquery"><i class="fa fa-link"></i></a>jQuery</h2>

<p>jQueryのスニペット。</p>

<p><a href="https://github.com/SublimeText/jQuery" rel="nofollow noopener" target="_blank">SublimeText/jQuery</a></p>

<h2>
<span id="andyjs2" class="fragment"></span><a href="#andyjs2"><i class="fa fa-link"></i></a>AndyJS2</h2>

<p>JavaScript と jQuery の入力補完。</p>

<p><a href="https://github.com/agibsonsw/AndyJS2" rel="nofollow noopener" target="_blank">agibsonsw/AndyJS2</a></p>

<h2>
<span id="underscorejs-snippets" class="fragment"></span><a href="#underscorejs-snippets"><i class="fa fa-link"></i></a>Underscorejs snippets</h2>

<p>Underscore.jsのスニペット。</p>

<p><a href="https://github.com/AntouanK/sublime-underscorejs-snippets" rel="nofollow noopener" target="_blank">AntouanK/sublime-underscorejs-snippets</a></p>

<h2>
<span id="backbonejs" class="fragment"></span><a href="#backbonejs"><i class="fa fa-link"></i></a>Backbone.js</h2>

<p>Backbone.jsのスニペット。</p>

<p><a href="https://github.com/tomasztunik/Sublime-Text-2-Backbone.js-package" rel="nofollow noopener" target="_blank">tomasztunik/Sublime-Text-2-Backbone.js-package</a></p>

<h2>
<span id="angularjs" class="fragment"></span><a href="#angularjs"><i class="fa fa-link"></i></a>AngularJS</h2>

<p>AngularJSのスニペット。</p>

<p><a href="https://github.com/angular-ui/AngularJS-sublime-package" rel="nofollow noopener" target="_blank">angular-ui/AngularJS-sublime-package</a></p>

<h2>
<span id="jasmine" class="fragment"></span><a href="#jasmine"><i class="fa fa-link"></i></a>Jasmine</h2>

<p>Jasmineを利用できるようにする。</p>

<p><a href="https://github.com/gja/sublime-text-2-jasmine" rel="nofollow noopener" target="_blank">gja/sublime-text-2-jasmine</a></p>

<h2>
<span id="mocha-snippets" class="fragment"></span><a href="#mocha-snippets"><i class="fa fa-link"></i></a>Mocha Snippets</h2>

<p>Mochaのスニペット。</p>

<p><a href="https://github.com/jfromaniello/sublime-mocha-snippets" rel="nofollow noopener" target="_blank">jfromaniello/sublime-mocha-snippets</a></p>

<h2>
<span id="better-coffeescript" class="fragment"></span><a href="#better-coffeescript"><i class="fa fa-link"></i></a>Better CoffeeScript</h2>

<blockquote>
<p>coffee scriptはjsに変換する必要があります。 保存と同時にビルドしてくれるSublime Textプラグインをご紹介。<br>
<em>via <a href="http://harapeko.wktk.so/blog/blog-web/js-blog-web/2013-07-12/1246" rel="nofollow noopener" target="_blank">Better coffeeScriptでキマリ | はらぺこ屋</a></em></p>
</blockquote>

<p><a href="https://github.com/aponxi/sublime-better-coffeescript" rel="nofollow noopener" target="_blank">aponxi/sublime-better-coffeescript</a></p>

<h2>
<span id="better-typescript" class="fragment"></span><a href="#better-typescript"><i class="fa fa-link"></i></a>Better TypeScript</h2>

<p>TypeScriptのシンタックスハイライト。</p>

<p><a href="https://github.com/lavrton/sublime-better-typescript" rel="nofollow noopener" target="_blank">lavrton/sublime-better-typescript</a></p>

<h2>
<span id="dart" class="fragment"></span><a href="#dart"><i class="fa fa-link"></i></a>Dart</h2>

<p>Dartのシンタックスハイライト。</p>

<p><a href="https://github.com/dart-lang/dart-sublime-bundle" rel="nofollow noopener" target="_blank">dart-lang/dart-sublime-bundle</a></p>

<h2>
<span id="jsminifier" class="fragment"></span><a href="#jsminifier"><i class="fa fa-link"></i></a>JsMinifier</h2>

<p>jsファイルのミニファイ。<br>
※とてもまぎらわしい似たような名前のがあります。</p>

<p><a href="https://github.com/cgutierrez/JsMinifier" rel="nofollow noopener" target="_blank">cgutierrez/JsMinifier</a></p>

<h2>
<span id="python-auto-complete" class="fragment"></span><a href="#python-auto-complete"><i class="fa fa-link"></i></a>Python Auto-Complete</h2>

<p>Pythonのコード補完。</p>

<p><a href="https://github.com/eliquious/Python-Auto-Complete" rel="nofollow noopener" target="_blank">eliquious/Python-Auto-Complete</a></p>

<h2>
<span id="python-flake8-lint" class="fragment"></span><a href="#python-flake8-lint"><i class="fa fa-link"></i></a>Python Flake8 Lint</h2>

<p>Python用のLintツール？</p>

<p><a href="https://github.com/dreadatour/Flake8Lint" rel="nofollow noopener" target="_blank">dreadatour/Flake8Lint</a></p>

<h2>
<span id="docblockr" class="fragment"></span><a href="#docblockr"><i class="fa fa-link"></i></a>DocBlockr</h2>

<p>コメントブロックの自動補完。<br>
<a href="http://koizuss.hatenablog.com/entry/2013/01/14/112350" rel="nofollow noopener" target="_blank">これ</a>とか<a href="http://qiita.com/cocottejs/items/98ba0fd5093871d9d121" id="reference-1c2d84094614e7e6fded">これ</a>への対策書いてあるかな。。</p>

<p><a href="https://github.com/spadgos/sublime-jsdocs" rel="nofollow noopener" target="_blank">spadgos/sublime-jsdocs</a></p>

<h2>
<span id="markdown-preview" class="fragment"></span><a href="#markdown-preview"><i class="fa fa-link"></i></a>Markdown Preview</h2>

<p>Markdownをブラウザでプレビュー。</p>

<p><a href="https://github.com/revolunet/sublimetext-markdown-preview" rel="nofollow noopener" target="_blank">revolunet/sublimetext-markdown-preview</a></p>

<h2>
<span id="dotfiles-syntax-highlighting" class="fragment"></span><a href="#dotfiles-syntax-highlighting"><i class="fa fa-link"></i></a>Dotfiles Syntax Highlighting</h2>

<p>.gitignoreや.bash_profile等のシンタックスハイライト。</p>

<p><a href="https://github.com/mattbanks/dotfiles-syntax-highlighting-st2" rel="nofollow noopener" target="_blank">mattbanks/dotfiles-syntax-highlighting-st2</a></p>

<h2>
<span id="apacheconftmlanguage" class="fragment"></span><a href="#apacheconftmlanguage"><i class="fa fa-link"></i></a>ApacheConf.tmLanguage</h2>

<blockquote>
<p>Apache Confファイルの文法ハイライト。<br>
<em>via <a href="http://wikiwiki.jp/sublimetext2/?%A4%AA%A4%B9%A4%B9%A4%E1%A5%D7%A5%E9%A5%B0%A5%A4%A5%F3" rel="nofollow noopener" target="_blank">おすすめプラグイン - Sublime Text2 Wiki*</a></em></p>
</blockquote>

<p><a href="https://github.com/colinta/ApacheConf.tmLanguage" rel="nofollow noopener" target="_blank">colinta/ApacheConf.tmLanguage</a></p>

<h2>
<span id="sublime-github" class="fragment"></span><a href="#sublime-github"><i class="fa fa-link"></i></a>sublime-github</h2>

<p>Githubを利用できるようにする。</p>

<p><a href="https://github.com/bgreenlee/sublime-github" rel="nofollow noopener" target="_blank">bgreenlee/sublime-github</a></p>

<h2>
<span id="sublimegit" class="fragment"></span><a href="#sublimegit"><i class="fa fa-link"></i></a>sublimeGit</h2>

<p>Gitを利用できるようにする。</p>

<p><a href="https://sublimegit.net/" rel="nofollow noopener" target="_blank">SublimeGit</a></p>

<h2>
<span id="sublimeserver" class="fragment"></span><a href="#sublimeserver"><i class="fa fa-link"></i></a>SublimeServer</h2>

<blockquote>
<p>Sublime Serverは、Sublime Text 2で動作する簡易Webサーバープラグインです。<br>
<em>via <a href="http://blog.mach3.jp/2012/09/21/check-html-with-simple-server.html" rel="nofollow noopener" target="_blank">すぐに使える簡易サーバーでHTMLをチェックする3つの方法 – Mach3.laBlog</a></em></p>
</blockquote>

<p><a href="https://github.com/learning/SublimeServer" rel="nofollow noopener" target="_blank">learning/SublimeServer</a></p>

<h2>
<span id="sublime-sftp" class="fragment"></span><a href="#sublime-sftp"><i class="fa fa-link"></i></a>Sublime SFTP</h2>

<p>SFTPを利用できるようにする。</p>

<p><a href="http://wbond.net/sublime_packages/sftp" rel="nofollow noopener" target="_blank">Sublime SFTP – an FTP, FTPS &amp; SFTP Package for Sublime Text by wbond</a></p>

<h1>
<span id="感想" class="fragment"></span><a href="#%E6%84%9F%E6%83%B3"><i class="fa fa-link"></i></a>感想</h1>

<p>半分くらいは知らなかった。<br>
使い方わからない／日本語のドキュメントが一切無いのも多いし、<br>
結局本書を買わざるをえないという罠でした。</p>

<h3>
<span id="あとプラグイン探しはパッケージブラウザが便利です" class="fragment"></span><a href="#%E3%81%82%E3%81%A8%E3%83%97%E3%83%A9%E3%82%B0%E3%82%A4%E3%83%B3%E6%8E%A2%E3%81%97%E3%81%AF%E3%83%91%E3%83%83%E3%82%B1%E3%83%BC%E3%82%B8%E3%83%96%E3%83%A9%E3%82%A6%E3%82%B6%E3%81%8C%E4%BE%BF%E5%88%A9%E3%81%A7%E3%81%99"><i class="fa fa-link"></i></a>あとプラグイン探しはパッケージブラウザが便利です</h3>

<p><a href="https://sublime.wbond.net/" rel="nofollow noopener" target="_blank">Package Control - the Sublime Text package manager</a></p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1" style="height:150px;">
<tr>
	<td rowspan="3">67位</td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="thumb-up-120px.png" /></i>814</kbd>
		<a target="_blank" href="https://qiita.com/ryurock/items/1432578d364985f6cb06">みんなhomebrew-caskって知ってるか？</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-09-29<br />10:57:00</center>
	</td>
	<td style="width:200px;">
		<!--投稿者-->
		<center>
			@<a href="user/5564.html">ryurock</a>(104件の記事)<br />(フリーランス 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/5564/profile-images/1473682090">
		</center>
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[OSX]</b> <b>[homebrew]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<!--
		<div style="width:350px;height:150px;overflow:scroll;">%s</div>
		-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>複数人数で開発を行っている場合、新しい人が参加した時にこのアプリだけは入れておいてね！！ってことはありますよね？<br>
大体の場合はwikiとかにさらっと</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>#事前にインストールするもの
hoge
</pre></div></div>

<p>みたいなこと書かれてると思いますが<br>
これがいっぱいあると</p>

<h1>
<span id="ダルいしメンテナンスかったるい" class="fragment"></span><a href="#%E3%83%80%E3%83%AB%E3%81%84%E3%81%97%E3%83%A1%E3%83%B3%E3%83%86%E3%83%8A%E3%83%B3%E3%82%B9%E3%81%8B%E3%81%A3%E3%81%9F%E3%82%8B%E3%81%84"><i class="fa fa-link"></i></a>ダルいしメンテナンスかったるい。。。</h1>

<p>のでosxで一般的になってる<a href="http://brew.sh/" rel="nofollow noopener" target="_blank">homebrew</a>の拡張<a href="https://github.com/phinze/homebrew-cask" rel="nofollow noopener" target="_blank">homebrew-cask</a>を使用して<br>
コマンド一発で開発に必要なアプリインストールできるよ！！ってできることがわかったのでメモ</p>

<p><a href="http://qiita.com/futoase/items/9a52ddd8bb19863372d0" id="reference-3449b4621f1f5f1761a8">homebrewのパッケージをGemfileみたく管理したい -&gt; brewdlerがあった…</a>で存在を知ったので感謝感謝</p>

<p>※brewdlerは今<a href="https://github.com/Homebrew/homebrew-bundle" rel="nofollow noopener" target="_blank">Homebrew/homebrew-bundle</a>になっています</p>

<h2>
<span id="環境" class="fragment"></span><a href="#%E7%92%B0%E5%A2%83"><i class="fa fa-link"></i></a>環境</h2>

<ul>
<li>macosx10.8(ホストOS)</li>
</ul>

<h2>
<span id="参考にしたサイト" class="fragment"></span><a href="#%E5%8F%82%E8%80%83%E3%81%AB%E3%81%97%E3%81%9F%E3%82%B5%E3%82%A4%E3%83%88"><i class="fa fa-link"></i></a>参考にしたサイト</h2>

<ul>
<li><a href="http://qiita.com/futoase/items/9a52ddd8bb19863372d0">homebrewのパッケージをGemfileみたく管理したい -&gt; brewdlerがあった…</a></li>
<li><a href="https://github.com/phinze/homebrew-cask" rel="nofollow noopener" target="_blank">homebrew-cask</a></li>
</ul>

<h2>
<span id="事前準備に必要なもの" class="fragment"></span><a href="#%E4%BA%8B%E5%89%8D%E6%BA%96%E5%82%99%E3%81%AB%E5%BF%85%E8%A6%81%E3%81%AA%E3%82%82%E3%81%AE"><i class="fa fa-link"></i></a>事前準備に必要なもの</h2>

<ul>
<li>
<a href="http://brew.sh/" rel="nofollow noopener" target="_blank">homebrew</a> ※入れていない方は何も考えずに<code>/usr/bin/ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"</code>と打とう</li>
</ul>

<h2>
<span id="インストール手順" class="fragment"></span><a href="#%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB%E6%89%8B%E9%A0%86"><i class="fa fa-link"></i></a>インストール手順</h2>

<p>本家のままですぐ使えます(ターミナル開いて打ってね)</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>brew install caskroom/cask/brew-cask
</pre></div></div>

<h3>
<span id="使いたいアプリを探す" class="fragment"></span><a href="#%E4%BD%BF%E3%81%84%E3%81%9F%E3%81%84%E3%82%A2%E3%83%97%E3%83%AA%E3%82%92%E6%8E%A2%E3%81%99"><i class="fa fa-link"></i></a>使いたいアプリを探す</h3>

<p>下記のコマンドで探せます</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>brew cask search

caffeine   wireshark   google-chrome    mysql-workbench    virtualbox
….
….
</pre></div></div>

<h3>
<span id="homebrew-caskでインストールしたアプリ一覧を見る" class="fragment"></span><a href="#homebrew-cask%E3%81%A7%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB%E3%81%97%E3%81%9F%E3%82%A2%E3%83%97%E3%83%AA%E4%B8%80%E8%A6%A7%E3%82%92%E8%A6%8B%E3%82%8B"><i class="fa fa-link"></i></a>homebrew-caskでインストールしたアプリ一覧を見る</h3>

<p>パッケージ名を引数で指定するとパッケージの詳細な情報が出ます</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>brew list
ansible     chrome-cli  libyaml     openssl     wget
autoconf    curl        nkf     pkg-config
brew-cask   git     nmap        pyenv
</pre></div></div>

<h3>
<span id="caskでインストールする" class="fragment"></span><a href="#cask%E3%81%A7%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>Caskでインストールする</h3>

<p>コマンド一発です</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>brew cask install google-chrome
</pre></div></div>

<p>簡単ですね！！！</p>

<h3>
<span id="brew-caskのインストールディレクトリについて" class="fragment"></span><a href="#brew-cask%E3%81%AE%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB%E3%83%87%E3%82%A3%E3%83%AC%E3%82%AF%E3%83%88%E3%83%AA%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6"><i class="fa fa-link"></i></a>brew-caskのインストールディレクトリについて</h3>

<p>brew-caskでインストールしたアプリはデフォルトだと</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>~/Applications
</pre></div></div>

<p>にはいります。<br>
これだとLaunchpadでインストールしたアプリがでてきません。<br>
そんなときは <code>.zshrc</code> もしくは <code>.bashrc</code> に下記を記載するとインストール先ディレクトリを変更できます。</p>

<div class="code-frame" data-lang="zshrc"><div class="highlight"><pre><span></span>export HOMEBREW_CASK_OPTS="--appdir=/Applications"
</pre></div></div>

<h3>
<span id="brew-caskのアプリの管理方法について" class="fragment"></span><a href="#brew-cask%E3%81%AE%E3%82%A2%E3%83%97%E3%83%AA%E3%81%AE%E7%AE%A1%E7%90%86%E6%96%B9%E6%B3%95%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6"><i class="fa fa-link"></i></a>brew-caskのアプリの管理方法について</h3>

<p><a href="https://github.com/Homebrew/homebrew-bundle" rel="nofollow noopener" target="_blank">homebrew/homebrew-bundle</a>を使ってGemfileみたいに管理することができます。</p>

<p>以下homebrew-bundleのインストール方法<br>
(公式ほぼ引用です)</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span># brewにbundleコマンドが使えるようにする
brew tap Homebrew/bundle
# homebrewのGemfileみたいなファイルを作る
touch Brewfile
</pre></div></div>

<p>以下Brewfileサンプル</p>

<div class="code-frame" data-lang="Brewfile"><div class="highlight"><pre><span></span>cask_args appdir: '/Applications'
tap 'caskroom/cask'
tap 'telemachus/brew', 'https://telemachus@bitbucket.org/telemachus/brew.git'
brew 'emacs', args: ['with-cocoa', 'with-gnutls']
brew 'redis', restart_service: true
brew 'mongodb'
brew 'sphinx'
brew 'imagemagick'
brew 'mysql'
cask 'google-chrome'
cask 'java' unless system '/usr/libexec/java_home --failfast'
cask 'firefox', args: { appdir: '/Applications' }
</pre></div></div>

<h3>
<span id="補足使いたいアプリがない場合" class="fragment"></span><a href="#%E8%A3%9C%E8%B6%B3%E4%BD%BF%E3%81%84%E3%81%9F%E3%81%84%E3%82%A2%E3%83%97%E3%83%AA%E3%81%8C%E3%81%AA%E3%81%84%E5%A0%B4%E5%90%88"><i class="fa fa-link"></i></a>【補足】使いたいアプリがない場合</h3>

<p>公式の<a href="https://github.com/caskroom/homebrew-cask/blob/master/CONTRIBUTING.md#adding-a-cask" rel="nofollow noopener" target="_blank">ココ</a>にcaskの追加方法が記載されています。</p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1" style="height:150px;">
<tr>
	<td rowspan="3">68位</td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="thumb-up-120px.png" /></i>805</kbd>
		<a target="_blank" href="https://qiita.com/uasi/items/c4288dd835a65eb9d709">Zsh 入門者のための超速設定ガイド</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2014-02-02<br />14:00:14</center>
	</td>
	<td style="width:200px;">
		<!--投稿者-->
		<center>
			@<a href="user/735.html">uasi</a>(117件の記事)<br />(Increments 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/735/profile-images/1473681692">
		</center>
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Zsh]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<!--
		<div style="width:350px;height:150px;overflow:scroll;">%s</div>
		-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;">
<h1>
<span id="はじめに" class="fragment"></span><a href="#%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB"><i class="fa fa-link"></i></a>はじめに</h1>

<p>このガイドでは、はじめて Zsh を使う人や Zsh の便利な使い方を知らない人に向けて、いくつかの便利な設定と操作方法を紹介します。また、 Zsh についての疑問を素早く解決できるよう、マニュアルの調べ方や他のドキュメントへのリンクも盛り込んであります。</p>

<p>このガイドでカバーしきれていない設定や分かりやすいドキュメントをご存知でしたら、ぜひ編集リクエストやコメントでお知らせください。</p>

<h1>
<span id="設定ファイル" class="fragment"></span><a href="#%E8%A8%AD%E5%AE%9A%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB"><i class="fa fa-link"></i></a>設定ファイル</h1>

<p>ここでは主に普段のキー入力数を大幅に減らせるような設定を紹介します。</p>

<h2>
<span id="zshrc" class="fragment"></span><a href="#zshrc"><i class="fa fa-link"></i></a>.zshrc</h2>

<p><code>~/.zshrc</code> は Zsh のインタラクティブシェル（ユーザーがコマンドを入力する画面）が起動した際に読み込まれる設定ファイルです。 Zsh スクリプトを実行したり、 <code>zsh -c 'command...'</code> でコマンドを実行したりしたときには読み込まれません。このファイルには主に Zsh の操作に関する設定を記述します。</p>

<div class="code-frame" data-lang="bash">
<div class="code-lang"><span class="bold">.zshrc</span></div>
<div class="highlight"><pre><span></span><span class="c1"># Emacs ライクな操作を有効にする（文字入力中に Ctrl-F,B でカーソル移動など）</span>
<span class="c1"># Vi ライクな操作が好みであれば `bindkey -v` とする</span>
bindkey -e

<span class="c1"># 自動補完を有効にする</span>
<span class="c1"># コマンドの引数やパス名を途中まで入力して &lt;Tab&gt; を押すといい感じに補完してくれる</span>
<span class="c1"># 例： `cd path/to/&lt;Tab&gt;`, `ls -&lt;Tab&gt;`</span>
autoload -U compinit<span class="p">;</span> compinit

<span class="c1"># 入力したコマンドが存在せず、かつディレクトリ名と一致するなら、ディレクトリに cd する</span>
<span class="c1"># 例： /usr/bin と入力すると /usr/bin ディレクトリに移動</span>
setopt auto_cd

<span class="c1"># ↑を設定すると、 .. とだけ入力したら1つ上のディレクトリに移動できるので……</span>
<span class="c1"># 2つ上、3つ上にも移動できるようにする</span>
<span class="nb">alias</span> ...<span class="o">=</span><span class="s1">'cd ../..'</span>
<span class="nb">alias</span> ....<span class="o">=</span><span class="s1">'cd ../../..'</span>

<span class="c1"># "~hoge" が特定のパス名に展開されるようにする（ブックマークのようなもの）</span>
<span class="c1"># 例： cd ~hoge と入力すると /long/path/to/hogehoge ディレクトリに移動</span>
<span class="nb">hash</span> -d <span class="nv">hoge</span><span class="o">=</span>/long/path/to/hogehoge

<span class="c1"># cd した先のディレクトリをディレクトリスタックに追加する</span>
<span class="c1"># ディレクトリスタックとは今までに行ったディレクトリの履歴のこと</span>
<span class="c1"># `cd +&lt;Tab&gt;` でディレクトリの履歴が表示され、そこに移動できる</span>
setopt auto_pushd

<span class="c1"># pushd したとき、ディレクトリがすでにスタックに含まれていればスタックに追加しない</span>
setopt pushd_ignore_dups

<span class="c1"># 拡張 glob を有効にする</span>
<span class="c1"># glob とはパス名にマッチするワイルドカードパターンのこと</span>
<span class="c1"># （たとえば `mv hoge.* ~/dir` における "*"）</span>
<span class="c1"># 拡張 glob を有効にすると # ~ ^ もパターンとして扱われる</span>
<span class="c1"># どういう意味を持つかは `man zshexpn` の FILENAME GENERATION を参照</span>
setopt extended_glob

<span class="c1"># 入力したコマンドがすでにコマンド履歴に含まれる場合、履歴から古いほうのコマンドを削除する</span>
<span class="c1"># コマンド履歴とは今まで入力したコマンドの一覧のことで、上下キーでたどれる</span>
setopt hist_ignore_all_dups

<span class="c1"># コマンドがスペースで始まる場合、コマンド履歴に追加しない</span>
<span class="c1"># 例： &lt;Space&gt;echo hello と入力</span>
setopt hist_ignore_space

<span class="c1"># &lt;Tab&gt; でパス名の補完候補を表示したあと、</span>
<span class="c1"># 続けて &lt;Tab&gt; を押すと候補からパス名を選択できるようになる</span>
<span class="c1"># 候補を選ぶには &lt;Tab&gt; か Ctrl-N,B,F,P</span>
zstyle <span class="s1">':completion:*:default'</span> menu <span class="k">select</span><span class="o">=</span><span class="m">1</span>

<span class="c1"># 単語の一部として扱われる文字のセットを指定する</span>
<span class="c1"># ここではデフォルトのセットから / を抜いたものとする</span>
<span class="c1"># こうすると、 Ctrl-W でカーソル前の1単語を削除したとき、 / までで削除が止まる</span>
<span class="nv">WORDCHARS</span><span class="o">=</span><span class="s1">'*?_-.[]~=&amp;;!#$%^(){}&lt;&gt;'</span>
</pre></div>
</div>

<p>→<a href="http://qiita.com/uasi/items/c4288dd835a65eb9d709#1-5">その他のオプションの調べ方</a></p>

<h2>
<span id="zshenv" class="fragment"></span><a href="#zshenv"><i class="fa fa-link"></i></a>.zshenv</h2>

<p><code>~/.zshenv</code> は Zsh が起動した際に必ず読み込まれる設定ファイルです。ここには主に環境変数などの、操作に関係のない設定を記述します。</p>

<div class="code-frame" data-lang="bash">
<div class="code-lang"><span class="bold">.zshenv</span></div>
<div class="highlight"><pre><span></span><span class="c1"># PATH の設定（お好みで）</span>
<span class="nb">export</span> <span class="nv">PATH</span><span class="o">=</span><span class="s2">"/usr/local/bin:</span><span class="nv">$PATH</span><span class="s2">"</span>

<span class="c1"># PATH の内容と同期している配列変数 path も使える</span>
<span class="nv">path</span><span class="o">=(</span>
    ~/bin
    <span class="nv">$path</span>
<span class="o">)</span>

<span class="c1"># もし .zshenv を複数のマシンで共有していて、</span>
<span class="c1"># あるマシンには存在するが別のマシンには存在しないパスを PATH に追加したいなら、</span>
<span class="c1"># パスの後ろに (N-/) をつけるとよい</span>
<span class="c1"># こうすると、パスの場所にディレクトリが存在しない場合、パスが空文字列に置換される</span>
<span class="c1"># 詳細は `man zshexpn` の Glob Qualifiers を参照</span>
<span class="nv">path</span><span class="o">=(</span>
    /machine1/only/bin<span class="o">(</span>N-/<span class="o">)</span>
    <span class="nv">$path</span>
<span class="o">)</span>
</pre></div>
</div>

<h1>
<span id="よく使うキー操作emacs-キーバインドの場合" class="fragment"></span><a href="#%E3%82%88%E3%81%8F%E4%BD%BF%E3%81%86%E3%82%AD%E3%83%BC%E6%93%8D%E4%BD%9Cemacs-%E3%82%AD%E3%83%BC%E3%83%90%E3%82%A4%E3%83%B3%E3%83%89%E3%81%AE%E5%A0%B4%E5%90%88"><i class="fa fa-link"></i></a>よく使うキー操作（Emacs キーバインドの場合）</h1>

<table>
<thead>
<tr>
<th>キー</th>
<th>意味</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>カーソル操作</strong></td>
<td></td>
</tr>
<tr>
<td>Ctrl-F</td>
<td>カーソルを1文字進める</td>
</tr>
<tr>
<td>Ctrl-B</td>
<td>カーソルを1文字戻す</td>
</tr>
<tr>
<td>Ctrl-A</td>
<td>カーソルを行頭に移動</td>
</tr>
<tr>
<td>Ctrl-E</td>
<td>カーソルを行末に移動</td>
</tr>
<tr>
<td><strong>文字削除</strong></td>
<td></td>
</tr>
<tr>
<td>Ctrl-W</td>
<td>1単語削除</td>
</tr>
<tr>
<td>Ctrl-K</td>
<td>カーソルから行末まで削除</td>
</tr>
<tr>
<td>Ctrl-Y</td>
<td>直前に削除した文字列を貼り付け</td>
</tr>
<tr>
<td><strong>コマンド履歴</strong></td>
<td></td>
</tr>
<tr>
<td>Ctrl-P</td>
<td>履歴を1つ戻る</td>
</tr>
<tr>
<td>Ctrl-N</td>
<td>履歴を1つ進める</td>
</tr>
<tr>
<td>Ctrl-R</td>
<td>履歴を新しい順に検索（検索中に Ctrl-R/Ctrl-S を押すと1つ古い/新しい候補を表示）</td>
</tr>
<tr>
<td>Ctrl-G（履歴表示中）</td>
<td>履歴表示をキャンセル</td>
</tr>
<tr>
<td><strong>その他</strong></td>
<td></td>
</tr>
<tr>
<td>Esc を押して Q</td>
<td>現在入力中のコマンドをスタックに退避してプロンプトを空にする（何か別のコマンドを実行すると、退避したコマンドがスタックから取り出される）。コマンド入力中に別のコマンドを実行したくなったとき便利</td>
</tr>
</tbody>
</table>

<h2>
<span id="その他のキーバインドの調べ方" class="fragment"></span><a href="#%E3%81%9D%E3%81%AE%E4%BB%96%E3%81%AE%E3%82%AD%E3%83%BC%E3%83%90%E3%82%A4%E3%83%B3%E3%83%89%E3%81%AE%E8%AA%BF%E3%81%B9%E6%96%B9"><i class="fa fa-link"></i></a>その他のキーバインドの調べ方</h2>

<p>キーに割り当てられているアクションの一覧は <code>bindkey -L</code> で表示できます：</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>% bindkey -L
bindkey "^@" set-mark-command
bindkey "^A" beginning-of-line
bindkey "^B" backward-char
...
</pre></div></div>

<p>"^@" は Ctrl-@ を表し、続く set-mark-command はそのキーを押すと実行されるアクションの名前です。 Zsh ではアクションを定義する実体（組み込み関数または任意のユーザー定義の関数）のことをウィジェットと呼びます。ウィジェットの説明を読むには <code>man zshzle</code> の中をウィジェットの名前で検索します。</p>

<h1>
<span id="便利なコマンドや記法" class="fragment"></span><a href="#%E4%BE%BF%E5%88%A9%E3%81%AA%E3%82%B3%E3%83%9E%E3%83%B3%E3%83%89%E3%82%84%E8%A8%98%E6%B3%95"><i class="fa fa-link"></i></a>便利なコマンドや記法</h1>

<ul>
<li>
<a href="http://qiita.com/usamik26/items/fcb720ba646e5b0b4684" id="reference-cbb597e2fc76bc6e3d0e">Zsh - zmvコマンドで複数ファイルの一括リネーム - Qiita [キータ]</a>：<code>zmv *.hoge *.fuga</code> で拡張子を一括で付け替えたりできる</li>
<li>
<a href="http://qiita.com/mollifier/items/1c4a4930a89aa75e5ced" id="reference-4b47c9227ba17b99a750">zsh で find を使わずに簡単にファイルを絞り込む - Qiita [キータ]</a>：<code>echo *(/)</code> でディレクトリにだけマッチするなど</li>
</ul>

<p>Zsh Advent Calendar にはたくさんの tips が集められています。</p>

<ul>
<li><a href="http://qiita.com/advent-calendar/2013/zsh">zsh Advent Calendar 2013 - Qiita [キータ]</a></li>
<li><a href="http://qiita.com/advent-calendar/2012/zsh">zsh Advent Calendar 2012 - Qiita [キータ]</a></li>
</ul>

<h1>
<span id="マニュアルの調べ方" class="fragment"></span><a href="#%E3%83%9E%E3%83%8B%E3%83%A5%E3%82%A2%E3%83%AB%E3%81%AE%E8%AA%BF%E3%81%B9%E6%96%B9"><i class="fa fa-link"></i></a>マニュアルの調べ方</h1>

<table>
<thead>
<tr>
<th>マニュアル</th>
<th>内容</th>
</tr>
</thead>
<tbody>
<tr>
<td>man zsh</td>
<td>zsh のマニュアルの一覧と zsh の概要</td>
</tr>
<tr>
<td>man zshmisc</td>
<td>スクリプトの構文、リダイレクトやパイプの書き方、特殊関数の一覧、などなど</td>
</tr>
<tr>
<td>man zshexpn</td>
<td>glob や変数展開の記法</td>
</tr>
<tr>
<td>man zshparam</td>
<td>特殊変数の一覧や変数の添字展開の記法</td>
</tr>
<tr>
<td>man zshoptions</td>
<td>setopt でセットできるオプションの一覧</td>
</tr>
<tr>
<td>man zshbuiltins</td>
<td>ビルトインコマンドの一覧</td>
</tr>
</tbody>
</table>

<p>上級者向けのマニュアルは省略してあります。すべてのマニュアルを見るには <code>man zsh</code> を参照してください。<a href="http://zsh.sourceforge.net/Doc/Release/zsh_toc.html" rel="nofollow noopener" target="_blank">オンラインでマニュアルを読むこともできます</a>。</p>

<p>検索しづらい記号については以下のページが参考になります。</p>

<ul>
<li><a href="http://qiita.com/mollifier/items/26a9ddcb7470f539e575" id="reference-81bd0b6307f14dad95a4">zsh の分かりにくい記号、用語のまとめ - Qiita [キータ]</a></li>
<li><a href="http://qiita.com/mollifier/items/14bbea7503910300b3ba" id="reference-3c643b3813875f975e86">zsh の分からない用語を man から素早く探す - Qiita [キータ]</a></li>
</ul>
</div>
	</td>
</tr>
</table>
<br />
<table border="1" style="height:150px;">
<tr>
	<td rowspan="3">69位</td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="thumb-up-120px.png" /></i>790</kbd>
		<a target="_blank" href="https://qiita.com/fukajun/items/41288806e4733cb9c342">変更を一時的に退避！キメろgit stash</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2012-06-19<br />23:58:50</center>
	</td>
	<td style="width:200px;">
		<!--投稿者-->
		<center>
			@<a href="user/6454.html">fukajun</a>(12件の記事)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/6454/profile-images/1473682890">
		</center>
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Git]</b> <b>[AdventCalendar]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<!--
		<div style="width:350px;height:150px;overflow:scroll;">%s</div>
		-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>gitは、とにかくトピックブランチを作成して作業する。だいたい機能追加とかバグ修正とかの単位でブランチを作って作業します。（ちゃんとやってますよね？）<br>
なので、作業の途中で別の修正を優先してお願いっ！なんて言われたときは、別のブランチに切り替えて作業をする必要がでてくる。そんな時に変更を一時的に退避しておくことのできる機能、それがstashである。<br>
では、早速使い方<br>
まだcommitしていない状態の変更ファイル（addしてる or add していない)が存在する状況で、次のコマンドを実行すると変更ファイルを退避することができる。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span> $ git stash save
</pre></div></div>

<p>※saveは、省略することもできる。</p>

<p>これでファイルの退避完了！git statusとか見てみると変更状態であったファイルがなくなっている。この状態なら安心してブランチを切り替えることもできる。めでたしめでたし。<br>
と、退避だけならこれで終わりだけど、次につかうときに変更ファイルを取り出したい。</p>

<ul>
<li>いまどんな変更を退避しているかを確認</li>
</ul>

<p>2つの変更を保存している状態（2回stashを行った状態）</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span> $ git stash list
 stash@{0}: WIP on sub: a0d2f1b add fourth line
 stash@{1}: WIP on sub: 1a61919 add second line
</pre></div></div>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>&lt;stash名&gt;: WIP on &lt;stashを行ったブランチ名&gt;: &lt;ハッシュ&gt; &lt;コミットコメント&gt;
</pre></div></div>

<p>※ハッシュ、コミットコメントはstashを行った時のHEADのもの</p>

<p>次のようにすると、さらに変更内容もみれるので便利！（git logのオプションが使える）</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span> $ git stash list -p
</pre></div></div>

<ul>
<li>さらに各変更について詳しく見たい場合、変更内容に含まれるファイルの一覧が見れる。</li>
</ul>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span> $ git stash show &lt;stash名&gt;
</pre></div></div>

<ul>
<li>復活させたいstash名がわかったら次のコマンドで取り出すことができる。</li>
</ul>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span> $ git stash apply stash@{0}
</pre></div></div>

<ul>
<li>stash applyで変更を復活した場合は、stashリストのなかに復活済みの変更が残されているこれを削除するには、次のコマンドを使用する。</li>
</ul>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span> $ git stash drop &lt;消したいstash名&gt;
</pre></div></div>

<ul>
<li>変更の復活と、削除を同時に行う。</li>
</ul>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span> $ git stash pop stash@{0}
</pre></div></div>

<p>stashが溜まってくると、なんの変更だったか、どれが必要な変更だったかわからなくなるのでこまめに消<br>
したり管理するのが大切ですよー</p>

<h2>
<span id="応用" class="fragment"></span><a href="#%E5%BF%9C%E7%94%A8"><i class="fa fa-link"></i></a>応用</h2>

<p>git apply で、変更を復活して適用したんだけど、やっぱやめとこうってときにこんなこんなやりかたで取り消せます。前半はgit stash show -p でパッチ形式で出力、それをgit apply -Rでパッチを逆に適用しています。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span> $ git stash show &lt;適用したstash名&gt; -p | git apply -R
</pre></div></div>

<h2>
<span id="終わりに" class="fragment"></span><a href="#%E7%B5%82%E3%82%8F%E3%82%8A%E3%81%AB"><i class="fa fa-link"></i></a>終わりに</h2>

<p>とっても基礎的なこと書いたけど、とりあえずgitを使えるようになるには、読んでわかった気になる前に手を動かして、コマンドが馴染んでくるまで何回も素振りをするのが近道だと思ってます。</p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1" style="height:150px;">
<tr>
	<td rowspan="3">70位</td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="thumb-up-120px.png" /></i>787</kbd>
		<a target="_blank" href="https://qiita.com/somewhatgood@github/items/b74107480ee3821784e6">nil? empty? blank? present? の使い分け</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-01-24<br />16:43:15</center>
	</td>
	<td style="width:200px;">
		<!--投稿者-->
		<center>
			@<a href="user/10859.html">somewhatgood@github</a>(6件の記事)<br><img width="80" height="80" src="https://secure.gravatar.com/avatar/69db5c8a8161b0abaeb8767fc6c983d8?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png">
		</center>
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Ruby]</b> <b>[Rails]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<!--
		<div style="width:350px;height:150px;overflow:scroll;">%s</div>
		-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p><a href="http://railsdoc.com/active_support" class="autolink" rel="nofollow noopener" target="_blank">http://railsdoc.com/active_support</a></p>

<p>まず、nil?とempty?はrubyのメソッドで、blank?とpresent?はrailsで拡張されたメソッド（つまりrubyでは使えない）ってことを覚えておく。</p>

<p>-</p>

<h1>
<span id="nilは存在しないという意味" class="fragment"></span><a href="#nil%E3%81%AF%E5%AD%98%E5%9C%A8%E3%81%97%E3%81%AA%E3%81%84%E3%81%A8%E3%81%84%E3%81%86%E6%84%8F%E5%91%B3"><i class="fa fa-link"></i></a>nilは存在しないという意味。</h1>

<p>対して　""は「何も無い」が存在している。空白の存在。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>book.nil?
</pre></div></div>

<p>もしbook自体が存在しないなら、上記はtrueを返す。</p>

<h1>
<span id="emptyは入れ物は存在するのが前提" class="fragment"></span><a href="#empty%E3%81%AF%E5%85%A5%E3%82%8C%E7%89%A9%E3%81%AF%E5%AD%98%E5%9C%A8%E3%81%99%E3%82%8B%E3%81%AE%E3%81%8C%E5%89%8D%E6%8F%90"><i class="fa fa-link"></i></a>empty?は「入れ物」は存在するのが前提。</h1>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>book.empty?
description.empty?
</pre></div></div>

<p>は、bookやdescriptionそのものは存在していることが前提で、その配列の中身が空か、文字列の中身が空の場合にtrueを返す。<br>
配列や文字列そのもの（入れ物）が無い場合にはNoMethodErrorが発生する。空ですか？と聞いてるわけだから、少なくとも「入れ物」が存在しないとダメってことか。</p>

<h1>
<span id="blankはnilとemptyの合わせ技" class="fragment"></span><a href="#blank%E3%81%AFnil%E3%81%A8empty%E3%81%AE%E5%90%88%E3%82%8F%E3%81%9B%E6%8A%80"><i class="fa fa-link"></i></a>blank?は、nil?とempty?の合わせ技</h1>

<p>では、中身が空か、または入れものそのものが存在しないときの判定はどうなるか。blank?が使える。empty?とnil?を足したようなものだ。<br>
nilと空のオブジェクトを判定できる。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>unless description.blank?
end
</pre></div></div>

<p>と書けば、descriptionの文字列が空か、そもそもdescription自体が存在しない場合に処理をスキップできる。</p>

<h1>
<span id="presentはblankと同じ意味" class="fragment"></span><a href="#present%E3%81%AFblank%E3%81%A8%E5%90%8C%E3%81%98%E6%84%8F%E5%91%B3"><i class="fa fa-link"></i></a>present?は、!blank?と同じ意味</h1>

<p>ちなみに上の処理は present?を使って</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>if description.present?
end
</pre></div></div>

<p>と書ける。</p>

<p>-</p>

<p>nil? すべてのオブジェクトに定義されている。nilのときのみtrueを返す。<br>
empty? 文字列の長さが0のとき、または配列が空のときにTrueを返す。もちろん数値には定義されていない。<br>
blank? railsの拡張。nil, "", " ", [], {} のいずれかでTrueを返す。</p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1" style="height:150px;">
<tr>
	<td rowspan="3">71位</td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="thumb-up-120px.png" /></i>782</kbd>
		<a target="_blank" href="https://qiita.com/yuya_presto/items/5d99499cf96c0ebb09f8">Gitコンフリクト解消ガイド（git mergetoolの使い方）</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2014-02-09<br />23:58:59</center>
	</td>
	<td style="width:200px;">
		<!--投稿者-->
		<center>
			@<a href="user/4153.html">yuya_presto</a>(38件の記事)<br />(codeTakt (ex- mixi) 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/4153/profile-images/1473683814">
		</center>
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Git]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<!--
		<div style="width:350px;height:150px;overflow:scroll;">%s</div>
		-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;">
<h2>
<span id="ファイル編集がコンフリクトした場合" class="fragment"></span><a href="#%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E7%B7%A8%E9%9B%86%E3%81%8C%E3%82%B3%E3%83%B3%E3%83%95%E3%83%AA%E3%82%AF%E3%83%88%E3%81%97%E3%81%9F%E5%A0%B4%E5%90%88"><i class="fa fa-link"></i></a>ファイル編集がコンフリクトした場合</h2>

<p>下記はよくある（忌々しい）コンフリクト画面ですね。</p>

<p><a href="https://camo.qiitausercontent.com/ff2029642e822dea8d6d04fa6db088756533431c/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f343135332f31363665613865642d643166662d373338362d316130632d3834636332316465663764662e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/ff2029642e822dea8d6d04fa6db088756533431c/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f343135332f31363665613865642d643166662d373338362d316130632d3834636332316465663764662e706e67" alt="コンフリクトしたときのgit status" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/4153/166ea8ed-d1ff-7386-1a0c-84cc21def7df.png"></a></p>

<p>皆さんはコンフリクトのmergeはどんな方法でやっていますでしょうか？<br>
vimやemacsで直接編集している方が多いイメージですが、実際開いてみると、下記のように差分が表示されていると思います。</p>

<p><a href="https://camo.qiitausercontent.com/54ce5e0aef0eacacd2204df0231e5811860eeee4/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f343135332f33663065336237652d353339362d353631362d386164372d6262366266356438366131302e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/54ce5e0aef0eacacd2204df0231e5811860eeee4/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f343135332f33663065336237652d353339362d353631362d386164372d6262366266356438366131302e706e67" alt="conflict-marker.png" title="conflict-marker.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/4153/3f0e3b7e-5396-5616-8ad7-bb6bf5d86a10.png"></a></p>

<p>この画面を見ただけではどのようにmergeすればよいのかわかりません。（Objective-CのARC/MRC双方の開発経験がある人は目をつぶってください・・）</p>

<p>gitにはこのようなコンフリクトのmergeを支援する<code>git mergetool</code>コマンドが搭載されています。</p>

<p><a href="https://camo.qiitausercontent.com/5aba49def953167306e3fdeade180ecf14224626/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f343135332f36363836366635322d353162332d666632392d303133302d3435326135303661643365362e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/5aba49def953167306e3fdeade180ecf14224626/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f343135332f36363836366635322d353162332d666632392d303133302d3435326135303661643365362e706e67" alt="git mergetoolのプロンプト" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/4153/66866f52-51b3-ff29-0130-452a506ad3e6.png"></a></p>

<p>このままEnterキーを押すと下記のような画面が立ち上がります。</p>

<p><a href="https://camo.qiitausercontent.com/ade414ec56bb239ff63ee47280b77571665124b5/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f343135332f66396364303838372d643263342d653766642d376134622d3466323039306464656538612e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/ade414ec56bb239ff63ee47280b77571665124b5/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f343135332f66396364303838372d643263342d653766642d376134622d3466323039306464656538612e706e67" alt="mergetool2.png" title="mergetool2.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/4153/f9cd0887-d2c4-e7fd-7a4b-4f2090ddee8a.png"></a></p>

<p>画面幅の都合でフォントが小さいのですが、ここで「mergeしたい差分が作られる直前の状態」と「mergeしたい差分」に注目してみます。</p>

<p><a href="https://camo.qiitausercontent.com/e58cd3ec9860d63058b63491670edf7237e9ef65/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f343135332f62636532323930652d343065642d613132352d383465332d3331386364623764396531352e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/e58cd3ec9860d63058b63491670edf7237e9ef65/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f343135332f62636532323930652d343065642d613132352d383465332d3331386364623764396531352e706e67" alt="mergetool2-base-remote.png" title="mergetool2-base-remote.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/4153/bce2290e-40ed-a125-84e3-318cdb7d9e15.png"></a></p>

<p>この2つを見比べると、<a href="/property" class="user-mention js-hovercard" title="property" data-hovercard-target-type="user" data-hovercard-target-name="property">@property</a>の「*adapter」のところが「*webViewAdapter」に変更になっていることがわかります。<br>
mergeしたい差分の内容は実際には上記の変数名の変更だったのです。</p>

<p>ですので、「merge結果として保存するファイル」の中でコンフリクトした箇所の上側（画面内だとHEAD側）で、adapterをwebViewAdapterに書きかえます。下側とコンフリクトマーカは忘れずに削除しましょう。</p>

<p>ちなみに、git mergeでコンフリクトした場合は、真ん中はbranchが枝分かれした時の状態で、左は現在のbranchに追加された差分、右はmergeしたいbranchに追加された差分ということになります（3-way merge）。<br>
ですので、真ん中と左を比べると、現在のbranchがどのように進んだのかを確認することができます。<br>
今回は、ARC対応でretainがstrongに、assignがweakになったことがわかります。</p>

<p><a href="https://camo.qiitausercontent.com/a22bbf0a84c6eaf7efc6c3d1f3337e7ddaf7954c/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f343135332f38636138386133652d353834342d343231362d653935382d3666646530316233343863342e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/a22bbf0a84c6eaf7efc6c3d1f3337e7ddaf7954c/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f343135332f38636138386133652d353834342d343231362d653935382d3666646530316233343863342e706e67" alt="merge後の状態" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/4153/8ca88a3e-5844-4216-e958-6fde01b348c4.png"></a></p>

<p>mergeが完了したら、保存してエディタを終了します。merge前の状態は、該当のファイル.origとして保存されます。自動的にgit addされているので、コミットしましょう。</p>

<p>※なお、キャンセルする場合は1回も保存をせずにエディタを終了します。</p>

<p>※ちなみに現状ではvimのみの対応となります・・emacsでも設定方法があるようなので、うまく言った方はよければコメント等ください。</p>

<h3>
<span id="xcode用のguiのdiffツールっぽいのが起動する場合" class="fragment"></span><a href="#xcode%E7%94%A8%E3%81%AEgui%E3%81%AEdiff%E3%83%84%E3%83%BC%E3%83%AB%E3%81%A3%E3%81%BD%E3%81%84%E3%81%AE%E3%81%8C%E8%B5%B7%E5%8B%95%E3%81%99%E3%82%8B%E5%A0%B4%E5%90%88"><i class="fa fa-link"></i></a>（Xcode用の）GUIのdiffツールっぽいのが起動する場合</h3>

<p>opendiffになっている人がちょくちょくいるみたいなので、下記のコマンドでvimdiffに切り替えてください。</p>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>git config --global merge.tool vimdiff
</pre></div></div>

<h2>
<span id="番外編mergetoolを使わず似た方法でmergeする" class="fragment"></span><a href="#%E7%95%AA%E5%A4%96%E7%B7%A8mergetool%E3%82%92%E4%BD%BF%E3%82%8F%E3%81%9A%E4%BC%BC%E3%81%9F%E6%96%B9%E6%B3%95%E3%81%A7merge%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>（番外編）mergetoolを使わず似た方法でmergeする</h2>

<p>宗教上の都合でvimが使えない方や画面が狭い方に朗報です。</p>

<p>通常のコンフリクトマーカだとmergetoolの真ん中の画面（mergeしたい差分が作られる直前の状態、BASE）が欠落していましたが、コンフリクトマーカにそれを表示するオプションがありました。</p>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>git config --global merge.conflictstyle diff3
</pre></div></div>

<p>コンフリクトマーカが下記のようになります。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD
merge前の状態
||||||| merged common ancestors
mergeしたい差分が作られる直前の状態
=======
mergeしたい差分
&gt;&gt;&gt;&gt;&gt;&gt;&gt; branch
</pre></div></div>

<p>とりあえず設定しておいても損はしません。mergetool使うほどでかいconflictじゃないときにも重宝します。<br>
※ただし、コンフリクトしていない場所に加えられた変更を把握できないので、大きい差分にはmergetoolを使うか、git diffを組み合わせて使うほうが良さそうです。</p>

<p>参照: <a href="http://qiita.com/hchbaw/items/1191c2627307a4673b1b" class="autolink" id="reference-e8145d321b7d7f366f34">http://qiita.com/hchbaw/items/1191c2627307a4673b1b</a></p>

<h2>
<span id="ファイル削除がコンフリクトした場合path-conflict" class="fragment"></span><a href="#%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E5%89%8A%E9%99%A4%E3%81%8C%E3%82%B3%E3%83%B3%E3%83%95%E3%83%AA%E3%82%AF%E3%83%88%E3%81%97%E3%81%9F%E5%A0%B4%E5%90%88path-conflict"><i class="fa fa-link"></i></a>ファイル削除がコンフリクトした場合（path conflict）</h2>

<p>削除したファイルが編集されていた時に起きます。</p>

<ul>
<li>Deleted by them:

<ul>
<li>mergeする差分で削除されています</li>
<li>現在のbranchで変更されています</li>
</ul>
</li>
<li>Deleted by us:

<ul>
<li>現在のbranchで削除されています</li>
<li>mergeする差分で変更されています</li>
</ul>
</li>
</ul>

<p>多くの場合最終的に削除を採用することになると思いますが、mergeのためにファイルが残されているので、下記のようにします。</p>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>git rm path/to/target/file
</pre></div></div>

<p>※unmergedっぽいメッセージが出ますが、きちんと削除が反映されます。</p>

<h2>
<span id="同じ差分を複数回mergeする場合" class="fragment"></span><a href="#%E5%90%8C%E3%81%98%E5%B7%AE%E5%88%86%E3%82%92%E8%A4%87%E6%95%B0%E5%9B%9Emerge%E3%81%99%E3%82%8B%E5%A0%B4%E5%90%88"><i class="fa fa-link"></i></a>同じ差分を複数回mergeする場合</h2>

<p>gitにはコンフリクトした差分のmerge結果を保存しておき再利用するrerere機能というものがあります。<br>
メンテナとかリリース担当で、同じ差分で複数回mergeする場合に便利です。<br>
下記のコマンドで有効にできます。</p>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>git config --global rerere.enabled <span class="nb">true</span>
</pre></div></div>

<p><a href="http://d.hatena.ne.jp/unpush/20091010/1255186302" class="autolink" rel="nofollow noopener" target="_blank">http://d.hatena.ne.jp/unpush/20091010/1255186302</a></p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1" style="height:150px;">
<tr>
	<td rowspan="3">72位</td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="thumb-up-120px.png" /></i>773</kbd>
		<a target="_blank" href="https://qiita.com/usagimaru/items/59745e26584a00ddfba3">Xcode の便利プラグインまとめ</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-01-16<br />10:49:25</center>
	</td>
	<td style="width:200px;">
		<!--投稿者-->
		<center>
			@<a href="user/3603.html">usagimaru</a>(173件の記事)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/3603/profile-images/1473683336">
		</center>
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Objective-C]</b> <b>[MacOSX]</b> <b>[Xcode]</b> <b>[iOS]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<!--
		<div style="width:350px;height:150px;overflow:scroll;">%s</div>
		-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>Xcode の便利プラグインまとめ</p>

<h1>
<span id="はじめに" class="fragment"></span><a href="#%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB"><i class="fa fa-link"></i></a>はじめに</h1>

<p>Xcode 8 からのいわゆる Xcode Source Editor Extension ではなく、あくまで非公式のプラグインを掲載します。</p>

<ul>
<li>インストール先は <code>~/Library/Application Support/Developer/Shared/Xcode/Plug-ins/</code>
</li>
<li>Alcatraz などのパッケージマネージャを使うと管理が楽</li>
<li>Xcode の更新でプラグインが使えなくなる事もあるので注意

<ul>
<li>"DVTPlugInCompatibilityUUID" を追記する事で対応出来る場合もある（後述）</li>
</ul>
</li>
</ul>

<hr>

<h1>
<span id="管理" class="fragment"></span><a href="#%E7%AE%A1%E7%90%86"><i class="fa fa-link"></i></a>管理</h1>

<h2>
<span id="alcatraz" class="fragment"></span><a href="#alcatraz"><i class="fa fa-link"></i></a>Alcatraz</h2>

<p>Xcode プラグインや Color Scheme などを管理するパッケージマネージャ。これを入れておけばこの記事を見なくてもだいたいのプラグインは参照できます。<br>
<code>メニューバー &gt; Window &gt; Package Manager</code> から開く。</p>

<p><a href="http://qiita.com/usagimaru/items/59745e26584a00ddfba3#dvtpluginmanagernonappleplugins-xcode-71-%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6">Xcode 7.1 で使えなくなった場合</a></p>

<h3>
<span id="対応環境" class="fragment"></span><a href="#%E5%AF%BE%E5%BF%9C%E7%92%B0%E5%A2%83"><i class="fa fa-link"></i></a>対応環境</h3>

<ul>
<li>Xcode 5, 6</li>
<li>OS X 10.9以降</li>
</ul>

<h3>
<span id="インストール" class="fragment"></span><a href="#%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB"><i class="fa fa-link"></i></a>インストール</h3>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ curl -fsSL https://raw.github.com/supermarin/Alcatraz/master/Scripts/install.sh | sh
</pre></div></div>

<p>Xcode を再起動すると Window メニュー内に "Package Manager" という項目が現れる。</p>

<p><a href="https://github.com/mneorr/Alcatraz" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/mneorr/Alcatraz</a><br>
<a href="http://mneorr.github.io/Alcatraz/" class="autolink" rel="nofollow noopener" target="_blank">http://mneorr.github.io/Alcatraz/</a></p>

<p><a href="https://camo.qiitausercontent.com/cb4a88854ac099f3d172306d63e6c0ff752ee466/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f333630332f65613435373865662d383863362d633836642d623232662d3834656538376536366630332e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/cb4a88854ac099f3d172306d63e6c0ff752ee466/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f333630332f65613435373865662d383863362d633836642d623232662d3834656538376536366630332e706e67" alt="alcatraz.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/3603/ea4578ef-88c6-c86d-b22f-84ee87e66f03.png"></a></p>

<h2>
<span id="jdpluginmanager" class="fragment"></span><a href="#jdpluginmanager"><i class="fa fa-link"></i></a>JDPluginManager</h2>

<p>Xcode プラグインを管理するためのプラグイン。Alcatraz が使えない環境では代替でこちらが利用できる。</p>

<p><a href="https://github.com/jaydee3/JDPluginManager" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/jaydee3/JDPluginManager</a><br>
旧 <a href="https://github.com/jaydee3/JDListInstalledPlugins" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/jaydee3/JDListInstalledPlugins</a></p>

<p><a href="https://camo.qiitausercontent.com/53efd2346b115fa32d83124d21f07c54d7466533/68747470733a2f2f7261772e6769746875622e636f6d2f6a6179646565332f4a44506c7567696e4d616e616765722f6d61737465722f6173736574732f73637265656e73686f74312e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/53efd2346b115fa32d83124d21f07c54d7466533/68747470733a2f2f7261772e6769746875622e636f6d2f6a6179646565332f4a44506c7567696e4d616e616765722f6d61737465722f6173736574732f73637265656e73686f74312e706e67" alt="" data-canonical-src="https://raw.github.com/jaydee3/JDPluginManager/master/assets/screenshot1.png"></a><br>
<a href="https://camo.qiitausercontent.com/491a8906fe2320d5f80537df3dce928f253456a2/68747470733a2f2f7261772e6769746875622e636f6d2f6a6179646565332f4a44506c7567696e4d616e616765722f6d61737465722f6173736574732f73637265656e73686f74322e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/491a8906fe2320d5f80537df3dce928f253456a2/68747470733a2f2f7261772e6769746875622e636f6d2f6a6179646565332f4a44506c7567696e4d616e616765722f6d61737465722f6173736574732f73637265656e73686f74322e706e67" alt="" data-canonical-src="https://raw.github.com/jaydee3/JDPluginManager/master/assets/screenshot2.png"></a><br>
<a href="https://camo.qiitausercontent.com/14df1aec74835e8f25f078d25cdec8a2aada4f4a/68747470733a2f2f7261772e6769746875622e636f6d2f6a6179646565332f4a44506c7567696e4d616e616765722f6d61737465722f6173736574732f73637265656e73686f74332e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/14df1aec74835e8f25f078d25cdec8a2aada4f4a/68747470733a2f2f7261772e6769746875622e636f6d2f6a6179646565332f4a44506c7567696e4d616e616765722f6d61737465722f6173736574732f73637265656e73686f74332e706e67" alt="" data-canonical-src="https://raw.github.com/jaydee3/JDPluginManager/master/assets/screenshot3.png"></a></p>

<h1>
<span id="エディタ--自動補完" class="fragment"></span><a href="#%E3%82%A8%E3%83%87%E3%82%A3%E3%82%BF--%E8%87%AA%E5%8B%95%E8%A3%9C%E5%AE%8C"><i class="fa fa-link"></i></a>エディタ – 自動補完</h1>

<h2>
<span id="autocoding" class="fragment"></span><a href="#autocoding"><i class="fa fa-link"></i></a>AutoCoding</h2>

<p>NSCoding や -description の実装を自動生成する。</p>

<p>もう配布されていないようです。-description の自動生成は [XcodeGenerateDescriptionPlugin] で代替できます。</p>

<p><a href="http://questbeat.hatenablog.jp/entry/2013/11/01/150141" class="autolink" rel="nofollow noopener" target="_blank">http://questbeat.hatenablog.jp/entry/2013/11/01/150141</a></p>

<h3>
<span id="動作環境" class="fragment"></span><a href="#%E5%8B%95%E4%BD%9C%E7%92%B0%E5%A2%83"><i class="fa fa-link"></i></a>動作環境</h3>

<ul>
<li>Xcode 5.0, 6.1</li>
</ul>

<p><a href="https://camo.qiitausercontent.com/5b99243d77f9648ec91a21e6b413e6068722f75b/687474703a2f2f63646e2d616b2e662e73742d686174656e612e636f6d2f696d616765732f666f746f6c6966652f712f7175657374626561742f32303133313130312f32303133313130313033303833352e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/5b99243d77f9648ec91a21e6b413e6068722f75b/687474703a2f2f63646e2d616b2e662e73742d686174656e612e636f6d2f696d616765732f666f746f6c6966652f712f7175657374626561742f32303133313130312f32303133313130313033303833352e706e67" alt="" data-canonical-src="http://cdn-ak.f.st-hatena.com/images/fotolife/q/questbeat/20131101/20131101030835.png"></a></p>

<h2>
<span id="xcodegeneratedescriptionplugin" class="fragment"></span><a href="#xcodegeneratedescriptionplugin"><i class="fa fa-link"></i></a>XcodeGenerateDescriptionPlugin</h2>

<p>選択したプロパティ定義から、-description メソッドの実装を自動生成する。モデルクラスなどの実装に役立つ。</p>

<p><a href="https://github.com/adamontherun/xCodeGenerateDescriptionPlugin" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/adamontherun/xCodeGenerateDescriptionPlugin</a></p>

<p><a href="https://camo.qiitausercontent.com/fee48baf6e8123e918c254d3732a5018857de9cc/68747470733a2f2f7261772e67697468756275736572636f6e74656e742e636f6d2f6164616d6f6e74686572756e2f78436f646547656e65726174654465736372697074696f6e506c7567696e2f6d61737465722f4175746f47656e65726174654465736372697074696f6e506c7567696e50726f642f4175746f47656e65726174654465736372697074696f6e506c7567696e50726f642f6865616465722e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/fee48baf6e8123e918c254d3732a5018857de9cc/68747470733a2f2f7261772e67697468756275736572636f6e74656e742e636f6d2f6164616d6f6e74686572756e2f78436f646547656e65726174654465736372697074696f6e506c7567696e2f6d61737465722f4175746f47656e65726174654465736372697074696f6e506c7567696e50726f642f4175746f47656e65726174654465736372697074696f6e506c7567696e50726f642f6865616465722e706e67" alt="" data-canonical-src="https://raw.githubusercontent.com/adamontherun/xCodeGenerateDescriptionPlugin/master/AutoGenerateDescriptionPluginProd/AutoGenerateDescriptionPluginProd/header.png"></a><br>
<a href="https://camo.qiitausercontent.com/75938a948d3f115feed2a0a43c0f401fcf488c60/68747470733a2f2f7261772e67697468756275736572636f6e74656e742e636f6d2f6164616d6f6e74686572756e2f78436f646547656e65726174654465736372697074696f6e506c7567696e2f6d61737465722f4175746f47656e65726174654465736372697074696f6e506c7567696e50726f642f4175746f47656e65726174654465736372697074696f6e506c7567696e50726f642f696d706c656d656e746174696f6e2e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/75938a948d3f115feed2a0a43c0f401fcf488c60/68747470733a2f2f7261772e67697468756275736572636f6e74656e742e636f6d2f6164616d6f6e74686572756e2f78436f646547656e65726174654465736372697074696f6e506c7567696e2f6d61737465722f4175746f47656e65726174654465736372697074696f6e506c7567696e50726f642f4175746f47656e65726174654465736372697074696f6e506c7567696e50726f642f696d706c656d656e746174696f6e2e706e67" alt="" data-canonical-src="https://raw.githubusercontent.com/adamontherun/xCodeGenerateDescriptionPlugin/master/AutoGenerateDescriptionPluginProd/AutoGenerateDescriptionPluginProd/implementation.png"></a></p>

<h2>
<span id="auto-importer-for-xcode" class="fragment"></span><a href="#auto-importer-for-xcode"><i class="fa fa-link"></i></a>Auto Importer for Xcode</h2>

<p><code>#import</code> ディレクティブを自動挿入する。</p>

<p><a href="https://github.com/lucholaf/Auto-Importer-for-Xcode" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/lucholaf/Auto-Importer-for-Xcode</a></p>

<p><a href="https://camo.qiitausercontent.com/06748bc777570e26cef68c47309a6dc4cf0ca949/68747470733a2f2f7261772e67697468756275736572636f6e74656e742e636f6d2f6c7563686f6c61662f4175746f2d496d706f727465722d666f722d58636f64652f6d61737465722f64656d6f2e676966" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/06748bc777570e26cef68c47309a6dc4cf0ca949/68747470733a2f2f7261772e67697468756275736572636f6e74656e742e636f6d2f6c7563686f6c61662f4175746f2d496d706f727465722d666f722d58636f64652f6d61737465722f64656d6f2e676966" alt="" data-canonical-src="https://raw.githubusercontent.com/lucholaf/Auto-Importer-for-Xcode/master/demo.gif"></a></p>

<h2>
<span id="peckham" class="fragment"></span><a href="#peckham"><i class="fa fa-link"></i></a>Peckham</h2>

<p><code>#import</code> ディレクティブをどこからでも挿入できるようにする。</p>

<p><a href="https://github.com/markohlebar/Peckham" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/markohlebar/Peckham</a></p>

<p><a href="https://camo.qiitausercontent.com/55fa803513ba8d320128e9f74b54d7d4cc308e23/68747470733a2f2f7261772e67697468756275736572636f6e74656e742e636f6d2f6d61726b6f686c656261722f5065636b68616d2f6d61737465722f4d6973632f5065636b68616d2e676966" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/55fa803513ba8d320128e9f74b54d7d4cc308e23/68747470733a2f2f7261772e67697468756275736572636f6e74656e742e636f6d2f6d61726b6f686c656261722f5065636b68616d2f6d61737465722f4d6973632f5065636b68616d2e676966" alt="" data-canonical-src="https://raw.githubusercontent.com/markohlebar/Peckham/master/Misc/Peckham.gif"></a></p>

<h2>
<span id="importsorter" class="fragment"></span><a href="#importsorter"><i class="fa fa-link"></i></a>ImportSorter</h2>

<p><code>#import</code> ディレクティブの順番を自動で整理してくれる。</p>

<p><a href="https://github.com/manji602/ImportSorter" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/manji602/ImportSorter</a><br>
<a href="http://qiita.com/manji602/items/25db3f65ee6fbd7b8d37" class="autolink" id="reference-5dbb4b01b76bd3c4e9f6">http://qiita.com/manji602/items/25db3f65ee6fbd7b8d37</a></p>

<p><a href="https://camo.qiitausercontent.com/0022ccc78804b6b4334a12c427e809341b7ab301/68747470733a2f2f7261772e67697468756275736572636f6e74656e742e636f6d2f6d616e6a693630322f496d706f7274536f727465722f6d61737465722f496d616765732f75736167655f6669677572653030312e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/0022ccc78804b6b4334a12c427e809341b7ab301/68747470733a2f2f7261772e67697468756275736572636f6e74656e742e636f6d2f6d616e6a693630322f496d706f7274536f727465722f6d61737465722f496d616765732f75736167655f6669677572653030312e706e67" alt="" data-canonical-src="https://raw.githubusercontent.com/manji602/ImportSorter/master/Images/usage_figure001.png"></a><br>
<a href="https://camo.qiitausercontent.com/04da216ae1fa5a1eba828128493fc7ad852f5774/68747470733a2f2f7261772e67697468756275736572636f6e74656e742e636f6d2f6d616e6a693630322f496d706f7274536f727465722f6d61737465722f496d616765732f75736167655f6669677572653030332e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/04da216ae1fa5a1eba828128493fc7ad852f5774/68747470733a2f2f7261772e67697468756275736572636f6e74656e742e636f6d2f6d616e6a693630322f496d706f7274536f727465722f6d61737465722f496d616765732f75736167655f6669677572653030332e706e67" alt="" data-canonical-src="https://raw.githubusercontent.com/manji602/ImportSorter/master/Images/usage_figure003.png"></a></p>

<h2>
<span id="catweakersense" class="fragment"></span><a href="#catweakersense"><i class="fa fa-link"></i></a>CATweakerSense</h2>

<p>CAMediaTimingFunction のアニメーションカーブを GUI で編集できるようにする。</p>

<p><a href="https://github.com/keefo/CATweaker" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/keefo/CATweaker</a></p>

<p><a href="https://camo.qiitausercontent.com/9861e4f444fd45236d261e52f6970de05501c13f/68747470733a2f2f7261772e67697468756275736572636f6e74656e742e636f6d2f6b6565666f2f4341547765616b65722f6d61737465722f706c7567696e322e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/9861e4f444fd45236d261e52f6970de05501c13f/68747470733a2f2f7261772e67697468756275736572636f6e74656e742e636f6d2f6b6565666f2f4341547765616b65722f6d61737465722f706c7567696e322e706e67" alt="" data-canonical-src="https://raw.githubusercontent.com/keefo/CATweaker/master/plugin2.png"></a></p>

<h3>
<span id="ヘルパーツール" class="fragment"></span><a href="#%E3%83%98%E3%83%AB%E3%83%91%E3%83%BC%E3%83%84%E3%83%BC%E3%83%AB"><i class="fa fa-link"></i></a>ヘルパーツール</h3>

<p><a href="https://camo.qiitausercontent.com/ce261ea4c88b94870ee0ad8f215142335baccabf/68747470733a2f2f7261772e67697468756275736572636f6e74656e742e636f6d2f6b6565666f2f4341547765616b65722f6d61737465722f706f737465722e6a7067" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/ce261ea4c88b94870ee0ad8f215142335baccabf/68747470733a2f2f7261772e67697468756275736572636f6e74656e742e636f6d2f6b6565666f2f4341547765616b65722f6d61737465722f706f737465722e6a7067" alt="" data-canonical-src="https://raw.githubusercontent.com/keefo/CATweaker/master/poster.jpg"></a></p>

<h2>
<span id="colorsense" class="fragment"></span><a href="#colorsense"><i class="fa fa-link"></i></a>ColorSense</h2>

<p>NSColor / UIColor のコードを OS 標準のカラーパネルで編集できるようにする。<br>
Xcode 8からは標準機能になったので不要と思われる。</p>

<p><a href="https://github.com/omz/ColorSense-for-Xcode" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/omz/ColorSense-for-Xcode</a></p>

<p>動作の様子<br>
<a href="http://www.youtube.com/watch?v=eblRfDQM0Go" class="autolink" rel="nofollow noopener" target="_blank">http://www.youtube.com/watch?v=eblRfDQM0Go</a></p>

<h2>
<span id="colorsenserainbow" class="fragment"></span><a href="#colorsenserainbow"><i class="fa fa-link"></i></a>ColorSenseRainbow</h2>

<p>Swift に対応した NSColor / UIColor のコードを OS 標準のカラーパネルで編集できるようにするやつ。 <br>
Xcode 8からは標準機能になったので不要と思われる。</p>

<p><a href="https://github.com/NorthernRealities/ColorSenseRainbow" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/NorthernRealities/ColorSenseRainbow</a></p>

<p><a href="https://camo.qiitausercontent.com/7db42805fdac16a810823c8abc49bc3218aa0472/68747470733a2f2f7261772e67697468756275736572636f6e74656e742e636f6d2f4e6f72746865726e5265616c69746965732f436f6c6f7253656e73655261696e626f772f6d61737465722f4353525f44656d6f2e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/7db42805fdac16a810823c8abc49bc3218aa0472/68747470733a2f2f7261772e67697468756275736572636f6e74656e742e636f6d2f4e6f72746865726e5265616c69746965732f436f6c6f7253656e73655261696e626f772f6d61737465722f4353525f44656d6f2e706e67" alt="" data-canonical-src="https://raw.githubusercontent.com/NorthernRealities/ColorSenseRainbow/master/CSR_Demo.png"></a></p>

<h2>
<span id="fuzzyautocompleteplugin" class="fragment"></span><a href="#fuzzyautocompleteplugin"><i class="fa fa-link"></i></a>FuzzyAutocompletePlugin</h2>

<p>Xcode のコード補完機能を “Open Quickly” と同じような部分一致にする。Xcode 7.3 以降では標準機能になったので不要と思われる。</p>

<p><a href="https://github.com/chendo/FuzzyAutocompletePlugin" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/chendo/FuzzyAutocompletePlugin</a></p>

<p><a href="https://camo.qiitausercontent.com/a50c33e4b63f1fbb65d8ff6100152c26a83b4e56/68747470733a2f2f7261772e6769746875622e636f6d2f6368656e646f2f46757a7a794175746f636f6d706c657465506c7567696e2f6d61737465722f64656d6f2e676966" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/a50c33e4b63f1fbb65d8ff6100152c26a83b4e56/68747470733a2f2f7261772e6769746875622e636f6d2f6368656e646f2f46757a7a794175746f636f6d706c657465506c7567696e2f6d61737465722f64656d6f2e676966" alt="" data-canonical-src="https://raw.github.com/chendo/FuzzyAutocompletePlugin/master/demo.gif"></a></p>

<h2>
<span id="hostringsense-for-xcode" class="fragment"></span><a href="#hostringsense-for-xcode"><i class="fa fa-link"></i></a>HOStringSense for Xcode</h2>

<p>NSString 編集機能を拡張する。<code>"</code> <code>\n</code> 等がより自然に入力できるようになる。</p>

<p><a href="https://github.com/holtwick/HOStringSense-for-Xcode" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/holtwick/HOStringSense-for-Xcode</a></p>

<p><a href="https://camo.qiitausercontent.com/fb55eda019121a78276a6dd90c319d8afc12c27f/68747470733a2f2f7261772e6769746875622e636f6d2f686f6c747769636b2f484f537472696e6753656e73652d666f722d58636f64652f6d61737465722f537472696e6744656d6f416e696d6174696f6e2e676966" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/fb55eda019121a78276a6dd90c319d8afc12c27f/68747470733a2f2f7261772e6769746875622e636f6d2f686f6c747769636b2f484f537472696e6753656e73652d666f722d58636f64652f6d61737465722f537472696e6744656d6f416e696d6174696f6e2e676966" alt="" data-canonical-src="https://raw.github.com/holtwick/HOStringSense-for-Xcode/master/StringDemoAnimation.gif"></a></p>

<h2>
<span id="intellipaste" class="fragment"></span><a href="#intellipaste"><i class="fa fa-link"></i></a>IntelliPaste</h2>

<p>良い感じにペーストできるようにする。<br>
RGB値をNSColor/UIColor定義にしてくれる機能もある。</p>

<p><a href="https://github.com/RobertGummesson/IntelliPaste-for-XCode" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/RobertGummesson/IntelliPaste-for-XCode</a></p>

<p><a href="https://camo.qiitausercontent.com/d52e3136c794ba560eb0490558b62241cd385e8b/68747470733a2f2f7261772e67697468756275736572636f6e74656e742e636f6d2f526f6265727447756d6d6573736f6e2f496e74656c6c6950617374652d666f722d58436f64652f6d61737465722f53637265656e73686f74732f496e74656c6c6950617374652d44656d6f2e676966" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/d52e3136c794ba560eb0490558b62241cd385e8b/68747470733a2f2f7261772e67697468756275736572636f6e74656e742e636f6d2f526f6265727447756d6d6573736f6e2f496e74656c6c6950617374652d666f722d58436f64652f6d61737465722f53637265656e73686f74732f496e74656c6c6950617374652d44656d6f2e676966" alt="" data-canonical-src="https://raw.githubusercontent.com/RobertGummesson/IntelliPaste-for-XCode/master/Screenshots/IntelliPaste-Demo.gif"></a></p>

<h2>
<span id="ksimagenamed-xcode" class="fragment"></span><a href="#ksimagenamed-xcode"><i class="fa fa-link"></i></a>KSImageNamed-Xcode</h2>

<p>UIImage のファイル名を補完する。画像プレビュー機能つき。<br>
Xcode 8からは標準機能になったので不要と思われる。</p>

<p><a href="https://github.com/ksuther/KSImageNamed-Xcode" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/ksuther/KSImageNamed-Xcode</a></p>

<p>解説記事<br>
<a href="http://cocoadays-info.blogspot.jp/2013/01/xcode.html" class="autolink" rel="nofollow noopener" target="_blank">http://cocoadays-info.blogspot.jp/2013/01/xcode.html</a></p>

<p><a href="https://camo.qiitausercontent.com/e775e2bc636dc3735036fc14320e45dfb290ef72/68747470733a2f2f7261772e6769746875622e636f6d2f6b7375746865722f4b53496d6167654e616d65642d58636f64652f6d61737465722f73637265656e73686f742e676966" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/e775e2bc636dc3735036fc14320e45dfb290ef72/68747470733a2f2f7261772e6769746875622e636f6d2f6b7375746865722f4b53496d6167654e616d65642d58636f64652f6d61737465722f73637265656e73686f742e676966" alt="" data-canonical-src="https://raw.github.com/ksuther/KSImageNamed-Xcode/master/screenshot.gif"></a></p>

<h2>
<span id="licensenotice_xcodeplugin" class="fragment"></span><a href="#licensenotice_xcodeplugin"><i class="fa fa-link"></i></a>LicenseNotice_XcodePlugin</h2>

<p>MIT, Apache, GPL などのライセンス条文をソースコードファイルに挿入する。</p>

<p><a href="https://github.com/xxhp/LicenseNotice_XcodePlugin" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/xxhp/LicenseNotice_XcodePlugin</a></p>

<p><a href="https://camo.qiitausercontent.com/53f9fb9c52b244b2a2ae62734b5034137ce5956d/68747470733a2f2f7261772e67697468756275736572636f6e74656e742e636f6d2f787868702f4c6963656e73654e6f746963655f58636f6465506c7567696e2f6d61737465722f73637265656e73686f742e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/53f9fb9c52b244b2a2ae62734b5034137ce5956d/68747470733a2f2f7261772e67697468756275736572636f6e74656e742e636f6d2f787868702f4c6963656e73654e6f746963655f58636f6465506c7567696e2f6d61737465722f73637265656e73686f742e706e67" alt="" data-canonical-src="https://raw.githubusercontent.com/xxhp/LicenseNotice_XcodePlugin/master/screenshot.png"></a></p>

<h2>
<span id="scxcodeswitchexpander" class="fragment"></span><a href="#scxcodeswitchexpander"><i class="fa fa-link"></i></a>SCXcodeSwitchExpander</h2>

<p>switch 文の補完機能を拡張するプラグイン。enum 定義から自動判定して必要な case が補完されるようになる。</p>

<p><a href="https://github.com/stefanceriu/SCXcodeSwitchExpander" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/stefanceriu/SCXcodeSwitchExpander</a></p>

<p><a href="https://camo.qiitausercontent.com/5ee38f9e5b4a9a7c88bf28c561c3663ffdfbdb59/68747470733a2f2f63616d6f2e67697468756275736572636f6e74656e742e636f6d2f643461623362613435616637303935313535376164626631376139643064656162343765353139662f363837343734373037333361326632663634366332653634373236663730363236663738373537333635373236333666366537343635366537343265363336663664326637353266333133323337333433383332333033313266353334333538363336663634363535333737363937343633363834353738373036313665363436353732326635333433353836333666363436353533373736393734363336383435373837303631366536343635373233313265363736393636" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/5ee38f9e5b4a9a7c88bf28c561c3663ffdfbdb59/68747470733a2f2f63616d6f2e67697468756275736572636f6e74656e742e636f6d2f643461623362613435616637303935313535376164626631376139643064656162343765353139662f363837343734373037333361326632663634366332653634373236663730363236663738373537333635373236333666366537343635366537343265363336663664326637353266333133323337333433383332333033313266353334333538363336663634363535333737363937343633363834353738373036313665363436353732326635333433353836333666363436353533373736393734363336383435373837303631366536343635373233313265363736393636" alt="" data-canonical-src="https://camo.githubusercontent.com/d4ab3ba45af70951557adbf17a9d0deab47e519f/68747470733a2f2f646c2e64726f70626f7875736572636f6e74656e742e636f6d2f752f31323734383230312f534358636f6465537769746368457870616e6465722f534358636f6465537769746368457870616e646572312e676966"></a></p>

<h2>
<span id="uselessplugin" class="fragment"></span><a href="#uselessplugin"><i class="fa fa-link"></i></a>UselessPlugin</h2>

<p>Objective-C++ 向けの補完機能を追加するプラグイン。</p>

<p><a href="https://github.com/HoZanHoi/UselessPlugin" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/HoZanHoi/UselessPlugin</a></p>

<p><a href="https://camo.qiitausercontent.com/0154329416f9f83e631e8377bfd8be41a086e1ed/68747470733a2f2f7261772e6769746875622e636f6d2f486f5a616e486f692f5573656c657373506c7567696e2f6d61737465722f73637265656e73686f742e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/0154329416f9f83e631e8377bfd8be41a086e1ed/68747470733a2f2f7261772e6769746875622e636f6d2f486f5a616e486f692f5573656c657373506c7567696e2f6d61737465722f73637265656e73686f742e706e67" alt="" data-canonical-src="https://raw.github.com/HoZanHoi/UselessPlugin/master/screenshot.png"></a></p>

<h2>
<span id="vvdocumenter" class="fragment"></span><a href="#vvdocumenter"><i class="fa fa-link"></i></a>VVDocumenter</h2>

<p>“///”と打つとJavaDoc風のコメントを挿入できるようにする。</p>

<p><a href="https://github.com/onevcat/VVDocumenter-Xcode" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/onevcat/VVDocumenter-Xcode</a></p>

<p><a href="https://camo.qiitausercontent.com/c893e636c5316bc45d308bb83a815fe2680f71ec/68747470733a2f2f7261772e6769746875622e636f6d2f6f6e65766361742f5656446f63756d656e7465722d58636f64652f6d61737465722f53637265656e53686f742e676966" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/c893e636c5316bc45d308bb83a815fe2680f71ec/68747470733a2f2f7261772e6769746875622e636f6d2f6f6e65766361742f5656446f63756d656e7465722d58636f64652f6d61737465722f53637265656e53686f742e676966" alt="GitHub" data-canonical-src="https://raw.github.com/onevcat/VVDocumenter-Xcode/master/ScreenShot.gif"></a></p>

<h2>
<span id="xcactionbar" class="fragment"></span><a href="#xcactionbar"><i class="fa fa-link"></i></a>XCActionBar</h2>

<p>Alfred のような感じにアクションを即座に実行できるようにする。</p>

<p><a href="https://github.com/pdcgomes/XCActionBar" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/pdcgomes/XCActionBar</a></p>

<p><a href="https://camo.qiitausercontent.com/44acd224d54da35e39015a1824e6f0796fb1a72f/68747470733a2f2f7261772e67697468756275736572636f6e74656e742e636f6d2f706463676f6d65732f5843416374696f6e4261722f6d61737465722f64656d6f2e676966" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/44acd224d54da35e39015a1824e6f0796fb1a72f/68747470733a2f2f7261772e67697468756275736572636f6e74656e742e636f6d2f706463676f6d65732f5843416374696f6e4261722f6d61737465722f64656d6f2e676966" alt="" data-canonical-src="https://raw.githubusercontent.com/pdcgomes/XCActionBar/master/demo.gif"></a><br>
<a href="https://camo.qiitausercontent.com/589deeca405d9864ec117040a54235dd3e488911/68747470733a2f2f7261772e67697468756275736572636f6e74656e742e636f6d2f706463676f6d65732f5843416374696f6e4261722f6d61737465722f64656d6f322e676966" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/589deeca405d9864ec117040a54235dd3e488911/68747470733a2f2f7261772e67697468756275736572636f6e74656e742e636f6d2f706463676f6d65732f5843416374696f6e4261722f6d61737465722f64656d6f322e676966" alt="" data-canonical-src="https://raw.githubusercontent.com/pdcgomes/XCActionBar/master/demo2.gif"></a><br>
<a href="https://camo.qiitausercontent.com/17b6881fcb357205711e7d13e9557f7a93032364/68747470733a2f2f7261772e67697468756275736572636f6e74656e742e636f6d2f706463676f6d65732f5843416374696f6e4261722f6d61737465722f64656d6f332e676966" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/17b6881fcb357205711e7d13e9557f7a93032364/68747470733a2f2f7261772e67697468756275736572636f6e74656e742e636f6d2f706463676f6d65732f5843416374696f6e4261722f6d61737465722f64656d6f332e676966" alt="" data-canonical-src="https://raw.githubusercontent.com/pdcgomes/XCActionBar/master/demo3.gif"></a></p>

<h2>
<span id="xcodeboost" class="fragment"></span><a href="#xcodeboost"><i class="fa fa-link"></i></a>XcodeBoost</h2>

<p>シンボルハイライト、メソッドの選択、メソッド定義のコピー、正規表現によるハイライト、インデントを考慮したペースト等の編集機能を追加する。</p>

<p><a href="https://github.com/fortinmike/XcodeBoost" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/fortinmike/XcodeBoost</a></p>

<p><a href="https://camo.qiitausercontent.com/98ccc31e2dc0c6a5fc88b9c5b6f00db4767bccc2/68747470733a2f2f7261772e67697468756275736572636f6e74656e742e636f6d2f666f7274696e6d696b652f58636f6465426f6f73742f6d61737465722f496d616765732f686967686c69676874696e672e676966" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/98ccc31e2dc0c6a5fc88b9c5b6f00db4767bccc2/68747470733a2f2f7261772e67697468756275736572636f6e74656e742e636f6d2f666f7274696e6d696b652f58636f6465426f6f73742f6d61737465722f496d616765732f686967686c69676874696e672e676966" alt="" data-canonical-src="https://raw.githubusercontent.com/fortinmike/XcodeBoost/master/Images/highlighting.gif"></a></p>

<p><a href="https://camo.qiitausercontent.com/19c08445155818d99e070c59933892c24b78d9c8/68747470733a2f2f7261772e67697468756275736572636f6e74656e742e636f6d2f666f7274696e6d696b652f58636f6465426f6f73742f6d61737465722f496d616765732f686967686c696768742d72656765782e676966" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/19c08445155818d99e070c59933892c24b78d9c8/68747470733a2f2f7261772e67697468756275736572636f6e74656e742e636f6d2f666f7274696e6d696b652f58636f6465426f6f73742f6d61737465722f496d616765732f686967686c696768742d72656765782e676966" alt="" data-canonical-src="https://raw.githubusercontent.com/fortinmike/XcodeBoost/master/Images/highlight-regex.gif"></a></p>

<p><a href="https://camo.qiitausercontent.com/f20859249a923daddc25c8c6fcbc81858a888384/68747470733a2f2f7261772e67697468756275736572636f6e74656e742e636f6d2f666f7274696e6d696b652f58636f6465426f6f73742f6d61737465722f496d616765732f70617374652d776974686f75742d7265696e64656e742e676966" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/f20859249a923daddc25c8c6fcbc81858a888384/68747470733a2f2f7261772e67697468756275736572636f6e74656e742e636f6d2f666f7274696e6d696b652f58636f6465426f6f73742f6d61737465722f496d616765732f70617374652d776974686f75742d7265696e64656e742e676966" alt="" data-canonical-src="https://raw.githubusercontent.com/fortinmike/XcodeBoost/master/Images/paste-without-reindent.gif"></a></p>

<p><a href="https://camo.qiitausercontent.com/e86b948fe760e54be3d10f7387653342a3fdc3e4/68747470733a2f2f7261772e67697468756275736572636f6e74656e742e636f6d2f666f7274696e6d696b652f58636f6465426f6f73742f6d61737465722f496d616765732f6d656e752e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/e86b948fe760e54be3d10f7387653342a3fdc3e4/68747470733a2f2f7261772e67697468756275736572636f6e74656e742e636f6d2f666f7274696e6d696b652f58636f6465426f6f73742f6d61737465722f496d616765732f6d656e752e706e67" alt="" data-canonical-src="https://raw.githubusercontent.com/fortinmike/XcodeBoost/master/Images/menu.png"></a></p>

<h1>
<span id="エディタ--コード整形" class="fragment"></span><a href="#%E3%82%A8%E3%83%87%E3%82%A3%E3%82%BF--%E3%82%B3%E3%83%BC%E3%83%89%E6%95%B4%E5%BD%A2"><i class="fa fa-link"></i></a>エディタ – コード整形</h1>

<h2>
<span id="bbuncrustifyplugin-xcode" class="fragment"></span><a href="#bbuncrustifyplugin-xcode"><i class="fa fa-link"></i></a>BBUncrustifyPlugin-Xcode</h2>

<p>ソースコードを整形する</p>

<p><a href="https://github.com/benoitsan/BBUncrustifyPlugin-Xcode" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/benoitsan/BBUncrustifyPlugin-Xcode</a></p>

<h2>
<span id="clangformat" class="fragment"></span><a href="#clangformat"><i class="fa fa-link"></i></a>ClangFormat</h2>

<p>ClangFormat を使ってコードを整形する。</p>

<p><a href="https://github.com/travisjeffery/ClangFormat-Xcode" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/travisjeffery/ClangFormat-Xcode</a><br>
<a href="http://clang.llvm.org/docs/ClangFormat.html" class="autolink" rel="nofollow noopener" target="_blank">http://clang.llvm.org/docs/ClangFormat.html</a></p>

<p><a href="https://camo.qiitausercontent.com/c4f7ed63df7fbe495a4ed1924ec70c181732d82f/68747470733a2f2f7261772e6769746875622e636f6d2f7472617669736a6566666572792f436c616e67466f726d61742d58636f64652f6d61737465722f524541444d452f636c616e67666f726d61742d78636f64652d64656d6f2e676966" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/c4f7ed63df7fbe495a4ed1924ec70c181732d82f/68747470733a2f2f7261772e6769746875622e636f6d2f7472617669736a6566666572792f436c616e67466f726d61742d58636f64652f6d61737465722f524541444d452f636c616e67666f726d61742d78636f64652d64656d6f2e676966" alt="" data-canonical-src="https://raw.github.com/travisjeffery/ClangFormat-Xcode/master/README/clangformat-xcode-demo.gif"></a></p>

<h3>
<span id="clangformat-xcodeでobjective-cのコードを整形してみた" class="fragment"></span><a href="#clangformat-xcode%E3%81%A7objective-c%E3%81%AE%E3%82%B3%E3%83%BC%E3%83%89%E3%82%92%E6%95%B4%E5%BD%A2%E3%81%97%E3%81%A6%E3%81%BF%E3%81%9F"><i class="fa fa-link"></i></a>ClangFormat-XcodeでObjective-Cのコードを整形してみた</h3>

<p><a href="http://qiita.com/shzero5/items/9bb912c86d22a867bcb4" class="autolink" id="reference-60adf5362e22fe245706">http://qiita.com/shzero5/items/9bb912c86d22a867bcb4</a></p>

<p>導入からカスタマイズまでの方法がまとまっています。</p>

<h2>
<span id="helmet" class="fragment"></span><a href="#helmet"><i class="fa fa-link"></i></a>Helmet</h2>

<p>Apple のフレームワークに含まれるヘッダーファイルを誤って編集できないように編集不可にする。</p>

<p><a href="https://github.com/brianmichel/Helmet" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/brianmichel/Helmet</a></p>

<h2>
<span id="xalign" class="fragment"></span><a href="#xalign"><i class="fa fa-link"></i></a>XAlign</h2>

<p>コードを <code>=</code> で揃えたりする。</p>

<p><a href="https://github.com/qfish/XAlign" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/qfish/XAlign</a></p>

<p><a href="https://camo.qiitausercontent.com/29a7750693037906c0db01c446880c477de9bf7a/68747470733a2f2f63616d6f2e67697468756275736572636f6e74656e742e636f6d2f373937336330653335326231663931653365666535623335353063666635646639376634353839612f3638373437343730336132663266373136363639326537333638326635383431366336393637366532663639366436313637363537333266363537313735363136633265363736393636" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/29a7750693037906c0db01c446880c477de9bf7a/68747470733a2f2f63616d6f2e67697468756275736572636f6e74656e742e636f6d2f373937336330653335326231663931653365666535623335353063666635646639376634353839612f3638373437343730336132663266373136363639326537333638326635383431366336393637366532663639366436313637363537333266363537313735363136633265363736393636" alt="GitHubより" data-canonical-src="https://camo.githubusercontent.com/7973c0e352b1f91e3efe5b3550cff5df97f4589a/687474703a2f2f7166692e73682f58416c69676e2f696d616765732f657175616c2e676966"></a></p>

<h1>
<span id="エディタ--表示系" class="fragment"></span><a href="#%E3%82%A8%E3%83%87%E3%82%A3%E3%82%BF--%E8%A1%A8%E7%A4%BA%E7%B3%BB"><i class="fa fa-link"></i></a>エディタ – 表示系</h1>

<h2>
<span id="adjustfontsize" class="fragment"></span><a href="#adjustfontsize"><i class="fa fa-link"></i></a>AdjustFontSize</h2>

<p><code>⌘ +</code> <code>⌘ -</code> でフォントサイズを変更できるようにする。使ってみたが、動作が割と重い。</p>

<p><a href="https://github.com/zats/AdjustFontSize-Xcode-Plugin" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/zats/AdjustFontSize-Xcode-Plugin</a></p>

<h2>
<span id="autoresizemask-for-xcode" class="fragment"></span><a href="#autoresizemask-for-xcode"><i class="fa fa-link"></i></a>AutoresizeMask for Xcode</h2>

<p>UIViewAutoresizingMask の記述にフォーカスを当てると、現在の状態を図で表示する。ただし、IB のようにクリックしてコードが反映される機能はない。</p>

<p>メニューバー <code>Edit</code> &gt; <code>Show autoresizing masks…</code> で有効になる。</p>

<p><a href="https://github.com/garnett/AutoresizeMask-for-Xcode" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/garnett/AutoresizeMask-for-Xcode</a></p>

<p><a href="https://camo.qiitausercontent.com/f44bc5fc703459dc46983e12534eb0dcc67c656c/68747470733a2f2f7261772e6769746875622e636f6d2f6761726e6574742f4175746f726573697a654d61736b2d666f722d58636f64652f6d61737465722f6578616d706c652e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/f44bc5fc703459dc46983e12534eb0dcc67c656c/68747470733a2f2f7261772e6769746875622e636f6d2f6761726e6574742f4175746f726573697a654d61736b2d666f722d58636f64652f6d61737465722f6578616d706c652e706e67" alt="" data-canonical-src="https://raw.github.com/garnett/AutoresizeMask-for-Xcode/master/example.png"></a></p>

<h2>
<span id="backlight" class="fragment"></span><a href="#backlight"><i class="fa fa-link"></i></a>Backlight</h2>

<p>現在行の背景色を描画する。</p>

<p><a href="https://github.com/limejelly/Backlight-for-XCode" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/limejelly/Backlight-for-XCode</a></p>

<p><a href="https://camo.qiitausercontent.com/d0602d77744a0810e097d708b57b66c065455b45/68747470733a2f2f7261772e67697468756275736572636f6e74656e742e636f6d2f6c696d656a656c6c792f4261636b6c696768742d666f722d58436f64652f6d61737465722f73637265656e73686f742e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/d0602d77744a0810e097d708b57b66c065455b45/68747470733a2f2f7261772e67697468756275736572636f6e74656e742e636f6d2f6c696d656a656c6c792f4261636b6c696768742d666f722d58436f64652f6d61737465722f73637265656e73686f742e706e67" alt="" data-canonical-src="https://raw.githubusercontent.com/limejelly/Backlight-for-XCode/master/screenshot.png"></a></p>

<h2>
<span id="blockjump" class="fragment"></span><a href="#blockjump"><i class="fa fa-link"></i></a>BlockJump</h2>

<p>ブロック単位でカーソル移動する。</p>

<p><a href="https://github.com/tyeen/BlockJump" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/tyeen/BlockJump</a></p>

<p><a href="https://camo.qiitausercontent.com/ee131a443d27262409ef9fc7e794d6d2e38ef444/68747470733a2f2f63616d6f2e67697468756275736572636f6e74656e742e636f6d2f626366323534376264393035303466636665346634636563643362633861366633313136316535352f363837343734373037333361326632663732363137373265363736393734363837353632326536333666366432663734373936353635366532663432366336663633366234613735366437303266366436313733373436353732326637333633373236353635366535663732363536333666373236343265363736393636" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/ee131a443d27262409ef9fc7e794d6d2e38ef444/68747470733a2f2f63616d6f2e67697468756275736572636f6e74656e742e636f6d2f626366323534376264393035303466636665346634636563643362633861366633313136316535352f363837343734373037333361326632663732363137373265363736393734363837353632326536333666366432663734373936353635366532663432366336663633366234613735366437303266366436313733373436353732326637333633373236353635366535663732363536333666373236343265363736393636" alt="" data-canonical-src="https://camo.githubusercontent.com/bcf2547bd90504fcfe4f4cecd3bc8a6f31161e55/68747470733a2f2f7261772e6769746875622e636f6d2f747965656e2f426c6f636b4a756d702f6d61737465722f73637265656e5f7265636f72642e676966"></a></p>

<h2>
<span id="scxcodeeditorinset" class="fragment"></span><a href="#scxcodeeditorinset"><i class="fa fa-link"></i></a>SCXcodeEditorInset</h2>

<p>エディタの最下端の領域に余白を作る。</p>

<p><a href="https://github.com/stefanceriu/SCXcodeEditorInset" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/stefanceriu/SCXcodeEditorInset</a></p>

<p><a href="https://camo.qiitausercontent.com/758b87774fe14c0127debe6769e4c4120cb1fab7/68747470733a2f2f63616d6f2e67697468756275736572636f6e74656e742e636f6d2f313863363735346136323738363330366235623639613234376437363863363238346463643064312f3638373437343730373333613266326636343663326536343732366637303632366637383735373336353732363336663665373436353665373432653633366636643266373532663331333233373334333833323330333132663532363536333666373236343639366536373733326635333433353836333666363436353435363436393734366637323439366537333635373432663533343335383633366636343635343536343639373436663732343936653733363537343265373036653637" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/758b87774fe14c0127debe6769e4c4120cb1fab7/68747470733a2f2f63616d6f2e67697468756275736572636f6e74656e742e636f6d2f313863363735346136323738363330366235623639613234376437363863363238346463643064312f3638373437343730373333613266326636343663326536343732366637303632366637383735373336353732363336663665373436353665373432653633366636643266373532663331333233373334333833323330333132663532363536333666373236343639366536373733326635333433353836333666363436353435363436393734366637323439366537333635373432663533343335383633366636343635343536343639373436663732343936653733363537343265373036653637" alt="" data-canonical-src="https://camo.githubusercontent.com/18c6754a62786306b5b69a247d768c6284dcd0d1/68747470733a2f2f646c2e64726f70626f7875736572636f6e74656e742e636f6d2f752f31323734383230312f5265636f7264696e67732f534358636f6465456469746f72496e7365742f534358636f6465456469746f72496e7365742e706e67"></a></p>

<h2>
<span id="scxcodeminimap" class="fragment"></span><a href="#scxcodeminimap"><i class="fa fa-link"></i></a>SCXcodeMinimap</h2>

<p>Sublime Text のようなプレビュー機能を追加する。</p>

<p><a href="https://github.com/stefanceriu/SCXcodeMiniMap" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/stefanceriu/SCXcodeMiniMap</a></p>

<p><a href="https://camo.qiitausercontent.com/496d1ebd92ee05cf208e10c84ef3893a2095ff6c/68747470733a2f2f63616d6f2e67697468756275736572636f6e74656e742e636f6d2f623330313963333261633037313530353639333532613634623133363366373866326435653332642f363837343734373037333361326632663634366332653634373236663730363236663738373537333635373236333666366537343635366537343265363336663664326637353266333133323337333433383332333033313266353334333538363336663634363534643639366536393464363137303266373633323265333032663533343335383633366636343635346436393665363936643631373032353332333037363332326533303264333033333265373036653637" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/496d1ebd92ee05cf208e10c84ef3893a2095ff6c/68747470733a2f2f63616d6f2e67697468756275736572636f6e74656e742e636f6d2f623330313963333261633037313530353639333532613634623133363366373866326435653332642f363837343734373037333361326632663634366332653634373236663730363236663738373537333635373236333666366537343635366537343265363336663664326637353266333133323337333433383332333033313266353334333538363336663634363534643639366536393464363137303266373633323265333032663533343335383633366636343635346436393665363936643631373032353332333037363332326533303264333033333265373036653637" alt="" data-canonical-src="https://camo.githubusercontent.com/b3019c32ac07150569352a64b1363f78f2d5e32d/68747470733a2f2f646c2e64726f70626f7875736572636f6e74656e742e636f6d2f752f31323734383230312f534358636f64654d696e694d61702f76322e302f534358636f64654d696e696d617025323076322e302d30332e706e67"></a></p>

<h2>
<span id="tocassetcatalogbackground" class="fragment"></span><a href="#tocassetcatalogbackground"><i class="fa fa-link"></i></a>TOCAssetCatalogBackground</h2>

<p>xcassets の編集画面の背景色を黒くすることができるスイッチを追加する。（白系のアイコンが見やすくなる）</p>

<p><a href="https://github.com/toco/TOCAssetCatalogBackground" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/toco/TOCAssetCatalogBackground</a></p>

<p><a href="https://camo.qiitausercontent.com/8011873f7bb8d973609ccebf0beb765276523997/68747470733a2f2f7261772e67697468756275736572636f6e74656e742e636f6d2f746f636f2f544f434173736574436174616c6f674261636b67726f756e642f6d61737465722f706c7567696e2e676966" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/8011873f7bb8d973609ccebf0beb765276523997/68747470733a2f2f7261772e67697468756275736572636f6e74656e742e636f6d2f746f636f2f544f434173736574436174616c6f674261636b67726f756e642f6d61737465722f706c7567696e2e676966" alt="" data-canonical-src="https://raw.githubusercontent.com/toco/TOCAssetCatalogBackground/master/plugin.gif"></a></p>

<h2>
<span id="polychromatic" class="fragment"></span><a href="#polychromatic"><i class="fa fa-link"></i></a>Polychromatic</h2>

<p>プロパティ、ivars, ローカル変数ごとに色を変える事ができる。</p>

<p><a href="https://github.com/kolinkrewinkel/Polychromatic" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/kolinkrewinkel/Polychromatic</a></p>

<p>標準:<br>
<a href="https://camo.qiitausercontent.com/a95271e633bcac8646502d56a1fedbe976a8238b/68747470733a2f2f63616d6f2e67697468756275736572636f6e74656e742e636f6d2f623866363562643362626334356338623439623266396139333934663961653862373231373462312f36383734373437303733336132663266363636393663363537333265363137303730326536653635373432663332333037373734363236373538353435323265373036653637" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/a95271e633bcac8646502d56a1fedbe976a8238b/68747470733a2f2f63616d6f2e67697468756275736572636f6e74656e742e636f6d2f623866363562643362626334356338623439623266396139333934663961653862373231373462312f36383734373437303733336132663266363636393663363537333265363137303730326536653635373432663332333037373734363236373538353435323265373036653637" alt="標準" data-canonical-src="https://camo.githubusercontent.com/b8f65bd3bbc45c8b49b2f9a9394f9ae8b72174b1/68747470733a2f2f66696c65732e6170702e6e65742f3230777462675854522e706e67"></a></p>

<p>Polychromatic:<br>
<a href="https://camo.qiitausercontent.com/14412ab8df8757c13d4b8ed5b7e598fc51f5df53/68747470733a2f2f63616d6f2e67697468756275736572636f6e74656e742e636f6d2f363239303939633165353235303933646132613966646466303936343139383530383761653132322f36383734373437303733336132663266363636393663363537333265363137303730326536653635373432663332333037373663363636613637363534393265373036653637" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/14412ab8df8757c13d4b8ed5b7e598fc51f5df53/68747470733a2f2f63616d6f2e67697468756275736572636f6e74656e742e636f6d2f363239303939633165353235303933646132613966646466303936343139383530383761653132322f36383734373437303733336132663266363636393663363537333265363137303730326536653635373432663332333037373663363636613637363534393265373036653637" alt="" data-canonical-src="https://camo.githubusercontent.com/629099c1e525093da2a9fddf09641985087ae122/68747470733a2f2f66696c65732e6170702e6e65742f3230776c666a6765492e706e67"></a></p>

<h2>
<span id="xtodo" class="fragment"></span><a href="#xtodo"><i class="fa fa-link"></i></a>XToDo</h2>

<p><code>TODO</code>,<code>FIXME</code>,<code>???</code>,<code>!!!!</code> がついたコメントを一覧表示する。</p>

<p><a href="https://github.com/trawor/XToDo" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/trawor/XToDo</a></p>

<p><a href="https://camo.qiitausercontent.com/b528a1062efc8632bbdeffc2202c50024445d6c3/68747470733a2f2f7261772e6769746875622e636f6d2f747261776f722f58546f446f2f6d61737465722f73637265656e73686f74732f312e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/b528a1062efc8632bbdeffc2202c50024445d6c3/68747470733a2f2f7261772e6769746875622e636f6d2f747261776f722f58546f446f2f6d61737465722f73637265656e73686f74732f312e706e67" alt="" data-canonical-src="https://raw.github.com/trawor/XToDo/master/screenshots/1.png"></a></p>

<h2>
<span id="xcode4_beginning_of_line" class="fragment"></span><a href="#xcode4_beginning_of_line"><i class="fa fa-link"></i></a>Xcode4_beginning_of_line</h2>

<p>HOMEキーでホワイトスペースのない最初の行へ移動する。</p>

<p><a href="https://github.com/insanehunter/XCode4_beginning_of_line" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/insanehunter/XCode4_beginning_of_line</a></p>

<h1>
<span id="ローカライズ" class="fragment"></span><a href="#%E3%83%AD%E3%83%BC%E3%82%AB%E3%83%A9%E3%82%A4%E3%82%BA"><i class="fa fa-link"></i></a>ローカライズ</h1>

<h2>
<span id="lin" class="fragment"></span><a href="#lin"><i class="fa fa-link"></i></a>Lin</h2>

<p>NSLocalizedString の入力を楽する。</p>

<p><a href="https://github.com/questbeat/Lin" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/questbeat/Lin</a><br>
<a href="https://github.com/questbeat/Lin-Xcode5" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/questbeat/Lin-Xcode5</a></p>

<p><a href="https://camo.qiitausercontent.com/939467be86bf194b1363d5f0a5dcffb5a0060a24/68747470733a2f2f63616d6f2e67697468756275736572636f6e74656e742e636f6d2f623862633532393361666535653866316363623330373731306133386564353839323338383365372f3638373437343730373333613266326637323631373732653637363937343638373536323265363336663664326637313735363537333734363236353631373432663463363936653266366436313733373436353732326637333633373236353635366537333638366637343265363736393636" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/939467be86bf194b1363d5f0a5dcffb5a0060a24/68747470733a2f2f63616d6f2e67697468756275736572636f6e74656e742e636f6d2f623862633532393361666535653866316363623330373731306133386564353839323338383365372f3638373437343730373333613266326637323631373732653637363937343638373536323265363336663664326637313735363537333734363236353631373432663463363936653266366436313733373436353732326637333633373236353635366537333638366637343265363736393636" alt="" data-canonical-src="https://camo.githubusercontent.com/b8bc5293afe5e8f1ccb307710a38ed58923883e7/68747470733a2f2f7261772e6769746875622e636f6d2f7175657374626561742f4c696e2f6d61737465722f73637265656e73686f742e676966"></a></p>

<h2>
<span id="xcode-quick-localization" class="fragment"></span><a href="#xcode-quick-localization"><i class="fa fa-link"></i></a>Xcode Quick Localization</h2>

<p>NSLocalizedString の入力を楽にする。</p>

<p><a href="https://github.com/nanaimostudio/Xcode-Quick-Localization" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/nanaimostudio/Xcode-Quick-Localization</a></p>

<h2>
<span id="xiblingual" class="fragment"></span><a href="#xiblingual"><i class="fa fa-link"></i></a>Xiblingual</h2>

<p>xib, StoryBoard のローカライズを補助する。</p>

<p><a href="https://github.com/hetima/Xiblingual" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/hetima/Xiblingual</a></p>

<h3>
<span id="動作環境-1" class="fragment"></span><a href="#%E5%8B%95%E4%BD%9C%E7%92%B0%E5%A2%83-1"><i class="fa fa-link"></i></a>動作環境</h3>

<ul>
<li>Xcode 5.1</li>
</ul>

<p><a href="https://camo.qiitausercontent.com/d0d13725f00ef1496cb6d25497b7bbfd63f2d7b9/68747470733a2f2f63616d6f2e67697468756275736572636f6e74656e742e636f6d2f343133363165616563646638343230656336343032616630323230633832653930666639373430342f36383734373437303361326632663638363537343639366436313265363336663664326637383639363236633639366536373735363136633266333033313265363736393636" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/d0d13725f00ef1496cb6d25497b7bbfd63f2d7b9/68747470733a2f2f63616d6f2e67697468756275736572636f6e74656e742e636f6d2f343133363165616563646638343230656336343032616630323230633832653930666639373430342f36383734373437303361326632663638363537343639366436313265363336663664326637383639363236633639366536373735363136633266333033313265363736393636" alt="" data-canonical-src="https://camo.githubusercontent.com/41361eaecdf8420ec6402af0220c82e90ff97404/687474703a2f2f686574696d612e636f6d2f7869626c696e6775616c2f30312e676966"></a></p>

<p><a href="https://camo.qiitausercontent.com/b4d412202fdea5d7f3ac4159508a7f828eda5e81/68747470733a2f2f63616d6f2e67697468756275736572636f6e74656e742e636f6d2f643464653366356235633463643131363939333165323632376266323664346466336335353833372f36383734373437303361326632663638363537343639366436313265363336663664326637383639363236633639366536373735363136633266333033323265363736393636" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/b4d412202fdea5d7f3ac4159508a7f828eda5e81/68747470733a2f2f63616d6f2e67697468756275736572636f6e74656e742e636f6d2f643464653366356235633463643131363939333165323632376266323664346466336335353833372f36383734373437303361326632663638363537343639366436313265363336663664326637383639363236633639366536373735363136633266333033323265363736393636" alt="" data-canonical-src="https://camo.githubusercontent.com/d4de3f5b5c4cd1169931e2627bf26d4df3c55837/687474703a2f2f686574696d612e636f6d2f7869626c696e6775616c2f30322e676966"></a></p>

<h1>
<span id="vim" class="fragment"></span><a href="#vim"><i class="fa fa-link"></i></a>Vim</h1>

<h2>
<span id="xvim" class="fragment"></span><a href="#xvim"><i class="fa fa-link"></i></a>XVim</h2>

<p>vim キーバインド</p>

<p><a href="https://github.com/JugglerShu/XVim" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/JugglerShu/XVim</a></p>

<h2>
<span id="vixcode" class="fragment"></span><a href="#vixcode"><i class="fa fa-link"></i></a>viXcode</h2>

<p>vim キーバインド（SIMBL プラグイン）</p>

<p><a href="https://github.com/robertkrimen/viXcode" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/robertkrimen/viXcode</a></p>

<h2>
<span id="vicious-for-xcode" class="fragment"></span><a href="#vicious-for-xcode"><i class="fa fa-link"></i></a>Vicious for Xcode</h2>

<p><a href="https://camo.qiitausercontent.com/7e5b7463fc50590fc7d509744cb862d224ae79ff/687474703a2f2f766963696f75736170702e636f6d2f696d616765732f666561747572652d6d6f64652e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/7e5b7463fc50590fc7d509744cb862d224ae79ff/687474703a2f2f766963696f75736170702e636f6d2f696d616765732f666561747572652d6d6f64652e706e67" alt="" data-canonical-src="http://viciousapp.com/images/feature-mode.png"></a></p>

<p><a href="https://camo.qiitausercontent.com/af99d1194a08da67e9140dcd3b7e26af159ff826/687474703a2f2f766963696f75736170702e636f6d2f696d616765732f666561747572652d696e7075742e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/af99d1194a08da67e9140dcd3b7e26af159ff826/687474703a2f2f766963696f75736170702e636f6d2f696d616765732f666561747572652d696e7075742e706e67" alt="" data-canonical-src="http://viciousapp.com/images/feature-input.png"></a></p>

<p><a href="http://viciousapp.com" class="autolink" rel="nofollow noopener" target="_blank">http://viciousapp.com</a></p>

<h1>
<span id="interface-builder" class="fragment"></span><a href="#interface-builder"><i class="fa fa-link"></i></a>Interface Builder</h1>

<h2>
<span id="rrconstraintsplugin" class="fragment"></span><a href="#rrconstraintsplugin"><i class="fa fa-link"></i></a>RRConstraintsPlugin</h2>

<p>Interface Builder に AutoLayout 関連の機能を追加するらしい。</p>

<p><a href="https://github.com/RolandasRazma/RRConstraintsPlugin" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/RolandasRazma/RRConstraintsPlugin</a></p>

<h2>
<span id="moarfonts" class="fragment"></span><a href="#moarfonts"><i class="fa fa-link"></i></a>MoarFonts</h2>

<p>カスタムフォントのプレビューができる。有料。</p>

<p><a href="http://pitaya.ch/moarfonts/" class="autolink" rel="nofollow noopener" target="_blank">http://pitaya.ch/moarfonts/</a></p>

<p>解説記事<br>
<a href="http://d.hatena.ne.jp/shu223/20140315/1395050662" class="autolink" rel="nofollow noopener" target="_blank">http://d.hatena.ne.jp/shu223/20140315/1395050662</a></p>

<p><a href="https://camo.qiitausercontent.com/e13bbe533e7d42d90bd4137ed4815b439abdd7ec/687474703a2f2f7069746179612e63682f6d6f6172666f6e74732f53637265656e73686f742e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/e13bbe533e7d42d90bd4137ed4815b439abdd7ec/687474703a2f2f7069746179612e63682f6d6f6172666f6e74732f53637265656e73686f742e706e67" alt="" data-canonical-src="http://pitaya.ch/moarfonts/Screenshot.png"></a></p>

<h1>
<span id="コンソール" class="fragment"></span><a href="#%E3%82%B3%E3%83%B3%E3%82%BD%E3%83%BC%E3%83%AB"><i class="fa fa-link"></i></a>コンソール</h1>

<h2>
<span id="bbudebuggertuckaway" class="fragment"></span><a href="#bbudebuggertuckaway"><i class="fa fa-link"></i></a>BBUDebuggerTuckAway</h2>

<p>デバッグ中に文字入力を開始したらデバッガーパネルを自動で閉じるようにする。<br>
[DBSmartPanels] にも類似機能がある。</p>

<p><a href="https://github.com/neonichu/BBUDebuggerTuckAway" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/neonichu/BBUDebuggerTuckAway</a></p>

<p><a href="https://camo.qiitausercontent.com/0374e6b1b0b6cbddab12ff40c15bae81b8445f8d/68747470733a2f2f6769746875622e636f6d2f6e656f6e696368752f42425544656275676765725475636b417761792f7261772f6d61737465722f706c7567696e2e676966" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/0374e6b1b0b6cbddab12ff40c15bae81b8445f8d/68747470733a2f2f6769746875622e636f6d2f6e656f6e696368752f42425544656275676765725475636b417761792f7261772f6d61737465722f706c7567696e2e676966" alt="" data-canonical-src="https://github.com/neonichu/BBUDebuggerTuckAway/raw/master/plugin.gif"></a></p>

<h2>
<span id="xcode-auto-close-debug" class="fragment"></span><a href="#xcode-auto-close-debug"><i class="fa fa-link"></i></a>Xcode Auto Close Debug</h2>

<p>デバッグが終わったらデバッグパネルを自動で閉じるようにする。</p>

<p><a href="https://github.com/larsxschneider/XcodeAutoCloseDebug" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/larsxschneider/XcodeAutoCloseDebug</a></p>

<h2>
<span id="xcaddedmarkup" class="fragment"></span><a href="#xcaddedmarkup"><i class="fa fa-link"></i></a>XCAddedMarkup</h2>

<p>コンソールに画像を表示できるようにする。</p>

<p><a href="https://github.com/mikr/XcAddedMarkup" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/mikr/XcAddedMarkup</a><br>
<a href="https://camo.qiitausercontent.com/4f43e9c3eaaa43eed42e0ad8b6466f72c7cc1042/68747470733a2f2f7261772e6769746875622e636f6d2f6d696b722f586341646465644d61726b75702f6d61737465722f696d616765732f636f6e736f6c652e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/4f43e9c3eaaa43eed42e0ad8b6466f72c7cc1042/68747470733a2f2f7261772e6769746875622e636f6d2f6d696b722f586341646465644d61726b75702f6d61737465722f696d616765732f636f6e736f6c652e706e67" alt="" data-canonical-src="https://raw.github.com/mikr/XcAddedMarkup/master/images/console.png"></a></p>

<h2>
<span id="xcodecolors" class="fragment"></span><a href="#xcodecolors"><i class="fa fa-link"></i></a>XcodeColors</h2>

<p>コンソールに着色する。SIMBL プラグインとしても動作可能。</p>

<p><a href="http://deepitpro.com/en/articles/XcodeColors/info/index.shtml" class="autolink" rel="nofollow noopener" target="_blank">http://deepitpro.com/en/articles/XcodeColors/info/index.shtml</a><br>
<a href="https://github.com/robbiehanson/XcodeColors" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/robbiehanson/XcodeColors</a></p>

<div class="code-frame" data-lang="objectivec">
<div class="code-lang"><span class="bold">使い方</span></div>
<div class="highlight"><pre><span></span><span class="bp">NSString</span> <span class="o">*</span><span class="n">string</span> <span class="o">=</span> <span class="s">@"文字列に着色"</span><span class="p">;</span>
<span class="n">NSLog</span><span class="p">(</span><span class="s">@"</span><span class="se">\033</span><span class="s">["</span> <span class="s">@"bg80,10,12;"</span> <span class="s">@"</span><span class="se">\033</span><span class="s">["</span> <span class="s">@"fg255,255,255;"</span> <span class="s">@"%@"</span> <span class="s">@"</span><span class="se">\033</span><span class="s">[;"</span><span class="p">,</span> <span class="n">string</span><span class="p">);</span>
</pre></div>
</div>

<h2>
<span id="xlog" class="fragment"></span><a href="#xlog"><i class="fa fa-link"></i></a>XLog</h2>

<p>コンソールに着色する。</p>

<p><a href="https://github.com/Maxwin-z/XLog" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/Maxwin-z/XLog</a></p>

<p><a href="https://camo.qiitausercontent.com/3a1acf8d938331e43ef0de2a2d2e61e2ef9cfb69/68747470733a2f2f7261772e6769746875622e636f6d2f4d617877696e2d7a2f584c6f672f6d61737465722f53637265656e53686f742e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/3a1acf8d938331e43ef0de2a2d2e61e2ef9cfb69/68747470733a2f2f7261772e6769746875622e636f6d2f4d617877696e2d7a2f584c6f672f6d61737465722f53637265656e53686f742e706e67" alt="GitHubより" data-canonical-src="https://raw.github.com/Maxwin-z/XLog/master/ScreenShot.png"></a></p>

<h2>
<span id="betterconsole" class="fragment"></span><a href="#betterconsole"><i class="fa fa-link"></i></a>BetterConsole</h2>

<p>コンソールに出力されたファイルパスをクリックできるようにする。</p>

<p><a href="https://camo.qiitausercontent.com/2d4ce3f0f16959750dd0cdbf91f98bef2899395f/68747470733a2f2f7261772e6769746875622e636f6d2f637070666f726c6966652f426574746572436f6e736f6c652f6d61737465722f73637265656e73686f742e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/2d4ce3f0f16959750dd0cdbf91f98bef2899395f/68747470733a2f2f7261772e6769746875622e636f6d2f637070666f726c6966652f426574746572436f6e736f6c652f6d61737465722f73637265656e73686f742e706e67" alt="GitHubより" data-canonical-src="https://raw.github.com/cppforlife/BetterConsole/master/screenshot.png"></a></p>

<p><a href="https://github.com/cppforlife/BetterConsole" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/cppforlife/BetterConsole</a></p>

<h2>
<span id="debugsearch" class="fragment"></span><a href="#debugsearch"><i class="fa fa-link"></i></a>DebugSearch</h2>

<p>コンソールの出力をフィルタリングできるようにする。</p>

<p><a href="https://github.com/maranas/DebugSearch" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/maranas/DebugSearch</a></p>

<h2>
<span id="pluginconsole" class="fragment"></span><a href="#pluginconsole"><i class="fa fa-link"></i></a>PluginConsole</h2>

<p>プラグインのデバッグ向けのコンソール拡張？</p>

<p><a href="https://github.com/AlexIzh/PluginConsole" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/AlexIzh/PluginConsole</a></p>

<p>Xcode 4<br>
<a href="https://camo.qiitausercontent.com/95a953ce3b1ae8d044652f70de53c0e793d24d5e/68747470733a2f2f6769746875622d63616d6f2e676c6f62616c2e73736c2e666173746c792e6e65742f383933363330313137626265306363363932653835356535353339623031613862646662626536362f36383734373437303361326632663633366332653663373932663639366436313637363532663332353933303535333137343331366133313463333234313266353336333732363536353665323533323330353336383666373432353332333033323330333133333264333033353264333133363235333233303631373432353332333033323265333433333265333433353265373036653637" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/95a953ce3b1ae8d044652f70de53c0e793d24d5e/68747470733a2f2f6769746875622d63616d6f2e676c6f62616c2e73736c2e666173746c792e6e65742f383933363330313137626265306363363932653835356535353339623031613862646662626536362f36383734373437303361326632663633366332653663373932663639366436313637363532663332353933303535333137343331366133313463333234313266353336333732363536353665323533323330353336383666373432353332333033323330333133333264333033353264333133363235333233303631373432353332333033323265333433333265333433353265373036653637" alt="" data-canonical-src="https://github-camo.global.ssl.fastly.net/893630117bbe0cc692e855e5539b01a8bdfbbe66/687474703a2f2f636c2e6c792f696d6167652f325930553174316a314c32412f53637265656e25323053686f74253230323031332d30352d31362532306174253230322e34332e34352e706e67"></a></p>

<p><a href="https://camo.qiitausercontent.com/f37254f1651fb3ab3eca8a629168ddad6a6abb89/68747470733a2f2f6769746875622d63616d6f2e676c6f62616c2e73736c2e666173746c792e6e65742f343661616362643837353831653731343334383263376662643832376666393762323938373631362f36383734373437303361326632663633366332653663373932663639366436313637363532663330343733323464333035323330373133343334333335393266353336333732363536353665323533323330353336383666373432353332333033323330333133333264333033353264333133363235333233303631373432353332333033333265333033363265333233313265373036653637" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/f37254f1651fb3ab3eca8a629168ddad6a6abb89/68747470733a2f2f6769746875622d63616d6f2e676c6f62616c2e73736c2e666173746c792e6e65742f343661616362643837353831653731343334383263376662643832376666393762323938373631362f36383734373437303361326632663633366332653663373932663639366436313637363532663330343733323464333035323330373133343334333335393266353336333732363536353665323533323330353336383666373432353332333033323330333133333264333033353264333133363235333233303631373432353332333033333265333033363265333233313265373036653637" alt="" data-canonical-src="https://github-camo.global.ssl.fastly.net/46aacbd87581e7143482c7fbd827ff97b2987616/687474703a2f2f636c2e6c792f696d6167652f3047324d30523071343433592f53637265656e25323053686f74253230323031332d30352d31362532306174253230332e30362e32312e706e67"></a></p>

<p>Xcode 5<br>
<a href="https://camo.qiitausercontent.com/100c778a5a57e5bef5aa5cf6c20610b578727a2a/68747470733a2f2f6769746875622d63616d6f2e676c6f62616c2e73736c2e666173746c792e6e65742f353935303863653563623965366638636236633739666565323465383266643832653361613732362f363837343734373033613266326636333663326536633739326636393664363136373635326633313434333033303330343833313434333337343332366132663533363337323635363536653235333233303533363836663734323533323330333233303331333332643330333932643332333432353332333036313734323533323330333233333265333333373265333233373265373036653637" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/100c778a5a57e5bef5aa5cf6c20610b578727a2a/68747470733a2f2f6769746875622d63616d6f2e676c6f62616c2e73736c2e666173746c792e6e65742f353935303863653563623965366638636236633739666565323465383266643832653361613732362f363837343734373033613266326636333663326536633739326636393664363136373635326633313434333033303330343833313434333337343332366132663533363337323635363536653235333233303533363836663734323533323330333233303331333332643330333932643332333432353332333036313734323533323330333233333265333333373265333233373265373036653637" alt="GitHubより" data-canonical-src="https://github-camo.global.ssl.fastly.net/59508ce5cb9e6f8cb6c79fee24e82fd82e3aa726/687474703a2f2f636c2e6c792f696d6167652f31443030304831443374326a2f53637265656e25323053686f74253230323031332d30392d3234253230617425323032332e33372e32372e706e67"></a></p>

<h2>
<span id="mclog" class="fragment"></span><a href="#mclog"><i class="fa fa-link"></i></a>MCLog</h2>

<p>コンソールの出力をフィルタリングできるようにする。</p>

<p><a href="https://github.com/yuhua-chen/MCLog" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/yuhua-chen/MCLog</a></p>

<p><a href="https://camo.qiitausercontent.com/f4483483eb3c6de888d6febc04528f68cbe20db8/68747470733a2f2f63616d6f2e67697468756275736572636f6e74656e742e636f6d2f656362646562643031616633363663396137643363336430383530613136346631323730333061392f36383734373437303733336132663266373236313737363736393734363837353632326536333666366432663739373536383735363132643633363836353665326634643433346336663637326636643631373337343635373232663464343334633666363735333633373236353635366537333638366637343265363736393636" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/f4483483eb3c6de888d6febc04528f68cbe20db8/68747470733a2f2f63616d6f2e67697468756275736572636f6e74656e742e636f6d2f656362646562643031616633363663396137643363336430383530613136346631323730333061392f36383734373437303733336132663266373236313737363736393734363837353632326536333666366432663739373536383735363132643633363836353665326634643433346336663637326636643631373337343635373232663464343334633666363735333633373236353635366537333638366637343265363736393636" alt="" data-canonical-src="https://camo.githubusercontent.com/ecbdebd01af366c9a7d3c3d0850a164f127030a9/68747470733a2f2f7261776769746875622e636f6d2f79756875612d6368656e2f4d434c6f672f6d61737465722f4d434c6f6753637265656e73686f742e676966"></a></p>

<h1>
<span id="ナビゲーション" class="fragment"></span><a href="#%E3%83%8A%E3%83%93%E3%82%B2%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3"><i class="fa fa-link"></i></a>ナビゲーション</h1>

<h2>
<span id="bbufullissuenavigator" class="fragment"></span><a href="#bbufullissuenavigator"><i class="fa fa-link"></i></a>BBUFullIssueNavigator</h2>

<p>Issue Navigator のセルを展開して表示する。</p>

<p><a href="https://github.com/neonichu/BBUFullIssueNavigator" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/neonichu/BBUFullIssueNavigator</a></p>

<p><a href="https://camo.qiitausercontent.com/cacc99a29ed5fc8e0d6f45f3685c361c4bfd20a9/68747470733a2f2f7261772e67697468756275736572636f6e74656e742e636f6d2f6e656f6e696368752f42425546756c6c49737375654e6176696761746f722f6d61737465722f73637265656e73686f742e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/cacc99a29ed5fc8e0d6f45f3685c361c4bfd20a9/68747470733a2f2f7261772e67697468756275736572636f6e74656e742e636f6d2f6e656f6e696368752f42425546756c6c49737375654e6176696761746f722f6d61737465722f73637265656e73686f742e706e67" alt="" data-canonical-src="https://raw.githubusercontent.com/neonichu/BBUFullIssueNavigator/master/screenshot.png"></a></p>

<h2>
<span id="codepilot" class="fragment"></span><a href="#codepilot"><i class="fa fa-link"></i></a>CodePilot</h2>

<p>検索・ナビゲーション機能拡張</p>

<p><a href="http://codepilot.cc" class="autolink" rel="nofollow noopener" target="_blank">http://codepilot.cc</a></p>

<p><a href="https://camo.qiitausercontent.com/afd6847ba21ffa47fb262efbcec78eaca9a5f21f/687474703a2f2f636f646570696c6f742e63632f696d672f6269672f322e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/afd6847ba21ffa47fb262efbcec78eaca9a5f21f/687474703a2f2f636f646570696c6f742e63632f696d672f6269672f322e706e67" alt="" data-canonical-src="http://codepilot.cc/img/big/2.png"></a></p>

<h2>
<span id="dash-plugin-for-xcode" class="fragment"></span><a href="#dash-plugin-for-xcode"><i class="fa fa-link"></i></a>Dash Plugin for Xcode</h2>

<p>option + click のときに Dash で検索できるようにする。Dash.app が必要。</p>

<p><a href="https://github.com/Kapeli/Dash-Plugin-for-Xcode" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/Kapeli/Dash-Plugin-for-Xcode</a></p>

<h2>
<span id="kkhighlightrecentplugin" class="fragment"></span><a href="#kkhighlightrecentplugin"><i class="fa fa-link"></i></a>KKHighlightRecentPlugin</h2>

<p>直近に開いたファイルをナビゲーター上でハイライト表示する。新しい順に色が濃くなる。</p>

<p><a href="https://github.com/karolkozub/KKHighlightRecentPlugin" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/karolkozub/KKHighlightRecentPlugin</a></p>

<p><a href="https://camo.qiitausercontent.com/6c5cbe9ff9237b4234ed82a7a7ac02c71936b67c/68747470733a2f2f7261772e67697468756275736572636f6e74656e742e636f6d2f6b61726f6c6b6f7a75622f4b4b486967686c69676874526563656e74506c7567696e2f6d61737465722f73637265656e73686f742e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/6c5cbe9ff9237b4234ed82a7a7ac02c71936b67c/68747470733a2f2f7261772e67697468756275736572636f6e74656e742e636f6d2f6b61726f6c6b6f7a75622f4b4b486967686c69676874526563656e74506c7567696e2f6d61737465722f73637265656e73686f742e706e67" alt="" data-canonical-src="https://raw.githubusercontent.com/karolkozub/KKHighlightRecentPlugin/master/screenshot.png"></a></p>

<h2>
<span id="quickfind" class="fragment"></span><a href="#quickfind"><i class="fa fa-link"></i></a>QuickFind</h2>

<p>検索 <code>command</code> + <code>F</code> の動作を拡張する。実行した時点で選択文字列で検索を開始できるようにする。<br>
Xcode とシステムのキーバインドの設定が必要。</p>

<p><a href="https://github.com/qiaoxueshi/QuickFind" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/qiaoxueshi/QuickFind</a></p>

<p><a href="https://camo.qiitausercontent.com/ffd8368b2d975d63e221924912d976426551f746/68747470733a2f2f7261772e67697468756275736572636f6e74656e742e636f6d2f7169616f7875657368692f517569636b46696e642f6d61737465722f696d616765732f517569636b46696e642e676966" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/ffd8368b2d975d63e221924912d976426551f746/68747470733a2f2f7261772e67697468756275736572636f6e74656e742e636f6d2f7169616f7875657368692f517569636b46696e642f6d61737465722f696d616765732f517569636b46696e642e676966" alt="" data-canonical-src="https://raw.githubusercontent.com/qiaoxueshi/QuickFind/master/images/QuickFind.gif"></a></p>

<h2>
<span id="regexswitch" class="fragment"></span><a href="#regexswitch"><i class="fa fa-link"></i></a>RegexSwitch</h2>

<p>検索欄の正規表現を切り替えるボタンを追加する。</p>

<p><a href="https://github.com/hetima/RegexSwitch" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/hetima/RegexSwitch</a></p>

<p><a href="https://camo.qiitausercontent.com/07f15fc4b01c6658dc902fae0c7a6dccc35e4647/68747470733a2f2f6769746875622e636f6d2f686574696d612f52656765785377697463682f7261772f6d61737465722f73637265656e73686f742e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/07f15fc4b01c6658dc902fae0c7a6dccc35e4647/68747470733a2f2f6769746875622e636f6d2f686574696d612f52656765785377697463682f7261772f6d61737465722f73637265656e73686f742e706e67" alt="" data-canonical-src="https://github.com/hetima/RegexSwitch/raw/master/screenshot.png"></a></p>

<h2>
<span id="kshobjcuml" class="fragment"></span><a href="#kshobjcuml"><i class="fa fa-link"></i></a>KSHObjcUML</h2>

<p>Objective-C クラスの依存関係を出力できるようにする。</p>

<p><a href="http://qiita.com/kimsungwhee/items/bcee04fc6275823e5991" class="autolink" id="reference-4d91a086cbc39af90db4">http://qiita.com/kimsungwhee/items/bcee04fc6275823e5991</a></p>

<p><a href="https://camo.qiitausercontent.com/73c79982b971002b473785dd7c845c4ef39b37aa/68747470733a2f2f7261772e67697468756275736572636f6e74656e742e636f6d2f6b696d73756e67776865652f4b53484f626a63554d4c2f6d61737465722f4b53484f626a63554d4c2e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/73c79982b971002b473785dd7c845c4ef39b37aa/68747470733a2f2f7261772e67697468756275736572636f6e74656e742e636f6d2f6b696d73756e67776865652f4b53484f626a63554d4c2f6d61737465722f4b53484f626a63554d4c2e706e67" alt="" data-canonical-src="https://raw.githubusercontent.com/kimsungwhee/KSHObjcUML/master/KSHObjcUML.png"></a></p>

<h3>
<span id="インストール-1" class="fragment"></span><a href="#%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB-1"><i class="fa fa-link"></i></a>インストール</h3>

<p>Alcatraz 経由でインストールできる。</p>

<h2>
<span id="xcode-explorer" class="fragment"></span><a href="#xcode-explorer"><i class="fa fa-link"></i></a>Xcode Explorer</h2>

<p>プロジェクト内の通知やイベントを監視して一覧表示してくれるプラグイン。</p>

<p><a href="https://github.com/edwardaux/XcodeExplorer" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/edwardaux/XcodeExplorer</a></p>

<p><a href="https://camo.qiitausercontent.com/1505b6bf9a270dfd0b5264f4c2afa96671558cee/687474703a2f2f7777772e626c61636b646f67666f756e6472792e636f6d2f626c6f672f77702d636f6e74656e742f75706c6f6164732f323031322f31312f78636f64656578706c6f7265725f6e6f74696669636174696f6e5f706f70756c617465642e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/1505b6bf9a270dfd0b5264f4c2afa96671558cee/687474703a2f2f7777772e626c61636b646f67666f756e6472792e636f6d2f626c6f672f77702d636f6e74656e742f75706c6f6164732f323031322f31312f78636f64656578706c6f7265725f6e6f74696669636174696f6e5f706f70756c617465642e706e67" alt="" data-canonical-src="http://www.blackdogfoundry.com/blog/wp-content/uploads/2012/11/xcodeexplorer_notification_populated.png"></a></p>

<p><a href="https://camo.qiitausercontent.com/652566b27e9bba4cc7d3956a18ce99e0168e2534/687474703a2f2f7777772e626c61636b646f67666f756e6472792e636f6d2f626c6f672f77702d636f6e74656e742f75706c6f6164732f323031322f31322f78636f64656578706c6f7265725f76696577636c69636b65722e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/652566b27e9bba4cc7d3956a18ce99e0168e2534/687474703a2f2f7777772e626c61636b646f67666f756e6472792e636f6d2f626c6f672f77702d636f6e74656e742f75706c6f6164732f323031322f31322f78636f64656578706c6f7265725f76696577636c69636b65722e706e67" alt="" data-canonical-src="http://www.blackdogfoundry.com/blog/wp-content/uploads/2012/12/xcodeexplorer_viewclicker.png"></a></p>

<h2>
<span id="xprobeplugin" class="fragment"></span><a href="#xprobeplugin"><i class="fa fa-link"></i></a>XprobePlugin</h2>

<p>Objective-C メモリブラウザー。オブジェクトの中身をトレースして一覧で表示できる模様。</p>

<p><a href="https://github.com/johnno1962/XprobePlugin" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/johnno1962/XprobePlugin</a></p>

<p><a href="https://camo.qiitausercontent.com/ccb9e8b0b800428ade13f1575cee64517041b66f/68747470733a2f2f63616d6f2e67697468756275736572636f6e74656e742e636f6d2f363637393530363735353636613931366131366266363163653936653330653131623130323063302f3638373437343730336132663266363936653661363536333734363936663665363636663732373836333666363436353265366136663638366536383666366336343733373736663732373436383265363336663664326637383730373236663632363533323265373036653637" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/ccb9e8b0b800428ade13f1575cee64517041b66f/68747470733a2f2f63616d6f2e67697468756275736572636f6e74656e742e636f6d2f363637393530363735353636613931366131366266363163653936653330653131623130323063302f3638373437343730336132663266363936653661363536333734363936663665363636663732373836333666363436353265366136663638366536383666366336343733373736663732373436383265363336663664326637383730373236663632363533323265373036653637" alt="" data-canonical-src="https://camo.githubusercontent.com/667950675566a916a16bf61ce96e30e11b1020c0/687474703a2f2f696e6a656374696f6e666f7278636f64652e6a6f686e686f6c6473776f7274682e636f6d2f7870726f6265322e706e67"></a></p>

<p><a href="https://camo.qiitausercontent.com/eff4e482e751755c59691a9d1516deca3c7c9798/68747470733a2f2f63616d6f2e67697468756275736572636f6e74656e742e636f6d2f343739353836626161303262343734643665363330626534323538316461653964326237323538382f3638373437343730336132663266363936653661363536333734363936663665363636663732373836333666363436353265366136663638366536383666366336343733373736663732373436383265363336663664326637383730373236663632363533313265373036653637" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/eff4e482e751755c59691a9d1516deca3c7c9798/68747470733a2f2f63616d6f2e67697468756275736572636f6e74656e742e636f6d2f343739353836626161303262343734643665363330626534323538316461653964326237323538382f3638373437343730336132663266363936653661363536333734363936663665363636663732373836333666363436353265366136663638366536383666366336343733373736663732373436383265363336663664326637383730373236663632363533313265373036653637" alt="" data-canonical-src="https://camo.githubusercontent.com/479586baa02b474d6e630be42581dae9d2b72588/687474703a2f2f696e6a656374696f6e666f7278636f64652e6a6f686e686f6c6473776f7274682e636f6d2f7870726f6265312e706e67"></a></p>

<h2>
<span id="xcodeway" class="fragment"></span><a href="#xcodeway"><i class="fa fa-link"></i></a>XcodeWay</h2>

<p>Xcode やプロジェクトに関連するディレクトリに簡単に飛べるショートカットをウインドウメニューに追加する。</p>

<p><a href="https://github.com/onmyway133/XcodeWay" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/onmyway133/XcodeWay</a></p>

<p><a href="https://camo.qiitausercontent.com/105c5b76975d75cb94fe29b9b0a26ad8f5580fca/68747470733a2f2f63616d6f2e67697468756275736572636f6e74656e742e636f6d2f356230386531373037663936326433313566636537333634626539306265623561613066376231652f363837343734373033613266326636393335333932653734363936653739373036393633326536333666366432663632363636643635373933393265373036653637" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/105c5b76975d75cb94fe29b9b0a26ad8f5580fca/68747470733a2f2f63616d6f2e67697468756275736572636f6e74656e742e636f6d2f356230386531373037663936326433313566636537333634626539306265623561613066376231652f363837343734373033613266326636393335333932653734363936653739373036393633326536333666366432663632363636643635373933393265373036653637" alt="" data-canonical-src="https://camo.githubusercontent.com/5b08e1707f962d315fce7364be90beb5aa0f7b1e/687474703a2f2f6935392e74696e797069632e636f6d2f62666d6579392e706e67"></a></p>

<h1>
<span id="cocoapods" class="fragment"></span><a href="#cocoapods"><i class="fa fa-link"></i></a>CocoaPods</h1>

<h2>
<span id="cocoapods-for-xcode" class="fragment"></span><a href="#cocoapods-for-xcode"><i class="fa fa-link"></i></a>CocoaPods for Xcode</h2>

<p><a href="https://github.com/kattrali/cocoapods-xcode-plugin" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/kattrali/cocoapods-xcode-plugin</a></p>

<p><a href="https://camo.qiitausercontent.com/114b280d4f1bbadd0db26a78eb5df4b103d366cd/68747470733a2f2f7261772e6769746875622e636f6d2f6b61747472616c692f636f636f61706f64732d78636f64652d706c7567696e2f6d61737465722f6d656e752e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/114b280d4f1bbadd0db26a78eb5df4b103d366cd/68747470733a2f2f7261772e6769746875622e636f6d2f6b61747472616c692f636f636f61706f64732d78636f64652d706c7567696e2f6d61737465722f6d656e752e706e67" alt="" data-canonical-src="https://raw.github.com/kattrali/cocoapods-xcode-plugin/master/menu.png"></a></p>

<h2>
<span id="cocoapodui" class="fragment"></span><a href="#cocoapodui"><i class="fa fa-link"></i></a>CocoaPodUI</h2>

<p><a href="https://github.com/Galeas/CocoaPodUI" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/Galeas/CocoaPodUI</a></p>

<p><a href="https://camo.qiitausercontent.com/76356176c82866e94ce51cd9b73d956ddc52a570/68747470733a2f2f63616d6f2e67697468756275736572636f6e74656e742e636f6d2f623432623964633837663336343562633763356330373036333165326434623731366161646661342f363837343734373033613266326636393331333133393339326537303638366637343666363237353633366236353734326536333666366432663631366336323735366437333266363136313334333733303266343136623662363932643338333732663436366637343666373233303333333233303331333833333333333433313265373036653637" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/76356176c82866e94ce51cd9b73d956ddc52a570/68747470733a2f2f63616d6f2e67697468756275736572636f6e74656e742e636f6d2f623432623964633837663336343562633763356330373036333165326434623731366161646661342f363837343734373033613266326636393331333133393339326537303638366637343666363237353633366236353734326536333666366432663631366336323735366437333266363136313334333733303266343136623662363932643338333732663436366637343666373233303333333233303331333833333333333433313265373036653637" alt="" data-canonical-src="https://camo.githubusercontent.com/b42b9dc87f3645bc7c5c070631e2d4b716aadfa4/687474703a2f2f69313139392e70686f746f6275636b65742e636f6d2f616c62756d732f61613437302f416b6b692d38372f466f746f72303332303138333334312e706e67"></a></p>

<h1>
<span id="cocoacontrols" class="fragment"></span><a href="#cocoacontrols"><i class="fa fa-link"></i></a>CocoaControls</h1>

<h2>
<span id="cocoacontrols-1" class="fragment"></span><a href="#cocoacontrols-1"><i class="fa fa-link"></i></a>CocoaControls</h2>

<p>CocoaControls に登録されている情報を検索したりできる。</p>

<p><a href="https://github.com/yeahdongcn/CocoaControlsPlugin" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/yeahdongcn/CocoaControlsPlugin</a></p>

<p><a href="https://camo.qiitausercontent.com/2decedbe9f06e0d59702df1666913140f1a0a278/68747470733a2f2f7261772e67697468756275736572636f6e74656e742e636f6d2f79656168646f6e67636e2f436f636f61436f6e74726f6c73506c7567696e2f6d61737465722f6170705f73637265656e73686f742e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/2decedbe9f06e0d59702df1666913140f1a0a278/68747470733a2f2f7261772e67697468756275736572636f6e74656e742e636f6d2f79656168646f6e67636e2f436f636f61436f6e74726f6c73506c7567696e2f6d61737465722f6170705f73637265656e73686f742e706e67" alt="" data-canonical-src="https://raw.githubusercontent.com/yeahdongcn/CocoaControlsPlugin/master/app_screenshot.png"></a></p>

<h1>
<span id="git" class="fragment"></span><a href="#git"><i class="fa fa-link"></i></a>Git</h1>

<h2>
<span id="gitdiff" class="fragment"></span><a href="#gitdiff"><i class="fa fa-link"></i></a>GitDiff</h2>

<p>git の差分をハイライト表示できる。<br>
該当行の行番号欄の右端とスクロールバーに色が付き、カーソルを重ねると以前のコードがポップアップされる</p>

<p><a href="https://github.com/johnno1962/GitDiff" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/johnno1962/GitDiff</a></p>

<p><a href="https://camo.qiitausercontent.com/34bd54a0ee5b7e8e14e8cdeeade4f7c036ca73cb/68747470733a2f2f63616d6f2e67697468756275736572636f6e74656e742e636f6d2f633238643163663064336230373963383037663739636236646562353738356166663238653962652f36383734373437303361326632663639366536613635363337343639366636653636366637323738363336663634363532653661366636383665363836663663363437333737366637323734363832653633366636643266363736393734363436393636363633323265373036653637" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/34bd54a0ee5b7e8e14e8cdeeade4f7c036ca73cb/68747470733a2f2f63616d6f2e67697468756275736572636f6e74656e742e636f6d2f633238643163663064336230373963383037663739636236646562353738356166663238653962652f36383734373437303361326632663639366536613635363337343639366636653636366637323738363336663634363532653661366636383665363836663663363437333737366637323734363832653633366636643266363736393734363436393636363633323265373036653637" alt="" data-canonical-src="https://camo.githubusercontent.com/c28d1cf0d3b079c807f79cb6deb5785aff28e9be/687474703a2f2f696e6a656374696f6e666f7278636f64652e6a6f686e686f6c6473776f7274682e636f6d2f67697464696666322e706e67"></a></p>

<h2>
<span id="showingithub" class="fragment"></span><a href="#showingithub"><i class="fa fa-link"></i></a>ShowInGitHub</h2>

<p><a href="https://github.com/larsxschneider/ShowInGitHub" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/larsxschneider/ShowInGitHub</a></p>

<p><a href="https://camo.qiitausercontent.com/002cfa99ba11fddce6fe61a67ff92fb5e033c47b/68747470733a2f2f7261772e6769746875622e636f6d2f6c617273787363686e65696465722f53686f77496e4769744875622f6d61737465722f6f70656e5f66696c655f6578616d706c652e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/002cfa99ba11fddce6fe61a67ff92fb5e033c47b/68747470733a2f2f7261772e6769746875622e636f6d2f6c617273787363686e65696465722f53686f77496e4769744875622f6d61737465722f6f70656e5f66696c655f6578616d706c652e706e67" alt="" data-canonical-src="https://raw.github.com/larsxschneider/ShowInGitHub/master/open_file_example.png"></a></p>

<h1>
<span id="その他" class="fragment"></span><a href="#%E3%81%9D%E3%81%AE%E4%BB%96"><i class="fa fa-link"></i></a>その他</h1>

<h2>
<span id="anglerfish" class="fragment"></span><a href="#anglerfish"><i class="fa fa-link"></i></a>Anglerfish</h2>

<p>シミュレーター一覧を最近使用した順に並び替える。</p>

<p><a href="https://github.com/dealforest/Anglerfish" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/dealforest/Anglerfish</a></p>

<p><a href="https://camo.qiitausercontent.com/4e631a7186ac684b356e84e9d7b79b933ee4f185/68747470733a2f2f7261772e67697468756275736572636f6e74656e742e636f6d2f6465616c666f726573742f416e676c6572666973682f6d61737465722f696d616765732f73696d756c61746f72732e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/4e631a7186ac684b356e84e9d7b79b933ee4f185/68747470733a2f2f7261772e67697468756275736572636f6e74656e742e636f6d2f6465616c666f726573742f416e676c6572666973682f6d61737465722f696d616765732f73696d756c61746f72732e706e67" alt="" data-canonical-src="https://raw.githubusercontent.com/dealforest/Anglerfish/master/images/simulators.png"></a></p>

<h2>
<span id="lessanim" class="fragment"></span><a href="#lessanim"><i class="fa fa-link"></i></a>LessAnim</h2>

<p>Xcode のいくつかのアニメーションを無効化するプラグイン。</p>

<p><a href="https://github.com/ShingoFukuyama/LessAnim-for-Xcode" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/ShingoFukuyama/LessAnim-for-Xcode</a></p>

<p>詳しくはこちら：<a href="http://qiita.com/ShingoFukuyama/items/999d23fd782d43461656" id="reference-4a03e27bbc93bfb4891e">XcodeのUIアニメーションを消すプラグインLessAnim</a></p>

<h2>
<span id="dbsmartpanels" class="fragment"></span><a href="#dbsmartpanels"><i class="fa fa-link"></i></a>DBSmartPanels</h2>

<p>デバッグパネル、ユーティリティパネル等の挙動を設定できる。<br>
例えば、「文字入力を始めたらデバッグパネルを自動で閉じる」、「IBを起動したらユーティリティパネルを自動で開く」といったことが設定可能。</p>

<p><a href="https://github.com/chaingarden/DBSmartPanels/" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/chaingarden/DBSmartPanels/</a></p>

<p><a href="https://camo.qiitausercontent.com/8a99f723483385cfd2f0c84b09a2dacd05eb89d7/68747470733a2f2f7261772e67697468756275736572636f6e74656e742e636f6d2f636861696e67617264656e2f4442536d61727450616e656c732f6d61737465722f53637265656e73686f74732f44656d6f53637265656e73686f742e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/8a99f723483385cfd2f0c84b09a2dacd05eb89d7/68747470733a2f2f7261772e67697468756275736572636f6e74656e742e636f6d2f636861696e67617264656e2f4442536d61727450616e656c732f6d61737465722f53637265656e73686f74732f44656d6f53637265656e73686f742e706e67" alt="" data-canonical-src="https://raw.githubusercontent.com/chaingarden/DBSmartPanels/master/Screenshots/DemoScreenshot.png"></a></p>

<h2>
<span id="xcfui" class="fragment"></span><a href="#xcfui"><i class="fa fa-link"></i></a>xcfui</h2>

<p>未使用の import ディレクティブを警告表示する。</p>

<p><a href="https://github.com/jcavar/xcfui" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/jcavar/xcfui</a></p>

<p><a href="https://camo.qiitausercontent.com/21992b107f4cbc42ac65e9239d4e8389f647c9f9/68747470733a2f2f7261772e67697468756275736572636f6e74656e742e636f6d2f6a63617661722f78636675692f6d61737465722f707265766965772e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/21992b107f4cbc42ac65e9239d4e8389f647c9f9/68747470733a2f2f7261772e67697468756275736572636f6e74656e742e636f6d2f6a63617661722f78636675692f6d61737465722f707265766965772e706e67" alt="" data-canonical-src="https://raw.githubusercontent.com/jcavar/xcfui/master/preview.png"></a></p>

<h2>
<span id="injection-for-xcode" class="fragment"></span><a href="#injection-for-xcode"><i class="fa fa-link"></i></a>Injection for Xcode</h2>

<p>Method Swizzling により、実行中でもコード編集しながらデバッグができるようになる。</p>

<p> </p><p><a href="http://vimeo.com/50137444" rel="nofollow noopener" target="_blank">Code Injection for Xcode (Plugin Version)</a> from <a href="http://vimeo.com/user13435079" rel="nofollow noopener" target="_blank">John Holdsworth</a> on <a href="https://vimeo.com" rel="nofollow noopener" target="_blank">Vimeo</a>.</p>

<p><a href="http://injectionforxcode.com" class="autolink" rel="nofollow noopener" target="_blank">http://injectionforxcode.com</a><br>
<a href="https://github.com/johnno1962/injectionforxcode" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/johnno1962/injectionforxcode</a></p>

<h2>
<span id="kpruneverywherexcodeplugin" class="fragment"></span><a href="#kpruneverywherexcodeplugin"><i class="fa fa-link"></i></a>KPRunEverywhereXcodePlugin</h2>

<p>複数の実機デバイス向けに一括ビルドができるようになる。</p>

<p><a href="https://github.com/kitschpatrol/KPRunEverywhereXcodePlugin" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/kitschpatrol/KPRunEverywhereXcodePlugin</a></p>

<p><a href="https://camo.qiitausercontent.com/1e40e127a2fd9378eaf1c4db862396597b2d8224/68747470733a2f2f7261772e67697468756275736572636f6e74656e742e636f6d2f6b6974736368706174726f6c2f4b5052756e4576657279776865726558636f6465506c7567696e2f6d61737465722f73637265656e73686f742e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/1e40e127a2fd9378eaf1c4db862396597b2d8224/68747470733a2f2f7261772e67697468756275736572636f6e74656e742e636f6d2f6b6974736368706174726f6c2f4b5052756e4576657279776865726558636f6465506c7567696e2f6d61737465722f73637265656e73686f742e706e67" alt="" data-canonical-src="https://raw.githubusercontent.com/kitschpatrol/KPRunEverywhereXcodePlugin/master/screenshot.png"></a></p>

<h2>
<span id="mini-xcode" class="fragment"></span><a href="#mini-xcode"><i class="fa fa-link"></i></a>Mini Xcode</h2>

<p>ツールバーを隠しても Scheme を表示できるようにする。</p>

<p><a href="https://github.com/Daij-Djan/MiniXcode" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/Daij-Djan/MiniXcode</a></p>

<p><a href="https://camo.qiitausercontent.com/a0d2ebdae438aa95acead643496f8eea4c5b8864/68747470733a2f2f7261772e6769746875622e636f6d2f4461696a2d446a616e2f4d696e6958636f64652f6d61737465722f53637265656e73686f742e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/a0d2ebdae438aa95acead643496f8eea4c5b8864/68747470733a2f2f7261772e6769746875622e636f6d2f4461696a2d446a616e2f4d696e6958636f64652f6d61737465722f53637265656e73686f742e706e67" alt="" data-canonical-src="https://raw.github.com/Daij-Djan/MiniXcode/master/Screenshot.png"></a></p>

<p><a href="https://camo.qiitausercontent.com/443224dc0cd061c7dbf21b05681be18fad75a662/68747470733a2f2f7261772e6769746875622e636f6d2f4461696a2d446a616e2f4d696e6958636f64652f6d61737465722f53637265656e73686f74322e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/443224dc0cd061c7dbf21b05681be18fad75a662/68747470733a2f2f7261772e6769746875622e636f6d2f4461696a2d446a616e2f4d696e6958636f64652f6d61737465722f53637265656e73686f74322e706e67" alt="" data-canonical-src="https://raw.github.com/Daij-Djan/MiniXcode/master/Screenshot2.png"></a></p>

<h2>
<span id="schemeshortcuts" class="fragment"></span><a href="#schemeshortcuts"><i class="fa fa-link"></i></a>SchemeShortcuts</h2>

<p>Scheme に対してショートカットを割り当てる。</p>

<p><a href="https://github.com/cppforlife/SchemeShortcuts" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/cppforlife/SchemeShortcuts</a></p>

<h2>
<span id="deriveddata-exterminator" class="fragment"></span><a href="#deriveddata-exterminator"><i class="fa fa-link"></i></a>DerivedData Exterminator</h2>

<p>DerivedData（ビルド時に生成されるキャッシュ等が保存されているディレクトリ）を消去するためのボタンをウインドウ／ツールバーに追加する。</p>

<p><a href="https://github.com/kattrali/deriveddata-exterminator" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/kattrali/deriveddata-exterminator</a></p>

<p><a href="https://camo.qiitausercontent.com/381dba72b7a63bdbfab34f473cb9c1fcdfa2f9c8/68747470733a2f2f6769746875622e636f6d2f6b61747472616c692f64657269766564646174612d65787465726d696e61746f722f7261772f6d61737465722f646f63732f65787465726d696e61746f722e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/381dba72b7a63bdbfab34f473cb9c1fcdfa2f9c8/68747470733a2f2f6769746875622e636f6d2f6b61747472616c692f64657269766564646174612d65787465726d696e61746f722f7261772f6d61737465722f646f63732f65787465726d696e61746f722e706e67" alt="" data-canonical-src="https://github.com/kattrali/deriveddata-exterminator/raw/master/docs/exterminator.png"></a></p>

<h2>
<span id="copymethodstyle" class="fragment"></span><a href="#copymethodstyle"><i class="fa fa-link"></i></a>CopyMethodStyle</h2>

<p>メソッドやプロパティをいろいろな形式でクリップボードにコピーできる。<br>
プロジェクトから Archive ビルドして .xcplugin ファイルを生成したら手動インストールする。</p>

<p><a href="https://github.com/hetima/CopyMethodStyle" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/hetima/CopyMethodStyle</a></p>

<p><a href="https://camo.qiitausercontent.com/b2e76ffb68996785965bb1a999d30180d734ac29/68747470733a2f2f7261772e67697468756275736572636f6e74656e742e636f6d2f686574696d612f436f70794d6574686f645374796c652f6d61737465722f73637265656e73686f742e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/b2e76ffb68996785965bb1a999d30180d734ac29/68747470733a2f2f7261772e67697468756275736572636f6e74656e742e636f6d2f686574696d612f436f70794d6574686f645374796c652f6d61737465722f73637265656e73686f742e706e67" alt="" data-canonical-src="https://raw.githubusercontent.com/hetima/CopyMethodStyle/master/screenshot.png"></a></p>

<h2>
<span id="windowflex" class="fragment"></span><a href="#windowflex"><i class="fa fa-link"></i></a>WindowFlex</h2>

<p>Xcode のウインドウ幅をより縮小できるようにする。</p>

<p><a href="https://github.com/zenangst/WindowFlex" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/zenangst/WindowFlex</a></p>

<p><a href="https://camo.qiitausercontent.com/c8707c284611728196e980c41862235c72048822/68747470733a2f2f7261772e67697468756275736572636f6e74656e742e636f6d2f7a656e616e6773742f57696e646f77466c65782f6d61737465722f73637265656e73686f742e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/c8707c284611728196e980c41862235c72048822/68747470733a2f2f7261772e67697468756275736572636f6e74656e742e636f6d2f7a656e616e6773742f57696e646f77466c65782f6d61737465722f73637265656e73686f742e706e67" alt="" data-canonical-src="https://raw.githubusercontent.com/zenangst/WindowFlex/master/screenshot.png"></a></p>

<h2>
<span id="open-with-application" class="fragment"></span><a href="#open-with-application"><i class="fa fa-link"></i></a>Open with Application</h2>

<p>ファイルのコンテクストメニューから「このアプリケーションで開く」指定が出来るようにする。</p>

<p><a href="https://github.com/inquisitiveSoft/Open-with-Application" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/inquisitiveSoft/Open-with-Application</a></p>

<p><a href="https://camo.qiitausercontent.com/bc0f38bb045cc1a66b60f98fff8ccdf6c9870f2f/68747470733a2f2f7261772e67697468756275736572636f6e74656e742e636f6d2f696e717569736974697665536f66742f4f70656e2d776974682d4170706c69636174696f6e2f6d61737465722f53637265656e73686f74732f4d656e752d73637265656e73686f742e6a7067" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/bc0f38bb045cc1a66b60f98fff8ccdf6c9870f2f/68747470733a2f2f7261772e67697468756275736572636f6e74656e742e636f6d2f696e717569736974697665536f66742f4f70656e2d776974682d4170706c69636174696f6e2f6d61737465722f53637265656e73686f74732f4d656e752d73637265656e73686f742e6a7067" alt="" data-canonical-src="https://raw.githubusercontent.com/inquisitiveSoft/Open-with-Application/master/Screenshots/Menu-screenshot.jpg"></a></p>

<h2>
<span id="wakariyasuicommitpopup" class="fragment"></span><a href="#wakariyasuicommitpopup"><i class="fa fa-link"></i></a>WakariyasuiCommitPopup</h2>

<p>コミット履歴のポップアップメニューの表示を判りやすくする。</p>

<p><a href="https://github.com/hetima/WakariyasuiCommitPopup" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/hetima/WakariyasuiCommitPopup</a></p>

<h3>
<span id="動作環境-2" class="fragment"></span><a href="#%E5%8B%95%E4%BD%9C%E7%92%B0%E5%A2%83-2"><i class="fa fa-link"></i></a>動作環境</h3>

<ul>
<li>Xcode 5.0</li>
</ul>

<p><a href="https://camo.qiitausercontent.com/02d7daa673a5460d93997742f957319680e0407f/68747470733a2f2f6769746875622e636f6d2f686574696d612f57616b6172697961737569436f6d6d6974506f7075702f7261772f6d61737465722f73637265656e73686f742e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/02d7daa673a5460d93997742f957319680e0407f/68747470733a2f2f6769746875622e636f6d2f686574696d612f57616b6172697961737569436f6d6d6974506f7075702f7261772f6d61737465722f73637265656e73686f742e706e67" alt="" data-canonical-src="https://github.com/hetima/WakariyasuiCommitPopup/raw/master/screenshot.png"></a></p>

<h2>
<span id="xcode4-fixins" class="fragment"></span><a href="#xcode4-fixins"><i class="fa fa-link"></i></a>Xcode4 Fixins</h2>

<p>Xcode 4の UI の挙動を変更するプラグイン集。</p>

<h3>
<span id="動作環境-3" class="fragment"></span><a href="#%E5%8B%95%E4%BD%9C%E7%92%B0%E5%A2%83-3"><i class="fa fa-link"></i></a>動作環境</h3>

<p>Xcode 4専用</p>

<h3>
<span id="内容" class="fragment"></span><a href="#%E5%86%85%E5%AE%B9"><i class="fa fa-link"></i></a>内容</h3>

<ul>
<li>
<strong>CurrentLineHighlighter</strong>: 選択行強調</li>
<li>
<strong>DisableAnimations</strong>: UIアニメーション無効化</li>
<li>
<strong>FindFix</strong>: 検索時にオプション表示をデフォルトにする。エディタの表示がバグる？</li>
<li>
<strong>HideDistractions</strong>: エディタだけ表示</li>
<li>
<strong>InhibitTabNextPlaceholder</strong>: Tab キーによるプレースホルダ移動を禁止</li>
<li>
<strong>TabAcceptsCompletion</strong>: Tab キーで補完候補を選択</li>
<li>
<strong>UserScripts</strong>: Xcode3 風の AppleScript メニューを追加</li>
</ul>

<p><a href="https://github.com/davekeck/Xcode-4-Fixins" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/davekeck/Xcode-4-Fixins</a></p>

<h2>
<span id="xlocation" class="fragment"></span><a href="#xlocation"><i class="fa fa-link"></i></a>XLocation</h2>

<p>地図から GTX ファイルを生成できる機能を追加する。</p>

<p><a href="https://github.com/StefanLage/XLocation" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/StefanLage/XLocation</a></p>

<p>解説記事<br>
<a href="http://cocoadays-info.blogspot.jp/2014/05/gpx-xcode.html" class="autolink" rel="nofollow noopener" target="_blank">http://cocoadays-info.blogspot.jp/2014/05/gpx-xcode.html</a></p>

<p><a href="https://camo.qiitausercontent.com/50168bd7f4f28e00ace3332b4791497c7b05ba30/68747470733a2f2f7261772e67697468756275736572636f6e74656e742e636f6d2f53746566616e4c6167652f584c6f636174696f6e2f6d61737465722f53637265656e732f64656d6f5f6d61702e676966" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/50168bd7f4f28e00ace3332b4791497c7b05ba30/68747470733a2f2f7261772e67697468756275736572636f6e74656e742e636f6d2f53746566616e4c6167652f584c6f636174696f6e2f6d61737465722f53637265656e732f64656d6f5f6d61702e676966" alt="" data-canonical-src="https://raw.githubusercontent.com/StefanLage/XLocation/master/Screens/demo_map.gif"></a></p>

<h2>
<span id="xcode-maven-plugin" class="fragment"></span><a href="#xcode-maven-plugin"><i class="fa fa-link"></i></a>Xcode Maven Plugin</h2>

<p><a href="https://github.com/sap-production/xcode-maven-plugin" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/sap-production/xcode-maven-plugin</a></p>

<h2>
<span id="gradle-xcode-plugin" class="fragment"></span><a href="#gradle-xcode-plugin"><i class="fa fa-link"></i></a>Gradle Xcode Plugin</h2>

<p><a href="https://github.com/openbakery/gradle-xcodePlugin" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/openbakery/gradle-xcodePlugin</a></p>

<h1>
<span id="プラグインの雛形" class="fragment"></span><a href="#%E3%83%97%E3%83%A9%E3%82%B0%E3%82%A4%E3%83%B3%E3%81%AE%E9%9B%9B%E5%BD%A2"><i class="fa fa-link"></i></a>プラグインの雛形</h1>

<h2>
<span id="xcode4-plugin-template" class="fragment"></span><a href="#xcode4-plugin-template"><i class="fa fa-link"></i></a>Xcode4 Plugin Template</h2>

<p>Xcode 4 プラグインのひな形<br>
<a href="https://github.com/kattrali/Xcode4-Plugin-Template" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/kattrali/Xcode4-Plugin-Template</a></p>

<h2>
<span id="xcode5-plugin-template" class="fragment"></span><a href="#xcode5-plugin-template"><i class="fa fa-link"></i></a>Xcode5 Plugin Template</h2>

<p>Xcode 5 プラグインのひな形<br>
<a href="https://github.com/kattrali/Xcode5-Plugin-Template" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/kattrali/Xcode5-Plugin-Template</a></p>

<h1>
<span id="更に詳しく" class="fragment"></span><a href="#%E6%9B%B4%E3%81%AB%E8%A9%B3%E3%81%97%E3%81%8F"><i class="fa fa-link"></i></a>更に詳しく</h1>

<h2>
<span id="dvtplugincompatibilityuuid" class="fragment"></span><a href="#dvtplugincompatibilityuuid"><i class="fa fa-link"></i></a>DVTPlugInCompatibilityUUID</h2>

<p>Xcode の更新でプラグインが読み込まれなくなってしまったら、プラグインバンドルの Info.plist 内 <code>DVTPlugInCompatibilityUUIDs</code> アレイに、対象の <code>DVTPlugInCompatibilityUUID</code> を追記する事で対応出来る場合がある。これについては以下の記事でも解説されている。</p>

<table>
<thead>
<tr>
<th>Xcode</th>
<th>UUID</th>
</tr>
</thead>
<tbody>
<tr>
<td>8.0</td>
<td>8A66E736-A720-4B3C-92F1-33D9962C69DF</td>
</tr>
<tr>
<td>8beta6</td>
<td>1637F4D5-0B27-416B-A78D-498965D64877</td>
</tr>
<tr>
<td>7.3</td>
<td>ACA8656B-FEA8-4B6D-8E4A-93F4C95C362C</td>
</tr>
<tr>
<td>7.2.1</td>
<td>F41BD31E-2683-44B8-AE7F-5F09E919790E</td>
</tr>
<tr>
<td>7.2</td>
<td>F41BD31E-2683-44B8-AE7F-5F09E919790E</td>
</tr>
<tr>
<td>7.1.1</td>
<td>7265231C-39B4-402C-89E1-16167C4CC990</td>
</tr>
<tr>
<td>7.1β</td>
<td>CC0D0F4F-05B3-431A-8F33-F84AFCB2C651</td>
</tr>
<tr>
<td>7.0</td>
<td>0420B86A-AA43-4792-9ED0-6FE0F2B16A13</td>
</tr>
<tr>
<td>6.4</td>
<td>7FDF5C7A-131F-4ABB-9EDC-8C5F8F0B8A90</td>
</tr>
<tr>
<td>6.3</td>
<td>9F75337B-21B4-4ADC-B558-F9CADF7073A7</td>
</tr>
<tr>
<td>6.2</td>
<td>A16FF353-8441-459E-A50C-B071F53F51B7</td>
</tr>
<tr>
<td>6.1</td>
<td>C4A681B0-4A26-480E-93EC-1218098B9AA0</td>
</tr>
<tr>
<td>6.0</td>
<td>C4A681B0-4A26-480E-93EC-1218098B9AA0</td>
</tr>
<tr>
<td>5.1</td>
<td>A2E4D43F-41F4-4FB9-BB94-7177011C9AED</td>
</tr>
</tbody>
</table>

<p>Xcode6で動かないプラグインを対応させる<br>
<a href="http://qiita.com/roana0229/items/c8517935b43096be4682" class="autolink" id="reference-00c5531ec5ced754a0bc">http://qiita.com/roana0229/items/c8517935b43096be4682</a></p>

<p>Xcode 5.1にupdateした後に、使えなくなったxcode plug-inを再び使えるようにする方法<br>
<a href="http://qiita.com/roothybrid7/items/85bacb992a22aaad04cd" class="autolink" id="reference-82ee6c6a5638270979a0">http://qiita.com/roothybrid7/items/85bacb992a22aaad04cd</a></p>

<p>[暫定対応]Xcode5.1で今まで使っていたプラグインが使えなくなってしまった場合の対応<br>
<a href="http://qiita.com/hachinobu/items/d26b86454c2f8a4e175f" class="autolink" id="reference-43de64464d7814681c02">http://qiita.com/hachinobu/items/d26b86454c2f8a4e175f</a></p>

<p>DVTPlugInCompatibilityUUID<br>
<a href="http://qiita.com/kotowo/items/39caf5d451f0a538824c" class="autolink" id="reference-9aea43e5e5cb196c4b31">http://qiita.com/kotowo/items/39caf5d451f0a538824c</a></p>

<h2>
<span id="dvtpluginmanagernonappleplugins-xcode-71-について" class="fragment"></span><a href="#dvtpluginmanagernonappleplugins-xcode-71-%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6"><i class="fa fa-link"></i></a>DVTPlugInManagerNonApplePlugIns-Xcode-7.1 について</h2>

<p>Xcode7.1にアップデートしてAlcatrazが消えたら<br>
<a href="http://qiita.com/redpanda/items/b2e6a1538bb3e71688b7" class="autolink" id="reference-430a26752468d6e47961">http://qiita.com/redpanda/items/b2e6a1538bb3e71688b7</a></p>

<p>Alcatraz in XCode 7.1<br>
<a href="http://stackoverflow.com/questions/33342969/alcatraz-in-xcode-7-1" class="autolink" rel="nofollow noopener" target="_blank">http://stackoverflow.com/questions/33342969/alcatraz-in-xcode-7-1</a></p>

<h2>
<span id="プラグイン作成資料" class="fragment"></span><a href="#%E3%83%97%E3%83%A9%E3%82%B0%E3%82%A4%E3%83%B3%E4%BD%9C%E6%88%90%E8%B3%87%E6%96%99"><i class="fa fa-link"></i></a>プラグイン作成資料</h2>

<p>Xcode Plugin が盛り上がっているらしい<br>
<a href="http://qiita.com/griffin_stewie/items/ffb53d0a5d03fe2d91a4" class="autolink" id="reference-46569f11676a20a0aa37">http://qiita.com/griffin_stewie/items/ffb53d0a5d03fe2d91a4</a></p>

<p>初めてのXcode 5 プラグイン開発<br>
<a href="http://dev.classmethod.jp/smartphone/xcode5-plugin-1/" class="autolink" rel="nofollow noopener" target="_blank">http://dev.classmethod.jp/smartphone/xcode5-plugin-1/</a></p>

<p>Creating an Xcode4 plugin<br>
<a href="http://www.blackdogfoundry.com/blog/creating-an-xcode4-plugin/" class="autolink" rel="nofollow noopener" target="_blank">http://www.blackdogfoundry.com/blog/creating-an-xcode4-plugin/</a></p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1" style="height:150px;">
<tr>
	<td rowspan="3">73位</td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="thumb-up-120px.png" /></i>764</kbd>
		<a target="_blank" href="https://qiita.com/vvakame/items/74005adacc0e8e2a3cab">JavaScriptのthisの覚え方</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-01-31<br />12:50:54</center>
	</td>
	<td style="width:200px;">
		<!--投稿者-->
		<center>
			@<a href="user/13283.html">vvakame</a>(48件の記事)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/13283/profile-images/1473682747">
		</center>
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[JavaScript]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<!--
		<div style="width:350px;height:150px;overflow:scroll;">%s</div>
		-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>JavaScriptの<code>this</code>は同じソースコードでも呼び出し元次第で意味が違ったりして複雑だと思われがちだけど、一回覚えてしまえば簡単だ。</p>

<p><strong>JavaScriptにはthisが4種類ある</strong></p>

<p>これだけをしっかり覚えておけば、後は必要な時に <em>4種類って何があるんだっけ？</em> と考えれば容易に思い出せる。</p>

<p>ちなみに、下記のコードはブラウザ上で実行することを想定している。(なので<code>window</code>を使う)</p>

<h1>
<span id="トップレベルのthis" class="fragment"></span><a href="#%E3%83%88%E3%83%83%E3%83%97%E3%83%AC%E3%83%99%E3%83%AB%E3%81%AEthis"><i class="fa fa-link"></i></a>トップレベルのthis</h1>

<p>グローバルオブジェクトを指す。</p>

<div class="code-frame" data-lang="js"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">hoge</span> <span class="o">=</span> <span class="s2">"fuga"</span><span class="p">;</span>
<span class="nb">window</span><span class="p">.</span><span class="nx">foo</span> <span class="o">=</span> <span class="s2">"bar"</span><span class="p">;</span>

<span class="c1">// fuga+bar と表示される</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">hoge</span> <span class="o">+</span> <span class="s2">"+"</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">foo</span><span class="p">);</span>

<span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
    <span class="c1">// 同じくfuga+bar と表示される</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">hoge</span> <span class="o">+</span> <span class="s2">"+"</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">foo</span><span class="p">);</span>
<span class="p">})();</span>
</pre></div></div>

<h1>
<span id="コンストラクタ内のthis" class="fragment"></span><a href="#%E3%82%B3%E3%83%B3%E3%82%B9%E3%83%88%E3%83%A9%E3%82%AF%E3%82%BF%E5%86%85%E3%81%AEthis"><i class="fa fa-link"></i></a>コンストラクタ内のthis</h1>

<p>作られるインスタンス自身を指す。</p>

<div class="code-frame" data-lang="js"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">Hoge</span> <span class="o">=</span> <span class="kd">function</span> <span class="nx">Hoge</span><span class="p">(</span><span class="nx">msg</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">hoge</span> <span class="o">=</span> <span class="nx">msg</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">method</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"method+"</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">hoge</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kd">var</span> <span class="nx">obj1</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Hoge</span><span class="p">(</span><span class="s2">"Hello"</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">obj2</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Hoge</span><span class="p">(</span><span class="s2">"World"</span><span class="p">);</span>

<span class="c1">// Hello と表示</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">obj1</span><span class="p">.</span><span class="nx">hoge</span><span class="p">);</span>
<span class="c1">// method+Hello と表示</span>
<span class="nx">obj1</span><span class="p">.</span><span class="nx">method</span><span class="p">();</span>

<span class="c1">// World と表示</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">obj2</span><span class="p">.</span><span class="nx">hoge</span><span class="p">);</span>
<span class="c1">// method+World と表示</span>
<span class="nx">obj2</span><span class="p">.</span><span class="nx">method</span><span class="p">();</span>

<span class="c1">// しまったnewを付け忘れたのでHogeの中のthisはグローバルオブジェクトだ！</span>
<span class="nx">Hoge</span><span class="p">(</span><span class="s2">"newじゃねーよ!"</span><span class="p">);</span>
<span class="c1">// ぎゃーっ！ true！</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">hoge</span> <span class="o">==</span> <span class="s2">"newじゃねーよ!"</span><span class="p">);</span>
<span class="c1">// ぎゃーっ！ method+newじゃねーよ!</span>
<span class="nb">window</span><span class="p">.</span><span class="nx">method</span><span class="p">();</span>
</pre></div></div>

<h1>
<span id="何かに所属している時のthis" class="fragment"></span><a href="#%E4%BD%95%E3%81%8B%E3%81%AB%E6%89%80%E5%B1%9E%E3%81%97%E3%81%A6%E3%81%84%E3%82%8B%E6%99%82%E3%81%AEthis"><i class="fa fa-link"></i></a>何かに所属している時のthis</h1>

<p>所属しているオブジェクトを指す。</p>

<div class="code-frame" data-lang="js"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">hoge</span> <span class="o">=</span> <span class="p">{</span><span class="nx">foo</span><span class="o">:</span><span class="s2">"bar"</span><span class="p">};</span>
<span class="nx">hoge</span><span class="p">.</span><span class="nx">print1</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">foo</span><span class="p">);</span>
<span class="p">};</span>

<span class="c1">// bar を表示</span>
<span class="nx">hoge</span><span class="p">.</span><span class="nx">print1</span><span class="p">();</span>

<span class="kd">var</span> <span class="nx">func</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">foo</span><span class="p">);</span>
<span class="p">};</span>
<span class="c1">// window.foo が参照されるのでundefined</span>
<span class="nx">func</span><span class="p">();</span>

<span class="nx">hoge</span><span class="p">.</span><span class="nx">print2</span> <span class="o">=</span> <span class="nx">func</span><span class="p">;</span>
<span class="c1">// thisがhogeに変わったので bar と表示される</span>
<span class="nx">hoge</span><span class="p">.</span><span class="nx">print2</span><span class="p">();</span>

<span class="c1">// 一応prototypeも試してみましょうね。</span>
<span class="kd">var</span> <span class="nx">Hoge</span> <span class="o">=</span> <span class="kd">function</span> <span class="nx">Hoge</span><span class="p">(</span><span class="nx">msg</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">message</span> <span class="o">=</span> <span class="nx">msg</span><span class="p">;</span>
<span class="p">};</span>
<span class="nx">Hoge</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">print</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"prototype+"</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
<span class="p">}</span>
<span class="kd">var</span> <span class="nx">obj</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Hoge</span><span class="p">(</span><span class="s2">"Hello"</span><span class="p">);</span>
<span class="c1">// prototype+Hello と表示</span>
<span class="nx">obj</span><span class="p">.</span><span class="nx">print</span><span class="p">();</span>
</pre></div></div>

<h1>
<span id="functionapply-とか-functioncall-とかで無理矢理変えられた時のthis" class="fragment"></span><a href="#functionapply-%E3%81%A8%E3%81%8B-functioncall-%E3%81%A8%E3%81%8B%E3%81%A7%E7%84%A1%E7%90%86%E7%9F%A2%E7%90%86%E5%A4%89%E3%81%88%E3%82%89%E3%82%8C%E3%81%9F%E6%99%82%E3%81%AEthis"><i class="fa fa-link"></i></a>function#apply とか function#call とかで無理矢理変えられた時のthis</h1>

<p>thisを外部からの干渉で無理矢理書き換えられた場合。jQuery使っててclickイベントとか取るとthisが書き換えられている。そういうAPIなの。JavaScriptはNTR文化なの。</p>

<p>あと、<code>document.getElementsByTagName("div")</code> とかやると NodeList が取れる。そこで <code>Array.prototype.slice.call(document.getElementsByTagName("div"))</code> とかすると Array に変換できるハックがある。ってりんごが言ってた。</p>

<div class="code-frame" data-lang="js"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">hoge</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">foo</span><span class="o">:</span> <span class="s2">"bar"</span><span class="p">,</span>
    <span class="nx">print</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">foo</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">};</span>
<span class="c1">// 何かに所属している時のthisなので bar と表示</span>
<span class="nx">hoge</span><span class="p">.</span><span class="nx">print</span><span class="p">();</span>

<span class="kd">var</span> <span class="nx">paramour</span> <span class="o">=</span> <span class="p">{</span><span class="nx">foo</span><span class="o">:</span><span class="s2">"NTR"</span><span class="p">};</span>
<span class="c1">// thisをすり替えられたので NTR と表示</span>
<span class="nx">hoge</span><span class="p">.</span><span class="nx">print</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">paramour</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">Hoge</span> <span class="o">=</span> <span class="kd">function</span> <span class="nx">Hoge</span><span class="p">(</span><span class="nx">msg</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">message</span> <span class="o">=</span> <span class="nx">msg</span><span class="p">;</span>
<span class="p">}</span>
<span class="nx">Hoge</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">print</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"Love "</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
<span class="p">}</span>

<span class="kd">var</span> <span class="nx">obj1</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Hoge</span><span class="p">(</span><span class="s2">"sarari-man"</span><span class="p">);</span>
<span class="c1">// Love sarari-man と表示</span>
<span class="nx">obj1</span><span class="p">.</span><span class="nx">print</span><span class="p">();</span>
<span class="c1">// アイエエエエ！？ニンジャ！？ニンジャナンデ！？</span>
<span class="nx">obj1</span><span class="p">.</span><span class="nx">print</span><span class="p">.</span><span class="nx">call</span><span class="p">({</span><span class="nx">message</span><span class="o">:</span><span class="s2">"ninja"</span><span class="p">});</span>

<span class="c1">// thisを保護する方法もあるよ</span>
<span class="kd">var</span> <span class="nx">ProtectedHoge</span> <span class="o">=</span> <span class="kd">function</span> <span class="nx">ProtectedHoge</span><span class="p">(</span><span class="nx">msg</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">message</span> <span class="o">=</span> <span class="nx">msg</span><span class="p">;</span>
    <span class="c1">// this を保存しておく</span>
    <span class="kd">var</span> <span class="nx">_this</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">print</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">fn</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// fn に元々のthis.printが入ってる。</span>
        <span class="k">return</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="c1">// 元々のthis.printを_thisに保存しておいた元々のthisを指定して実行しなおす。</span>
            <span class="nx">fn</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">_this</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
        <span class="p">};</span>
    <span class="p">})(</span><span class="k">this</span><span class="p">.</span><span class="nx">print</span><span class="p">);</span>
<span class="p">}</span>
<span class="nx">ProtectedHoge</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">print</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"Love "</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
<span class="p">}</span>

<span class="kd">var</span> <span class="nx">obj2</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ProtectedHoge</span><span class="p">(</span><span class="s2">"NinjaSlayer"</span><span class="p">);</span>
<span class="c1">// ドーモ、ニンジャスレイヤーです。ニンジャ殺すべし。</span>
<span class="nx">obj2</span><span class="p">.</span><span class="nx">print</span><span class="p">.</span><span class="nx">call</span><span class="p">({</span><span class="nx">message</span><span class="o">:</span><span class="s2">"ninja"</span><span class="p">});</span>
</pre></div></div>

<p>ちなみにCoffeeScriptだとthisの保護も超カンタン <code>-&gt;</code> じゃなくて <code>=&gt;</code> 使うだけ。<a href="http://coffeescript.org/#try:class%20ProtectedHoge%0A%20%20constructor%3A%28%40message%29%20-%3E%0A%20%20print%3A%28%29%20%3D%3E%0A%20%20%20%20console.log%28%40message%29%0A%0Anew%20ProtectedHoge%28%22Fujikido%22%29.print%28%29%0A" rel="nofollow noopener" target="_blank">コンパイル後のコード</a></p>

<div class="code-frame" data-lang="coffeescript"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nx">ProtectedHoge</span>
  <span class="nx">constructor</span><span class="o">:</span><span class="nf">(@message) -&gt;</span>
  <span class="nx">print</span><span class="o">:</span><span class="nf">() =&gt;</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">@message</span><span class="p">)</span>

<span class="k">new</span> <span class="nx">ProtectedHoge</span><span class="p">(</span><span class="s">"Fujikido"</span><span class="p">).</span><span class="nx">print</span><span class="p">()</span>
</pre></div></div>

<h1>
<span id="ねっ簡単でしょう" class="fragment"></span><a href="#%E3%81%AD%E3%81%A3%E7%B0%A1%E5%8D%98%E3%81%A7%E3%81%97%E3%82%87%E3%81%86"><i class="fa fa-link"></i></a>ねっ？簡単でしょう？</h1>

<p>呼び出し元からthisを変えられる仕様にしたヤツを腹を切れ（#^ω^）ﾋﾞｷﾋﾞｷ</p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1" style="height:150px;">
<tr>
	<td rowspan="3">74位</td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="thumb-up-120px.png" /></i>760</kbd>
		<a target="_blank" href="https://qiita.com/osamu1203/items/cb94ef9da02e1ec3e921">git fetchの理解からgit mergeとpullの役割</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-10-31<br />23:56:05</center>
	</td>
	<td style="width:200px;">
		<!--投稿者-->
		<center>
			@<a href="user/24308.html">osamu1203</a>(89件の記事)<br />(ever sense, Inc. 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/24308/profile-images/1473684087">
		</center>
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Git]</b> <b>[GitHub]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<!--
		<div style="width:350px;height:150px;overflow:scroll;">%s</div>
		-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p><a href="https://camo.qiitausercontent.com/5c42392546b7e3159a1d18f820e0df8b31a03656/687474703a2f2f6661726d382e737461746963666c69636b722e636f6d2f373035352f373030353332333838345f343734373565343166312e6a7067" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/5c42392546b7e3159a1d18f820e0df8b31a03656/687474703a2f2f6661726d382e737461746963666c69636b722e636f6d2f373035352f373030353332333838345f343734373565343166312e6a7067" alt="photo by yukop" data-canonical-src="http://farm8.staticflickr.com/7055/7005323884_47475e41f1.jpg"></a></p>

<p>gitを使い始めるとcommit, push, pullなどはある程度理解出来るようになりますが、<b>fetch</b>ってなんだ？ってなりますよね。</p>

<p>あまり馴染みにくいのは、pullが<b>fetch</b>と<b>merge</b>の両方を組み合わせたコマンドだからなんですね。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>pull = fetch + merge origin/master
</pre></div></div>

<h1>
<span id="fetchとは" class="fragment"></span><a href="#fetch%E3%81%A8%E3%81%AF"><i class="fa fa-link"></i></a>fetchとは</h1>

<p>gitの場合、リポジトリはリモートとローカルの２ヶ所あります。fetchとはリモートリポジトリから最新情報をローカルリポジトリに持ってくるコマンドです。<br>
fetchをしても、pullのようにファイルが更新されるわけではありません。<br>
あくまでもローカルリポジトリが更新されるだけです。</p>

<p>もっと詳しくいうと、例えばmasterブランチを使っているのであれば、<br>
<b>origin/masterが更新される</b>ということです。</p>

<h1>
<span id="masterとoriginmasterの違い" class="fragment"></span><a href="#master%E3%81%A8originmaster%E3%81%AE%E9%81%95%E3%81%84"><i class="fa fa-link"></i></a>masterとorigin/masterの違い</h1>

<p>masterは、例えばローカルのファイルを更新してコミットする場合にはmasterに入りますよね。<br>
ローカルの作業ディレクトリと結び付いているのがmasterブランチです。</p>

<p>origin/masterとはリポジトリと結びついているブランチです。<br>
とはいってもorigin/masterを参照するといっても、常に直接リモート側を見ているわけではないのです。<br>
<b>git fetchをすることでorigin/masterが更新</b>されるのですね。</p>

<p>ローカルリポジトリの中にはmasterとorigin/masterの２つそれぞれの情報が置かれていることになります。<br>
fetchを行ったときに新しい更新があったとするとorigin/masterが最新になり、masterはその分の更新がまだ行われていない事になります。<br>
そこでmergeが必要になるんですね。</p>

<p>master ← origin/master　最新情報をマージするわけですね。</p>

<h1>
<span id="git-mergeへ" class="fragment"></span><a href="#git-merge%E3%81%B8"><i class="fa fa-link"></i></a>git mergeへ</h1>

<p>という理解を持てないと、svnなどを使ってきた人にはどこのブランチをマージするのか？となりますよね。<br>
リモートリポジトリの最新情報をローカルのmasterブランチにマージする必要があります。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>git merge origin/master
</pre></div></div>

<p>ここまで処理を行うことでローカルのファイルが最新状態に更新されます。</p>

<h1>
<span id="git-pull" class="fragment"></span><a href="#git-pull"><i class="fa fa-link"></i></a>git pull</h1>

<p>git pull は上記の工程を一気に行うコマンドでした。<br>
便利なコマンドではありますが、これらの理解をした上で利用することでpullしたときにコンフリクトなどが発生してテンパらずに正しい理解で行動出来ますね。</p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1" style="height:150px;">
<tr>
	<td rowspan="3">75位</td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="thumb-up-120px.png" /></i>741</kbd>
		<a target="_blank" href="https://qiita.com/awakia/items/d880250adc8cdbe7a32f">RSpecのshouldはもう古い！新しい記法expectを使おう！</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-03-25<br />02:57:50</center>
	</td>
	<td style="width:200px;">
		<!--投稿者-->
		<center>
			@<a href="user/6664.html">awakia</a>(152件の記事)<br />(Wantedly, Inc. 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/6664/profile-images/1473683079">
		</center>
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Ruby]</b> <b>[RSpec]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<!--
		<div style="width:350px;height:150px;overflow:scroll;">%s</div>
		-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>RspecのVersion2.11から</p>

<div class="code-frame" data-lang="ruby">
<div class="code-lang"><span class="bold">old_spec.rb</span></div>
<div class="highlight"><pre><span></span><span class="n">foo</span><span class="o">.</span><span class="n">should</span> <span class="n">eq</span><span class="p">(</span><span class="n">bar</span><span class="p">)</span>
<span class="n">foo</span><span class="o">.</span><span class="n">should_not</span> <span class="n">eq</span><span class="p">(</span><span class="n">bar</span><span class="p">)</span>
</pre></div>
</div>

<p>を</p>

<div class="code-frame" data-lang="ruby">
<div class="code-lang"><span class="bold">new_spec.rb</span></div>
<div class="highlight"><pre><span></span><span class="n">expect</span><span class="p">(</span><span class="n">foo</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="n">eq</span><span class="p">(</span><span class="n">bar</span><span class="p">)</span>
<span class="n">expect</span><span class="p">(</span><span class="n">foo</span><span class="p">)</span><span class="o">.</span><span class="n">not_to</span> <span class="n">eq</span><span class="p">(</span><span class="n">bar</span><span class="p">)</span>
</pre></div>
</div>

<p>というように書くようになりました。</p>

<p>別にshouldを使った記法がなくなったわけではありませんが、<br>
<a href="https://github.com/rspec/rspec-expectations" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/rspec/rspec-expectations</a><br>
のREADME.mdには、もう新しいSyntaxの説明しか載っていないし、今後はexpectの方を使っていくほうがいいでしょう。</p>

<p><a href="http://myronmars.to/n/dev-blog/2012/06/rspecs-new-expectation-syntax" class="autolink" rel="nofollow noopener" target="_blank">http://myronmars.to/n/dev-blog/2012/06/rspecs-new-expectation-syntax</a><br>
には、新しいSyntaxを導入した背景が説明されています。<br>
簡潔に書くと、shouldだとBasicObjectを継承したクラスのテストを書くときに不具合が起こるみたいですね。</p>

<h2>
<span id="移行方法" class="fragment"></span><a href="#%E7%A7%BB%E8%A1%8C%E6%96%B9%E6%B3%95"><i class="fa fa-link"></i></a>移行方法</h2>

<h3>
<span id="基本" class="fragment"></span><a href="#%E5%9F%BA%E6%9C%AC"><i class="fa fa-link"></i></a>基本</h3>

<p>基本的には、上に書いたように、</p>

<ul>
<li>
<code>foo.should</code> を <code>expect(foo).to</code> に</li>
<li>
<code>foo.should_not</code> を <code>expect(foo).not_to</code> に</li>
</ul>

<p>置き換えるだけです。</p>

<h3>
<span id="比較演算子をとる" class="fragment"></span><a href="#%E6%AF%94%E8%BC%83%E6%BC%94%E7%AE%97%E5%AD%90%E3%82%92%E3%81%A8%E3%82%8B"><i class="fa fa-link"></i></a>比較演算子をとる</h3>

<p>ただし、    shouldの後に直接オペレータをとる記法は使えなくなりました。<br>
具体的には、</p>

<div class="code-frame" data-lang="ruby">
<div class="code-lang"><span class="bold">old_operator_expectations.rb</span></div>
<div class="highlight"><pre><span></span><span class="n">foo</span><span class="o">.</span><span class="n">should</span> <span class="o">==</span> <span class="n">bar</span>
<span class="s2">"a string"</span><span class="o">.</span><span class="n">should_not</span> <span class="o">=~</span> <span class="sr">/a regex/</span>
<span class="o">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="o">].</span><span class="n">should</span> <span class="o">=~</span> <span class="o">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="o">]</span>

<span class="n">foo</span><span class="o">.</span><span class="n">should</span> <span class="o">&lt;</span> <span class="n">bar</span>  <span class="c1"># &lt;=, &gt;, &gt;= も同様</span>
</pre></div>
</div>

<p>を</p>

<div class="code-frame" data-lang="ruby">
<div class="code-lang"><span class="bold">new_operator_expectations.rb</span></div>
<div class="highlight"><pre><span></span><span class="n">expect</span><span class="p">(</span><span class="n">foo</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="n">eq</span> <span class="n">bar</span>
<span class="n">expect</span><span class="p">(</span><span class="s2">"a string"</span><span class="p">)</span><span class="o">.</span><span class="n">not_to</span> <span class="n">match</span> <span class="sr">/a regex/</span>
<span class="n">expect</span><span class="p">(</span><span class="o">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="o">]</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="n">match_array</span> <span class="o">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="o">]</span>

<span class="n">expect</span><span class="p">(</span><span class="n">foo</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="n">be</span> <span class="o">&lt;</span> <span class="n">bar</span>  <span class="c1"># &lt;=, &gt;, &gt;= も同様</span>
</pre></div>
</div>

<p>のように変えます。<br>
つまり、</p>

<ul>
<li>
<code>==</code>の代わりに<code>eq</code>
</li>
<li>正規表現関係の<code>=~</code>の代わりに<code>match</code>
</li>
<li>配列の<code>=~</code>の代わりに<code>match_array</code>
</li>
</ul>

<p>を使えばいいんですね。</p>

<p>shouldの後に比較演算子<code>&lt;</code>をとる記法の代わりは、<code>be &lt;</code>というように<code>be</code>を入れれば解決します。<br>
<code>should(to) less than</code>より<code>should(to) be less than</code>の方が英語的に正しいので、これはこれでOKですね。</p>

<h3>
<span id="ブロックをとる" class="fragment"></span><a href="#%E3%83%96%E3%83%AD%E3%83%83%E3%82%AF%E3%82%92%E3%81%A8%E3%82%8B"><i class="fa fa-link"></i></a>ブロックをとる</h3>

<p>また、このexpect記法だと、ブロックをとることができるので、</p>

<div class="code-frame" data-lang="ruby">
<div class="code-lang"><span class="bold">old_block_expectations.rb</span></div>
<div class="highlight"><pre><span></span><span class="nb">lambda</span> <span class="p">{</span> <span class="n">do_something</span> <span class="p">}</span><span class="o">.</span><span class="n">should</span> <span class="n">raise_error</span><span class="p">(</span><span class="no">SomeError</span><span class="p">)</span>
</pre></div>
</div>

<p>を</p>

<div class="code-frame" data-lang="ruby">
<div class="code-lang"><span class="bold">new_block_expectations.rb</span></div>
<div class="highlight"><pre><span></span><span class="n">expect</span> <span class="p">{</span> <span class="n">something</span> <span class="p">}</span><span class="o">.</span><span class="n">to</span> <span class="n">raise_error</span><span class="p">(</span><span class="no">SomeError</span><span class="p">)</span>
</pre></div>
</div>

<p>と書けるので、統一感があっていいですね。</p>

<h2>
<span id="移行が終わったら" class="fragment"></span><a href="#%E7%A7%BB%E8%A1%8C%E3%81%8C%E7%B5%82%E3%82%8F%E3%81%A3%E3%81%9F%E3%82%89"><i class="fa fa-link"></i></a>移行が終わったら</h2>

<div class="code-frame" data-lang="ruby">
<div class="code-lang"><span class="bold">config/initializers/rspec.rb</span></div>
<div class="highlight"><pre><span></span><span class="no">RSpec</span><span class="o">.</span><span class="n">configure</span> <span class="k">do</span> <span class="o">|</span><span class="n">config</span><span class="o">|</span>
  <span class="n">config</span><span class="o">.</span><span class="n">expect_with</span> <span class="ss">:rspec</span> <span class="k">do</span> <span class="o">|</span><span class="n">c</span><span class="o">|</span>
    <span class="n">c</span><span class="o">.</span><span class="n">syntax</span> <span class="o">=</span> <span class="ss">:expect</span>    <span class="c1"># disables `should`</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</div>

<p>とすると、今後shouldを使った書き方ができなくなります。</p>

<p>ちなみにデフォルトでは</p>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span>    <span class="n">c</span><span class="o">.</span><span class="n">syntax</span> <span class="o">=</span> <span class="o">[</span><span class="ss">:should</span><span class="p">,</span> <span class="ss">:expect</span><span class="o">]</span>  <span class="c1"># enables both `should` and `expect`</span>
</pre></div></div>

<p>と設定したのと同じになっています。</p>

<h2>
<span id="他のシチュエーションの書き方一覧" class="fragment"></span><a href="#%E4%BB%96%E3%81%AE%E3%82%B7%E3%83%81%E3%83%A5%E3%82%A8%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E3%81%AE%E6%9B%B8%E3%81%8D%E6%96%B9%E4%B8%80%E8%A6%A7"><i class="fa fa-link"></i></a>他のシチュエーションの書き方一覧</h2>

<p>基本的に置き換えは上記の通り行うと済みますが、参照用に<br>
<a href="https://github.com/rspec/rspec-expectations" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/rspec/rspec-expectations</a><br>
に載っている他の書き方をそのまま転載しておきます。</p>

<h3>
<span id="equivalence" class="fragment"></span><a href="#equivalence"><i class="fa fa-link"></i></a>Equivalence</h3>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="n">expect</span><span class="p">(</span><span class="n">actual</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="n">eq</span><span class="p">(</span><span class="n">expected</span><span class="p">)</span>  <span class="c1"># passes if actual == expected</span>
<span class="n">expect</span><span class="p">(</span><span class="n">actual</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="n">eql</span><span class="p">(</span><span class="n">expected</span><span class="p">)</span> <span class="c1"># passes if actual.eql?(expected)</span>
</pre></div></div>

<p>Note: The new <code>expect</code> syntax no longer supports <code>==</code> matcher.</p>

<h3>
<span id="identity" class="fragment"></span><a href="#identity"><i class="fa fa-link"></i></a>Identity</h3>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="n">expect</span><span class="p">(</span><span class="n">actual</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="n">be</span><span class="p">(</span><span class="n">expected</span><span class="p">)</span>    <span class="c1"># passes if actual.equal?(expected)</span>
<span class="n">expect</span><span class="p">(</span><span class="n">actual</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="n">equal</span><span class="p">(</span><span class="n">expected</span><span class="p">)</span> <span class="c1"># passes if actual.equal?(expected)</span>
</pre></div></div>

<h3>
<span id="comparisons" class="fragment"></span><a href="#comparisons"><i class="fa fa-link"></i></a>Comparisons</h3>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="n">expect</span><span class="p">(</span><span class="n">actual</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="n">be</span> <span class="o">&gt;</span>  <span class="n">expected</span>
<span class="n">expect</span><span class="p">(</span><span class="n">actual</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="n">be</span> <span class="o">&gt;=</span> <span class="n">expected</span>
<span class="n">expect</span><span class="p">(</span><span class="n">actual</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="n">be</span> <span class="o">&lt;=</span> <span class="n">expected</span>
<span class="n">expect</span><span class="p">(</span><span class="n">actual</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="n">be</span> <span class="o">&lt;</span>  <span class="n">expected</span>
<span class="n">expect</span><span class="p">(</span><span class="n">actual</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="n">be_within</span><span class="p">(</span><span class="n">delta</span><span class="p">)</span><span class="o">.</span><span class="n">of</span><span class="p">(</span><span class="n">expected</span><span class="p">)</span>
</pre></div></div>

<h3>
<span id="regular-expressions" class="fragment"></span><a href="#regular-expressions"><i class="fa fa-link"></i></a>Regular expressions</h3>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="n">expect</span><span class="p">(</span><span class="n">actual</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="n">match</span><span class="p">(</span><span class="sr">/expression/</span><span class="p">)</span>
</pre></div></div>

<p>Note: The new <code>expect</code> syntax no longer supports <code>=~</code> matcher.</p>

<h3>
<span id="typesclasses" class="fragment"></span><a href="#typesclasses"><i class="fa fa-link"></i></a>Types/classes</h3>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="n">expect</span><span class="p">(</span><span class="n">actual</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="n">be_an_instance_of</span><span class="p">(</span><span class="n">expected</span><span class="p">)</span>
<span class="n">expect</span><span class="p">(</span><span class="n">actual</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="n">be_a_kind_of</span><span class="p">(</span><span class="n">expected</span><span class="p">)</span>
</pre></div></div>

<h3>
<span id="truthiness" class="fragment"></span><a href="#truthiness"><i class="fa fa-link"></i></a>Truthiness</h3>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="n">expect</span><span class="p">(</span><span class="n">actual</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="n">be_true</span>  <span class="c1"># passes if actual is truthy (not nil or false)</span>
<span class="n">expect</span><span class="p">(</span><span class="n">actual</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="n">be_false</span> <span class="c1"># passes if actual is falsy (nil or false)</span>
<span class="n">expect</span><span class="p">(</span><span class="n">actual</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="n">be_nil</span>   <span class="c1"># passes if actual is nil</span>
</pre></div></div>

<h3>
<span id="expecting-errors" class="fragment"></span><a href="#expecting-errors"><i class="fa fa-link"></i></a>Expecting errors</h3>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="n">expect</span> <span class="p">{</span> <span class="o">...</span> <span class="p">}</span><span class="o">.</span><span class="n">to</span> <span class="n">raise_error</span>
<span class="n">expect</span> <span class="p">{</span> <span class="o">...</span> <span class="p">}</span><span class="o">.</span><span class="n">to</span> <span class="n">raise_error</span><span class="p">(</span><span class="no">ErrorClass</span><span class="p">)</span>
<span class="n">expect</span> <span class="p">{</span> <span class="o">...</span> <span class="p">}</span><span class="o">.</span><span class="n">to</span> <span class="n">raise_error</span><span class="p">(</span><span class="s2">"message"</span><span class="p">)</span>
<span class="n">expect</span> <span class="p">{</span> <span class="o">...</span> <span class="p">}</span><span class="o">.</span><span class="n">to</span> <span class="n">raise_error</span><span class="p">(</span><span class="no">ErrorClass</span><span class="p">,</span> <span class="s2">"message"</span><span class="p">)</span>
</pre></div></div>

<h3>
<span id="expecting-throws" class="fragment"></span><a href="#expecting-throws"><i class="fa fa-link"></i></a>Expecting throws</h3>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="n">expect</span> <span class="p">{</span> <span class="o">...</span> <span class="p">}</span><span class="o">.</span><span class="n">to</span> <span class="n">throw_symbol</span>
<span class="n">expect</span> <span class="p">{</span> <span class="o">...</span> <span class="p">}</span><span class="o">.</span><span class="n">to</span> <span class="n">throw_symbol</span><span class="p">(</span><span class="ss">:symbol</span><span class="p">)</span>
<span class="n">expect</span> <span class="p">{</span> <span class="o">...</span> <span class="p">}</span><span class="o">.</span><span class="n">to</span> <span class="n">throw_symbol</span><span class="p">(</span><span class="ss">:symbol</span><span class="p">,</span> <span class="s1">'value'</span><span class="p">)</span>
</pre></div></div>

<h3>
<span id="yielding" class="fragment"></span><a href="#yielding"><i class="fa fa-link"></i></a>Yielding</h3>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="n">expect</span> <span class="p">{</span> <span class="o">|</span><span class="n">b</span><span class="o">|</span> <span class="mi">5</span><span class="o">.</span><span class="n">tap</span><span class="p">(</span><span class="o">&amp;</span><span class="n">b</span><span class="p">)</span> <span class="p">}</span><span class="o">.</span><span class="n">to</span> <span class="n">yield_control</span> <span class="c1"># passes regardless of yielded args</span>

<span class="n">expect</span> <span class="p">{</span> <span class="o">|</span><span class="n">b</span><span class="o">|</span> <span class="n">yield_if_true</span><span class="p">(</span><span class="kp">true</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">b</span><span class="p">)</span> <span class="p">}</span><span class="o">.</span><span class="n">to</span> <span class="n">yield_with_no_args</span> <span class="c1"># passes only if no args are yielded</span>

<span class="n">expect</span> <span class="p">{</span> <span class="o">|</span><span class="n">b</span><span class="o">|</span> <span class="mi">5</span><span class="o">.</span><span class="n">tap</span><span class="p">(</span><span class="o">&amp;</span><span class="n">b</span><span class="p">)</span> <span class="p">}</span><span class="o">.</span><span class="n">to</span> <span class="n">yield_with_args</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="n">expect</span> <span class="p">{</span> <span class="o">|</span><span class="n">b</span><span class="o">|</span> <span class="mi">5</span><span class="o">.</span><span class="n">tap</span><span class="p">(</span><span class="o">&amp;</span><span class="n">b</span><span class="p">)</span> <span class="p">}</span><span class="o">.</span><span class="n">to</span> <span class="n">yield_with_args</span><span class="p">(</span><span class="no">Fixnum</span><span class="p">)</span>
<span class="n">expect</span> <span class="p">{</span> <span class="o">|</span><span class="n">b</span><span class="o">|</span> <span class="s2">"a string"</span><span class="o">.</span><span class="n">tap</span><span class="p">(</span><span class="o">&amp;</span><span class="n">b</span><span class="p">)</span> <span class="p">}</span><span class="o">.</span><span class="n">to</span> <span class="n">yield_with_args</span><span class="p">(</span><span class="sr">/str/</span><span class="p">)</span>

<span class="n">expect</span> <span class="p">{</span> <span class="o">|</span><span class="n">b</span><span class="o">|</span> <span class="o">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="o">].</span><span class="n">each</span><span class="p">(</span><span class="o">&amp;</span><span class="n">b</span><span class="p">)</span> <span class="p">}</span><span class="o">.</span><span class="n">to</span> <span class="n">yield_successive_args</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="n">expect</span> <span class="p">{</span> <span class="o">|</span><span class="n">b</span><span class="o">|</span> <span class="p">{</span> <span class="ss">:a</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span> <span class="ss">:b</span> <span class="o">=&gt;</span> <span class="mi">2</span> <span class="p">}</span><span class="o">.</span><span class="n">each</span><span class="p">(</span><span class="o">&amp;</span><span class="n">b</span><span class="p">)</span> <span class="p">}</span><span class="o">.</span><span class="n">to</span> <span class="n">yield_successive_args</span><span class="p">(</span><span class="o">[</span><span class="ss">:a</span><span class="p">,</span> <span class="mi">1</span><span class="o">]</span><span class="p">,</span> <span class="o">[</span><span class="ss">:b</span><span class="p">,</span> <span class="mi">2</span><span class="o">]</span><span class="p">)</span>
</pre></div></div>

<h3>
<span id="predicate-matchers" class="fragment"></span><a href="#predicate-matchers"><i class="fa fa-link"></i></a>Predicate matchers</h3>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="n">expect</span><span class="p">(</span><span class="n">actual</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="n">be_xxx</span>         <span class="c1"># passes if actual.xxx?</span>
<span class="n">expect</span><span class="p">(</span><span class="n">actual</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="n">have_xxx</span><span class="p">(</span><span class="ss">:arg</span><span class="p">)</span> <span class="c1"># passes if actual.has_xxx?(:arg)</span>
</pre></div></div>

<h3>
<span id="ranges-ruby--19-only" class="fragment"></span><a href="#ranges-ruby--19-only"><i class="fa fa-link"></i></a>Ranges (Ruby &gt;= 1.9 only)</h3>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="n">expect</span><span class="p">(</span><span class="mi">1</span><span class="o">..</span><span class="mi">10</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="n">cover</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</pre></div></div>

<h3>
<span id="collection-membership" class="fragment"></span><a href="#collection-membership"><i class="fa fa-link"></i></a>Collection membership</h3>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="n">expect</span><span class="p">(</span><span class="n">actual</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="kp">include</span><span class="p">(</span><span class="n">expected</span><span class="p">)</span>
<span class="n">expect</span><span class="p">(</span><span class="n">actual</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="n">start_with</span><span class="p">(</span><span class="n">expected</span><span class="p">)</span>
<span class="n">expect</span><span class="p">(</span><span class="n">actual</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="n">end_with</span><span class="p">(</span><span class="n">expected</span><span class="p">)</span>
</pre></div></div>

<h4>
<span id="examples" class="fragment"></span><a href="#examples"><i class="fa fa-link"></i></a>Examples</h4>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="n">expect</span><span class="p">(</span><span class="o">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="o">]</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="kp">include</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">expect</span><span class="p">(</span><span class="o">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="o">]</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="kp">include</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">expect</span><span class="p">(</span><span class="o">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="o">]</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="n">start_with</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">expect</span><span class="p">(</span><span class="o">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="o">]</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="n">start_with</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
<span class="n">expect</span><span class="p">(</span><span class="o">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="o">]</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="n">end_with</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="n">expect</span><span class="p">(</span><span class="o">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="o">]</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="n">end_with</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>
<span class="n">expect</span><span class="p">({</span><span class="ss">:a</span> <span class="o">=&gt;</span> <span class="s1">'b'</span><span class="p">})</span><span class="o">.</span><span class="n">to</span> <span class="kp">include</span><span class="p">(</span><span class="ss">:a</span> <span class="o">=&gt;</span> <span class="s1">'b'</span><span class="p">)</span>
<span class="n">expect</span><span class="p">(</span><span class="s2">"this string"</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="kp">include</span><span class="p">(</span><span class="s2">"is str"</span><span class="p">)</span>
<span class="n">expect</span><span class="p">(</span><span class="s2">"this string"</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="n">start_with</span><span class="p">(</span><span class="s2">"this"</span><span class="p">)</span>
<span class="n">expect</span><span class="p">(</span><span class="s2">"this string"</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="n">end_with</span><span class="p">(</span><span class="s2">"ring"</span><span class="p">)</span>
</pre></div></div>
</div>
	</td>
</tr>
</table>
<br />
<table border="1" style="height:150px;">
<tr>
	<td rowspan="3">76位</td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="thumb-up-120px.png" /></i>737</kbd>
		<a target="_blank" href="https://qiita.com/yimajo/items/c67cb711851f747c35e5">iOS実機のSSL通信をプロキシによって傍受したり改ざんする方法</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-12-16<br />11:19:00</center>
	</td>
	<td style="width:200px;">
		<!--投稿者-->
		<center>
			@<a href="user/16400.html">yimajo</a>(142件の記事)<br />(株式会社キュリオシティソフトウェア 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/16400/profile-images/1473681849">
		</center>
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Python]</b> <b>[iPhone]</b> <b>[iOS]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<!--
		<div style="width:350px;height:150px;overflow:scroll;">%s</div>
		-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;">
<h1>
<span id="はじめに" class="fragment"></span><a href="#%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB"><i class="fa fa-link"></i></a>はじめに</h1>

<p>スマートフォンアプリ開発でAPIを介しWeb/APIサーバーとやりとりをする場合、「httpsを使っていれば通信はユーザーにバレない」なんてことはなく、Webアプリでツールを使ってできるのと同じようにユーザーには通信内容の確認や改竄などができます。</p>

<p>そのため、そのことを前提にアプリやサーバーAPIの設計と実装を行わない場合、アプリ利用者によるゲームスコア結果送信の改竄や、ソーシャルゲームにおけるレイドボスなどへのダメージ操作、ECサイトアプリでの購入操作なども可能になってしまいます。</p>

<p>また、最近自分は<a href="https://itunes.apple.com/jp/app/nettorajio-j-popmo-wu-liaode/id769979888?mt=8" rel="nofollow noopener" target="_blank">「無料で音楽聴き放題!! - ネットラジオ」というアプリをリリースしたのですが</a>、このアプリに導入するスタティックリンクライブラリが不明な外部サーバーへ通信していないか、SSLを使用しているつもりがそうでない通信をしてしまっていないかのチェックをするため、自分は<a href="http://mitmproxy.org/" rel="nofollow noopener" target="_blank">mitmproxy</a>というプロキシサーバーのツールを利用しています。</p>

<p>以降の内容はこんな感じです</p>

<ul>
<li>mitmproxyとその導入について</li>
<li>通信内容の確認</li>
<li>通信内容の改竄（リクエストの書き換え、レスポンスの書き換え）</li>
</ul>

<p>必要なものは次の通りです</p>

<ul>
<li>有線LAN接続されたMac OSX（有線接続が必要なのはインターネット共有機能のためです）</li>
<li>homebrew</li>
</ul>

<h1>
<span id="mitmproxyとその導入について" class="fragment"></span><a href="#mitmproxy%E3%81%A8%E3%81%9D%E3%81%AE%E5%B0%8E%E5%85%A5%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6"><i class="fa fa-link"></i></a>mitmproxyとその導入について</h1>

<p>mitmproxyはコマンドライン製のプロキシツールです。名前のmitmとはman-in-the-middleの略で通信用語のman-in-the-middle attack(中間者攻撃)などに使われる用語から来ているようです。</p>

<p>中間者攻撃というと過激ですが、自分で開発したアプリに対して検証をする際には便利なツールとなります。</p>

<p>イメージとしては次のようになります。</p>

<p><a href="https://camo.qiitausercontent.com/08337d55990b56bfeb95aaa5ec69596ddbdd12df/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f31363430302f64663935346430332d313064642d613361332d393464652d6361633333363165663062322e6a706567" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/08337d55990b56bfeb95aaa5ec69596ddbdd12df/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f31363430302f64663935346430332d313064642d613361332d393464652d6361633333363165663062322e6a706567" alt="mitm_2.jpg" title="mitm_2.jpg" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/16400/df954d03-10dd-a3a3-94de-cac3361ef0b2.jpeg"></a></p>

<p>Mac OSX搭載の標準設定にあるインターネット共有(OSX自体がWiFiルータになる機能)を使い、通信をproxyで中継しiOS実機でそのWiFiを利用するというのが大雑把な仕組みです。</p>

<h2>
<span id="pythonのインストール" class="fragment"></span><a href="#python%E3%81%AE%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB"><i class="fa fa-link"></i></a>Pythonのインストール</h2>

<p>mitmproxyの実行には、まずPythonが必要になるのでhomebrewでPythonをインストールします</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span> $ brew update
 $ brew upgrade
 $ brew install python
</pre></div></div>

<p>次にpipをインストールします。easy_insallはbrewによるpythonのインストールと同時にインストールされているはずです。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ easy_install pip
</pre></div></div>

<h2>
<span id="mitmproxyのインストール" class="fragment"></span><a href="#mitmproxy%E3%81%AE%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB"><i class="fa fa-link"></i></a>mitmproxyのインストール</h2>

<p>pipからmitmproxyをインストールします</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ pip install mitmproxy
</pre></div></div>

<p>すでにインストールしていてアップデートしたい場合は次のようにオプション-Uを付けてアップデートしておきましょう。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ pip install mitmproxy -U
</pre></div></div>

<p>pipでインストールすることで関連するライブラリもインストールされます。</p>

<h1>
<span id="mitmproxyの起動" class="fragment"></span><a href="#mitmproxy%E3%81%AE%E8%B5%B7%E5%8B%95"><i class="fa fa-link"></i></a>mitmproxyの起動</h1>

<p>実行は次の通り、オプション-pでポートを指定します。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ mitmproxy -p 8080
</pre></div></div>

<p>私はポート8080を指定していますが、これはiPhone側からのWiFi設定でも8080を指定が必要です。</p>

<p>iOSのWiFi設定からHTTPプロキシで手動を選択しサーバーのアドレスとポート番号を指定できるようになっています。</p>

<p><a href="https://camo.qiitausercontent.com/ed0f5bf92b36217d492ffaf66fd9d6ea3a1c54db/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f31363430302f33323738633637642d326535612d653133302d616262632d3637626365346130343461642e6a706567" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/ed0f5bf92b36217d492ffaf66fd9d6ea3a1c54db/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f31363430302f33323738633637642d326535612d653133302d616262632d3637626365346130343461642e6a706567" alt="IMG_0669.jpg" title="IMG_0669.jpg" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/16400/3278c67d-2e5a-e130-abbc-67bce4a044ad.jpeg"></a></p>

<p>（図のsunnyとはMac OSXのマシン名で、WiFi名ですので気にしないでください）</p>

<h2>
<span id="iphone実機へのルート証明書のインストール" class="fragment"></span><a href="#iphone%E5%AE%9F%E6%A9%9F%E3%81%B8%E3%81%AE%E3%83%AB%E3%83%BC%E3%83%88%E8%A8%BC%E6%98%8E%E6%9B%B8%E3%81%AE%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB"><i class="fa fa-link"></i></a>iPhone実機へのルート証明書のインストール</h2>

<p>またmitmproxyを実行すると~/.mitmproxy/にmitmroxy-ca.pemという証明書が作成されます。<br>
OS XからiPhoneへこの証明書をメール送信し、iPhone側のメールクライアントから証明書を開くことでインストールすることが可能です。なお、この証明書はiOSアプリ開発者にはお馴染み[設定][一般][プロビジョニング]から確認できます。</p>

<h1>
<span id="mitmproxyを使う" class="fragment"></span><a href="#mitmproxy%E3%82%92%E4%BD%BF%E3%81%86"><i class="fa fa-link"></i></a>mitmproxyを使う</h1>

<p>mitmproxyの簡単な利用として、リクエストとレスポンスを見たり、それらを改竄、または通信を止めることが出来ます。</p>

<p>リクエストの改竄については、例えばすでに送信したリクエストからパラメータなどを変更することができ、変更したリクエストを再度送ることが出来ます。</p>

<p><a href="https://camo.qiitausercontent.com/ec98e1f247f51789bc572db4c9ce5eaefa7ca7f1/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f31363430302f35666365616131342d623464332d633133332d366435302d3535396432316130653132372e6a706567" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/ec98e1f247f51789bc572db4c9ce5eaefa7ca7f1/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f31363430302f35666365616131342d623464332d633133332d366435302d3535396432316130653132372e6a706567" alt="名称未設定.jpg" title="名称未設定.jpg" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/16400/5fceaa14-b4d3-c133-6d50-559d21a0e127.jpeg"></a></p>

<h2>
<span id="インタラクティブにリクエストレスポンスデータを書き換え" class="fragment"></span><a href="#%E3%82%A4%E3%83%B3%E3%82%BF%E3%83%A9%E3%82%AF%E3%83%86%E3%82%A3%E3%83%96%E3%81%AB%E3%83%AA%E3%82%AF%E3%82%A8%E3%82%B9%E3%83%88%E3%83%AC%E3%82%B9%E3%83%9D%E3%83%B3%E3%82%B9%E3%83%87%E3%83%BC%E3%82%BF%E3%82%92%E6%9B%B8%E3%81%8D%E6%8F%9B%E3%81%88"><i class="fa fa-link"></i></a>インタラクティブにリクエスト/レスポンスデータを書き換え</h2>

<p>mitmproxyを起動した図の画面のリクエスト一覧から、[Enterキー]でGETしたリクエスト/レスポンスの詳細画面に移ります。<br>
[eキー]でリクエスト（クエリ、パス、URL、ヘッダー、form、body、メソッド）を編集、<br>
一覧に戻り[rキー]で編集したリクエストを再度GETすることができます。</p>

<p>また、気付きづらいのですが[Vキー]で編集をもとに戻すこともできます。これらのショートカットは[?キー]を押すことによって確認することができます。</p>

<p>このようにインタラクティブにリクエストを編集できる機能は、サーバー側にAPIコールをお気楽に試せるため、サーバーAPI側の仕様が不明な場合に検証やテストを行うのに最適です。課金アイテムのリクエストなどでパラメータをデタラメにした場合の異常系や、In-App Purchase時のサーバーへのレシートの送信もテストできるでしょう。</p>

<p>逆にこのインタラクティブな書き換えでは、リクエストを編集し再度GET/POSTなどしても、アプリ側の通信が完了済みのため、アプリ側で改ざんされたリクエスト/レスポンスを受けてのテストなどが出来る場合は少ないと思います。</p>

<h2>
<span id="スクリプトによるリアルタイムなデータ改竄" class="fragment"></span><a href="#%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%97%E3%83%88%E3%81%AB%E3%82%88%E3%82%8B%E3%83%AA%E3%82%A2%E3%83%AB%E3%82%BF%E3%82%A4%E3%83%A0%E3%81%AA%E3%83%87%E3%83%BC%E3%82%BF%E6%94%B9%E7%AB%84"><i class="fa fa-link"></i></a>スクリプトによるリアルタイムなデータ改竄</h2>

<p>mitmproxyではインタラクティブな操作によるリクエスト/レスポンスの改竄ではなく、あらかじめ改ざんする内容を記載したPythonスクリプトファイルを指定することにより、通信ごとにスクリプトを適用することが出来ます。</p>

<p>例えばソーシャルゲームで多人数のユーザーが共通のボスと戦っているレイドボスと呼ばれるシステムがあったとします。</p>

<p>大抵の場合、流れは次のようになるでしょう</p>

<ul>
<li>ユーザーAがボスに100ダメージ与えた</li>
<li>サーバーにユーザーAが100ダメージを与えたことをリクエスト送信</li>
<li>サーバー側はユーザーAが100ダメージ与えたと認識</li>
<li>ユーザーAに完了のレスポンス</li>
</ul>

<p>mitmproxyでダメージを変え、ダメージを与えたご褒美アイテムの数を変更することを考えると、次のようになります。</p>

<ul>
<li>ユーザーAがボスに100ダメージ与えた

<ul>
<li>リクエストをフックし9999ダメージ与えたことに変更</li>
</ul>
</li>
<li>サーバーにユーザーAが9999ダメージを与えたことをリクエスト送信</li>
<li>サーバー側はユーザーAが9999ダメージ与えたと認識</li>
<li>ユーザーAに完了のレスポンス

<ul>
<li>レスポンスをフックしご褒美アイテムの数を増やす</li>
</ul>
</li>
</ul>

<p>スクリプトでリクエストレスポンスの改竄を行うことで、インタラクティブな書き換えではタイムアウトしてしまい出来なかった事ができるようになってしまいます。</p>

<h3>
<span id="スクリプトの指定" class="fragment"></span><a href="#%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%97%E3%83%88%E3%81%AE%E6%8C%87%E5%AE%9A"><i class="fa fa-link"></i></a>スクリプトの指定</h3>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ mitmproxy -s examples/add_header.py
</pre></div></div>

<p>サンプルにあるadd_header.pyは次のようにシンプルな内容なので導入に持ってこいではないでしょうか。</p>

<div class="code-frame" data-lang="python">
<div class="code-lang"><span class="bold">add_header.py</span></div>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">response</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">flow</span><span class="p">):</span>
    <span class="n">flow</span><span class="o">.</span><span class="n">response</span><span class="o">.</span><span class="n">headers</span><span class="p">[</span><span class="s2">"newheader"</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"foo"</span><span class="p">]</span>
</pre></div>
</div>

<p>responseメソッドは通信のレスポンスをHTTP(S)クライアントに届ける前に書き換えるメソッドです。このメソッドをオーバーライドし、レスポンスヘッダーに”newheader”を追加し、値をリストから文字列”foo”としています。</p>

<p>FlowクラスやResponseクラスについてはflow.pyに定義されているため、仕様を理解するにはそこを参照するしかないでしょう。</p>

<p><a href="https://github.com/mitmproxy/mitmproxy/blob/master/libmproxy/flow.py" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/mitmproxy/mitmproxy/blob/master/libmproxy/flow.py</a></p>

<p>スクリプトで特定のホストに対するリクエストかどうかの条件判断をするサンプルコードもありこれが一番参考になるでしょう。</p>

<p><a href="https://github.com/mitmproxy/mitmproxy/blob/master/examples/redirect_requests.py" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/mitmproxy/mitmproxy/blob/master/examples/redirect_requests.py</a></p>

<p>redirect_requests.pyは”example.com"のホストへのリクエスト全てをオリジナルなレスポンスを作成して返し、"example.org”であれば"mitmproxy.org”へとリダイレクトします。</p>

<p>このサンプルコードを元に、自分の用意するホストへのリクエストの改竄を行い検証するのが手っ取り早いでしょう。</p>

<h1>
<span id="mitmdumpについて" class="fragment"></span><a href="#mitmdump%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6"><i class="fa fa-link"></i></a>mitmdumpについて</h1>

<p>mitmproxyをインストールするとmitmdumpというツールもインストールされます。mitmdumpはこれまで説明してきたmitmproxyと違い、結果を先述のコンソール画面のようなインタラクティブなリスト表示ではなく、標準出力へ出力するため、grepと併用するなどし結果を絞り込むことも出来るようです。これを利用することで特定ホストに対してhttpsを使っているつもりが、httpになっているかなどのチェックを効率的に行うことが出来るでしょう。</p>

<h1>
<span id="操作と用途まとめ" class="fragment"></span><a href="#%E6%93%8D%E4%BD%9C%E3%81%A8%E7%94%A8%E9%80%94%E3%81%BE%E3%81%A8%E3%82%81"><i class="fa fa-link"></i></a>操作と用途まとめ</h1>

<ul>
<li>mitmproxyの基本操作でアプリ内課金で不正なリクエストにしてみる</li>
<li>mitmproxyの基本操作でアプリ内課金部分でアプリからニセ（使用済みまたは他のアプリ）のレシートをサーバーに送って何が起こるか簡単に試せる</li>
<li>mitmproxyのスクリプトで特定ホストへのリクエスト/レスポンスを改竄してみる</li>
<li>mitmdumpで特定ホストに対してhttp通信してしまっていないか確認できる</li>
</ul>

<h1>
<span id="ここで書かなかったこと" class="fragment"></span><a href="#%E3%81%93%E3%81%93%E3%81%A7%E6%9B%B8%E3%81%8B%E3%81%AA%E3%81%8B%E3%81%A3%E3%81%9F%E3%81%93%E3%81%A8"><i class="fa fa-link"></i></a>ここで書かなかったこと</h1>

<p>ここに書いた方法はポート8080にアクセスするようにwifiの設定を変更しています。ですが、透過型プロキシを使えば、実機がwifiのデフォルトである80ポートを使って通常と同じように通信をしているようにすることも可能です。</p>

<p>透過化型プロキシを使う方法は下記のサイトを参照すれば良いと思います。</p>

<p>MacでWifi共有で透過的にmitmproxy<br>
<a href="http://bagpack.hatenablog.jp/entry/2014/02/04/225553" class="autolink" rel="nofollow noopener" target="_blank">http://bagpack.hatenablog.jp/entry/2014/02/04/225553</a></p>

<h1>
<span id="おわりに" class="fragment"></span><a href="#%E3%81%8A%E3%82%8F%E3%82%8A%E3%81%AB"><i class="fa fa-link"></i></a>おわりに</h1>

<p>世の中のWeb API設計/運営者やアプリ開発者が以上のことを正しく知っていないと、障害が起きた時の復旧や違反者の追跡など本来のコンテンツ運営とは違う時間がかかってしまいダメージは大きく計画の停滞感さえまねきます。発端はスマートフォンアプリでhttpsでの通信を行えば安心などの楽観的思考により設計が受け身になっていることだと思うので、まず通信の傍受/改竄方法を知ることが先決かなと思いました。</p>

<p>実際、AppleのGameCenterはplistでスコアを送信しているようで、mitmproxyによるインタラクティブなリクエストの改竄だけで、アプリ利用者のスコアを変更できるようです（現在は対策されているかもしれませんが）。</p>

<p>Setting highscores on Apple's GameCenter<br>
<a href="http://mitmproxy.org/doc/tutorials/gamecenter.html" class="autolink" rel="nofollow noopener" target="_blank">http://mitmproxy.org/doc/tutorials/gamecenter.html</a></p>

<p>具体的なセキュリティ対策に対しては、それぞれのコンテンツの要件と優先順位によって変わると思うので各自で考えましょう。もしくは<a href="http://curiosity.co.jp/" rel="nofollow noopener" target="_blank">弊社に相談を頂ければ一緒になって考えたりもします</a>。</p>

<h2>
<span id="参考url" class="fragment"></span><a href="#%E5%8F%82%E8%80%83url"><i class="fa fa-link"></i></a>参考URL</h2>

<p>mitmproxy<br>
<a href="http://mitmproxy.org/" class="autolink" rel="nofollow noopener" target="_blank">http://mitmproxy.org/</a></p>

<p>mitmproxyのスクリプトサンプル<br>
<a href="https://github.com/mitmproxy/mitmproxy/tree/master/examples" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/mitmproxy/mitmproxy/tree/master/examples</a></p>

<p>mitmproxyを使ってSSL通信の中身を確認する<br>
<a href="http://ido.nu/kuma/2012/01/29/how-to-use-mitmproxy/" class="autolink" rel="nofollow noopener" target="_blank">http://ido.nu/kuma/2012/01/29/how-to-use-mitmproxy/</a></p>

<p>pyasn1 and PyOpenSSLの依存関係があるからpip使うようになった?<br>
<a href="https://github.com/mitmproxy/mitmproxy/issues/37" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/mitmproxy/mitmproxy/issues/37</a></p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1" style="height:150px;">
<tr>
	<td rowspan="3">77位</td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="thumb-up-120px.png" /></i>735</kbd>
		<a target="_blank" href="https://qiita.com/mountcedar/items/682743c95fd3b8fc274b">いまさら聞けないgitの使い方</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-11-19<br />15:47:25</center>
	</td>
	<td style="width:200px;">
		<!--投稿者-->
		<center>
			@<a href="user/30240.html">mountcedar</a>(48件の記事)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/30240/profile-images/1473685461">
		</center>
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Git]</b> <b>[GitHub]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<!--
		<div style="width:350px;height:150px;overflow:scroll;">%s</div>
		-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;">
<h1>
<span id="はじめに" class="fragment"></span><a href="#%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB"><i class="fa fa-link"></i></a>はじめに</h1>

<p>表題のとおり、いまさら聞けないgitの使い方だが、正直マイナーなコマンドはヘビーユーザではない限り、必要になるたびにGoogleで検索しているのが実情ではないだろうか。このページではその備忘録として、基本的な使い方＋アルファのgitコマンドについてまとめる。</p>

<h1>
<span id="基本操作" class="fragment"></span><a href="#%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C"><i class="fa fa-link"></i></a>基本操作</h1>

<h2>
<span id="リモートリポジトリからクローンする" class="fragment"></span><a href="#%E3%83%AA%E3%83%A2%E3%83%BC%E3%83%88%E3%83%AA%E3%83%9D%E3%82%B8%E3%83%88%E3%83%AA%E3%81%8B%E3%82%89%E3%82%AF%E3%83%AD%E3%83%BC%E3%83%B3%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>リモートリポジトリからクローンする</h2>

<p>大抵のgitプロジェクトでは、githubなどから自分の環境にクローンを作成するところからはじまる。基本文法は以下の通り</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ git clone &lt;uri&gt;
</pre></div></div>

<p>このuriの中に入るのは、http,httpsから始まるurlやsshプロトコルで指定するもの、gitoliteなどの他のソフトウェアと連携するものなどいくつかのパターンがある。</p>

<h3>
<span id="http-httpsを使う場合" class="fragment"></span><a href="#http-https%E3%82%92%E4%BD%BF%E3%81%86%E5%A0%B4%E5%90%88"><i class="fa fa-link"></i></a>http, httpsを使う場合</h3>

<p>だいたい、githubからcloneする場合はこのパターン。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ git clone https://github.com/YYYYYY/XXXXX.git
</pre></div></div>

<p>ウェブデザインが変化してからだいぶ経つが、httpsのurlはページ右サイドバーの、HTTPS clone URLのボタンをクリックするとクリップボードにコピーされる。</p>

<h3>
<span id="sshプロトコルから始まる場合" class="fragment"></span><a href="#ssh%E3%83%97%E3%83%AD%E3%83%88%E3%82%B3%E3%83%AB%E3%81%8B%E3%82%89%E5%A7%8B%E3%81%BE%E3%82%8B%E5%A0%B4%E5%90%88"><i class="fa fa-link"></i></a>sshプロトコルから始まる場合</h3>

<p>研究室や会社の一部門などの比較的ローカルなセクションで、gitを使っている場合はこのケースが多い。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ git clone ssh://user@hostname/path/to/repos
</pre></div></div>

<p>ユーザにはアクセスするユーザ名、hostnameはローカルマシンのホスト名またはIPアドレス、/path/to/reposには、gitリポジトリまでの絶対パスが入る。ホームディレクトリからの相対パスじゃないことに注意。</p>

<h3>
<span id="gitoliteなどの他のサードパーティのソフトとの連携" class="fragment"></span><a href="#gitolite%E3%81%AA%E3%81%A9%E3%81%AE%E4%BB%96%E3%81%AE%E3%82%B5%E3%83%BC%E3%83%89%E3%83%91%E3%83%BC%E3%83%86%E3%82%A3%E3%81%AE%E3%82%BD%E3%83%95%E3%83%88%E3%81%A8%E3%81%AE%E9%80%A3%E6%90%BA"><i class="fa fa-link"></i></a>gitoliteなどの他のサードパーティのソフトとの連携</h3>

<p>それぞれの内容に従ってください。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ git clone gitolite@&lt;hostname&gt;:&lt;projectname&gt;
</pre></div></div>

<p>上記は、標準的にセットアップされたgitoliteのアクセス方法。詳しくは以下のページ参照。</p>

<ul>
<li><a href="http://git-scm.com/book/ja/Git-%E3%82%B5%E3%83%BC%E3%83%90%E3%83%BC-Gitolite" class="autolink" rel="nofollow noopener" target="_blank">http://git-scm.com/book/ja/Git-%E3%82%B5%E3%83%BC%E3%83%90%E3%83%BC-Gitolite</a></li>
</ul>

<h2>
<span id="自分用にローカルにgitリポジトリをつくる" class="fragment"></span><a href="#%E8%87%AA%E5%88%86%E7%94%A8%E3%81%AB%E3%83%AD%E3%83%BC%E3%82%AB%E3%83%AB%E3%81%ABgit%E3%83%AA%E3%83%9D%E3%82%B8%E3%83%88%E3%83%AA%E3%82%92%E3%81%A4%E3%81%8F%E3%82%8B"><i class="fa fa-link"></i></a>自分用にローカルにgitリポジトリをつくる</h2>

<p>自分用にリポジトリを作る場合は、プロジェクトのディレクトリの中で、ゴミファイルやビルド途中でできたファイルなどを削除し、以下を実行する。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ git init
$ git add *
$ git commit -m "initial import"
</pre></div></div>

<p>リポジトリを初期化し、現在あるファイルを全部登録して、コミットする手順を実行すると、初期インポートまでが完了する。</p>

<h2>
<span id="ローカルで開発するときに必要な作業" class="fragment"></span><a href="#%E3%83%AD%E3%83%BC%E3%82%AB%E3%83%AB%E3%81%A7%E9%96%8B%E7%99%BA%E3%81%99%E3%82%8B%E3%81%A8%E3%81%8D%E3%81%AB%E5%BF%85%E8%A6%81%E3%81%AA%E4%BD%9C%E6%A5%AD"><i class="fa fa-link"></i></a>ローカルで開発するときに必要な作業</h2>

<p>最も多用するコマンド群です。ローカルのみで作業している人は、「リモートリポジトリ・・・」の件は無視してよいです。</p>

<h3>
<span id="変更のコミット" class="fragment"></span><a href="#%E5%A4%89%E6%9B%B4%E3%81%AE%E3%82%B3%E3%83%9F%E3%83%83%E3%83%88"><i class="fa fa-link"></i></a>変更のコミット</h3>

<p>いちいち、変更したファイルを登録したり、コメントをエディタを立ち上げて書くのが面倒なので、以下のコマンドに落ち着く</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ git commit -a -m "&lt;comment&gt;"
</pre></div></div>

<p>-aオプションは、既に登録されたファイルで変更点があるものをすべて指定するという意味、-mオプションはその後につづく文字列をコメントとして追加する。</p>

<h3>
<span id="新しく出来たファイルの登録" class="fragment"></span><a href="#%E6%96%B0%E3%81%97%E3%81%8F%E5%87%BA%E6%9D%A5%E3%81%9F%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AE%E7%99%BB%E9%8C%B2"><i class="fa fa-link"></i></a>新しく出来たファイルの登録</h3>

<p>開発途上でできたソースファイルや設定ファイル、ライブラリは以下のコマンドで追加する</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ git add &lt;file&gt;
$ git add &lt;directory&gt;
$ git add &lt;wildcard. e.g. *.java&gt;
</pre></div></div>

<p>addの後に続くものは、ファイルやディレクトリの他にワイルドカードも使えます。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$  git add -A
</pre></div></div>

<p>プロジェクトディレクトリ中に追加されたすべてのファイルを追加する場合は上記が便利。ただし、コンパイルの中間ファイルなども登録されちゃったりするので、注意。</p>

<h3>
<span id="変更したファイルのコミット" class="fragment"></span><a href="#%E5%A4%89%E6%9B%B4%E3%81%97%E3%81%9F%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AE%E3%82%B3%E3%83%9F%E3%83%83%E3%83%88"><i class="fa fa-link"></i></a>変更したファイルのコミット</h3>

<p>git mvを用いず、エディタなどで変更したファイルの変更履歴をコミットする場合は以下を用いる．</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ git add --all &lt;target&gt;
</pre></div></div>

<p>オプションをつけない場合のgit addコマンドは、省略しないと</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ git add --ignore-removal &lt;target&gt;
</pre></div></div>

<p>に設定されていて、ワーキングツリーから削除されたファイルの追跡は行われないようになっているとのこと．ちなみに、疑わしき状況になるとwarningでしっかりと警告されます。以下、原文。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>* 'git add --ignore-removal &lt;pathspec&gt;', which is the current default,
  ignores paths you removed from your working tree.

* 'git add --all &lt;pathspec&gt;' will let you also record the removals.

Run 'git status' to check the paths you removed from your working tree.
</pre></div></div>

<p>eclipseはgitプラグインがちゃんとしていないので、手動でコミットしている人はたびたびお世話になるかもしれない．</p>

<h3>
<span id="ファイル権限の編集" class="fragment"></span><a href="#%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E6%A8%A9%E9%99%90%E3%81%AE%E7%B7%A8%E9%9B%86"><i class="fa fa-link"></i></a>ファイル権限の編集</h3>

<p>うっかり実行権限を付け忘れてコミットした場合は、以下のコマンドで権限を修正可能</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ git update-index --add --chmod=&lt;options&gt; &lt;target&gt;
# e.g.
$ git update-index --add --chmod=+x &lt;target&gt;
</pre></div></div>

<h3>
<span id="不要なファイルの削除" class="fragment"></span><a href="#%E4%B8%8D%E8%A6%81%E3%81%AA%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AE%E5%89%8A%E9%99%A4"><i class="fa fa-link"></i></a>不要なファイルの削除</h3>

<p>実装過程で不要になったファイルは以下のように削除できる</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ git rm &lt;target&gt;
$ git rm -r &lt;target dir&gt;
</pre></div></div>

<p>ディレクトリ単位で削除したい場合は、-rオプションをつけると良い。中間ファイルなどを誤ってコミットしてしまった場合、--cachedオプションを使って削除すると、ローカルコピー上からは削除されず、git管理ファイルから外すことが出来る</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ git rm —cached &lt;target&gt;
$ git tm -r —cached &lt;target dir&gt;
</pre></div></div>

<h2>
<span id="まだコミットしていない内容のコミット状態までのロールバックsvn-revert相当" class="fragment"></span><a href="#%E3%81%BE%E3%81%A0%E3%82%B3%E3%83%9F%E3%83%83%E3%83%88%E3%81%97%E3%81%A6%E3%81%84%E3%81%AA%E3%81%84%E5%86%85%E5%AE%B9%E3%81%AE%E3%82%B3%E3%83%9F%E3%83%83%E3%83%88%E7%8A%B6%E6%85%8B%E3%81%BE%E3%81%A7%E3%81%AE%E3%83%AD%E3%83%BC%E3%83%AB%E3%83%90%E3%83%83%E3%82%AFsvn-revert%E7%9B%B8%E5%BD%93"><i class="fa fa-link"></i></a>まだコミットしていない内容のコミット状態までのロールバック（svn revert相当）</h2>

<p>編集中の内容からコミット済みのところまで戻りたい場合は以下のようにして、ロールバックできる。svn revertと一緒。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ git checkout &lt;target file name&gt;
</pre></div></div>

<h2>
<span id="リモートリポジトリとのシンク" class="fragment"></span><a href="#%E3%83%AA%E3%83%A2%E3%83%BC%E3%83%88%E3%83%AA%E3%83%9D%E3%82%B8%E3%83%88%E3%83%AA%E3%81%A8%E3%81%AE%E3%82%B7%E3%83%B3%E3%82%AF"><i class="fa fa-link"></i></a>リモートリポジトリとのシンク</h2>

<p>チームプログラミングして、自分のローカル環境と、リモートリポジトリの内容をシンクしたい場合には以下のコマンドを使います。</p>

<h3>
<span id="リモートリポジトリからローカルのリポジトリへ変更を反映" class="fragment"></span><a href="#%E3%83%AA%E3%83%A2%E3%83%BC%E3%83%88%E3%83%AA%E3%83%9D%E3%82%B8%E3%83%88%E3%83%AA%E3%81%8B%E3%82%89%E3%83%AD%E3%83%BC%E3%82%AB%E3%83%AB%E3%81%AE%E3%83%AA%E3%83%9D%E3%82%B8%E3%83%88%E3%83%AA%E3%81%B8%E5%A4%89%E6%9B%B4%E3%82%92%E5%8F%8D%E6%98%A0"><i class="fa fa-link"></i></a>リモートリポジトリからローカルのリポジトリへ変更を反映</h3>

<p>自分が寝ている間に他の小人さんがソースに加えた変更を自分のリポジトリに反映します。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ git pull
</pre></div></div>

<h3>
<span id="リモートリポジトリへローカルで編集した内容の反映" class="fragment"></span><a href="#%E3%83%AA%E3%83%A2%E3%83%BC%E3%83%88%E3%83%AA%E3%83%9D%E3%82%B8%E3%83%88%E3%83%AA%E3%81%B8%E3%83%AD%E3%83%BC%E3%82%AB%E3%83%AB%E3%81%A7%E7%B7%A8%E9%9B%86%E3%81%97%E3%81%9F%E5%86%85%E5%AE%B9%E3%81%AE%E5%8F%8D%E6%98%A0"><i class="fa fa-link"></i></a>リモートリポジトリへローカルで編集した内容の反映</h3>

<p>ある程度ローカルで編集した内容をリモートリポジトリに反映するときに使います。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ git push
</pre></div></div>

<p>ローカルのタグのpushは</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ git push --tags
$ git push origin &lt;tagname&gt;
</pre></div></div>

<h3>
<span id="ブランチで作業しているときのpushとpull" class="fragment"></span><a href="#%E3%83%96%E3%83%A9%E3%83%B3%E3%83%81%E3%81%A7%E4%BD%9C%E6%A5%AD%E3%81%97%E3%81%A6%E3%81%84%E3%82%8B%E3%81%A8%E3%81%8D%E3%81%AEpush%E3%81%A8pull"><i class="fa fa-link"></i></a>ブランチで作業しているときのpushとpull</h3>

<h4>
<span id="remoteのブランチへの変更を取得するとき" class="fragment"></span><a href="#remote%E3%81%AE%E3%83%96%E3%83%A9%E3%83%B3%E3%83%81%E3%81%B8%E3%81%AE%E5%A4%89%E6%9B%B4%E3%82%92%E5%8F%96%E5%BE%97%E3%81%99%E3%82%8B%E3%81%A8%E3%81%8D"><i class="fa fa-link"></i></a>remoteのブランチ（への変更）を取得するとき</h4>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ git pull origin &lt;branchname&gt;
$ git checkout &lt;branchname&gt;
</pre></div></div>

<p>checkoutは、まだそのブランチに移行していないとき実行する。すでにそのブランチで作業しているときはいらない。</p>

<h4>
<span id="ブランチのremoteへのpush" class="fragment"></span><a href="#%E3%83%96%E3%83%A9%E3%83%B3%E3%83%81%E3%81%AEremote%E3%81%B8%E3%81%AEpush"><i class="fa fa-link"></i></a>ブランチのremoteへのpush</h4>

<p>ブランチのpushは以下で実行する。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ git push origin &lt;branchname&gt;
</pre></div></div>

<p>基本的には、</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ git push/pull origin &lt;tagname&gt;
</pre></div></div>

<p>だということさえ覚えておけば、後の開発方法は一緒である。自分がいま、どのブランチで作業しているかは以下を実行して調べられる。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ git branch
</pre></div></div>

<h1>
<span id="知っておくと便利だけどだいたい使わず忘れるコマンド" class="fragment"></span><a href="#%E7%9F%A5%E3%81%A3%E3%81%A6%E3%81%8A%E3%81%8F%E3%81%A8%E4%BE%BF%E5%88%A9%E3%81%A0%E3%81%91%E3%81%A9%E3%81%A0%E3%81%84%E3%81%9F%E3%81%84%E4%BD%BF%E3%82%8F%E3%81%9A%E5%BF%98%E3%82%8C%E3%82%8B%E3%82%B3%E3%83%9E%E3%83%B3%E3%83%89"><i class="fa fa-link"></i></a>知っておくと便利だけど、だいたい使わず忘れるコマンド</h1>

<h2>
<span id="アーカイブの作成" class="fragment"></span><a href="#%E3%82%A2%E3%83%BC%E3%82%AB%E3%82%A4%E3%83%96%E3%81%AE%E4%BD%9C%E6%88%90"><i class="fa fa-link"></i></a>アーカイブの作成</h2>

<p>配布物をつくるときは以下のコマンドを使います。svn exportとだいたい同じ。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ git archive --format=tar --prefix=&lt;dir/&gt; HEAD | gzip &gt; &lt;path/to/repo.tar.gz&gt;
$ git archive --format=tar --prefix=&lt;dir/&gt; HEAD | bzip2 &gt; &lt;path/to/repo.tar.bz2&gt;
</pre></div></div>

<p>prefixには、archiveが解凍されたときのディレクトリ名が、にはtarballのパスが入ります。</p>

<h2>
<span id="タグの作成とタグづけされた状態への移行" class="fragment"></span><a href="#%E3%82%BF%E3%82%B0%E3%81%AE%E4%BD%9C%E6%88%90%E3%81%A8%E3%82%BF%E3%82%B0%E3%81%A5%E3%81%91%E3%81%95%E3%82%8C%E3%81%9F%E7%8A%B6%E6%85%8B%E3%81%B8%E3%81%AE%E7%A7%BB%E8%A1%8C"><i class="fa fa-link"></i></a>タグの作成とタグづけされた状態への移行</h2>

<h3>
<span id="タグの一覧" class="fragment"></span><a href="#%E3%82%BF%E3%82%B0%E3%81%AE%E4%B8%80%E8%A6%A7"><i class="fa fa-link"></i></a>タグの一覧</h3>

<p>以下のコマンドで一覧を見ることが出来ます。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ git tag
</pre></div></div>

<h3>
<span id="タグの作成" class="fragment"></span><a href="#%E3%82%BF%E3%82%B0%E3%81%AE%E4%BD%9C%E6%88%90"><i class="fa fa-link"></i></a>タグの作成</h3>

<p>タグの作成。オプション付きだけど、以下のセットが便利です。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ git tag -a &lt;tagname&gt; -m &lt;comment&gt;
</pre></div></div>

<p>tagnameにはタグの名前（たいてい、"v0.0.X"のような文字列が入ります）。commentにはコメントが入ります。</p>

<h3>
<span id="タグの反映" class="fragment"></span><a href="#%E3%82%BF%E3%82%B0%E3%81%AE%E5%8F%8D%E6%98%A0"><i class="fa fa-link"></i></a>タグの反映</h3>

<p>クローンしてきたリポジトリをタグ付けされた状態に戻すときに使います。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ git checkout refs/tags/&lt;tagname&gt;
</pre></div></div>

<h2>
<span id="管理されているファイルの一覧を見る" class="fragment"></span><a href="#%E7%AE%A1%E7%90%86%E3%81%95%E3%82%8C%E3%81%A6%E3%81%84%E3%82%8B%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AE%E4%B8%80%E8%A6%A7%E3%82%92%E8%A6%8B%E3%82%8B"><i class="fa fa-link"></i></a>管理されているファイルの一覧を見る</h2>

<p>初期のインポート時に、全部インポートしたか確認するときなどに便利．</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ git ls-files
</pre></div></div>

<h2>
<span id="ブランチの作り方" class="fragment"></span><a href="#%E3%83%96%E3%83%A9%E3%83%B3%E3%83%81%E3%81%AE%E4%BD%9C%E3%82%8A%E6%96%B9"><i class="fa fa-link"></i></a>ブランチの作り方</h2>

<h3>
<span id="ブランチの確認" class="fragment"></span><a href="#%E3%83%96%E3%83%A9%E3%83%B3%E3%83%81%E3%81%AE%E7%A2%BA%E8%AA%8D"><i class="fa fa-link"></i></a>ブランチの確認</h3>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ git branch
</pre></div></div>

<h3>
<span id="ブランチの作成" class="fragment"></span><a href="#%E3%83%96%E3%83%A9%E3%83%B3%E3%83%81%E3%81%AE%E4%BD%9C%E6%88%90"><i class="fa fa-link"></i></a>ブランチの作成</h3>

<p>&lt;new branch name&gt;という名前のブランチを作成します。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ git checkout -b &lt;new branch name&gt;
</pre></div></div>

<h3>
<span id="リモートブランチの取得" class="fragment"></span><a href="#%E3%83%AA%E3%83%A2%E3%83%BC%E3%83%88%E3%83%96%E3%83%A9%E3%83%B3%E3%83%81%E3%81%AE%E5%8F%96%E5%BE%97"><i class="fa fa-link"></i></a>リモートブランチの取得</h3>

<p>リモートブランチの取得は以下のコマンドから実行する。git pullするとすごいことになるので、checkoutでやったほうが良い。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ git checkout -b &lt;same branch name with remote&gt; origin/&lt;remote branch name&gt;
</pre></div></div>

<p>たとえば、developというリモートブランチがある場合、</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ git checkout -b develop origin/develop
</pre></div></div>

<p>となる。</p>

<h3>
<span id="ブランチの切り替え" class="fragment"></span><a href="#%E3%83%96%E3%83%A9%E3%83%B3%E3%83%81%E3%81%AE%E5%88%87%E3%82%8A%E6%9B%BF%E3%81%88"><i class="fa fa-link"></i></a>ブランチの切り替え</h3>

<p>&lt;branch name&gt;というブランチに切り替えます（そのブランチ名がない場合は作成します）</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ git checkout &lt;branch name&gt;
</pre></div></div>

<h3>
<span id="ブランチの削除" class="fragment"></span><a href="#%E3%83%96%E3%83%A9%E3%83%B3%E3%83%81%E3%81%AE%E5%89%8A%E9%99%A4"><i class="fa fa-link"></i></a>ブランチの削除</h3>

<p>&lt;the branch name to be removed.&gt;という名前のブランチを削除します。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ git branch -d &lt;the branch name to be removed.&gt;
</pre></div></div>

<h3>
<span id="リモートリポジトリへの反映" class="fragment"></span><a href="#%E3%83%AA%E3%83%A2%E3%83%BC%E3%83%88%E3%83%AA%E3%83%9D%E3%82%B8%E3%83%88%E3%83%AA%E3%81%B8%E3%81%AE%E5%8F%8D%E6%98%A0"><i class="fa fa-link"></i></a>リモートリポジトリへの反映</h3>

<p>リモートリポジトリにブランチ&lt;branch name to be updated.&gt;をpushします。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ git commit -a -m “comments”
…
$ git push origin &lt;branch name to be updated.&gt;
</pre></div></div>

<p>githubのpullリクエストでよく使うので、覚えておきましょう。</p>

<h2>
<span id="githubとの密な連携" class="fragment"></span><a href="#github%E3%81%A8%E3%81%AE%E5%AF%86%E3%81%AA%E9%80%A3%E6%90%BA"><i class="fa fa-link"></i></a>githubとの密な連携</h2>

<p>githubとの連携をするなら、github拡張のhubを利用すると良い。コマンドラインからpull requestを行うなど、より密にgithubと連携できる。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>## OSX
$ brew install hub
</pre></div></div>

<p>インストールはOSXなら上記のコマンドで、他のOSならバイナリが以下から入手できる．</p>

<ul>
<li><a href="https://github.com/github/hub/releases" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/github/hub/releases</a></li>
</ul>

<p>その後、.bash_profileに以下を設定すると、hubコマンドとしてgitを使用できる。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>eval "$(hub alias -s)"
</pre></div></div>

<p>以下は新たに追加されるコマンドの一部</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>## clone
$ git clone hoge/geho
&gt; git clone https://github.com/hoge/geho.git
## pull-request
$ git pull-request
</pre></div></div>

<p>詳細なコマンドは以下を参照のこと</p>

<ul>
<li><a href="https://github.com/github/hub" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/github/hub</a></li>
</ul>
</div>
	</td>
</tr>
</table>
<br />
<table border="1" style="height:150px;">
<tr>
	<td rowspan="3">78位</td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="thumb-up-120px.png" /></i>727</kbd>
		<a target="_blank" href="https://qiita.com/youcune/items/fcfb4ad3d7c1edf9dc96">シェルスクリプトを書くときはset -euしておく</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-12-03<br />17:56:47</center>
	</td>
	<td style="width:200px;">
		<!--投稿者-->
		<center>
			@<a href="user/19478.html">youcune</a>(61件の記事)<br />(合同会社ユーキューブ 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/19478/profile-images/1506391318">
		</center>
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[ShellScript]</b> <b>[Bash]</b> <b>[Linux]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<!--
		<div style="width:350px;height:150px;overflow:scroll;">%s</div>
		-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>1行目を</p>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span><span class="ch">#!/bin/bash -eu</span>
</pre></div></div>

<p>とするか、または、</p>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span><span class="nb">set</span> -eu
</pre></div></div>

<p>を書いておく。以下解説。</p>

<h2>
<span id="set--e" class="fragment"></span><a href="#set--e"><i class="fa fa-link"></i></a><code>set -e</code>
</h2>

<p>エラーがあったらシェルスクリプトをそこで打ち止めにしてくれる（<code>exit 0</code>以外が返るものがあったら止まるようになる）。「あっあれここでうまくいってないからデータ準備できてないのにあれあれっもうやめて！」ってなるのを防げる。</p>

<h2>
<span id="set--u" class="fragment"></span><a href="#set--u"><i class="fa fa-link"></i></a><code>set -u</code>
</h2>

<p>未定義の変数を使おうとしたときに打ち止めにしてくれる。Perlでいう<code>use strict 'vars';</code>的なもの。</p>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>rm -rf <span class="nv">$TMEP_DIR</span>/
</pre></div></div>

<p>って気軽な気持ちで書いてしまって、「ん、やたら時間かかると思ったらスペルミスうわなにをするやめ」ってなるのを防げる。</p>

<h2>
<span id="一部だけ例外にしたい" class="fragment"></span><a href="#%E4%B8%80%E9%83%A8%E3%81%A0%E3%81%91%E4%BE%8B%E5%A4%96%E3%81%AB%E3%81%97%E3%81%9F%E3%81%84"><i class="fa fa-link"></i></a>一部だけ例外にしたい</h2>

<p>はてなブックマークのコメントより</p>

<blockquote>
<p>-e は command1 || command2 みたいなことが出来なくなるの使うことないな。-uは付けといて良いが。</p>
</blockquote>

<p>確かにおっしゃるとおりですね。コマンドの失敗を考慮して書いている部分については（もしくはやたら<code>exit 0</code>以外するコマンドを呼ばないといけないときなど）、スクリプトの一部に限り <code>-e</code> を無効にしたいかもしれません。そんなときは以下のようにできます。こうするとエラーハンドリングを全部しっかり考えて作っていない限りは使わない意味はない気がします。</p>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span><span class="nb">set</span> -eu

<span class="c1"># :</span>
<span class="c1"># do something</span>
<span class="c1"># :</span>

<span class="c1"># ここからは set -e を無効にする</span>
<span class="nb">set</span> +e

command1 <span class="o">||</span> command2

<span class="c1"># ここからは再度有効にする</span>
<span class="nb">set</span> -e

<span class="c1"># :</span>
<span class="c1"># do something</span>
<span class="c1"># :</span>
</pre></div></div>
</div>
	</td>
</tr>
</table>
<br />
<table border="1" style="height:150px;">
<tr>
	<td rowspan="3">79位</td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="thumb-up-120px.png" /></i>726</kbd>
		<a target="_blank" href="https://qiita.com/takuhito-h/items/ef8e9cd5fc4b4230125e">モダンCSS設計の解説サイトまとめ</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2014-03-26<br />19:22:08</center>
	</td>
	<td style="width:200px;">
		<!--投稿者-->
		<center>
			@<a href="user/12397.html">takuhito-h</a>(8件の記事)<br />(フリーランス 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/12397/profile-images/1473682394">
		</center>
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[HTML]</b> <b>[CSS]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<!--
		<div style="width:350px;height:150px;overflow:scroll;">%s</div>
		-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>最近CSSの設計手法も進化してきたので、モダンCSS設計についての記事をまとめてみました。</p>

<h2>
<span id="mindbemding日本語訳" class="fragment"></span><a href="#mindbemding%E6%97%A5%E6%9C%AC%E8%AA%9E%E8%A8%B3"><i class="fa fa-link"></i></a><a href="https://gist.github.com/juno/6182957" rel="nofollow noopener" target="_blank">MindBEMding（日本語訳）</a>
</h2>

<p>CSSのモダンな記法、BEM記法について詳しくまとめたもの。</p>

<h2>
<span id="japanese-translations-of-bem-methodology-bemの日本語訳" class="fragment"></span><a href="#japanese-translations-of-bem-methodology-bem%E3%81%AE%E6%97%A5%E6%9C%AC%E8%AA%9E%E8%A8%B3"><i class="fa fa-link"></i></a><a href="https://github.com/juno/bem-methodology-ja" rel="nofollow noopener" target="_blank">Japanese Translations of BEM-Methodology (BEMの日本語訳)</a>
</h2>

<p>BEMについて詳しくまとめたもの。図解あり。上記のサイトと被る部分あり。</p>

<h2>
<span id="general-css-notes-advice-and-guidelines日本語訳" class="fragment"></span><a href="#general-css-notes-advice-and-guidelines%E6%97%A5%E6%9C%AC%E8%AA%9E%E8%A8%B3"><i class="fa fa-link"></i></a><a href="https://github.com/kiwanami/CSS-Guidelines" rel="nofollow noopener" target="_blank">General CSS notes, advice and guidelines（日本語訳）</a>
</h2>

<p>CSS Wizardryの人がまとめたCSS規約。これは目を通す価値あり。</p>

<h2>
<span id="enja--translated-articles-for-front-end-developers" class="fragment"></span><a href="#enja--translated-articles-for-front-end-developers"><i class="fa fa-link"></i></a><a href="http://enja.studiomohawk.com/" rel="nofollow noopener" target="_blank">en.ja | Translated Articles for Front End Developers</a>
</h2>

<p>海外のフロントエンドエンジニアの記事を翻訳しているサイト。過去ログもざっと読むべし。</p>

<h2>
<span id="ja---scalable-and-modular-architecture-for-css" class="fragment"></span><a href="#ja---scalable-and-modular-architecture-for-css"><i class="fa fa-link"></i></a><a href="https://smacss.com/ja" rel="nofollow noopener" target="_blank">Ja - Scalable and Modular Architecture for CSS</a>
</h2>

<p>Jonathan Snookが提唱したスタイルガイド（有料）。<br>
KindleやiPadなどで読める形式でダウンロードできる。</p>

<h2>
<span id="smacss-読んだ" class="fragment"></span><a href="#smacss-%E8%AA%AD%E3%82%93%E3%81%A0"><i class="fa fa-link"></i></a><a href="http://chroma.hatenablog.com/entry/2013/07/22/120818" rel="nofollow noopener" target="_blank">SMACSS 読んだ</a>
</h2>

<p>SMACSSについてのまとめ。</p>

<h1>
<span id="20140528追記" class="fragment"></span><a href="#20140528%E8%BF%BD%E8%A8%98"><i class="fa fa-link"></i></a>2014/05/28追記</h1>

<h2>
<span id="mcss" class="fragment"></span><a href="#mcss"><i class="fa fa-link"></i></a><a href="http://operatino.github.io/MCSS/ja/" rel="nofollow noopener" target="_blank">MCSS</a>
</h2>

<p>BEMとOOCSSの原理をもとにした、Multilayer CSS構成システムについての解説。<br>
Odnoklassniki.ru（世界のソーシャルネットワークのTOP10）開発チームによって作り出された。</p>

<h2>
<span id="flocss" class="fragment"></span><a href="#flocss"><i class="fa fa-link"></i></a><a href="https://github.com/hiloki/flocss" rel="nofollow noopener" target="_blank">FLOCSS</a>
</h2>

<p>「OOCSSやSMACSS、BEM、SuitCSSのコンセプトを取り入れた、モジュラーなアプローチのためのCSS構成案」とのこと。日本人が作成。</p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1" style="height:150px;">
<tr>
	<td rowspan="3">80位</td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="thumb-up-120px.png" /></i>720</kbd>
		<a target="_blank" href="https://qiita.com/mpyw/items/939964377766a54d4682">ファイルアップロードの例外処理はこれぐらいしないと気が済まない</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-05-31<br />01:20:20</center>
	</td>
	<td style="width:200px;">
		<!--投稿者-->
		<center>
			@<a href="user/25060.html">mpyw</a>(255件の記事)<br />(シナプス株式会社 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/25060/profile-images/1473684251">
		</center>
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[PHP]</b> <b>[セキュリティ]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<!--
		<div style="width:350px;height:150px;overflow:scroll;">%s</div>
		-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;">
<h1>
<span id="脆弱性について" class="fragment"></span><a href="#%E8%84%86%E5%BC%B1%E6%80%A7%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6"><i class="fa fa-link"></i></a>脆弱性について</h1>

<h2>
<span id="参考リンク" class="fragment"></span><a href="#%E5%8F%82%E8%80%83%E3%83%AA%E3%83%B3%E3%82%AF"><i class="fa fa-link"></i></a>参考リンク</h2>

<ul>
<li><a href="http://blog.tokumaru.org/2011/06/PHP-file-upload-bug-CVE-2011-2202.html" rel="nofollow noopener" target="_blank">PHPにおけるファイルアップロードの脆弱性CVE-2011-2202</a></li>
<li><a href="http://d.hatena.ne.jp/rui_hi/20120429/1335664113" rel="nofollow noopener" target="_blank">PHP 5.4.1リリースのポイント</a></li>
</ul>

<h2>
<span id="上記に対する補足説明" class="fragment"></span><a href="#%E4%B8%8A%E8%A8%98%E3%81%AB%E5%AF%BE%E3%81%99%E3%82%8B%E8%A3%9C%E8%B6%B3%E8%AA%AC%E6%98%8E"><i class="fa fa-link"></i></a>上記に対する補足説明</h2>

<ul>
<li>PHP <strong>5.4.1</strong>以降</li>
<li>PHP <strong>5.3.11</strong>以降</li>
</ul>

<p>どちらかを満たしているならば，脆弱性は（今のところ）無い．どちらも満たしていないと，</p>

<ul>
<li>
<strong><em><code>$_FILES</code></em></strong> 変数の構造を崩す攻撃</li>
<li>
<strong><code>../</code></strong> をファイル名に含めて送信する攻撃 <strong>(ディレクトリトラバーサル)</strong>
</li>
</ul>

<p>の何れか，もしくは両方の脆弱性を所持していることになるので要注意．</p>

<h1>
<span id="脆弱性対策と注意事項" class="fragment"></span><a href="#%E8%84%86%E5%BC%B1%E6%80%A7%E5%AF%BE%E7%AD%96%E3%81%A8%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A0%85"><i class="fa fa-link"></i></a>脆弱性対策と注意事項</h1>

<h2>
<span id="_files-corruption-対策改竄されたフォームからの複数ファイル配列送信対策" class="fragment"></span><a href="#_files-corruption-%E5%AF%BE%E7%AD%96%E6%94%B9%E7%AB%84%E3%81%95%E3%82%8C%E3%81%9F%E3%83%95%E3%82%A9%E3%83%BC%E3%83%A0%E3%81%8B%E3%82%89%E3%81%AE%E8%A4%87%E6%95%B0%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E9%85%8D%E5%88%97%E9%80%81%E4%BF%A1%E5%AF%BE%E7%AD%96"><i class="fa fa-link"></i></a><em><code>$_FILES</code></em> Corruption 対策<br>改竄されたフォームからの複数ファイル配列送信対策</h2>

<p>脆弱性が修正された環境でも <strong>改竄フォーム対策</strong> も兼ねているのでこれは必須．</p>

<div class="code-frame" data-lang="php">
<div class="code-lang"><span class="bold">BAD</span></div>
<div class="highlight"><pre><span></span><span class="o">!</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_FILES</span><span class="p">[</span><span class="s1">'upfile'</span><span class="p">])</span>
</pre></div>
</div>

<div class="code-frame" data-lang="php">
<div class="code-lang"><span class="bold">GOOD</span></div>
<div class="highlight"><pre><span></span><span class="o">!</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_FILES</span><span class="p">[</span><span class="s1">'upfile'</span><span class="p">][</span><span class="s1">'error'</span><span class="p">])</span> <span class="o">||</span> <span class="o">!</span><span class="nb">is_int</span><span class="p">(</span><span class="nv">$_FILES</span><span class="p">[</span><span class="s1">'upfile'</span><span class="p">][</span><span class="s1">'error'</span><span class="p">])</span>
</pre></div>
</div>

<h2>
<span id="directory-traversal-対策空ファイル名対策" class="fragment"></span><a href="#directory-traversal-%E5%AF%BE%E7%AD%96%E7%A9%BA%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E5%90%8D%E5%AF%BE%E7%AD%96"><i class="fa fa-link"></i></a>Directory Traversal 対策<br>空ファイル名対策</h2>

<p>脆弱性が修正された環境でも <strong>ファイル名を空にすることは可能</strong> なので，このパラメータを使用せずに自前で一意なファイル名を生成するのが最善の策．もし使うにしてもファイル名として使用して問題ないフォーマットになっているかしっかり検証する．</p>

<div class="code-frame" data-lang="php">
<div class="code-lang"><span class="bold">ファイルデータの重複を許さない(バイナリデータからハッシュ値を取る)</span></div>
<div class="highlight"><pre><span></span><span class="nv">$name</span> <span class="o">=</span> <span class="nb">sha1_file</span><span class="p">(</span><span class="nv">$_FILES</span><span class="p">[</span><span class="s1">'upfile'</span><span class="p">][</span><span class="s1">'tmp_name'</span><span class="p">]);</span>
</pre></div>
</div>

<div class="code-frame" data-lang="php">
<div class="code-lang"><span class="bold">ファイルデータの重複を許す(乱数を使う)</span></div>
<div class="highlight"><pre><span></span><span class="k">while</span> <span class="p">(</span><span class="nb">is_file</span><span class="p">(</span><span class="nv">$name</span> <span class="o">=</span> <span class="nb">bin2hex</span><span class="p">(</span><span class="nb">openssl_random_pseudo_bytes</span><span class="p">(</span><span class="mi">32</span><span class="p">))));</span>
</pre></div>
</div>

<p><ins>ユーザーがファイルを削除可能</ins> な場合には <strong>重複を許す必要がある</strong> ので注意．あるユーザーがファイルを削除したら他のユーザーのファイルも消えてしまった，なんてことがあってはいけない．</p>

<p>もしユーザーがアップロードしたファイル名をそのまま使用したい場合，正規表現を使用して以下のものを防がなければならない．</p>

<ul>
<li>先頭または末尾が <code>.</code> であったり， <code>/</code> が含まれているもの．ファイル名として無効であったり，ディレクトリトラバーサルが可能なものであったりする．</li>
<li>実行可能な拡張子． <code>.php</code> に加え， <code>.cgi</code> <code>.py</code> <code>.rb</code> なども実行可能な環境があるので注意．</li>
<li>
<code>半角英数字</code> <code>.</code> <code>_</code> <code>-</code> 以外の文字．さまざまなエンコーディングが存在するためである．もしこれを許可したい場合， <a href="http://www.php.net/manual/ja/function.mb-convert-encoding.php" rel="nofollow noopener" target="_blank">mb_convert_encoding</a> 関数を用いてサーバー環境に合うよう変換しなければならないが，ここでの説明は割愛する．</li>
</ul>

<div class="code-frame" data-lang="rb">
<div class="code-lang"><span class="bold">これにマッチすれば安全，マッチしなければ危険と見なす</span></div>
<div class="highlight"><pre><span></span><span class="sr">/\A(?!\.)[\w.-]++(?&lt;!\.)(?&lt;!\.php)(?&lt;!\.cgi)(?&lt;!\.py)(?&lt;!\.rb)\z/i</span>
</pre></div>
</div>

<h2>
<span id="move_uploaded_file-じゃなくて-rename-じゃだめ" class="fragment"></span><a href="#move_uploaded_file-%E3%81%98%E3%82%83%E3%81%AA%E3%81%8F%E3%81%A6-rename-%E3%81%98%E3%82%83%E3%81%A0%E3%82%81"><i class="fa fa-link"></i></a><a href="http://www.php.net/manual/ja/function.move-uploaded-file.php" rel="nofollow noopener" target="_blank">move_uploaded_file</a> じゃなくて <a href="http://www.php.net/manual/ja/function.rename.php" rel="nofollow noopener" target="_blank">rename</a> じゃだめ？</h2>

<p><a href="http://www.php.net/manual/ja/function.rename.php" rel="nofollow noopener" target="_blank">rename</a> 関数ではなく <a href="http://www.php.net/manual/ja/function.copy.php" rel="nofollow noopener" target="_blank">copy</a> 関数であれば問題ない．以下のリンクを参照して頂きたい．</p>

<ul>
<li><a href="http://qiita.com/mpyw/items/db12ce86b15f3b0b3c19" id="reference-72fe967f742453071816">is_uploaded_file() / move_uploaded_file() の必要性？</a></li>
</ul>

<h1>
<span id="アップロード例外処理サンプル" class="fragment"></span><a href="#%E3%82%A2%E3%83%83%E3%83%97%E3%83%AD%E3%83%BC%E3%83%89%E4%BE%8B%E5%A4%96%E5%87%A6%E7%90%86%E3%82%B5%E3%83%B3%E3%83%97%E3%83%AB"><i class="fa fa-link"></i></a>アップロード例外処理サンプル</h1>

<div class="code-frame" data-lang="php">
<div class="code-lang"><span class="bold">テキストとして結果を出力する例</span></div>
<div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>

<span class="nb">header</span><span class="p">(</span><span class="s1">'Content-Type: text/plain; charset=utf-8'</span><span class="p">);</span>

<span class="k">try</span> <span class="p">{</span>

    <span class="c1">// 未定義である・複数ファイルである・$_FILES Corruption 攻撃を受けた</span>
    <span class="c1">// どれかに該当していれば不正なパラメータとして処理する</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_FILES</span><span class="p">[</span><span class="s1">'upfile'</span><span class="p">][</span><span class="s1">'error'</span><span class="p">])</span> <span class="o">||</span> <span class="o">!</span><span class="nb">is_int</span><span class="p">(</span><span class="nv">$_FILES</span><span class="p">[</span><span class="s1">'upfile'</span><span class="p">][</span><span class="s1">'error'</span><span class="p">]))</span> <span class="p">{</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nx">RuntimeException</span><span class="p">(</span><span class="s1">'パラメータが不正です'</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="c1">// $_FILES['upfile']['error'] の値を確認</span>
    <span class="k">switch</span> <span class="p">(</span><span class="nv">$_FILES</span><span class="p">[</span><span class="s1">'upfile'</span><span class="p">][</span><span class="s1">'error'</span><span class="p">])</span> <span class="p">{</span>
        <span class="k">case</span> <span class="nx">UPLOAD_ERR_OK</span><span class="o">:</span> <span class="c1">// OK</span>
            <span class="k">break</span><span class="p">;</span>
        <span class="k">case</span> <span class="nx">UPLOAD_ERR_NO_FILE</span><span class="o">:</span>   <span class="c1">// ファイル未選択</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nx">RuntimeException</span><span class="p">(</span><span class="s1">'ファイルが選択されていません'</span><span class="p">);</span>
        <span class="k">case</span> <span class="nx">UPLOAD_ERR_INI_SIZE</span><span class="o">:</span>  <span class="c1">// php.ini定義の最大サイズ超過</span>
        <span class="k">case</span> <span class="nx">UPLOAD_ERR_FORM_SIZE</span><span class="o">:</span> <span class="c1">// フォーム定義の最大サイズ超過 (設定した場合のみ)</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nx">RuntimeException</span><span class="p">(</span><span class="s1">'ファイルサイズが大きすぎます'</span><span class="p">);</span>
        <span class="k">default</span><span class="o">:</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nx">RuntimeException</span><span class="p">(</span><span class="s1">'その他のエラーが発生しました'</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="c1">// ここで定義するサイズ上限のオーバーチェック</span>
    <span class="c1">// (必要がある場合のみ)</span>
    <span class="k">if</span> <span class="p">(</span><span class="nv">$_FILES</span><span class="p">[</span><span class="s1">'upfile'</span><span class="p">][</span><span class="s1">'size'</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">1000000</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nx">RuntimeException</span><span class="p">(</span><span class="s1">'ファイルサイズが大きすぎます'</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="c1">// $_FILES['upfile']['mime']の値はブラウザ側で偽装可能なので</span>
    <span class="c1">// MIMEタイプに対応する拡張子を自前で取得する</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nv">$ext</span> <span class="o">=</span> <span class="nb">array_search</span><span class="p">(</span>
        <span class="nb">mime_content_type</span><span class="p">(</span><span class="nv">$_FILES</span><span class="p">[</span><span class="s1">'upfile'</span><span class="p">][</span><span class="s1">'tmp_name'</span><span class="p">]),</span>
        <span class="k">array</span><span class="p">(</span>
            <span class="s1">'gif'</span> <span class="o">=&gt;</span> <span class="s1">'image/gif'</span><span class="p">,</span>
            <span class="s1">'jpg'</span> <span class="o">=&gt;</span> <span class="s1">'image/jpeg'</span><span class="p">,</span>
            <span class="s1">'png'</span> <span class="o">=&gt;</span> <span class="s1">'image/png'</span><span class="p">,</span>
        <span class="p">),</span>
        <span class="k">true</span>
    <span class="p">))</span> <span class="p">{</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nx">RuntimeException</span><span class="p">(</span><span class="s1">'ファイル形式が不正です'</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="c1">// ファイルデータからSHA-1ハッシュを取ってファイル名を決定し，保存する</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">move_uploaded_file</span><span class="p">(</span>
        <span class="nv">$_FILES</span><span class="p">[</span><span class="s1">'upfile'</span><span class="p">][</span><span class="s1">'tmp_name'</span><span class="p">],</span>
        <span class="nv">$path</span> <span class="o">=</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s1">'./uploads/%s.%s'</span><span class="p">,</span>
            <span class="nb">sha1_file</span><span class="p">(</span><span class="nv">$_FILES</span><span class="p">[</span><span class="s1">'upfile'</span><span class="p">][</span><span class="s1">'tmp_name'</span><span class="p">]),</span>
            <span class="nv">$ext</span>
        <span class="p">)</span>
    <span class="p">))</span> <span class="p">{</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nx">RuntimeException</span><span class="p">(</span><span class="s1">'ファイル保存時にエラーが発生しました'</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="c1">// ファイルのパーミッションを確実に0644に設定する</span>
    <span class="nb">chmod</span><span class="p">(</span><span class="nv">$path</span><span class="p">,</span> <span class="mo">0644</span><span class="p">);</span>

    <span class="k">echo</span> <span class="s1">'ファイルは正常にアップロードされました'</span><span class="p">;</span>

<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">RuntimeException</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>

    <span class="k">echo</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">();</span>

<span class="p">}</span>
</pre></div>
</div>

<h1>
<span id="psr-7ベースの方法-20160724-追記" class="fragment"></span><a href="#psr-7%E3%83%99%E3%83%BC%E3%82%B9%E3%81%AE%E6%96%B9%E6%B3%95-20160724-%E8%BF%BD%E8%A8%98"><i class="fa fa-link"></i></a>PSR-7ベースの方法 (2016/07/24 追記)</h1>

<p>今からコードを書く場合，この方法が最も推奨される．これはZend Frameworkのコンポーネントだが，もしフレームワーク側で個別に提供されている場合はそういったものを利用しても構わない．しかし，（任意多次元の配列に対応できるのかなど）<strong>それが信用に値するコードか</strong>を自分自身で確認した上で実際に使うことが望まれる．</p>

<ul>
<li><strong><a href="http://qiita.com/asaokamei/items/d9194076e11931f5f3c0" id="reference-374c34f6d1a615a784f0">PSR-7のHttp/Messageを使ったファイルアップロード処理</a></strong></li>
</ul>

<p>上記の内容に従った例をPHPマニュアルのユーザノートに投稿した．<a href="http://php.net/manual/en/features.file-upload.post-method.php#119643" rel="nofollow noopener" target="_blank">リンク</a>をこちらに記載しておく．</p>

<h1>
<span id="実装例-warning少しコードが古めなので注意warning" class="fragment"></span><a href="#%E5%AE%9F%E8%A3%85%E4%BE%8B-warning%E5%B0%91%E3%81%97%E3%82%B3%E3%83%BC%E3%83%89%E3%81%8C%E5%8F%A4%E3%82%81%E3%81%AA%E3%81%AE%E3%81%A7%E6%B3%A8%E6%84%8Fwarning"><i class="fa fa-link"></i></a>実装例 (<img alt=":warning:" class="emoji" height="20" src="https://cdn.qiita.com/emoji/twemoji/unicode/26a0-fe0f.png" title=":warning:" width="20">少しコードが古めなので注意<img alt=":warning:" class="emoji" height="20" src="https://cdn.qiita.com/emoji/twemoji/unicode/26a0-fe0f.png" title=":warning:" width="20">)</h1>

<p>具体的にフォームを交えて実装した例を紹介する．この記事では <strong>「リクエストを受ける専用のファイル」</strong> であることを想定してコードを書いたが，以下の例はリクエストを受けるだけでなく <strong>「ユーザーにフォーム入力させるファイル」</strong> という役割を兼ねさせている．1ファイルで全ての処理を担当するということである．</p>

<h2>
<span id="画像アップロード処理サンプル集" class="fragment"></span><a href="#%E7%94%BB%E5%83%8F%E3%82%A2%E3%83%83%E3%83%97%E3%83%AD%E3%83%BC%E3%83%89%E5%87%A6%E7%90%86%E3%82%B5%E3%83%B3%E3%83%97%E3%83%AB%E9%9B%86"><i class="fa fa-link"></i></a><a href="http://qiita.com/mpyw/items/73ee77a9535cc65eff1e" id="reference-936f749ca7618269246f">画像アップロード処理サンプル集</a>
</h2>

<ul>
<li>単純な画像アップロード</li>
<li>画像形式の変換</li>
<li>画像のリサイズ</li>
<li>複数ファイルのアップロード</li>
</ul>

<h2>
<span id="phpmysqlで簡易画像アップローダ" class="fragment"></span><a href="#phpmysql%E3%81%A7%E7%B0%A1%E6%98%93%E7%94%BB%E5%83%8F%E3%82%A2%E3%83%83%E3%83%97%E3%83%AD%E3%83%BC%E3%83%80"><i class="fa fa-link"></i></a><a href="http://qiita.com/mpyw/items/117ab6a88fd58d911c34" id="reference-bd180285f369701316b2">PHP+MySQLで簡易画像アップローダ</a>
</h2>

<p>(上のサンプル集に含めようと考えましたが，内容が多すぎる気がしたので記事を分けました)</p>

<ul>
<li>アップロードした画像の <strong>画像データ</strong> をMySQLに挿入する</li>
<li>アップロードした画像の <strong>サムネイルデータ</strong> を同時に作成してMySQLに挿入する</li>
<li>取り出してきた <strong>画像データ</strong> を<ins>画像ファイルとして直接出力する</ins>
</li>
<li>取り出してきた <strong>サムネイルデータ</strong> を<ins>データURIスキームを利用してHTML内に出力する</ins>
</li>
<li>Internet Explorer のみで起こり得る <strong>画像XSS</strong> を防止する</li>
</ul>

<h2>
<span id="ディレクトリ作成を許可してファイルをアップロード" class="fragment"></span><a href="#%E3%83%87%E3%82%A3%E3%83%AC%E3%82%AF%E3%83%88%E3%83%AA%E4%BD%9C%E6%88%90%E3%82%92%E8%A8%B1%E5%8F%AF%E3%81%97%E3%81%A6%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%82%92%E3%82%A2%E3%83%83%E3%83%97%E3%83%AD%E3%83%BC%E3%83%89"><i class="fa fa-link"></i></a><a href="http://qiita.com/mpyw/items/695f443674aef8d349c3" id="reference-5f1071e7f3c94d5ee497">ディレクトリ作成を許可してファイルをアップロード</a>
</h2>

<ul>
<li>ユーザーがアップロードしたファイルの名前 <code>$_FILES['upfile']['name']</code> をそのまま使用する</li>
<li>ユーザーに保存するディレクトリを指定する権限を与え，存在しないものに関しては自動的に生成させる</li>
</ul>

<h2>
<span id="csvアップロードからのmysqlへのデータ挿入" class="fragment"></span><a href="#csv%E3%82%A2%E3%83%83%E3%83%97%E3%83%AD%E3%83%BC%E3%83%89%E3%81%8B%E3%82%89%E3%81%AEmysql%E3%81%B8%E3%81%AE%E3%83%87%E3%83%BC%E3%82%BF%E6%8C%BF%E5%85%A5"><i class="fa fa-link"></i></a><a href="http://qiita.com/mpyw/items/caa2568284b69d270f8b" id="reference-7150cfdcad17a9493025">CSVアップロードからのMySQLへのデータ挿入</a>
</h2>

<ul>
<li>CSVファイルをユーザーにアップロードさせて，それをそのままMySQLのテーブルにINSERTする</li>
</ul>
</div>
	</td>
</tr>
</table>
<br />
<table border="1" style="height:150px;">
<tr>
	<td rowspan="3">81位</td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="thumb-up-120px.png" /></i>719</kbd>
		<a target="_blank" href="https://qiita.com/hide/items/5bfe5b322872c61a6896">よく使う Vim のコマンドまとめ</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-07-06<br />11:56:18</center>
	</td>
	<td style="width:200px;">
		<!--投稿者-->
		<center>
			@<a href="user/12286.html">hide</a>(13件の記事)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/12286/profile-images/1473682343">
		</center>
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Vim]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<!--
		<div style="width:350px;height:150px;overflow:scroll;">%s</div>
		-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;">
<h1>
<span id="ファイル操作" class="fragment"></span><a href="#%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E6%93%8D%E4%BD%9C"><i class="fa fa-link"></i></a>ファイル操作</h1>

<table>
<thead>
<tr>
<th>key</th>
<th>内容</th>
</tr>
</thead>
<tbody>
<tr>
<td>ZZ</td>
<td>上書き保存し、viを終了</td>
</tr>
<tr>
<td>:w</td>
<td>内容を保存</td>
</tr>
<tr>
<td>:q!</td>
<td>保存せずに終了</td>
</tr>
</tbody>
</table>

<h1>
<span id="モード" class="fragment"></span><a href="#%E3%83%A2%E3%83%BC%E3%83%89"><i class="fa fa-link"></i></a>モード</h1>

<table>
<thead>
<tr>
<th>key</th>
<th>内容</th>
</tr>
</thead>
<tbody>
<tr>
<td>i</td>
<td>挿入モードへ</td>
</tr>
<tr>
<td>o</td>
<td>新しい行を追加し挿入モードへ</td>
</tr>
<tr>
<td>R</td>
<td>上書きモードへ</td>
</tr>
<tr>
<td>v</td>
<td>ビジュアルモードへ</td>
</tr>
<tr>
<td>Ctrl + v</td>
<td>矩形選択のビジュアルモードへ</td>
</tr>
<tr>
<td>ESC</td>
<td>コマンドモードに戻る</td>
</tr>
<tr>
<td>ctrl + [</td>
<td>コマンドモードに戻る</td>
</tr>
<tr>
<td>ctrl + z</td>
<td>vim を一時停止する</td>
</tr>
</tbody>
</table>

<h1>
<span id="カーソル移動" class="fragment"></span><a href="#%E3%82%AB%E3%83%BC%E3%82%BD%E3%83%AB%E7%A7%BB%E5%8B%95"><i class="fa fa-link"></i></a>カーソル移動</h1>

<table>
<thead>
<tr>
<th>key</th>
<th>内容</th>
</tr>
</thead>
<tbody>
<tr>
<td>w</td>
<td>次の単語 (Word)</td>
</tr>
<tr>
<td>b</td>
<td>前の単語</td>
</tr>
<tr>
<td>f(文字)</td>
<td>カーソルがある行の(文字)に移動 (Find)</td>
</tr>
<tr>
<td>F(文字)</td>
<td>カーソルがある行の(文字)に移動(逆向き)</td>
</tr>
<tr>
<td>0</td>
<td>行頭</td>
</tr>
<tr>
<td>＾</td>
<td>行頭</td>
</tr>
<tr>
<td>$</td>
<td>行末</td>
</tr>
<tr>
<td>%</td>
<td>対応する括弧に移動</td>
</tr>
<tr>
<td>Ctrl + u</td>
<td>半画面上 (Up)</td>
</tr>
<tr>
<td>Ctrl + d</td>
<td>半画面下 (Down)</td>
</tr>
<tr>
<td>zz</td>
<td>カーソルが画面中央になるようにスクロール</td>
</tr>
<tr>
<td>Ctrl + o</td>
<td>古いカーソル位置に戻る。 (Old)</td>
</tr>
<tr>
<td>Ctrl + i</td>
<td>新しいカーソル位置に進む。</td>
</tr>
</tbody>
</table>

<h1>
<span id="行移動" class="fragment"></span><a href="#%E8%A1%8C%E7%A7%BB%E5%8B%95"><i class="fa fa-link"></i></a>行移動</h1>

<table>
<thead>
<tr>
<th>key</th>
<th>内容</th>
</tr>
</thead>
<tbody>
<tr>
<td>gg</td>
<td>最初の行</td>
</tr>
<tr>
<td>88G</td>
<td>88行目</td>
</tr>
<tr>
<td>G</td>
<td>最終行</td>
</tr>
<tr>
<td>H</td>
<td>画面上の最初の行 (Home)</td>
</tr>
<tr>
<td>M</td>
<td>画面上の中央の行 (Middle)</td>
</tr>
<tr>
<td>L</td>
<td>画面上の最後の行 (Last)</td>
</tr>
</tbody>
</table>

<h1>
<span id="検索と置換" class="fragment"></span><a href="#%E6%A4%9C%E7%B4%A2%E3%81%A8%E7%BD%AE%E6%8F%9B"><i class="fa fa-link"></i></a>検索と置換</h1>

<table>
<thead>
<tr>
<th>key</th>
<th>内容</th>
</tr>
</thead>
<tbody>
<tr>
<td>*</td>
<td>カーソル下の単語を検索</td>
</tr>
<tr>
<td>#</td>
<td>カーソル下の単語を検索 (上方向に検索)</td>
</tr>
<tr>
<td>:%s/hage/hoge/g</td>
<td>単語の置換(hageをhogeへ置換)。<code>%</code> はファイル全体を表す。</td>
</tr>
</tbody>
</table>

<h1>
<span id="編集" class="fragment"></span><a href="#%E7%B7%A8%E9%9B%86"><i class="fa fa-link"></i></a>編集</h1>

<table>
<thead>
<tr>
<th>key</th>
<th>内容</th>
</tr>
</thead>
<tbody>
<tr>
<td>.</td>
<td>直前の変更を繰り返す</td>
</tr>
<tr>
<td>u</td>
<td>Undo</td>
</tr>
<tr>
<td>Ctrl + r</td>
<td>Redo</td>
</tr>
</tbody>
</table>

<h1>
<span id="コピーペースト" class="fragment"></span><a href="#%E3%82%B3%E3%83%94%E3%83%BC%E3%83%9A%E3%83%BC%E3%82%B9%E3%83%88"><i class="fa fa-link"></i></a>コピー&amp;ペースト</h1>

<table>
<thead>
<tr>
<th>key</th>
<th>内容</th>
</tr>
</thead>
<tbody>
<tr>
<td>yy</td>
<td>今いる行をコピー (yank)</td>
</tr>
<tr>
<td>p</td>
<td>カーソルの場所に、ペースト</td>
</tr>
<tr>
<td>yy5p</td>
<td>現在の行をコピーし、下に5行追加する</td>
</tr>
<tr>
<td>gv</td>
<td>直前の選択範囲を再選択</td>
</tr>
</tbody>
</table>

<h1>
<span id="特殊文字" class="fragment"></span><a href="#%E7%89%B9%E6%AE%8A%E6%96%87%E5%AD%97"><i class="fa fa-link"></i></a>特殊文字</h1>

<table>
<thead>
<tr>
<th>key</th>
<th>内容</th>
</tr>
</thead>
<tbody>
<tr>
<td>Ctrl-v return</td>
<td>改行文字の入力</td>
</tr>
<tr>
<td>Ctrl-v tab</td>
<td>Tab 文字の入力</td>
</tr>
</tbody>
</table>

<h1>
<span id="ウィンドウ" class="fragment"></span><a href="#%E3%82%A6%E3%82%A3%E3%83%B3%E3%83%89%E3%82%A6"><i class="fa fa-link"></i></a>ウィンドウ</h1>

<table>
<thead>
<tr>
<th>key</th>
<th>内容</th>
</tr>
</thead>
<tbody>
<tr>
<td>:vsplit</td>
<td>画面を左右に分割する</td>
</tr>
<tr>
<td>:e filename</td>
<td>今いるWindowにファイルを開く (Edit)</td>
</tr>
<tr>
<td>:e test*.cc</td>
<td>ワイルドカードを指定してファイルを開く</td>
</tr>
<tr>
<td>Ctrl +w h</td>
<td>左のWindowへ移動</td>
</tr>
<tr>
<td>Ctrl + w l</td>
<td>右のWindowへ移動</td>
</tr>
</tbody>
</table>

<h1>
<span id="バッファ" class="fragment"></span><a href="#%E3%83%90%E3%83%83%E3%83%95%E3%82%A1"><i class="fa fa-link"></i></a>バッファ</h1>

<table>
<thead>
<tr>
<th>key</th>
<th>内容</th>
</tr>
</thead>
<tbody>
<tr>
<td>:buffers</td>
<td>編集中のバッファ一覧を表示</td>
</tr>
<tr>
<td>:bn</td>
<td>次のバッファに移動</td>
</tr>
<tr>
<td>:bd[elete]</td>
<td>バッファを削除</td>
</tr>
</tbody>
</table>

<h1>
<span id="単語補完" class="fragment"></span><a href="#%E5%8D%98%E8%AA%9E%E8%A3%9C%E5%AE%8C"><i class="fa fa-link"></i></a>単語補完</h1>

<table>
<thead>
<tr>
<th>key</th>
<th>内容</th>
</tr>
</thead>
<tbody>
<tr>
<td>Ctrl + p</td>
<td>単語補完(前方検索)</td>
</tr>
</tbody>
</table>

<h1>
<span id="マクロ" class="fragment"></span><a href="#%E3%83%9E%E3%82%AF%E3%83%AD"><i class="fa fa-link"></i></a>マクロ</h1>

<table>
<thead>
<tr>
<th>key</th>
<th>内容</th>
</tr>
</thead>
<tbody>
<tr>
<td>q&lt;letter&gt;</td>
<td>マクロの記録開始</td>
</tr>
<tr>
<td>q</td>
<td>マクロの記録停止</td>
</tr>
<tr>
<td>@&lt;letter&gt;</td>
<td>マクロの実行</td>
</tr>
</tbody>
</table>

<h1>
<span id="レジスタ" class="fragment"></span><a href="#%E3%83%AC%E3%82%B8%E3%82%B9%E3%82%BF"><i class="fa fa-link"></i></a>レジスタ</h1>

<table>
<thead>
<tr>
<th>key</th>
<th>機能</th>
</tr>
</thead>
<tbody>
<tr>
<td>:reg</td>
<td>レジスタの一覧表示</td>
</tr>
<tr>
<td>Ctrl + r "</td>
<td>ヤンクした文字列をペースト</td>
</tr>
</tbody>
</table>

<h1>
<span id="コマンドの意味" class="fragment"></span><a href="#%E3%82%B3%E3%83%9E%E3%83%B3%E3%83%89%E3%81%AE%E6%84%8F%E5%91%B3"><i class="fa fa-link"></i></a>コマンドの意味</h1>

<table>
<thead>
<tr>
<th>key</th>
<th>意味</th>
</tr>
</thead>
<tbody>
<tr>
<td>g</td>
<td>繰り返し</td>
</tr>
<tr>
<td>c</td>
<td>1回毎に確認</td>
</tr>
</tbody>
</table>

<h1>
<span id="その他" class="fragment"></span><a href="#%E3%81%9D%E3%81%AE%E4%BB%96"><i class="fa fa-link"></i></a>その他</h1>

<table>
<thead>
<tr>
<th>key</th>
<th>内容</th>
</tr>
</thead>
<tbody>
<tr>
<td>:!command</td>
<td>外部コマンドの実行</td>
</tr>
<tr>
<td>:</td>
<td>範囲選択中に <code>:</code> を入力すると、選択領域の範囲指定( <code>’&lt;,’&gt;</code> )が自動で挿入された状態でコマンドモードに入る。これを置換に利用すると便利。 (例: :'&lt;,'&gt;s/old/new/g)</td>
</tr>
<tr>
<td>Ctrl + a</td>
<td>数値のインクリメント</td>
</tr>
<tr>
<td>Ctrl + x</td>
<td>数値のデクリメント</td>
</tr>
</tbody>
</table>

<h1>
<span id="参考文献" class="fragment"></span><a href="#%E5%8F%82%E8%80%83%E6%96%87%E7%8C%AE"><i class="fa fa-link"></i></a>参考文献</h1>

<p><a href="http://route477.net/w/?VimMemo" rel="nofollow noopener" target="_blank">Route 477 - Vim覚え書き</a><br>
<a href="http://archiva.jp/web/tool/vim_basic.html" rel="nofollow noopener" target="_blank">Vim 基本操作まとめ - Archiva</a><br>
<a href="http://d.hatena.ne.jp/ykmbpp/20080527/1211850475" rel="nofollow noopener" target="_blank">検索・置換に便利なヤンク（レジスタ）【Vimコマンド】にさん追加7/3 - YKMbPP</a></p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1" style="height:150px;">
<tr>
	<td rowspan="3">82位</td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="thumb-up-120px.png" /></i>711</kbd>
		<a target="_blank" href="https://qiita.com/axross/items/1fc342c04aa88d48c713">絶対に読んでおきたい、JavaScriptのおすすめ書籍7冊</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-10-03<br />17:10:37</center>
	</td>
	<td style="width:200px;">
		<!--投稿者-->
		<center>
			@<a href="user/20674.html">axross</a>(7件の記事)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/20674/profile-images/1506601100">
		</center>
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[JavaScript]</b> <b>[書籍]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<!--
		<div style="width:350px;height:150px;overflow:scroll;">%s</div>
		-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>フロントエンドエンジニアにとって、JavaScriptは今や開発の中心にあると言ってもいいと思います。</p>

<p>JavaScriptに対していまいち自信のない人向けに、おすすめしたい本をまとめてみました。</p>

<p>これで、日本のJS界隈がもっと賑わって、仲間が増えると嬉しいです(今でもかなり賑やかですが)。</p>

<h1>
<span id="基礎" class="fragment"></span><a href="#%E5%9F%BA%E7%A4%8E"><i class="fa fa-link"></i></a>基礎</h1>

<h2>
<span id="javascript本格入門" class="fragment"></span><a href="#javascript%E6%9C%AC%E6%A0%BC%E5%85%A5%E9%96%80"><i class="fa fa-link"></i></a>JavaScript本格入門</h2>

<p><a href="http://www.amazon.co.jp/exec/obidos/ASIN/4774144665/axross-22/" rel="nofollow noopener" target="_blank"><img src="https://camo.qiitausercontent.com/c41da518a8f062e8216dc71e28e86222644fff28/687474703a2f2f6563782e696d616765732d616d617a6f6e2e636f6d2f696d616765732f492f353132776f39693969534c2e5f534c3136305f2e6a7067" alt="JavaScript本格入門" data-canonical-src="http://ecx.images-amazon.com/images/I/512wo9i9iSL._SL160_.jpg"></a></p>

<p>JavaScriptの本の中では一番易しいんじゃないかな、と思います。</p>

<p>これ以上に読者ターゲットのレベルを落とした本は、解説が不十分だったり、レシピ集のような側面が強かったりで、勉強には向いていません(網羅的でないということ)。</p>

<p>この本は解説のみで、深い仕様やテクニックには踏み込みません。それだけに読みやすく仕上がっていると思います。</p>

<p>この本でJavaScriptに興味をもつことができたら、よりディープな本に進んでみるといいと思います。</p>

<h2>
<span id="パーフェクトjavascript" class="fragment"></span><a href="#%E3%83%91%E3%83%BC%E3%83%95%E3%82%A7%E3%82%AF%E3%83%88javascript"><i class="fa fa-link"></i></a>パーフェクトJavaScript</h2>

<p><a href="http://www.amazon.co.jp/exec/obidos/ASIN/477414813X/axross-22/" rel="nofollow noopener" target="_blank"><img src="https://camo.qiitausercontent.com/bc44ce84fb48cb4616f112f0176518a21a96dca0/687474703a2f2f6563782e696d616765732d616d617a6f6e2e636f6d2f696d616765732f492f353179726a4673662d324c2e5f534c3136305f2e6a7067" alt="パーフェクトJavaScript" data-canonical-src="http://ecx.images-amazon.com/images/I/51yrjFsf-2L._SL160_.jpg"></a></p>

<p>「JavaScript本格入門」よりも、少しレベルの高い、同系統の本と思ってもらってかまいません。</p>

<p>プログラミング自体が初めての人がこの本をいきなり読むには、なかなか大変な思いをするでしょうが、「JavaScript本格入門」を読んだ後に進む先としてはバッチリです。買ったことを後悔させません。</p>

<h2>
<span id="javascript-第6版" class="fragment"></span><a href="#javascript-%E7%AC%AC6%E7%89%88"><i class="fa fa-link"></i></a>JavaScript 第6版</h2>

<p><a href="http://www.amazon.co.jp/exec/obidos/ASIN/4873115736/axross-22/" rel="nofollow noopener" target="_blank"><img src="https://camo.qiitausercontent.com/b4719acef9454e435355f549c71d98d8bdc95a71/687474703a2f2f6563782e696d616765732d616d617a6f6e2e636f6d2f696d616765732f492f353163397543726848674c2e5f534c3136305f2e6a7067" alt="JavaScript 第6版" data-canonical-src="http://ecx.images-amazon.com/images/I/51c9uCrhHgL._SL160_.jpg"></a></p>

<p>通称「サイ本」、JavaScriptのバイブルです。</p>

<p>とにかくページ数が多く、読みごたえがあります。上記の2つの本よりもさらに網羅的で、対象読者としてもプログラミング経験者を意識した説明になっています。</p>

<p>なかなか手を出しにくいかもしれませんが、JavaScriptを扱うフロントエンドエンジニアにとっては必読書です。ぜひ読んで下さい。</p>

<h1>
<span id="発展" class="fragment"></span><a href="#%E7%99%BA%E5%B1%95"><i class="fa fa-link"></i></a>発展</h1>

<h2>
<span id="javascriptエンジニア-養成読本" class="fragment"></span><a href="#javascript%E3%82%A8%E3%83%B3%E3%82%B8%E3%83%8B%E3%82%A2-%E9%A4%8A%E6%88%90%E8%AA%AD%E6%9C%AC"><i class="fa fa-link"></i></a>JavaScriptエンジニア 養成読本</h2>

<p><a href="http://www.amazon.co.jp/exec/obidos/ASIN/4774167975/axross-22/" rel="nofollow noopener" target="_blank"><img src="https://camo.qiitausercontent.com/6c946c89c1591aafcb8a211acd2acc56f31810fe/687474703a2f2f6563782e696d616765732d616d617a6f6e2e636f6d2f696d616765732f492f353146717848694466634c2e5f41413136305f2e6a7067" alt="JavaScriptエンジニア 養成読本" data-canonical-src="http://ecx.images-amazon.com/images/I/51FqxHiDfcL._AA160_.jpg"></a></p>

<p>基礎は大事ですが、JavaScriptの言語仕様だけを学んでいても、大規模なアプリケーションの開発に役に立つことは少ないでしょう。</p>

<p>特に、Webフロントエンドの開発手法と開発手段は、進化の速い分野のひとつです。</p>

<p>JavaScriptがWebページを装飾するスクリプトに過ぎなかった頃もありました。しかしサナギから羽化した今、JavaScriptはWebページをコントロールするまでに至っています。JavaScriptを学ぶなら、JavaScriptの言語仕様だけに留まらず、よく使われるツールやライブラリ、フレームワークなどの周辺技術についても学ぶべきです。</p>

<p>そんなアプリケーション開発のためのノウハウを学ぶのにピッタリの1冊です。JavaScriptとフロントエンド開発をもっと好きになれるので、ぜひ読んでみてください。</p>

<h2>
<span id="開眼-javascript" class="fragment"></span><a href="#%E9%96%8B%E7%9C%BC-javascript"><i class="fa fa-link"></i></a>開眼！ JavaScript</h2>

<p><a href="http://www.amazon.co.jp/exec/obidos/ASIN/487311621X/axross-22/" rel="nofollow noopener" target="_blank"><img src="https://camo.qiitausercontent.com/c438dfa09de479e71e851153b18afcc2e51f424b/687474703a2f2f6563782e696d616765732d616d617a6f6e2e636f6d2f696d616765732f492f35316a4d7133253242446b6c4c2e5f534c3136305f2e6a7067" alt="開眼！ JavaScript" data-canonical-src="http://ecx.images-amazon.com/images/I/51jMq3%2BDklL._SL160_.jpg"></a></p>

<p>JavaScriptは手軽ながら、レキシカルスコープ、クロージャ、プロトタイプ、第一級関数など、少し理解が難しい要素が存在します。</p>

<p>この本は、そういった部分に焦点を絞り、丁寧に解説してくれています。あなたがJavaScriptの仕組みや、既存のコードの書かれ方に少なからず疑問を持っている点があれば、それを解決する本だといえるでしょう。</p>

<h2>
<span id="サーバサイドjavascript-nodejs入門" class="fragment"></span><a href="#%E3%82%B5%E3%83%BC%E3%83%90%E3%82%B5%E3%82%A4%E3%83%89javascript-nodejs%E5%85%A5%E9%96%80"><i class="fa fa-link"></i></a>サーバサイドJavaScript Node.js入門</h2>

<p><a href="http://www.amazon.co.jp/exec/obidos/ASIN/4048703676/axross-22/" rel="nofollow noopener" target="_blank"><img src="https://camo.qiitausercontent.com/bdfc6f86c022b74d182e4aae65b956811707d7fb/687474703a2f2f6563782e696d616765732d616d617a6f6e2e636f6d2f696d616765732f492f35317252624f715770714c2e5f41413136305f2e6a7067" alt="サーバサイドJavaScript Node.js入門" data-canonical-src="http://ecx.images-amazon.com/images/I/51rRbOqWpqL._AA160_.jpg"></a></p>

<p>Node.jsは、いまではフロントエンドエンジニアにとって避けることのできない、重要なものであるといえます。</p>

<p>gulpやGrunt、BrowserifyやWebpackだけではありません。いずれはサーバサイドJavaScriptのコードの一部を読み書きしなければならない時代が来るでしょう。また、想像もできないかもしれませんが、あなたが書いたクライアントサイド向けのJavaScriptを、Webサーバー上でも動かさなければならない時も来るでしょう。</p>

<p>今からでも遅くないので、少しでもNode.jsと仲良くしましょう。この本はそのための1冊です。</p>

<h2>
<span id="リーダブルコード" class="fragment"></span><a href="#%E3%83%AA%E3%83%BC%E3%83%80%E3%83%96%E3%83%AB%E3%82%B3%E3%83%BC%E3%83%89"><i class="fa fa-link"></i></a>リーダブルコード</h2>

<p><a href="http://www.amazon.co.jp/exec/obidos/ASIN/4873115655/axross-22/" rel="nofollow noopener" target="_blank"><img src="https://camo.qiitausercontent.com/d56945a193971232e53350e97751edab183217c3/687474703a2f2f6563782e696d616765732d616d617a6f6e2e636f6d2f696d616765732f492f35314d6748384a6d72334c2e5f41413136305f2e6a7067" alt="リーダブルコード" data-canonical-src="http://ecx.images-amazon.com/images/I/51MgH8Jmr3L._AA160_.jpg"></a></p>

<p>謝らないといけませんが、これはJavaScriptの本ではありません。<br><br>
しかし、「JavaScriptを書く」ということ考えた時に、どうしても薦めたかったので、無理やり入れてしまいました。</p>

<p>JavaScriptは動的型付けの言語であり、プロトタイプベースであるために、明確な「クラス」も存在しません。すべての関数がコンストラクタになりえます。そして、プリミティブな値と、nullやundefinedなどの特殊な値、FunctionやArrayなどのネイティブクラスを除けば、すべてが拡張された連想配列であると表現できます。これは自由な代わりに、あいまいさが強いとも言えます。</p>

<p>そうした時に重要になるのが、「より読解コストの低いコードを書けること」だと思います。ドキュメントを書けばいくらか誤魔化せますが、バグは前もってドキュメントに書くことはできません。何よりコードが読みやすいことが一番です。また、読解コストを意識されたコードは、自然とバグの少ないコードにもなります。</p>

<p>この1冊は、あなたのそうした意識を目醒めさせます。同僚を殺さないために、読んでみてください。</p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1" style="height:150px;">
<tr>
	<td rowspan="3">83位</td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="thumb-up-120px.png" /></i>709</kbd>
		<a target="_blank" href="https://qiita.com/genzouw/items/35022fa96c120e67c637">データベースオブジェクトの命名規約</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2014-03-28<br />16:36:07</center>
	</td>
	<td style="width:200px;">
		<!--投稿者-->
		<center>
			@<a href="user/15523.html">genzouw</a>(16件の記事)<br />(株式会社ロックオン 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/15523/profile-images/1473681614">
		</center>
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[規約]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<!--
		<div style="width:350px;height:150px;overflow:scroll;">%s</div>
		-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;">
<h1>
<span id="オブジェクトの命名規約" class="fragment"></span><a href="#%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AE%E5%91%BD%E5%90%8D%E8%A6%8F%E7%B4%84"><i class="fa fa-link"></i></a>オブジェクトの命名規約</h1>

<p>DB設計によく携わっていた頃に多くのプロジェクトで共通で規定されていた規約をまとめてみました。</p>

<p>ここでは <strong>オブジェクト</strong> として以下のものを対象としています。<br>
（カラムはテーブルの一部ではありますが、別で切りだしています。）</p>

<ul>
<li>テーブル</li>
<li>カラム</li>
<li>インデックス</li>
<li>制約</li>
</ul>

<h2>
<span id="1全般" class="fragment"></span><a href="#1%E5%85%A8%E8%88%AC"><i class="fa fa-link"></i></a>1.全般</h2>

<h3>
<span id="大文字を利用しない" class="fragment"></span><a href="#%E5%A4%A7%E6%96%87%E5%AD%97%E3%82%92%E5%88%A9%E7%94%A8%E3%81%97%E3%81%AA%E3%81%84"><i class="fa fa-link"></i></a>大文字を利用しない</h3>

<p>テーブル名、カラム名ともに大文字を利用しない。<br>
（DBにより大文字小文字を区別するもの、しないものなどがあるため小文字で統一を図る）</p>

<table>
<thead>
<tr>
<th>名前</th>
<th>OK/NG</th>
</tr>
</thead>
<tbody>
<tr>
<td>DOCUMENTS</td>
<td>x</td>
</tr>
<tr>
<td>Documents</td>
<td>x</td>
</tr>
<tr>
<td><strong>documents</strong></td>
<td>o</td>
</tr>
</tbody>
</table>

<h3>
<span id="複数単語の連携は-スネークケース" class="fragment"></span><a href="#%E8%A4%87%E6%95%B0%E5%8D%98%E8%AA%9E%E3%81%AE%E9%80%A3%E6%90%BA%E3%81%AF-%E3%82%B9%E3%83%8D%E3%83%BC%E3%82%AF%E3%82%B1%E3%83%BC%E3%82%B9"><i class="fa fa-link"></i></a>複数単語の連携は <em>スネークケース</em>
</h3>

<p>テーブル名、カラム名ともにスネークケースを利用する。<br>
キャメルケース、キャメルバックはNG。</p>

<table>
<thead>
<tr>
<th>名前</th>
<th>OK/NG</th>
</tr>
</thead>
<tbody>
<tr>
<td>tableName</td>
<td>x</td>
</tr>
<tr>
<td>TableName</td>
<td>x</td>
</tr>
<tr>
<td>tablename</td>
<td>x</td>
</tr>
<tr>
<td><strong>table_name</strong></td>
<td>o</td>
</tr>
</tbody>
</table>

<h3>
<span id="英語表記" class="fragment"></span><a href="#%E8%8B%B1%E8%AA%9E%E8%A1%A8%E8%A8%98"><i class="fa fa-link"></i></a>英語表記</h3>

<p>基本的にはローマ字ではなく、英語で。</p>

<h3>
<span id="略名は利用しない" class="fragment"></span><a href="#%E7%95%A5%E5%90%8D%E3%81%AF%E5%88%A9%E7%94%A8%E3%81%97%E3%81%AA%E3%81%84"><i class="fa fa-link"></i></a>略名は利用しない</h3>

<table>
<thead>
<tr>
<th>名前</th>
<th>OK/NG</th>
</tr>
</thead>
<tbody>
<tr>
<td>start_dt</td>
<td>x</td>
</tr>
<tr>
<td>maker_cd</td>
<td>x</td>
</tr>
<tr>
<td><strong>start_date</strong></td>
<td>o</td>
</tr>
<tr>
<td><strong>maker_code</strong></td>
<td>o</td>
</tr>
</tbody>
</table>

<h2>
<span id="2テーブル編" class="fragment"></span><a href="#2%E3%83%86%E3%83%BC%E3%83%96%E3%83%AB%E7%B7%A8"><i class="fa fa-link"></i></a>2.テーブル編</h2>

<h3>
<span id="基本系-は-s複数形" class="fragment"></span><a href="#%E5%9F%BA%E6%9C%AC%E7%B3%BB-%E3%81%AF-s%E8%A4%87%E6%95%B0%E5%BD%A2"><i class="fa fa-link"></i></a>基本系 は <strong>〜s（複数形）</strong>
</h3>

<table>
<thead>
<tr>
<th>名前</th>
<th>OK/NG</th>
</tr>
</thead>
<tbody>
<tr>
<td>document</td>
<td>x</td>
</tr>
<tr>
<td><strong>documents</strong></td>
<td>o</td>
</tr>
<tr>
<td>category</td>
<td>x</td>
</tr>
<tr>
<td>categorys</td>
<td>x</td>
</tr>
<tr>
<td><strong>categories</strong></td>
<td>o</td>
</tr>
</tbody>
</table>

<h3>
<span id="nnのテーブル" class="fragment"></span><a href="#nn%E3%81%AE%E3%83%86%E3%83%BC%E3%83%96%E3%83%AB"><i class="fa fa-link"></i></a>n:nのテーブル</h3>

<p><strong>〜s（複数形）</strong> + "_" + <strong>〜s（複数形）</strong></p>

<table>
<thead>
<tr>
<th>名前</th>
<th>OK/NG</th>
</tr>
</thead>
<tbody>
<tr>
<td>userscategories</td>
<td>x</td>
</tr>
<tr>
<td>user_categories</td>
<td>x</td>
</tr>
<tr>
<td><strong>users_categories</strong></td>
<td>o</td>
</tr>
</tbody>
</table>

<p><em><a href="/ryo88c" class="user-mention js-hovercard" title="ryo88c" data-hovercard-target-type="user" data-hovercard-target-name="ryo88c">@ryo88c</a> さんの案に、今までのプロジェクトでのケースを加えさせていただきました。</em></p>

<h2>
<span id="3カラム編" class="fragment"></span><a href="#3%E3%82%AB%E3%83%A9%E3%83%A0%E7%B7%A8"><i class="fa fa-link"></i></a>3.カラム編</h2>

<h3>
<span id="ある瞬間の状態ステータスを表す名前とする" class="fragment"></span><a href="#%E3%81%82%E3%82%8B%E7%9E%AC%E9%96%93%E3%81%AE%E7%8A%B6%E6%85%8B%E3%82%B9%E3%83%86%E3%83%BC%E3%82%BF%E3%82%B9%E3%82%92%E8%A1%A8%E3%81%99%E5%90%8D%E5%89%8D%E3%81%A8%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a><strong>ある瞬間の状態（ステータス）を表す名前とする</strong>
</h3>

<table>
<thead>
<tr>
<th>カラム名</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>name</strong></td>
</tr>
<tr>
<td><strong>age</strong></td>
</tr>
<tr>
<td><strong>is_working</strong></td>
</tr>
<tr>
<td>...</td>
</tr>
</tbody>
</table>

<p><em>ある任意のタイミングの情報を管理するというDBの特性から考えたら当然では有ります</em> </p>

<h3>
<span id="以下のカラムは必須" class="fragment"></span><a href="#%E4%BB%A5%E4%B8%8B%E3%81%AE%E3%82%AB%E3%83%A9%E3%83%A0%E3%81%AF%E5%BF%85%E9%A0%88"><i class="fa fa-link"></i></a>以下のカラムは必須</h3>

<table>
<thead>
<tr>
<th>カラム名</th>
<th>役割</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>主キー</td>
</tr>
<tr>
<td>created_at</td>
<td>登録日時</td>
</tr>
<tr>
<td>updated_at</td>
<td>更新日時</td>
</tr>
</tbody>
</table>

<h3>
<span id="他テーブルの主キーとジョインするカラムは-テーブル名単数系_id" class="fragment"></span><a href="#%E4%BB%96%E3%83%86%E3%83%BC%E3%83%96%E3%83%AB%E3%81%AE%E4%B8%BB%E3%82%AD%E3%83%BC%E3%81%A8%E3%82%B8%E3%83%A7%E3%82%A4%E3%83%B3%E3%81%99%E3%82%8B%E3%82%AB%E3%83%A9%E3%83%A0%E3%81%AF-%E3%83%86%E3%83%BC%E3%83%96%E3%83%AB%E5%90%8D%E5%8D%98%E6%95%B0%E7%B3%BB_id"><i class="fa fa-link"></i></a>他テーブルの主キーとジョインするカラムは <em>テーブル名(単数系)_id</em>
</h3>

<table>
<thead>
<tr>
<th>カラム名</th>
<th>OK/NG</th>
</tr>
</thead>
<tbody>
<tr>
<td><em>categories_id</em></td>
<td>x</td>
</tr>
<tr>
<td><em>category_id</em></td>
<td>o</td>
</tr>
</tbody>
</table>

<h3>
<span id="flgkbnなどの略名は利用しない" class="fragment"></span><a href="#flgkbn%E3%81%AA%E3%81%A9%E3%81%AE%E7%95%A5%E5%90%8D%E3%81%AF%E5%88%A9%E7%94%A8%E3%81%97%E3%81%AA%E3%81%84"><i class="fa fa-link"></i></a>flg/kbnなどの略名は利用しない</h3>

<p><strong>flag</strong> は on/off の意味がわかりにくいため、できるだけ使用しない。<br>
（ <strong>delete_flag</strong> は on で削除？ off で削除？）</p>

<table>
<thead>
<tr>
<th>名前</th>
<th>OK/NG</th>
</tr>
</thead>
<tbody>
<tr>
<td>delete_flg</td>
<td>x</td>
</tr>
<tr>
<td>delete_flag</td>
<td>△</td>
</tr>
<tr>
<td><em>is_deleted</em></td>
<td>o</td>
</tr>
</tbody>
</table>

<h3>
<span id="時間を表すカラムは-受動態_on-受動態_at" class="fragment"></span><a href="#%E6%99%82%E9%96%93%E3%82%92%E8%A1%A8%E3%81%99%E3%82%AB%E3%83%A9%E3%83%A0%E3%81%AF-%E5%8F%97%E5%8B%95%E6%85%8B_on-%E5%8F%97%E5%8B%95%E6%85%8B_at"><i class="fa fa-link"></i></a>時間を表すカラムは <em>受動態_on</em> 、<em>受動態_at</em>
</h3>

<p><a href="http://railsdoc.com/rails_base" rel="nofollow noopener" target="_blank">Railsの基礎知識 - - Railsドキュメント</a> より。</p>

<p>DATE型のカラムには名前を「受動態_on」<br><br>
TIMESTAMP型のカラムには名前を「受動態_at」</p>

<table>
<thead>
<tr>
<th>名前</th>
<th>OK/NG</th>
</tr>
</thead>
<tbody>
<tr>
<td>created</td>
<td>x</td>
</tr>
<tr>
<td>created_at</td>
<td>o</td>
</tr>
<tr>
<td>closed_day</td>
<td>x</td>
</tr>
<tr>
<td>closed_on</td>
<td>o</td>
</tr>
</tbody>
</table>

<h2>
<span id="4制約編" class="fragment"></span><a href="#4%E5%88%B6%E7%B4%84%E7%B7%A8"><i class="fa fa-link"></i></a>4.制約編</h2>

<h3>
<span id="ユニーク制約は-uq_テーブル名_nn" class="fragment"></span><a href="#%E3%83%A6%E3%83%8B%E3%83%BC%E3%82%AF%E5%88%B6%E7%B4%84%E3%81%AF-uq_%E3%83%86%E3%83%BC%E3%83%96%E3%83%AB%E5%90%8D_nn"><i class="fa fa-link"></i></a>ユニーク制約は uq_&lt;テーブル名&gt;_NN</h3>

<p>users テーブルのユニークキーは以下のとおり。<br>
（同一テーブルに複数ユニークキーが存在していた場合、 <em>01</em> の部分を2桁のゼロフィル連番値で加算していく。）</p>

<ul>
<li><em>uq_users_01</em></li>
</ul>

<h2>
<span id="5インデックス編" class="fragment"></span><a href="#5%E3%82%A4%E3%83%B3%E3%83%87%E3%83%83%E3%82%AF%E3%82%B9%E7%B7%A8"><i class="fa fa-link"></i></a>5.インデックス編</h2>

<h3>
<span id="インデックス-は-idx_テーブル名_nn" class="fragment"></span><a href="#%E3%82%A4%E3%83%B3%E3%83%87%E3%83%83%E3%82%AF%E3%82%B9-%E3%81%AF-idx_%E3%83%86%E3%83%BC%E3%83%96%E3%83%AB%E5%90%8D_nn"><i class="fa fa-link"></i></a>インデックス は idx_&lt;テーブル名&gt;_NN</h3>

<p>users テーブルのインデックスは以下のとおり。<br>
（同一テーブルに複数インデックスが存在していた場合、 <em>01</em> の部分を2桁のゼロフィル連番値で加算していく。）</p>

<ul>
<li><em>idx_users_01</em></li>
</ul>

<h3>
<span id="ユニークインデックス-は-ui_テーブル名_nn" class="fragment"></span><a href="#%E3%83%A6%E3%83%8B%E3%83%BC%E3%82%AF%E3%82%A4%E3%83%B3%E3%83%87%E3%83%83%E3%82%AF%E3%82%B9-%E3%81%AF-ui_%E3%83%86%E3%83%BC%E3%83%96%E3%83%AB%E5%90%8D_nn"><i class="fa fa-link"></i></a>ユニークインデックス は ui_&lt;テーブル名&gt;_NN</h3>

<p>users テーブルのユニークインデックスキーは以下のとおり。<br>
（同一テーブルに複数ユニークインデックスが存在していた場合、 <em>01</em> の部分を2桁のゼロフィル連番値で加算していく。）</p>

<ul>
<li><em>ui_users_01</em></li>
</ul>

<hr>

<p>こんな規約もあるよ！という意見お待ちしています。</p>

<hr>

<p><strong>2017-01-22(日)</strong></p>

<p>以下の方のご指摘を反映</p>

<ul>
<li><a href="/Hirata-Masato" class="user-mention js-hovercard" title="Hirata-Masato" data-hovercard-target-type="user" data-hovercard-target-name="Hirata-Masato">@Hirata-Masato</a></li>
</ul>

<hr>

<p><strong>2016-06-29(水)</strong> </p>

<p>以下の方々の案を追記</p>

<ul>
<li>
<a href="/shoooo" class="user-mention js-hovercard" title="shoooo" data-hovercard-target-type="user" data-hovercard-target-name="shoooo">@shoooo</a> さん</li>
<li>
<a href="/fuzzball" class="user-mention js-hovercard" title="fuzzball" data-hovercard-target-type="user" data-hovercard-target-name="fuzzball">@fuzzball</a> さん</li>
</ul>

<hr>

<p><strong>2016-01-08(金)</strong> </p>

<p>以下の方々の案を追記</p>

<ul>
<li>
<a href="/ryo88c" class="user-mention js-hovercard" title="ryo88c" data-hovercard-target-type="user" data-hovercard-target-name="ryo88c">@ryo88c</a> さん</li>
<li>
<a href="/scivola" class="user-mention js-hovercard" title="scivola" data-hovercard-target-type="user" data-hovercard-target-name="scivola">@scivola</a> さん</li>
</ul>
</div>
	</td>
</tr>
</table>
<br />
<table border="1" style="height:150px;">
<tr>
	<td rowspan="3">84位</td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="thumb-up-120px.png" /></i>709</kbd>
		<a target="_blank" href="https://qiita.com/mopemope/items/495ab1f74bcbef0f88bb">Docker で開発環境も使い捨てにしよう！</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2014-03-14<br />13:16:09</center>
	</td>
	<td style="width:200px;">
		<!--投稿者-->
		<center>
			@<a href="user/2526.html">mopemope</a>(14件の記事)<br />(Abby 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/2526/profile-images/1473681654">
		</center>
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[docker]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<!--
		<div style="width:350px;height:150px;overflow:scroll;">%s</div>
		-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;">
<h1>
<span id="docker-で開発環境を作る話" class="fragment"></span><a href="#docker-%E3%81%A7%E9%96%8B%E7%99%BA%E7%92%B0%E5%A2%83%E3%82%92%E4%BD%9C%E3%82%8B%E8%A9%B1"><i class="fa fa-link"></i></a>Docker で開発環境を作る話</h1>

<p>こんにちは、Docker 0.9 が出ましたね。<br>
ちょっと Docker を触っていて幾つかアレな点があったので共有しておこうと思います。</p>

<p>その他も合わせてまとめてます。<br>
<a href="http://qiita.com/mopemope/items/181cb6c6c6f7cf9bbaa9" id="reference-f0115c0ab32fc645cc88">私の Docker TIPS </a></p>

<h1>
<span id="docker-を使って開発環境および開発環境の土台を作る" class="fragment"></span><a href="#docker-%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%A6%E9%96%8B%E7%99%BA%E7%92%B0%E5%A2%83%E3%81%8A%E3%82%88%E3%81%B3%E9%96%8B%E7%99%BA%E7%92%B0%E5%A2%83%E3%81%AE%E5%9C%9F%E5%8F%B0%E3%82%92%E4%BD%9C%E3%82%8B"><i class="fa fa-link"></i></a>Docker を使って開発環境、および開発環境の土台を作る</h1>

<p>まあよくある Docker の使い方って nginx だの redis だのいろんなサーバーを構築する感じだと思いますが。<br>
今回は開発環境を構築する話をしたいと思います。</p>

<p>よく dotfiles なんかを github においてーなんてことやってる方多いと思います。<br>
もうここは思い切って Docker のイメージにしてしまいましょう。</p>

<h3>
<span id="利点" class="fragment"></span><a href="#%E5%88%A9%E7%82%B9"><i class="fa fa-link"></i></a>利点</h3>

<ul>
<li>モテる</li>
<li>なんかイケてる感じがする</li>
<li>案件、プロジェクト毎に個別環境をクリーンなまま維持できる</li>
<li>みんな同じ環境で作業することができる（ライブラリのバージョンなどが揃う）</li>
<li>ぶっ壊れても巻き戻し可能(commitしなければ）</li>
<li>docker さえあればどこでも仕事ができる</li>
<li>image を作ってる間に一休みできる</li>
</ul>

<h3>
<span id="欠点" class="fragment"></span><a href="#%E6%AC%A0%E7%82%B9"><i class="fa fa-link"></i></a>欠点</h3>

<ul>
<li>docker である</li>
<li>docker である</li>
<li>docker である</li>
</ul>

<p>ということでよくプロジェクトをまたがったり、いろんな対応していると環境がごちゃごちゃになりがちなので<br>
思い切って分けちゃおう！使い捨てちゃおうってのが今回の話です。<br>
また環境をメンバーで揃えてしまえば「オメーの環境でしか起きねーから！それ！」といった事を防げるかも知れません。</p>

<p>では実際の私が使ってる Dockerfile の一部と共にハマりそうなとこを回避するTIPSを書いていこうと思います。<br>
前提として ubuntu を土台にしてるケースです。</p>

<h2>
<span id="09-での-ssh-server-でトラブル" class="fragment"></span><a href="#09-%E3%81%A7%E3%81%AE-ssh-server-%E3%81%A7%E3%83%88%E3%83%A9%E3%83%96%E3%83%AB"><i class="fa fa-link"></i></a>0.9 での ssh server でトラブル</h2>

<p>みんなが踏むとこですね。現在は解消されているようです。<br>
<a href="https://github.com/dotcloud/docker/issues/4605" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/dotcloud/docker/issues/4605</a></p>

<p>開発環境のため、基本 ssh server を立ち上げてそこから作業を行うのですが、ログイン後、pty がねえよとか言われる奴です。<br>
ログインするとプロンプトが出てこず壊したくなりますね。<br>
workaround でも書かれてますが run する際にオプションをつけましょう。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>sudo docker run -t -p 40000:22 mopemope/base
</pre></div></div>

<h2>
<span id="ubuntu-1310-の-sshd-の設定で即死" class="fragment"></span><a href="#ubuntu-1310-%E3%81%AE-sshd-%E3%81%AE%E8%A8%AD%E5%AE%9A%E3%81%A7%E5%8D%B3%E6%AD%BB"><i class="fa fa-link"></i></a>ubuntu 13.10 の sshd の設定で即死</h2>

<p>これも踏むやつでしょうか。<br>
開発環境なので、新しいライブラリなども使いたい！そのため ubuntu 13.10を土台にーなんて方も多いんじゃ<br>
ないでしょうか？<br>
とりあえず sshd を普通にたて起動はできた！が！<br>
って事が起こります。<br>
ログイン後、即切断されるってやつですね。<br>
13.10 では pam を見るのでこの設定を書き換えておく必要があります。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>RUN sed -i 's/.*session.*required.*pam_loginuid.so.*/session optional pam_loginuid.so/g' /etc/pam.d/sshd
</pre></div></div>

<h2>
<span id="fuse-で即死" class="fragment"></span><a href="#fuse-%E3%81%A7%E5%8D%B3%E6%AD%BB"><i class="fa fa-link"></i></a>fuse で即死</h2>

<p>これもみんな踏むとこでしょうか。<br>
apt でいろいろ入れてると fuse 関連にひかかって死ぬパターンですね。<br>
一応以下で回避できますがきっともっといい方法があるでしょう。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>RUN chmod go+w,u+s /tmp
RUN apt-get install libfuse2
RUN mkdir /tmp/fuse &amp;&amp; \
    cd /tmp/fuse &amp;&amp; \
    apt-get download fuse &amp;&amp; \
    dpkg-deb -x fuse_* . &amp;&amp; \
    dpkg-deb -e fuse_* &amp;&amp; \
    rm fuse_*.deb &amp;&amp; \
    echo -en '#!/bin/bash\nexit 0\n' &gt; DEBIAN/postinst &amp;&amp; \
    dpkg-deb -b . /fuse.deb &amp;&amp; \
    dpkg -i /fuse.deb &amp;&amp; \
    cd / &amp;&amp; \
    rm -rf /tmp/fuse /fuse.deb
</pre></div></div>

<h2>
<span id="git-clone-時のknown_hosts" class="fragment"></span><a href="#git-clone-%E6%99%82%E3%81%AEknown_hosts"><i class="fa fa-link"></i></a>git clone 時のknown_hosts</h2>

<p>dotfiles や ソースなど git clone してくる際に死ぬパターンです。<br>
known_hosts がまっさらなので確認してくるのですがそこで止まってしまいます。<br>
ssh/config などで確認が入らないようにしておきましょう。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>Host github.com
  StrictHostKeyChecking no

Host bitbucket.org
  StrictHostKeyChecking no
</pre></div></div>

<h2>
<span id="dockerfile" class="fragment"></span><a href="#dockerfile"><i class="fa fa-link"></i></a>Dockerfile</h2>

<p>とまあいろいろあるのですが、使っている Dockerfile をサンプルとして書いておきます。<br>
土台になるとこなので tag は xxxx/base としておきます。<br>
個別環境は別途作成し、FROM xxxx/base として 先ほどの tag を使えばよいでしょう。</p>

<p>このコンテナに</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>
ssh -XC ma2@xxxxx -p xxxx

</pre></div></div>

<p>でログインして開発すればよいでしょう。</p>

<p>基本、ソースなどの類は VCS などで管理すると思いますが、作業内容の永続化が必要であれば<br>
run する際に -v をつけてマウントしておきましょう。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>
FROM ubuntu:13.10

MAINTAINER mopemope yutaka.matsubara@gmail.com

RUN apt-get -yq update &amp;&amp; apt-get -yq upgrade
RUN chmod go+w,u+s /tmp
RUN apt-get install libfuse2
RUN mkdir /tmp/fuse &amp;&amp; \
    cd /tmp/fuse &amp;&amp; \
    apt-get download fuse &amp;&amp; \
    dpkg-deb -x fuse_* . &amp;&amp; \
    dpkg-deb -e fuse_* &amp;&amp; \
    rm fuse_*.deb &amp;&amp; \
    echo -en '#!/bin/bash\nexit 0\n' &gt; DEBIAN/postinst &amp;&amp; \
    dpkg-deb -b . /fuse.deb &amp;&amp; \
    dpkg -i /fuse.deb &amp;&amp; \
    cd / &amp;&amp; \
    rm -rf /tmp/fuse /fuse.deb

RUN dpkg-divert --local --rename --add /sbin/initctl &amp;&amp; rm -f /sbin/initctl &amp;&amp; ln -s /bin/true /sbin/initctl

# install
RUN apt-get install -y openssh-server language-pack-ja zsh tmux git mercurial subversion build-essential python-setuptools python-software-properties
RUN apt-get install -y wget unzip curl p7zip-full mosh xterm tree grep 
RUN apt-get install -y emacs24 vim zsh emacs-mozc-bin fonts-inconsolata fonts-ipafont fonts-ipaexfont rlwrap
RUN apt-get install -y sqlite3 libsqlite3-0 libsqlite3-dev
RUN apt-get install -y firefox gimp mozc-server libreoffice libreoffice-l10n-ja

RUN mkdir /var/run/sshd
RUN echo 'root:root' |chpasswd
RUN locale-gen en_US en_US.UTF-8 &amp;&amp; dpkg-reconfigure locales
RUN locale-gen ja_JP ja_JP.UTF-8 &amp;&amp; dpkg-reconfigure locales

# sshd config
RUN sed -i 's/.*session.*required.*pam_loginuid.so.*/session optional pam_loginuid.so/g' /etc/pam.d/sshd
RUN /bin/echo -e "LANG=\"ja_JP.UTF-8\"" &gt; /etc/default/local

# Add User
RUN adduser --disabled-password --gecos "" ma2 \
  &amp;&amp; echo "ma2 ALL=(ALL) NOPASSWD:ALL" &gt;&gt; /etc/sudoers \
  &amp;&amp; echo 'ma2:ma2' | chpasswd

RUN chsh -s /bin/zsh ma2

# Setup
USER ma2
WORKDIR /home/ma2
ENV HOME /home/ma2

RUN mkdir .ssh
RUN chmod 700 .ssh
ADD id_rsa /home/ma2/.ssh/id_rsa
ADD id_dsa /home/ma2/.ssh/id_dsa
ADD config /home/ma2/.ssh/config

RUN git clone git@bitbucket.org:mopemope/dotfiles.git
RUN zsh dotfiles/setup.sh

# emacs
RUN mkdir .emacs.d
RUN cp dotfiles/init.el .emacs.d
RUN cp dotfiles/mozc.el .emacs.d
RUN cp -R dotfiles/malabar .emacs.d/
RUN cp -R dotfiles/malabar-lib .emacs.d/
RUN cp -R dotfiles/snippets/java-mode .emacs.d/snippets/

# vim
RUN mkdir -p .vim/bundle
RUN git clone https://github.com/Shougo/neobundle.vim ~/.vim/bundle/neobundle.vim
RUN cd ~/.vim/bundle/neobundle.vim/bin &amp;&amp; ./neoinstall

# codebox
RUN hg clone ssh://hg@bitbucket.org/mopemope/codebox

EXPOSE 22
CMD    /usr/sbin/sshd -D

</pre></div></div>
</div>
	</td>
</tr>
</table>
<br />
<table border="1" style="height:150px;">
<tr>
	<td rowspan="3">85位</td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="thumb-up-120px.png" /></i>703</kbd>
		<a target="_blank" href="https://qiita.com/inouet/items/478f4228dbbcd442bfe8">rbenv を使って ruby をインストールする(CentOS編)</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-11-22<br />17:57:21</center>
	</td>
	<td style="width:200px;">
		<!--投稿者-->
		<center>
			@<a href="user/18743.html">inouet</a>(96件の記事)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/18743/profile-images/1473682517">
		</center>
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Ruby]</b> <b>[rbenv]</b> <b>[ruby-build]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<!--
		<div style="width:350px;height:150px;overflow:scroll;">%s</div>
		-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;">
<h2>
<span id="1-git-が入っていなかったらインストール" class="fragment"></span><a href="#1-git-%E3%81%8C%E5%85%A5%E3%81%A3%E3%81%A6%E3%81%84%E3%81%AA%E3%81%8B%E3%81%A3%E3%81%9F%E3%82%89%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB"><i class="fa fa-link"></i></a>1. git が入っていなかったらインストール</h2>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>$ sudo yum -y install git
</pre></div></div>

<h2>
<span id="2-rbenv-をインストールcloneする" class="fragment"></span><a href="#2-rbenv-%E3%82%92%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%ABclone%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>2. rbenv をインストール（clone）する</h2>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>$ git clone https://github.com/sstephenson/rbenv.git ~/.rbenv
</pre></div></div>

<h2>
<span id="3-環境設定" class="fragment"></span><a href="#3-%E7%92%B0%E5%A2%83%E8%A8%AD%E5%AE%9A"><i class="fa fa-link"></i></a>3. 環境設定</h2>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span><span class="c1"># PATH に追加</span>
$ <span class="nb">echo</span> <span class="s1">'export PATH="$HOME/.rbenv/bin:$PATH"'</span> &gt;&gt; ~/.bash_profile

<span class="c1"># .bash_profile に追加</span>
$ <span class="nb">echo</span> <span class="s1">'eval "$(rbenv init -)"'</span> &gt;&gt; ~/.bash_profile

<span class="c1"># 上記設定の再読み込み</span>
$ <span class="nb">exec</span> <span class="nv">$SHELL</span> -l
</pre></div></div>

<h2>
<span id="4-rbenvの確認" class="fragment"></span><a href="#4-rbenv%E3%81%AE%E7%A2%BA%E8%AA%8D"><i class="fa fa-link"></i></a>4. rbenvの確認</h2>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>$ rbenv --version
rbenv <span class="m">0</span>.4.0-74-g95a039a
</pre></div></div>

<h2>
<span id="5-ruby-build-を-インストールcloneする" class="fragment"></span><a href="#5-ruby-build-%E3%82%92-%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%ABclone%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>5. ruby-build を インストール（clone）する</h2>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>$ git clone https://github.com/sstephenson/ruby-build.git ~/.rbenv/plugins/ruby-build
</pre></div></div>

<h2>
<span id="6-ruby-の最新版を確認" class="fragment"></span><a href="#6-ruby-%E3%81%AE%E6%9C%80%E6%96%B0%E7%89%88%E3%82%92%E7%A2%BA%E8%AA%8D"><i class="fa fa-link"></i></a>6. ruby の最新版を確認</h2>

<p>install -- list でインストール可能なバージョン一覧が出力される</p>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>$ rbenv install --list
Available versions:
  <span class="m">1</span>.8.6-p383
  <span class="m">1</span>.8.6-p420
  <span class="m">1</span>.8.7-p249
   :
   :
  <span class="m">2</span>.0.0-p195
  <span class="m">2</span>.0.0-p247
  <span class="m">2</span>.0.0-p353       ←　こいつが2.0系の最新版っぽい      
  <span class="m">2</span>.0.0-preview1
  :
</pre></div></div>

<h2>
<span id="7-ruby-のインストール" class="fragment"></span><a href="#7-ruby-%E3%81%AE%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB"><i class="fa fa-link"></i></a>7. ruby のインストール</h2>

<p>先ほど調べたバージョンを指定する</p>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>$ rbenv install -v <span class="m">2</span>.0.0-p353
</pre></div></div>

<h2>
<span id="8-環境確認" class="fragment"></span><a href="#8-%E7%92%B0%E5%A2%83%E7%A2%BA%E8%AA%8D"><i class="fa fa-link"></i></a>8. 環境確認</h2>

<p>再読み込み</p>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>$ rbenv rehash
</pre></div></div>

<p>インストールされているruby一覧を確認</p>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>$ rbenv versions
* system <span class="o">(</span><span class="nb">set</span> by /home/vagrant/.rbenv/version<span class="o">)</span>
  <span class="m">2</span>.0.0-p353
</pre></div></div>

<p>先ほどインストールした最新版に設定</p>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>$ rbenv global <span class="m">2</span>.0.0-p353
</pre></div></div>

<p>確認</p>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>$ ruby -v
ruby <span class="m">2</span>.0.0p353 <span class="o">(</span><span class="m">2013</span>-11-22 revision <span class="m">43784</span><span class="o">)</span> <span class="o">[</span>x86_64-linux<span class="o">]</span>
</pre></div></div>

<p>おしまい。</p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1" style="height:150px;">
<tr>
	<td rowspan="3">86位</td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="thumb-up-120px.png" /></i>698</kbd>
		<a target="_blank" href="https://qiita.com/zoetro/items/a45dbc18bb2b22e944b2">AngularJSのMVWパターンを理解する</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-12-25<br />22:21:49</center>
	</td>
	<td style="width:200px;">
		<!--投稿者-->
		<center>
			@<a href="user/3489.html">zoetro</a>(22件の記事)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/3489/profile-images/1473683235">
		</center>
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[AngularJS]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<!--
		<div style="width:350px;height:150px;overflow:scroll;">%s</div>
		-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>12/4の記事（<a href="http://qiita.com/zoetro/items/46d2a8b57f2645bb5033" id="reference-2baed62704762784783d">AngularJSを使ったWebアプリのアーキテクチャ設計</a>）で書くと言ったまま放置していたので、AngularJSのMVCパターンについて書いてみたいと思います。</p>

<p>AngularJSのMVCについては、12/19の<a href="http://qiita.com/icoxfog417/items/2ac773c33a8b34288551" id="reference-b385afb31d2cebb1f75d">お前のAngular.jsはもうMVCではない。と言われないためのTutorial</a>というすばらしい記事がありますが、本記事ではもう少し抽象的な内容を扱ってみようかと思います。</p>

<h1>
<span id="mvwmodel-view-whateverパターンとは" class="fragment"></span><a href="#mvwmodel-view-whatever%E3%83%91%E3%82%BF%E3%83%BC%E3%83%B3%E3%81%A8%E3%81%AF"><i class="fa fa-link"></i></a>MVW（Model-View-Whatever）パターンとは</h1>

<p>MVCパターンには、MVC2、MVP、MVVMなど数多くの派生パターンがあります。<br>
目的は同じなのに派生パターンがたくさんあるのは、それぞれのプラットフォーム固有の問題（フレームワークの違いや、サーバサイドかクライアントサイドかの違いなど）によってMV*の*の役割が異なるからです。</p>

<p>AngularJSは公式ページで"Superheroic JavaScript MVW Framework"と名乗っているので、またMVWなんていう新しいパターンが出てくるのかとゲンナリするかもしれません。<br>
でもこれ、MVWという新しいパターンが提唱されているわけではないようです。</p>

<p>AngularJSの開発者はこんなことを言っていました。（<a href="https://plus.google.com/+AngularJS/posts/aZNVhj355G2" rel="nofollow noopener" target="_blank">引用元</a>）</p>

<blockquote>
<p>Having said, I'd rather see developers build kick-ass apps that are well-designed and follow separation of concerns, than see them waste time arguing about MV* nonsense. And for this reason, I hereby declare AngularJS to be MVW framework - Model-View-Whatever. Where Whatever stands for "whatever works for you".</p>
</blockquote>

<p>「MV*について議論するのは時間の無駄だから、そんな暇があったらコードを書け。MV*の*の部分なんて"Whatever"でいいんだ。」という主張のようです。</p>

<p>言いたいことは分かりますが、だからといってWhateverなんて名前をつけたらControllerに何でもかんでも詰め込んでFat Controllerになってしまいそうです。<br>
というわけで、時間の無駄だと言われてしまうのかもしれませんが、AngularJSのMVWパターンについて解説したいと思います。</p>

<h1>
<span id="modelviewwhateverの役割分担" class="fragment"></span><a href="#modelviewwhatever%E3%81%AE%E5%BD%B9%E5%89%B2%E5%88%86%E6%8B%85"><i class="fa fa-link"></i></a>Model・View・Whateverの役割分担</h1>

<p>MV*パターン適用の目的は<a href="http://capsctrl.que.jp/kdmsnr/wiki/bliki/?PresentationDomainSeparation" rel="nofollow noopener" target="_blank">プレゼンテーションとドメインの分離</a>です。<br>
そこで、プレゼンテーション層とドメイン層に大きく分けた上で、それぞれの関係を図示してみました。</p>

<p><a href="https://camo.qiitausercontent.com/3d652c193fde4c8e435c39030dd52e55d99f5924/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f333438392f65333832323963312d323464302d336564332d343862302d6132643537303264666463322e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/3d652c193fde4c8e435c39030dd52e55d99f5924/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f333438392f65333832323963312d323464302d336564332d343862302d6132643537303264666463322e706e67" alt="AngularJSMVC.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/3489/e38229c1-24d0-3ed3-48b0-a2d5702dfdc2.png"></a></p>

<p>以降で各役割について解説します。</p>

<h2>
<span id="model" class="fragment"></span><a href="#model"><i class="fa fa-link"></i></a>Model</h2>

<p>Modelは他のMV*パターンと違いはありません。つまり、プレゼンテーションに関わらない部分すべてがModelになります。<br>
アプリケーションにもよりますが、次のような役割を持つことが多いでしょう。</p>

<ul>
<li>ビジネスロジック</li>
<li>データの入れ物</li>
<li>サーバーサイドとの通信</li>
<li>ローカルストレージ</li>
<li>etc.</li>
</ul>

<p>他のフレームワークとの違いがあるとすれば、基本的にイベント通知の処理を実装する必要がない（例外はありますが）ところでしょうか。PureなJavaScriptのオブジェクトが使えるので実装が楽になりますね。</p>

<p>また、AngularJSのDI機能を利用してControllerとModelの関係を疎結合にすることができます。可能なところはどんどんService化するのがよさそうです。</p>

<h2>
<span id="view" class="fragment"></span><a href="#view"><i class="fa fa-link"></i></a>View</h2>

<p>Viewの役割は、レイアウトとプレゼンテーションロジックに分けることができます。</p>

<p>レイアウトを独自のDSLで記述したり、コードで記述するようなフレームワークもありますが、AngularJSはHTMLでレイアウトを記述します。<br>
ただしAngularJSでは、Directiveという機能で新しいタグや要素を自由に追加することができるので、HTMLの形をしたDSLと言ってしまってもよいかもしれません。</p>

<p>DOMを操作するような複雑なプレゼンテーションロジックは、Directiveの中に閉じ込めてしまうので、HTMLのレイアウトは宣言的に記述することができ、可読性も高くなります。</p>

<h2>
<span id="controller--scope" class="fragment"></span><a href="#controller--scope"><i class="fa fa-link"></i></a>Controller &amp; Scope</h2>

<h3>
<span id="scopeの役割" class="fragment"></span><a href="#scope%E3%81%AE%E5%BD%B9%E5%89%B2"><i class="fa fa-link"></i></a>Scopeの役割</h3>

<p>Scopeは画面を描画するために必要な状態をストアする役割です。<br>
MVVMパターンを知っている人にとっては、ViewModelと同じような役割を担っていると言えば分かりやすいでしょう。</p>

<p>クライアントMVCフレームワークを使わなかった場合、画面への描画内容と、描画するための状態（プレゼンテーションステート）は区別せず、DOMに両方の役割を持たせるのが一般的だと思います。<br>
しかし、その方法では状態を管理することが難しく、ソースコードの可読性も低くなってしまいます。<br>
そこで、AngularJSでは、DOMは画面の描画のためだけに使い、状態の保持はScopeで行うように役割分担をしています。<br>
これにより、データの操作方法は明確になり、同一のデータを複数の場所に描画したり、異なる方法で描画するといったことが行い易くなっています。</p>

<h3>
<span id="controllerの役割" class="fragment"></span><a href="#controller%E3%81%AE%E5%BD%B9%E5%89%B2"><i class="fa fa-link"></i></a>Controllerの役割</h3>

<p>ControllerはScopeをセットアップするための役割で、次のような仕事をします。</p>

<ul>
<li>Scopeにサービスの呼び出しを結びつける</li>
<li>Scopeの保持するデータを初期化する</li>
<li>Modelのイベント通知をScopeに結びつける</li>
</ul>

<p>Controllerにはビジネスロジックもプレゼンテーションロジックも書けるし、何かと太りがちな存在です。<br>
ビジネスロジックはModelへ、プレゼンテーションロジックはDirectiveやFilterへ移譲し、できるだけControllerが太らないように気をつけなければなりません。</p>

<h3>
<span id="controllerの分割" class="fragment"></span><a href="#controller%E3%81%AE%E5%88%86%E5%89%B2"><i class="fa fa-link"></i></a>Controllerの分割</h3>

<p>画面に要素を追加していくと、Scopeのメンバが増え、Controllerに渡すServiceの数も増えていきます。<br>
もしそれが多すぎるのだとしたら、1つのControllerに役割を持たせすぎている可能性があります。</p>

<p>1画面につき1 Controllerにする必要はないので、画面内の要素ごとに分割したり、階層構造を作ったり、ng-repeat内の1要素ずつにControllerを割り当てたり、必要に応じて分割しましょう。</p>

<p>例えば、次のようにサイドバーと入力フォームと一覧表示部分と全体の親をそれぞれ別のControllerに分割したりします。</p>

<div class="code-frame" data-lang="html"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">div</span> <span class="na">ng-controller</span><span class="o">=</span><span class="s">"MainController"</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">ng-controller</span><span class="o">=</span><span class="s">"SideBarController"</span><span class="p">&gt;</span>
    サイドバー
  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">ng-controller</span><span class="o">=</span><span class="s">"InputAreaController"</span><span class="p">&gt;</span>
    入力フォーム
  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">ng-controller</span><span class="o">=</span><span class="s">"ListControlelr"</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">ng-repeat</span><span class="o">=</span><span class="s">"item in items"</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">my-directive</span> <span class="na">data</span><span class="o">=</span><span class="s">"item"</span> <span class="p">&gt;&lt;/</span><span class="nt">my-directive</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</pre></div></div>

<p>コントローラを分離するとコントローラ間でデータ共有をする必要がでてきますが、手段はいくつか用意されています。</p>

<ul>
<li><a href="http://qiita.com/sunny4381/items/aeae1e154346b5cf6009" id="reference-9868df8bbd24683a7f79">Angular JS で複数のコントローラ間でモデル（状態や値）を共有する方法 3 種類</a></li>
</ul>

<p>Controllerを再利用しないのであれば親子関係を作ってやりとりし、そうでなければイベントでやりとりするのがおすすめです。<br>
共通のサービスを使ったり<code>$rootScope</code>を使ったりするのはグローバル変数と変わりないので、最終手段にするのがよいかと思います。</p>

<h1>
<span id="参考情報" class="fragment"></span><a href="#%E5%8F%82%E8%80%83%E6%83%85%E5%A0%B1"><i class="fa fa-link"></i></a>参考情報</h1>

<p>本記事の内容は下記のスライドの考え方を参考にさせてもらっています。<br>
XAML系プラットフォームの知識がなくても理解できる内容ですので、ぜひともあわせて読んでみてください。</p>

<ul>
<li><a href="https://www.slideboom.com/presentations/591514/GUI%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E3%83%91%E3%82%BF%E3%83%BC%E3%83%B3%E3%81%AE%E5%9F%BA%E7%A4%8E%E3%81%8B%E3%82%89MVVM%E3%83%91%E3%82%BF%E3%83%BC%E3%83%B3%E3%81%B8" rel="nofollow noopener" target="_blank">GUIアーキテクチャパターンの基礎からMVVMパターンへ</a></li>
</ul>

<h1>
<span id="おしまい" class="fragment"></span><a href="#%E3%81%8A%E3%81%97%E3%81%BE%E3%81%84"><i class="fa fa-link"></i></a>おしまい</h1>

<p>AngularJS Startup Advent Calendar 2013みごと完走ですね。<br>
参加された皆様、特に発起人で13本もの記事を書かれた<a href="/matsuzan" class="user-mention js-hovercard" title="matsuzan" data-hovercard-target-type="user" data-hovercard-target-name="matsuzan">@matsuzan</a>さん、お疲れ様でした！<br>
読んでくれた皆様もありがとうございました！</p>

<p>始まる前は登録者も少なくて完走できるかどうか心配だったのですが杞憂でしたね。</p>

<p>この調子でAngularJSが盛り上がっていって欲しいものです。</p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1" style="height:150px;">
<tr>
	<td rowspan="3">87位</td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="thumb-up-120px.png" /></i>687</kbd>
		<a target="_blank" href="https://qiita.com/shu223/items/ffd2202eaf92d342f83d">「顔以外」のものを画像認識する on iOS</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-12-02<br />10:59:59</center>
	</td>
	<td style="width:200px;">
		<!--投稿者-->
		<center>
			@<a href="user/3180.html">shu223</a>(171件の記事)<br />(Freelancer 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/3180/profile-images/1473682733">
		</center>
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[iOS]</b> <b>[画像処理]</b> <b>[OpenCV]</b> <b>[機械学習]</b> <b>[Swift]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<!--
		<div style="width:350px;height:150px;overflow:scroll;">%s</div>
		-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>iOS SDK では Core Image の CIDetector クラスで簡単に顔認識をおこなうことができます。iOS 7 からは、<a href="http://d.hatena.ne.jp/shu223/20130924/1379990718" rel="nofollow noopener" target="_blank">笑顔やまばたきの検出も可能に</a> なりました。</p>

<p>が、CIDetector は <code>detectorOfType:context:options:</code> というメソッドの第1引数で Detector Type を指定できる設計になっているものの、</p>

<div class="code-frame" data-lang="swift"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">let</span> <span class="nv">CIDetectorTypeFace</span><span class="p">:</span> <span class="nb">String</span>
<span class="kd">public</span> <span class="kd">let</span> <span class="nv">CIDetectorTypeRectangle</span><span class="p">:</span> <span class="nb">String</span>
<span class="kd">public</span> <span class="kd">let</span> <span class="nv">CIDetectorTypeQRCode</span><span class="p">:</span> <span class="nb">String</span>
<span class="kd">public</span> <span class="kd">let</span> <span class="nv">CIDetectorTypeText</span><span class="p">:</span> <span class="nb">String</span>
</pre></div></div>

<p><a href="https://developer.apple.com/library/ios/documentation/CoreImage/Reference/CIDetector_Ref/Reference/Reference.html#//apple_ref/doc/constant_group/Detector_Types" rel="nofollow noopener" target="_blank">Detector Types - CIDetector Class Reference</a></p>

<p>と、4つしか定義されてないので、結局のところ <strong>顔・矩形・QRコード・文字領域しか認識できません</strong>。</p>

<h2>
<span id="車やロゴや犬やネコを認識する" class="fragment"></span><a href="#%E8%BB%8A%E3%82%84%E3%83%AD%E3%82%B4%E3%82%84%E7%8A%AC%E3%82%84%E3%83%8D%E3%82%B3%E3%82%92%E8%AA%8D%E8%AD%98%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>車やロゴや犬やネコを認識する</h2>

<p>OpenCV には顔検出用の手法として、 <strong>Haar分類器</strong> というものが実装されています。</p>

<p>この手法の詳細はここでは省略しますが、この手法は、 <strong>顔検出だけでなく、車やペット等、さまざまな対象を検出</strong> するのに広く使用されています。</p>

<p>で、このHaar分類器は、オブジェクトを検出するために、 <strong>あらかじめその対象の特徴を学習させて作成した特徴量データ</strong> （正しくは識別器をカスケードさせたもの）の入っているxmlファイル（この記事ではカスケードファイルと呼ぶことにします）を使用します。</p>

<h3>
<span id="opencvに同梱されているカスケードファイル" class="fragment"></span><a href="#opencv%E3%81%AB%E5%90%8C%E6%A2%B1%E3%81%95%E3%82%8C%E3%81%A6%E3%81%84%E3%82%8B%E3%82%AB%E3%82%B9%E3%82%B1%E3%83%BC%E3%83%89%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB"><i class="fa fa-link"></i></a>OpenCVに同梱されているカスケードファイル</h3>

<p>OpenCV を git clone （参考：<a href="http://qiita.com/shu223/items/3ff48a8bd6edd910e780" id="reference-c79c8c3d390bd56f755e">OpenCV for iOSの使い方</a>）すると、data/haarcascades ディレクトリに、下記のカスケードファイルが入っています（2013年12月2日現在）。</p>

<ul>
<li>顔

<ul>
<li>haarcascade_frontalface_default.xml</li>
<li>haarcascade_frontalface_alt.xml</li>
<li>haarcascade_frontalface_alt2.xml</li>
<li>haarcascade_frontalface_alt_tree.xml</li>
<li>haarcascade_profileface.xml</li>
</ul>
</li>
<li>目

<ul>
<li>haarcascade_eye.xml</li>
<li>haarcascade_eye_tree_eyeglasses.xml</li>
<li>haarcascade_mcs_lefteye.xml</li>
<li>haarcascade_mcs_righteye.xml</li>
<li>haarcascade_lefteye_2splits.xml</li>
<li>haarcascade_righteye_2splits.xml</li>
<li>haarcascade_mcs_eyepair_big.xml</li>
<li>haarcascade_mcs_eyepair_small.xml</li>
</ul>
</li>
<li>耳

<ul>
<li>haarcascade_mcs_leftear.xml</li>
<li>haarcascade_mcs_rightear.xml</li>
</ul>
</li>
<li>口

<ul>
<li>haarcascade_mcs_mouth.xml</li>
</ul>
</li>
<li>鼻

<ul>
<li>haarcascade_mcs_nose.xml</li>
</ul>
</li>
<li>胴体

<ul>
<li>haarcascade_fullbody.xml</li>
<li>haarcascade_mcs_upperbody.xml</li>
<li>haarcascade_lowerbody.xml<br>
</li>
<li>haarcascade_upperbody.xml</li>
</ul>
</li>
</ul>

<p>結構いろいろありますが、Core Image の <strong>CIDetector では検出できない、耳・鼻・胴体</strong> といったオブジェクトを検出するためのカスケードファイルもあらかじめ入っていることがわかります。</p>

<p>ちなみに haarcascade_eye_tree_eyeglasses.xml は、 <strong>メガネ着用時の目</strong> を検出するものです。</p>

<h3>
<span id="カスケードファイルを自作する" class="fragment"></span><a href="#%E3%82%AB%E3%82%B9%E3%82%B1%E3%83%BC%E3%83%89%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%82%92%E8%87%AA%E4%BD%9C%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>カスケードファイルを自作する</h3>

<p>OpenCVにあらかじめ入っているものだけでも、Core Image よりも多くの対象を検出できることがわかりましたが、 <strong>人間以外のもの</strong> 、たとえば車やバイク、犬やネコを検出するためのカスケードファイルは入っていません。</p>

<p>その場合には、OpenCVに入っている、 <strong>haartraining</strong> というツールを使用して、カスケードファイルを自作する必要があります。</p>

<p>手順は以下の通り。</p>

<ol>
<li>学習したいオブジェクトの例からなるデータセット（対象物が入っている画像）を集める</li>
<li>createsamples ユーティリティを使用して、陽性サンプル（対象物が入っているサンプル）のベクトル出力ファイルを構築する</li>
<li>同様に、陰性サンプルのベクトル出力ファイルを構築する</li>
<li>haartraining で学習を実行する</li>
</ol>

<p>・・・とこう書くとわりとシンプルですが、手順 1 の <strong>データセット収集のハードルが半端なく高い</strong> です。</p>

<p>ある程度の精度を求めるなら、 <strong>1,000〜10,000枚</strong> もの画像を集める必要があり、さらに、それらすべてについて <strong>いくつの対象物がどこにあるか（オブジェクト数, 左上隅の x座標, y座標, 幅, 高さ）</strong> を指定する必要があります。</p>

<p>現実的には、そういった画像を自動収集するツール、対象物の位置特定を補助するようなツールを自作する、といった努力が必要になると思います。</p>

<h3>
<span id="webに落ちているカスケードファイルを探す" class="fragment"></span><a href="#web%E3%81%AB%E8%90%BD%E3%81%A1%E3%81%A6%E3%81%84%E3%82%8B%E3%82%AB%E3%82%B9%E3%82%B1%E3%83%BC%E3%83%89%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%82%92%E6%8E%A2%E3%81%99"><i class="fa fa-link"></i></a>Webに落ちているカスケードファイルを探す</h3>

<p>前述したハードルにより、カスケードファイルを自作することはあきらめ、偉大な先人達が公開してくれているものを探すことにします。</p>

<p>まず、カスケードファイルのデータベースみたいなものがあるのではないか、と探してみましたが、どうやらないようでした（あったらぜひ教えていただけると幸いです）。</p>

<p>というわけで <strong>人間以外の剛体を検出するためのカスケードファイル</strong> を、個別にキーワードをちまちま入れて探してみました。以下、見つけたものを列挙していきます。</p>

<h2>
<span id="車" class="fragment"></span><a href="#%E8%BB%8A"><i class="fa fa-link"></i></a>車</h2>

<h3>
<span id="vehicle-detection-tracking-and-counting-on-behance" class="fragment"></span><a href="#vehicle-detection-tracking-and-counting-on-behance"><i class="fa fa-link"></i></a><a href="http://www.behance.net/gallery/Vehicle-Detection-Tracking-and-Counting/4057777" rel="nofollow noopener" target="_blank">Vehicle Detection, Tracking and Counting on Behance</a>
</h3>

<ul>
<li>記事内に、カスケードファイルを含むソース一式が含まれています。</li>
</ul>

<p><a href="https://camo.qiitausercontent.com/7bea93ace49416cea88c6956c33b0fce1e8996e2/687474703a2f2f662e636c2e6c792f6974656d732f335a33643166304e3376334a325532343259334b2f39393262323263623461643833646134323838613763383266663866383831622e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/7bea93ace49416cea88c6956c33b0fce1e8996e2/687474703a2f2f662e636c2e6c792f6974656d732f335a33643166304e3376334a325532343259334b2f39393262323263623461643833646134323838613763383266663866383831622e706e67" alt="" data-canonical-src="http://f.cl.ly/items/3Z3d1f0N3v3J2U242Y3K/992b22cb4ad83da4288a7c82ff8f881b.png"></a></p>

<h3>
<span id="computer-vision-opencv-support-for-darpa-autonomous-vehicle" class="fragment"></span><a href="#computer-vision-opencv-support-for-darpa-autonomous-vehicle"><i class="fa fa-link"></i></a><a href="http://www.cs.utah.edu/%7Eturcsans/DUC/" rel="nofollow noopener" target="_blank">Computer Vision: OpenCV support for DARPA Autonomous Vehicle</a>
</h3>

<ul>
<li>"The trained Haar cascades can be found here." という記述のところに貼ってあるリンクからカスケードファイルをDLできます</li>
</ul>

<h2>
<span id="犬ネコ" class="fragment"></span><a href="#%E7%8A%AC%E3%83%8D%E3%82%B3"><i class="fa fa-link"></i></a>犬・ネコ</h2>

<h3>
<span id="visual-geometry-group-oxford-iiit-pet-dataset" class="fragment"></span><a href="#visual-geometry-group-oxford-iiit-pet-dataset"><i class="fa fa-link"></i></a><a href="http://www.robots.ox.ac.uk/%7Evgg/data/pets/" rel="nofollow noopener" target="_blank">Visual Geometry Group: Oxford-IIIT Pet Dataset</a>
</h3>

<ul>
<li>
<strong>"Oxford-IIIT-Pet dataset" というペットの特徴量学習用データ</strong> を使用</li>
<li>学習用データはダウンロードできたものの、カスケードファイルは公開してないっぽい</li>
<li>同ページから "Cats and Dogs" という詳細が書かれた論文をダウンロードできます</li>
</ul>

<p><a href="https://camo.qiitausercontent.com/dc6e3a26fb315fa00ae0f38e2a67b5a7b72023f5/687474703a2f2f662e636c2e6c792f6974656d732f314332693369306b3272326e3071314e306e30712f7065745f616e6e6f746174696f6e732e6a7067" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/dc6e3a26fb315fa00ae0f38e2a67b5a7b72023f5/687474703a2f2f662e636c2e6c792f6974656d732f314332693369306b3272326e3071314e306e30712f7065745f616e6e6f746174696f6e732e6a7067" alt="" data-canonical-src="http://f.cl.ly/items/1C2i3i0k2r2n0q1N0n0q/pet_annotations.jpg"></a></p>

<h3>
<span id="cat-head-detection-pdf" class="fragment"></span><a href="#cat-head-detection-pdf"><i class="fa fa-link"></i></a><a href="http://research.microsoft.com/en-us/um/people/jiansun/papers/ECCV08_CatDetection.pdf" rel="nofollow noopener" target="_blank">Cat Head Detection</a> (PDF)</h3>

<ul>
<li>論文のみ</li>
</ul>

<h3>
<span id="tracking-animals-in-wildlife-videos-using-face-detection" class="fragment"></span><a href="#tracking-animals-in-wildlife-videos-using-face-detection"><i class="fa fa-link"></i></a><a href="http://www.cs.bris.ac.uk/Publications/Papers/2000186.pdf" rel="nofollow noopener" target="_blank">TRACKING ANIMALS IN WILDLIFE VIDEOS USING FACE DETECTION</a>
</h3>

<ul>
<li>論文のみ</li>
</ul>

<h2>
<span id="標識" class="fragment"></span><a href="#%E6%A8%99%E8%AD%98"><i class="fa fa-link"></i></a>標識</h2>

<h3>
<span id="computer-vision-opencv-support-for-darpa-autonomous-vehicle-1" class="fragment"></span><a href="#computer-vision-opencv-support-for-darpa-autonomous-vehicle-1"><i class="fa fa-link"></i></a><a href="http://www.cs.utah.edu/%7Eturcsans/DUC/" rel="nofollow noopener" target="_blank">Computer Vision: OpenCV support for DARPA Autonomous Vehicle</a>
</h3>

<ul>
<li>一時停止の標識, 停止信号</li>
<li>"The trained Haar cascades can be found here." という記述のところに貼ってあるリンクからカスケードファイルをDLできます</li>
<li>stop signs, stop lights, and pedestrians とあるのですが、実際にどういう画像を学習させたかが不明</li>
</ul>

<h2>
<span id="ロゴ" class="fragment"></span><a href="#%E3%83%AD%E3%82%B4"><i class="fa fa-link"></i></a>ロゴ</h2>

<h3>
<span id="haar-cascade-logo-detection" class="fragment"></span><a href="#haar-cascade-logo-detection"><i class="fa fa-link"></i></a><a href="http://www.wirelust.com/2011/11/08/haar-cascade-logo-detection/" rel="nofollow noopener" target="_blank">Haar cascade logo detection</a>
</h3>

<ul>
<li>コカコーラのロゴを検出</li>
<li>カスケードファイルは公開されてない。100枚の画像で学習させたとのこと。</li>
</ul>



<h2>
<span id="人間の部位" class="fragment"></span><a href="#%E4%BA%BA%E9%96%93%E3%81%AE%E9%83%A8%E4%BD%8D"><i class="fa fa-link"></i></a>人間の部位</h2>

<p><strong>OpenCVにデフォルトで入っているhaarでは検出できない人間の部位</strong> を検出するカスケードファイル。</p>

<h3>
<span id="肩" class="fragment"></span><a href="#%E8%82%A9"><i class="fa fa-link"></i></a>肩</h3>

<ul>
<li><a href="http://stackoverflow.com/questions/9015498/need-haar-casscades-for-nose-eyes-lipsmouth" rel="nofollow noopener" target="_blank">Need Haar Casscades for Nose, Eyes &amp; Lips(Mouth)</a></li>
<li>"Try this one: mozart.dis.ulpgc.es/pub/Software/HaarClassifiers/… It's a set of haar cascades for face features." とあるコメントから、DLできるzipに、肩と頭 (Head and shoulders) を検出するカスケードファイルが入っている</li>
</ul>

<h3>
<span id="oppai" class="fragment"></span><a href="#oppai"><i class="fa fa-link"></i></a>Oppai</h3>

<ul>
<li><a href="http://yusukebe.com/archives/20080725/083750.html" rel="nofollow noopener" target="_blank">Oppai-Detect 2 @ CodereposCon#1</a></li>
<li>記事内に "cascade_oppai.xml" というカスケードファイルへのリンクあり</li>
<li>ただしリンクをから飛べなかったので、今は公開されていないのかもしれません</li>
</ul>

<h3>
<span id="笑顔" class="fragment"></span><a href="#%E7%AC%91%E9%A1%94"><i class="fa fa-link"></i></a>笑顔</h3>

<ul>
<li><a href="https://github.com/hromi/SMILEsmileD" rel="nofollow noopener" target="_blank">SMILEsmileD</a></li>
<li>これは <a href="http://d.hatena.ne.jp/shu223/20130924/1379990718" rel="nofollow noopener" target="_blank">iOS7 から Core Image でできる</a>
</li>
<li>学習用データセットもリポジトリに入っている</li>
</ul>

<h3>
<span id="手ジェスチャー" class="fragment"></span><a href="#%E6%89%8B%E3%82%B8%E3%82%A7%E3%82%B9%E3%83%81%E3%83%A3%E3%83%BC"><i class="fa fa-link"></i></a>手／ジェスチャー</h3>

<ul>
<li><a href="https://code.google.com/p/ehci/wiki/HandTracking" rel="nofollow noopener" target="_blank">EHCI 6 degrees of freedom hand tracker</a></li>
<li>ソース一式がDLできて、aGest.xml というカスケードファイルが入っている</li>
</ul>

<p><a href="https://camo.qiitausercontent.com/0b51a6eacfe6e44cdf00fb43c395202ac0e41957/687474703a2f2f662e636c2e6c792f6974656d732f30573167307231423178334a31323347307033752f76696f6c615f72315f63312e6a7067" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/0b51a6eacfe6e44cdf00fb43c395202ac0e41957/687474703a2f2f662e636c2e6c792f6974656d732f30573167307231423178334a31323347307033752f76696f6c615f72315f63312e6a7067" alt="" data-canonical-src="http://f.cl.ly/items/0W1g0r1B1x3J123G0p3u/viola_r1_c1.jpg"></a></p>

<h2>
<span id="ペン" class="fragment"></span><a href="#%E3%83%9A%E3%83%B3"><i class="fa fa-link"></i></a>ペン</h2>

<h3>
<span id="all-about-opencv-creating-a-haar-cascade-classifier-aka-haar-training" class="fragment"></span><a href="#all-about-opencv-creating-a-haar-cascade-classifier-aka-haar-training"><i class="fa fa-link"></i></a><a href="http://opencvuser.blogspot.in/2011/08/creating-haar-cascade-classifier-aka.html" rel="nofollow noopener" target="_blank">All about openCV: Creating a haar cascade classifier aka haar training</a>
</h3>

<ul>
<li>Pen detector という <strong>ペンを検出</strong> するカスケードファイルをダウンロードできます</li>
</ul>

<p><a href="https://camo.qiitausercontent.com/41554da9788c549b5870fed5cf0f50143a9d8d68/687474703a2f2f662e636c2e6c792f6974656d732f33423243333134353262325330563379337a32392f7069322e6a7067" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/41554da9788c549b5870fed5cf0f50143a9d8d68/687474703a2f2f662e636c2e6c792f6974656d732f33423243333134353262325330563379337a32392f7069322e6a7067" alt="" data-canonical-src="http://f.cl.ly/items/3B2C31452b2S0V3y3z29/pi2.jpg"></a></p>

<h2>
<span id="その他" class="fragment"></span><a href="#%E3%81%9D%E3%81%AE%E4%BB%96"><i class="fa fa-link"></i></a>その他</h2>

<p>見つけ次第随時追加していきます。ご存知の方はぜひコメント欄などでご連絡ください！</p>

<h2>
<span id="実装サンプル画像から車を検出する" class="fragment"></span><a href="#%E5%AE%9F%E8%A3%85%E3%82%B5%E3%83%B3%E3%83%97%E3%83%AB%E7%94%BB%E5%83%8F%E3%81%8B%E3%82%89%E8%BB%8A%E3%82%92%E6%A4%9C%E5%87%BA%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>実装サンプル：画像から車を検出する</h2>

<p>まず、 <strong>OpenCV for iOS の導入方法</strong> 等、基本的なところは下記をご覧ください。</p>

<p><a href="http://qiita.com/shu223/items/3ff48a8bd6edd910e780">OpenCV for iOSの使い方</a></p>

<p>上記記事で使っている OpenCVHelper.mm に、次のようなメソッドを追加します。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>+ (UIImage *)detect:(UIImage *)srcImage cascade:(NSString *)cascadeFilename {

    cv::Mat srcMat = [OpenCVHelper cvMatFromUIImage:srcImage];

    // グレースケール画像に変換
    cv::Mat grayMat;
    cv::cvtColor(srcMat, grayMat, CV_BGR2GRAY);

    // 分類器の読み込み
    NSString *path = [[NSBundle mainBundle] pathForResource:cascadeFilename
                                                     ofType:nil];
    std::string cascade_path = (char *)[path UTF8String];
    cv::CascadeClassifier cascade;

    if (!cascade.load(cascade_path)) {

        NSLog(@"Couldn't load haar cascade file.");
        return nil;
    }

    // 探索
    std::vector&lt;cv::Rect&gt; objects;
    cascade.detectMultiScale(grayMat, objects,      // 画像，出力矩形
                             1.1, 1,                // 縮小スケール，最低矩形数
                             CV_HAAR_SCALE_IMAGE,   // （フラグ）
                             cv::Size(40, 40));     // 最小矩形

    // 結果の描画
    std::vector&lt;cv::Rect&gt;::const_iterator r = objects.begin();
    for(; r != objects.end(); ++r) {
        cv::Point center;
        int radius;
        center.x = cv::saturate_cast&lt;int&gt;((r-&gt;x + r-&gt;width*0.5));
        center.y = cv::saturate_cast&lt;int&gt;((r-&gt;y + r-&gt;height*0.5));
        radius = cv::saturate_cast&lt;int&gt;((r-&gt;width + r-&gt;height)*0.25);
        cv::circle(srcMat, center, radius, cv::Scalar(80,80,255), 3, 8, 0 );
    }

    return [OpenCVHelper UIImageFromCVMat:srcMat];
}
</pre></div></div>

<p>前述した "Vehicle Detection" のページからカスケードファイル"haarcascade_car_1.xml" をダウンロードしてきて（リンクはよく探してみてください）、 プロジェクトに追加します。</p>

<p>そして、先ほど実装した <code>detect:cascade:</code> メソッドを使用して、</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>self.imageView.image = [OpenCVHelper detect:self.imageView.image
                                    cascade:@"haarcascade_car_1.xml"];
</pre></div></div>

<p>とやると、次のように車を検出できるようになります。</p>

<p><a href="https://camo.qiitausercontent.com/5f34da39b9348bfcca06526cfbff9c7b174c6f51/687474703a2f2f662e636c2e6c792f6974656d732f336a32463367326b32523365315133713037334a2f726573756c745f2e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/5f34da39b9348bfcca06526cfbff9c7b174c6f51/687474703a2f2f662e636c2e6c792f6974656d732f336a32463367326b32523365315133713037334a2f726573756c745f2e706e67" alt="" data-canonical-src="http://f.cl.ly/items/3j2F3g2k2R3e1Q3q073J/result_.png"></a></p>

<h2>
<span id="サンプルダウンロード" class="fragment"></span><a href="#%E3%82%B5%E3%83%B3%E3%83%97%E3%83%AB%E3%83%80%E3%82%A6%E3%83%B3%E3%83%AD%E3%83%BC%E3%83%89"><i class="fa fa-link"></i></a>サンプルダウンロード</h2>

<p>基本的に上記の手順通りに実装すればOKです。でも自分でつくるの面倒なのですぐにビルドできるものが欲しい！という方向けに、サンプルをgumroadよりダウンロードできるようにしました。</p>

<p><a href="https://gum.co/emov" class="autolink" rel="nofollow noopener" target="_blank">https://gum.co/emov</a></p>

<p>gumroadなので、 <strong>有料</strong> （102円）になります。サンプルはいらないけど記事が少しは役に立ったから寄付してやるか、というお気持ちもありがたく頂戴いたします。値段が中途半端なのは、gumroadの仕様のためです、スイマセン。繰り返しになりますが、 <strong>上記手順通りにやればOK（サンプルのダウンロードは不要）</strong> です。</p>

<h3>
<span id="注意点" class="fragment"></span><a href="#%E6%B3%A8%E6%84%8F%E7%82%B9"><i class="fa fa-link"></i></a>注意点</h3>

<ul>
<li>iOS 7.0 でのみ動作確認しております。</li>
<li>コードのみの販売です。サポート等はご容赦ください。</li>
</ul>

<h2>
<span id="参考書籍" class="fragment"></span><a href="#%E5%8F%82%E8%80%83%E6%9B%B8%E7%B1%8D"><i class="fa fa-link"></i></a>参考書籍</h2>

<p>Haar分類器の詳細や、OpenCVの各種学習ツールを使ったカスケードファイルの生成方法は、以下の書籍に詳しいです。</p>

<p></p><div class="">
<div class=""><a href="http://www.amazon.co.jp/exec/obidos/ASIN/4873114136/22301-22/ref=nosim/" rel="nofollow noopener" target="_blank"><img src="https://camo.qiitausercontent.com/3eb085c1998a908326eb9965ae4aa0c52a167ad5/687474703a2f2f6563782e696d616765732d616d617a6f6e2e636f6d2f696d616765732f492f353135796878674650444c2e5f534c3136305f2e6a7067" alt="詳解 OpenCV ―コンピュータビジョンライブラリを使った画像処理・認識" data-canonical-src="http://ecx.images-amazon.com/images/I/515yhxgFPDL._SL160_.jpg"></a></div>
<div class=""><div class="">
<a href="http://www.amazon.co.jp/exec/obidos/ASIN/4873114136/22301-22/ref=nosim/" rel="nofollow noopener" target="_blank">詳解 OpenCV ―コンピュータビジョンライブラリを使った画像処理・認識</a>

<p>広範囲な内容が640ページにわたってわかりやすく解説されていて、訳文もものすごく読みやすいので、超オススメです。</p>

<p>また、拙著でも、 <strong>画像処理関係のレシピ</strong> を多く取り上げております。下記記事にて内容をご確認いただき、もしよろしければ！</p>

<p><a href="http://d.hatena.ne.jp/shu223/20130528/1369714635" rel="nofollow noopener" target="_blank">『iOSアプリ開発 達人のレシピ100』という本を書きました</a></p>

<p><a href="https://camo.qiitausercontent.com/bbe113a999ffee813898e1d98f185f6a36f494db/687474703a2f2f6563782e696d616765732d616d617a6f6e2e636f6d2f696d616765732f492f35317862347737686f494c2e5f534c3136305f2e6a7067" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/bbe113a999ffee813898e1d98f185f6a36f494db/687474703a2f2f6563782e696d616765732d616d617a6f6e2e636f6d2f696d616765732f492f35317862347737686f494c2e5f534c3136305f2e6a7067" alt="" data-canonical-src="http://ecx.images-amazon.com/images/I/51xb4w7hoIL._SL160_.jpg"></a></p>
</div></div>
</div></div>
	</td>
</tr>
</table>
<br />
<table border="1" style="height:150px;">
<tr>
	<td rowspan="3">88位</td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="thumb-up-120px.png" /></i>685</kbd>
		<a target="_blank" href="https://qiita.com/sutetotanuki/items/1700343852e863ba63a0">gitコマンドチートシート</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2012-10-10<br />13:34:53</center>
	</td>
	<td style="width:200px;">
		<!--投稿者-->
		<center>
			@<a href="user/4307.html">sutetotanuki</a>(9件の記事)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/4307/profile-images/1473683900">
		</center>
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Git]</b> <b>[CheatSheet]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<!--
		<div style="width:350px;height:150px;overflow:scroll;">%s</div>
		-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;">
<h1>
<span id="add" class="fragment"></span><a href="#add"><i class="fa fa-link"></i></a>Add</h1>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span><span class="c1"># 部分的にaddする</span>
git add -p

<span class="c1"># add済みのfileをadd(deletedを消すときにも使う)</span>
git add -u
</pre></div></div>

<h1>
<span id="apply" class="fragment"></span><a href="#apply"><i class="fa fa-link"></i></a>Apply</h1>

<h2>
<span id="diffからworking-treeに反映する" class="fragment"></span><a href="#diff%E3%81%8B%E3%82%89working-tree%E3%81%AB%E5%8F%8D%E6%98%A0%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>diffからworking treeに反映する</h2>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>git diff &lt;FILE&gt; &gt; pending.diff
git apply pending.diff
</pre></div></div>

<h1>
<span id="archive" class="fragment"></span><a href="#archive"><i class="fa fa-link"></i></a>Archive</h1>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span><span class="c1"># zip形式でファイルを出力。</span>
git archive &lt;COMMIT&gt; --format<span class="o">=</span>zip -o &lt;OUTPUT FILE&gt;
</pre></div></div>

<h1>
<span id="bisect" class="fragment"></span><a href="#bisect"><i class="fa fa-link"></i></a>Bisect</h1>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span><span class="c1"># スクリプトで渡す</span>
git bisect run ./test_script <span class="c1">#=&gt; 成功 0, 失敗 1, スキップ 125で返すスクリプト</span>
</pre></div></div>

<h2>
<span id="コミットを二分探索する" class="fragment"></span><a href="#%E3%82%B3%E3%83%9F%E3%83%83%E3%83%88%E3%82%92%E4%BA%8C%E5%88%86%E6%8E%A2%E7%B4%A2%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>コミットを二分探索する</h2>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>git bisect good v1.6.0
git bisect bad v1.6.2
git bisect good <span class="c1"># 壊れてない</span>
git bisect bad <span class="c1"># こわれている</span>
git bisect skip <span class="c1"># スキップ</span>
git bisect reset <span class="c1"># 終了</span>
</pre></div></div>

<h1>
<span id="blame" class="fragment"></span><a href="#blame"><i class="fa fa-link"></i></a>Blame</h1>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span><span class="c1"># どのcommitでそのファイルが追加されたかみる</span>
git blame &lt;FILE&gt;
</pre></div></div>

<h1>
<span id="branch" class="fragment"></span><a href="#branch"><i class="fa fa-link"></i></a>Branch</h1>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span><span class="c1"># リモートのbranch一覧をみる</span>
git branch -r
<span class="c1"># ブランチ名を変更する</span>
git branch -m &lt;NEW_NAME&gt;

<span class="c1"># ローカルブランチを削除</span>
git branch -d &lt;BRANCH&gt;
<span class="c1"># ローカルブランチを強制削除</span>
git branch -D &lt;BRANCH&gt;

<span class="c1"># リモートブランチを削除</span>
git push origin :&lt;BRANCH&gt;

<span class="c1"># ローカルブランチをリネーム</span>
git branch -m &lt;OLD_BRANCH_NAME&gt; &lt;NEW_BRANCH_NAME&gt;
</pre></div></div>

<h1>
<span id="clean" class="fragment"></span><a href="#clean"><i class="fa fa-link"></i></a>Clean</h1>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span><span class="c1"># 管理されていない(.gitignoreにもない)ファイルを削除する -n は消去ファイル確認</span>
git clean -n -f
</pre></div></div>

<h1>
<span id="clone" class="fragment"></span><a href="#clone"><i class="fa fa-link"></i></a>Clone</h1>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span><span class="c1"># submodule も一緒に初期化</span>
git clone --recursive &lt;URL&gt;
</pre></div></div>

<h1>
<span id="checkout" class="fragment"></span><a href="#checkout"><i class="fa fa-link"></i></a>Checkout</h1>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span><span class="c1"># work treeの向き先を現在のcommitにする(detached HEAD)</span>
git checkout HEAD^0 
<span class="c1"># fileをコミットからもどす</span>
git checkout &lt;COMMIT&gt; file

<span class="c1"># fileをインデックスから戻す</span>
git checkout &lt;FILE&gt;

<span class="c1"># remoteのブランチをとってきてcheckout</span>
git checkout -t -b &lt;BRANCH&gt; origin/&lt;BRANCH&gt;

<span class="c1"># 一つ前のbrachにcheckoutする</span>
git checkout -

<span class="c1"># 強制上書き</span>
git checkout .
git pull
</pre></div></div>

<h1>
<span id="cherry-pick" class="fragment"></span><a href="#cherry-pick"><i class="fa fa-link"></i></a>Cherry-pick</h1>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span><span class="c1"># 狙ったコミットをマージする</span>
git cherry-pick &lt;COMMIT&gt;
</pre></div></div>

<h1>
<span id="commit" class="fragment"></span><a href="#commit"><i class="fa fa-link"></i></a>Commit</h1>

<div class="code-frame" data-lang="bash">
<div class="code-lang"><span class="bold">commit.sh</span></div>
<div class="highlight"><pre><span></span><span class="c1"># 追加してcommitする</span>
git commit --amend
</pre></div>
</div>

<h1>
<span id="diff" class="fragment"></span><a href="#diff"><i class="fa fa-link"></i></a>Diff</h1>

<div class="code-frame" data-lang="bash">
<div class="code-lang"><span class="bold">diff.sh</span></div>
<div class="highlight"><pre><span></span><span class="c1"># 最新のコミットと、インデックスの間</span>
git diff --cached

<span class="c1"># コミット間の変更ファイル一覧</span>
git diff --stat

<span class="c1"># ファイル名と変更を表示</span>
git diff --name-status

<span class="c1"># カラーモード</span>
git diff --color-words
</pre></div>
</div>

<h1>
<span id="fetch" class="fragment"></span><a href="#fetch"><i class="fa fa-link"></i></a>Fetch</h1>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span><span class="c1"># 全てfetchする</span>
git fetch &lt;REMOTE&gt; &lt;BRANCH&gt;

<span class="c1"># fetchしたcommitをmergeする</span>
git merge FETCH_HEAD
</pre></div></div>

<h1>
<span id="format-patch" class="fragment"></span><a href="#format-patch"><i class="fa fa-link"></i></a>Format-patch</h1>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span><span class="c1"># 差分をpatch形式としてファイルで出力する</span>
git format-patch &lt;COMMIT..COMMIT&gt;
</pre></div></div>

<h1>
<span id="log" class="fragment"></span><a href="#log"><i class="fa fa-link"></i></a>Log</h1>

<div class="code-frame" data-lang="bash">
<div class="code-lang"><span class="bold">log.sh</span></div>
<div class="highlight"><pre><span></span><span class="c1"># 出力するコミット数制限</span>
git log -2

<span class="c1"># 各コミットの変更をパッチ形式で出力</span>
git log -p

<span class="c1"># ログメッセージの最初の１行を出力</span>
git log --pretty<span class="o">=</span>short

<span class="c1"># 内容に変更がある部分を探す</span>
git log --pretty<span class="o">=</span>short -S <span class="s1">'class Abc</span>
<span class="s1">  def aa</span>
<span class="s1">    p "aa"</span>
<span class="s1">  end</span>
<span class="s1">end'</span> -- &lt;FILE&gt;

<span class="c1"># 全てのログを見る</span>
git log -g

<span class="c1"># onelineでみる</span>
git log --oneline

<span class="c1"># ある特定のファイルのlogをみる</span>
git log v1.0.0 -- path/to/file.c <span class="c1"># v1.0.0タグ以降のfile.cのログを見る</span>

<span class="c1"># ある特定のユーザーのコミットをみる</span>
git log --author<span class="o">=</span><span class="s2">"&lt;USER NAME&gt;"</span>
</pre></div>
</div>

<h1>
<span id="ls-files" class="fragment"></span><a href="#ls-files"><i class="fa fa-link"></i></a>Ls-files</h1>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span><span class="c1"># マージが必要なfileを出力</span>
git ls-files -u
</pre></div></div>

<h1>
<span id="merge" class="fragment"></span><a href="#merge"><i class="fa fa-link"></i></a>Merge</h1>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span><span class="c1"># マージする。デフォルトはff</span>
git merge &lt;BRANCH&gt;

<span class="c1"># ffでも&lt;BRAHCN&gt;の情報があったことを残してMergeする</span>
git merge --no-ff &lt;BRANCH&gt;

<span class="c1"># 公開したcommitを取り消す</span>
git merge -s ours &lt;COMMIT&gt;

<span class="c1"># 一つ前にいたbranchをmergeする</span>
git merge -
</pre></div></div>

<h1>
<span id="merge-base" class="fragment"></span><a href="#merge-base"><i class="fa fa-link"></i></a>Merge-base</h1>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span><span class="c1"># 共通のcommitオブジェクトを出力する</span>
git merge-base &lt;COMMIT&gt; &lt;COMMIT&gt;
</pre></div></div>

<h1>
<span id="push" class="fragment"></span><a href="#push"><i class="fa fa-link"></i></a>Push</h1>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span><span class="c1"># 2つ前のコミットでプッシュ先のmasterブランチを更新</span>
git push REMOTE HEAD^^:master

<span class="c1"># ローカルmasterでremoteのmaster更新</span>
git push REMOTE master

<span class="c1"># ブランチ削除</span>
git push :temporary

<span class="c1"># 強制的にpushする。(過去のcommitを変えちゃうかもしれない)</span>
git push -f
</pre></div></div>

<h1>
<span id="reset" class="fragment"></span><a href="#reset"><i class="fa fa-link"></i></a>Reset</h1>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span><span class="c1"># indexから全て削除</span>
git reset

<span class="c1">#indexからFILEを削除</span>
git reset &lt;FILE&gt;

<span class="c1"># commitを削除</span>
git reset HEAD^

<span class="c1"># commitを削除しファイルももとに戻す</span>
git reset --hard HEAD

<span class="c1"># resetを取り消す</span>
git reflog
git reset --hard &lt;リセットの前のCOMMIT&gt;

<span class="c1"># 直前の操作(commit, merge, rebase, reset等)を取り消す</span>
git reset --hard ORIG_HEAD
</pre></div></div>

<h1>
<span id="remote" class="fragment"></span><a href="#remote"><i class="fa fa-link"></i></a>Remote</h1>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span><span class="c1"># 現在Remoteとして設定されている一覧を取得</span>
git remote -v

<span class="c1"># Remoteを登録する</span>
git remote add &lt;REMOTE&gt;

<span class="c1"># Remoteとして登録しているのを削除する　</span>
git remote rm &lt;REMOTE&gt;

<span class="c1"># Remote の url を変更する</span>
git remote set-url &lt;REMOTE&gt; &lt;URL&gt;
</pre></div></div>

<h1>
<span id="rev-list" class="fragment"></span><a href="#rev-list"><i class="fa fa-link"></i></a>Rev-list</h1>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span><span class="c1"># 指定したディレクトリのコミットidを一覧表示</span>
git rev-list HEAD^..HEAD -- DIR/
</pre></div></div>

<h1>
<span id="revert" class="fragment"></span><a href="#revert"><i class="fa fa-link"></i></a>Revert</h1>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span><span class="c1"># 過去のcommitを打ち消すcommitをする</span>
git revert &lt;COMMIT&gt;

<span class="c1"># コミットを行わない</span>
git revert -n &lt;COMMIT&gt; 
</pre></div></div>

<h1>
<span id="rm" class="fragment"></span><a href="#rm"><i class="fa fa-link"></i></a>Rm</h1>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span><span class="c1"># Add取り消し</span>
git rm --cached &lt;FILE&gt;
</pre></div></div>

<h1>
<span id="rebase" class="fragment"></span><a href="#rebase"><i class="fa fa-link"></i></a>Rebase</h1>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span><span class="c1"># インタラクティブリベースを取り消す</span>
git rebase --abort
</pre></div></div>

<h2>
<span id="過去のcommitを修正する" class="fragment"></span><a href="#%E9%81%8E%E5%8E%BB%E3%81%AEcommit%E3%82%92%E4%BF%AE%E6%AD%A3%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>過去のcommitを修正する</h2>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>git rebase -i HEAD~&lt;戻したいコミットの位置&gt;
  <span class="c1"># editorが起動するので直すコミットの横にあるコマンドを edit に変更</span>
  <span class="c1"># 実際に変更して git add で indexに追加</span>
git commit --amend でcommit
git rebase --continue
</pre></div></div>

<h2>
<span id="リベースそのものを無かったことにする" class="fragment"></span><a href="#%E3%83%AA%E3%83%99%E3%83%BC%E3%82%B9%E3%81%9D%E3%81%AE%E3%82%82%E3%81%AE%E3%82%92%E7%84%A1%E3%81%8B%E3%81%A3%E3%81%9F%E3%81%93%E3%81%A8%E3%81%AB%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>リベースそのものを無かったことにする</h2>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>git log -g <span class="c1"># rebase -i 前のコミットを探す</span>
git reset &lt;COMMIT&gt;
</pre></div></div>

<h2>
<span id="topicブランチ育て中にmasterブランチの変更を取り込む" class="fragment"></span><a href="#topic%E3%83%96%E3%83%A9%E3%83%B3%E3%83%81%E8%82%B2%E3%81%A6%E4%B8%AD%E3%81%ABmaster%E3%83%96%E3%83%A9%E3%83%B3%E3%83%81%E3%81%AE%E5%A4%89%E6%9B%B4%E3%82%92%E5%8F%96%E3%82%8A%E8%BE%BC%E3%82%80"><i class="fa fa-link"></i></a>topicブランチ育て中にmasterブランチの変更を取り込む</h2>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>git checkout feature
git fetch origin
git rebase origin/master
</pre></div></div>

<h2>
<span id="以下でも一緒" class="fragment"></span><a href="#%E4%BB%A5%E4%B8%8B%E3%81%A7%E3%82%82%E4%B8%80%E7%B7%92"><i class="fa fa-link"></i></a>以下でも一緒</h2>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>git checkout feature
git pull --rebase origin master
git checkout master
git pull --rebase
</pre></div></div>

<h1>
<span id="shortlog" class="fragment"></span><a href="#shortlog"><i class="fa fa-link"></i></a>Shortlog</h1>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span><span class="c1"># コミットの（ユーザー毎の？）要約</span>
git shortlog HEAD^..HEAD -- &lt;DIR&gt;

<span class="c1"># ユーザー毎のコミット数を集計</span>
git shortlog &lt;COMMIT&gt;..&lt;COMMIT&gt; --summary
</pre></div></div>

<h1>
<span id="status" class="fragment"></span><a href="#status"><i class="fa fa-link"></i></a>Status</h1>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span><span class="c1"># 次のcommitに含まれるのを確認する </span>
git status
</pre></div></div>

<h1>
<span id="stash" class="fragment"></span><a href="#stash"><i class="fa fa-link"></i></a>Stash</h1>

<h2>
<span id="現在の変更を一時的によける" class="fragment"></span><a href="#%E7%8F%BE%E5%9C%A8%E3%81%AE%E5%A4%89%E6%9B%B4%E3%82%92%E4%B8%80%E6%99%82%E7%9A%84%E3%81%AB%E3%82%88%E3%81%91%E3%82%8B"><i class="fa fa-link"></i></a>現在の変更を一時的によける</h2>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>git stash 
git checkout &lt;Other BRANCH&gt; <span class="c1"># edit files … </span>
git add 
git commit 
git checkout &lt;Working BRANCH&gt; 
git stash pop
</pre></div></div>

<h1>
<span id="tag" class="fragment"></span><a href="#tag"><i class="fa fa-link"></i></a>Tag</h1>

<h2>
<span id="remoteのタグを消す" class="fragment"></span><a href="#remote%E3%81%AE%E3%82%BF%E3%82%B0%E3%82%92%E6%B6%88%E3%81%99"><i class="fa fa-link"></i></a>remoteのタグを消す</h2>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span><span class="c1"># localのタグを消す</span>
git tag -d &lt;TAG_NAME&gt;
<span class="c1"># それをremoteに反映する</span>
git push origin :refs/tags/&lt;TAG_NAME&gt;
</pre></div></div>
</div>
	</td>
</tr>
</table>
<br />
<table border="1" style="height:150px;">
<tr>
	<td rowspan="3">89位</td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="thumb-up-120px.png" /></i>684</kbd>
		<a target="_blank" href="https://qiita.com/labocho/items/5fbaa0491b67221419b4">JavaScript の Date は罠が多すぎる</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2012-09-06<br />17:01:35</center>
	</td>
	<td style="width:200px;">
		<!--投稿者-->
		<center>
			@<a href="user/4191.html">labocho</a>(65件の記事)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/4191/profile-images/1483500668">
		</center>
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[JavaScript]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<!--
		<div style="width:350px;height:150px;overflow:scroll;">%s</div>
		-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>JavaScript で日付・時間を扱っていて、次から次へと罠にはまったので、あとから来る人のために書き留めておく。</p>

<h2>
<span id="dateparse-が返すのは-date-でなく整数" class="fragment"></span><a href="#dateparse-%E3%81%8C%E8%BF%94%E3%81%99%E3%81%AE%E3%81%AF-date-%E3%81%A7%E3%81%AA%E3%81%8F%E6%95%B4%E6%95%B0"><i class="fa fa-link"></i></a>Date.parse が返すのは Date でなく整数</h2>

<p><code>Date.parse</code> は、世界協定時 1970 年 1 月 1 日 00:00:00 からのミリ秒を返す。<br>
Date を得るには <code>new Date</code> に渡す。<br>
new Date に直接文字列渡しても同じ挙動なので、こちらのが簡潔。</p>

<div class="code-frame" data-lang="javascript"><div class="highlight"><pre><span></span><span class="nx">msec</span> <span class="o">=</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">"Thu, 06 Sep 2012 00:00:00 +0900"</span><span class="p">);</span> <span class="c1">// 1346857200000</span>
<span class="nx">date</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="nx">msec</span><span class="p">);</span> <span class="c1">// Date</span>
<span class="nx">date</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="s2">"Thu, 06 Sep 2012 00:00:00 +0900"</span><span class="p">);</span> <span class="c1">// Date</span>
</pre></div></div>

<h2>
<span id="年を得るのに-getyear-は使わない" class="fragment"></span><a href="#%E5%B9%B4%E3%82%92%E5%BE%97%E3%82%8B%E3%81%AE%E3%81%AB-getyear-%E3%81%AF%E4%BD%BF%E3%82%8F%E3%81%AA%E3%81%84"><i class="fa fa-link"></i></a>年を得るのに getYear は使わない</h2>

<p><code>Date.prototype.getYear</code> は 1900 年からの年数で非推奨。<br>
<code>Date.prototype.getFullYear</code> を使う。</p>

<div class="code-frame" data-lang="javascript"><div class="highlight"><pre><span></span><span class="nx">date</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="s2">"Thu, 06 Sep 2012 00:00:00 +0900"</span><span class="p">)</span>
<span class="nx">date</span><span class="p">.</span><span class="nx">getYear</span><span class="p">();</span> <span class="c1">// 112 (2012 - 1900)</span>
<span class="nx">date</span><span class="p">.</span><span class="nx">getFullYear</span><span class="p">();</span> <span class="c1">// 2012</span>
</pre></div></div>

<h2>
<span id="月は-0-から始まる" class="fragment"></span><a href="#%E6%9C%88%E3%81%AF-0-%E3%81%8B%E3%82%89%E5%A7%8B%E3%81%BE%E3%82%8B"><i class="fa fa-link"></i></a>月は 0 から始まる</h2>

<p><code>new Date</code> の第 2 引数でも、<code>Date.prototype.getMonth</code> でも、月は 0-11で表す。</p>

<div class="code-frame" data-lang="javascript"><div class="highlight"><pre><span></span><span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="mi">2012</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">);</span> <span class="c1">// Thu, Sep 06 2012 00:00:00 GMT+0900 (JST)</span>
<span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="s2">"Thu, 06 Sep 2012 00:00:00 +0900"</span><span class="p">).</span><span class="nx">getMonth</span><span class="p">();</span>  <span class="c1">// 8</span>
</pre></div></div>

<h2>
<span id="日を得るのは-getday-ではない" class="fragment"></span><a href="#%E6%97%A5%E3%82%92%E5%BE%97%E3%82%8B%E3%81%AE%E3%81%AF-getday-%E3%81%A7%E3%81%AF%E3%81%AA%E3%81%84"><i class="fa fa-link"></i></a>日を得るのは getDay ではない</h2>

<p><code>Date.prototype.getDay</code> は 0 を日曜とする曜日を返す。<br>
日にちは <code>Date.prototype.getDate</code>。<br>
月とは違いこちらは 1-31。</p>

<div class="code-frame" data-lang="javascript"><div class="highlight"><pre><span></span><span class="nx">date</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="s2">"Thu, 06 Sep 2012 00:00:00 +0900"</span><span class="p">);</span>
<span class="nx">date</span><span class="p">.</span><span class="nx">getDay</span><span class="p">();</span> <span class="c1">// 4 (木曜日)</span>
<span class="nx">date</span><span class="p">.</span><span class="nx">getDate</span><span class="p">();</span> <span class="c1">// 6 (6日)</span>
</pre></div></div>

<h2>
<span id="gettimezoneoffset-の符号は普通の表記と逆" class="fragment"></span><a href="#gettimezoneoffset-%E3%81%AE%E7%AC%A6%E5%8F%B7%E3%81%AF%E6%99%AE%E9%80%9A%E3%81%AE%E8%A1%A8%E8%A8%98%E3%81%A8%E9%80%86"><i class="fa fa-link"></i></a>getTimezoneOffset の符号は普通の表記と逆</h2>

<p><code>Date.prototype.getTimezoneOffset</code> は UTC からの時差を分で返すが、通常タイムゾーンを示す文字列表現とは符号が逆。</p>

<div class="code-frame" data-lang="javascript"><div class="highlight"><pre><span></span><span class="nx">date</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="s2">"Thu, 06 Sep 2012 00:00:00 +0900"</span><span class="p">);</span>
<span class="nx">date</span><span class="p">.</span><span class="nx">getTimezoneOffset</span><span class="p">();</span> <span class="c1">// -540 (540分=9時間で +0900 のこと)</span>
</pre></div></div>

<h2>
<span id="比較するときは-gettime-使う" class="fragment"></span><a href="#%E6%AF%94%E8%BC%83%E3%81%99%E3%82%8B%E3%81%A8%E3%81%8D%E3%81%AF-gettime-%E4%BD%BF%E3%81%86"><i class="fa fa-link"></i></a>比較するときは getTime 使う</h2>

<p>同じ日時を示す Date でもオブジェクトが異なれば == や === は false になる。</p>

<div class="code-frame" data-lang="javascript"><div class="highlight"><pre><span></span><span class="nx">s</span> <span class="o">=</span> <span class="s2">"Thu, 06 Sep 2012 00:00:00 +0900"</span>
<span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="nx">s</span><span class="p">)</span> <span class="o">==</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="nx">s</span><span class="p">)</span> <span class="c1">// false</span>
<span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="nx">s</span><span class="p">)</span> <span class="o">===</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="nx">s</span><span class="p">)</span> <span class="c1">// false</span>
</pre></div></div>

<p><code>Date.prototype.getTime</code> で 世界協定時 1970 年 1 月 1 日 00:00:00 からの経過ミリ秒が得られるのでこれで比較する。</p>

<div class="code-frame" data-lang="javascript"><div class="highlight"><pre><span></span><span class="nx">s</span> <span class="o">=</span> <span class="s2">"Thu, 06 Sep 2012 00:00:00 +0900"</span>
<span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="nx">s</span><span class="p">).</span><span class="nx">getTime</span><span class="p">()</span> <span class="c1">// 1346857200000</span>
<span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="nx">s</span><span class="p">).</span><span class="nx">getTime</span><span class="p">()</span> <span class="o">==</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="nx">s</span><span class="p">).</span><span class="nx">getTime</span><span class="p">()</span> <span class="c1">// true</span>
<span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="nx">s</span><span class="p">).</span><span class="nx">getTime</span><span class="p">()</span> <span class="o">===</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="nx">s</span><span class="p">).</span><span class="nx">getTime</span><span class="p">()</span> <span class="c1">// true</span>
</pre></div></div>

<p>ちなみに Date 同士の比較でも <code>&lt;</code> や <code>&gt;</code> は期待通りに動作するが、ややこしいのでおすすめしない。</p>

<p>(減算したり単項演算子 + を使って数値にキャストして比較する方法もあるが、意図がわかりにくい上に<a href="http://jsperf.com/comparing-date-objects" rel="nofollow noopener" target="_blank">遅い</a>ので使う理由はない)</p>

<h2>
<span id="文字列表現は-toisostring-か-tojson-で取得する" class="fragment"></span><a href="#%E6%96%87%E5%AD%97%E5%88%97%E8%A1%A8%E7%8F%BE%E3%81%AF-toisostring-%E3%81%8B-tojson-%E3%81%A7%E5%8F%96%E5%BE%97%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>文字列表現は toISOString か toJSON で取得する</h2>

<p>ECMAScript 3 で定義されている、文字列表現を得るメソッドには、下記のものがある (括弧内は <a href="http://www.ecma-international.org/publications/files/ECMA-ST-ARCH/ECMA-262,%203rd%20edition,%20December%201999.pdf" rel="nofollow noopener" target="_blank">EMCAScript 3 仕様書 (PDF)</a> の項番号)。</p>

<ul>
<li>toString (15.9.5.2)</li>
<li>toDateString (15.9.5.3)</li>
<li>toTimeString (15.9.5.4)</li>
<li>toLocaleString (15.9.5.5)</li>
<li>toLocaleDateString (15.9.5.6)</li>
<li>toLocaleTimeString (15.9.5.7)</li>
</ul>

<p>が、いずれも "The contents of the string are implementation-dependent" と書かれており、形式は実装依存。</p>

<p>試してみたら違うのは IE だけだったけど、規格がないので責めてはいけない。</p>

<div class="code-frame" data-lang="javascript"><div class="highlight"><pre><span></span><span class="nx">date</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="s2">"Thu, 06 Sep 2012 00:00:00 +0900"</span><span class="p">);</span>
<span class="nx">date</span><span class="p">.</span><span class="nx">toString</span><span class="p">()</span> <span class="c1">// Chrome21:  "Thu Sep 06 2012 00:00:00 GMT+0900 (JST)"</span>
<span class="nx">date</span><span class="p">.</span><span class="nx">toString</span><span class="p">()</span> <span class="c1">// Firefox14: "Thu Sep 06 2012 00:00:00 GMT+0900 (JST)"</span>
<span class="nx">date</span><span class="p">.</span><span class="nx">toString</span><span class="p">()</span> <span class="c1">// Safari:    "Thu Sep 06 2012 00:00:00 GMT+0900 (JST)"</span>
<span class="nx">date</span><span class="p">.</span><span class="nx">toString</span><span class="p">()</span> <span class="c1">// IE8:       "Thu Sep 6 00:00:00 UTC+0900 2012"</span>
</pre></div></div>

<p>ECMAScript 5 では文字列表現を<a href="http://ecma-international.org/ecma-262/5.1/#sec-15.9.1.15" rel="nofollow noopener" target="_blank">ISO8601 のサブセットに規定</a>しており <a href="http://ecma-international.org/ecma-262/5.1/#sec-15.9.5.43" rel="nofollow noopener" target="_blank">toISOString</a> で得られる。</p>

<div class="code-frame" data-lang="javascript"><div class="highlight"><pre><span></span><span class="nx">date</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="s2">"Thu, 06 Sep 2012 00:00:00 +0900"</span><span class="p">);</span>
<span class="nx">date</span><span class="p">.</span><span class="nx">toISOString</span><span class="p">();</span> <span class="c1">// "2012-09-05T15:00:00.000Z"</span>
</pre></div></div>

<p><code>JSON.stringify</code> から呼ばれる <a href="http://ecma-international.org/ecma-262/5.1/#sec-15.9.5.44" rel="nofollow noopener" target="_blank">toJSON</a> も toISOString を使うので、JSON.stringify したときも ISO8601 になる。</p>

<div class="code-frame" data-lang="javascript"><div class="highlight"><pre><span></span><span class="nx">date</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="s2">"Thu, 06 Sep 2012 00:00:00 +0900"</span><span class="p">);</span>
<span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">date</span><span class="p">);</span> <span class="c1">// ""2012-09-05T15:00:00.000Z""</span>
</pre></div></div>

<p>また、<a href="http://ecma-international.org/ecma-262/5.1/#sec-15.9.4.2" rel="nofollow noopener" target="_blank">Date.parse</a> や <a href="http://ecma-international.org/ecma-262/5.1/#sec-15.9.3.2" rel="nofollow noopener" target="_blank">new Date</a> でも、ISO8601 (のサブセット) をパースできることを定めている。</p>

<div class="code-frame" data-lang="javascript"><div class="highlight"><pre><span></span><span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="s2">"2012-09-05T15:00:00.000Z"</span><span class="p">)</span> <span class="c1">// Thu Sep 06 2012 00:00:00 GMT+0900 (JST)</span>
</pre></div></div>

<h2>
<span id="json-にすると日付が変わることがある" class="fragment"></span><a href="#json-%E3%81%AB%E3%81%99%E3%82%8B%E3%81%A8%E6%97%A5%E4%BB%98%E3%81%8C%E5%A4%89%E3%82%8F%E3%82%8B%E3%81%93%E3%81%A8%E3%81%8C%E3%81%82%E3%82%8B"><i class="fa fa-link"></i></a>JSON にすると日付が変わることがある</h2>

<p>上で述べたように JSON.stringify したときの文字列表現は ISO8601 になるが、タイムゾーンを無視して<a href="http://ecma-international.org/ecma-262/5.1/#sec-15.9.5.43" rel="nofollow noopener" target="_blank">常に UTC になってしまう</a>。</p>

<p>これにより、タイムゾーンと時刻によっては日付が変わる。</p>

<div class="code-frame" data-lang="javascript"><div class="highlight"><pre><span></span><span class="c1">// 日本時間で 6 日 0 時は UTC では 5 日 15 時</span>
<span class="nx">date</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="s2">"2012-09-06T00:00:00+0900"</span><span class="p">);</span>
<span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">date</span><span class="p">)</span> <span class="c1">// "2012-09-05T15:00:00.000Z"</span>
</pre></div></div>

<p>Date.prototype.toJSON を自分で書き換えてタイムゾーンを含む文字列を返すようにすれば回避可能だが、規格から外れてしまうため、JSON.stringify する前に文字列にしてしまうほうが安全。</p>

<h2>
<span id="日付をパースした場合と数値で指定した場合で時刻が一致しない" class="fragment"></span><a href="#%E6%97%A5%E4%BB%98%E3%82%92%E3%83%91%E3%83%BC%E3%82%B9%E3%81%97%E3%81%9F%E5%A0%B4%E5%90%88%E3%81%A8%E6%95%B0%E5%80%A4%E3%81%A7%E6%8C%87%E5%AE%9A%E3%81%97%E3%81%9F%E5%A0%B4%E5%90%88%E3%81%A7%E6%99%82%E5%88%BB%E3%81%8C%E4%B8%80%E8%87%B4%E3%81%97%E3%81%AA%E3%81%84"><i class="fa fa-link"></i></a>日付をパースした場合と数値で指定した場合で時刻が一致しない</h2>

<p>new Date や Date.parse で時刻を含まない日付文字列をパースすると、UTC 00:00:00 になる。</p>

<div class="code-frame" data-lang="javascript"><div class="highlight"><pre><span></span><span class="c1">// UTC 0 時 = JST 午前 9 時</span>
<span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="s2">"2014-11-10"</span><span class="p">)</span> <span class="c1">// Mon Nov 10 2014 09:00:00 GMT+0900 (JST)</span>
</pre></div></div>

<p>一方で <code>new Date(2014, 10, 10)</code> などとしたときは地方時 00:00:00 となり、これと時刻が一致しない。</p>

<div class="code-frame" data-lang="javascript"><div class="highlight"><pre><span></span><span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="mi">2014</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span> <span class="c1">// Mon Nov 10 2014 00:00:00 GMT+0900 (JST)</span>
</pre></div></div>

<p>前者の挙動は、日付文字列でタイムゾーン文字列がない場合、UTC として扱うという ECMAScript 5 の仕様に基づく。</p>

<blockquote>
<p>The value of an absent time zone offset is “Z”.<br>
<a href="http://ecma-international.org/ecma-262/5.1/#sec-15.9.1.15" rel="nofollow noopener" target="_blank">15.9.1.15 Date Time String Format</a></p>
</blockquote>

<p>ただし、ECMAScript 6 draft (October 14, 2014) では、これを地方時にするとの記述がある。</p>

<blockquote>
<p>If the time zone offset is absent, the date-time is interpreted as a local time.<br>
<a href="http://people.mozilla.org/%7Ejorendorff/es6-draft.html#sec-date-time-string-format" rel="nofollow noopener" target="_blank">20.3.1.15 Date Time String Format</a></p>
</blockquote>

<h2>
<span id="iso8601-は-ie8-ではパースできない" class="fragment"></span><a href="#iso8601-%E3%81%AF-ie8-%E3%81%A7%E3%81%AF%E3%83%91%E3%83%BC%E3%82%B9%E3%81%A7%E3%81%8D%E3%81%AA%E3%81%84"><i class="fa fa-link"></i></a>ISO8601 は IE8 ではパースできない</h2>

<p>Date.parse がパースできる形式は ECMAScript 3 では定められていないため実装依存。</p>

<p>試してみたら、主要ブラウザでは RFC2822 なら OK、ISO8601 は IE8 ではだめ (IE9 は OK)。</p>

<div class="code-frame" data-lang="javascript"><div class="highlight"><pre><span></span><span class="nb">Date</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">"2012-01-01 00:00:00"</span><span class="p">);</span> <span class="c1">// IE8 だと NaN</span>
</pre></div></div>

<p>上で述べたように ECMAScript 5 では ISO8601 (のサブセット) をパースできるよう定めている。</p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1" style="height:150px;">
<tr>
	<td rowspan="3">90位</td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="thumb-up-120px.png" /></i>682</kbd>
		<a target="_blank" href="https://qiita.com/awakia/items/8ff451ca5f8ae0122be7">Javascriptでオブジェクト指向するときに覚えておくべきこと</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-10-30<br />15:59:36</center>
	</td>
	<td style="width:200px;">
		<!--投稿者-->
		<center>
			@<a href="user/6664.html">awakia</a>(152件の記事)<br />(Wantedly, Inc. 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/6664/profile-images/1473683079">
		</center>
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[JavaScript]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<!--
		<div style="width:350px;height:150px;overflow:scroll;">%s</div>
		-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>Javascriptはブラウザのクライアントサイドで動く唯一の言語と言ってもいいので、普段書かなくてもちょいちょい書くことになる。そんな時用に、他の言語使っていると忘れてしまうJavascriptの重要な法則をまとめておく。</p>

<p>基本的にリファレンスにしているのはMozilla Developer Network (MDN)のドキュメントの以下のページ。MDNはJavascript関連では一番ちゃんとしたドキュメントだと信じている。</p>

<ul>
<li><a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Guide/Working_with_Objects" rel="nofollow noopener" target="_blank">Working with Objects - MDN</a></li>
<li><a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Guide/Inheritance_and_the_prototype_chain" rel="nofollow noopener" target="_blank">継承とプロトタイプチェーン - MDN</a></li>
<li><a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Operators/this" rel="nofollow noopener" target="_blank">this - MDN</a></li>
<li><a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Guide/Details_of_the_Object_Model" rel="nofollow noopener" target="_blank">オブジェクトモデルの詳細 - MDN</a></li>
</ul>

<h2>
<span id="プロトタイプベース言語" class="fragment"></span><a href="#%E3%83%97%E3%83%AD%E3%83%88%E3%82%BF%E3%82%A4%E3%83%97%E3%83%99%E3%83%BC%E3%82%B9%E8%A8%80%E8%AA%9E"><i class="fa fa-link"></i></a>プロトタイプベース言語</h2>

<p>Javascriptはプロトタイプベースのオブジェクト指向言語で、クラスベースのオブジェクト指向言語(例: C++, Java)とは異なる部分が多々ある。<br>
例えば、クラスベース言語はクラスとインスタンスという概念があるのに対し、プロトタイプベース言語はPrototypical Objectというオブジェクトがあるだけ。</p>

<blockquote>
<p>表8.1 クラスベース (Java) のオブジェクトシステムとプロトタイプベース (JavaScript) のオブジェクトシステムとの比較</p>

<table>
<thead>
<tr>
<th style="text-align: left">クラスベース (Java)</th>
<th style="text-align: left">プロトタイプベース (JavaScript)</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left">クラスとインスタンスは異なる実体です 。</td>
<td style="text-align: left">すべてのオブジェクトはインスタンスです。</td>
</tr>
<tr>
<td style="text-align: left">クラス定義を用いてクラスを定義します。また、コンストラクタメソッドを用いてクラスをインスタンス化します。</td>
<td style="text-align: left">コンストラクタ関数を用いてオブジェクトのセットを定義および作成します。</td>
</tr>
<tr>
<td style="text-align: left">new 演算子を用いて単一のオブジェクトを作成します。</td>
<td style="text-align: left">同じです。</td>
</tr>
<tr>
<td style="text-align: left">既存のクラスのサブクラスを定義するクラス定義を用いて、オブジェクト階層を構築します。</td>
<td style="text-align: left">コンストラクタ関数に結びつけられたプロトタイプとしてオブジェクトを割り当てることで、オブジェクト階層を構築します。</td>
</tr>
<tr>
<td style="text-align: left">クラスチェーンに従ってプロパティを継承します。</td>
<td style="text-align: left">プロトタイプチェーンに従ってプロパティを継承します。</td>
</tr>
<tr>
<td style="text-align: left">クラス定義が、クラスの全インスタンスの全プロパティを定義します。実行時に動的にプロパティを追加することはできません。</td>
<td style="text-align: left">コンストラクタ関数またはプロトタイプがプロパティの初期セットを指定します。個々のオブジェクトやオブジェクトのセット全体へ動的にプロパティを追加したり、それらからプロパティを削除したりできます。</td>
</tr>
</tbody>
</table>

<p><a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Guide/Details_of_the_Object_Model" rel="nofollow noopener" target="_blank">クラスベース言語とプロトタイプベース言語 - オブジェクトモデルの詳細 - MDN</a></p>
</blockquote>

<h2>
<span id="全てはオブジェクト" class="fragment"></span><a href="#%E5%85%A8%E3%81%A6%E3%81%AF%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88"><i class="fa fa-link"></i></a>全てはオブジェクト</h2>

<p>Javascriptで全てはオブジェクトで、クラスベース言語でいうところのインスタンスのみだと思えば良い。</p>

<blockquote>
<p>JavaScript では、ほぼあらゆるものがオブジェクトです。<br>
null と undefined 以外のすべてのプリミティブ型はオブジェクトとして扱われます。<br>
 <a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Guide/Working_with_Objects/#Object_everything" rel="nofollow noopener" target="_blank">すべてはオブジェクト - Working with Objects - MDN</a></p>
</blockquote>

<h2>
<span id="オブジェクトはプロパティを持つ" class="fragment"></span><a href="#%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AF%E3%83%97%E3%83%AD%E3%83%91%E3%83%86%E3%82%A3%E3%82%92%E6%8C%81%E3%81%A4"><i class="fa fa-link"></i></a>オブジェクトはプロパティを持つ</h2>

<p>オブジェクトは、変数や関数をプロパティとして持つことができる。</p>

<blockquote>
<p>JavaScript のオブジェクトは、自身に関連付けられたプロパティを持ちます。オブジェクトのプロパティは、オブジェクトに関連付けられている変数と捉える事ができます。オブジェクトのプロパティは基本的に、オブジェクトに属するものという点を除いて通常の JavaScript 変数と同じようなものです。<br>
<a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Guide/Working_with_Objects#Objects_and_properties" rel="nofollow noopener" target="_blank">オブジェクトとそのプロパティ - Working with Objects -  MDN</a></p>
</blockquote>

<h2>
<span id="オブジェクトの実装は結局hashmap連想配列" class="fragment"></span><a href="#%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AE%E5%AE%9F%E8%A3%85%E3%81%AF%E7%B5%90%E5%B1%80hashmap%E9%80%A3%E6%83%B3%E9%85%8D%E5%88%97"><i class="fa fa-link"></i></a>オブジェクトの実装は、結局、HashMap（連想配列）</h2>

<p>オブジェクトはHashMapなので、簡単な例としては、プロパティを配列の要素アクセスのように呼び出せる。</p>

<div class="code-frame" data-lang="javascript"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="s2">"hoge"</span><span class="p">.</span><span class="nx">length</span>
<span class="mi">4</span>
<span class="o">&gt;</span> <span class="s2">"hoge"</span><span class="p">[</span><span class="s1">'length'</span><span class="p">]</span>
<span class="mi">4</span>
</pre></div></div>

<blockquote>
<p>JavaScript オブジェクトのプロパティは、ブラケット表記法でもアクセスや設定ができます。オブジェクトは連想配列と呼ばれることがあります。<br>
<a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Guide/Working_with_Objects#Objects_and_properties" rel="nofollow noopener" target="_blank">オブジェクトとそのプロパティ - Working with Objects -  MDN</a></p>
</blockquote>

<p>例えば、オブジェクトの宣言方法は、オブジェクト初期化子などと言われているが、結局よくあるHashMapの宣言と同じ。</p>

<blockquote>
<div class="code-frame" data-lang="javascript"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">myHonda</span> <span class="o">=</span> <span class="p">{</span><span class="nx">color</span><span class="o">:</span> <span class="s2">"red"</span><span class="p">,</span> <span class="nx">wheels</span><span class="o">:</span> <span class="mi">4</span><span class="p">,</span> <span class="nx">engine</span><span class="o">:</span> <span class="p">{</span><span class="nx">cylinders</span><span class="o">:</span> <span class="mi">4</span><span class="p">,</span> <span class="nx">size</span><span class="o">:</span> <span class="mf">2.2</span><span class="p">}};</span>
</pre></div></div>

<p><a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Guide/Working_with_Objects#Using_object_initializers" rel="nofollow noopener" target="_blank">オブジェクト初期化子の利用 - Working with Objects - MDN</a></p>
</blockquote>

<h2>
<span id="メソッドと関数" class="fragment"></span><a href="#%E3%83%A1%E3%82%BD%E3%83%83%E3%83%89%E3%81%A8%E9%96%A2%E6%95%B0"><i class="fa fa-link"></i></a>メソッドと関数</h2>

<p>オブジェクトのプロパティになっている関数がメソッド。</p>

<blockquote>
<p>メソッドはオブジェクトに関連付けられた関数です。簡単に言えば、オブジェクトのプロパティのうち関数であるものがメソッドです。<br>
<a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Guide/Working_with_Objects#Defining_methods" rel="nofollow noopener" target="_blank">メソッドの定義 - Working with Objects -  MDN</a></p>
</blockquote>

<p>ただし、メソッドはオブジェクトから参照されているだけで束縛されているわけではない。<br>
よって、オブジェクトのプロパティとして宣言された関数（つまりメソッド）を、グローバルな環境で使えば通常の関数として振る舞う。</p>

<blockquote>
<p>this は関数に「渡される」のであって、関数に固定されている訳ではありません。言い換えると、メソッドはそれをメソッドとして持つオブジェクトに束縛されているのではなく、オブジェクトによって参照されているだけです。</p>

<div class="code-frame" data-lang="javascript"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">Car</span><span class="p">(</span><span class="nx">brand</span><span class="p">)</span> <span class="p">{</span>
   <span class="k">this</span><span class="p">.</span><span class="nx">brand</span> <span class="o">=</span> <span class="nx">brand</span><span class="p">;</span>
<span class="p">}</span>
<span class="nx">Car</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">getBrand</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
   <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">brand</span><span class="p">;</span>
<span class="p">}</span>
<span class="kd">var</span> <span class="nx">foo</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Car</span><span class="p">(</span><span class="s2">"toyota"</span><span class="p">);</span>
<span class="nx">println</span><span class="p">(</span><span class="nx">foo</span><span class="p">.</span><span class="nx">getBrand</span><span class="p">());</span>  <span class="c1">// "toyota"</span>
<span class="kd">var</span> <span class="nx">brand</span> <span class="o">=</span> <span class="s2">"not a car"</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">bar</span> <span class="o">=</span> <span class="nx">foo</span><span class="p">.</span><span class="nx">getBrand</span><span class="p">;</span>
<span class="nx">println</span><span class="p">(</span><span class="nx">bar</span><span class="p">());</span>  <span class="c1">// "not a car"</span>
</pre></div></div>

<p><a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Operators/this#.E3.83.A1.E3.82.BD.E3.83.83.E3.83.89.E3.81.AE.E6.9D.9F.E7.B8.9B" rel="nofollow noopener" target="_blank">メソッドの束縛 - this - MDN</a></p>
</blockquote>

<h2>
<span id="コンストラクタと関数" class="fragment"></span><a href="#%E3%82%B3%E3%83%B3%E3%82%B9%E3%83%88%E3%83%A9%E3%82%AF%E3%82%BF%E3%81%A8%E9%96%A2%E6%95%B0"><i class="fa fa-link"></i></a>コンストラクタと関数</h2>

<p>どの関数でもコンストラクタとして使用でき、new演算子とともに使用することでオブジェクトを作成する。</p>

<blockquote>
<p>どの JavaScript 関数もコンストラクタとして使用できます。new 演算子をコンストラクタ関数とともに使用することで、新しいオブジェクトを作成します。<br>
<a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Guide/Details_of_the_Object_Model#Defining_a_class" rel="nofollow noopener" target="_blank">クラスの定義 - オブジェクトモデルの詳細 - MDN</a></p>
</blockquote>

<p>なお、慣習として、コンストラクタとして使う関数は、通常の関数と区別するため、大文字で始める。</p>

<h2>
<span id="継承とプロトタイプチェーン" class="fragment"></span><a href="#%E7%B6%99%E6%89%BF%E3%81%A8%E3%83%97%E3%83%AD%E3%83%88%E3%82%BF%E3%82%A4%E3%83%97%E3%83%81%E3%82%A7%E3%83%BC%E3%83%B3"><i class="fa fa-link"></i></a>継承とプロトタイプチェーン</h2>

<p>クラスの継承はプロトタイプチェーンという概念によって実現される。</p>

<blockquote>
<div class="code-frame" data-lang="javascript"><div class="highlight"><pre><span></span><span class="c1">// Object.prototype のプロトタイプは null です。</span>
<span class="c1">// o ---&gt; Object.prototype ---&gt; null</span>
<span class="kd">var</span> <span class="nx">o</span> <span class="o">=</span> <span class="p">{</span><span class="nx">a</span><span class="o">:</span> <span class="mi">1</span><span class="p">};</span>

<span class="c1">// 配列は Array.prototype（indexOf、forEachなどのようなメソッドを持っている）から継承します。 </span>
<span class="c1">// a ---&gt; Array.prototype ---&gt; Object.prototype ---&gt; null</span>
<span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"yo"</span><span class="p">,</span> <span class="s2">"whadup"</span><span class="p">,</span> <span class="s2">"?"</span><span class="p">];</span>

<span class="c1">// 関数は Function.prototype（call、bindなどのようなメソッドを持つ）から継承します。</span>
<span class="c1">// f ---&gt; Function.prototype ---&gt; Object.prototype ---&gt; null</span>
<span class="kd">function</span> <span class="nx">f</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="mi">2</span><span class="p">;</span>
<span class="p">}</span>
</pre></div></div>

<p><a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Guide/Inheritance_and_the_prototype_chain" rel="nofollow noopener" target="_blank">継承とプロトタイプチェーン - MDN</a></p>
</blockquote>

<h2>
<span id="this-について" class="fragment"></span><a href="#this-%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6"><i class="fa fa-link"></i></a>this について</h2>

<p>プロトタイプベースだということで、問題になりやすいのがthisが何を指すか。<br>
Qiita上でお二方が、thisは4種類あるよと書いてくれている。それぞれ比較するとわかりやすかった。</p>

<ul>
<li><a href="http://qiita.com/Haru39/items/9935ce476a17d6258e27" id="reference-6a94fb63dfa78053b934">JavaScriptの「this」は「4種類」？？ by Haru39</a></li>
<li><a href="http://qiita.com/vvakame/items/74005adacc0e8e2a3cab" id="reference-864c48773dd272448d97">JavaScriptのthisの覚え方 by vvakame</a></li>
</ul>

<p>完全におんなじことを書いているわけではないが、だいたい同じことを書いている。せっかくなので対応表を書いておく。</p>

<table>
<thead>
<tr>
<th style="text-align: center">Haru39流</th>
<th style="text-align: center">vvakame流</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center">メソッド呼び出しパターン</td>
<td style="text-align: center">何かに所属している時のthis</td>
</tr>
<tr>
<td style="text-align: center">関数呼び出しパターン</td>
<td style="text-align: center">トップレベルのthis</td>
</tr>
<tr>
<td style="text-align: center">コンストラクタ呼び出しパターン</td>
<td style="text-align: center">コンストラクタ内のthis</td>
</tr>
<tr>
<td style="text-align: center">apply,call呼び出しパターン</td>
<td style="text-align: center">function#apply とか function#call とかで無理矢理変えられた時のthis</td>
</tr>
</tbody>
</table>

<p>このあと、<a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Operators/this" rel="nofollow noopener" target="_blank">MDNのthisの説明</a>も読むといいかも。</p>

<ul>
<li>apply, callの時(4つ目)は明示的にObject、</li>
<li>メソッドの時(1つ目)は暗黙的にObjectを指して、</li>
<li>それ以外(2つ目)はグローバルオブジェクトになる。</li>
<li>newを使ったコンストラクタのthis(3つ目)については触れられてない
(thisではなく<a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Operators/new" rel="nofollow noopener" target="_blank">newの説明</a>に書いてある)。</li>
</ul>
</div>
	</td>
</tr>
</table>
<br />
<table border="1" style="height:150px;">
<tr>
	<td rowspan="3">91位</td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="thumb-up-120px.png" /></i>677</kbd>
		<a target="_blank" href="https://qiita.com/y_uuki/items/dd4fce78b1bc32b64600">パフォーマンス監視サービスのNew Relicが超便利な件</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2012-09-01<br />14:04:49</center>
	</td>
	<td style="width:200px;">
		<!--投稿者-->
		<center>
			@<a href="user/80.html">y_uuki</a>(1件の記事)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/80/profile-images/1473683854">
		</center>
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Rails]</b> <b>[Heroku]</b> <b>[AdventCalendar]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<!--
		<div style="width:350px;height:150px;overflow:scroll;">%s</div>
		-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><blockquote>
<p>12/09/05 監視対象のWebサービスのURLを間違えていたため修正しました</p>
</blockquote>

<p>RailsのAdvent Calendarを待ちわびていました．<br>
今回は，<a href="http://gihyo.jp/magazine/wdpress/archive/2012/vol70" rel="nofollow noopener" target="_blank">WEB+DBの最新号</a>のRails高速化記事で紹介されていたパフォーマンス監視サービスのNew Relicを使ってみた話です．</p>

<p><a href="http://newrelic.com/" rel="nofollow noopener" target="_blank">New Relic</a>は．newrelic_rpmというgemをインストールすることにより，レスポンスタイムやスロークエリなど，パフォーマンスに関するさまざまな統計情報をNew Relicのサイトでみることができます．</p>

<p>Railsに限らずPythonやJavaなどいろいろな言語に対応しているようです．<br>
さらに，HerokuやDotCloudなどのPaaSにも対応していてやばい．</p>

<h2>
<span id="herokuのnew-relicプラグイン" class="fragment"></span><a href="#heroku%E3%81%AEnew-relic%E3%83%97%E3%83%A9%E3%82%B0%E3%82%A4%E3%83%B3"><i class="fa fa-link"></i></a>HerokuのNew Relicプラグイン</h2>

<p>Herokuにホストしたアプリケーションを監視するためには<a href="https://addons.heroku.com/newrelic" rel="nofollow noopener" target="_blank">New Relicプラグイン</a>を導入する必要があります．<br>
導入の手順はこちら(<a href="https://devcenter.heroku.com/articles/newrelic" class="autolink" rel="nofollow noopener" target="_blank">https://devcenter.heroku.com/articles/newrelic</a>)</p>

<p>New Relicプラグインには無料版と有料版があり，有料版のほうがデータの保存期間が長かったり，発行されたSQL文やEXPLAINの出力が見れたりするようです．<br>
個人的には無料版で十分でした．</p>

<p>以下では7月に公開した<a href="http://daily-coding.herokuapp.com" rel="nofollow noopener" target="_blank">DailyCoding</a>というサービスを監視対象としています．</p>

<h3>
<span id="dailycodingの環境" class="fragment"></span><a href="#dailycoding%E3%81%AE%E7%92%B0%E5%A2%83"><i class="fa fa-link"></i></a>DailyCodingの環境</h3>

<ul>
<li>Rails 3.2.8</li>
<li>Unicorn</li>
<li>Heroku（無料）</li>
<li>100PV/日（弱小）</li>
<li>1テーブルのエントリ数はせいぜい数百個（弱小）</li>
</ul>

<p>では，New Relicの主要なグラフを順番にみていきます．</p>

<h2>
<span id="ブラウザのページロード時間の内訳" class="fragment"></span><a href="#%E3%83%96%E3%83%A9%E3%82%A6%E3%82%B6%E3%81%AE%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AD%E3%83%BC%E3%83%89%E6%99%82%E9%96%93%E3%81%AE%E5%86%85%E8%A8%B3"><i class="fa fa-link"></i></a>ブラウザのページロード時間の内訳</h2>

<p><a href="https://camo.qiitausercontent.com/d19a1b0f9ece9ae95fdf86bcb000ef4c3dacdbcf/687474703a2f2f63646e2d616b2e662e73742d686174656e612e636f6d2f696d616765732f666f746f6c6966652f792f795f75756b692f32303132303833312f32303132303833313138313531345f6f726967696e616c2e706e673f31333436343035303031" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/d19a1b0f9ece9ae95fdf86bcb000ef4c3dacdbcf/687474703a2f2f63646e2d616b2e662e73742d686174656e612e636f6d2f696d616765732f666f746f6c6966652f792f795f75756b692f32303132303833312f32303132303833313138313531345f6f726967696e616c2e706e673f31333436343035303031" alt="ブラウザ" data-canonical-src="http://cdn-ak.f.st-hatena.com/images/fotolife/y/y_uuki/20120831/20120831181514_original.png?1346405001"></a></p>

<p>ブラウザのページロード時間 = Webアプリケーション処理時間 + ブラウザ-Webアプリケーションサーバ間のネットワーク時間<br>
   + ブラウザのDOMの構築時間 + ブラウザのページレンダリング時間<br>
となります．<br>
明らかに通信時間がボトルネックであることがわかります．(DOM構築時間もそこそこ時間かかってる)<br>
Herokuの東京リージョンまだー</p>

<h2>
<span id="webアプリケーションのレスポンスタイム内訳" class="fragment"></span><a href="#web%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E3%81%AE%E3%83%AC%E3%82%B9%E3%83%9D%E3%83%B3%E3%82%B9%E3%82%BF%E3%82%A4%E3%83%A0%E5%86%85%E8%A8%B3"><i class="fa fa-link"></i></a>Webアプリケーションのレスポンスタイム内訳</h2>

<p><a href="https://camo.qiitausercontent.com/b784f84587febd710ffb6444f48d3b823d9e9055/687474703a2f2f63646e2d616b2e662e73742d686174656e612e636f6d2f696d616765732f666f746f6c6966652f792f795f75756b692f32303132303833312f32303132303833313138313531325f6f726967696e616c2e706e673f31333436343034373435" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/b784f84587febd710ffb6444f48d3b823d9e9055/687474703a2f2f63646e2d616b2e662e73742d686174656e612e636f6d2f696d616765732f666f746f6c6966652f792f795f75756b692f32303132303833312f32303132303833313138313531325f6f726967696e616c2e706e673f31333436343034373435" alt="APサーバ" data-canonical-src="http://cdn-ak.f.st-hatena.com/images/fotolife/y/y_uuki/20120831/20120831181512_original.png?1346404745"></a></p>

<p>Ruby(Railsによるルーティング処理とかコントローラの処理とか)，DBおよびWeb External（外部サイトへのリクエスト時間）などの処理時間の合計がWebアプリケーションとしてのレスポンスタイムとなります．<br>
DBの処理時間が支配的なことがわかります．</p>

<h2>
<span id="dbのレスポンスタイム内訳" class="fragment"></span><a href="#db%E3%81%AE%E3%83%AC%E3%82%B9%E3%83%9D%E3%83%B3%E3%82%B9%E3%82%BF%E3%82%A4%E3%83%A0%E5%86%85%E8%A8%B3"><i class="fa fa-link"></i></a>DBのレスポンスタイム内訳</h2>

<p>下の図はActiveRecordのクエリごとのレスポンスタイムを示しています．(正確には縦軸はレスポンスタイムではなく，トータルのDB時間のうちの当該クエリのレスポンスタイムの割合．多分，グラフをカスタムすれば縦軸をレスポンスタイムにできる？）</p>

<p><a href="https://camo.qiitausercontent.com/9a32beabc16b36361f6970a35fa03851747603bf/687474703a2f2f63646e2d616b2e662e73742d686174656e612e636f6d2f696d616765732f666f746f6c6966652f792f795f75756b692f32303132303833312f32303132303833313138333134335f6f726967696e616c2e706e673f31333436343035353136" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/9a32beabc16b36361f6970a35fa03851747603bf/687474703a2f2f63646e2d616b2e662e73742d686174656e612e636f6d2f696d616765732f666f746f6c6966652f792f795f75756b692f32303132303833312f32303132303833313138333134335f6f726967696e616c2e706e673f31333436343035353136" alt="DB" data-canonical-src="http://cdn-ak.f.st-hatena.com/images/fotolife/y/y_uuki/20120831/20120831183143_original.png?1346405516"></a></p>

<h2>
<span id="railsのコントローラのレスポンスタイム内訳" class="fragment"></span><a href="#rails%E3%81%AE%E3%82%B3%E3%83%B3%E3%83%88%E3%83%AD%E3%83%BC%E3%83%A9%E3%81%AE%E3%83%AC%E3%82%B9%E3%83%9D%E3%83%B3%E3%82%B9%E3%82%BF%E3%82%A4%E3%83%A0%E5%86%85%E8%A8%B3"><i class="fa fa-link"></i></a>Railsのコントローラのレスポンスタイム内訳</h2>

<p><a href="https://camo.qiitausercontent.com/5f64bca24d65272704142825bae2ca1fb853b6e8/687474703a2f2f63646e2d616b2e662e73742d686174656e612e636f6d2f696d616765732f666f746f6c6966652f792f795f75756b692f32303132303833312f32303132303833313138313531335f6f726967696e616c2e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/5f64bca24d65272704142825bae2ca1fb853b6e8/687474703a2f2f63646e2d616b2e662e73742d686174656e612e636f6d2f696d616765732f666f746f6c6966652f792f795f75756b692f32303132303833312f32303132303833313138313531335f6f726967696e616c2e706e67" alt="コントローラ" data-canonical-src="http://cdn-ak.f.st-hatena.com/images/fotolife/y/y_uuki/20120831/20120831181513_original.png"></a></p>

<h2>
<span id="その他" class="fragment"></span><a href="#%E3%81%9D%E3%81%AE%E4%BB%96"><i class="fa fa-link"></i></a>その他</h2>

<ul>
<li>他にもいろいろなデータ</li>
<li>各グラフのうち，自分に必要なものだけを選んで一覧できる機能</li>
<li>パフォーマンスだけでなくサーバエラーの監視</li>
<li>週ごとのサマリーやアラートのメールによる通知</li>
<li>データを日単位もしくは週単位で比較</li>
<li>把握できていない機能が他にもいろいろありそう．</li>
</ul>

<h2>
<span id="まとめ" class="fragment"></span><a href="#%E3%81%BE%E3%81%A8%E3%82%81"><i class="fa fa-link"></i></a>まとめ</h2>

<p>New Relicのおかげでボトルネックがネットワーク時間であることがわかりました．<br>
このボトルネックを排除するためには，転送するファイルの数およびサイズを減らす必要がありそうです，<br>
なるべくブラウザ側でコンテンツをキャッシュさせたり，ファイルを圧縮したり...<br>
アプリケーション側でキャッシュするとかSQLクエリの発行回数を減らすとかしてもあんまり意味なかったんや．</p>

<p>というわけでNew Relic便利！</p>

<p>明日の担当は<a href="http://qiita.com/users/puriketu99">@puriketu99</a>さんです．<br>
よろしくおねがいします．</p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1" style="height:150px;">
<tr>
	<td rowspan="3">92位</td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="thumb-up-120px.png" /></i>676</kbd>
		<a target="_blank" href="https://qiita.com/grapswiz/items/1e48815f8b6c921c2f1c">意外と知らないChrome Developer Toolsの便利な機能</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-06-21<br />01:03:44</center>
	</td>
	<td style="width:200px;">
		<!--投稿者-->
		<center>
			@<a href="user/15757.html">grapswiz</a>(13件の記事)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/15757/profile-images/1473681678">
		</center>
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Chrome]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<!--
		<div style="width:350px;height:150px;overflow:scroll;">%s</div>
		-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>参考資料がすべて英語なので、日本語で情報がまとまってる場所が欲しいと思いこの記事を作りました。「俺もっと便利な機能知ってるぜ！」「こういうことできないの？」って思った人はコメント/編集リクエストをくれると僕の幸せのステージがどんどん上がります。</p>

<h2>
<span id="devtoolsの起動するショートカットキーは" class="fragment"></span><a href="#devtools%E3%81%AE%E8%B5%B7%E5%8B%95%E3%81%99%E3%82%8B%E3%82%B7%E3%83%A7%E3%83%BC%E3%83%88%E3%82%AB%E3%83%83%E3%83%88%E3%82%AD%E3%83%BC%E3%81%AF"><i class="fa fa-link"></i></a>DevToolsの起動するショートカットキーは？</h2>

<h3>
<span id="開くだけ" class="fragment"></span><a href="#%E9%96%8B%E3%81%8F%E3%81%A0%E3%81%91"><i class="fa fa-link"></i></a>開くだけ</h3>

<p>F12, Ctrl + Shift + I (Win, Linux)<br>
Opt + Cmd + I (Mac)</p>

<h3>
<span id="要素の検証inspect-elementと同じ状態で開く" class="fragment"></span><a href="#%E8%A6%81%E7%B4%A0%E3%81%AE%E6%A4%9C%E8%A8%BCinspect-element%E3%81%A8%E5%90%8C%E3%81%98%E7%8A%B6%E6%85%8B%E3%81%A7%E9%96%8B%E3%81%8F"><i class="fa fa-link"></i></a>要素の検証(Inspect Element)と同じ状態で開く</h3>

<p>Ctrl + Shift + C (Win, Linux)<br>
Shift + Cmd + C (Mac)</p>

<h3>
<span id="consoleタブが開いた状態で開く" class="fragment"></span><a href="#console%E3%82%BF%E3%83%96%E3%81%8C%E9%96%8B%E3%81%84%E3%81%9F%E7%8A%B6%E6%85%8B%E3%81%A7%E9%96%8B%E3%81%8F"><i class="fa fa-link"></i></a>Consoleタブが開いた状態で開く</h3>

<p>Ctrl + Shift + J (Win, Linux)<br>
Opt + Cmd + J (Mac)</p>

<h2>
<span id="devtoolsって下じゃなくて右に持ってこれないの" class="fragment"></span><a href="#devtools%E3%81%A3%E3%81%A6%E4%B8%8B%E3%81%98%E3%82%83%E3%81%AA%E3%81%8F%E3%81%A6%E5%8F%B3%E3%81%AB%E6%8C%81%E3%81%A3%E3%81%A6%E3%81%93%E3%82%8C%E3%81%AA%E3%81%84%E3%81%AE"><i class="fa fa-link"></i></a>DevToolsって下じゃなくて右に持ってこれないの？</h2>

<p>Dock To Right<br>
<a href="https://camo.qiitausercontent.com/ac5df1d05203f6d153a20425d1b73835a3826079/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f31353735372f31353539393463322d313032652d653534362d386366392d3531653161373333313661642e676966" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/ac5df1d05203f6d153a20425d1b73835a3826079/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f31353735372f31353539393463322d313032652d653534362d386366392d3531653161373333313661642e676966" alt="docktoright.gif" title="docktoright.gif" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/15757/155994c2-102e-e546-8cf9-51e1a73316ad.gif"></a></p>

<h2>
<span id="名前が分かってるファイルを開きたい" class="fragment"></span><a href="#%E5%90%8D%E5%89%8D%E3%81%8C%E5%88%86%E3%81%8B%E3%81%A3%E3%81%A6%E3%82%8B%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%82%92%E9%96%8B%E3%81%8D%E3%81%9F%E3%81%84"><i class="fa fa-link"></i></a>名前が分かってるファイルを開きたい</h2>

<p>Ctrl + O (Win, Linux)<br>
Cmd + O (Mac)<br>
<a href="https://camo.qiitausercontent.com/4ffbeebe8811a8d3763171d7f7520f06db63b1e6/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f31353735372f38623165663431322d663836382d353962382d336665622d3265613134623335336561392e676966" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/4ffbeebe8811a8d3763171d7f7520f06db63b1e6/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f31353735372f38623165663431322d663836382d353962382d336665622d3265613134623335336561392e676966" alt="openfile.gif" title="openfile.gif" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/15757/8b1ef412-f868-59b8-3feb-2ea14b353ea9.gif"></a></p>

<h2>
<span id="devtools上で編集したコードを保存" class="fragment"></span><a href="#devtools%E4%B8%8A%E3%81%A7%E7%B7%A8%E9%9B%86%E3%81%97%E3%81%9F%E3%82%B3%E3%83%BC%E3%83%89%E3%82%92%E4%BF%9D%E5%AD%98"><i class="fa fa-link"></i></a>DevTools上で編集したコードを保存</h2>

<p>（あとで書く）</p>

<h2>
<span id="devtools上でいろいろ編集したけどどこをどう変えたかわかんなくなっちゃった" class="fragment"></span><a href="#devtools%E4%B8%8A%E3%81%A7%E3%81%84%E3%82%8D%E3%81%84%E3%82%8D%E7%B7%A8%E9%9B%86%E3%81%97%E3%81%9F%E3%81%91%E3%81%A9%E3%81%A9%E3%81%93%E3%82%92%E3%81%A9%E3%81%86%E5%A4%89%E3%81%88%E3%81%9F%E3%81%8B%E3%82%8F%E3%81%8B%E3%82%93%E3%81%AA%E3%81%8F%E3%81%AA%E3%81%A3%E3%81%A1%E3%82%83%E3%81%A3%E3%81%9F"><i class="fa fa-link"></i></a>DevTools上でいろいろ編集したけどどこをどう変えたかわかんなくなっちゃった</h2>

<p>Local Modifications系<br>
（あとで書く）</p>

<h2>
<span id="webページ上の今いるファイル内検索" class="fragment"></span><a href="#web%E3%83%9A%E3%83%BC%E3%82%B8%E4%B8%8A%E3%81%AE%E4%BB%8A%E3%81%84%E3%82%8B%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E5%86%85%E6%A4%9C%E7%B4%A2"><i class="fa fa-link"></i></a>Webページ上の今いるファイル内検索</h2>

<p>Ctrl + F (Win, Linux)<br>
Cmd + F (Mac)</p>

<h2>
<span id="webページ上のすべてのファイルを横断検索" class="fragment"></span><a href="#web%E3%83%9A%E3%83%BC%E3%82%B8%E4%B8%8A%E3%81%AE%E3%81%99%E3%81%B9%E3%81%A6%E3%81%AE%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%82%92%E6%A8%AA%E6%96%AD%E6%A4%9C%E7%B4%A2"><i class="fa fa-link"></i></a>Webページ上のすべてのファイルを横断検索</h2>

<p>Ctrl + Shift + F (Win, Linux)<br>
Cmd + Opt + F (Mac)</p>

<h2>
<span id="ページを行き来してもnetworkタブで表示しているリクエストのリストを保持し続けたい" class="fragment"></span><a href="#%E3%83%9A%E3%83%BC%E3%82%B8%E3%82%92%E8%A1%8C%E3%81%8D%E6%9D%A5%E3%81%97%E3%81%A6%E3%82%82network%E3%82%BF%E3%83%96%E3%81%A7%E8%A1%A8%E7%A4%BA%E3%81%97%E3%81%A6%E3%81%84%E3%82%8B%E3%83%AA%E3%82%AF%E3%82%A8%E3%82%B9%E3%83%88%E3%81%AE%E3%83%AA%E3%82%B9%E3%83%88%E3%82%92%E4%BF%9D%E6%8C%81%E3%81%97%E7%B6%9A%E3%81%91%E3%81%9F%E3%81%84"><i class="fa fa-link"></i></a>ページを行き来してもNetworkタブで表示しているリクエストのリストを保持し続けたい</h2>

<p>NetworkタブではHTTPリクエストが表示されるが、ページのリロードがかかるとこの内容がクリアされてしまう。「Preserve Log upon Navigation」ボタンを押すと、もう一度押すまでの間のHTTPリクエストを、たとえリロードがかかっても、どんどん貯めることができる。</p>

<h2>
<span id="domエレメントに簡単アクセス" class="fragment"></span><a href="#dom%E3%82%A8%E3%83%AC%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AB%E7%B0%A1%E5%8D%98%E3%82%A2%E3%82%AF%E3%82%BB%E3%82%B9"><i class="fa fa-link"></i></a>DOMエレメントに簡単アクセス</h2>

<p><a href="https://camo.qiitausercontent.com/0eff170392d3db2fce5bf551948f87933a28d851/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3135332f61316333373164612d316263362d363438632d373064652d3066363437366234323461342e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/0eff170392d3db2fce5bf551948f87933a28d851/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3135332f61316333373164612d316263362d363438632d373064652d3066363437366234323461342e706e67" alt="Screen_Shot_2013-07-04_at_6.06.00_PM.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/153/a1c371da-1bc6-648c-70de-0f6476b424a4.png"></a></p>

<p>コンソールで一時的に何かをしたいときに、DOMエレメントにいちいち <code>getElementById</code> とかでアクセスするのは非常に面倒です（idやclassが割り振られていない場合などは特に）</p>

<p>DevToolsでは選択している要素に <code>$0</code> でアクセスすることができます。また、選択要素を変更した場合も <code>$N</code> でNつ前に選択していた要素にアクセスできます。</p>

<h2>
<span id="参考資料" class="fragment"></span><a href="#%E5%8F%82%E8%80%83%E8%B3%87%E6%96%99"><i class="fa fa-link"></i></a>参考資料</h2>

<ul>
<li><a href="https://developers.google.com/chrome-developer-tools/" class="autolink" rel="nofollow noopener" target="_blank">https://developers.google.com/chrome-developer-tools/</a></li>
<li><a href="http://anti-code.com/devtools-cheatsheet/" class="autolink" rel="nofollow noopener" target="_blank">http://anti-code.com/devtools-cheatsheet/</a></li>
<li><a href="http://www.youtube.com/watch?v=bqfoYaKCYUI&amp;list=SP055Epbe6d5avZGXwE5u039VQq_oQFgrc&amp;index=5" class="autolink" rel="nofollow noopener" target="_blank">http://www.youtube.com/watch?v=bqfoYaKCYUI&amp;list=SP055Epbe6d5avZGXwE5u039VQq_oQFgrc&amp;index=5</a></li>
</ul>
</div>
	</td>
</tr>
</table>
<br />
<table border="1" style="height:150px;">
<tr>
	<td rowspan="3">93位</td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="thumb-up-120px.png" /></i>673</kbd>
		<a target="_blank" href="https://qiita.com/uasi/items/61dc9df0013c5c65822e">Objective-C のコードレビューチェックリスト</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-05-30<br />00:51:04</center>
	</td>
	<td style="width:200px;">
		<!--投稿者-->
		<center>
			@<a href="user/735.html">uasi</a>(117件の記事)<br />(Increments 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/735/profile-images/1473681692">
		</center>
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Objective-C]</b> <b>[Mac]</b> <b>[Xcode]</b> <b>[iOS]</b> <b>[Cocoa]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<!--
		<div style="width:350px;height:150px;overflow:scroll;">%s</div>
		-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;">
<h1>
<span id="はじめに" class="fragment"></span><a href="#%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB"><i class="fa fa-link"></i></a>はじめに</h1>

<p>本稿は Juri Pakaste 氏による <a href="https://bitbucket.org/juri/cocoareviewchecklist" rel="nofollow noopener" target="_blank">Cocoa review checklist</a> (commit <a href="https://bitbucket.org/juri/cocoareviewchecklist/src/fff5703c96ed7676d44e5935ed070c62134e4d97" rel="nofollow noopener" target="_blank">fff5703</a>)の翻訳です。他人の Objective-C のコードをレビューするとき注意する点、また普段のコーディングで心がけるべき点についてまとめられています。</p>

<p>なお、原文のタイトルは Cocoa review checklist となっていますが、内容が Cocoa に限らない範囲のトピックをカバーしているため、本稿のタイトルは「Objective-C の〜」としました。</p>

<p>誤訳の指摘や例の補足を歓迎します。</p>

<h1>
<span id="コードレビューチェックリスト" class="fragment"></span><a href="#%E3%82%B3%E3%83%BC%E3%83%89%E3%83%AC%E3%83%93%E3%83%A5%E3%83%BC%E3%83%81%E3%82%A7%E3%83%83%E3%82%AF%E3%83%AA%E3%82%B9%E3%83%88"><i class="fa fa-link"></i></a>コードレビューチェックリスト</h1>

<h2>
<span id="コードの見た目とコード以外の問題" class="fragment"></span><a href="#%E3%82%B3%E3%83%BC%E3%83%89%E3%81%AE%E8%A6%8B%E3%81%9F%E7%9B%AE%E3%81%A8%E3%82%B3%E3%83%BC%E3%83%89%E4%BB%A5%E5%A4%96%E3%81%AE%E5%95%8F%E9%A1%8C"><i class="fa fa-link"></i></a>コードの見た目とコード以外の問題</h2>

<h3>
<span id="不要な-import-や-class-宣言を消す" class="fragment"></span><a href="#%E4%B8%8D%E8%A6%81%E3%81%AA-import-%E3%82%84-class-%E5%AE%A3%E8%A8%80%E3%82%92%E6%B6%88%E3%81%99"><i class="fa fa-link"></i></a>不要な <code>#import</code> や <code>@class</code> 宣言を消す</h3>

<h3>
<span id="import-をソートする" class="fragment"></span><a href="#import-%E3%82%92%E3%82%BD%E3%83%BC%E3%83%88%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a><code>#import</code> をソートする</h3>

<p><code>.m</code> ファイルの中では、対応する <code>.h</code> ファイルの <code>#import</code> を最初の行に書く。空行をはさんで、ソートされた他の <code>#import</code> を書く。</p>

<h3>
<span id="xcode-のグループをソートする" class="fragment"></span><a href="#xcode-%E3%81%AE%E3%82%B0%E3%83%AB%E3%83%BC%E3%83%97%E3%82%92%E3%82%BD%E3%83%BC%E3%83%88%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>Xcode のグループをソートする</h3>

<p>Xcode のプロジェクトツリーをソートされた状態に保つ。</p>

<h3>
<span id="メソッドをうまく並べる" class="fragment"></span><a href="#%E3%83%A1%E3%82%BD%E3%83%83%E3%83%89%E3%82%92%E3%81%86%E3%81%BE%E3%81%8F%E4%B8%A6%E3%81%B9%E3%82%8B"><i class="fa fa-link"></i></a>メソッドをうまく並べる</h3>

<p>メソッドを合理的に並べる。<code>#pragma mark</code> でメソッドをグルーピングする。</p>

<p>訳注： <code>#pragma mark MarkName</code> ディレクティブを記述すると、 Xcode のメソッド一覧に <code>MarkName</code> が表示される。 <code>#pragma mark -</code> でメソッド一覧に分割線を挿入できる。</p>

<h3>
<span id="コンパイラ警告をなくす" class="fragment"></span><a href="#%E3%82%B3%E3%83%B3%E3%83%91%E3%82%A4%E3%83%A9%E8%AD%A6%E5%91%8A%E3%82%92%E3%81%AA%E3%81%8F%E3%81%99"><i class="fa fa-link"></i></a>コンパイラ警告をなくす</h3>

<p><code>-Werror</code> （少なくともリリースビルドでは）と他の警告フラグを有効にする。</p>

<h3>
<span id="静的解析の警告をなくす" class="fragment"></span><a href="#%E9%9D%99%E7%9A%84%E8%A7%A3%E6%9E%90%E3%81%AE%E8%AD%A6%E5%91%8A%E3%82%92%E3%81%AA%E3%81%8F%E3%81%99"><i class="fa fa-link"></i></a>静的解析の警告をなくす</h3>

<h3>
<span id="標準のスタイルに合わせてコードをフォーマットする" class="fragment"></span><a href="#%E6%A8%99%E6%BA%96%E3%81%AE%E3%82%B9%E3%82%BF%E3%82%A4%E3%83%AB%E3%81%AB%E5%90%88%E3%82%8F%E3%81%9B%E3%81%A6%E3%82%B3%E3%83%BC%E3%83%89%E3%82%92%E3%83%95%E3%82%A9%E3%83%BC%E3%83%9E%E3%83%83%E3%83%88%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>標準のスタイルに合わせてコードをフォーマットする</h3>

<p>プロジェクト内で一貫したコーディングスタイルを定め、それに従う。 <a href="http://clang.llvm.org/docs/ClangFormat.html" rel="nofollow noopener" target="_blank">clang-format</a> や <a href="http://uncrustify.sourceforge.net" rel="nofollow noopener" target="_blank">Uncrustify</a> などのフォーマッタを使うことにしたなら、レビュー前にそれが実行されているか確かめる。</p>

<h3>
<span id="スペルと文法" class="fragment"></span><a href="#%E3%82%B9%E3%83%9A%E3%83%AB%E3%81%A8%E6%96%87%E6%B3%95"><i class="fa fa-link"></i></a>スペルと文法</h3>

<p>文法の委細にこだわる必要はないが、明らかな誤字や文法の誤りは残さないようにする。</p>

<h3>
<span id="xcconfig-を使うならプロジェクトのビルド設定を変更しない" class="fragment"></span><a href="#xcconfig-%E3%82%92%E4%BD%BF%E3%81%86%E3%81%AA%E3%82%89%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AE%E3%83%93%E3%83%AB%E3%83%89%E8%A8%AD%E5%AE%9A%E3%82%92%E5%A4%89%E6%9B%B4%E3%81%97%E3%81%AA%E3%81%84"><i class="fa fa-link"></i></a>xcconfig を使うならプロジェクトのビルド設定を変更しない</h3>

<p>訳注：ビルド設定は、プロジェクト内に記述するほか、 xcconfig という外部ファイルにも書くことができる。 xcconfig を使うことにしたなら、ビルド設定は一貫してそちらに記述する。</p>

<h3>
<span id="画像は正しいサイズで最適化もかける" class="fragment"></span><a href="#%E7%94%BB%E5%83%8F%E3%81%AF%E6%AD%A3%E3%81%97%E3%81%84%E3%82%B5%E3%82%A4%E3%82%BA%E3%81%A7%E6%9C%80%E9%81%A9%E5%8C%96%E3%82%82%E3%81%8B%E3%81%91%E3%82%8B"><i class="fa fa-link"></i></a>画像は正しいサイズで、最適化もかける</h3>

<p><a href="http://imageoptim.com" rel="nofollow noopener" target="_blank">ImageOptim</a> などの画像最適化ツールを使う。画像が最適化されているかどうかレビュアーが判別できないときは、画像を追加した人に確認する。または、問題が起きる可能性もあるが、最適化ツールを自分で走らせてみる。</p>

<h3>
<span id="すべての画像に等倍と2倍の解像度のバージョンを用意する" class="fragment"></span><a href="#%E3%81%99%E3%81%B9%E3%81%A6%E3%81%AE%E7%94%BB%E5%83%8F%E3%81%AB%E7%AD%89%E5%80%8D%E3%81%A82%E5%80%8D%E3%81%AE%E8%A7%A3%E5%83%8F%E5%BA%A6%E3%81%AE%E3%83%90%E3%83%BC%E3%82%B8%E3%83%A7%E3%83%B3%E3%82%92%E7%94%A8%E6%84%8F%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>すべての画像に等倍と2倍の解像度のバージョンを用意する</h3>

<p>2倍のバージョンは縦横のサイズが正しく元の2倍になるようにする。</p>

<h2>
<span id="テスト" class="fragment"></span><a href="#%E3%83%86%E3%82%B9%E3%83%88"><i class="fa fa-link"></i></a>テスト</h2>

<h3>
<span id="失敗するテストがないようにする" class="fragment"></span><a href="#%E5%A4%B1%E6%95%97%E3%81%99%E3%82%8B%E3%83%86%E3%82%B9%E3%83%88%E3%81%8C%E3%81%AA%E3%81%84%E3%82%88%E3%81%86%E3%81%AB%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>失敗するテストがないようにする</h3>

<h3>
<span id="ビジネスロジックのユニットテスト" class="fragment"></span><a href="#%E3%83%93%E3%82%B8%E3%83%8D%E3%82%B9%E3%83%AD%E3%82%B8%E3%83%83%E3%82%AF%E3%81%AE%E3%83%A6%E3%83%8B%E3%83%83%E3%83%88%E3%83%86%E3%82%B9%E3%83%88"><i class="fa fa-link"></i></a>ビジネスロジックのユニットテスト</h3>

<p>プロジェクトにユニットテストを採用しているなら、少なくとも UI や IO に関係しない新規のコードにはテストが必要。</p>

<h3>
<span id="機能テスト" class="fragment"></span><a href="#%E6%A9%9F%E8%83%BD%E3%83%86%E3%82%B9%E3%83%88"><i class="fa fa-link"></i></a>機能テスト</h3>

<p>プロジェクトに <a href="https://github.com/joshaber/KIF" rel="nofollow noopener" target="_blank">KIF</a> などの機能テストを採用しているなら、 UI に関係する新規のコードにはテストが必要。</p>

<h2>
<span id="ドキュメンテーションとライセンス" class="fragment"></span><a href="#%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%86%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E3%81%A8%E3%83%A9%E3%82%A4%E3%82%BB%E3%83%B3%E3%82%B9"><i class="fa fa-link"></i></a>ドキュメンテーションとライセンス</h2>

<h3>
<span id="すべてのドキュメンテーションを現状のコードに一致させる" class="fragment"></span><a href="#%E3%81%99%E3%81%B9%E3%81%A6%E3%81%AE%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%86%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E3%82%92%E7%8F%BE%E7%8A%B6%E3%81%AE%E3%82%B3%E3%83%BC%E3%83%89%E3%81%AB%E4%B8%80%E8%87%B4%E3%81%95%E3%81%9B%E3%82%8B"><i class="fa fa-link"></i></a>すべてのドキュメンテーションを現状のコードに一致させる</h3>

<h3>
<span id="現状で依存しているライブラリのライセンスをソフトウェアライセンス表示画面に反映する" class="fragment"></span><a href="#%E7%8F%BE%E7%8A%B6%E3%81%A7%E4%BE%9D%E5%AD%98%E3%81%97%E3%81%A6%E3%81%84%E3%82%8B%E3%83%A9%E3%82%A4%E3%83%96%E3%83%A9%E3%83%AA%E3%81%AE%E3%83%A9%E3%82%A4%E3%82%BB%E3%83%B3%E3%82%B9%E3%82%92%E3%82%BD%E3%83%95%E3%83%88%E3%82%A6%E3%82%A7%E3%82%A2%E3%83%A9%E3%82%A4%E3%82%BB%E3%83%B3%E3%82%B9%E8%A1%A8%E7%A4%BA%E7%94%BB%E9%9D%A2%E3%81%AB%E5%8F%8D%E6%98%A0%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>現状で依存しているライブラリのライセンスを、ソフトウェアライセンス表示画面に反映する</h3>

<h3>
<span id="changelog-を更新する" class="fragment"></span><a href="#changelog-%E3%82%92%E6%9B%B4%E6%96%B0%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>Changelog を更新する</h3>

<p>変更点を Changelog ファイルに記録しているなら、バージョン管理システムのすべてのフィーチャーブランチで、そのブランチでの変更点を Changelog ファイルに残す。</p>

<h2>
<span id="cocoa-コーディング" class="fragment"></span><a href="#cocoa-%E3%82%B3%E3%83%BC%E3%83%87%E3%82%A3%E3%83%B3%E3%82%B0"><i class="fa fa-link"></i></a>Cocoa コーディング</h2>

<h3>
<span id="apple-の命名規約に従う" class="fragment"></span><a href="#apple-%E3%81%AE%E5%91%BD%E5%90%8D%E8%A6%8F%E7%B4%84%E3%81%AB%E5%BE%93%E3%81%86"><i class="fa fa-link"></i></a>Apple の命名規約に従う</h3>

<p>変数やメソッドの命名は Apple の <a href="https://developer.apple.com/library/mac/documentation/cocoa/conceptual/codingguidelines/CodingGuidelines.html#//apple_ref/doc/uid/10000146-SW1" rel="nofollow noopener" target="_blank">Coding Guidelines for Cocoa</a> に従うべきである。</p>

<h3>
<span id="メソッドの間接呼び出しデリゲートや通知は読みやすく" class="fragment"></span><a href="#%E3%83%A1%E3%82%BD%E3%83%83%E3%83%89%E3%81%AE%E9%96%93%E6%8E%A5%E5%91%BC%E3%81%B3%E5%87%BA%E3%81%97%E3%83%87%E3%83%AA%E3%82%B2%E3%83%BC%E3%83%88%E3%82%84%E9%80%9A%E7%9F%A5%E3%81%AF%E8%AA%AD%E3%81%BF%E3%82%84%E3%81%99%E3%81%8F"><i class="fa fa-link"></i></a>メソッドの間接呼び出し（デリゲートや通知）は読みやすく</h3>

<p>Cocoa にはメソッドを間接的に呼び出す手段がいくつかある。読みやすさの順に並べると：</p>

<ol>
<li>直接メソッドを呼ぶ</li>
<li>デリゲート</li>
<li><code>NSNotificationCenter</code></li>
<li>レスポンダチェイン</li>
<li>KVO</li>
<li>Cocoa バインディング</li>
</ol>

<p>リストの上にあるものほど読みやすいので、下のものより優先して使う。ただしメソッド間の結びつきを強くしすぎないこと。また一貫性に気を配る。</p>

<h3>
<span id="スレッドよりもキューを使う" class="fragment"></span><a href="#%E3%82%B9%E3%83%AC%E3%83%83%E3%83%89%E3%82%88%E3%82%8A%E3%82%82%E3%82%AD%E3%83%A5%E3%83%BC%E3%82%92%E4%BD%BF%E3%81%86"><i class="fa fa-link"></i></a>スレッドよりもキューを使う</h3>

<p>フレームワークがシングルスレッドからのアクセスを要求しているのでなければ、GCD や  <code>NSOperationQueue</code> を使う。</p>

<h3>
<span id="通知を送受信するスレッドにポリシーを設ける" class="fragment"></span><a href="#%E9%80%9A%E7%9F%A5%E3%82%92%E9%80%81%E5%8F%97%E4%BF%A1%E3%81%99%E3%82%8B%E3%82%B9%E3%83%AC%E3%83%83%E3%83%89%E3%81%AB%E3%83%9D%E3%83%AA%E3%82%B7%E3%83%BC%E3%82%92%E8%A8%AD%E3%81%91%E3%82%8B"><i class="fa fa-link"></i></a>通知を送受信するスレッドにポリシーを設ける</h3>

<p><code>NSNotificationCenter</code> はスレッド1つにつき1インスタンス作る。 <code>-defaultCenter</code> はメインスレッドからのみ使う。正しいスレッドで通知することを送信側の責任とする。</p>

<h3>
<span id="オブザーバを正しく登録登録解除する" class="fragment"></span><a href="#%E3%82%AA%E3%83%96%E3%82%B6%E3%83%BC%E3%83%90%E3%82%92%E6%AD%A3%E3%81%97%E3%81%8F%E7%99%BB%E9%8C%B2%E7%99%BB%E9%8C%B2%E8%A7%A3%E9%99%A4%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>オブザーバを正しく登録・登録解除する</h3>

<p>通知や KVO のオブザーバは必要に応じて登録し、不要になったら登録を解除する。とくに <code>-dealloc</code> の中で解除を忘れない。</p>

<h3>
<span id="イベントハンドラとロジックを分離する" class="fragment"></span><a href="#%E3%82%A4%E3%83%99%E3%83%B3%E3%83%88%E3%83%8F%E3%83%B3%E3%83%89%E3%83%A9%E3%81%A8%E3%83%AD%E3%82%B8%E3%83%83%E3%82%AF%E3%82%92%E5%88%86%E9%9B%A2%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>イベントハンドラとロジックを分離する</h3>

<p>通知のハンドラメソッドやアクションメソッドに複雑なロジックを書かない。</p>

<h3>
<span id="絶対にメインスレッドをブロックしない" class="fragment"></span><a href="#%E7%B5%B6%E5%AF%BE%E3%81%AB%E3%83%A1%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%AC%E3%83%83%E3%83%89%E3%82%92%E3%83%96%E3%83%AD%E3%83%83%E3%82%AF%E3%81%97%E3%81%AA%E3%81%84"><i class="fa fa-link"></i></a>絶対にメインスレッドをブロックしない</h3>

<p>ディスク IO やネットワーク IO 、複雑な計算処理がメインスレッドをブロックしないようにする。</p>

<h3>
<span id="nsstringfromenum--nsstringfromstruct-を使う" class="fragment"></span><a href="#nsstringfromenum--nsstringfromstruct-%E3%82%92%E4%BD%BF%E3%81%86"><i class="fa fa-link"></i></a>NSStringFromEnum / NSStringFromStruct を使う</h3>

<p>（未訳、<a href="http://www.juripakaste.fi/blog/nsstringify.html" rel="nofollow noopener" target="_blank">これ</a>のことか）</p>

<h3>
<span id="-description-メソッドを書く" class="fragment"></span><a href="#-description-%E3%83%A1%E3%82%BD%E3%83%83%E3%83%89%E3%82%92%E6%9B%B8%E3%81%8F"><i class="fa fa-link"></i></a><code>-description</code> メソッドを書く</h3>

<p>すべてのクラスは、デバッグに役立つ情報を <code>-description</code> メソッドで返すようにする。</p>

<h3>
<span id="オブジェクトの生成は最小限にし不要になったらすぐ解放する" class="fragment"></span><a href="#%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AE%E7%94%9F%E6%88%90%E3%81%AF%E6%9C%80%E5%B0%8F%E9%99%90%E3%81%AB%E3%81%97%E4%B8%8D%E8%A6%81%E3%81%AB%E3%81%AA%E3%81%A3%E3%81%9F%E3%82%89%E3%81%99%E3%81%90%E8%A7%A3%E6%94%BE%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>オブジェクトの生成は最小限にし、不要になったらすぐ解放する</h3>

<p>ループの中で一時オブジェクトを生成しているなら、それが本当に必要か考慮する。 <code>@autoreleasepool</code> に追加できないか検討する。</p>

<h3>
<span id="int-より-enum--enum-より-ns_enum" class="fragment"></span><a href="#int-%E3%82%88%E3%82%8A-enum--enum-%E3%82%88%E3%82%8A-ns_enum"><i class="fa fa-link"></i></a><code>int</code> より <code>enum</code> 、 <code>enum</code> より <code>NS_ENUM</code>
</h3>

<p>関連する整数値を列挙するなら、 <code>int</code> や <code>enum</code> より <code>NS_ENUM</code> マクロを使う。</p>

<p>訳注：例：</p>

<div class="code-frame" data-lang="objc"><div class="highlight"><pre><span></span><span class="k">typedef</span> <span class="nf">NS_ENUM</span><span class="p">(</span><span class="n">NSInteger</span><span class="p">,</span> <span class="n">MyEnum</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">MyEnumA</span><span class="p">,</span>
    <span class="n">MyEnumB</span><span class="p">,</span>
    <span class="n">MyEnumOther</span><span class="p">,</span>
<span class="p">};</span>

<span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">foo</span> <span class="p">{</span>
    <span class="n">MyEnum</span> <span class="n">myEnum</span> <span class="o">=</span> <span class="n">MyEnumA</span><span class="p">;</span>
<span class="p">}</span>
</pre></div></div>

<p>訳注： <code>NS_ENUM</code> で定義された列挙型の変数を <code>switch</code> 文で分岐すると、 <code>case</code> 節がすべての値を網羅しているかコンパイラがチェックしてくれる。</p>

<p>訳注：ビットマスクの定義には <code>int</code> より <code>NS_OPTIONS</code> を使うとよい：</p>

<div class="code-frame" data-lang="objc"><div class="highlight"><pre><span></span><span class="k">typedef</span> <span class="nf">NS_OPTIONS</span><span class="p">(</span><span class="n">NSInteger</span><span class="p">,</span> <span class="n">MyFlag</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">MyFlagNone</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">MyFlagA</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">MyFlagB</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="p">,</span>
<span class="p">};</span>
</pre></div></div>

<h3>
<span id="cocoa-の命名規約に従う" class="fragment"></span><a href="#cocoa-%E3%81%AE%E5%91%BD%E5%90%8D%E8%A6%8F%E7%B4%84%E3%81%AB%E5%BE%93%E3%81%86"><i class="fa fa-link"></i></a>Cocoa の命名規約に従う</h3>

<p>（未訳）</p>

<h3>
<span id="nonnull-属性" class="fragment"></span><a href="#nonnull-%E5%B1%9E%E6%80%A7"><i class="fa fa-link"></i></a><code>nonnull</code> 属性</h3>

<p><code>NULL</code> でないポインタを受け取る関数には <code>__attribute__((nonnull))</code> 属性をつける。</p>

<p>訳注：例：</p>

<div class="code-frame" data-lang="objc"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">foo</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">p</span><span class="p">)</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">nonnull</span><span class="p">))</span> <span class="p">{</span>
<span class="p">}</span>
</pre></div></div>

<h3>
<span id="objc_requires_super-属性" class="fragment"></span><a href="#objc_requires_super-%E5%B1%9E%E6%80%A7"><i class="fa fa-link"></i></a><code>objc_requires_super</code> 属性</h3>

<p>オーバーライドされたとき子クラスのメソッドから呼び出されなければならないメソッドには  <code>__attribute__((objc_requires_super))</code> 属性をつける。訳注：最近の SDK では <code>NS_REQUIRES_SUPER</code> も使える。</p>

<p>訳注：例：</p>

<div class="code-frame" data-lang="objc"><div class="highlight"><pre><span></span><span class="cm">/*** 親クラス内 ***/</span>
<span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">foo:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">objc_requires_super</span><span class="p">))</span> <span class="p">{</span>
    <span class="err">…</span>
<span class="p">}</span>
<span class="c1">// または</span>
<span class="o">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nl">foo</span><span class="p">:(</span><span class="kt">id</span><span class="p">)</span><span class="n">arg</span> <span class="n">NS_REQUIRES_SUPER</span> <span class="p">{</span>
    <span class="err">…</span>
<span class="p">}</span>

<span class="cm">/*** 子クラス内 ***/</span>
<span class="o">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nl">foo</span><span class="p">:(</span><span class="kt">id</span><span class="p">)</span><span class="n">arg</span> <span class="p">{</span>
    <span class="p">[</span><span class="nb">super</span> <span class="n">foo</span><span class="p">];</span> <span class="c1">// これを呼ばないと警告が出る</span>
<span class="p">}</span>
</pre></div></div>

<h3>
<span id="pure-と-const" class="fragment"></span><a href="#pure-%E3%81%A8-const"><i class="fa fa-link"></i></a><code>pure</code> と <code>const</code>
</h3>

<p>グローバルな状態を変更しない関数には <code>__attribute__((pure))</code> 属性をつける。グローバルな状態を参照することもない関数には <code>__attribute__((const))</code> 属性をつける。</p>

<p>訳注： <code>__pure</code> と <code>__const</code> も使える。</p>

<h3>
<span id="国際化" class="fragment"></span><a href="#%E5%9B%BD%E9%9A%9B%E5%8C%96"><i class="fa fa-link"></i></a>国際化</h3>

<p>ユーザーに向けて表示される文字列は <code>NSLocalizedString</code> などの仕組みで国際化する。対応する文字列を strings ファイルに追加する。</p>

<h3>
<span id="シングルトンには-dispatch_once" class="fragment"></span><a href="#%E3%82%B7%E3%83%B3%E3%82%B0%E3%83%AB%E3%83%88%E3%83%B3%E3%81%AB%E3%81%AF-dispatch_once"><i class="fa fa-link"></i></a>シングルトンには dispatch_once()</h3>

<p>シングルトンは本当に必要なときだけ使う。その場合、 <code>dispatch_once()</code> で初期化を1回だけ実行する。</p>

<h3>
<span id="frame-と-bounds" class="fragment"></span><a href="#frame-%E3%81%A8-bounds"><i class="fa fa-link"></i></a>frame と bounds</h3>

<p>frame プロパティと bounds プロパティの違いを意識し、使い分ける。訳注：<a href="http://adotout.sakura.ne.jp/?p=525" rel="nofollow noopener" target="_blank">frameとboundsの違い</a>などを参照のこと。</p>

<h2>
<span id="コード全体の品質" class="fragment"></span><a href="#%E3%82%B3%E3%83%BC%E3%83%89%E5%85%A8%E4%BD%93%E3%81%AE%E5%93%81%E8%B3%AA"><i class="fa fa-link"></i></a>コード全体の品質</h2>

<h3>
<span id="クラスの役割はシンプルに同じコードは一箇所に" class="fragment"></span><a href="#%E3%82%AF%E3%83%A9%E3%82%B9%E3%81%AE%E5%BD%B9%E5%89%B2%E3%81%AF%E3%82%B7%E3%83%B3%E3%83%97%E3%83%AB%E3%81%AB%E5%90%8C%E3%81%98%E3%82%B3%E3%83%BC%E3%83%89%E3%81%AF%E4%B8%80%E7%AE%87%E6%89%80%E3%81%AB"><i class="fa fa-link"></i></a>クラスの役割はシンプルに、同じコードは一箇所に</h3>

<p>クラスの責任を明確に定義する。分割すべきクラスはそうする。類似したコードが複数の場所に散らばっているなら、一箇所にまとめることを考える。</p>

<h3>
<span id="よい名前をつける" class="fragment"></span><a href="#%E3%82%88%E3%81%84%E5%90%8D%E5%89%8D%E3%82%92%E3%81%A4%E3%81%91%E3%82%8B"><i class="fa fa-link"></i></a>よい名前をつける</h3>

<p>命名は合理的に。</p>

<h3>
<span id="どこにでもアサーションを使う" class="fragment"></span><a href="#%E3%81%A9%E3%81%93%E3%81%AB%E3%81%A7%E3%82%82%E3%82%A2%E3%82%B5%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E3%82%92%E4%BD%BF%E3%81%86"><i class="fa fa-link"></i></a>どこにでもアサーションを使う</h3>

<p>通知のハンドラメソッドは、期待するスレッドで実行されているかアサーションする。</p>

<p><code>nil</code> にすべきでないものは、 <code>nil</code> でないことをアサーションする。他の値についても同様。</p>

<h3>
<span id="共有された状態は最小限に交換可能に" class="fragment"></span><a href="#%E5%85%B1%E6%9C%89%E3%81%95%E3%82%8C%E3%81%9F%E7%8A%B6%E6%85%8B%E3%81%AF%E6%9C%80%E5%B0%8F%E9%99%90%E3%81%AB%E4%BA%A4%E6%8F%9B%E5%8F%AF%E8%83%BD%E3%81%AB"><i class="fa fa-link"></i></a>共有された状態は最小限に、交換可能に</h3>

<p>共有された状態は必要なもののみにする。ミュータブルであるべきか検討する。シングルトンよりも依存性注入を使う。</p>

<h3>
<span id="まず関数次にクラスメソッド最後にインスタンスメソッド" class="fragment"></span><a href="#%E3%81%BE%E3%81%9A%E9%96%A2%E6%95%B0%E6%AC%A1%E3%81%AB%E3%82%AF%E3%83%A9%E3%82%B9%E3%83%A1%E3%82%BD%E3%83%83%E3%83%89%E6%9C%80%E5%BE%8C%E3%81%AB%E3%82%A4%E3%83%B3%E3%82%B9%E3%82%BF%E3%83%B3%E3%82%B9%E3%83%A1%E3%82%BD%E3%83%83%E3%83%89"><i class="fa fa-link"></i></a>まず関数、次にクラスメソッド、最後にインスタンスメソッド</h3>

<p>ロジックはなるべく関数で実装する。そのほうが読みやすい。インスタンス変数にアクセスするほどではないが、クラス名を名前空間として使い一箇所にまとめたいロジックは、クラスメソッドで実装する。</p>

<h3>
<span id="関数で複雑なオブジェクトを操作しない" class="fragment"></span><a href="#%E9%96%A2%E6%95%B0%E3%81%A7%E8%A4%87%E9%9B%91%E3%81%AA%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%82%92%E6%93%8D%E4%BD%9C%E3%81%97%E3%81%AA%E3%81%84"><i class="fa fa-link"></i></a>関数で複雑なオブジェクトを操作しない</h3>

<p>巨大なビジネスオブジェクトを関数の引数にしない。</p>

<h3>
<span id="できれば簡潔にどんなときでも理解しやすく" class="fragment"></span><a href="#%E3%81%A7%E3%81%8D%E3%82%8C%E3%81%B0%E7%B0%A1%E6%BD%94%E3%81%AB%E3%81%A9%E3%82%93%E3%81%AA%E3%81%A8%E3%81%8D%E3%81%A7%E3%82%82%E7%90%86%E8%A7%A3%E3%81%97%E3%82%84%E3%81%99%E3%81%8F"><i class="fa fa-link"></i></a>できれば簡潔に、どんなときでも理解しやすく</h3>

<p>簡潔さは重要だが、理解しやすさはそれに増して大事。どこに線を引くか決めて、それを守る。</p>

<h3>
<span id="短いが読みやすいメソッドと関数" class="fragment"></span><a href="#%E7%9F%AD%E3%81%84%E3%81%8C%E8%AA%AD%E3%81%BF%E3%82%84%E3%81%99%E3%81%84%E3%83%A1%E3%82%BD%E3%83%83%E3%83%89%E3%81%A8%E9%96%A2%E6%95%B0"><i class="fa fa-link"></i></a>短いが読みやすいメソッドと関数</h3>

<p>メソッドと関数は短いほうがよいが、読みやすさと率直さを犠牲にしてはならない。</p>

<h3>
<span id="必要ならコメントを書く" class="fragment"></span><a href="#%E5%BF%85%E8%A6%81%E3%81%AA%E3%82%89%E3%82%B3%E3%83%A1%E3%83%B3%E3%83%88%E3%82%92%E6%9B%B8%E3%81%8F"><i class="fa fa-link"></i></a>必要ならコメントを書く</h3>

<p>パブリックなクラス、メソッド、関数には、それが何をするか明らかに分かるのでなければ、解説をつける。込み入った内部ロジックにもコメントを書く。</p>

<h3>
<span id="不要なデバッグ出力は消す" class="fragment"></span><a href="#%E4%B8%8D%E8%A6%81%E3%81%AA%E3%83%87%E3%83%90%E3%83%83%E3%82%B0%E5%87%BA%E5%8A%9B%E3%81%AF%E6%B6%88%E3%81%99"><i class="fa fa-link"></i></a>不要なデバッグ出力は消す</h3>

<p>不要になった <code>NSLog</code> は残さない。必要なデバッグ出力は、それが意味するところを分かるようにする。</p>

<h3>
<span id="よいエラーロギング" class="fragment"></span><a href="#%E3%82%88%E3%81%84%E3%82%A8%E3%83%A9%E3%83%BC%E3%83%AD%E3%82%AE%E3%83%B3%E3%82%B0"><i class="fa fa-link"></i></a>よいエラーロギング</h3>

<p>エラーログには、どこでエラーが起き、何が問題だったのかを含めること。エラーログは簡潔かつ正確で役に立つようにする。</p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1" style="height:150px;">
<tr>
	<td rowspan="3">94位</td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="thumb-up-120px.png" /></i>670</kbd>
		<a target="_blank" href="https://qiita.com/yuku_t/items/c6f20de0e4f4c352046c">Boxen使わなくても許されるのは2012年までだよね</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-02-27<br />10:28:12</center>
	</td>
	<td style="width:200px;">
		<!--投稿者-->
		<center>
			@<a href="user/153.html">yuku_t</a>(195件の記事)<br />(Increments inc. 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/153/profile-images/1505784567">
		</center>
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Mac]</b> <b>[GitHub]</b> <b>[Boxen]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<!--
		<div style="width:350px;height:150px;overflow:scroll;">%s</div>
		-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>続編を書きました - <a href="http://qiita.com/yuku_t/items/50b2b376604c2fefd8cd" id="reference-5704953018a628221ee9">Boxen使ってて許されるのは2013年だけだった</a></p>

<p>すごいすごいと話題な割に誰も使っていないと話題の<a href="http://boxen.github.com/" rel="nofollow noopener" target="_blank">Boxen</a>を使ってみた。</p>

<h2>
<span id="3行で分かる結論" class="fragment"></span><a href="#3%E8%A1%8C%E3%81%A7%E5%88%86%E3%81%8B%E3%82%8B%E7%B5%90%E8%AB%96"><i class="fa fa-link"></i></a>3行で分かる結論</h2>

<p>Boxenは...</p>

<ul>
<li>Macのセットアップを自動化してくれる</li>
<li>個人用途でも十分便利だが真価を発揮するのは大人数で使うとき</li>
<li>Puppet知らなくても案外使える</li>
</ul>

<h3>
<span id="この記事で分かるもの" class="fragment"></span><a href="#%E3%81%93%E3%81%AE%E8%A8%98%E4%BA%8B%E3%81%A7%E5%88%86%E3%81%8B%E3%82%8B%E3%82%82%E3%81%AE"><i class="fa fa-link"></i></a>この記事で分かるもの</h3>

<ul>
<li>Boxenの個人用途での使い方</li>
<li>Boxenのチーム用途での使い方</li>
<li>Puppetのmanifestの簡単な書き方</li>
</ul>

<h3>
<span id="この記事を読んでも分からないもの" class="fragment"></span><a href="#%E3%81%93%E3%81%AE%E8%A8%98%E4%BA%8B%E3%82%92%E8%AA%AD%E3%82%93%E3%81%A7%E3%82%82%E5%88%86%E3%81%8B%E3%82%89%E3%81%AA%E3%81%84%E3%82%82%E3%81%AE"><i class="fa fa-link"></i></a>この記事を読んでも分からないもの</h3>

<ul>
<li>Puppetの詳しい使い方</li>
</ul>

<h2>
<span id="boxenを使うと何ができるのか" class="fragment"></span><a href="#boxen%E3%82%92%E4%BD%BF%E3%81%86%E3%81%A8%E4%BD%95%E3%81%8C%E3%81%A7%E3%81%8D%E3%82%8B%E3%81%AE%E3%81%8B"><i class="fa fa-link"></i></a>Boxenを使うと何ができるのか</h2>

<p>BoxenはGitHub社が開発しているシステムで、Macのセットアップを簡単にできるようにしてくれる。新しくMacを購入したら開発環境や各種アプリケーションをインストールすることから始めるが、これをコマンド一発で全てやってくれるようになる。</p>

<h2>
<span id="boxenにまつわる各種の誤解" class="fragment"></span><a href="#boxen%E3%81%AB%E3%81%BE%E3%81%A4%E3%82%8F%E3%82%8B%E5%90%84%E7%A8%AE%E3%81%AE%E8%AA%A4%E8%A7%A3"><i class="fa fa-link"></i></a>Boxenにまつわる各種の誤解</h2>

<h3>
<span id="puppetを知らないと使えない" class="fragment"></span><a href="#puppet%E3%82%92%E7%9F%A5%E3%82%89%E3%81%AA%E3%81%84%E3%81%A8%E4%BD%BF%E3%81%88%E3%81%AA%E3%81%84"><i class="fa fa-link"></i></a>Puppetを知らないと使えない</h3>

<p>PuppetとはBoxenが内部で使っているセットアップツール。似たものにChefなどがある。<br>
BoxenではGitHub社が公開している各種resourceを組み合わせるだけでだいたいのことができる。個人用途ならこれで十分。<br>
細かい制御をするにはPuppetについて学習する必要があるが、GitHub社が公開しているresourceのmanifestを見れば雰囲気でなんとかなる。実際私は今回Puppetを初めて使ったがなんとかなった。<br>
（「nginxをインストールする」という設定があった場合、nginxはresourceで、resourceをインストールする手順が書いてあるのがmanifest。ここらへんはPuppet用語だから間違っているかも）</p>

<h3>
<span id="個人で使うには向かない" class="fragment"></span><a href="#%E5%80%8B%E4%BA%BA%E3%81%A7%E4%BD%BF%E3%81%86%E3%81%AB%E3%81%AF%E5%90%91%E3%81%8B%E3%81%AA%E3%81%84"><i class="fa fa-link"></i></a>個人で使うには向かない</h3>

<p>Boxenはチームで使った方が便利だが、個人用途としても十分に使える。チーム用のBoxenリポジトリに各個人の設定も書ける。<br>
ただ個人だとそう何度もマシンを一からセットアップする機会がある訳ではないので、やはり大人数で設定を共有した方が真価を発揮する。ハマりどころはだいたいいつも同じだからそこら辺を回避する設定を入れておくと捗ること間違いなし。</p>

<h3>
<span id="github社に特化しているので使えない" class="fragment"></span><a href="#github%E7%A4%BE%E3%81%AB%E7%89%B9%E5%8C%96%E3%81%97%E3%81%A6%E3%81%84%E3%82%8B%E3%81%AE%E3%81%A7%E4%BD%BF%E3%81%88%E3%81%AA%E3%81%84"><i class="fa fa-link"></i></a>GitHub社に特化しているので使えない</h3>

<p>確かにGitHub社が使っている環境を構築するのに便利なmanifestが充実しているが、自分の環境に流用できるものも多い。またmanifestは自作することも簡単に可能。</p>

<h2>
<span id="使い方" class="fragment"></span><a href="#%E4%BD%BF%E3%81%84%E6%96%B9"><i class="fa fa-link"></i></a>使い方</h2>

<ol>
<li>事前準備</li>
<li>boxen/our-boxenのコピーを作成</li>
<li>設定を書く

<ol>
<li>Puppetfile</li>
<li>個人設定</li>
<li>プロジェクト設定</li>
<li>チーム設定</li>
</ol>
</li>
<li>Boxenを実行</li>
</ol>

<h3>
<span id="事前準備" class="fragment"></span><a href="#%E4%BA%8B%E5%89%8D%E6%BA%96%E5%82%99"><i class="fa fa-link"></i></a>事前準備</h3>

<ul>
<li>Xcodeをインストール（CLI、GUIどちらでもOK）</li>
<li>GitHubアカウントを持っていないなら作る</li>
</ul>

<p>最近のMacにはgitがプリインストールされている。何かしらの理由でgitが無い場合はそれもインストールする。<br>
あと以下を実行する。</p>

<div class="code-frame" data-lang="sh">
<div class="code-lang"><span class="bold">Terminal</span></div>
<div class="highlight"><pre><span></span>sudo mkdir -p /opt/boxen
sudo chown <span class="nv">$USER</span>:admin /opt/boxen
</pre></div>
</div>

<h3>
<span id="boxenour-boxenのコピーを作成" class="fragment"></span><a href="#boxenour-boxen%E3%81%AE%E3%82%B3%E3%83%94%E3%83%BC%E3%82%92%E4%BD%9C%E6%88%90"><i class="fa fa-link"></i></a>boxen/our-boxenのコピーを作成</h3>

<p><a href="https://github.com/boxen/our-boxen" rel="nofollow noopener" target="_blank">boxen/our-boxen</a>はBoxenを使うためのひな形プロジェクト。まずはこれのコピーを作って、そこに設定を書いていく。</p>

<div class="code-frame" data-lang="sh">
<div class="code-lang"><span class="bold">Terminal</span></div>
<div class="highlight"><pre><span></span>mkdir -p ~/src/my-boxen <span class="c1">#名前は好きにする</span>
<span class="nb">cd</span> ~/src/my-boxen
git init
git remote add upstream https://github.com/boxen/our-boxen
git pull upstream master
</pre></div>
</div>

<p>これで~/src/my-boxenディレクトリにour-boxenのコピーが作られた。</p>

<h3>
<span id="設定を書く" class="fragment"></span><a href="#%E8%A8%AD%E5%AE%9A%E3%82%92%E6%9B%B8%E3%81%8F"><i class="fa fa-link"></i></a>設定を書く</h3>

<p>Boxenの設定する手順は大雑把にいって2段階踏む</p>

<ol>
<li>GitHub（やその他公開リポジトリ）上で公開されているresourceを指定</li>
<li>設定ファイルで1で指定したものをincludeする</li>
</ol>

<h4>
<span id="puppetfile" class="fragment"></span><a href="#puppetfile"><i class="fa fa-link"></i></a>Puppetfile</h4>

<p>外部のresourceを使う場合はここで指定する。現在主に仕えるのは<a href="https://github.com/boxen" rel="nofollow noopener" target="_blank">boxen</a>にある <em>puppet-*</em> という名前のリポジトリに入っているもの。設定自体は~/src/my-boxenにあるPuppetfileに書く。<br>
Puppetfileには初期状態で何個か設定がある。こいつらはBoxen自体が使ったりするので消さないこと。<br>
<em>puppet-*</em> の中で今回は以下のものを追記した。</p>

<div class="code-frame" data-lang="ruby">
<div class="code-lang"><span class="bold">Puppetfile</span></div>
<div class="highlight"><pre><span></span><span class="c1"># Puppetfileの末尾に追記</span>

<span class="c1"># これはGitHub上にあるboxen/puppet-dropboxリポジトリの1.0.0</span>
<span class="c1"># を使うという意味。バージョン名はGitHub上で確認する必要がある。</span>
<span class="n">github</span> <span class="s2">"dropbox"</span><span class="p">,</span>     <span class="s2">"1.0.0"</span>
<span class="n">github</span> <span class="s2">"mysql"</span><span class="p">,</span>       <span class="s2">"1.0.0"</span>
<span class="n">github</span> <span class="s2">"iterm2"</span><span class="p">,</span>      <span class="s2">"1.0.0"</span>
<span class="n">github</span> <span class="s2">"chrome"</span><span class="p">,</span>      <span class="s2">"1.0.0"</span>
<span class="n">github</span> <span class="s2">"skype"</span><span class="p">,</span>       <span class="s2">"1.0.0"</span>
<span class="n">github</span> <span class="s2">"redis"</span><span class="p">,</span>       <span class="s2">"1.0.0"</span>
<span class="n">github</span> <span class="s2">"icu4c"</span><span class="p">,</span>       <span class="s2">"1.0.0"</span>
<span class="n">github</span> <span class="s2">"imagemagick"</span><span class="p">,</span> <span class="s2">"1.0.0"</span>
<span class="n">github</span> <span class="s2">"xquartz"</span><span class="p">,</span>     <span class="s2">"1.0.0"</span>
<span class="n">github</span> <span class="s2">"libtool"</span><span class="p">,</span>     <span class="s2">"1.0.0"</span>
<span class="n">github</span> <span class="s2">"osx"</span><span class="p">,</span>     <span class="s2">"1.0.0"</span>
</pre></div>
</div>

<p>例えばdropbox、skype、iterm2、chromeというのがあることからも分かるように、Boxenでアプリケーションのインストールもできる。</p>

<p>ここで指定したresourceをインストールするには~/src/my-boxen/manifests/site.pp内で <code>include</code> する。しかしsite.ppは全てのマシンに適応される設定を書く場所なので、基本的にはここには書かず、後述する個人設定やプロジェクト設定に書く。</p>

<p>もしhomebrew上に存在するがそれをインストールする <em>puppet-*</em> resourceが提供されていない、という場合、自前でresourceを用意してもいいが、 <strong>homebrewでインストールできる場合に限って</strong> 簡単に書く方法をBoxenが用意しているのでそれを使ってもいい。この方法については「プロジェクト設定」で触れる。</p>

<p>デフォルトではNodejsとRubyがそれぞれnvmとrbenvを使って古いバージョンもインストールされるようになっているが、最新のものだけで十分なのでコメントアウトした。<br>
<code>include</code> コマンドに渡されている <code>nodejs</code> や <code>ruby</code> は確かにPuppetfileの中に現れている。</p>

<div class="code-frame" data-lang="puppet">
<div class="code-lang"><span class="bold">manifests/site.pp</span></div>
<div class="highlight"><pre><span></span><span class="c c-Singleline"># site.ppの下の方にある</span>
<span class="kd">node</span> <span class="s">default</span> <span class="p">{</span><span class="c c-Singleline"></span>
<span class="c c-Singleline">  # すべてのマシンで実行される設定</span>

<span class="c c-Singleline">  # node version</span>
<span class="c c-Singleline">  #include nodejs::0-4</span>
<span class="c c-Singleline">  #include nodejs::0-6</span>
  <span class="kn">include</span> <span class="nc">nodejs::0-8</span><span class="c c-Singleline">  </span>

<span class="c c-Singleline">  # default ruby versions</span>
<span class="c c-Singleline">  #include ruby::1-8-7</span>
<span class="c c-Singleline">  #include ruby::1-9-2</span>
  <span class="nc">include</span> <span class="nc">ruby::1-9-3</span>
}
</pre></div>
</div>

<h4>
<span id="個人設定" class="fragment"></span><a href="#%E5%80%8B%E4%BA%BA%E8%A8%AD%E5%AE%9A"><i class="fa fa-link"></i></a>個人設定</h4>

<p>事前準備に「GitHubアカウントを持っていないなら作る」があったことを思い出してほしい。Boxenではmodules/people/manifestsディレクトリ内に &lt;GitHubアカウント名&gt;.pp というmanifestがあったらそれを自動的に実行するようになっている。個人用途で使う場合は、ここにもりもり書く感じになる。</p>

<p>例えば私（<a href="https://github.com/taka84u9/" rel="nofollow noopener" target="_blank">taka84u9</a>）の場合はmodules/people/manifests/taka84u9.ppに以下のように書いた。</p>

<div class="code-frame" data-lang="puppet">
<div class="code-lang"><span class="bold">modules/people/manifests/taka84u9.pp</span></div>
<div class="highlight"><pre><span></span><span class="kd">class</span> <span class="nc">people::taka84u9</span> <span class="p">{</span><span class="c c-Singleline"></span>
<span class="c c-Singleline">  # 自分の環境で欲しいresourceをincludeする</span>
  <span class="kn">include</span> <span class="nc">dropbox</span>
  <span class="kn">include</span> <span class="nc">skype</span>
  <span class="kn">include</span> <span class="nc">iterm2::stable</span><span class="c c-Singleline"> #::devもある</span>
  <span class="nc">include</span> <span class="nc">chrome</span>

<span class="c c-Singleline">  # homebrewでインストール</span>
  <span class="nc">package</span> <span class="p">{</span>
    <span class="p">[</span>
      <span class="s1">'tmux'</span><span class="p">,</span>
      <span class="s1">'reattach-to-user-namespace'</span><span class="p">,</span>
      <span class="s1">'tig'</span><span class="p">,</span>
    <span class="p">]:</span>
  <span class="p">}</span>

  <span class="nv">$home</span>     <span class="o">=</span> <span class="s2">"/Users/</span><span class="si">${::luser}</span><span class="s2">"</span>
  <span class="nv">$src</span>      <span class="o">=</span> <span class="s2">"</span><span class="si">${home}</span><span class="s2">/src"</span>
  <span class="nv">$dotfiles</span> <span class="o">=</span> <span class="s2">"</span><span class="si">${src}</span><span class="s2">/dotfiles"</span><span class="c c-Singleline"></span>

<span class="c c-Singleline">  # ~/src/dotfilesにGitHub上のtaka84u9/dotfilesリポジトリを</span>
<span class="c c-Singleline">  # git-cloneする。そのとき~/srcディレクトリがなければいけない。</span>
  <span class="nc">repository</span> <span class="p">{</span> <span class="nv">$dotfiles</span><span class="p">:</span>
    <span class="nt">source</span>  <span class="p">=&gt;</span> <span class="s2">"taka84u9/dotfiles"</span><span class="p">,</span>
    <span class="nt">require</span> <span class="p">=&gt;</span> <span class="nc">File</span><span class="p">[</span><span class="nv">$src</span><span class="p">]</span>
  <span class="p">}</span><span class="c c-Singleline"></span>
<span class="c c-Singleline">  # git-cloneしたらインストールする</span>
  <span class="nc">exec</span> <span class="p">{</span> <span class="s2">"sh </span><span class="si">${dotfiles}</span><span class="s2">/install.sh"</span><span class="p">:</span>
    <span class="nt">cwd</span> <span class="p">=&gt;</span> <span class="nv">$dotfiles</span><span class="p">,</span>
    <span class="nt">creates</span> <span class="p">=&gt;</span> <span class="s2">"</span><span class="si">${home}</span><span class="s2">/.zshrc"</span><span class="p">,</span>
    <span class="nt">require</span> <span class="p">=&gt;</span> <span class="nc">Repository</span><span class="p">[</span><span class="nv">$dotfiles</span><span class="p">],</span>
  <span class="p">}</span>
}
</pre></div>
</div>

<p>だいたい雰囲気で何をしているかは分かると思う。 <code>File</code> というのはfileタイプのresourceを指定するのに使う。詳しい説明はしないが、resourceの定義には全て小文字、指定するには先頭大文字になる。 <code>$src</code> のfile定義が無い、と思うかも知れないが~/srcはBoxenが使うために事前に定義しているので今回は場合は必要ない（特殊事例）。普通は以下のように書かねばならない（~/codeディレクトリの場合）。</p>

<div class="code-frame" data-lang="puppet">
<div class="code-lang"><span class="bold">modules/people/manifests/taka84u9.pp</span></div>
<div class="highlight"><pre><span></span><span class="kd">class</span> <span class="nc">people::taka84u9</span> <span class="p">{</span>
  <span class="nv">$code</span>     <span class="o">=</span> <span class="s2">"/Users/</span><span class="si">${::luser}</span><span class="s2">/code"</span>
  <span class="nc">file</span> <span class="p">{</span> <span class="nv">$code</span><span class="p">:</span>
    <span class="nt">ensure</span> <span class="p">=&gt;</span> <span class="ss">derectory</span><span class="c c-Singleline"> #これはディレクトリです</span>
  <span class="p">}</span>
  <span class="nc">repository</span> <span class="p">{</span> <span class="s2">"</span><span class="si">${code}</span><span class="s2">/dotfiles"</span><span class="p">:</span> <span class="c c-Singleline">#こういう書き方もできる</span>
    <span class="nt">source</span>  <span class="p">=&gt;</span> <span class="s2">"taka84u9/dotfiles"</span><span class="p">,</span>
    <span class="nt">require</span> <span class="p">=&gt;</span> <span class="nc">File</span><span class="p">[</span><span class="nv">$code</span><span class="p">]</span>
  <span class="p">}</span>
}
</pre></div>
</div>

<p>詳しくはPuppetのドキュメントを読むべし。</p>

<h5>
<span id="package-を使いこなす" class="fragment"></span><a href="#package-%E3%82%92%E4%BD%BF%E3%81%84%E3%81%93%E3%81%AA%E3%81%99"><i class="fa fa-link"></i></a>package を使いこなす</h5>

<p>Macアプリをインストールしたい場合は次のように書く。 <code>source</code> でダウンロードURLを指定して、 <code>provider</code> は .zip なら<code>compressed_app</code>  .dmg なら <code>pkgdmg</code> にする。これを書いておくだけで<a href="http://kobito.qiita.com/" rel="nofollow noopener" target="_blank">Kobito</a>と<a href="http://www.trankynam.com/xtrafinder/" rel="nofollow noopener" target="_blank">XtraFinder</a>がインストールされる。</p>

<div class="code-frame" data-lang="puppet"><div class="highlight"><pre><span></span><span class="nc">package</span> <span class="p">{</span>
  <span class="s1">'Kobito'</span><span class="p">:</span>
    <span class="nt">source</span>   <span class="p">=&gt;</span> <span class="s2">"http://kobito.qiita.com/download/Kobito_v1.2.0.zip"</span><span class="p">,</span>
    <span class="nt">provider</span> <span class="p">=&gt;</span> <span class="ss">compressed_app</span><span class="p">;</span>
  <span class="s1">'XtraFinder'</span><span class="p">:</span>
    <span class="nt">source</span>   <span class="p">=&gt;</span> <span class="s2">"http://www.trankynam.com/xtrafinder/downloads/XtraFinder.dmg"</span><span class="p">,</span>
    <span class="nt">provider</span> <span class="p">=&gt;</span> <span class="ss">pkgdmg</span><span class="p">;</span>
<span class="p">}</span>
</pre></div></div>

<p>Homebrew経由でインストールするには同じく <code>package</code> コマンドを使うが、インストール時のオプションを指定するには <code>install_options</code> を指定する。ここではzshを <code>--disable-etcdir</code> オプションでインストールしている。（<code>--disable-etcdir</code> については <code>brew info zsh</code> 参照）<br>
ついでに説明すると file_line はファイルに行を追加する。新しくインストールしたzshをログインシェルとして指定できるように/etc/shellsに追記する。依存関係としてはzshのインストールが済んだあとにしている。<br>
osx_chsh は <code>include osx</code> をすることで使えるようになる便利コマンドで自分のログインシェルを変更する。file_lineがbeforeで指定しているので、osx_chshが実行される時点では既にログインシェルとして新しいzshは登録可能な状態にある。<br>
<a href="https://github.com/boxen/puppet-osx" rel="nofollow noopener" target="_blank">boxen/puppet-osx</a> にはこれ以外にもosx_login_itemなど便利なのが定義されているので使いこなせると一気に幸せになれそう。</p>

<div class="code-frame" data-lang="puppet"><div class="highlight"><pre><span></span><span class="kn">include</span> <span class="nc">osx</span>
<span class="nc">package</span> <span class="p">{</span>
  <span class="s1">'zsh'</span><span class="p">:</span>
    <span class="nt">install_options</span> <span class="p">=&gt;</span> <span class="p">[</span>
      <span class="s1">'--disable-etcdir'</span>
    <span class="p">]</span>
<span class="p">}</span>
<span class="nc">file_line</span> <span class="p">{</span> <span class="s1">'add zsh to /etc/shells'</span><span class="p">:</span>
  <span class="nt">path</span>    <span class="p">=&gt;</span> <span class="s1">'/etc/shells'</span><span class="p">,</span>
  <span class="nt">line</span>    <span class="p">=&gt;</span> <span class="s2">"</span><span class="si">${boxen::config::homebrewdir}</span><span class="s2">/bin/zsh"</span><span class="p">,</span>
  <span class="nt">require</span> <span class="p">=&gt;</span> <span class="nc">Package</span><span class="p">[</span><span class="s1">'zsh'</span><span class="p">],</span>
  <span class="nt">before</span>  <span class="p">=&gt;</span> <span class="nc">Osx_chsh</span><span class="p">[</span><span class="nv">$::luser</span><span class="p">];</span>
<span class="p">}</span>
<span class="nc">osx_chsh</span> <span class="p">{</span> <span class="nv">$::luser</span><span class="p">:</span>
  <span class="nt">shell</span>   <span class="p">=&gt;</span> <span class="s2">"</span><span class="si">${boxen::config::homebrewdir}</span><span class="s2">/bin/zsh"</span><span class="p">;</span>
<span class="p">}</span>
</pre></div></div>

<h4>
<span id="プロジェクト設定" class="fragment"></span><a href="#%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E8%A8%AD%E5%AE%9A"><i class="fa fa-link"></i></a>プロジェクト設定</h4>

<p>個人用途だったらここから先の内容は不要。</p>

<p>Boxenの本来の目的は新しく会社に来た人や、マシンを新しくした人がさっさと開発に取り掛かれるようにすることだ。会社なら複数のプロジェクトがあり、それぞれにセットアップ方法が異なるのが普通だろう。Boxenではそれをmodules/projects/manifestsディレクトリに &lt;プロジェクト名&gt;.pp で定義する。</p>

<p>仮にawesomeprojectというプロジェクトがあるとする。このプロジェクトの設定ファイルはmodules/projects/manifests/awesomeproject.ppになる。</p>

<p>このプロジェクトではRMagickというgemを使っているのでimagemagickとlibtoolを <code>include</code> した。それに加えてRMagickをビルドするにはxzというのも必要なのだが <em>puppet-*</em> を探してみてもそれらしきものが存在しない。だがxzはhomebrewを使ってインストールできる。</p>

<p>実際にインストールしてみて発覚したのだが、imagemagickをインストールして作られるdylibファイルは名前がおかしくてエラーになる。 <a href="http://qiita.com/items/b6c7b56e060849c7509f">この記事</a> を参考にシンボリックリンクを貼って回避することにした。またhomebrewによってlittle-cmsというパッケージもインストールされている（imagemagickかlibtoolかxzが依存していてhomebrewによって自動的にインストールされた）のだが、こちらも同様の理由からシンボリックリンクを作成している。</p>

<p>最後にリポジトリの用意をする。Gitリポジトリを用意するには <code>repository</code> コマンドを使うが、 <code>boxen::project</code> コマンドという便利なものも用意されている。詳しい使い方は <a href="https://github.com/boxen/puppet-boxen/blob/master/manifests/project.pp#L1-L46" rel="nofollow noopener" target="_blank">ここを読む</a></p>

<div class="code-frame" data-lang="puppet">
<div class="code-lang"><span class="bold">modules/projects/manifests/awesomeproject.pp</span></div>
<div class="highlight"><pre><span></span><span class="kd">class</span> <span class="nc">projects::awesomeproject</span> <span class="p">{</span><span class="c c-Singleline"></span>
<span class="c c-Singleline">  # awesomeprojectで必要なものをincludeする</span>

  <span class="kn">include</span> <span class="nc">imagemagick</span>
  <span class="kn">include</span> <span class="nc">libtool</span>
  <span class="nc">package</span> <span class="p">{</span> <span class="s1">'xz'</span><span class="p">:</span> <span class="p">}</span><span class="c c-Singleline"> # homebrewでインストール</span>

  <span class="nv">$lib</span> <span class="o">=</span> <span class="s2">"/opt/boxen/homebrew/lib"</span>
  <span class="nc">file</span> <span class="p">{</span>
    <span class="s2">"</span><span class="si">${lib}</span><span class="s2">/libMagickCore.dylib"</span><span class="p">:</span>
      <span class="nt">ensure</span> <span class="p">=&gt;</span> <span class="ss">link</span><span class="p">,</span>  <span class="c c-Singleline"># シンボリックリンク</span>
      <span class="nt">target</span> <span class="p">=&gt;</span> <span class="s2">"./libMagickCore-Q16.7.dylib"</span><span class="p">;</span>
    <span class="s2">"</span><span class="si">${lib}</span><span class="s2">/liblcms2.2.dylib"</span><span class="p">:</span>
      <span class="nt">ensure</span> <span class="p">=&gt;</span> <span class="ss">link</span><span class="p">,</span>
      <span class="nt">target</span> <span class="p">=&gt;</span> <span class="s2">"./liblcms.dylb"</span>
  <span class="p">}</span>

  <span class="nc">boxen::project</span> <span class="p">{</span> <span class="s1">'awesomeproject'</span><span class="p">:</span>
    <span class="nt">ruby</span>   <span class="p">=&gt;</span> <span class="s1">'1.9.3'</span><span class="p">,</span>
    <span class="nt">mysql</span>  <span class="p">=&gt;</span> <span class="ss">true</span><span class="p">,</span>
    <span class="nt">redis</span>  <span class="p">=&gt;</span> <span class="ss">true</span><span class="p">,</span>
    <span class="c c-Singleline"># GitHub上のtaka84u9/awesomeprojectをgit-cloneする</span>
    <span class="c c-Singleline"># クローン先はデフォルトで~/src/awesomeproject</span>
    <span class="nt">source</span> <span class="p">=&gt;</span> <span class="s1">'taka84u9/awesomeproject'</span>
  <span class="p">}</span>
}
</pre></div>
</div>

<p>プロジェクト設定はこのままでは適応されない。これをインストールするには個人設定でプロジェクトを <code>include</code> する。</p>

<div class="code-frame" data-lang="puppet">
<div class="code-lang"><span class="bold">modules/people/manifests/taka84u9.pp</span></div>
<div class="highlight"><pre><span></span><span class="kd">class</span> <span class="nc">people::taka84u9</span> <span class="p">{</span><span class="c c-Singleline"></span>
<span class="c c-Singleline">  # owsomeprojectがインストールされる</span>
  <span class="kn">include</span> <span class="nc">projects::owsomeproject</span>

<span class="c c-Singleline">  # allプロジェクトは全てのプロジェクトという意味</span>
<span class="c c-Singleline">  # modules/projects/manifests/all.pp参照</span>
  <span class="kn">include</span> <span class="nc">projects::all</span>
}
</pre></div>
</div>

<h4>
<span id="チーム設定" class="fragment"></span><a href="#%E3%83%81%E3%83%BC%E3%83%A0%E8%A8%AD%E5%AE%9A"><i class="fa fa-link"></i></a>チーム設定</h4>

<p>個人のプロジェクトが所属しているチームに応じて決まる、という場合はチーム設定を使うと便利。</p>

<p>modulesディレクトリにはpeopleとprojectsというディレクトリがあるが好きに追加できる。<br>
例えばmiraclecompanyという会社にamazingteamというチームがいるとする。そしてこのチームはawesomeprojectとsuperprojectプロジェクトを担当しているならmodules/miraclecompany/manifests/amazingteam.ppは次のようになる。</p>

<div class="code-frame" data-lang="puppet">
<div class="code-lang"><span class="bold">modules/miraclecompany/manifests/amazingteam.pp</span></div>
<div class="highlight"><pre><span></span><span class="kd">class</span> <span class="nc">miraclecompany::amazingteam</span> <span class="p">{</span>
  <span class="kn">include</span> <span class="nc">projects::awesomeproject</span>
  <span class="kn">include</span> <span class="nc">projects::superproject</span>
}
</pre></div>
</div>

<p>そしてこのamazingteamに所属するgeniushuckerの個人設定でチームを <code>include</code> する。これでGitHubアカウントがgeniushuckerの人がBoxenを実行するとamazingteam用の環境がサクッと作られる。</p>

<div class="code-frame" data-lang="puppet">
<div class="code-lang"><span class="bold">modules/people/geniushucker.pp</span></div>
<div class="highlight"><pre><span></span><span class="kd">class</span> <span class="nc">people::geniushucker</span> <span class="p">{</span>
  <span class="kn">include</span> <span class="nc">miraclecompany::amazingteam</span>
}
</pre></div>
</div>

<p>すべての人に共通する内容を記述するには、例えばmiraclecompany::environmentsを作ってmanifests/site.ppで <code>include</code> すればいい。（site.ppは全員で実行されることを思い出してほしい）</p>

<h3>
<span id="boxenを実行" class="fragment"></span><a href="#boxen%E3%82%92%E5%AE%9F%E8%A1%8C"><i class="fa fa-link"></i></a>Boxenを実行</h3>

<p>Boxenはデフォルトでディスクの暗号化を要求する。企業で使っているのであれば基本的に行った方がいいだろうと思う。ただMacはデフォルトで暗号化を行わない設定になっているので、システム設定を開いて暗号化を許可しなければならない。英語インタフェースなら"System Preferences"→"Security &amp; Privacy"→"FileVault"にある。</p>

<p>以上を行ってから下記実行。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>cd ~/src/my-boxen
script/boxen
# 暗号化を行わない場合は
# script/boxen --no-fde
</pre></div></div>

<p>実行すると、Gitリポジトリに変更がある状態だといろいろ言ってくるが気にしなくてもOK。しばらくすると完了する。<br>
それができたら.zshrcや.bashrcに以下を追記する。</p>

<div class="code-frame" data-lang="sh">
<div class="code-lang"><span class="bold">.zshrc</span></div>
<div class="highlight"><pre><span></span><span class="o">[</span> -f /opt/boxen/env.sh <span class="o">]</span> <span class="o">&amp;&amp;</span> <span class="nb">source</span> /opt/boxen/env.sh
<span class="o">[</span> -f /opt/boxen/nvm/nvm.sh <span class="o">]</span> <span class="o">&amp;&amp;</span> <span class="nb">source</span> /opt/boxen/nvm/nvm.sh
</pre></div>
</div>

<p>あと自分のリポジトリに <code>git-push</code> する。プライベートリポジトリ推奨。<br>
リポジトリの場所はGitHubじゃなきゃいけない訳ではない。GitHubのプライベートリポジトリが有料なので<a href="https://bitbucket.org/" rel="nofollow noopener" target="_blank">Bitbucket</a>に無料でプライベートリポジトリを作った。会社なら、会社のプライベートリポジトリに <code>git-push</code> する。</p>

<div class="code-frame" data-lang="sh">
<div class="code-lang"><span class="bold">Terminal</span></div>
<div class="highlight"><pre><span></span>ssh-keygen
pbcopy &lt; ~/.ssh/id_rsa.pub
<span class="c1"># Bitbucketに公開鍵を追加</span>
git remote add origin git@bitbucket.org:taka84u9/my-boxen.git
git push origin master
</pre></div>
</div>

<p>これで完了</p>

<h3>
<span id="作ったboxenリポジトリを使う" class="fragment"></span><a href="#%E4%BD%9C%E3%81%A3%E3%81%9Fboxen%E3%83%AA%E3%83%9D%E3%82%B8%E3%83%88%E3%83%AA%E3%82%92%E4%BD%BF%E3%81%86"><i class="fa fa-link"></i></a>作ったBoxenリポジトリを使う</h3>

<p>他のマシンで実行するには最初の方で書いた <em>事前準備</em> をして、リポジトリを <code>git-clone</code> して、Boxenを実行して、.zshrcに追記するだけ。<br>
このとき必要なら個人設定も書く。</p>

<div class="code-frame" data-lang="sh">
<div class="code-lang"><span class="bold">Terminal</span></div>
<div class="highlight"><pre><span></span>sudo mkdir -p /opt/boxen
sudo chown <span class="nv">$USER</span>:admin /opt/boxen
mkdir ~/src
git clone git@bitbucket.org:taka84u9/my-boxen.git ~/src/my-boxen
<span class="nb">cd</span> ~/src/my-boxen
script/boxen
<span class="c1"># 暗号化を行わない場合は</span>
<span class="c1"># script/boxen --no-fde</span>
</pre></div>
</div>

<div class="code-frame" data-lang="sh">
<div class="code-lang"><span class="bold">.zshrc</span></div>
<div class="highlight"><pre><span></span><span class="o">[</span> -f /opt/boxen/env.sh <span class="o">]</span> <span class="o">&amp;&amp;</span> <span class="nb">source</span> /opt/boxen/env.sh
<span class="o">[</span> -f /opt/boxen/nvm/nvm.sh <span class="o">]</span> <span class="o">&amp;&amp;</span> <span class="nb">source</span> /opt/boxen/nvm/nvm.sh
</pre></div>
</div>

<h2>
<span id="合わせて読みたい" class="fragment"></span><a href="#%E5%90%88%E3%82%8F%E3%81%9B%E3%81%A6%E8%AA%AD%E3%81%BF%E3%81%9F%E3%81%84"><i class="fa fa-link"></i></a>合わせて読みたい</h2>

<ul>
<li><a href="http://qiita.com/items/2f7935f924b6e6c0732d">大人数でBoxen使うならboxen-webが断然便利 #Boxen #Mac - Qiita</a></li>
<li><a href="http://qiita.com/yuku_t/items/9312fd82a0fd291b683f" id="reference-1e596410b6eb69e7d89d">Boxenをアップデートする方法 - Qiita</a></li>
<li><a href="http://r7kamura.hatenablog.com/entry/2013/02/22/152133" rel="nofollow noopener" target="_blank">Boxenを実行すると何が起こるのか - ✘╹◡╹✘</a></li>
</ul>
</div>
	</td>
</tr>
</table>
<br />
<table border="1" style="height:150px;">
<tr>
	<td rowspan="3">95位</td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="thumb-up-120px.png" /></i>661</kbd>
		<a target="_blank" href="https://qiita.com/hshimo/items/1136087e1c6e5c5b0d9f">猿でも分かる! Dependency Injection: 依存性の注入</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-08-17<br />00:24:25</center>
	</td>
	<td style="width:200px;">
		<!--投稿者-->
		<center>
			@<a href="user/24976.html">hshimo</a>(307件の記事)<br />(Consensus Base Inc. 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/24976/profile-images/1473684230">
		</center>
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[DI]</b> <b>[DependencyInjection]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<!--
		<div style="width:350px;height:150px;overflow:scroll;">%s</div>
		-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;">
<h2>
<span id="はじめに" class="fragment"></span><a href="#%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB"><i class="fa fa-link"></i></a>はじめに</h2>

<p>アホでもわかるように解説してみるテスト。<br>
あらゆる方向で説明してみる。</p>

<p>大雑把にまとめると「依存していた部分を、外から注入すること」です。</p>

<p>勘違い、間違いが沢山ありそうなので、是非ご指摘を!</p>

<h2>
<span id="登場人物-用語" class="fragment"></span><a href="#%E7%99%BB%E5%A0%B4%E4%BA%BA%E7%89%A9-%E7%94%A8%E8%AA%9E"><i class="fa fa-link"></i></a>登場人物 (用語)</h2>

<ul>
<li>依存性の注入 (日本語)</li>
<li>Dependency Injection (英語)</li>
<li>DI (Dependency Injectionの略語)</li>
</ul>

<p>依存関係を設定ファイル等で定義してよろしくやってくれる「DIコンテナ」については書いておりません!</p>

<h2>
<span id="何が問題なの" class="fragment"></span><a href="#%E4%BD%95%E3%81%8C%E5%95%8F%E9%A1%8C%E3%81%AA%E3%81%AE"><i class="fa fa-link"></i></a>何が問題なの?</h2>

<p>クラス内などで固定化されたものがあると</p>

<ul>
<li>柔軟性がない</li>
<li>テストしにくい</li>
</ul>

<h2>
<span id="解決方法" class="fragment"></span><a href="#%E8%A7%A3%E6%B1%BA%E6%96%B9%E6%B3%95"><i class="fa fa-link"></i></a>解決方法</h2>

<p>「依存している部分を外から注入する」</p>

<h2>
<span id="diにおける依存性と注入の意味" class="fragment"></span><a href="#di%E3%81%AB%E3%81%8A%E3%81%91%E3%82%8B%E4%BE%9D%E5%AD%98%E6%80%A7%E3%81%A8%E6%B3%A8%E5%85%A5%E3%81%AE%E6%84%8F%E5%91%B3"><i class="fa fa-link"></i></a>DIにおける「依存性」と「注入」の意味</h2>

<ul>
<li><p>依存性<br>
(大雑把に)とあるクラスに、固定の定数、変数、インスタンスが入っちゃっている状態<br>
つまりそのクラスは、その定数、変数、インスタンスに依存している</p></li>
<li><p>注入<br>
そのクラスの外から定数、変数、インスタンスをあるクラスにぶちこむこと</p></li>
</ul>

<p>注意) クラスだけに限らないという話もある。けど、ほとんどの場合クラスになるので、以下もクラスにする</p>

<h2>
<span id="つまり何が何に依存している" class="fragment"></span><a href="#%E3%81%A4%E3%81%BE%E3%82%8A%E4%BD%95%E3%81%8C%E4%BD%95%E3%81%AB%E4%BE%9D%E5%AD%98%E3%81%97%E3%81%A6%E3%81%84%E3%82%8B"><i class="fa fa-link"></i></a>つまり、何が何に依存している?</h2>

<p>とあるクラスが、固定した他の(定数、変数、クラスなど)に依存している</p>

<h2>
<span id="どうしたいの" class="fragment"></span><a href="#%E3%81%A9%E3%81%86%E3%81%97%E3%81%9F%E3%81%84%E3%81%AE"><i class="fa fa-link"></i></a>どうしたいの?</h2>

<p>依存性をなくすために、動的に動作を注入しようぜ! ってこと</p>

<p>つまり、あるクラス内の決め打ち定数、変数、インスタンスを排除して、外から注入することで、動的に動作を変えられるようにする</p>

<h2>
<span id="依存していると何が嫌なの" class="fragment"></span><a href="#%E4%BE%9D%E5%AD%98%E3%81%97%E3%81%A6%E3%81%84%E3%82%8B%E3%81%A8%E4%BD%95%E3%81%8C%E5%AB%8C%E3%81%AA%E3%81%AE"><i class="fa fa-link"></i></a>依存していると、何が嫌なの?</h2>

<ul>
<li>外から動的に動作を変更できないので、テストしづらい</li>
<li>決め打ちなので、柔軟性がなくカスタマイズしにくい</li>
</ul>

<h2>
<span id="具体的にどう困るの" class="fragment"></span><a href="#%E5%85%B7%E4%BD%93%E7%9A%84%E3%81%AB%E3%81%A9%E3%81%86%E5%9B%B0%E3%82%8B%E3%81%AE"><i class="fa fa-link"></i></a>具体的にどう困るの?</h2>

<p>あるクラスだけテストしたいのに</p>

<ul>
<li>中に別のクラスが入っているとテストしにくい</li>
<li>テストに時間がかかるメソッドが中にあってテスト終了に時間がかかる</li>
</ul>

<h2>
<span id="で結局どうしろっての" class="fragment"></span><a href="#%E3%81%A7%E7%B5%90%E5%B1%80%E3%81%A9%E3%81%86%E3%81%97%E3%82%8D%E3%81%A3%E3%81%A6%E3%81%AE"><i class="fa fa-link"></i></a>で、結局どうしろっての?</h2>

<ul>
<li>引数で、クラスや変数を外から受け取れるようにする</li>
</ul>

<h2>
<span id="車で例えてみる" class="fragment"></span><a href="#%E8%BB%8A%E3%81%A7%E4%BE%8B%E3%81%88%E3%81%A6%E3%81%BF%E3%82%8B"><i class="fa fa-link"></i></a>車で例えてみる</h2>

<p>結論から言うと、<br>
「依存性の高い車は、特定のメーカーのパーツで固定されちゃっていて、カスタマイズできない車」<br>
ということになる</p>

<h3>
<span id="依存性の高い車の場合" class="fragment"></span><a href="#%E4%BE%9D%E5%AD%98%E6%80%A7%E3%81%AE%E9%AB%98%E3%81%84%E8%BB%8A%E3%81%AE%E5%A0%B4%E5%90%88"><i class="fa fa-link"></i></a>依存性の高い車の場合</h3>

<p>車が以下のパーツできている</p>

<ul>
<li>ホンダのエンジン</li>
<li>ブリジストンのホイール</li>
<li>パナソニックのバッテリー</li>
</ul>

<p>しかし、全部のパーツが半田ゴテでくっつけちゃってあるので、他のメーカーのバッテリーに変更ができない!</p>

<p>テストの視点から例えると、バッテリーだけの消耗テストがしたい場合</p>

<ul>
<li>バッテリーだけ取り出して放電、充電の繰り返しテストができない</li>
<li>配線も半田ゴテでくっつけちゃっているので、車のランプをつけたり、エンジンをつけて放電・充電をしなくてはいけない! </li>
</ul>

<p>つまり、全体としてしかテストできない!!</p>

<h3>
<span id="依存性の低い車の場合" class="fragment"></span><a href="#%E4%BE%9D%E5%AD%98%E6%80%A7%E3%81%AE%E4%BD%8E%E3%81%84%E8%BB%8A%E3%81%AE%E5%A0%B4%E5%90%88"><i class="fa fa-link"></i></a>依存性の低い車の場合</h3>

<p>パーツをどのようにもカスタマイズできる車<br>
他社のバッテリーを入れる(注入する)ことができる</p>

<h3>
<span id="コードで説明" class="fragment"></span><a href="#%E3%82%B3%E3%83%BC%E3%83%89%E3%81%A7%E8%AA%AC%E6%98%8E"><i class="fa fa-link"></i></a>コードで説明</h3>

<p>以下が、依存性の高い、車クラス</p>

<div class="code-frame" data-lang="java"><div class="highlight"><pre><span></span><span class="kd">class</span> <span class="nc">Car</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="n">Engine</span>  <span class="n">en</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HondaEngine</span><span class="o">();</span>
  <span class="kd">private</span> <span class="n">Wheel</span>   <span class="n">wh</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BridgestoneWheel</span><span class="o">();</span>
  <span class="kd">private</span> <span class="n">Battery</span> <span class="n">bt</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PanasonicBattery</span><span class="o">();</span>
  <span class="c1">// ...</span>
<span class="o">}</span>
</pre></div></div>

<p>車のパーツが決め打ちである。</p>

<p>Carクラスをテストしたい場合や他のEngineクラスに変更したい場合、コードを書き換えないとできないことになって面倒!</p>

<p>依存性の低い(注入している)コードは…<br>
誰か書いて下さい! (他人に依存)</p>

<p>基本的にこんな感じでコーディングすると思います。</p>

<ul>
<li>Engine, Wheel, Battery クラスを作る</li>
<li>上記を継承(Javaなら implements)して、各メーカーのクラスを作る (PanasonicBattery()など)</li>
<li>Carクラスにセッターを作る (setBattery() など)</li>
<li>setBattery(new PanasonicBattery()) で注入</li>
</ul>

<p>DIなコードは、以下が参考になります。<br>
<a href="http://ganeshtiwaridotcomdotnp.blogspot.jp/2011/05/dependency-injection-with-java-spring.html" rel="nofollow noopener" target="_blank">GT's Blog: Dependency Injection with Java Spring IoC, A Complete Example</a></p>

<h2>
<span id="インジェクションの方法" class="fragment"></span><a href="#%E3%82%A4%E3%83%B3%E3%82%B8%E3%82%A7%E3%82%AF%E3%82%B7%E3%83%A7%E3%83%B3%E3%81%AE%E6%96%B9%E6%B3%95"><i class="fa fa-link"></i></a>インジェクションの方法</h2>

<ul>
<li>コンストラクター・インジェクション</li>
<li>セッター・インジェクション</li>
</ul>

<h2>
<span id="diのメリット" class="fragment"></span><a href="#di%E3%81%AE%E3%83%A1%E3%83%AA%E3%83%83%E3%83%88"><i class="fa fa-link"></i></a>DIのメリット</h2>

<p>以下の記事によるメリット<br>
<a href="http://itpro.nikkeibp.co.jp/free/ITPro/OPINION/20050216/156274/?ST=develop&amp;P=2" rel="nofollow noopener" target="_blank">（2/3）記者の眼 - Java開発を変える最新の設計思想「Dependency Injection（DI）」とは：ITpro</a></p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>・ソフトウエアの階層をきれいに分離した設計が容易になる
・コードが簡素になり、開発期間が短くなる
・テストが容易になり、「テスト・ファースト」による開発スタイルを取りやすくなる
・特定のフレームワークへの依存性が極小になるため、変化に強いソフトウエアを作りやすくなる（＝フレームワークの進化や、他のフレームワークへの移行に対応しやすくなる）
</pre></div></div>

<h2>
<span id="デメリット" class="fragment"></span><a href="#%E3%83%87%E3%83%A1%E3%83%AA%E3%83%83%E3%83%88"><i class="fa fa-link"></i></a>デメリット</h2>

<ul>
<li>はじめに工数がかかる場合が多いと思われる
クラスをたくさん作るので(大抵の場合)</li>
<li>プログラムの実行スピードが遅くなる可能性が高い</li>
<li>クラスやファイルが沢山できる</li>
</ul>

<p>他にもデメリットがあれば、教えて下さい</p>

<h2>
<span id="もっと例えが欲しい" class="fragment"></span><a href="#%E3%82%82%E3%81%A3%E3%81%A8%E4%BE%8B%E3%81%88%E3%81%8C%E6%AC%B2%E3%81%97%E3%81%84"><i class="fa fa-link"></i></a>もっと例えが欲しい?</h2>

<p>女の子に例えると</p>

<p>ある女の子が固定の男性に依存している場合、その依存性を排除して、外部から男の子を注入できるようにしようという願望です。</p>

<p>メリットとしては</p>

<ul>
<li>特定の男性への依存性が極小になるため、変化に強い女の子が作りやすくなります。（＝男性の進化や、他の男性への移行に対応しやすくなる）</li>
</ul>

<h2>
<span id="参考url" class="fragment"></span><a href="#%E5%8F%82%E8%80%83url"><i class="fa fa-link"></i></a>参考URL</h2>

<ul>
<li><p>design patterns - What is dependency injection? - Stack Overflow<br>
<a href="http://stackoverflow.com/questions/130794/what-is-dependency-injection" class="autolink" rel="nofollow noopener" target="_blank">http://stackoverflow.com/questions/130794/what-is-dependency-injection</a></p></li>
<li><p>GT's Blog: Understanding Dependency Injection and its Importance, A tutorial<br>
<a href="http://ganeshtiwaridotcomdotnp.blogspot.jp/2011/05/understanding-dependency-injection-and.html" class="autolink" rel="nofollow noopener" target="_blank">http://ganeshtiwaridotcomdotnp.blogspot.jp/2011/05/understanding-dependency-injection-and.html</a></p></li>
<li><p><a href="http://kakutani.com/trans/fowler/injection.html" rel="nofollow noopener" target="_blank">Inversion of Control コンテナと Dependency Injection パターン</a></p></li>
</ul>
</div>
	</td>
</tr>
</table>
<br />
<table border="1" style="height:150px;">
<tr>
	<td rowspan="3">96位</td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="thumb-up-120px.png" /></i>660</kbd>
		<a target="_blank" href="https://qiita.com/luckypool/items/f1e756e9d3e9786ad9ea">anyenvで開発環境を整える</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2014-02-04<br />14:55:08</center>
	</td>
	<td style="width:200px;">
		<!--投稿者-->
		<center>
			@<a href="user/17133.html">luckypool</a>(16件の記事)<br />(mixi 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/17133/profile-images/1473682068">
		</center>
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Ruby]</b> <b>[Python]</b> <b>[Perl]</b> <b>[Node.js]</b> <b>[開発環境]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<!--
		<div style="width:350px;height:150px;overflow:scroll;">%s</div>
		-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p><a href="https://camo.qiitausercontent.com/694d68a9f4f69d94c77abc4c1d5e89253563c45d/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f31373133332f32326630316433632d373163612d306631382d303762312d6537366630376239373563352e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/694d68a9f4f69d94c77abc4c1d5e89253563c45d/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f31373133332f32326630316433632d373163612d306631382d303762312d6537366630376239373563352e706e67" alt="87063.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/17133/22f01d3c-71ca-0f18-07b1-e76f07b975c5.png"></a></p>

<p>私の場合、開発環境では複数の言語のコードを書いたり実行したりします。<br>
例えば perl, ruby, nodejs, python など。<br>
これらを利用するために、plenv, rbenv, nodebrew, pyenv などを利用していました。</p>

<p>しかし、遅ればせながら <a href="https://github.com/riywo/anyenv" rel="nofollow noopener" target="_blank">anyenv</a> というものがあると聞いたので、こっちに乗り換えました。</p>

<p>**envを2つ以上使ってる人はこれ使うのが良いと思います。おすすめ。</p>

<ul>
<li><a href="http://blog.riywo.com/2013/06/22/155804" class="autolink" rel="nofollow noopener" target="_blank">http://blog.riywo.com/2013/06/22/155804</a></li>
<li><a href="https://github.com/riywo/anyenv" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/riywo/anyenv</a></li>
</ul>

<h3>
<span id="インストールは簡単" class="fragment"></span><a href="#%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB%E3%81%AF%E7%B0%A1%E5%8D%98"><i class="fa fa-link"></i></a>インストールは簡単</h3>

<p><a href="https://github.com/riywo/anyenv/blob/master/README.md" rel="nofollow noopener" target="_blank">README.md</a> のとおりにやればOK</p>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>$ git clone https://github.com/riywo/anyenv ~/.anyenv
</pre></div></div>

<h3>
<span id="pathの設定" class="fragment"></span><a href="#path%E3%81%AE%E8%A8%AD%E5%AE%9A"><i class="fa fa-link"></i></a>PATHの設定</h3>

<p>zshrc がシンプルになりました！ </p>

<ul>
<li><a href="https://github.com/luckypool/dotfiles/compare/501474e2411dd1cdbf8cc60e9a34165f7160ad75...master" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/luckypool/dotfiles/compare/501474e2411dd1cdbf8cc60e9a34165f7160ad75...master</a></li>
</ul>

<div class="code-frame" data-lang="diff"><div class="highlight"><pre><span></span> # ------------------------------------------------------------------------
<span class="gd">-# plenv</span>
<span class="gi">+# anyenv</span>
 # ------------------------------------------------------------------------
<span class="gd">-if [ -d ${HOME}/.plenv  ] ; then</span>
<span class="gd">-    export PATH=${HOME}/.plenv/bin:${HOME}/.plenv/shims:${PATH}</span>
<span class="gd">-    eval "$(plenv init -)"</span>
<span class="gd">-fi</span>
<span class="gd">-</span>
<span class="gd">-# ------------------------------------------------------------------------</span>
<span class="gd">-# rbenv</span>
<span class="gd">-# ------------------------------------------------------------------------</span>
<span class="gd">-if [ -d ${HOME}/.rbenv  ] ; then</span>
<span class="gd">-    export PATH=$HOME/.rbenv/bin:$HOME/.rbenv/shims:$PATH</span>
<span class="gd">-    #export PATH="$HOME/.rbenv/bin:$PATH"</span>
<span class="gd">-    eval "$(rbenv init -)"</span>
<span class="gd">-fi</span>
<span class="gd">-</span>
<span class="gd">-# ------------------------------------------------------------------------</span>
<span class="gd">-# nodebrew</span>
<span class="gd">-# ------------------------------------------------------------------------</span>
<span class="gd">-if [ -d ${HOME}/.nodebrew  ] ; then</span>
<span class="gd">-    export PATH=${HOME}/.nodebrew/current/bin:${PATH}</span>
<span class="gd">-fi</span>
<span class="gd">-</span>
<span class="gd">-# ------------------------------------------------------------------------</span>
<span class="gd">-# pyenv</span>
<span class="gd">-# ------------------------------------------------------------------------</span>
<span class="gd">-# git://github.com/yyuu/pyenv.git</span>
<span class="gd">-if [ -d ${HOME}/.pyenv ] ; then</span>
<span class="gd">-    export PATH="$HOME/.pyenv/bin:$PATH"</span>
<span class="gd">-    eval "$(pyenv init -)"</span>
<span class="gi">+if [ -d $HOME/.anyenv ] ; then</span>
<span class="gi">+    export PATH="$HOME/.anyenv/bin:$PATH"</span>
<span class="gi">+    eval "$(anyenv init -)"</span>
 fi
</pre></div></div>

<p>もっと早く知っていればよかった・・・。</p>

<h4>
<span id="tmux-を使っている場合追記" class="fragment"></span><a href="#tmux-%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%A6%E3%81%84%E3%82%8B%E5%A0%B4%E5%90%88%E8%BF%BD%E8%A8%98"><i class="fa fa-link"></i></a>tmux を使っている場合（追記）</h4>

<ul>
<li>shims へのPATHを通さないと tmux 起動した後だと system の方をみちゃうようです</li>
<li>そこで下記のような差分が必要そうです</li>
<li><a href="https://github.com/luckypool/dotfiles/commit/08e5af8b145e183a41fec5c9b3ecbe6e923f5d01" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/luckypool/dotfiles/commit/08e5af8b145e183a41fec5c9b3ecbe6e923f5d01</a></li>
<li>追記

<ul>
<li>find より ls の方が良いよと<a href="http://qiita.com/luckypool/items/f1e756e9d3e9786ad9ea#comment-5df6f301c3ad08cf749b">コメント</a>がありました！（Thanks, <a href="/labocho" class="user-mention js-hovercard" title="labocho" data-hovercard-target-type="user" data-hovercard-target-name="labocho">@labocho</a> さん）</li>
<li><a href="https://github.com/luckypool/dotfiles/commit/c603e436cf4fea93ccee478eda994109a05eddca" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/luckypool/dotfiles/commit/c603e436cf4fea93ccee478eda994109a05eddca</a></li>
<li><a href="https://github.com/luckypool/dotfiles/commit/89e38defd63098cca2b3d0fc28fed751a1f9d5dc" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/luckypool/dotfiles/commit/89e38defd63098cca2b3d0fc28fed751a1f9d5dc</a></li>
</ul>
</li>
</ul>

<div class="code-frame" data-lang="diff"><div class="highlight"><pre><span></span> if [ -d ${HOME}/.anyenv ] ; then
     export PATH="$HOME/.anyenv/bin:$PATH"
     eval "$(anyenv init -)"
<span class="gi">+    for D in `ls $HOME/.anyenv/envs`</span>
<span class="gi">+    do</span>
<span class="gi">+        export PATH="$HOME/.anyenv/envs/$D/shims:$PATH"</span>
<span class="gi">+    done</span>
<span class="gi">+</span>
 fi
</pre></div></div>

<p>参考</p>

<ul>
<li><a href="http://monmon.hateblo.jp/entry/2013/12/13/233242" rel="nofollow noopener" target="_blank">tmuxでanyenv(*env)で*env/shimsがsystemのPATHより前に読まれてsystemが使われてしまう対処</a></li>
</ul>

<h3>
<span id="anyenv-install" class="fragment"></span><a href="#anyenv-install"><i class="fa fa-link"></i></a>anyenv install</h3>

<p>以下はインストールした時のメモです。</p>

<p>ruby, perl, python, node.js に相応する **env をインストールします。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ anyenv install rbenv
$ anyenv install plenv
$ anyenv install pyenv
$ anyenv install ndenv
</pre></div></div>

<p>初期状態は下記のようにsystemのものを指していると思います。</p>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>$ anyenv versions
ndenv:
* system <span class="o">(</span><span class="nb">set</span> by /Users/luckypool/.anyenv/envs/ndenv/version<span class="o">)</span>
plenv:
* system <span class="o">(</span><span class="nb">set</span> by /Users/luckypool/.anyenv/envs/plenv/version<span class="o">)</span>
pyenv:
* system <span class="o">(</span><span class="nb">set</span> by /Users/luckypool/.anyenv/envs/pyenv/version<span class="o">)</span>
rbenv:
* system <span class="o">(</span><span class="nb">set</span> by /Users/luckypool/.anyenv/envs/rbenv/version<span class="o">)</span>
</pre></div></div>

<p>ということで、おなじみ **env からインストールします。</p>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>$ rbenv install <span class="m">2</span>.1.0
$ plenv install <span class="m">5</span>.16.3
$ ndenv install v0.10.25
$ pyenv install <span class="m">2</span>.7.6
$ pyenv install <span class="m">3</span>.3.3
</pre></div></div>

<p>それぞれ時間かかかりますが、ちゃんとインストールされると下記のようになります。</p>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>$ anyenv versions                                                                                     
ndenv:
  system
* v0.10.25 <span class="o">(</span><span class="nb">set</span> by /Users/luckypool/.anyenv/envs/ndenv/version<span class="o">)</span>
plenv:
* system <span class="o">(</span><span class="nb">set</span> by /Users/luckypool/.anyenv/envs/plenv/version<span class="o">)</span>
  <span class="m">5</span>.16.3
pyenv:
* system <span class="o">(</span><span class="nb">set</span> by /Users/luckypool/.anyenv/envs/pyenv/version<span class="o">)</span>
  <span class="m">2</span>.7.6
  <span class="m">3</span>.3.3
rbenv:
* system <span class="o">(</span><span class="nb">set</span> by /Users/luckypool/.anyenv/envs/rbenv/version<span class="o">)</span>
  <span class="m">2</span>.1.0
</pre></div></div>

<p>ということで、インストールしたversionを指すようにglobalを設定します。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>rbenv global 2.1.0
plenv global 5.16.3
ndenv global v0.10.25
pyenv global 3.3.3
</pre></div></div>

<p>変更されましたね！</p>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>$ anyenv versions                                                                                     
ndenv:
  system
* v0.10.25 <span class="o">(</span><span class="nb">set</span> by /Users/luckypool/.anyenv/envs/ndenv/version<span class="o">)</span>
plenv:
  system
* <span class="m">5</span>.16.3 <span class="o">(</span><span class="nb">set</span> by /Users/luckypool/.anyenv/envs/plenv/version<span class="o">)</span>
pyenv:
  system
  <span class="m">2</span>.7.6
* <span class="m">3</span>.3.3 <span class="o">(</span><span class="nb">set</span> by /Users/luckypool/.anyenv/envs/pyenv/version<span class="o">)</span>
rbenv:
  system
* <span class="m">2</span>.1.0 <span class="o">(</span><span class="nb">set</span> by /Users/luckypool/.anyenv/envs/rbenv/version<span class="o">)</span>
</pre></div></div>

<h3>
<span id="転ばぬ先の杖" class="fragment"></span><a href="#%E8%BB%A2%E3%81%B0%E3%81%AC%E5%85%88%E3%81%AE%E6%9D%96"><i class="fa fa-link"></i></a>転ばぬ先の杖</h3>

<p>必要に応じて確認すればいいですが、忘れがちなので、下記の確認もしておきます。</p>

<p>rubyのコードのためにbundlerをいれときます。</p>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>$ which gem
/Users/luckypool/.anyenv/envs/rbenv/shims/gem
$ gem install bundler
$ which bundle
/Users/luckypool/.anyenv/envs/rbenv/shims/bundle
</pre></div></div>

<p>perlのコードのためにcpanmとcartonをいれときます。</p>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>$ plenv install-cpanm
$ cpanm Carton
$ which carton
$ /Users/luckypool/.anyenv/envs/plenv/shims/carton
</pre></div></div>

<p>一応 pip と npm もPATHが通っているか確認します。</p>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>$ which pip
/Users/luckypool/.anyenv/envs/pyenv/shims/pip
$ which npm
/Users/luckypool/.anyenv/envs/ndenv/shims/npm
</pre></div></div>

<hr>

<p>以上！</p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1" style="height:150px;">
<tr>
	<td rowspan="3">97位</td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="thumb-up-120px.png" /></i>659</kbd>
		<a target="_blank" href="https://qiita.com/asakahara/items/32002bbf76ec112366b4">アプリエンジニアがアプリのデザインで困った時に頼るべきサイト一覧</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2014-02-12<br />22:50:55</center>
	</td>
	<td style="width:200px;">
		<!--投稿者-->
		<center>
			@<a href="user/30826.html">asakahara</a>(18件の記事)<br />(株式会社ソニックムーブ 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/30826/profile-images/1473685563">
		</center>
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[iPhone]</b> <b>[iOS]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<!--
		<div style="width:350px;height:150px;overflow:scroll;">%s</div>
		-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>この内容は前回の記事同様に始めたばかりの<a href="http://sakahara.hatenablog.jp/entry/2014/02/12/000341" rel="nofollow noopener" target="_blank">個人ブログ</a>に掲載していますが、少しでもたくさんの方に見ていただきたいので、Qiitaにも掲載することにしました。</p>

<h2>
<span id="概要" class="fragment"></span><a href="#%E6%A6%82%E8%A6%81"><i class="fa fa-link"></i></a>概要</h2>

<p>アプリを開発する環境やチームは人それぞれだと思います。数人のプログラマーとデザイナーのチームで開発することもあればほとんど全てを一人でやる場合など。</p>

<p>特に日曜プログラマーの人でアプリを公開してみたいとなるとデザイナーの知り合いにお願いするか、お金を払ってデザインの発注するをするのはちょっと厳しい場合もあると思います。<br>
そんな時に全てではなくともある程度のデザインを自力でする力があると非常に助かります。</p>

<p>私も個人でアプリ出してますが、デザインがうまくできないせいでホントによく苦労しました。そんな中で参考にさせていただいたサイトや実際につかっているアイコン集などもあるので、数は少ないですが紹介してみます。</p>

<h2>
<span id="おすすめサイト" class="fragment"></span><a href="#%E3%81%8A%E3%81%99%E3%81%99%E3%82%81%E3%82%B5%E3%82%A4%E3%83%88"><i class="fa fa-link"></i></a>おすすめサイト</h2>

<p>・<a href="http://pttrns.com/" rel="nofollow noopener" target="_blank">pttrns</a></p>

<p><a href="http://pttrns.com/" rel="nofollow noopener" target="_blank"><img src="https://camo.qiitausercontent.com/d8bc295a52080836991de9ba21ae5b3ea1bd0f85/687474703a2f2f63646e2d616b2e662e73742d686174656e612e636f6d2f696d616765732f666f746f6c6966652f732f73616b61686172612f32303134303231312f32303134303231313233353133302e706e67" alt="f:id:sakahara:20140211235130p:plain" title="f:id:sakahara:20140211235130p:plain" data-canonical-src="http://cdn-ak.f.st-hatena.com/images/fotolife/s/sakahara/20140211/20140211235130.png"></a></p>

<p>実際にリリースされているデザインのよい様々なアプリのスクリーンショットをカテゴリ毎に見れます。デザインの参考になるアプリが見たい場合はまずこちらがお勧めです。</p>

<p>・<a href="http://dribbble.com/" rel="nofollow noopener" target="_blank">dribbble</a></p>

<p><a href="http://dribbble.com/" rel="nofollow noopener" target="_blank"><img src="https://camo.qiitausercontent.com/c9f06baba0dea75e212e244f6b86ddc5a322fd42/687474703a2f2f63646e2d616b2e662e73742d686174656e612e636f6d2f696d616765732f666f746f6c6966652f732f73616b61686172612f32303134303231312f32303134303231313233353133382e706e67" alt="f:id:sakahara:20140211235138p:plain" title="f:id:sakahara:20140211235138p:plain" data-canonical-src="http://cdn-ak.f.st-hatena.com/images/fotolife/s/sakahara/20140211/20140211235138.png"></a></p>

<p>アプリ以外のデザインもありますが、ここに掲載されているアプリのデザインもとてもよいものが多いです。ここに掲載されているものは実際のアプリではなくコンセプト的なデザイン画像がほとんどです。</p>

<p>他にも日本のサイトでよいデザインを紹介してくれているサイトです。</p>

<p>・<a href="http://photoshopvip.net/archives/57164" rel="nofollow noopener" target="_blank">photoshopvip</a></p>

<p><a href="http://photoshopvip.net/archives/57164" rel="nofollow noopener" target="_blank"><img src="https://camo.qiitausercontent.com/fe4c8ad148ca08a9b9159978d4cb896261f5ad49/687474703a2f2f63646e2d616b2e662e73742d686174656e612e636f6d2f696d616765732f666f746f6c6966652f732f73616b61686172612f32303134303231312f32303134303231313233353134352e706e67" alt="f:id:sakahara:20140211235145p:plain" title="f:id:sakahara:20140211235145p:plain" data-canonical-src="http://cdn-ak.f.st-hatena.com/images/fotolife/s/sakahara/20140211/20140211235145.png"></a></p>

<p>こんなデザインがゼロからできるようになりたい！とよく思いますw</p>

<p>私はデザインのプロではないですし、デザインについて語れるほどの知識は持ち合わせていませんが、様々なデザインを見て実際にアプリを触ってみることで、より良い方法を知ることができます。そしてそれらを取り入れていくことが良い物を作る一番の近道だと思います。</p>

<p>自分でアイコン作るのも無理！という方は下記ここらのサイトからアイコンをゲットするのがよいです。有料のものが多いですが、一から描くことを考えると購入した方がかなり工数削減できます。それに加えVectorなどの様々なフォーマットに対応しているのでカスタマイズもできます。</p>

<h2>
<span id="アイコン等" class="fragment"></span><a href="#%E3%82%A2%E3%82%A4%E3%82%B3%E3%83%B3%E7%AD%89"><i class="fa fa-link"></i></a>アイコン等</h2>

<p>・<a href="http://www.glyphish.com/" rel="nofollow noopener" target="_blank">glyphish</a></p>

<p><a href="http://www.glyphish.com/" rel="nofollow noopener" target="_blank"><img src="https://camo.qiitausercontent.com/5eb9d0a59bde5187e910a0e8a4f0d160af8958aa/687474703a2f2f63646e2d616b2e662e73742d686174656e612e636f6d2f696d616765732f666f746f6c6966652f732f73616b61686172612f32303134303231312f32303134303231313233353135312e706e67" alt="f:id:sakahara:20140211235151p:plain" title="f:id:sakahara:20140211235151p:plain" data-canonical-src="http://cdn-ak.f.st-hatena.com/images/fotolife/s/sakahara/20140211/20140211235151.png"></a></p>

<p>・<a href="http://glyphicons.com/" rel="nofollow noopener" target="_blank">glyphicons.com</a></p>

<p><a href="http://glyphicons.com/" rel="nofollow noopener" target="_blank"><img src="https://camo.qiitausercontent.com/944096ed4322c380272f1751d05e748a0dab6c5b/687474703a2f2f63646e2d616b2e662e73742d686174656e612e636f6d2f696d616765732f666f746f6c6966652f732f73616b61686172612f32303134303231312f32303134303231313233353230312e706e67" alt="f:id:sakahara:20140211235201p:plain" title="f:id:sakahara:20140211235201p:plain" data-canonical-src="http://cdn-ak.f.st-hatena.com/images/fotolife/s/sakahara/20140211/20140211235201.png"></a></p>

<h2>
<span id="最後に" class="fragment"></span><a href="#%E6%9C%80%E5%BE%8C%E3%81%AB"><i class="fa fa-link"></i></a>最後に</h2>

<p>アプリ作ってる方でデザインに苦労してる方に是非参考にして頂きたいと思います。<br>
また紹介したサイト以外にもまだまだ参考になる情報はあるので是非探してみてください。</p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1" style="height:150px;">
<tr>
	<td rowspan="3">98位</td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="thumb-up-120px.png" /></i>655</kbd>
		<a target="_blank" href="https://qiita.com/yuya_presto/items/ef199e08021dea777715">gitのdiff, status, logを極限までコンパクト化＋便利化する</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2014-02-04<br />22:11:20</center>
	</td>
	<td style="width:200px;">
		<!--投稿者-->
		<center>
			@<a href="user/4153.html">yuya_presto</a>(38件の記事)<br />(codeTakt (ex- mixi) 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/4153/profile-images/1473683814">
		</center>
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Git]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<!--
		<div style="width:350px;height:150px;overflow:scroll;">%s</div>
		-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>gitで色表示が有効になっていることを前提としています。まだの方は下記のコマンドで設定してください。</p>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>git config --global color.ui auto   <span class="c1"># 出力先が端末のときに色をつけて表示する</span>
</pre></div></div>

<h2>
<span id="git-diffを見やすくする" class="fragment"></span><a href="#git-diff%E3%82%92%E8%A6%8B%E3%82%84%E3%81%99%E3%81%8F%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>git diffを見やすくする</h2>

<h3>
<span id="git-diff---color-words-で差分を小さく表示する" class="fragment"></span><a href="#git-diff---color-words-%E3%81%A7%E5%B7%AE%E5%88%86%E3%82%92%E5%B0%8F%E3%81%95%E3%81%8F%E8%A1%A8%E7%A4%BA%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>git diff --color-words で差分を小さく表示する</h3>

<p>通常のgit diffは行単位なので、例えば変数名を一括変更した場合見づらいです。</p>

<p>--color-wordsを指定すると記号やスペースで区切られた単語単位でのdiffを表示できます。gitの設定は不要です。</p>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>git diff --color-words  <span class="c1"># 差分を単語単位で色分けで表示する</span>
</pre></div></div>

<p><a href="https://camo.qiitausercontent.com/07df4abff5a03f417f4b5bfd4018b2a42dcba75c/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f343135332f65656335363264612d653361612d616137322d303330382d3832663632636232383265362e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/07df4abff5a03f417f4b5bfd4018b2a42dcba75c/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f343135332f65656335363264612d653361612d616137322d303330382d3832663632636232383265362e706e67" alt="diff-by-words-color-words.png" title="diff-by-words-color-words.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/4153/eec562da-e3aa-aa72-0308-82f62cb282e6.png"></a></p>

<p>より細かな表示のカスタマイズも可能です。man git-diffで--word-diffを検索してみてください。<br>
※ただし、変更が複雑な場合は、通常のgit diffのほうが見やすいこともあります。</p>

<h3>
<span id="gitattributesを設置してもっと小さく表示する" class="fragment"></span><a href="#gitattributes%E3%82%92%E8%A8%AD%E7%BD%AE%E3%81%97%E3%81%A6%E3%82%82%E3%81%A3%E3%81%A8%E5%B0%8F%E3%81%95%E3%81%8F%E8%A1%A8%E7%A4%BA%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>.gitattributesを設置してもっと小さく表示する</h3>

<p>.gitattributesファイルを設置することで、言語文法に基づいて変数名、関数名といった単位でdiffを表示できます<br>
ファイル設置後にgit diff --color-wordsとすると、下記のようにさらに小さく表示できます。（下記はjsの例です）</p>

<p><a href="https://camo.qiitausercontent.com/194b0a7511cae918f5005e447809a782a2f5a0e6/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f343135332f31626438616639612d636432652d643037622d353035652d6136396435316236313966362e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/194b0a7511cae918f5005e447809a782a2f5a0e6/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f343135332f31626438616639612d636432652d643037622d353035652d6136396435316236313966362e706e67" alt="diff-by-words-with-gitattributes.png" title="diff-by-words-with-gitattributes.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/4153/1bd8af9a-cd2e-d07b-505e-a69d51b619f6.png"></a></p>

<p>設定のために、リポジトリのルートに.gitattributesを作成する必要があります。例えば下記のような内容にします。</p>

<div class="code-frame" data-lang="gitattributes"><div class="highlight"><pre><span></span>*.c diff=cpp
*.h diff=cpp
*.cpp diff=cpp
*.hpp diff=cpp
*.m diff=objc
*.java diff=java
*.html diff=html
*.pl diff=perl
*.pm diff=perl
*.t diff=perl
*.php diff=php
*.py diff=python
*.rb diff=ruby
*.js diff=java
</pre></div></div>

<p>※全てのリポジトリに適用するには下記を参照ください。</p>

<h3>
<span id="gitattributesやgitignoreを全てのリポジトリに適用する" class="fragment"></span><a href="#gitattributes%E3%82%84gitignore%E3%82%92%E5%85%A8%E3%81%A6%E3%81%AE%E3%83%AA%E3%83%9D%E3%82%B8%E3%83%88%E3%83%AA%E3%81%AB%E9%81%A9%E7%94%A8%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>.gitattributesや.gitignoreを全てのリポジトリに適用する</h3>

<p>同じフォーマットのファイルをホームディレクトリなどに置いておき、~/.gitconfigに設定しておきます。</p>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>git config --global core.attributesfile ~/.gitattributes_global
git config --global core.excludesfile ~/.gitignore_global
</pre></div></div>

<h2>
<span id="git-statusを見やすくする" class="fragment"></span><a href="#git-status%E3%82%92%E8%A6%8B%E3%82%84%E3%81%99%E3%81%8F%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>git statusを見やすくする</h2>

<h3>
<span id="git-status---short---branchで現状をコンパクトに表示する" class="fragment"></span><a href="#git-status---short---branch%E3%81%A7%E7%8F%BE%E7%8A%B6%E3%82%92%E3%82%B3%E3%83%B3%E3%83%91%E3%82%AF%E3%83%88%E3%81%AB%E8%A1%A8%E7%A4%BA%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>git status --short --branchで現状をコンパクトに表示する</h3>

<p>git statusはlsよりも使う（当社比）コマンドなのに、表示が長いので、コンパクトにします。</p>

<p><a href="https://camo.qiitausercontent.com/b1658823951a5ccd2dbee50229fca5290a4cd1a3/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f343135332f65313635663031342d636539612d313132652d306138342d3133343839386336613366632e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/b1658823951a5ccd2dbee50229fca5290a4cd1a3/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f343135332f65313635663031342d636539612d313132652d306138342d3133343839386336613366632e706e67" alt="status-short-branch.png" title="status-short-branch.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/4153/e165f014-ce9a-112e-0a84-134898c6a3fc.png"></a></p>

<ul>
<li>
<code>--short</code>：今回のキモです</li>
<li>
<code>--branch</code>：一番上の"##"の行にbranch名を表示します</li>
</ul>

<p>MやUの表示の代表例は下記のとおりです。</p>

<table>
<thead>
<tr>
<th style="text-align: left">凡例</th>
<th style="text-align: left">説明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left">M_</td>
<td style="text-align: left">変更がgit addされている (staged)</td>
</tr>
<tr>
<td style="text-align: left">_M</td>
<td style="text-align: left">変更がgit addされていない (modified)</td>
</tr>
<tr>
<td style="text-align: left">A_</td>
<td style="text-align: left">新しいファイルがgit addされている</td>
</tr>
<tr>
<td style="text-align: left">_D</td>
<td style="text-align: left">rmされているけどgit addやgit rmはされていない</td>
</tr>
<tr>
<td style="text-align: left">??</td>
<td style="text-align: left">gitに登録されていない（untracked）</td>
</tr>
<tr>
<td style="text-align: left">UU</td>
<td style="text-align: left">mergeするbranchも手元も変更がありconflictした (unmerged)</td>
</tr>
<tr>
<td style="text-align: left">DU</td>
<td style="text-align: left">mergeするbranchで変更されたが手元では削除されいるのでconflictした</td>
</tr>
</tbody>
</table>

<p>左がmergeされるbranchまたはadd済みで、右がmergeするbranchまたはローカル変更であることを覚えておくと便利です。</p>

<h2>
<span id="git-logを見やすくする" class="fragment"></span><a href="#git-log%E3%82%92%E8%A6%8B%E3%82%84%E3%81%99%E3%81%8F%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>git logを見やすくする</h2>

<p>（※自分が使ってる一番普通のgit logに近いコマンドは<code>git log --stat --decorate --find-renames</code>でした）</p>

<h3>
<span id="git-log---graph---decorate---onelineでguiツールっぽくcommitmerge履歴を表示する" class="fragment"></span><a href="#git-log---graph---decorate---oneline%E3%81%A7gui%E3%83%84%E3%83%BC%E3%83%AB%E3%81%A3%E3%81%BD%E3%81%8Fcommitmerge%E5%B1%A5%E6%AD%B4%E3%82%92%E8%A1%A8%E7%A4%BA%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>git log --graph --decorate --onelineでGUIツールっぽくcommit/merge履歴を表示する</h3>

<p><a href="http://www.eclipse.org/egit/" rel="nofollow noopener" target="_blank">EGit(eclipse)</a>や<a href="http://gitx.laullon.com/" rel="nofollow noopener" target="_blank">GitX</a>、<a href="http://qiita.com/tags/tig">tig</a>で表示されるgit log情報は、1行に要約されてmerge関係も表示されるので、<br>
commitの一覧を確認するためにとても便利です。これをgitコマンドでも実現できます。</p>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>git log --graph --decorate --oneline
</pre></div></div>

<p><a href="https://camo.qiitausercontent.com/859c660834b5f7c70d534faa8c85d6377f8f554c/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f343135332f39313434353465382d633661322d666235352d643266332d6634333734396630656137652e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/859c660834b5f7c70d534faa8c85d6377f8f554c/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f343135332f39313434353465382d633661322d666235352d643266332d6634333734396630656137652e706e67" alt="log-graph-decorate-oneline.png" title="log-graph-decorate-oneline.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/4153/914454e8-c6a2-fb55-d2f3-f43749f0ea7e.png"></a></p>

<ul>
<li>
<code>--graph</code>：commit履歴をグラフ形式で表示します。merge関係の表示に便利です。
※指定しない場合のlogの順番はcommit時間が新しい順になります。</li>
<li>
<code>--decorate</code>：commitごとにbranch名、タグ名を表示します。</li>
<li>
<code>--oneline</code>：1行で見やすい表示にします。詳細はman git-logのCommit Formattingの節を参照のこと。</li>
</ul>

<h3>
<span id="git-log--p---statで差分や変更されたファイルも一緒に見る" class="fragment"></span><a href="#git-log--p---stat%E3%81%A7%E5%B7%AE%E5%88%86%E3%82%84%E5%A4%89%E6%9B%B4%E3%81%95%E3%82%8C%E3%81%9F%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%82%82%E4%B8%80%E7%B7%92%E3%81%AB%E8%A6%8B%E3%82%8B"><i class="fa fa-link"></i></a>git log -p --statで差分や変更されたファイルも一緒に見る</h3>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>git log -p      <span class="c1"># 差分を表示</span>
git log --stat  <span class="c1"># ファイルごとの変更行数を表示</span>
</pre></div></div>

<h2>
<span id="ファイル名変更を追跡してlog--pやdiffをコンパクト化する" class="fragment"></span><a href="#%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E5%90%8D%E5%A4%89%E6%9B%B4%E3%82%92%E8%BF%BD%E8%B7%A1%E3%81%97%E3%81%A6log--p%E3%82%84diff%E3%82%92%E3%82%B3%E3%83%B3%E3%83%91%E3%82%AF%E3%83%88%E5%8C%96%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>ファイル名変更を追跡して、log -pやdiffをコンパクト化する</h2>

<p>ファイル名変更差分は、通常だと全delete＋全addとして表示されますが、git diffやgit log -pに-Mもしくは--find-renamesを追加すると、rename＋内容の差分で表示してくれるのでコンパクトになります。</p>

<p>便利なことにこれをデフォルト化するオプションがあります。</p>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>git config --global diff.renames <span class="nb">true</span>
</pre></div></div>

<p>git log --stat --find-renamesは下記のように表示されます。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>path/to/{file.pl =&gt; renamed_file.pl} | 21 ++++++++++++++++-----
</pre></div></div>

<p>git diff --find-renamesやgit log -p --find-renamesは下記のように表示されます。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>diff --git path/to/file.pl path/to/renamed_file.pl
similarity index 82%
rename from path/to/file.pl
rename to path/to/renamed_file.pl
index 357d760..2e18a5c 100644
--- path/to/file.pl
+++ path/to/renamed_file.pl
（ファイルの内容の差分）
</pre></div></div>

<p>参照: <a href="http://qiita.com/kenbeese/items/31383bb77848b98161bb" class="autolink" id="reference-eab29e58819d6911ce3c">http://qiita.com/kenbeese/items/31383bb77848b98161bb</a></p>

<h2>
<span id="ファイル名変更を追跡してlog-filenameを1回で済ませる" class="fragment"></span><a href="#%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E5%90%8D%E5%A4%89%E6%9B%B4%E3%82%92%E8%BF%BD%E8%B7%A1%E3%81%97%E3%81%A6log-filename%E3%82%921%E5%9B%9E%E3%81%A7%E6%B8%88%E3%81%BE%E3%81%9B%E3%82%8B"><i class="fa fa-link"></i></a>ファイル名変更を追跡して、log [filename]を1回で済ませる</h2>

<p>特定ファイルの履歴を見たいとき、 <code>git log [filename]</code> を使うことができますが、履歴の途中でファイル名が変更された時には履歴が途切れてしまいます。<br>
変更前のファイル名でもう1回git logするのが定番かと思いますが、 <code>git log --follow [filename]</code> とすることで、ファイル名変更を自動で追跡することができます。</p>

<h2>
<span id="git-diffとgit-logの範囲指定を簡単にする" class="fragment"></span><a href="#git-diff%E3%81%A8git-log%E3%81%AE%E7%AF%84%E5%9B%B2%E6%8C%87%E5%AE%9A%E3%82%92%E7%B0%A1%E5%8D%98%E3%81%AB%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>git diffとgit logの範囲指定を簡単にする</h2>

<h3>
<span id="git-log-abで特定範囲のcommit履歴を表示する" class="fragment"></span><a href="#git-log-ab%E3%81%A7%E7%89%B9%E5%AE%9A%E7%AF%84%E5%9B%B2%E3%81%AEcommit%E5%B1%A5%E6%AD%B4%E3%82%92%E8%A1%A8%E7%A4%BA%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>git log A..Bで特定範囲のcommit履歴を表示する</h3>

<p>例えば、下記のような使い方ができます。</p>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>git log <span class="m">1</span>.0.0..             <span class="c1"># version 1.0.0から現在のbranchへのcommit履歴を表示</span>
git log master..feature     <span class="c1"># feature branchに積まれたcommit履歴を表示（masterが進んでいてもOK）</span>
</pre></div></div>

<h3>
<span id="git-diff-abでbranch全体の差分を表示する" class="fragment"></span><a href="#git-diff-ab%E3%81%A7branch%E5%85%A8%E4%BD%93%E3%81%AE%E5%B7%AE%E5%88%86%E3%82%92%E8%A1%A8%E7%A4%BA%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>git diff A...Bでbranch全体の差分を表示する</h3>

<p>branchに積まれた差分全体のdiffを表示するために、git logでcommit番号を確認する必要がなくなります。</p>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>git diff master...feature   <span class="c1"># feature branchに積まれた差分を表示（masterが進んでいてもOK）</span>
</pre></div></div>

<p>どのファイルが変更されたのかを見たい場合は、<code>--name-only</code>をつけます。</p>

<p>補足：</p>

<ul>
<li>
<code>git diff A..B</code>はAとB間で普通のdiffを表示します。</li>
<li>
<code>git diff A</code>はgit diff A..HEADと等価です。</li>
<li>枝分かれしたcommit番号自体を知りたいときは、git merge-base A Bを使います。
<code>git diff A...B</code>は<code>git diff `git merge-base A B`..B</code>と等価です。</li>
</ul>

<h2>
<span id="差分をテストしやすくする" class="fragment"></span><a href="#%E5%B7%AE%E5%88%86%E3%82%92%E3%83%86%E3%82%B9%E3%83%88%E3%81%97%E3%82%84%E3%81%99%E3%81%8F%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>差分をテストしやすくする</h2>

<h3>
<span id="git-diff---name-onlyで変更されたファイル一覧を取得する" class="fragment"></span><a href="#git-diff---name-only%E3%81%A7%E5%A4%89%E6%9B%B4%E3%81%95%E3%82%8C%E3%81%9F%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E4%B8%80%E8%A6%A7%E3%82%92%E5%8F%96%E5%BE%97%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>git diff --name-onlyで変更されたファイル一覧を取得する</h3>

<p>変更されたファイルだけテストを実行したい場合、例えば下記のように実行することができます。</p>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>prove <span class="sb">`</span>git diff --name-only <span class="p">|</span> egrep <span class="s1">'\.js$|\.pm$'</span><span class="sb">`</span>   <span class="c1"># perlのテストを実行</span>
jshint <span class="sb">`</span>git diff --name-only <span class="p">|</span> egrep <span class="s1">'\.js$'</span><span class="sb">`</span>        <span class="c1"># jshintを実行</span>
</pre></div></div>

<p>もちろん、git addしたファイルを表示する--cachedや、git diff [branch名]のような指定も可能です。</p>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>your-test-tool <span class="sb">`</span>git diff --name-only --cached<span class="sb">`</span>           <span class="c1"># commit予定の差分をテスト</span>
your-test-tool <span class="sb">`</span>git diff --name-only origin/master...<span class="sb">`</span>   <span class="c1"># origin/masterにmerge予定の差分をテスト</span>
</pre></div></div>

<h2>
<span id="上記の全部を便利にする" class="fragment"></span><a href="#%E4%B8%8A%E8%A8%98%E3%81%AE%E5%85%A8%E9%83%A8%E3%82%92%E4%BE%BF%E5%88%A9%E3%81%AB%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>上記の全部を便利にする</h2>

<h3>
<span id="gitconfigにaliasを作成する" class="fragment"></span><a href="#gitconfig%E3%81%ABalias%E3%82%92%E4%BD%9C%E6%88%90%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>.gitconfigにaliasを作成する</h3>

<p>例えば、commit/merge履歴をグラフで表示するコマンドをgit graphにしたい場合、下記のコマンドでOKです。</p>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>git config --global alias.graph <span class="s1">'log --graph --decorate --oneline'</span>
</pre></div></div>

<p>削除は下記のとおりです。</p>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>git config --global --unset alias.graph
</pre></div></div>

<p>※よく使うものは.bashrcや.zshrcのaliasにしたほうが便利です。</p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1" style="height:150px;">
<tr>
	<td rowspan="3">99位</td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="thumb-up-120px.png" /></i>654</kbd>
		<a target="_blank" href="https://qiita.com/shu223/items/a99ed643b9f0b2ed4254">評判のいいiOSアプリ開発のTips ベスト20</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-05-01<br />11:54:17</center>
	</td>
	<td style="width:200px;">
		<!--投稿者-->
		<center>
			@<a href="user/3180.html">shu223</a>(171件の記事)<br />(Freelancer 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/3180/profile-images/1473682733">
		</center>
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Objective-C]</b> <b>[iPhone]</b> <b>[Xcode]</b> <b>[iOS]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<!--
		<div style="width:350px;height:150px;overflow:scroll;">%s</div>
		-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>『<a href="http://www.facebook.com/iOSDevTips" rel="nofollow noopener" target="_blank">iOSアプリ開発に役立つTips</a>』という Facebook ページをやっておりまして、そこで<strong>評判が良かった投稿</strong>を 20 個ほど紹介します。（※ Facebook ページの insights にある「クチコミ度」の高いもの）</p>

<h2>
<span id="アプリ実行中にコードを修正してそのまま実行中のアプリに反映させる" class="fragment"></span><a href="#%E3%82%A2%E3%83%97%E3%83%AA%E5%AE%9F%E8%A1%8C%E4%B8%AD%E3%81%AB%E3%82%B3%E3%83%BC%E3%83%89%E3%82%92%E4%BF%AE%E6%AD%A3%E3%81%97%E3%81%A6%E3%81%9D%E3%81%AE%E3%81%BE%E3%81%BE%E5%AE%9F%E8%A1%8C%E4%B8%AD%E3%81%AE%E3%82%A2%E3%83%97%E3%83%AA%E3%81%AB%E5%8F%8D%E6%98%A0%E3%81%95%E3%81%9B%E3%82%8B"><i class="fa fa-link"></i></a>アプリ実行中にコードを修正してそのまま実行中のアプリに反映させる</h2>

<p>アプリ実行中にコードを修正してそのまま実行中のアプリに反映させることができるXcodeプラグイン。</p>

<p>実機でもシミュレータでも使用可能とのこと。実機での動作検証中に修正して再インストールは時間かかるので、超ありがたいかも。</p>

<p><a href="http://injectionforxcode.com/" rel="nofollow noopener" target="_blank">Injection for Xcode</a></p>

<p><a href="http://www.facebook.com/iOSDevTips/posts/600082166672616" rel="nofollow noopener" target="_blank">投稿：2013/2/4</a></p>

<h2>
<span id="pcのwebブラウザからiphoneのカメラロールにアクセスできるようにするアプリのしくみ" class="fragment"></span><a href="#pc%E3%81%AEweb%E3%83%96%E3%83%A9%E3%82%A6%E3%82%B6%E3%81%8B%E3%82%89iphone%E3%81%AE%E3%82%AB%E3%83%A1%E3%83%A9%E3%83%AD%E3%83%BC%E3%83%AB%E3%81%AB%E3%82%A2%E3%82%AF%E3%82%BB%E3%82%B9%E3%81%A7%E3%81%8D%E3%82%8B%E3%82%88%E3%81%86%E3%81%AB%E3%81%99%E3%82%8B%E3%82%A2%E3%83%97%E3%83%AA%E3%81%AE%E3%81%97%E3%81%8F%E3%81%BF"><i class="fa fa-link"></i></a>「PCのwebブラウザからiPhoneのカメラロールにアクセスできるようにするアプリ」のしくみ</h2>

<p>PCのwebブラウザからカメラロールにアクセスできるようにするアプリ。</p>

<p>アプリ側でURLを発行している画面キャプチャがあるので、<strong>アプリにHTTPサーバ機能をもたせて</strong>（古いけどCocoaHttpServerとか）、<strong>アプリ側でカメラロールにアクセスしてその情報をweb経由で見せる</strong>、というしくみでしょうか。</p>

<p><a href="https://camo.qiitausercontent.com/77e63d2c50d2672b3f88e6435fd6d41d0e957d96/687474703a2f2f65787465726e616c2e616b2e666263646e2e6e65742f736166655f696d6167652e7068703f643d415143766c7557326f4866685435703426773d31353526683d3131342675726c3d68747470253341253246253246666565647461696c6f722e6a70253246777025324677702d636f6e74656e7425324675706c6f6164732532463230313325324630342532466169726c69625f3230313330343137303634392e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/77e63d2c50d2672b3f88e6435fd6d41d0e957d96/687474703a2f2f65787465726e616c2e616b2e666263646e2e6e65742f736166655f696d6167652e7068703f643d415143766c7557326f4866685435703426773d31353526683d3131342675726c3d68747470253341253246253246666565647461696c6f722e6a70253246777025324677702d636f6e74656e7425324675706c6f6164732532463230313325324630342532466169726c69625f3230313330343137303634392e706e67" alt="" data-canonical-src="http://external.ak.fbcdn.net/safe_image.php?d=AQCvluW2oHfhT5p4&amp;w=155&amp;h=114&amp;url=http%3A%2F%2Ffeedtailor.jp%2Fwp%2Fwp-content%2Fuploads%2F2013%2F04%2Fairlib_201304170649.png"></a></p>

<p><a href="http://feedtailor.jp/wp/?p=11580" rel="nofollow noopener" target="_blank">新作！iPhoneのカメラロールをブラウザからアクセス出来るようにするアプリ「AirLib」を公開します | 関西/大阪のiPhone・iPadアプリ開発 feedtailor Inc. 社長ブログ</a></p>

<p><a href="http://www.facebook.com/538949829459616/posts/572670282754237" rel="nofollow noopener" target="_blank">投稿：2013/4/15</a></p>

<h2>
<span id="イラレで書いたパスデータをuibezierpathのコードに変換してくれるイラレ拡張" class="fragment"></span><a href="#%E3%82%A4%E3%83%A9%E3%83%AC%E3%81%A7%E6%9B%B8%E3%81%84%E3%81%9F%E3%83%91%E3%82%B9%E3%83%87%E3%83%BC%E3%82%BF%E3%82%92uibezierpath%E3%81%AE%E3%82%B3%E3%83%BC%E3%83%89%E3%81%AB%E5%A4%89%E6%8F%9B%E3%81%97%E3%81%A6%E3%81%8F%E3%82%8C%E3%82%8B%E3%82%A4%E3%83%A9%E3%83%AC%E6%8B%A1%E5%BC%B5"><i class="fa fa-link"></i></a>イラレで書いたパスデータを、UIBezierPathのコードに変換してくれるイラレ拡張</h2>

<p>イラレで書いたパスデータを、UIBezierPathのコードに変換してくれるイラレの拡張。</p>

<p>UIBezierPathでコードだけでいい感じの図形とか画像を描くのは無理があるので、これは便利かも。</p>

<p><a href="http://drawscri.pt/" rel="nofollow noopener" target="_blank">Drawscript - convert Illustrator shapes into code</a></p>

<p><a href="http://www.facebook.com/538949829459616/posts/122493027943932" rel="nofollow noopener" target="_blank">投稿：2013/4/1</a></p>

<h2>
<span id="アプリを操作中の写真を自動生成してくれるサービス" class="fragment"></span><a href="#%E3%82%A2%E3%83%97%E3%83%AA%E3%82%92%E6%93%8D%E4%BD%9C%E4%B8%AD%E3%81%AE%E5%86%99%E7%9C%9F%E3%82%92%E8%87%AA%E5%8B%95%E7%94%9F%E6%88%90%E3%81%97%E3%81%A6%E3%81%8F%E3%82%8C%E3%82%8B%E3%82%B5%E3%83%BC%E3%83%93%E3%82%B9"><i class="fa fa-link"></i></a>「アプリを操作中の写真」を自動生成してくれるサービス</h2>

<p>スクリーンショットの画像をアップすると、<strong>ハメコミ合成で「アプリを操作中の写真」を自動生成</strong>してくれるサイト。</p>

<p>ちょっと手元のスクリーンショットでやってみましたがなかなかいい感じの仕上がりでした。</p>

<p><a href="https://camo.qiitausercontent.com/ed1be531019523ffff3c918aa738011d8bd1a1aa/687474703a2f2f65787465726e616c2e616b2e666263646e2e6e65742f736166655f696d6167652e7068703f643d4151416d6a6d334c37354238314e356926773d31353526683d3131342675726c3d68747470253341253246253246706c61636569742e627265657a692e636f6d25324675706c6f616473253246737461676525324673746167655f696d61676525324636362532467468756d625f627265657a695f706c61636569745f5f315f2e706e6725334631333631323938373734" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/ed1be531019523ffff3c918aa738011d8bd1a1aa/687474703a2f2f65787465726e616c2e616b2e666263646e2e6e65742f736166655f696d6167652e7068703f643d4151416d6a6d334c37354238314e356926773d31353526683d3131342675726c3d68747470253341253246253246706c61636569742e627265657a692e636f6d25324675706c6f616473253246737461676525324673746167655f696d61676525324636362532467468756d625f627265657a695f706c61636569745f5f315f2e706e6725334631333631323938373734" alt="" data-canonical-src="http://external.ak.fbcdn.net/safe_image.php?d=AQAmjm3L75B81N5i&amp;w=155&amp;h=114&amp;url=http%3A%2F%2Fplaceit.breezi.com%2Fuploads%2Fstage%2Fstage_image%2F66%2Fthumb_breezi_placeit__1_.png%3F1361298774"></a></p>

<p><a href="http://placeit.breezi.com/productshots/83" rel="nofollow noopener" target="_blank">PlaceIt by Breezi - Generate Product Screenshots in Realistic Environments</a></p>

<p><a href="http://www.facebook.com/538949829459616/posts/367630723354164" rel="nofollow noopener" target="_blank">投稿：2013/4/10</a></p>

<h2>
<span id="コマンドラインからjsonをごにょごにょする" class="fragment"></span><a href="#%E3%82%B3%E3%83%9E%E3%83%B3%E3%83%89%E3%83%A9%E3%82%A4%E3%83%B3%E3%81%8B%E3%82%89json%E3%82%92%E3%81%94%E3%81%AB%E3%82%87%E3%81%94%E3%81%AB%E3%82%87%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>コマンドラインからJSONをごにょごにょする</h2>

<p>特にiOSアプリ開発に限った話ではないのですが、jqという、「コマンドラインからJSONをごにょごにょできる」コマンドがかなり便利そうです。</p>

<p>たとえば、ルート直下の要素だけを取り出したい場合は、</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ jq ".[0]" hoge.json
</pre></div></div>

<p>"entities"要素内の"hashtags"要素内の"text"という要素を取り出したい場合は</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ jq ".[].entities.hashtags[].text" hoge.json
</pre></div></div>

<p>みたいな感じで簡単にとれて、はじめて使うAPIのレスポンスの構造を調べるときとかに活躍しそうです。</p>

<p><a href="http://beatsync.net/main/log20130428.html" rel="nofollow noopener" target="_blank">jqコマンドが実は高性能すぎてビビッた話</a></p>

<p><a href="http://www.facebook.com/538949829459616/posts/577161045638494" rel="nofollow noopener" target="_blank">投稿：2013/4/26</a></p>

<h2>
<span id="nsnumberformatterで英語の勉強" class="fragment"></span><a href="#nsnumberformatter%E3%81%A7%E8%8B%B1%E8%AA%9E%E3%81%AE%E5%8B%89%E5%BC%B7"><i class="fa fa-link"></i></a>NSNumberFormatterで英語の勉強</h2>

<p>NSNumberFormatterのいろいろなサンプル。3桁ごとにカンマ区切りにする「以外」のサンプルってあまり見つからないので参考になりました。</p>

<p>とくに、NSNumberFormatterSpellOutStyleがおもしろくて、たとえば、</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>[formatter setNumberStyle:NSNumberFormatterSpellOutStyle];
NSString *formattedOutput = [formatter stringFromNumber:@129];
</pre></div></div>

<p>こうやると、</p>

<blockquote>
<p>one hundred twenty-nine</p>
</blockquote>

<p>って出力してくれます。</p>

<p>これで英語の勉強アプリつくれそうです。</p>

<p><a href="http://iosdevelopertips.com/cocoa/formatting-numbers-nsnumberformatter-examples.html" rel="nofollow noopener" target="_blank">Formatting Numbers – NSNumberFormatter Examples</a></p>

<h2>
<span id="iphoneの設定から通信速度を制限する" class="fragment"></span><a href="#iphone%E3%81%AE%E8%A8%AD%E5%AE%9A%E3%81%8B%E3%82%89%E9%80%9A%E4%BF%A1%E9%80%9F%E5%BA%A6%E3%82%92%E5%88%B6%E9%99%90%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>iPhoneの設定から通信速度を制限する</h2>

<p>久しぶりに設定の「デベロッパ」のとこ見てみたら、この通信速度以外にも、iAdのテスト用設定とかも追加されてました。</p>

<p><a href="https://camo.qiitausercontent.com/7f4985428805eb18c40978657ce3c8da8abdc4ed/687474703a2f2f65787465726e616c2e616b2e666263646e2e6e65742f736166655f696d6167652e7068703f643d415141776a7a6252395161753755496926773d31353526683d3131342675726c3d6874747025334125324625324632352e6d656469612e74756d626c722e636f6d253246396332663438393236303765636434636234393234643463633039656666373225324674756d626c725f6d6934366774304c587131717a7a616f376f335f3430302e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/7f4985428805eb18c40978657ce3c8da8abdc4ed/687474703a2f2f65787465726e616c2e616b2e666263646e2e6e65742f736166655f696d6167652e7068703f643d415141776a7a6252395161753755496926773d31353526683d3131342675726c3d6874747025334125324625324632352e6d656469612e74756d626c722e636f6d253246396332663438393236303765636434636234393234643463633039656666373225324674756d626c725f6d6934366774304c587131717a7a616f376f335f3430302e706e67" alt="" data-canonical-src="http://external.ak.fbcdn.net/safe_image.php?d=AQAwjzbR9Qau7UIi&amp;w=155&amp;h=114&amp;url=http%3A%2F%2F25.media.tumblr.com%2F9c2f4892607ecd4cb4924d4cc09eff72%2Ftumblr_mi46gt0LXq1qzzao7o3_400.png"></a></p>

<p><a href="http://qiita.com/items/efd3a033ac42afd93714">iPhone5実機(iOS6.0.2)で通信速度を制限する #iOS #iPhone - Qiita</a></p>

<p><a href="http://www.facebook.com/iOSDevTips/posts/420807358006603" rel="nofollow noopener" target="_blank">投稿：2013/2/14</a></p>

<h2>
<span id="core-animation-programming-guide大幅改定" class="fragment"></span><a href="#core-animation-programming-guide%E5%A4%A7%E5%B9%85%E6%94%B9%E5%AE%9A"><i class="fa fa-link"></i></a>『Core Animation Programming Guide』大幅改定</h2>

<p>『Core Animation Programming Guide』が大幅改定されたもよう。前回の更新から実に2年4ヶ月ぶり。『Animation Types and Timing Programming Guide』の内容もこっちに組み込んだとのこと。</p>

<p><a href="http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/CoreAnimation_guide/" rel="nofollow noopener" target="_blank">Core Animation Programming Guide</a></p>

<p><a href="http://www.facebook.com/538949829459616/posts/299365523522567" rel="nofollow noopener" target="_blank">投稿：2013/2/19</a></p>

<h2>
<span id="caemitterlayer-caemittercellを使ったパーティクルエフェクトの実装方法" class="fragment"></span><a href="#caemitterlayer-caemittercell%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%9F%E3%83%91%E3%83%BC%E3%83%86%E3%82%A3%E3%82%AF%E3%83%AB%E3%82%A8%E3%83%95%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AE%E5%AE%9F%E8%A3%85%E6%96%B9%E6%B3%95"><i class="fa fa-link"></i></a>CAEmitterLayer, CAEmitterCellを使ったパーティクルエフェクトの実装方法</h2>

<p>iOS5からCore Animationに追加された、CAEmitterLayer, CAEmitterCellを使ったパーティクルエフェクトの実装方法について書きました。</p>

<p><a href="http://d.hatena.ne.jp/shu223/20130315/1363298992" rel="nofollow noopener" target="_blank">UIKit上でパーティクルエフェクトを表示する - Over&amp;Out その後</a></p>

<p><a href="http://www.facebook.com/538949829459616/posts/217483281727841" rel="nofollow noopener" target="_blank">投稿：2013/3/13</a></p>

<h2>
<span id="コマンドラインからipaをつくる" class="fragment"></span><a href="#%E3%82%B3%E3%83%9E%E3%83%B3%E3%83%89%E3%83%A9%E3%82%A4%E3%83%B3%E3%81%8B%E3%82%89ipa%E3%82%92%E3%81%A4%E3%81%8F%E3%82%8B"><i class="fa fa-link"></i></a>コマンドラインから.ipaをつくる</h2>

<p>コマンドラインから.ipaをつくると"make adhoc"だけでできて楽ですよ、という話。</p>

<p>最初だけMakefileをつくるひと手間が必要ですが、curlコマンドも書いておけばビルド完了後に自動でtestflightにアップもできる、というのは便利そうと思いました。</p>

<p><a href="http://blog.ishkawa.org/blog/2013/02/27/make-ipa/" rel="nofollow noopener" target="_blank">.ipaをサッとつくる - blog.ishkawa.org</a></p>

<p><a href="http://www.facebook.com/538949829459616/posts/588602487834938" rel="nofollow noopener" target="_blank">投稿：2013/3/11</a></p>

<h2>
<span id="バッテリーの超詳細情報を取得する" class="fragment"></span><a href="#%E3%83%90%E3%83%83%E3%83%86%E3%83%AA%E3%83%BC%E3%81%AE%E8%B6%85%E8%A9%B3%E7%B4%B0%E6%83%85%E5%A0%B1%E3%82%92%E5%8F%96%E5%BE%97%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>バッテリーの超詳細情報を取得する</h2>

<p>これを実機で実行すると、バッテリーの相当細かい情報まで取得できます。電圧までとれる。</p>

<p>ここまでとれるのか〜、とソースの中身みてみると、もろにプライベートAPI使ってました。。OSDBatteryっていうクラスがあるようです。</p>

<p><a href="https://github.com/lyonanderson/BatteryInfo/" rel="nofollow noopener" target="_blank">BatteryInfo</a></p>

<p><a href="http://www.facebook.com/538949829459616/posts/575521922469073" rel="nofollow noopener" target="_blank">投稿：2013/4/23</a></p>

<h2>
<span id="自然言語のテキストを属性で区分" class="fragment"></span><a href="#%E8%87%AA%E7%84%B6%E8%A8%80%E8%AA%9E%E3%81%AE%E3%83%86%E3%82%AD%E3%82%B9%E3%83%88%E3%82%92%E5%B1%9E%E6%80%A7%E3%81%A7%E5%8C%BA%E5%88%86"><i class="fa fa-link"></i></a>自然言語のテキストを属性で区分</h2>

<p>NSLinguisticTaggerについて書きました。</p>

<p>自然言語のテキストを品詞（名詞、動詞、代名詞）や「個人名」「地名」といった属性で区分することができます。あと、日本語の形態素解析も可能です。</p>

<p><a href="https://camo.qiitausercontent.com/6319df4ee1afae2a47ae5af5eac36d0ba1059b37/687474703a2f2f65787465726e616c2e616b2e666263646e2e6e65742f736166655f696d6167652e7068703f643d4151427148683933677443485a36417226773d31353526683d3131342675726c3d68747470253341253246253246662e636c2e6c792532466974656d732532463433306d32323145336b337a30693166327231512532464c696e67756973746963546167676572315f72315f63312e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/6319df4ee1afae2a47ae5af5eac36d0ba1059b37/687474703a2f2f65787465726e616c2e616b2e666263646e2e6e65742f736166655f696d6167652e7068703f643d4151427148683933677443485a36417226773d31353526683d3131342675726c3d68747470253341253246253246662e636c2e6c792532466974656d732532463433306d32323145336b337a30693166327231512532464c696e67756973746963546167676572315f72315f63312e706e67" alt="" data-canonical-src="http://external.ak.fbcdn.net/safe_image.php?d=AQBqHh93gtCHZ6Ar&amp;w=155&amp;h=114&amp;url=http%3A%2F%2Ff.cl.ly%2Fitems%2F430m221E3k3z0i1f2r1Q%2FLinguisticTagger1_r1_c1.png"></a></p>

<p><a href="http://d.hatena.ne.jp/shu223/20130318/1363566717" rel="nofollow noopener" target="_blank">自然言語のテキストを属性で区分する - Over&amp;Out その後</a></p>

<p><a href="http://www.facebook.com/538949829459616/posts/551597251540891" rel="nofollow noopener" target="_blank">投稿：2013/3/16</a></p>

<h2>
<span id="auto-layoutの詳説スライド" class="fragment"></span><a href="#auto-layout%E3%81%AE%E8%A9%B3%E8%AA%AC%E3%82%B9%E3%83%A9%E3%82%A4%E3%83%89"><i class="fa fa-link"></i></a>Auto Layoutの詳説スライド</h2>

<p>70ページにわたるAuto Layoutの解説スライド（日本語）</p>

<p>Auto Layoutの基礎知識から、IBでの設定方法、ソースでの設定方法などなど。</p>

<p><a href="https://camo.qiitausercontent.com/947792dc8c5b9e713b4d9470cc1d8f566f6be886/687474703a2f2f65787465726e616c2e616b2e666263646e2e6e65742f736166655f696d6167652e7068703f643d4151434571764b683651653877626e4326773d31353526683d3131342675726c3d68747470253341253246253246696d6167652e736c696465736861726563646e2e636f6d253246696f736175746f6c61796f75742d3132313231313031313635322d70687061707030312532463935253246736c6964652d312d313032342e6a7067" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/947792dc8c5b9e713b4d9470cc1d8f566f6be886/687474703a2f2f65787465726e616c2e616b2e666263646e2e6e65742f736166655f696d6167652e7068703f643d4151434571764b683651653877626e4326773d31353526683d3131342675726c3d68747470253341253246253246696d6167652e736c696465736861726563646e2e636f6d253246696f736175746f6c61796f75742d3132313231313031313635322d70687061707030312532463935253246736c6964652d312d313032342e6a7067" alt="" data-canonical-src="http://external.ak.fbcdn.net/safe_image.php?d=AQCEqvKh6Qe8wbnC&amp;w=155&amp;h=114&amp;url=http%3A%2F%2Fimage.slidesharecdn.com%2Fiosautolayout-121211011652-phpapp01%2F95%2Fslide-1-1024.jpg"></a></p>

<p><a href="http://www.slideshare.net/classmethod/i-os-auto-layout" rel="nofollow noopener" target="_blank">iOS6 Auto Layout</a></p>

<p><a href="http://www.facebook.com/iOSDevTips/posts/307662352688900" rel="nofollow noopener" target="_blank">投稿</a></p>

<h2>
<span id="画像を使用せずアイコンを描画" class="fragment"></span><a href="#%E7%94%BB%E5%83%8F%E3%82%92%E4%BD%BF%E7%94%A8%E3%81%9B%E3%81%9A%E3%82%A2%E3%82%A4%E3%82%B3%E3%83%B3%E3%82%92%E6%8F%8F%E7%94%BB"><i class="fa fa-link"></i></a>画像を使用せずアイコンを描画</h2>

<p>FacebookとかTwitterアイコンのUIButtonを描画してくれるOSS。</p>

<p>UIBezierPathでパス描画してUIImageを生成してるので画像ファイル不使用。与えたサイズに対して相対位置で描画するように実装してあるので大きさも自在。</p>

<p><a href="https://github.com/goncz9/GRButtons" rel="nofollow noopener" target="_blank">GRButtons</a></p>

<p><a href="http://www.facebook.com/538949829459616/posts/607527675930034" rel="nofollow noopener" target="_blank">投稿</a></p>

<h2>
<span id="macのキーボードからiphoneに文字入力" class="fragment"></span><a href="#mac%E3%81%AE%E3%82%AD%E3%83%BC%E3%83%9C%E3%83%BC%E3%83%89%E3%81%8B%E3%82%89iphone%E3%81%AB%E6%96%87%E5%AD%97%E5%85%A5%E5%8A%9B"><i class="fa fa-link"></i></a>MacのキーボードからiPhoneに文字入力</h2>

<p>MacのキーボードからiPhoneとかiPadの文字入力できるようになります。今設定してみたばかりだけど超便利な予感。</p>

<p><a href="https://camo.qiitausercontent.com/da669abc8af68ff7df55ee73532da82a9fed4560/687474703a2f2f65787465726e616c2e616b2e666263646e2e6e65742f736166655f696d6167652e7068703f643d41514258655944366c787a414d59774526773d31353526683d3131342675726c3d687474702533412532462532466c697665646f6f722e626c6f67696d672e6a702532466c6173686f77253246696d6773253246392532463725324639373836393466312e6a7067" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/da669abc8af68ff7df55ee73532da82a9fed4560/687474703a2f2f65787465726e616c2e616b2e666263646e2e6e65742f736166655f696d6167652e7068703f643d41514258655944366c787a414d59774526773d31353526683d3131342675726c3d687474702533412532462532466c697665646f6f722e626c6f67696d672e6a702532466c6173686f77253246696d6773253246392532463725324639373836393466312e6a7067" alt="" data-canonical-src="http://external.ak.fbcdn.net/safe_image.php?d=AQBXeYD6lxzAMYwE&amp;w=155&amp;h=114&amp;url=http%3A%2F%2Flivedoor.blogimg.jp%2Flashow%2Fimgs%2F9%2F7%2F978694f1.jpg"></a></p>

<p><a href="http://blog.livedoor.jp/lashow/archives/4267145.html" rel="nofollow noopener" target="_blank">MacをWinodwsのキーボードにできるアプリ、1Keyboardが理想的すぎて感動した : しょぼいエンジニアが教えたいこと</a></p>

<p><a href="http://www.facebook.com/iOSDevTips/posts/516824555023406" rel="nofollow noopener" target="_blank">投稿</a></p>

<h2>
<span id="ファイルテンプレートの詳細な解説ページ" class="fragment"></span><a href="#%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%83%86%E3%83%B3%E3%83%97%E3%83%AC%E3%83%BC%E3%83%88%E3%81%AE%E8%A9%B3%E7%B4%B0%E3%81%AA%E8%A7%A3%E8%AA%AC%E3%83%9A%E3%83%BC%E3%82%B8"><i class="fa fa-link"></i></a>ファイルテンプレートの詳細な解説ページ</h2>

<p>Xcode4の、ファイルテンプレートまわりの詳細な解説ページ。</p>

<p>TemplateInfo.plistの各要素の説明とか、"<strong><em>FILEBASENAMEASIDENTIFIER</em></strong>"とかのテンプレート関連マクロが何に展開されるか等、とにかく徹底解説な感じです。</p>

<p>このあたりは<strong>Appleの正式なドキュメントがない</strong>ので、レア情報かと。</p>

<p><a href="https://camo.qiitausercontent.com/11ea596137c74d96f0b64397c7ed447432849e3d/687474703a2f2f65787465726e616c2e616b2e666263646e2e6e65742f736166655f696d6167652e7068703f643d4151446975506478514c546d304c506926773d31353426683d3135342675726c3d687474702533412532462532467777772e626f626d6363756e652e636f6d25324677702d636f6e74656e7425324675706c6f616473253246323031322532463033253246637573746f6d5f74656d706c6174652e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/11ea596137c74d96f0b64397c7ed447432849e3d/687474703a2f2f65787465726e616c2e616b2e666263646e2e6e65742f736166655f696d6167652e7068703f643d4151446975506478514c546d304c506926773d31353426683d3135342675726c3d687474702533412532462532467777772e626f626d6363756e652e636f6d25324677702d636f6e74656e7425324675706c6f616473253246323031322532463033253246637573746f6d5f74656d706c6174652e706e67" alt="" data-canonical-src="http://external.ak.fbcdn.net/safe_image.php?d=AQDiuPdxQLTm0LPi&amp;w=154&amp;h=154&amp;url=http%3A%2F%2Fwww.bobmccune.com%2Fwp-content%2Fuploads%2F2012%2F03%2Fcustom_template.png"></a></p>

<p><a href="http://rypearts.com/proof/bob/r1/2012/03/04/creating-custom-xcode-4-file-templates/" rel="nofollow noopener" target="_blank">Creating Custom Xcode 4 File Templates</a></p>

<h2>
<span id="画面の解像度種別を返してくれるカテゴリ" class="fragment"></span><a href="#%E7%94%BB%E9%9D%A2%E3%81%AE%E8%A7%A3%E5%83%8F%E5%BA%A6%E7%A8%AE%E5%88%A5%E3%82%92%E8%BF%94%E3%81%97%E3%81%A6%E3%81%8F%E3%82%8C%E3%82%8B%E3%82%AB%E3%83%86%E3%82%B4%E3%83%AA"><i class="fa fa-link"></i></a>画面の解像度種別を返してくれるカテゴリ</h2>

<p>iPhone5の画面サイズ対応についての質問と回答。回答２つめあたりの、UIDevice+Resolutionsっていう<strong>enumで定義した画面の解像度種別を返してくれるカテゴリ</strong>はつくっとくと便利そう。</p>

<p><a href="https://camo.qiitausercontent.com/3bc65b7b8e0369be399571e75d0030ce06c0a496/687474703a2f2f65787465726e616c2e616b2e666263646e2e6e65742f736166655f696d6167652e7068703f643d415142597374624f4c7556347538566926773d31353526683d3131342675726c3d68747470253341253246253246692e737461636b2e696d6775722e636f6d253246425865754b2e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/3bc65b7b8e0369be399571e75d0030ce06c0a496/687474703a2f2f65787465726e616c2e616b2e666263646e2e6e65742f736166655f696d6167652e7068703f643d415142597374624f4c7556347538566926773d31353526683d3131342675726c3d68747470253341253246253246692e737461636b2e696d6775722e636f6d253246425865754b2e706e67" alt="" data-canonical-src="http://external.ak.fbcdn.net/safe_image.php?d=AQBYstbOLuV4u8Vi&amp;w=155&amp;h=114&amp;url=http%3A%2F%2Fi.stack.imgur.com%2FBXeuK.png"></a></p>

<p><a href="http://stackoverflow.com/questions/12396545/ios-6-apps-how-to-deal-with-iphone-5-screen-size" rel="nofollow noopener" target="_blank">iOS 6 apps - how to deal with iPhone 5 screen size? - Stack Overflow</a></p>

<p><a href="http://www.facebook.com/iOSDevTips/posts/551523098206360" rel="nofollow noopener" target="_blank">投稿</a></p>

<h2>
<span id="appstoreのレビューをスクレイピングしてdbに保存" class="fragment"></span><a href="#appstore%E3%81%AE%E3%83%AC%E3%83%93%E3%83%A5%E3%83%BC%E3%82%92%E3%82%B9%E3%82%AF%E3%83%AC%E3%82%A4%E3%83%94%E3%83%B3%E3%82%B0%E3%81%97%E3%81%A6db%E3%81%AB%E4%BF%9D%E5%AD%98"><i class="fa fa-link"></i></a>AppStoreのレビューをスクレイピングしてDBに保存</h2>

<p>AppStoreのレビューをスクレイピングしてDBに保存したり表示したりするツール。</p>

<p>保存したレビューの一覧表示だけじゃなく、★の数を集計してグラフ表示したり、頻出キーワードを抽出したりもできるとのこと。</p>

<p><a href="https://github.com/punchdrunker/AppReviewViewer" rel="nofollow noopener" target="_blank">AppReviewViewer</a></p>

<p><a href="http://www.facebook.com/538949829459616/posts/309018215888340" rel="nofollow noopener" target="_blank">投稿</a></p>

<h2>
<span id="iosアプリ開発の細かい仕事で小遣い稼ぎ" class="fragment"></span><a href="#ios%E3%82%A2%E3%83%97%E3%83%AA%E9%96%8B%E7%99%BA%E3%81%AE%E7%B4%B0%E3%81%8B%E3%81%84%E4%BB%95%E4%BA%8B%E3%81%A7%E5%B0%8F%E9%81%A3%E3%81%84%E7%A8%BC%E3%81%8E"><i class="fa fa-link"></i></a>iOSアプリ開発の細かい仕事で小遣い稼ぎ</h2>

<p>仕事をアウトソースできるwebサービス。Skill RequiredをiPhoneに絞ると結構iOSアプリ開発まわりの仕事もでてきます。</p>

<p>アプリまるっと作ってくれ系は安すぎるものが目立ちますが、リンク先はGPUImageの調整をしてほしいというもので、こういう細かい仕事は小遣い稼ぎにはいいかもしれません。（この案件は既にclose）</p>

<p><a href="https://camo.qiitausercontent.com/0d9e30202e2c8c0ab12e3605cd0c73eaf1f8277d/687474703a2f2f65787465726e616c2e616b2e666263646e2e6e65742f736166655f696d6167652e7068703f643d415142374a6478596f65535f6d67525126773d31353526683d3131342675726c3d6874747025334125324625324663646e342e662d63646e2e636f6d253246696d67253246667265656c616e63657266622e6a70672533467625334438353939333262356663323436656263343865663663373131656337323136612532366d25334431" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/0d9e30202e2c8c0ab12e3605cd0c73eaf1f8277d/687474703a2f2f65787465726e616c2e616b2e666263646e2e6e65742f736166655f696d6167652e7068703f643d415142374a6478596f65535f6d67525126773d31353526683d3131342675726c3d6874747025334125324625324663646e342e662d63646e2e636f6d253246696d67253246667265656c616e63657266622e6a70672533467625334438353939333262356663323436656263343865663663373131656337323136612532366d25334431" alt="" data-canonical-src="http://external.ak.fbcdn.net/safe_image.php?d=AQB7JdxYoeS_mgRQ&amp;w=155&amp;h=114&amp;url=http%3A%2F%2Fcdn4.f-cdn.com%2Fimg%2Ffreelancerfb.jpg%3Fv%3D859932b5fc246ebc48ef6c711ec7216a%26m%3D1"></a></p>

<p><a href="http://www.freelancer.com/projects/iPhone-iPad/GPUImage-adjustment.html" rel="nofollow noopener" target="_blank">GPUImage adjustment | iPad | iPhone</a></p>

<p>[投稿]((<a href="http://www.facebook.com/iOSDevTips/posts/525518434137438" class="autolink" rel="nofollow noopener" target="_blank">http://www.facebook.com/iOSDevTips/posts/525518434137438</a>)</p>

<h2>
<span id="ビューにスポットライトをあてる" class="fragment"></span><a href="#%E3%83%93%E3%83%A5%E3%83%BC%E3%81%AB%E3%82%B9%E3%83%9D%E3%83%83%E3%83%88%E3%83%A9%E3%82%A4%E3%83%88%E3%82%92%E3%81%82%E3%81%A6%E3%82%8B"><i class="fa fa-link"></i></a>ビューにスポットライトをあてる</h2>

<p>スポットライトのように、中心をピークに、放射状に徐々に暗くするOSS。<code>addSpotlightInView:atPoint:</code> っていう感じで<strong>スポットライトをあてるビューと位置を指定するだけ</strong>なので直観的。</p>

<p>ソースを見たところ、内部実装としては、CoreGraphicsのCGGradientRefを使用して実装している。ちゃんと<strong>add/removeのときにふわっとするアニメーション</strong>も実装してある。</p>

<p><a href="https://camo.qiitausercontent.com/671b88931dcf155eb6175da21ac468c06fb02cd2/687474703a2f2f65787465726e616c2e616b2e666263646e2e6e65742f736166655f696d6167652e7068703f643d4151442d416f466345765258504e6f3726773d31353426683d3135342675726c3d6874747025334125324625324673332e616d617a6f6e6177732e636f6d253246636f636f61636f6e74726f6c735f70726f64756374696f6e253246696f735f73637265656e732532463136323025324666756c6c2e706e6725334631333630333436353232" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/671b88931dcf155eb6175da21ac468c06fb02cd2/687474703a2f2f65787465726e616c2e616b2e666263646e2e6e65742f736166655f696d6167652e7068703f643d4151442d416f466345765258504e6f3726773d31353426683d3135342675726c3d6874747025334125324625324673332e616d617a6f6e6177732e636f6d253246636f636f61636f6e74726f6c735f70726f64756374696f6e253246696f735f73637265656e732532463136323025324666756c6c2e706e6725334631333630333436353232" alt="" data-canonical-src="http://external.ak.fbcdn.net/safe_image.php?d=AQD-AoFcEvRXPNo7&amp;w=154&amp;h=154&amp;url=http%3A%2F%2Fs3.amazonaws.com%2Fcocoacontrols_production%2Fios_screens%2F1620%2Ffull.png%3F1360346522"></a></p>

<p><a href="http://www.cocoacontrols.com/controls/mlpspotlight" rel="nofollow noopener" target="_blank">MLPSpotlight for iOS - Cocoa Controls</a></p>

<h2>
<span id="おわりに" class="fragment"></span><a href="#%E3%81%8A%E3%82%8F%E3%82%8A%E3%81%AB"><i class="fa fa-link"></i></a>おわりに</h2>

<p>今回20個ほどピックアップしましたが、日々ちまちまと投稿しているので、Facebookページの方にはこの10倍ぐらいはTipsがたまってると思われます。</p>

<p><strong>「いいね！」しておくとTipsがタイムラインに流れる</strong>ようになるので、よろしければどうぞ！</p>

<p><a href="http://www.facebook.com/iOSDevTips" rel="nofollow noopener" target="_blank">iOSアプリ開発に役立つTips</a></p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1" style="height:150px;">
<tr>
	<td rowspan="3">100位</td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="thumb-up-120px.png" /></i>650</kbd>
		<a target="_blank" href="https://qiita.com/makoto_kw/items/b23350aed11ea87cd92b">趣味でつくるiOSアプリこそJenkinsでリリースを自動化</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-12-09<br />01:56:27</center>
	</td>
	<td style="width:200px;">
		<!--投稿者-->
		<center>
			@<a href="user/2435.html">makoto_kw</a>(59件の記事)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/2435/profile-images/1473681522">
		</center>
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[iOS]</b> <b>[Jenkins]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<!--
		<div style="width:350px;height:150px;overflow:scroll;">%s</div>
		-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p><strong>TestFlightへのアップロード部分の内容はAppleに買収されiTunes Connectに統合される前のTestFlightについての情報です、testflightapp.comは2015/2/26に終了です</strong></p>

<p>コードを書き終わったがもう会社に行かなければならない、テストのために手持ちのデバイスにインストールしておきたい・・・。趣味でつくっているアプリこそ自動化して開発の時間を捻出すべきなのでは？そんなことを思っていたらMarvericksが無料でリリースされたので押入れで眠っていたMacBook AirにMarvericksとJenkinsを入れてリリース作業を自動化してみました。</p>

<h2>
<span id="前提として" class="fragment"></span><a href="#%E5%89%8D%E6%8F%90%E3%81%A8%E3%81%97%E3%81%A6"><i class="fa fa-link"></i></a>前提として</h2>

<ul>
<li>Jenkinsのセットアップは割愛しています。かわりに別の記事をあげているので参考にしてください。

<ul>
<li><a href="http://qiita.com/makoto_kw/items/cbe93d4ebbc35f3b43fd" id="reference-907833cfd5c31463d668">OS XにJenkinsをHomebrewでセットアップする</a></li>
</ul>
</li>
<li>Xcode5, Jenkins 1.542, CocoaPodsを使ったプロジェクトを使います</li>
<li>Xcodeのプロジェクト名、ワークスペース名を <strong>MyProject</strong> としているので読み替えて使ってください</li>
<li>今回はビルドと配布に焦点をあてています、静的解析やテストに関する話はありません</li>
<li>TestFlightへの自動アップロード、AppStoreに提出するipaファイルの自動ビルドまでを行います</li>
</ul>

<h2>
<span id="ビルド環境のセットアップ" class="fragment"></span><a href="#%E3%83%93%E3%83%AB%E3%83%89%E7%92%B0%E5%A2%83%E3%81%AE%E3%82%BB%E3%83%83%E3%83%88%E3%82%A2%E3%83%83%E3%83%97"><i class="fa fa-link"></i></a>ビルド環境のセットアップ</h2>

<p>新しいマシンにセットアップする場合は以下を忘れないようにしておきます。</p>

<ul>
<li>Xcode</li>
<li>Xcode Command Line Tools</li>
<li>iPhone Developer Program証明書</li>
<li>CocoaPods (使っている場合)</li>
</ul>

<p>KeyChainへのアクセスなど初回に対話が必要な設定があるのでいきなりJenkinsでビルドするのではなく、一度プロジェクトを取得して、Xcodeでビルドができるか確認しておきましょう。</p>

<h2>
<span id="自動ビルドに必要なファイルのコミット" class="fragment"></span><a href="#%E8%87%AA%E5%8B%95%E3%83%93%E3%83%AB%E3%83%89%E3%81%AB%E5%BF%85%E8%A6%81%E3%81%AA%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AE%E3%82%B3%E3%83%9F%E3%83%83%E3%83%88"><i class="fa fa-link"></i></a>自動ビルドに必要なファイルのコミット</h2>

<h3>
<span id="provisioning-profile" class="fragment"></span><a href="#provisioning-profile"><i class="fa fa-link"></i></a>Provisioning Profile</h3>

<p>Provisioning Profileを取得、更新しなくてよいようにリポジトリにコミットしておきます。Dropboxから参照するのもよいでしょう。ファイルは任意の場所にあってもビルド前に行うシェルスクリプトでプロジェクトディレクトリにコピーします。</p>

<h3>
<span id="スキーマ設定ファイル" class="fragment"></span><a href="#%E3%82%B9%E3%82%AD%E3%83%BC%E3%83%9E%E8%A8%AD%E5%AE%9A%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB"><i class="fa fa-link"></i></a>スキーマ設定ファイル</h3>

<p>xcodebuildでワークスペースファイルを使う際にスキーマファイルが必要になります。このファイルが <strong>Xcodeでワークスペースファイルを開いた際に生成される</strong> ものであるため、CocoaPodsで自動生成したワークスペースをxcodebuildでビルドしようとするとスキーマファイルが見つからずにビルドが失敗します。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>MyProject.xcodeproj/xcuserdata/&lt;UserName&gt;.xcuserdatad/xcschemes/MyProject.xcscheme
MyProject.xcodeproj/xcuserdata/&lt;UserName&gt;.xcuserdatad/xcschemes/xcschememanagement.plist
</pre></div></div>

<p>この問題を回避するために事前にスキーマファイルをJenkinsを実行するユーザのファイルとしてコミットしておきます。<br>
参考: <a href="http://qiita.com/mokemokechicken/items/5ea39c87512a515071f5" id="reference-b96de97c80e283fcccad">JenkinsでiOSのビルドを行う時にハマるポイントとその解決法・１</a></p>

<h2>
<span id="使うjenkinsプラグイン" class="fragment"></span><a href="#%E4%BD%BF%E3%81%86jenkins%E3%83%97%E3%83%A9%E3%82%B0%E3%82%A4%E3%83%B3"><i class="fa fa-link"></i></a>使うJenkinsプラグイン</h2>

<p>以下のものを使っています。</p>

<ul>
<li><a href="http://wiki.jenkins-ci.org/display/JENKINS/Git+Plugin" rel="nofollow noopener" target="_blank">Git Plugin</a></li>
<li><a href="http://wiki.jenkins-ci.org/display/JENKINS/Git+Client+Plugin" rel="nofollow noopener" target="_blank">Git Client Plugin</a></li>
<li><a href="https://wiki.jenkins-ci.org/display/JENKINS/Xcode+Plugin" rel="nofollow noopener" target="_blank">Xcode Plugin</a></li>
<li><a href="http://wiki.jenkins-ci.org/display/JENKINS/Testflight+Plugin" rel="nofollow noopener" target="_blank">Testflight Plugin</a></li>
<li><a href="http://wiki.jenkins-ci.org/display/JENKINS/Run+Condition+Plugin" rel="nofollow noopener" target="_blank">Run Condition Plugin</a></li>
<li><a href="https://wiki.jenkins-ci.org/display/JENKINS/Conditional+BuildStep+Plugin" rel="nofollow noopener" target="_blank">Conditional BuildStep Plugin</a></li>
<li><a href="http://wiki.jenkins-ci.org/display/JENKINS/Flexible+Publish+Plugin" rel="nofollow noopener" target="_blank">Flexible Publish Plugin</a></li>
<li><a href="https://wiki.jenkins-ci.org/display/JENKINS/Next+Build+Number+Plugin" rel="nofollow noopener" target="_blank">Next Build Number Plugin</a></li>
</ul>

<p><a href="https://wiki.jenkins-ci.org/display/JA/Jenkins+CLI" rel="nofollow noopener" target="_blank">Jenkins CLI</a>を使うなら以下のようにしてインストールできます。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>wget http://localhost:8080/jnlpJars/jenkins-cli.jar
java -jar jenkins-cli.jar -s http://localhost:8080 install-plugin \
  git git-client next-build-number run-condition conditional-buildstep flexible-publish \
  xcode-plugin testflight
java -jar jenkins-cli.jar -s http://localhost:8080 safe-restart
</pre></div></div>

<p>rubyやbundlerで細かく制御するためCocoaPodsプラグインは使っておらずシェルで以下を実行します。（余談を参照）</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>pod install
</pre></div></div>

<h2>
<span id="ビルドの種類" class="fragment"></span><a href="#%E3%83%93%E3%83%AB%E3%83%89%E3%81%AE%E7%A8%AE%E9%A1%9E"><i class="fa fa-link"></i></a>ビルドの種類</h2>

<p>Jenkinsからは１つのジョブで以下の３種類のビルドを行います。</p>

<ol>
<li>Dailyビルド</li>
<li>TestFlight配布用ビルドとアップロード (テスト用) </li>
<li>AppStore提出用ビルド</li>
</ol>

<p>1が静的チェックやテストが目的のジョブです。SCMをポーリングさせればコミットしていない日はジョブを実行しないことも可能です。</p>

<p>2と3は配布のためのジョブです。自分のタイミングで行うためにパラメータ付きビルドで手動で行うジョブにします。この２つはTestFlight SDKを組み込むかどうかと、Provisioning Profileを変えているため別々のビルドで成果物を作成します。</p>

<h2>
<span id="使うパラメータ" class="fragment"></span><a href="#%E4%BD%BF%E3%81%86%E3%83%91%E3%83%A9%E3%83%A1%E3%83%BC%E3%82%BF"><i class="fa fa-link"></i></a>使うパラメータ</h2>

<p>パラメータ付きビルドで使うパラメータは以下のとおりです。ジョブを作成したら登録してください。デフォルト値がオフなので毎日の自動ビルドでは配布に関する処理は何も行いません。</p>

<table>
<thead>
<tr>
<th style="text-align: left">パラメータ名</th>
<th style="text-align: left">型</th>
<th style="text-align: left">デフォルト値</th>
<th style="text-align: left">説明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left">TESTFLIGHT_UPLOAD</td>
<td style="text-align: left">真偽値</td>
<td style="text-align: left">false</td>
<td style="text-align: left">TestFlightへアップロードするかどうか</td>
</tr>
<tr>
<td style="text-align: left">BUILD_FOR_APPSTORE</td>
<td style="text-align: left">真偽値</td>
<td style="text-align: left">false</td>
<td style="text-align: left">AppStore配布用のビルドを行うかどうか</td>
</tr>
</tbody>
</table>

<p>パラメータ付きビルドで使ったパラメータの値はJenkinsのジョブの実行時に <strong>環境変数</strong> に設定されます。シェルなどから環境変数を参照すれば処理の分岐が可能になります。</p>

<h2>
<span id="ビルドスクリプトの抜粋" class="fragment"></span><a href="#%E3%83%93%E3%83%AB%E3%83%89%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%97%E3%83%88%E3%81%AE%E6%8A%9C%E7%B2%8B"><i class="fa fa-link"></i></a>ビルドスクリプトの抜粋</h2>

<h3>
<span id="jenkins-xcode-plugin-の前処理" class="fragment"></span><a href="#jenkins-xcode-plugin-%E3%81%AE%E5%89%8D%E5%87%A6%E7%90%86"><i class="fa fa-link"></i></a>Jenkins Xcode Plugin の前処理</h3>

<p><strong>ビルド手順の追加</strong> から <strong>シェルの実行</strong> を追加し、以下のようなシェルの処理を Jenkins Xcode Plugin のビルドの <strong>前</strong> に行っています。ここで行うのは</p>

<ul>
<li>Provisioning Profileの切り替え</li>
<li>TestFlight SDK の有効・無効</li>
<li>CocoaPodsのインストール</li>
</ul>

<p>です。</p>

<p>TestFlightでAdHocに配布する場合と、AppleStoreに配布する場合とでProvisioning Profileを分けているので配布方法によってファイルを切り替えています。Jenkins Xcode Plugin には <code>MyProject.mobileprovision</code> といった適当なファイル名を設定しておき、その名前に元ファイルからコピーしています。</p>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span>cp MyProject_Ad_Hoc_Distribution.mobileprovision MyProject.mobileprovision
<span class="k">if</span> <span class="nv">$BUILD_FOR_APPSTORE</span> <span class="o">=</span> <span class="nb">true</span> <span class="p">;</span> <span class="k">then</span>
    rake configure_appstore
    cp MyProject_AppStore_Distribution.mobileprovision MyProject.mobileprovision
<span class="k">fi</span>
pod install
</pre></div></div>

<p><code>rake configure_appstore</code> の処理ではTestFlight SDKを使わないようにソースファイルを変更しています。 Rakefileは以下のような内容になっています。</p>

<div class="code-frame" data-lang="ruby">
<div class="code-lang"><span class="bold">Rakefile</span></div>
<div class="highlight"><pre><span></span><span class="c1"># encoding: utf-8</span>
<span class="nb">require</span> <span class="s1">'rake'</span>

<span class="n">task</span> <span class="ss">:configure_appstore</span> <span class="k">do</span>
  <span class="n">build_content</span> <span class="o">=</span> <span class="no">File</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s1">'MyProject/MyProjectBuild.h'</span><span class="p">)</span><span class="o">.</span><span class="n">gsub</span><span class="p">(</span><span class="sr">/(USE_TESTFLIGHT_SDK) 1/</span><span class="p">,</span> <span class="s1">'\1 0'</span><span class="p">)</span>
  <span class="nb">open</span><span class="p">(</span><span class="s1">'MyProject/MyProjectBuild.h'</span><span class="p">,</span> <span class="s1">'w'</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">f</span><span class="o">|</span>
    <span class="n">f</span><span class="o">.</span><span class="n n-Operator">&lt;&lt;</span> <span class="n">build_content</span>
  <span class="k">end</span>
  <span class="n">podfile_content</span> <span class="o">=</span> <span class="no">File</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s1">'Podfile'</span><span class="p">)</span><span class="o">.</span><span class="n">gsub</span><span class="p">(</span><span class="sr">/^pod 'TestFlightSDK'/</span><span class="p">,</span> <span class="s1">'#\0'</span><span class="p">)</span>
  <span class="nb">open</span><span class="p">(</span><span class="s1">'Podfile'</span><span class="p">,</span> <span class="s1">'w'</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">f</span><span class="o">|</span>
    <span class="n">f</span><span class="o">.</span><span class="n n-Operator">&lt;&lt;</span> <span class="n">podfile_content</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</div>

<p>TestFlight SDKをCocoaPodsで利用している前提です。あるヘッダファイルとPodfileをそれぞれ以下のように置換しています。</p>

<p><code>#define USE_TESTFLIGHT_SDK 1</code> -&gt; <code>#define USE_TESTFLIGHT_SDK 0</code><br>
<code>pod 'TestFlightSDK'</code> -&gt; <code>#pod 'TestFlightSDK'</code> </p>

<p>リポジトリにコミットしてあるソースコードはTestFlight SDKを組み込んだ状態になっているので <strong>configure_appstore</strong> タスクを実行した場合に TestFlight SDKを使うコードをコンパイルしないように変更します。</p>

<p><strong>USE_TESTFLIGHT_SDK</strong> で処理を分岐する話は <a href="http://qiita.com/makoto_kw/items/75e684435e650a4442a4" id="reference-022ce9caf66ede74b7fa">iOSでTestFlight SDKを使うときのメモ</a> を参考にしてください。</p>

<h3>
<span id="jenkins-xcode-plugin-の設定" class="fragment"></span><a href="#jenkins-xcode-plugin-%E3%81%AE%E8%A8%AD%E5%AE%9A"><i class="fa fa-link"></i></a>Jenkins Xcode Plugin の設定</h3>

<p>Xcodeビルドの設定に入ります。 <strong>ビルド手順の追加</strong> から <strong>Xcode</strong> を追加します。</p>

<h4>
<span id="ビルドの設定" class="fragment"></span><a href="#%E3%83%93%E3%83%AB%E3%83%89%E3%81%AE%E8%A8%AD%E5%AE%9A"><i class="fa fa-link"></i></a>ビルドの設定</h4>

<p><strong>General build settings</strong> を設定します。配布が目的なのでビルドの構成である <strong>Configration</strong> に <code>Release</code> を設定し、成果物として使う ipaファイルの名前は <code>MyProject-${VERSION}-${BUILD_DATE}</code> としておきます。</p>

<p><a href="https://camo.qiitausercontent.com/390ef52d986e41f95a70d91510222ef265acd3fc/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f323433352f35323634613735342d643734652d613861302d633833332d3531393831383731613530342e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/390ef52d986e41f95a70d91510222ef265acd3fc/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f323433352f35323634613735342d643734652d613861302d633833332d3531393831383731613530342e706e67" alt="jenkins-xcode-build_01.png" title="jenkins-xcode-build_01.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/2435/5264a754-d74e-a8a0-c833-51981871a504.png"></a></p>

<p>次に <strong>Advanced Xcode build options</strong> を設定します。Jenkins Xcode Pluginがわかりにくいのがこの部分です。Xcodeの場合、普通にプロジェクトを作ると、指定したプロジェクト名でプロジェクトディレクトリ、プロジェクトファイル、ワークスペースファイル、ターゲットがつくられるので何をどこで設定しているのがわからなくなります。</p>

<p>参考までに設定しているプロジェクトの階層を以下に示します。ここではソースコードと他のファイルを管理するために、リポジトリの1階層下にプロジェクトのファイルがあります(#1)、リポジトリ直下にファイルがない場合は <strong>Xcode Project Directory</strong> にプロジェクトのあるパスを設定します。</p>

<p>CocoaPodsが作成したWorkspaceファイル (#2) を使うので <strong>Xcode Workspace File</strong> にファイル名を指定しています。</p>

<p><strong>SYMROOT</strong>に <code>${WORKSPACE}/build</code> (#3) を設定しているのでここにipaファイルが出力されます。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>.
├── MyProject  # 1
│   ├── MyProject 
│   ├── MyProject.xcodeproj
│   ├── MyProject.xcworkspace # 2
│   ├── Podfile
│   ├── Podfile.lock
│   └── Pods
├── build #3
│   └── Release-iphoneos
│       └── MyProject-NN-YYYY.mm.dd.ipa
└── README.md
</pre></div></div>

<p><a href="https://camo.qiitausercontent.com/48ba8213ae124b4e9ca196749994eb32ee7b290a/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f323433352f64306335373634302d326534622d303930612d653835372d3235653936376134366538392e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/48ba8213ae124b4e9ca196749994eb32ee7b290a/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f323433352f64306335373634302d326534622d303930612d653835372d3235653936376134366538392e706e67" alt="jenkins-xcode-build_02.png" title="jenkins-xcode-build_02.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/2435/d0c57640-2e4b-090a-e857-25e967a46e89.png"></a></p>

<h4>
<span id="署名" class="fragment"></span><a href="#%E7%BD%B2%E5%90%8D"><i class="fa fa-link"></i></a>署名</h4>

<p>署名は <strong>Code signing &amp; OS X keychain options</strong> 項目で行います。 <strong>Embedded Profile</strong> はビルド前の処理でコピーしておいたファイルを設定します。</p>

<p>homebrewでインストールした場合ユーザ権限でJenkinsを動かせるので <strong>Unlock Keychain</strong> を有効にして <strong>Keychain path</strong> に <code>${HOME}/Library/Keychains/login.keychain</code> と <strong>Keychain password</strong> にパスワードを入力しておけばユーザの証明書を参照できます。</p>

<p><a href="https://camo.qiitausercontent.com/9df8f7a1ad1db469736a91f0fa6928301ec2b64b/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f323433352f36393430666534372d663039382d623138632d393266372d3063643631616363316365332e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/9df8f7a1ad1db469736a91f0fa6928301ec2b64b/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f323433352f36393430666534372d663039382d623138632d393266372d3063643631616363316365332e706e67" alt="jenkins-xcode-sign.png" title="jenkins-xcode-sign.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/2435/6940fe47-f098-b18c-92f7-0cd61acc1ce3.png"></a></p>

<h4>
<span id="ビルド番号の設定" class="fragment"></span><a href="#%E3%83%93%E3%83%AB%E3%83%89%E7%95%AA%E5%8F%B7%E3%81%AE%E8%A8%AD%E5%AE%9A"><i class="fa fa-link"></i></a>ビルド番号の設定</h4>

<p>Jenkins Xcode Pluginでは <strong>Versioning</strong> 項目にチェックをいれるとバージョン番号を自動で設定することができます。 </p>

<p><a href="https://camo.qiitausercontent.com/c9a1943f0945961797f1fbdc33fe062f7b5fae9d/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f323433352f63336461346162372d626165352d616434372d666365662d6132653130653536326632362e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/c9a1943f0945961797f1fbdc33fe062f7b5fae9d/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f323433352f63336461346162372d626165352d616434372d666365662d6132653130653536326632362e706e67" alt="jenkins-xcode-version.png" title="jenkins-xcode-version.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/2435/c3da4ab7-bae5-ad47-fcef-a2e10e562f26.png"></a></p>

<p><strong>Technical version</strong> に <code>${BUILD_NUMBER}</code> を設定することでJenkinsのビルド番号を <strong>CFBundleVersion</strong> に設定できます。 Marketing version(CFBundleShortVersionString)はリポジトリで管理してCFBundleVersionはJenkinsに任せるのが良いと思います。</p>

<p>Jenkinsのビルド番号は <strong>1</strong> から始まりますが、<a href="https://wiki.jenkins-ci.org/display/JENKINS/Next+Build+Number+Plugin" rel="nofollow noopener" target="_blank">Next Build Number Plugin</a> を使えば番号を飛ばすことができます。過去のビルドを削除するなどしてより大きな数値のビルドが存在しないようにすれば番号を戻すことも可能です。</p>

<h3>
<span id="jenkins-xcode-plugin-の後処理" class="fragment"></span><a href="#jenkins-xcode-plugin-%E3%81%AE%E5%BE%8C%E5%87%A6%E7%90%86"><i class="fa fa-link"></i></a>Jenkins Xcode Plugin の後処理</h3>

<p><strong>ビルド手順の追加</strong> から <strong>シェルの実行</strong> をもう一つ追加し、以下のようなシェルの処理を Jenkins Xcode Plugin のビルドの <strong>後</strong> に行っています。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>BUILD_DATE=`date '+%Y.%m.%d'`
cd build/Release-iphoneos

if $BUILD_FOR_APPSTORE = true ; then
   mv MyProject-${BUILD_NUMBER}-${BUILD_DATE}.ipa MyProject-${BUILD_NUMBER}-${BUILD_DATE}_for_appstore.ipa
fi
</pre></div></div>

<p><code>BUILD_FOR_APPSTORE</code> が有効のときにファイル名のsuffixに <code>_for_appstore</code> をつけています。これは間違えてTestFlightを組み込んだビルドをアップロードしてしまわないように人間がファイル名で判別しやすいようにするためです。</p>

<h2>
<span id="testflightへのアップロード設定" class="fragment"></span><a href="#testflight%E3%81%B8%E3%81%AE%E3%82%A2%E3%83%83%E3%83%97%E3%83%AD%E3%83%BC%E3%83%89%E8%A8%AD%E5%AE%9A"><i class="fa fa-link"></i></a>TestFlightへのアップロード設定</h2>

<p>ここからはビルド後の処理の設定です。</p>

<p>TestFlightへのアップロードには <strong>Testflight Plugin</strong> を使います。Testflight Plugin をインストールするとビルド後の処理でTestFlightへのアップロード作業を追加できます。</p>

<p>アップロードにはTokenが必要になるので取得しておきます。<br>
API Token: <a href="https://testflightapp.com/account/#api" class="autolink" rel="nofollow noopener" target="_blank">https://testflightapp.com/account/#api</a><br>
TeamToken: <a href="https://testflightapp.com/dashboard/team/edit/" class="autolink" rel="nofollow noopener" target="_blank">https://testflightapp.com/dashboard/team/edit/</a></p>

<p>Tokenの設定はジョブではなく、 <strong>Jenkinsの管理 &gt; システムの設定 &gt; Test Flight</strong> で行います。チームごとに複数のTokenが設定できます。</p>

<p><a href="https://camo.qiitausercontent.com/ada92beee024a6b3650c18c9432787c54792ab40/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f323433352f39356538343834642d323434642d323134352d663939302d3066316132623063373732302e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/ada92beee024a6b3650c18c9432787c54792ab40/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f323433352f39356538343834642d323434642d323134352d663939302d3066316132623063373732302e706e67" alt="jenkins-testflight-token.png" title="jenkins-testflight-token.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/2435/95e8484d-244d-2145-f990-0f1a2b0c7720.png"></a></p>

<p>条件付きでアップロード処理を実行させるため、 <strong>ビルド後の処理の追加</strong> で <strong>Flexible publish</strong> を使い Token を <code>${ENV,var="TESTFLIGHT_UPLOAD"}</code> にし、 <strong>Action</strong> で <strong>Upload to TestFlight</strong> を選択します。</p>

<p>これにより手動によるパラメータ付きビルドで <code>TESTFLIGHT_UPLOAD</code> をチェックした場合にのみ TestFlight へのUploadが行えます。</p>

<p><a href="https://camo.qiitausercontent.com/64772f8a86aa329c77caa4855a95db17e40f6933/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f323433352f38653336333833612d633862322d353165372d343333622d6266393265666564613739632e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/64772f8a86aa329c77caa4855a95db17e40f6933/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f323433352f38653336333833612d633862322d353165372d343333622d6266393265666564613739632e706e67" alt="jenkins_2013-11-11_1249.png" title="jenkins_2013-11-11_1249.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/2435/8e36383a-c8b2-51e7-433b-bf92efeda79c.png"></a></p>

<p>TestFlight Pluginでは高度な設定から配布時の設定が行えます。まずは <strong>Distribution Lists</strong> を使って自分宛に絞って送るようにしています。</p>

<p>Gitのコメントなどを Build Notes に設定することもできますが、コミットのコメントと知人などのテスターへ適切な説明を両立させるのはなかなか困難です。TestFlightではビルドの説明や配布するメンバーを後からでも設定できるのでまずは自分で試して問題ないことを確認してから、ビルドの説明を入力して、配布するメンバーを追加するという運用が良いと思います。</p>

<p><a href="https://camo.qiitausercontent.com/722d7a2083869cd7299b9e56fdf1614885a0fb33/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f323433352f64643130626538662d326431642d646662372d656237302d3737663537656461626532612e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/722d7a2083869cd7299b9e56fdf1614885a0fb33/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f323433352f64643130626538662d326431642d646662372d656237302d3737663537656461626532612e706e67" alt="jenkins-testflight-detail.png" title="jenkins-testflight-detail.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/2435/dd10be8f-2d1d-dfb7-eb70-77f57edabe2a.png"></a></p>

<h2>
<span id="成果物の設定" class="fragment"></span><a href="#%E6%88%90%E6%9E%9C%E7%89%A9%E3%81%AE%E8%A8%AD%E5%AE%9A"><i class="fa fa-link"></i></a>成果物の設定</h2>

<p><strong>ビルド後の処理の追加</strong> で <strong>成果物を保存</strong> を追加し、 <code>build/**/*.ipa,build/**/*dSYM.zip</code> を保存するようにしておきます。</p>

<p><a href="https://camo.qiitausercontent.com/b590d9bc875480ada2fcd837c46c2daab3796e08/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f323433352f31336462356466352d623665372d353033362d663131642d6231333633383736343563632e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/b590d9bc875480ada2fcd837c46c2daab3796e08/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f323433352f31336462356466352d623665372d353033362d663131642d6231333633383736343563632e706e67" alt="jenkins-ipa.png" title="jenkins-ipa.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/2435/13db5df5-b6e7-5036-f11d-b136387645cc.png"></a></p>

<p>これでビルドごとのipaファイルがJenkinsからダウンロードできるようになります。</p>

<h2>
<span id="ジョブの実行" class="fragment"></span><a href="#%E3%82%B8%E3%83%A7%E3%83%96%E3%81%AE%E5%AE%9F%E8%A1%8C"><i class="fa fa-link"></i></a>ジョブの実行</h2>

<p>ジョブの設定ができたらSCMをポーリングするなどして毎日自動のビルドを走らせます。静的チェックやユニットテストはここで行いましょう。</p>

<p>配布するときはJenkinsにログインして手動でビルドを実行します。手動でジョブを実行しようとするとパラメータの入力を求められるので、TestFlightにアプロードするときは <code>TESTFLIGHT_UPLOAD</code> にチェックを入れ、AppStoreにリリースするときは <code>BUILD_FOR_APPSTORE</code> にチェックを入れてビルドを実行します。TestFlight SDKを組みこんだものをAppStoreに提出したくないのでこの２つのパラメータは排他的に使います。</p>

<p><a href="https://camo.qiitausercontent.com/016a4fc2bcc8a613292a4dcb9d236e751261380b/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f323433352f33616264636533652d366234612d373262372d333634322d6638626230313337303536642e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/016a4fc2bcc8a613292a4dcb9d236e751261380b/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f323433352f33616264636533652d366234612d373262372d333634322d6638626230313337303536642e706e67" alt="jenkins-build-param.png" title="jenkins-build-param.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/2435/3abdce3e-6b4a-72b7-3642-f8bb0137056d.png"></a></p>

<h3>
<span id="testflightへのアップロード" class="fragment"></span><a href="#testflight%E3%81%B8%E3%81%AE%E3%82%A2%E3%83%83%E3%83%97%E3%83%AD%E3%83%BC%E3%83%89"><i class="fa fa-link"></i></a>TestFlightへのアップロード</h3>

<p>ジョブの設定が正しく動いていればTestFlightにアプロードは自動で行えます。実装が終わったらビルドボタンを押すだけでiOS端末でテストができるようになります。</p>

<h3>
<span id="appstoreへの提出" class="fragment"></span><a href="#appstore%E3%81%B8%E3%81%AE%E6%8F%90%E5%87%BA"><i class="fa fa-link"></i></a>AppStoreへの提出</h3>

<p>パラメータ付きビルドで <code>BUILD_FOR_APPSTORE</code> を有効にしてビルドを行うと、ipa ファイルがビルドの成果物として作成されるのでこのファイルをAppStoreに提出します。</p>

<p>ipaファイルを指定してアップロードする場合は Xcode (Organizer) ではなく <strong>Application Loader</strong> を使います。Xcode のメニューの <strong>Xcode &gt; Open Developer Tool &gt; Application Loader</strong> から起動できます。</p>

<p>Organizerを使う場合と同じく、iTunesConnectのアプリのVersionで <strong>Ready to Upload Binary</strong> を押した状態になっていればアップロードが行えます。</p>

<h2>
<span id="余談" class="fragment"></span><a href="#%E4%BD%99%E8%AB%87"><i class="fa fa-link"></i></a>余談</h2>

<ul>
<li>本当は OS X Server + Bot  に興味があったのだけど、CocoaPods周りが面倒そうだったので挫けました。でも諦めてはいません</li>
<li>どうもiOSプロジェクトでAnt, MavenやGradleを使うことに違和感を覚え、Macにはrubyが入っているし、CocoaPodsもrubyが必要なのでシェルやrakeで済ませることにしました</li>
<li>TestFlightでビルドを配布する上でTestFlightSDKは必須ではありません。今回はTestFlightSDKを使うビルド、使わないビルドをそれぞれ作っていますが、TestFlightSDKを使わないで同じビルドで署名だけをつけかえるだけという方法も有効です。 

<ul>
<li>参考: 
iOSアプリの署名を付け替える <a href="http://qiita.com/beakmark/items/33c0b73603e491f08a33" class="autolink" id="reference-943317956fb9bc5920c6">http://qiita.com/beakmark/items/33c0b73603e491f08a33</a>
</li>
</ul>
</li>
<li>Jenkins上で署名できるようになったので署名に関する設定をプロジェクトファイルから削除しました（リポジトリにコミットしているのがなんか嫌だった）</li>
<li>いつもOrganizerを使ってAppStoreに提出していたので ipa ファイルを指定して提出する方法の調べ方がわからなかったのですが、Xcodeを使わないフレームワーク (AIR for iOSとか) 周辺のドキュメントを調べるとわかりました</li>
<li>今回の内容とは関係ないですが Ruby の実行に rbenv を使っていて CocoaPods のバージョンをプロジェクトによって固定するために bundler でプロジェクトローカルにインストールしています。実際には <code>pod install</code> のコマンド部分は以下のような処理を実行しています。</li>
</ul>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>export PATH=$HOME/bin:$HOME/.rbenv/bin:/usr/local/bin:$PATH
eval "$(rbenv init -)"
rbenv shell 1.9.3-p392
bundle install --path=vendor/bundle
bundle exec pod install
</pre></div></div>

<ul>
<li>Jenkinsを長時間起動していると状態がおかしくなる問題に遭遇していて定期的に再起動させています。 <a href="https://issues.jenkins-ci.org/browse/JENKINS-17526" class="autolink" rel="nofollow noopener" target="_blank">https://issues.jenkins-ci.org/browse/JENKINS-17526</a>
</li>
</ul>

<div class="code-frame" data-lang="xml">
<div class="code-lang"><span class="bold">~/Library/LaunchAgents/homebrew.mxcl.jenkins.restart.plist</span></div>
<div class="highlight"><pre><span></span><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="cp">&lt;!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd"&gt;</span>
<span class="nt">&lt;plist</span> <span class="na">version=</span><span class="s">"1.0"</span><span class="nt">&gt;</span>
<span class="nt">&lt;dict&gt;</span>
    <span class="nt">&lt;key&gt;</span>Label<span class="nt">&lt;/key&gt;</span>
    <span class="nt">&lt;string&gt;</span>homebrew.mxcl.jenkins.restart<span class="nt">&lt;/string&gt;</span>
    <span class="nt">&lt;key&gt;</span>ProgramArguments<span class="nt">&lt;/key&gt;</span>
    <span class="nt">&lt;array&gt;</span>
       <span class="nt">&lt;string&gt;</span>/usr/bin/java<span class="nt">&lt;/string&gt;</span>
        <span class="nt">&lt;string&gt;</span>-jar<span class="nt">&lt;/string&gt;</span>
        <span class="nt">&lt;string&gt;</span>/Users/Shared/jenkins-cli.jar<span class="nt">&lt;/string&gt;</span>
        <span class="nt">&lt;string&gt;</span>-s<span class="nt">&lt;/string&gt;</span>
        <span class="nt">&lt;string&gt;</span>http://localhost:8080<span class="nt">&lt;/string&gt;</span>
        <span class="nt">&lt;string&gt;</span>safe-restart<span class="nt">&lt;/string&gt;</span>
    <span class="nt">&lt;/array&gt;</span>
    <span class="nt">&lt;key&gt;</span>StartCalendarInterval<span class="nt">&lt;/key&gt;</span>
    <span class="nt">&lt;dict&gt;</span>
        <span class="nt">&lt;key&gt;</span>Hour<span class="nt">&lt;/key&gt;</span>
        <span class="nt">&lt;integer&gt;</span>15<span class="nt">&lt;/integer&gt;</span>
        <span class="nt">&lt;key&gt;</span>Minute<span class="nt">&lt;/key&gt;</span>
        <span class="nt">&lt;integer&gt;</span>00<span class="nt">&lt;/integer&gt;</span>
    <span class="nt">&lt;/dict&gt;</span>
<span class="nt">&lt;/dict&gt;</span>
<span class="nt">&lt;/plist&gt;</span>
</pre></div>
</div>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>wget http://localhost:8080/jnlpJars/jenkins-cli.jar /Users/Shared/jenkins-cli.jar
launchctl load ~/Library/LaunchAgents/homebrew.mxcl.jenkins.restart.plist
</pre></div></div>
</div>
	</td>
</tr>
</table>
<br />
	</body>
</html>
