<html>
	<head><!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-110075493-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-110075493-1');
</script>
<!-- Google AdSense -->
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-6168511236629369",
    enable_page_level_ads: true
  });
</script>

		<meta charset="UTF-8" />
		<title>Qiita Ranking (vvakame)</title>
		<link rel="stylesheet" type="text/css" href="../qranking.css">
	</head>
	<body>
<div class="headerContainer">
<h1>Qiitaいいね数ランキング (vvakame さんの投稿分)</h1>
</div><!--class="headerContainer"-->
<p><i><img width="16" height="16" src="../thumb-up-120px.png" /></i>が同じ値の場合は投稿日時の新しいものが上位としています。</p>
<p><i><img width="16" height="16" src="../thumb-up-120px.png" /></i>がついていない記事は表示していません。</p>
<table border="1">
<tr>
	<td rowspan="3"><center>vvakameさんの<br />1位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>1293</kbd>
		<a target="_blank" href="https://qiita.com/vvakame/items/83366fbfa47562fafbf4">Gradle入門</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-04-24 02:02:36</center>
	</td>
	<td style="width:200px;">
		@vvakame<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/13283/profile-images/1473682747">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[gradle]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>この記事は、<a href="http://www.amazon.co.jp/gp/product/B00C7AMKTU?ie=UTF8&amp;camp=1207&amp;creative=8411&amp;creativeASIN=B00C7AMKTU&amp;linkCode=shr&amp;tag=damenako-22" rel="nofollow noopener" target="_blank">日経ソフトウェア 2013年 06月号 04/24発売</a> のステマ記事です。</p>

<p>6月号に、<a href="https://twitter.com/keiji_ariyama" rel="nofollow noopener" target="_blank">@keiji_ariyama</a>(前座部分担当) と <a href="https://twitter.com/vvakame" rel="nofollow noopener" target="_blank">僕</a>(Gradle概要担当) と <a href="https://twitter.com/sys1yagi" rel="nofollow noopener" target="_blank">@sys1yagi</a>(Android対応部分担当) という分担でGradle入門的な記事を書きました。</p>

<p>ですが、僕の目的としてはトップゲート社員への布教を主目的と考えて書いたため、本来要求されている分量を(わざと)大幅にオーバーして書いていました。雑誌に掲載されなかった溢れ分をネットで公開して良いか打診した所、「全文掲載でも良いですよ」という豪気なお許しを頂いたのでここに公開します。この場を借りてお礼申し上げます。<br>
プロの編集さんの手を経て、だいぶわかりやすく噛み砕かれたものが雑誌のほうには掲載されていますので、ここに書いてある内容が難しいなぁ…と思ったら是非雑誌の方を手に取ってみてください。<br>
また、僕が担当している箇所以外の、「何故Gradleが必要か」とか「AndroidとGradleを組み合わせるには？」について知りたい人は同じく雑誌を手にとってみてくださいｗ</p>

<p>なお、執筆時は 3/25 とかで、1.4が最新でした。今は1.5が出ています。</p>

<h1>
<span id="gradleとは" class="fragment"></span><a href="#gradle%E3%81%A8%E3%81%AF"><i class="fa fa-link"></i></a>Gradleとは？</h1>

<p>ビルドシステム、ひいてはGradleがあると助かる場面とは、一体どういう場面でしょうか？<br>
筆者の具体例でいうと、ある日上司がやってきて、「今お前たちが作っているアプリを俺の端末にインストールしてくれ。」と言ってくるわけですね。1回だけならば話しは簡単です。<br>
PCと端末をmicroUSBで接続して、Eclipseを起動してADTでアプリをコンパイルして、端末に転送してインストールして返してあげるだけです。<br>
ですが、それが2回も3回も…となってくると、思わず「自分でやってください！＞＜」と言ってしまいたくなりますが、上司のPCには開発環境が整っていません。それに、新しいAndroidのSDKがリリースされたら上司のPCの環境を更新する作業をやってあげなければいけません。しかし、僕はそんな面倒くさいことは引き受けたくありません！</p>

<p>そこで、登場してくるのがビルドシステムです。今のAndroidの標準のビルドシステムではantが使われています。antでも、「このバッチファイルを叩いたら勝手にアプリが端末に入りますから！＞＜」ぐらいまでは持っていけます。ですが、Android SDKのインストールやantのセットアップはやらなければいけません。これだけでもだいぶ楽になりましたが、今一歩というところですね。</p>

<p>もし、Gradleであれば、Gradle自身のダウンロードもGradleにやらせることができますし、Android SDKのダウンロードも気合を入れればさせることができるでしょう。また、GUIで操作することもできるので、上司にソース一式を渡して「自分でやってください！＞＜」で済ませることもできるようになるでしょう。<br>
ここまでできれば、格段に楽になったといっても納得でしょう。</p>

<p>さて、ここからは一般的なお話です。ちまたには、色々なビルド方法があふれています。Makeだとか、Antだとか、Mavenだとか色々です。自分で書いたことがないまでも、利用したことさえない、という人は滅多にいないでしょう。</p>

<p>Makefileは利用できるプラットフォームを選びます。また、その自由度の高さ故にプロジェクト毎に共通の使い方というものが決められているわけではありません。</p>

<p>Antは柔軟で便利なのは良いのですが、Makefileと同じように自由度が高く、さらに記述もXMLで書かなければいけないため、慣れるまでが大変です。また、ライブラリの依存関係の管理や追加などは行う機能はないためチームで開発する時にみんなの環境を併せるのに苦労します。</p>

<p>Mavenは依存関係の管理や追加もできますが、理解するまでに多くの事を理解しなければならず、またXMLで全ての設定を行わなければいけないため習得の難易度が高く、いわゆる"ビルド職人"と呼ばれるような特定の個人に依存せざるをえない状態でした。</p>

<p>そこで、登場してきたのがGradleです。Gradleは設定をGroovyと呼ばれるJVM上で動くスクリプト言語で書きます。<br>
Groovyで書かれた設定ファイルはXMLよりも可読性が高く、処理の自由度も大変高いです。依存関係の管理も行うことが出来ます。チームで仕事をするために便利な機能もよく考えられて作られていて、大変便利です。今後開発を行なっていく上で無くてはならない存在になっていくでしょう。そのために、まずはあなたがGradle職人になってみるのも良いと思います。<br>
Gradleが行なっている工夫については後々紹介していきます。<br>
その他のセールスポイントとして、ドキュメントが非常に充実していて優れていることがあげられます。公式の英語のドキュメントのみならず、和訳のドキュメントも大変充実していて、これを拾い読みするだけでGradleの事がかなりたくさんわかってきます。</p>

<ul>
<li><a href="http://www.gradle.org/documentation" rel="nofollow noopener" target="_blank">公式ドキュメント</a></li>
<li><a href="http://gradle.monochromeroad.com/docs/index.html" rel="nofollow noopener" target="_blank">和訳ドキュメント</a></li>
</ul>

<p>残念な所を無理に上げると、Mavenのpluginとの互換性がないため、熱心なMavenユーザ(筆者の事です)からすると、今までの環境を一部捨てざるをえないことは少しつらいですね。</p>

<h2>
<span id="gradleのインストール" class="fragment"></span><a href="#gradle%E3%81%AE%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB"><i class="fa fa-link"></i></a>Gradleのインストール</h2>

<h3>
<span id="方法1-古き良き方法を使う" class="fragment"></span><a href="#%E6%96%B9%E6%B3%951-%E5%8F%A4%E3%81%8D%E8%89%AF%E3%81%8D%E6%96%B9%E6%B3%95%E3%82%92%E4%BD%BF%E3%81%86"><i class="fa fa-link"></i></a>方法1 古き良き方法を使う</h3>

<p><a href="http://www.gradle.org/" class="autolink" rel="nofollow noopener" target="_blank">http://www.gradle.org/</a> Gradle公式サイトのDOWNLOADSリンクから最新のGradleを落としてきましょう。<br>
gradle-1.4-bin.zip を解凍し、適当な所に置きます。解凍したフォルダを環境変数<code>GRADLE_HOME</code>にそのパスを設定します。また、<code>GRADLE_HOME/bin</code>にパスを通しておきます。</p>

<h3>
<span id="方法2-gvmを使う" class="fragment"></span><a href="#%E6%96%B9%E6%B3%952-gvm%E3%82%92%E4%BD%BF%E3%81%86"><i class="fa fa-link"></i></a>方法2 gvmを使う</h3>

<p>Groovy enVironment Manager(GVM)を使うのが古き良き方法より、優れているでしょう。可能であればこちらを使うことをオススメします。<br>
利用できる環境や詳細な情報については公式サイト <a href="http://gvmtool.net/" class="autolink" rel="nofollow noopener" target="_blank">http://gvmtool.net/</a> を参照してください。Mac OS XやLinuxの類、WindowsであればCygwin環境であれば利用できます。<br>
インストール方法は以下の通りです。 <code>curl -s get.gvmtool.net | bash</code> を実行後、その後どうしたら良いかの指示が表示されるはずですので、それに従ってください。</p>

<p>gvmが利用できるようになったら、<code>gvm list gradle</code>とするとインストール可能なGradleのバージョンが表示されます。ここでは<code>gvm install gradle 1.4</code>とすることで、Gradleの1.4がインストールできます。1.4をデフォルトバージョンとするか聞かれると思いますので、<code>Y</code>を選択しておきます。</p>

<h3>
<span id="動作確認" class="fragment"></span><a href="#%E5%8B%95%E4%BD%9C%E7%A2%BA%E8%AA%8D"><i class="fa fa-link"></i></a>動作確認</h3>

<p><code>gradle -version</code>を実行してみて、Gradle 1.4がインストールされた事が確認できれば成功です。</p>

<div class="code-frame" data-lang="shell"><div class="highlight"><pre><span></span>------------------------------------------------------------
Gradle 1.4
------------------------------------------------------------

Gradle build time: Monday, January 28, 2013 3:42:46 AM UTC
Groovy: 1.8.6
Ant: Apache Ant(TM) version 1.8.4 compiled on May 22 2012
Ivy: 2.2.0
JVM: 1.7.0_17 (Oracle Corporation 23.7-b01)
OS: Mac OS X 10.8.3 x86_64
</pre></div></div>

<h2>
<span id="gradleを使ってみよう" class="fragment"></span><a href="#gradle%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%A6%E3%81%BF%E3%82%88%E3%81%86"><i class="fa fa-link"></i></a>Gradleを使ってみよう</h2>

<h3>
<span id="gradleを使うと何が出来るの" class="fragment"></span><a href="#gradle%E3%82%92%E4%BD%BF%E3%81%86%E3%81%A8%E4%BD%95%E3%81%8C%E5%87%BA%E6%9D%A5%E3%82%8B%E3%81%AE"><i class="fa fa-link"></i></a>Gradleを使うと何が出来るの？</h3>

<p>まずは、Gradleを使ってみましょう。Gradleではタスクという作業の固まりを作って、それを動かすことで仕事をこなして行きます。<br>
最終的には「Androidのソースをコンパイルして、必要があればJUnitを動かして、端末にアプリをインストールする」とか、「無料版と有料版の2バージョンをリリースしているアプリのコンパイルを自動化し2つのapkを作成する」などの複雑な作業をこなすことが出来るようになるでしょう。(yagiさんパートにぶん投げ)</p>

<p>通常は、他の人が作った便利なタスクを借りて実行させます。そのため、ほんのすこしの記述をしておくだけで、手作業でするとしたらかなりの時間がかかる作業も何度でも繰り返し行わせることができるようになります。もし、「アプリをコンパイルする前にバージョン番号を書き換えたい…」という時は、自分で追加のタスクを書く必要があります。</p>

<h3>
<span id="gradleを使ってみよう-1" class="fragment"></span><a href="#gradle%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%A6%E3%81%BF%E3%82%88%E3%81%86-1"><i class="fa fa-link"></i></a>Gradleを使ってみよう</h3>

<p>まずは簡単なタスクを定義する所から初めてみましょう。最終的には他のタスクに自分の好きな処理を追加できるところまで行きましょう。</p>

<p>以下のファイルを作成し、同じフォルダで<code>gradle helloWorld</code>を実行してみます。短縮して、<code>gradle hW</code>や<code>gradle hell</code>を実行しても同じ結果が得られます。gradleではタスクの名前が一意になる程度に短縮してもよしなに計らってくれます。便利ですね。(<code>gradle he</code>などを実行すると<code>gradle help</code>が実行されてしまいます。さもありなん。)</p>

<div class="code-frame" data-lang="groovy">
<div class="code-lang"><span class="bold">helloworld1/build.gradle</span></div>
<div class="highlight"><pre><span></span><span class="n">task</span> <span class="n">helloWorld</span> <span class="o">&lt;&lt;</span> <span class="o">{</span>
        <span class="n">println</span> <span class="s2">"Hello, world!"</span>
<span class="o">}</span>
</pre></div>
</div>

<p><em>実行結果</em></p>

<div class="code-frame" data-lang="shell"><div class="highlight"><pre><span></span>:helloWorld
Hello, world!

BUILD SUCCESSFUL

Total time: 4.648 secs
</pre></div></div>

<p>新しく定義したhelloWorldタスクが実行され、"Hello, world!"が表示されました。<br>
何が起こっているか簡単に説明しましょう。<code>task helloWorld</code>で新しいタスクを定義し、<code>{}</code>部分が処理を行うクロージャになっています。Gradleの記述言語であるGroovyでは演算子の定義を書き換えることができます。<code>&lt;&lt;</code>はleftShiftメソッドの呼び出しになります。<br>
このコードを少し書き換えるとこのようになります。</p>

<div class="code-frame" data-lang="groovy">
<div class="code-lang"><span class="bold">helloworld2/build.gradle</span></div>
<div class="highlight"><pre><span></span><span class="n">task</span> <span class="n">helloWorld</span> <span class="o">{</span>
        <span class="n">doLast</span> <span class="o">{</span>
                <span class="n">println</span> <span class="s2">"Hello, world!"</span>
        <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>

<p>実行してみると、同じ結果になりますね。<code>&lt;&lt;</code>は、doLastと同じ意味合いになります。もし、<code>&lt;&lt;</code>も<code>doLast</code>もなしにするとどうなるでしょうか？試してみましょう。</p>

<div class="code-frame" data-lang="groovy">
<div class="code-lang"><span class="bold">helloworld3/build.gradle</span></div>
<div class="highlight"><pre><span></span><span class="n">task</span> <span class="n">helloWorld</span> <span class="o">{</span>
        <span class="n">println</span> <span class="s2">"Hello, world!"</span>
<span class="o">}</span>
</pre></div>
</div>

<p>これに対して、<code>gradle tasks</code>を実行してみます。tasksは、利用可能なタスクの一覧を表示してくれるプリインのタスクです。</p>

<div class="code-frame" data-lang="shell"><div class="highlight"><pre><span></span>Hello, world!
:tasks

------------------------------------------------------------
All tasks runnable from root project
------------------------------------------------------------

Help tasks
----------
dependencies - Displays all dependencies declared in root project 'helloworld3'.
dependencyInsight - Displays the insight into a specific dependency in root project 'helloworld3'.
help - Displays a help message
projects - Displays the sub-projects of root project 'helloworld3'.
properties - Displays the properties of root project 'helloworld3'.
tasks - Displays the tasks runnable from root project 'helloworld3' (some of the displayed tasks may belong to subprojects).

Other tasks
-----------
helloWorld

To see all tasks and more detail, run with --all.

BUILD SUCCESSFUL

Total time: 0.884 secs
</pre></div></div>

<p>おや？一番先頭にhelloWorldタスクが実行されてしまっている様が見て取れます。<br>
doLastを使わない部分は、タスクの設定などを行う箇所になるのですね。doLastを使う書き方に戻してみましょう。</p>

<div class="code-frame" data-lang="groovy">
<div class="code-lang"><span class="bold">helloworld4/build.gradle</span></div>
<div class="highlight"><pre><span></span><span class="n">task</span> <span class="n">helloWorld</span> <span class="o">{</span>
        <span class="n">description</span> <span class="o">=</span> <span class="s2">"こんにちは！します。"</span>

        <span class="n">doLast</span> <span class="o">{</span>
                <span class="n">println</span> <span class="s2">"Hello, world!"</span>
        <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>

<p>結果を見てみましょう。</p>

<div class="code-frame" data-lang="shell"><div class="highlight"><pre><span></span>:tasks

------------------------------------------------------------
All tasks runnable from root project
------------------------------------------------------------

中略

Other tasks
-----------
helloWorld - こんにちは！します。

後略
</pre></div></div>

<p>helloWorldタスクは実行されなくなっていますね。代わりにタスクの概要が表示されるようになりました。descriptionとして設定した内容ですね。このように、タスクの設定を行う箇所とすると良いでしょう。</p>

<h3>
<span id="gradleの自由さよ" class="fragment"></span><a href="#gradle%E3%81%AE%E8%87%AA%E7%94%B1%E3%81%95%E3%82%88"><i class="fa fa-link"></i></a>Gradleの自由さよ</h3>

<p>さて、そろそろGradleの本気を発揮してまいりましょう。GradleはGroovyという言語で記述しなければならないのですが、ぶっちゃけJavaのコードはGroovyのコードとしても正しいのです。そのため、まずは必要最低限のGradleが使える程度の勉強だけして、大部分をJavaコードで補うというのも手です。</p>

<div class="code-frame" data-lang="groovy">
<div class="code-lang"><span class="bold">weatherReport/build.gradle</span></div>
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">org.json.JSONObject</span><span class="o">;</span>

<span class="n">buildscript</span> <span class="o">{</span>
    <span class="n">repositories</span> <span class="o">{</span> <span class="n">mavenCentral</span><span class="o">()</span> <span class="o">}</span>
    <span class="n">dependencies</span> <span class="o">{</span> <span class="n">classpath</span> <span class="s1">'org.json:json:20090211'</span> <span class="o">}</span>
<span class="o">}</span>

<span class="n">task</span> <span class="n">weatherReport</span> <span class="o">{</span>
    <span class="n">description</span> <span class="o">=</span> <span class="s2">"今日の東京のお天気をお伝えします"</span>

    <span class="n">doLast</span> <span class="o">{</span>
        <span class="c1">// Livedoorのお天気情報APIを利用してJSON形式のデータを取得する</span>
        <span class="n">URL</span> <span class="n">url</span> <span class="o">=</span> <span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="s2">"http://weather.livedoor.com/forecast/webservice/json/v1?city=130010"</span><span class="o">);</span>
        <span class="n">URLConnection</span> <span class="n">connection</span> <span class="o">=</span> <span class="n">url</span><span class="o">.</span><span class="na">openConnection</span><span class="o">();</span>
        <span class="n">InputStream</span> <span class="n">is</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">();</span>
        <span class="n">BufferedReader</span> <span class="n">reader</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="n">InputStreamReader</span><span class="o">(</span><span class="n">is</span><span class="o">));</span>
        <span class="n">JSONObject</span> <span class="n">json</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JSONObject</span><span class="o">(</span><span class="n">reader</span><span class="o">.</span><span class="na">readLine</span><span class="o">());</span>

        <span class="n">String</span> <span class="n">cityName</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="na">getJSONObject</span><span class="o">(</span><span class="s2">"location"</span><span class="o">).</span><span class="na">getString</span><span class="o">(</span><span class="s2">"city"</span><span class="o">);</span>
        <span class="n">String</span> <span class="n">weather</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="na">getJSONArray</span><span class="o">(</span><span class="s2">"forecasts"</span><span class="o">).</span><span class="na">getJSONObject</span><span class="o">(</span><span class="mi">0</span><span class="o">).</span><span class="na">getString</span><span class="o">(</span><span class="s2">"telop"</span><span class="o">);</span>
        <span class="n">println</span> <span class="s2">"${cityName}の今日のお天気は${weather}です！"</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>

<p>実行してみましょう。</p>

<div class="code-frame" data-lang="shell"><div class="highlight"><pre><span></span>$ gradle wR
:weatherReport
東京の今日のお天気は晴のち曇です！

BUILD SUCCESSFUL

Total time: 2.009 secs
</pre></div></div>

<p>うーむ！素晴らしい自由度！タスクの中でWebサービスにアクセスして今日の天気を調べて表示することもできてしまいました。<br>
GroovyではJavaよりも多くのpackageがデフォルトでimportされているため、<code>java.io.InputStream</code>や<code>java.net.URL</code>をimportせずとも済んでいます。( 参考 <a href="http://groovy.codehaus.org/Differences+from+Java" class="autolink" rel="nofollow noopener" target="_blank">http://groovy.codehaus.org/Differences+from+Java</a> )<br>
その他の目新しい点として、<code>buildscript</code>が増えた事でしょうか。ここでは、build.gradle中で使うライブラリの設定を行なっています。MavenのCentralリポジトリを依存性解決のために利用し、json.orgのライブラリを利用するように設定しています。<br>
MavenのCentralリポジトリには色々な人が作った多大な資産が眠っているため、是非活用してみましょう。<br>
<a href="http://search.maven.org/" class="autolink" rel="nofollow noopener" target="_blank">http://search.maven.org/</a> で検索すると、色々と出てきます。筆者が出しているライブラリも<code>net.vvakame</code>で検索するといくつか出てきます。(宣伝)</p>

<p>さて、これでJavaで出来る範囲であれば、なんであれ自分でオリジナルタスクを作ってどうとでもできそうな気がしてきました。例えば、ファイルのコピーだとかクリーンアップなど、色々と出来そうです。<br>
GradleとGroovyには様々な便利メソッドやタスクがあるので、慣れてきたら自分で調べて裾野を広げていけると良いでしょう。</p>

<h3>
<span id="javaのプロジェクトをビルドできるようにしよう" class="fragment"></span><a href="#java%E3%81%AE%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%82%92%E3%83%93%E3%83%AB%E3%83%89%E3%81%A7%E3%81%8D%E3%82%8B%E3%82%88%E3%81%86%E3%81%AB%E3%81%97%E3%82%88%E3%81%86"><i class="fa fa-link"></i></a>Javaのプロジェクトをビルドできるようにしよう</h3>

<p>さて、Gradleで天気予報を表示するのもなかなか便利かもしれませんが、ビルドツールとしての本領を発揮してもらうことにしましょう。ここでは、多くの読者の環境とマッチするであろう、Java+Eclipseでの開発環境を整えてみます。</p>

<div class="code-frame" data-lang="groovy">
<div class="code-lang"><span class="bold">javaProject1/build.gradle</span></div>
<div class="highlight"><pre><span></span><span class="n">apply</span> <span class="nl">plugin:</span> <span class="s2">"java"</span>
<span class="n">apply</span> <span class="nl">plugin:</span> <span class="s2">"eclipse"</span>

<span class="n">repositories</span> <span class="o">{</span>
    <span class="n">mavenCentral</span><span class="o">()</span>
<span class="o">}</span>

<span class="n">dependencies</span> <span class="o">{</span>
    <span class="n">testCompile</span> <span class="s2">"junit:junit:4.11"</span> 
<span class="o">}</span>
</pre></div>
</div>

<p>これだけ！簡単ですね。Gradleのはプラグインという仕組みがあり、複数のタスクを追加してくれたりします。ここでは<code>java</code>と<code>eclipse</code>を追加しています。これだけで、非常に多くの物事をこなしてくれるようになります。<br>
あとは<code>repositories</code>と<code>dependencies</code>ですね。お天気予報タスク作成の段では、build.gradleで利用するためにjson.orgのライブラリを追加したのでした。一方、こっちではUnitTestを書くために、開発プロジェクトで使うためにJUnitへの依存することを追加しました。<br>
さて、次はJavaコードを書いてみましょう。下準備として、<code>src/main/java</code> フォルダと <code>src/test/java</code> フォルダを手作業で作っておきます。その後で<code>gradle eclipse</code>を実行すると、Eclipseにプロジェクトをimportできるようにするためのメタファイルが生成されます。もちろん、build.gradleで設定したJUnitへの依存関係もちゃんと考慮され、Maven CentralリポジトリからJUnitのjarファイルを自動的にダウンロードしてEclipse上でもビルドパスに追加してくれます。<br>
さくさくとJavaコードを追加してみます。</p>

<div class="code-frame" data-lang="java">
<div class="code-lang"><span class="bold">src/main/java/Sample.java</span></div>
<div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Sample</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Sample</span> <span class="n">sample</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Sample</span><span class="o">();</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">sample</span><span class="o">.</span><span class="na">getMessage</span><span class="o">());</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="n">String</span> <span class="nf">getMessage</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="s">"Sample!"</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>

<div class="code-frame" data-lang="java">
<div class="code-lang"><span class="bold">src/test/java/SampleTest.java</span></div>
<div class="highlight"><pre><span></span><span class="kn">import static</span> <span class="nn">org.hamcrest.CoreMatchers.*</span><span class="o">;</span>
<span class="kn">import static</span> <span class="nn">org.junit.Assert.*</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.junit.Test</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SampleTest</span> <span class="o">{</span>

    <span class="nd">@Test</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">test</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">Sample</span> <span class="n">sample</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Sample</span><span class="o">();</span>
        <span class="n">assertThat</span><span class="o">(</span><span class="n">sample</span><span class="o">.</span><span class="na">getMessage</span><span class="o">(),</span> <span class="n">is</span><span class="o">(</span><span class="s">"Sample!"</span><span class="o">));</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>

<p>試しに、Eclipse上でプロジェクトを右クリック→Run as→JUnit Testを選択してテストを走らせてみます。おそらく、緑になったことでしょう。素晴らしい！<br>
次に、gradle上でもテストを動かしてみます。<code>gradle test</code>でテストが実行できます。</p>

<div class="code-frame" data-lang="shell"><div class="highlight"><pre><span></span>$ gradle test
:compileJava UP-TO-DATE
:processResources UP-TO-DATE
:classes UP-TO-DATE
:compileTestJava
:processTestResources UP-TO-DATE
:testClasses
:test
Picked up _JAVA_OPTIONS: -Dfile.encoding=UTF-8

BUILD SUCCESSFUL

Total time: 2.284 secs
</pre></div></div>

<p>テストが走って、完走したようです。念の為にわざとテストを失敗させてみます。</p>

<div class="code-frame" data-lang="shell"><div class="highlight"><pre><span></span>$ gradle test
:compileJava UP-TO-DATE
:processResources UP-TO-DATE
:classes UP-TO-DATE
:compileTestJava
:processTestResources UP-TO-DATE
:testClasses
:test

SampleTest &gt; test FAILED
    java.lang.AssertionError at SampleTest.java:11

1 test completed, 1 failed
:test FAILED

FAILURE: Build failed with an exception.

* What went wrong:
Execution failed for task ':test'.
&gt; There were failing tests. See the report at: file:///Users/vvakame/Dropbox/work/docs/nikkei-software-2013-06-gradle/sample/javaProject1/build/reports/tests/index.html

* Try:
Run with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output.

BUILD FAILED

Total time: 2.156 secs
</pre></div></div>

<p>よしよし、良い感じですね。これでJavaプロジェクトをGradleで管理できるようになりました。</p>

<h3>
<span id="androidのプロジェクトをeclipseで開発できるようにしてみよう序章" class="fragment"></span><a href="#android%E3%81%AE%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%82%92eclipse%E3%81%A7%E9%96%8B%E7%99%BA%E3%81%A7%E3%81%8D%E3%82%8B%E3%82%88%E3%81%86%E3%81%AB%E3%81%97%E3%81%A6%E3%81%BF%E3%82%88%E3%81%86%E5%BA%8F%E7%AB%A0"><i class="fa fa-link"></i></a>AndroidのプロジェクトをEclipseで開発できるようにしてみよう(序章)</h3>

<p>(Android公式のやり方とは違います。公式のやり方はyagiさんパートを参照。)</p>

<p>さて、この記事の後半ではyagiさんがGradle+Android開発の方法を紹介してくださいますが、ここではGradleのAndroid Pluginを使わずに無理矢理EclipseでAndroid開発が出来るようにしてみます。</p>

<p>まず、ざっくりとEclipse自体の説明を行います。Eclipseはプロジェクトに対して、いくつか設定ファイルを持ちます。代表的なのは、プロジェクトの設定が書いてある<code>.project</code>、プロジェクトのビルドパスが書いてある<code>.classpath</code>、Java開発用プラグインの設定ファイルである<code>.settings/org.eclipse.jdt.core.prefs</code>などです。<br>
要は、それらファイルを<code>gradle eclipse</code>した時に生成してやれば良いわけです。</p>

<p>まずは、Gradle関係なくADTのWizardで普通にAndroidプロジェクトを生成し、どういう設定ファイルか確認してみます。そして、その結果を再現してみます。</p>

<div class="code-frame" data-lang="xml">
<div class="code-lang"><span class="bold">androidProject/.project</span></div>
<div class="highlight"><pre><span></span><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="nt">&lt;projectDescription&gt;</span>
    <span class="nt">&lt;name&gt;</span>AndroidProject<span class="nt">&lt;/name&gt;</span>
    <span class="nt">&lt;comment&gt;&lt;/comment&gt;</span>
    <span class="nt">&lt;projects&gt;</span>
    <span class="nt">&lt;/projects&gt;</span>
    <span class="nt">&lt;buildSpec&gt;</span>
        <span class="nt">&lt;buildCommand&gt;</span>
            <span class="nt">&lt;name&gt;</span>com.android.ide.eclipse.adt.ResourceManagerBuilder<span class="nt">&lt;/name&gt;</span>
            <span class="nt">&lt;arguments&gt;</span>
            <span class="nt">&lt;/arguments&gt;</span>
        <span class="nt">&lt;/buildCommand&gt;</span>
        <span class="nt">&lt;buildCommand&gt;</span>
            <span class="nt">&lt;name&gt;</span>com.android.ide.eclipse.adt.PreCompilerBuilder<span class="nt">&lt;/name&gt;</span>
            <span class="nt">&lt;arguments&gt;</span>
            <span class="nt">&lt;/arguments&gt;</span>
        <span class="nt">&lt;/buildCommand&gt;</span>
        <span class="nt">&lt;buildCommand&gt;</span>
            <span class="nt">&lt;name&gt;</span>org.eclipse.jdt.core.javabuilder<span class="nt">&lt;/name&gt;</span>
            <span class="nt">&lt;arguments&gt;</span>
            <span class="nt">&lt;/arguments&gt;</span>
        <span class="nt">&lt;/buildCommand&gt;</span>
        <span class="nt">&lt;buildCommand&gt;</span>
            <span class="nt">&lt;name&gt;</span>com.android.ide.eclipse.adt.ApkBuilder<span class="nt">&lt;/name&gt;</span>
            <span class="nt">&lt;arguments&gt;</span>
            <span class="nt">&lt;/arguments&gt;</span>
        <span class="nt">&lt;/buildCommand&gt;</span>
    <span class="nt">&lt;/buildSpec&gt;</span>
    <span class="nt">&lt;natures&gt;</span>
        <span class="nt">&lt;nature&gt;</span>com.android.ide.eclipse.adt.AndroidNature<span class="nt">&lt;/nature&gt;</span>
        <span class="nt">&lt;nature&gt;</span>org.eclipse.jdt.core.javanature<span class="nt">&lt;/nature&gt;</span>
    <span class="nt">&lt;/natures&gt;</span>
<span class="nt">&lt;/projectDescription&gt;</span>
</pre></div>
</div>

<div class="code-frame" data-lang="xml">
<div class="code-lang"><span class="bold">androidProject/.classpath</span></div>
<div class="highlight"><pre><span></span><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="nt">&lt;classpath&gt;</span>
    <span class="nt">&lt;classpathentry</span> <span class="na">kind=</span><span class="s">"src"</span> <span class="na">path=</span><span class="s">"src"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;classpathentry</span> <span class="na">kind=</span><span class="s">"src"</span> <span class="na">path=</span><span class="s">"gen"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;classpathentry</span> <span class="na">kind=</span><span class="s">"con"</span> <span class="na">path=</span><span class="s">"com.android.ide.eclipse.adt.ANDROID_FRAMEWORK"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;classpathentry</span> <span class="na">kind=</span><span class="s">"con"</span> <span class="na">path=</span><span class="s">"com.android.ide.eclipse.adt.LIBRARIES"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;classpathentry</span> <span class="na">kind=</span><span class="s">"output"</span> <span class="na">path=</span><span class="s">"bin/classes"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/classpath&gt;</span>
</pre></div>
</div>

<p>なるほど。こんな感じですね。通常のJavaプロジェクトとくらべてみると、ビルドコマンドが3つ(javabuilder以外)と、ネイチャーが1つ(AndroidNature)が追加されているようです。また、クラスパスにソースフォルダとしてgenフォルダが追加され、JREコンテナが削除され、代わりにAndroidのフレームワークとライブラリが追加されています。また、コンパイル後のアウトプットフォルダがbin/classesとなっています。<br>
また、AndroidのサポートしているJavaのバージョンが5と6だけなので、そのための設定も追加する必要がありそうです。AndroidもはやくJava7対応してほしいですね。7はまだいいとして、8が来なかったら発狂してオワコン扱いし始めますよ僕は。invokeDynamicのサポートとかdalvikの改修もめんどくさいし色々な機種にそれを反映させていくのにも時間がかかるのだから段階的に進めていってほしいものです。古い環境でコードを書かされる事を喜ぶエンジニアはいないのですよ！</p>

<p>それでは、build.gradleを書いてみましょう。Androidの場合はライブラリの追加は、普通のJavaプロジェクトと同じようにやるのではなく、libsフォルダにjarを入れることで行いますね。そのため、dependenciesで<code>compile "com.google.android:support-v4:r7"</code>などとやってしまうわけには行きません。そのため、<code>androidLibs</code>を作成して独自に依存関係の管理をしてやるようにします。dependenciesでの記述ではそちらを使います。また、libsフォルダに依存ライブラリをコピーするために<code>copyDependenciesToAndroidLibs</code>タスクを作成し、<code>gradle eclipse</code>が実行された時に依存関係が勝手にlibsフォルダに入るようにしてやります。ついでに、<code>clean</code>タスクでlibsフォルダを綺麗にするようにしてやります。</p>

<p>また、.classpathと.projectファイルの生成も<code>eclipse</code>に追加の設定を行い、望む物が生成されるようにしてやります。</p>

<div class="code-frame" data-lang="groovy">
<div class="code-lang"><span class="bold">androidProject/build.gradle</span></div>
<div class="highlight"><pre><span></span><span class="n">apply</span> <span class="nl">plugin:</span> <span class="s2">"java"</span>
<span class="n">apply</span> <span class="nl">plugin:</span> <span class="s2">"eclipse"</span>

<span class="n">sourceCompatibility</span> <span class="o">=</span> <span class="mf">1.6</span>
<span class="n">targetCompatibility</span> <span class="o">=</span> <span class="mf">1.6</span>

<span class="n">repositories</span> <span class="o">{</span> <span class="n">mavenCentral</span><span class="o">()</span> <span class="o">}</span>

<span class="n">configurations</span> <span class="o">{</span> <span class="n">androidLibs</span> <span class="o">}</span>

<span class="n">dependencies</span> <span class="o">{</span>
    <span class="n">androidLibs</span> <span class="s2">"com.google.android:support-v4:r7"</span>
    <span class="n">androidLibs</span> <span class="s2">"com.googlecode.android-query:android-query:0.24.3"</span>
<span class="o">}</span>

<span class="n">sourceSets</span> <span class="o">{</span>
    <span class="n">main</span> <span class="o">{</span>
        <span class="n">java</span><span class="o">.</span><span class="na">srcDirs</span> <span class="s2">"src"</span><span class="o">,</span> <span class="s2">"gen"</span>
        <span class="n">output</span><span class="o">.</span><span class="na">classesDir</span> <span class="o">=</span> <span class="s2">"bin/classes"</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="n">task</span> <span class="nf">clean</span><span class="o">(</span><span class="nl">overwrite:</span> <span class="kc">true</span><span class="o">)</span> <span class="o">{</span> <span class="n">delete</span> <span class="s2">"libs"</span> <span class="o">}</span>

<span class="n">task</span> <span class="nf">copyDependenciesToAndroidLibs</span><span class="o">(</span><span class="nl">type:</span> <span class="n">Copy</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">into</span> <span class="s2">"libs"</span>
    <span class="n">from</span> <span class="n">configurations</span><span class="o">.</span><span class="na">androidLibs</span>

    <span class="n">eclipseJdt</span><span class="o">.</span><span class="na">dependsOn</span> <span class="n">copyDependenciesToAndroidLibs</span>
<span class="o">}</span>

<span class="n">eclipse</span> <span class="o">{</span>
    <span class="n">project</span> <span class="o">{</span>
        <span class="n">name</span> <span class="o">=</span> <span class="s1">'AndroidProject'</span>
        <span class="n">natures</span> <span class="s1">'com.android.ide.eclipse.adt.AndroidNature'</span>
        <span class="n">buildCommand</span> <span class="s1">'com.android.ide.eclipse.adt.ResourceManagerBuilder'</span>
        <span class="n">buildCommand</span> <span class="s1">'com.android.ide.eclipse.adt.PreCompilerBuilder'</span>
        <span class="n">buildCommand</span> <span class="s1">'com.android.ide.eclipse.adt.ApkBuilder'</span>
    <span class="o">}</span>
    <span class="n">classpath</span> <span class="o">{</span>
        <span class="n">containers</span><span class="o">.</span><span class="na">clear</span><span class="o">();</span>
        <span class="n">containers</span> <span class="s1">'com.android.ide.eclipse.adt.ANDROID_FRAMEWORK'</span><span class="o">,</span> <span class="s1">'com.android.ide.eclipse.adt.LIBRARIES'</span>
        <span class="n">downloadSources</span> <span class="o">=</span> <span class="kc">true</span>
        <span class="n">downloadJavadoc</span> <span class="o">=</span> <span class="kc">true</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>

<p>今回のbuild.gradleではbuildは行わないので、これで十分でしょう。<code>gradle eclipse</code>でAndroid開発用の設定ファイルが生成されるようになりました。</p>

<h3>
<span id="antの代わりに" class="fragment"></span><a href="#ant%E3%81%AE%E4%BB%A3%E3%82%8F%E3%82%8A%E3%81%AB"><i class="fa fa-link"></i></a>antの代わりに</h3>

<p>現在、antを使っているプロジェクトがGradleに移行してくるのもなかなか簡単です。やってみましょう。</p>

<div class="code-frame" data-lang="xml">
<div class="code-lang"><span class="bold">ant/build.xml</span></div>
<div class="highlight"><pre><span></span><span class="cp">&lt;?xml version="1.0" ?&gt;</span>
<span class="nt">&lt;project</span> <span class="na">name=</span><span class="s">"AntSample"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;target</span> <span class="na">name=</span><span class="s">"roll"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;script</span> <span class="na">language=</span><span class="s">"javascript"</span><span class="nt">&gt;</span>
            <span class="cp">&lt;![CDATA[</span>
<span class="cp">            // 6面ダイスを2個ふり、合計値を表示する</span>
<span class="cp">            var dice = Math.ceil(Math.random() * 6) + Math.ceil(Math.random() * 6);</span>
<span class="cp">            var echo = AntSample.createTask("echo");</span>
<span class="cp">            echo.setMessage("2D6: " + dice);</span>
<span class="cp">            echo.perform();</span>
<span class="cp">            ]]&gt;</span>
        <span class="nt">&lt;/script&gt;</span>
    <span class="nt">&lt;/target&gt;</span>
<span class="nt">&lt;/project&gt;</span>
</pre></div>
</div>

<div class="code-frame" data-lang="groovy">
<div class="code-lang"><span class="bold">ant/build.gradle</span></div>
<div class="highlight"><pre><span></span><span class="n">ant</span><span class="o">.</span><span class="na">importBuild</span> <span class="s1">'build.xml'</span>

<span class="n">task</span> <span class="n">rollBefore</span> <span class="o">{</span>
    <span class="n">doLast</span> <span class="o">{</span>
        <span class="n">println</span> <span class="s2">"ダメージ計算を行います。"</span>
    <span class="o">}</span>
    <span class="n">roll</span><span class="o">.</span><span class="na">dependsOn</span> <span class="n">rollBefore</span>
<span class="o">}</span>

<span class="n">task</span> <span class="nf">rollAfter</span><span class="o">(</span><span class="nl">dependsOn:</span> <span class="n">roll</span><span class="o">)</span> <span class="o">&lt;&lt;</span> <span class="o">{</span>
    <span class="n">ant</span><span class="o">.</span><span class="na">echo</span> <span class="s2">"ダメージロールの結果をHPから引いてください。"</span>
<span class="o">}</span>
</pre></div>
</div>

<p>実行してみます。</p>

<div class="code-frame" data-lang="shell"><div class="highlight"><pre><span></span>$ gradle rollAfter
:rollBefore
ダメージ計算を行います。
:roll
[ant:echo] 2D6: 11
:rollAfter
[ant:echo] ダメージロールの結果をHPから引いてください。

BUILD SUCCESSFUL

Total time: 1.49 secs
</pre></div></div>

<p>うまくいったようです。既存のantの設定ファイルを<code>ant.importBuild</code>でインポートするとantのタスクがそのままgradleのタスクとして利用できるようになります。本来のgradleタスクと同様に扱うことができます。ここでは、rollBeforeタスクをGradle側で定義し、Ant側タスクであるrollに依存するように設定しています(<code>roll.dependsOn rollBefore</code>部分)。<br>
また、rollAfterタスクも定義し、rollタスクとの依存関係を定義しています。このため、rollAfterはrollに依存し、rollはrollBeforeに依存しているため、rollAfterを実行するとrollBefore→roll→rollAfterの順で実行されました。<br>
<code>gradle roll</code>で上記と同じ結果を得たい場合はrollAfterの代わりに以下のよう書いてrollタスクのdoLastの処理をにすることもできます。</p>

<div class="code-frame" data-lang="groovy"><div class="highlight"><pre><span></span><span class="n">roll</span> <span class="o">&lt;&lt;</span> <span class="o">{</span>
    <span class="n">ant</span><span class="o">.</span><span class="na">echo</span> <span class="s2">"ダメージロールの結果をHPから引いてください。"</span>
<span class="o">}</span>
</pre></div></div>

<p>また、rollAfterタスクの中で使っているように、antのechoタスクを利用しています。既にantに便利なものがあるのであればさくさく使ってしまい、徐々に移行していくのも良いでしょう。筆者はantのjavacタスクを利用し、AnnotationProcessorによるJavaコードの前処理を行ったりしています。</p>

<h3>
<span id="mavenの代わりに" class="fragment"></span><a href="#maven%E3%81%AE%E4%BB%A3%E3%82%8F%E3%82%8A%E3%81%AB"><i class="fa fa-link"></i></a>Mavenの代わりに</h3>

<p>antがとっても簡単にとりあえず移行できたのと対照的に、MavenユーザがGradleに移行するにはあんまり便利なパスが用意されていません。<br>
既存のMaven PluginはGradleと互換性がないため、既存の資産は使うことができません。Maven Centralリポジトリを利用して依存性の解決はできるので楽なんですけどね。</p>

<p>筆者は普段の開発にGoogleAppEngine/Javaを多用しております。そのためのフレームワークとしてSlim3を利用し、サーバ側からクライアント側へのデータのやり取りのために筆者作のJSON処理ライブラリであるJsonPullParserを利用しています。</p>

<p><a href="https://gist.github.com/vvakame/5176993" rel="nofollow noopener" target="_blank">gist</a></p>

<p>GradleのEclipse pluginさんはかなり柔軟で、ご覧のとおりEclipse用設定ファイルをかなり柔軟に弄る事ができます。このbuild.gradleでは<code>.settings/org.eclipse.jdt.core.prefs</code>を弄るパートが<code>properties.setProperty</code>を連発することになりあまり美しくないですね。処理後に手書き処理で無理矢理差し替えてしまったほうが綺麗に行きそうです。</p>

<h2>
<span id="よりgradleが便利になる設定使い方" class="fragment"></span><a href="#%E3%82%88%E3%82%8Agradle%E3%81%8C%E4%BE%BF%E5%88%A9%E3%81%AB%E3%81%AA%E3%82%8B%E8%A8%AD%E5%AE%9A%E4%BD%BF%E3%81%84%E6%96%B9"><i class="fa fa-link"></i></a>よりGradleが便利になる設定・使い方</h2>

<p>ここからは、更にGradleを幸せに使える方法を紹介していきます。</p>

<h3>
<span id="gradle---daemon-について" class="fragment"></span><a href="#gradle---daemon-%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6"><i class="fa fa-link"></i></a>gradle --daemon について</h3>

<p>さて、Gradleを使っていると不満に思えてくるのが、実行時間の遅さです。なにせ、筆者の環境では先のJavaプロジェクトで<code>gradle test</code>すると実行に4.732秒ほどかかります。少し、長いなと感じますね。<br>
その不満を解消するために、gradleには裏で常に待機していてもらうモードがあります。それが--daemonオプションです。<br>
試しに<code>gradle --daemon test</code>としてみましょう。1回目は裏で待機していないため、やはり5秒くらいかかりますがもう一回実行してみると、1.041秒というごく短時間でタスクを完了することができます。うーん、素晴らしい！<br>
毎回毎回 --daemon とつけるのもメンドクサイので、<code>GRADLE_OPTS</code>環境変数に<code>-Dorg.gradle.daemon=true</code>をセットすると、デフォルトでdaemonを使ってくれるようになります。<br>
動いているdaemonを止めたい時や、一時的に使いたくない時のためにそれぞれ<code>--stop</code>や<code>--no-daemon</code>オプションが用意されています。</p>

<h3>
<span id="gradle-wrapper-について" class="fragment"></span><a href="#gradle-wrapper-%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6"><i class="fa fa-link"></i></a>gradle wrapper について</h3>

<p>さて、Gradleを導入したい！と思っても、チーム全員の開発環境をGradle用に整えて全員で歩調を併せて…といったことを考えるととたんに腰が重くなるものです。しかし、Gradleならその点簡単に解決できます。<br>
gradle wrapperという仕組みが用意されていて、チームの中でGradleをマジメにインストールするのは貴方1人、それ以外の人はsvnやgitのリポジトリにコミットされているファイルだけ使えばOK！という塩梅にすることができます。<br>
見てみましょう。</p>

<div class="code-frame" data-lang="groovy">
<div class="code-lang"><span class="bold">gradleWrapper/build.gradle</span></div>
<div class="highlight"><pre><span></span><span class="n">apply</span> <span class="nl">plugin:</span> <span class="s2">"java"</span>
<span class="n">apply</span> <span class="nl">plugin:</span> <span class="s2">"eclipse"</span>

<span class="n">repositories</span> <span class="o">{</span>
    <span class="n">mavenCentral</span><span class="o">()</span>
<span class="o">}</span>

<span class="n">dependencies</span> <span class="o">{</span>
    <span class="n">testCompile</span> <span class="s2">"junit:junit:4.11"</span> 
<span class="o">}</span>

<span class="n">task</span> <span class="nf">wrapper</span><span class="o">(</span><span class="nl">type:</span> <span class="n">Wrapper</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">gradleVersion</span> <span class="o">=</span> <span class="s1">'1.4'</span>
<span class="o">}</span>
</pre></div>
</div>

<p>task wrapper の記述が増えていますね。この記述を増やした後に <code>gradle wrapper</code>を実行します。<br>
そうすると<code>gradlew</code>(Mac, Linux用)と<code>gradlew.bat</code>(Windows用)と<code>gradleフォルダ</code>が生成されます。これらをリポジトリにコミットするようにします。すると、他の人達はgradleコマンドの代わりに<code>gradlew</code>を使えるようになります。<code>gradlew</code>を実行すると、もし必要であればgradleコマンド実行用のバイナリを勝手にダウンロードしてくれます。<br>
まとめると、「みんな！gradleを使うためにはgradlewを使ってくれればOKだから！」と宣言すれば、すぐにチーム全員で使いはじめることが出来るようになるということです。</p>

<h3>
<span id="gradle---gui-について" class="fragment"></span><a href="#gradle---gui-%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6"><i class="fa fa-link"></i></a>gradle --gui について</h3>

<p>いやいや、gradlewは確かに嬉しいけど、<code>gradlew eclipse</code>とか、<code>gradlew test</code>とか、みんなに覚えされるのは大変だよ…！という意見もあるかもしれません。<br>
ご安心ください！gradleにはなんとGUIモードも用意されているのです。試しに、<code>gradle --gui</code>または<code>gradlew --gui</code>を実行してみてください。</p>

<p><a href="https://camo.qiitausercontent.com/2b60351fe32379b3c76996e2d2c96028c9782bd2/68747470733a2f2f646c2e64726f70626f7875736572636f6e74656e742e636f6d2f752f363538313238362f6e696b6b65692d736f6674776172652d323031332d30362d677261646c652f677261646c652d6775692e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/2b60351fe32379b3c76996e2d2c96028c9782bd2/68747470733a2f2f646c2e64726f70626f7875736572636f6e74656e742e636f6d2f752f363538313238362f6e696b6b65692d736f6674776172652d323031332d30362d677261646c652f677261646c652d6775692e706e67" alt="GradleのGUI" data-canonical-src="https://dl.dropboxusercontent.com/u/6581286/nikkei-software-2013-06-gradle/gradle-gui.png"></a></p>

<p>おぉ！素晴らしい！実行可能なタスクの一覧のウィンドウが表示され、マウスでもって好きなタスクを実行することができます。<br>
あとは、<code>gradlew --gui</code>を実行してくれるバッチファイルでも置いておいて、それをダブルクリックするように教えればよいですね。お気に入りタスクを登録することもできるので、よく使うタスクを教えてあげると良いでしょう。<br>
これで、みんなに簡単にgradleを使ってもらうことができますね :)</p>

<h3>
<span id="gradleの記述環境" class="fragment"></span><a href="#gradle%E3%81%AE%E8%A8%98%E8%BF%B0%E7%92%B0%E5%A2%83"><i class="fa fa-link"></i></a>Gradleの記述環境</h3>

<p>codehausによる<a href="http://groovy.codehaus.org/Eclipse+Plugin" rel="nofollow noopener" target="_blank">Groovy Eclipseプラグイン</a>を利用するか、<a href="http://www.jetbrains.com/idea/" rel="nofollow noopener" target="_blank">IntelliJ IDEA</a>を利用すると良いでしょう。<br>
筆者は本稿執筆のために、Groovy Eclipseプラグインをインストールして、build.gradleをGroovy Editorで編集しています。<br>
<a href="https://camo.qiitausercontent.com/528d54f8baf07836c8f2ffb7eabdc8a95d785b5d/68747470733a2f2f646c2e64726f70626f7875736572636f6e74656e742e636f6d2f752f363538313238362f6e696b6b65692d736f6674776172652d323031332d30362d677261646c652f45636c697073655f4d61726b6574706c6163652e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/528d54f8baf07836c8f2ffb7eabdc8a95d785b5d/68747470733a2f2f646c2e64726f70626f7875736572636f6e74656e742e636f6d2f752f363538313238362f6e696b6b65692d736f6674776172652d323031332d30362d677261646c652f45636c697073655f4d61726b6574706c6163652e706e67" alt="Groovy Eclipseプラグイン" data-canonical-src="https://dl.dropboxusercontent.com/u/6581286/nikkei-software-2013-06-gradle/Eclipse_Marketplace.png"></a></p>

<h3>
<span id="参考書籍資料について" class="fragment"></span><a href="#%E5%8F%82%E8%80%83%E6%9B%B8%E7%B1%8D%E8%B3%87%E6%96%99%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6"><i class="fa fa-link"></i></a>参考書籍・資料について</h3>

<p>英語の本ですが、<a href="http://www.packtpub.com/gradle-effective-implementation-guide/book" rel="nofollow noopener" target="_blank">毛虫本</a>が大変良い資料になるでしょう。僕もこの記事を読むためにコードの部分を拾い読みするとかしましたが、大変参考になりました。</p>

<ul>
<li><a href="http://b.hatena.ne.jp/vvakame/gradle/" rel="nofollow noopener" target="_blank">わかめのはてブ</a></li>
<li><a href="http://www.slideshare.net/nobusue/gws-20130315-gradlehandson" rel="nofollow noopener" target="_blank">G*ワークショップZのGradleハンズオンのスライド</a></li>
</ul>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>vvakameさんの<br />2位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>1213</kbd>
		<a target="_blank" href="https://qiita.com/vvakame/items/d657baf26cf83ac98bd0">技術的な文章を書くための1歩、2歩、3歩</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-10-12 22:31:45</center>
	</td>
	<td style="width:200px;">
		@vvakame<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/13283/profile-images/1473682747">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[原稿]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>ちょっと書きたくなったので書くんじゃーい！<br>
この文章を読み終わった時、読者がそれなりわかめ品質な文章を出力できるようになり、どこかに寄稿した時に全面リテイクを食らったりしないようになることを目指します。</p>

<p>mhidaka が <a href="http://qiita.com/mhidaka/items/c5fe729716c640b50ff7" id="reference-8817a53c8cd66d78b320">0歩目</a>を書いてくれました！</p>

<h2>
<span id="背景" class="fragment"></span><a href="#%E8%83%8C%E6%99%AF"><i class="fa fa-link"></i></a>背景</h2>

<p>筆者は普通のエンジニアです。その辺の開発とかしてる会社に勤めています。技術系の原稿も書きます。<br>
原稿書きでご飯食べてるわけではありません(晩ご飯が豪華になることは稀にあります)。</p>

<p>今まで有能なレビューワー(muなんとかさんとか)編集さんとか(某社の安藤さんとか)とかとかに鍛えていただきました。<br>
この場を借りてお礼を述べておきたいと思います。ありがとうございます。</p>

<p>なお、この文章は2013年10月時点での筆者(わかめ)のやり方です。<br>
将来的にはより良いやり方を見つけるでしょうし、これとは全く違う書き方で上手にやっている人もいると思います。</p>

<p>これから偉そうな事述べるであろう<a href="http://b.hatena.ne.jp/vvakame/%E4%BF%BA%E3%81%AE%E8%A8%98%E4%BA%8B" rel="nofollow noopener" target="_blank">筆者の書いた記事</a>とか<a href="http://www.slideshare.net/vvakame/presentations" rel="nofollow noopener" target="_blank">スライド</a>とか。<br>
あ、僕の今までのQiitaの記事の<a href="http://qiita.com/vvakame">ストック数</a>見ます？(ﾄﾞﾔｯ</p>

<h1>
<span id="準備体操-なぜ文章を書くのか" class="fragment"></span><a href="#%E6%BA%96%E5%82%99%E4%BD%93%E6%93%8D-%E3%81%AA%E3%81%9C%E6%96%87%E7%AB%A0%E3%82%92%E6%9B%B8%E3%81%8F%E3%81%AE%E3%81%8B"><i class="fa fa-link"></i></a>準備体操 なぜ文章を書くのか</h1>

<p>いきなりですが、質問です。貴方は何故原稿を書こうとしているのでしょうか？考えてみましょう。</p>

<ul>
<li>自分の知識・経験に広める価値があると判断している

<ul>
<li>言い換えると、何かを布教したい</li>
</ul>
</li>
<li>最新の情報について勉強したい

<ul>
<li>言い換えると、ついでに原稿料貰いたい</li>
</ul>
</li>
</ul>

<p>だいたいこんな所だと思います。</p>

<h2>
<span id="知らない事も書いてみよう" class="fragment"></span><a href="#%E7%9F%A5%E3%82%89%E3%81%AA%E3%81%84%E4%BA%8B%E3%82%82%E6%9B%B8%E3%81%84%E3%81%A6%E3%81%BF%E3%82%88%E3%81%86"><i class="fa fa-link"></i></a>知らない事も書いてみよう</h2>

<p>多くの人が勘違いしがちなのですが、自分が知らない事について書くというのは、実は罪ではありません。貴方は許されています。知らない事について調べて書いてもよいのです。<br>
文章を書くということは、その内容について責任を持つということと不可分です。つまり、貴方は日本語を話す人としては、一時的にであれその分野について最も詳しく知っている人になる必要があります。</p>

<p>その分野について最も詳しく、というと死ぬほど難易度が高そうに思いますが、実のところそんなに難しいことではないのです。<br>
例えば、モンスターハンター4を極めし者 になるのは死ぬほど難しいと思います。ですが、モンスターハンター4の下位地底火山で最短ルートで大地の結晶を集めて帰還することを極めし者 くらいまで限定すると、不可能ではないように思われます。<br>
まずはそこを筆者自身の技術的到達点として狙って行きましょう。</p>

<p>もし万が一、責任を持ちたくない場合は、見るからにちゃらんぽらんで、信頼がおけないような文章に仕上がるように努力しましょう。</p>

<h1>
<span id="第1歩-設計" class="fragment"></span><a href="#%E7%AC%AC1%E6%AD%A9-%E8%A8%AD%E8%A8%88"><i class="fa fa-link"></i></a>第1歩 設計</h1>

<p>まず、最初にこれから作成する文章の設計を行います。<br>
設計するのは以下の要素についてです。</p>

<ul>
<li>対象読者を考える

<ul>
<li>言い換えると、原稿を読む前の読者のレベルを設定する</li>
</ul>
</li>
<li>読み終わった時に読者が得られるものを考える

<ul>
<li>言い換えると、原稿を読み終わった後の読者の到達点を設定する</li>
</ul>
</li>
<li>文章の構造について考える

<ul>
<li>章・節・項 を考えます。

<ul>
<li>Markdownでいうと、# と ## と ### を先に書く</li>
<li>文章の長さに応じて考える深さを変えます。この文章は深さ1で設計しました。</li>
</ul>
</li>
</ul>
</li>
<li>サンプルを作成する場合、どういうサンプルを作成するか検討する

<ul>
<li>実はこれがかなり難しいです</li>
<li>説明したい要素が十分に含まれている</li>
<li>説明しない要素かつ難しいものがなるべく含まれないようにする</li>
<li>短いソースコードにできる</li>
<li>説明する技術のメリット(とデメリット)が明確にわかる</li>
</ul>
</li>
</ul>

<p>筆者(わかめ)の場合、この工程に意識的に取り組む時間はおおよそ10分〜2時間くらい消費されます。<br>
かける時間は短いですが、ここを真面目にやらないと後から大炎上するのは皆様も知る通りです。</p>

<h2>
<span id="文章構造を考えるうえで" class="fragment"></span><a href="#%E6%96%87%E7%AB%A0%E6%A7%8B%E9%80%A0%E3%82%92%E8%80%83%E3%81%88%E3%82%8B%E3%81%86%E3%81%88%E3%81%A7"><i class="fa fa-link"></i></a>文章構造を考えるうえで</h2>

<p>文章構造について考える。について少し詳しく書いておきます。<br>
筆者が留意しているのは、読者は<a href="http://ja.wikipedia.org/wiki/%E6%9C%89%E9%99%90%E3%82%AA%E3%83%BC%E3%83%88%E3%83%9E%E3%83%88%E3%83%B3" rel="nofollow noopener" target="_blank">有限オートマトン(有限状態機械)</a>だということです。<br>
初期状態(対象読者を考える)と受理状態(読み終わった後に読者が得られるものを考える)は既に考えてあるはずです。<br>
ここでいう章・節・項を設計することは、読者の状態を初期状態から受理状態に変化させるための途中の状態を設計することに他なりません。<br>
読者を無理なく初期状態から受理状態に遷移させるために、情報を与える順序は前後してはいけませんし、途中に歯抜けが発生してもいけません。<br>
そこを正しく行うにはどういう状態で情報を渡していけばよいのかを考え、設計を行います。</p>

<p>筆者は、筆者内部での課題の設定(と読者への共有)、筆者の考えた解決方法の開陳(と読者への共有)、筆者の考えた解決方法の提示と結論 を示すと良いと考えています。</p>

<p>また、その他の重要な点として、サンプルコードを用意する場合について。<br>
ソースコードを解説する順番に説明の順番がかなり依存するので、サンプルを用意する場合は文章構造がサンプルコードの説明をしやすい順番にできるかも考慮に入れます。</p>

<h2>
<span id="それからそれから" class="fragment"></span><a href="#%E3%81%9D%E3%82%8C%E3%81%8B%E3%82%89%E3%81%9D%E3%82%8C%E3%81%8B%E3%82%89"><i class="fa fa-link"></i></a>それからそれから？</h2>

<p>さて、上記4要素を書ききるためには、まずは書く対象について概要を知らなければなりません。<br>
ドキュメントやサンプルコードがあれば、それに目を通して概要を掴んでおくと良いでしょう。</p>

<p>ここまで書き終わったら、完成までにどういう事を調べなければいけないか、どういう障害がありうるか、ある程度あたりがつくようになっているでしょう。<br>
この時点で、何か憂いがある場合は解決しておきます。他の人とのネタ被り・自社の機密に抵触するか・機材や経費は許容範囲内か、などなどが考えられます。<br>
懸念事項は全てクリアしておき、もし編集さんなどの第三者がいる場合はこの時点で一旦相談しておくと良いでしょう。<br>
この辺りの手を抜いてしまうと、後々例外やエラーの処理方法を最初に設計しておかなかったシステムの如く、後から仕組みを追加してテストを追加して工数は倍々ドン！みたいな身に覚えのある辛い展開になってしまいます。</p>

<h2>
<span id="ネタが被るのは悲しいことですね" class="fragment"></span><a href="#%E3%83%8D%E3%82%BF%E3%81%8C%E8%A2%AB%E3%82%8B%E3%81%AE%E3%81%AF%E6%82%B2%E3%81%97%E3%81%84%E3%81%93%E3%81%A8%E3%81%A7%E3%81%99%E3%81%AD"><i class="fa fa-link"></i></a>ネタが被るのは悲しいことですね</h2>

<p>ネタ被りについても少し言及しておきます。<br>
他の人が書いた原稿について、ネタが大なり小なり被ることはある程度仕方がない部分があります。<br>
パクリは論外ですが、ネタが被るのは仕方がないと割りきってしまいましょう。</p>

<p>もし、徹底的にネタ被りを避けようとするとどうなるでしょうか？<br>
英語の公式ドキュメントがあるのにそれを日本語に翻訳することは言語は違いますが内容的には完全にネタ被りなので、行わないほうがいいでしょう(実際は母国語で公式ドキュメントが読めることは多くの人にとって価値があります)。<br>
C言語についての本はたったの1冊(K&amp;Rですかね)あれば十分で、2冊目以降はネタ被りになるので不要になります(実際は2013年にもなって未だに新しいC言語の本が出版されています)。<br>
ですが、実際には括弧内に書いた通り、ネタ被りと判定しようと思えば出来る文章でもどんどん作成されていますし、広く受け入れられています。<br>
つまり、あなたが付け加えられるオリジナルな価値・説明があればそれで良いのです。</p>

<p>もし、ネタの被り先が知合いであれば、一言断ってみると、精神衛生上大変良くなるので、聞いてみると良いでしょう。</p>

<h1>
<span id="第2歩-調査" class="fragment"></span><a href="#%E7%AC%AC2%E6%AD%A9-%E8%AA%BF%E6%9F%BB"><i class="fa fa-link"></i></a>第2歩 調査</h1>

<p>設計が終わったら、技術的な調査に入ります。<br>
実際のシステム開発だと、技術的な調査を行ってから設計に入ると思います。ですが、原稿の場合は本格的な調査は設計の後になります。</p>

<p>調査フェーズで行わなければいけないのは以下のとおりです。</p>

<ul>
<li>サンプルコードの完成

<ul>
<li>サンプルコードの出来によって、原稿の設計を変える必要が生じるかもしれません。完成させていきましょう。</li>
</ul>
</li>
<li>技術的不明点の解消

<ul>
<li>サンプルコードを作るにつれ、不明点が発生してくるはずなので可能な限り調査する</li>
<li>Androidとかだとオープンソースなのでどこまでも追っていけるので楽ですね</li>
<li>調査終了の基準点として こうすれば何かが達成できる、筆者が知らない機能や仕様は多分ない、これはどうあがいても実現できない事がわかる あたりでしょう。</li>
</ul>
</li>
</ul>

<p>筆者(わかめ)の場合、この工程に意識的に取り組む時間はおおよそ2日〜3日(1日6〜8時間換算)くらい消費されます。</p>

<h1>
<span id="第3歩-実装" class="fragment"></span><a href="#%E7%AC%AC3%E6%AD%A9-%E5%AE%9F%E8%A3%85"><i class="fa fa-link"></i></a>第3歩 実装</h1>

<p>さて、実際に原稿をもりもり書いていきましょう。<br>
設計段階で枝(章・節・項)は定義しているはずなので、そこにもさもさと葉を生やしていくだけの簡単な作業です。<br>
既にサンプルコードも出来ており、判明している技術的に不明な点は消化されているはずです。<br>
そのため、ここからは日本語と戦う作業になります。</p>

<p>文章を書く時に筆者が意識的に行っている事がありますので述べていきます。</p>

<ul>
<li>日本語が一意に解釈できるか。誤解を生まないか。</li>
<li>対象読者に未知の用語を使って説明していないか

<ul>
<li>説明の順番を変更する必要があれば思い切って変更する。そうならないように設計時によく検討していくことも重要。</li>
</ul>
</li>
<li>筆者の中で常識だと思っている事が本当に常識かどうかを検討する。社内で常識になっているものは誤判断しやすいので留意する。

<ul>
<li>常識じゃないものを常識だと判断すると、説明をすっ飛ばすというミスに派生する</li>
</ul>
</li>
<li>要求・結論を先に述べているか。犯人はヤスは正義。オリエント急行殺人事件の犯人は☓☓☓。

<ul>
<li>これから説明する内容をざっくり最初に説明するのは大事</li>
<li>そこをサボると、読者の中に無数の解釈の枝(主旨の推測)が発生してしまい、書いてある内容がするりと入っていかなくなってしまいます。読者の計算量を減らすために積極的に枝刈りを行いましょう。</li>
</ul>
</li>
<li>言い換えを考えてみて、元の言い方と言い換えの方のどちらが意図が伝わりやすいかを検討し、必要があれば書き換える。</li>
<li>断定口調で書けているか。だと思う、とかであろう、とかは だ、である、に変更する。不安がある場合は追加の技術的調査を行う。</li>
<li>用語が統一され、正しく用いられているか。

<ul>
<li>例えば、1つの文章中に if文 と if式 という書き方が混ざっていてはいけません。それぞれ、指すものが違います。用語が正確に用いられているのかというのは、文章全体の信頼性に関わります。

<ul>
<li>例えば、完全に正しくて有用な技術的文章でも、Javaの事をJavaScriptと書いて説明していたら、信頼度は地に落ち、他の部分も間違っている可能性のある、取るに足らない文章と判断されるでしょう。</li>
</ul>
</li>
</ul>
</li>
<li>文章を分割できないか検討する。

<ul>
<li>長い1文よりも、短い2文です。句点で切っても正しく意味が伝わる場合は積極的に切ります。</li>
</ul>
</li>
<li>文の先頭に何かをつけるのを我慢する。

<ul>
<li>または、しかし、さらに、なので、 などは文の先頭に付けたくなってしまう魔力を持っています。そうしたほうが読みやすい文に見えてしまう気がするのです。それは気のせいなのでなるべく省けるように努力します。</li>
</ul>
</li>
<li>句読点は適切に打たれているか。

<ul>
<li>わかめさんめっちゃ読点多いマンです。</li>
</ul>
</li>
</ul>

<p>また、気がついたら随時リファクタリングを行います。<br>
節の位置の交換とかも随時行いますが、なるべく最初の設計から変更しないで済むように留意します。</p>

<p>筆者(わかめ)の場合、この工程に意識的に取り組む時間はおおよそ1日(1日6〜8時間換算)くらい消費されます。<br>
レビュワーに頼んだ後の指摘事項修正や校正などに費やす時間はここに含みません。</p>

<h1>
<span id="まとめ" class="fragment"></span><a href="#%E3%81%BE%E3%81%A8%E3%82%81"><i class="fa fa-link"></i></a>まとめ</h1>

<p>さて、いかがでしたでしょうか？<br>
みなさんもぶりばり技術文章を書いて、読んでくれた人をどんどん洗脳して自分のシンパにしましょう。<br>
さぁ！みんなもTypeScriptをやろう！(ｵｰ</p>

<p>僕も、こういう事を言語化して考え、なるべく体系的に把握するよう務めるようになったのも、ここ2年くらいの事です。<br>
この文章を書いて、あだむろっかとかに『<a href="http://www.amazon.co.jp/gp/product/4822284719?ie=UTF8&amp;camp=1207&amp;creative=8411&amp;creativeASIN=4822284719&amp;linkCode=shr&amp;tag=damenako-22&amp;qid=1381757964&amp;sr=8-7" rel="nofollow noopener" target="_blank">2.3本</a>書いてた奴があんな事言ってるｗｗｗｗm9(^Д^)ﾌﾟｷﾞｬｰ』と煽られました。<br>
2.3本はたぶん僕が多くの人に読ませるために書いた初めての技術的文章で、あだむろっかとかますいさんにﾎﾞｯｺﾎﾞｺにされた事を懐かしく思い出します。今はあの時よりはマトモになってると思うんですけどね。<br>
簡潔に言うと、最初はクソみたいな文章を出力してしまうものだし、使い古されている言葉ではありますが継続は力なり、ということです。まずは恐れず、クソを生産して周囲の識者にボコボコにしてもらえたら最初の洗礼を受けられた、と捉え一安心すると良いと思います。</p>

<p>なお、この文章を書くにあたり、<a href="http://qiita.com/vvakame/items/d657baf26cf83ac98bd0/revisions">編集履歴</a>に作業風景がなるべく残るようにしてみました。<br>
興味があればご覧ください。<br>
これだけの文章を書くのに約3時間かかっているようですね。短いのか長いのかもわかりませんが。</p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>vvakameさんの<br />3位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>764</kbd>
		<a target="_blank" href="https://qiita.com/vvakame/items/74005adacc0e8e2a3cab">JavaScriptのthisの覚え方</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-01-31 12:50:54</center>
	</td>
	<td style="width:200px;">
		@vvakame<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/13283/profile-images/1473682747">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[JavaScript]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>JavaScriptの<code>this</code>は同じソースコードでも呼び出し元次第で意味が違ったりして複雑だと思われがちだけど、一回覚えてしまえば簡単だ。</p>

<p><strong>JavaScriptにはthisが4種類ある</strong></p>

<p>これだけをしっかり覚えておけば、後は必要な時に <em>4種類って何があるんだっけ？</em> と考えれば容易に思い出せる。</p>

<p>ちなみに、下記のコードはブラウザ上で実行することを想定している。(なので<code>window</code>を使う)</p>

<h1>
<span id="トップレベルのthis" class="fragment"></span><a href="#%E3%83%88%E3%83%83%E3%83%97%E3%83%AC%E3%83%99%E3%83%AB%E3%81%AEthis"><i class="fa fa-link"></i></a>トップレベルのthis</h1>

<p>グローバルオブジェクトを指す。</p>

<div class="code-frame" data-lang="js"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">hoge</span> <span class="o">=</span> <span class="s2">"fuga"</span><span class="p">;</span>
<span class="nb">window</span><span class="p">.</span><span class="nx">foo</span> <span class="o">=</span> <span class="s2">"bar"</span><span class="p">;</span>

<span class="c1">// fuga+bar と表示される</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">hoge</span> <span class="o">+</span> <span class="s2">"+"</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">foo</span><span class="p">);</span>

<span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
    <span class="c1">// 同じくfuga+bar と表示される</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">hoge</span> <span class="o">+</span> <span class="s2">"+"</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">foo</span><span class="p">);</span>
<span class="p">})();</span>
</pre></div></div>

<h1>
<span id="コンストラクタ内のthis" class="fragment"></span><a href="#%E3%82%B3%E3%83%B3%E3%82%B9%E3%83%88%E3%83%A9%E3%82%AF%E3%82%BF%E5%86%85%E3%81%AEthis"><i class="fa fa-link"></i></a>コンストラクタ内のthis</h1>

<p>作られるインスタンス自身を指す。</p>

<div class="code-frame" data-lang="js"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">Hoge</span> <span class="o">=</span> <span class="kd">function</span> <span class="nx">Hoge</span><span class="p">(</span><span class="nx">msg</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">hoge</span> <span class="o">=</span> <span class="nx">msg</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">method</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"method+"</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">hoge</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kd">var</span> <span class="nx">obj1</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Hoge</span><span class="p">(</span><span class="s2">"Hello"</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">obj2</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Hoge</span><span class="p">(</span><span class="s2">"World"</span><span class="p">);</span>

<span class="c1">// Hello と表示</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">obj1</span><span class="p">.</span><span class="nx">hoge</span><span class="p">);</span>
<span class="c1">// method+Hello と表示</span>
<span class="nx">obj1</span><span class="p">.</span><span class="nx">method</span><span class="p">();</span>

<span class="c1">// World と表示</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">obj2</span><span class="p">.</span><span class="nx">hoge</span><span class="p">);</span>
<span class="c1">// method+World と表示</span>
<span class="nx">obj2</span><span class="p">.</span><span class="nx">method</span><span class="p">();</span>

<span class="c1">// しまったnewを付け忘れたのでHogeの中のthisはグローバルオブジェクトだ！</span>
<span class="nx">Hoge</span><span class="p">(</span><span class="s2">"newじゃねーよ!"</span><span class="p">);</span>
<span class="c1">// ぎゃーっ！ true！</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">hoge</span> <span class="o">==</span> <span class="s2">"newじゃねーよ!"</span><span class="p">);</span>
<span class="c1">// ぎゃーっ！ method+newじゃねーよ!</span>
<span class="nb">window</span><span class="p">.</span><span class="nx">method</span><span class="p">();</span>
</pre></div></div>

<h1>
<span id="何かに所属している時のthis" class="fragment"></span><a href="#%E4%BD%95%E3%81%8B%E3%81%AB%E6%89%80%E5%B1%9E%E3%81%97%E3%81%A6%E3%81%84%E3%82%8B%E6%99%82%E3%81%AEthis"><i class="fa fa-link"></i></a>何かに所属している時のthis</h1>

<p>所属しているオブジェクトを指す。</p>

<div class="code-frame" data-lang="js"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">hoge</span> <span class="o">=</span> <span class="p">{</span><span class="nx">foo</span><span class="o">:</span><span class="s2">"bar"</span><span class="p">};</span>
<span class="nx">hoge</span><span class="p">.</span><span class="nx">print1</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">foo</span><span class="p">);</span>
<span class="p">};</span>

<span class="c1">// bar を表示</span>
<span class="nx">hoge</span><span class="p">.</span><span class="nx">print1</span><span class="p">();</span>

<span class="kd">var</span> <span class="nx">func</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">foo</span><span class="p">);</span>
<span class="p">};</span>
<span class="c1">// window.foo が参照されるのでundefined</span>
<span class="nx">func</span><span class="p">();</span>

<span class="nx">hoge</span><span class="p">.</span><span class="nx">print2</span> <span class="o">=</span> <span class="nx">func</span><span class="p">;</span>
<span class="c1">// thisがhogeに変わったので bar と表示される</span>
<span class="nx">hoge</span><span class="p">.</span><span class="nx">print2</span><span class="p">();</span>

<span class="c1">// 一応prototypeも試してみましょうね。</span>
<span class="kd">var</span> <span class="nx">Hoge</span> <span class="o">=</span> <span class="kd">function</span> <span class="nx">Hoge</span><span class="p">(</span><span class="nx">msg</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">message</span> <span class="o">=</span> <span class="nx">msg</span><span class="p">;</span>
<span class="p">};</span>
<span class="nx">Hoge</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">print</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"prototype+"</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
<span class="p">}</span>
<span class="kd">var</span> <span class="nx">obj</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Hoge</span><span class="p">(</span><span class="s2">"Hello"</span><span class="p">);</span>
<span class="c1">// prototype+Hello と表示</span>
<span class="nx">obj</span><span class="p">.</span><span class="nx">print</span><span class="p">();</span>
</pre></div></div>

<h1>
<span id="functionapply-とか-functioncall-とかで無理矢理変えられた時のthis" class="fragment"></span><a href="#functionapply-%E3%81%A8%E3%81%8B-functioncall-%E3%81%A8%E3%81%8B%E3%81%A7%E7%84%A1%E7%90%86%E7%9F%A2%E7%90%86%E5%A4%89%E3%81%88%E3%82%89%E3%82%8C%E3%81%9F%E6%99%82%E3%81%AEthis"><i class="fa fa-link"></i></a>function#apply とか function#call とかで無理矢理変えられた時のthis</h1>

<p>thisを外部からの干渉で無理矢理書き換えられた場合。jQuery使っててclickイベントとか取るとthisが書き換えられている。そういうAPIなの。JavaScriptはNTR文化なの。</p>

<p>あと、<code>document.getElementsByTagName("div")</code> とかやると NodeList が取れる。そこで <code>Array.prototype.slice.call(document.getElementsByTagName("div"))</code> とかすると Array に変換できるハックがある。ってりんごが言ってた。</p>

<div class="code-frame" data-lang="js"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">hoge</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">foo</span><span class="o">:</span> <span class="s2">"bar"</span><span class="p">,</span>
    <span class="nx">print</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">foo</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">};</span>
<span class="c1">// 何かに所属している時のthisなので bar と表示</span>
<span class="nx">hoge</span><span class="p">.</span><span class="nx">print</span><span class="p">();</span>

<span class="kd">var</span> <span class="nx">paramour</span> <span class="o">=</span> <span class="p">{</span><span class="nx">foo</span><span class="o">:</span><span class="s2">"NTR"</span><span class="p">};</span>
<span class="c1">// thisをすり替えられたので NTR と表示</span>
<span class="nx">hoge</span><span class="p">.</span><span class="nx">print</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">paramour</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">Hoge</span> <span class="o">=</span> <span class="kd">function</span> <span class="nx">Hoge</span><span class="p">(</span><span class="nx">msg</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">message</span> <span class="o">=</span> <span class="nx">msg</span><span class="p">;</span>
<span class="p">}</span>
<span class="nx">Hoge</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">print</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"Love "</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
<span class="p">}</span>

<span class="kd">var</span> <span class="nx">obj1</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Hoge</span><span class="p">(</span><span class="s2">"sarari-man"</span><span class="p">);</span>
<span class="c1">// Love sarari-man と表示</span>
<span class="nx">obj1</span><span class="p">.</span><span class="nx">print</span><span class="p">();</span>
<span class="c1">// アイエエエエ！？ニンジャ！？ニンジャナンデ！？</span>
<span class="nx">obj1</span><span class="p">.</span><span class="nx">print</span><span class="p">.</span><span class="nx">call</span><span class="p">({</span><span class="nx">message</span><span class="o">:</span><span class="s2">"ninja"</span><span class="p">});</span>

<span class="c1">// thisを保護する方法もあるよ</span>
<span class="kd">var</span> <span class="nx">ProtectedHoge</span> <span class="o">=</span> <span class="kd">function</span> <span class="nx">ProtectedHoge</span><span class="p">(</span><span class="nx">msg</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">message</span> <span class="o">=</span> <span class="nx">msg</span><span class="p">;</span>
    <span class="c1">// this を保存しておく</span>
    <span class="kd">var</span> <span class="nx">_this</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">print</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">fn</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// fn に元々のthis.printが入ってる。</span>
        <span class="k">return</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="c1">// 元々のthis.printを_thisに保存しておいた元々のthisを指定して実行しなおす。</span>
            <span class="nx">fn</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">_this</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
        <span class="p">};</span>
    <span class="p">})(</span><span class="k">this</span><span class="p">.</span><span class="nx">print</span><span class="p">);</span>
<span class="p">}</span>
<span class="nx">ProtectedHoge</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">print</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"Love "</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
<span class="p">}</span>

<span class="kd">var</span> <span class="nx">obj2</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ProtectedHoge</span><span class="p">(</span><span class="s2">"NinjaSlayer"</span><span class="p">);</span>
<span class="c1">// ドーモ、ニンジャスレイヤーです。ニンジャ殺すべし。</span>
<span class="nx">obj2</span><span class="p">.</span><span class="nx">print</span><span class="p">.</span><span class="nx">call</span><span class="p">({</span><span class="nx">message</span><span class="o">:</span><span class="s2">"ninja"</span><span class="p">});</span>
</pre></div></div>

<p>ちなみにCoffeeScriptだとthisの保護も超カンタン <code>-&gt;</code> じゃなくて <code>=&gt;</code> 使うだけ。<a href="http://coffeescript.org/#try:class%20ProtectedHoge%0A%20%20constructor%3A%28%40message%29%20-%3E%0A%20%20print%3A%28%29%20%3D%3E%0A%20%20%20%20console.log%28%40message%29%0A%0Anew%20ProtectedHoge%28%22Fujikido%22%29.print%28%29%0A" rel="nofollow noopener" target="_blank">コンパイル後のコード</a></p>

<div class="code-frame" data-lang="coffeescript"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nx">ProtectedHoge</span>
  <span class="nx">constructor</span><span class="o">:</span><span class="nf">(@message) -&gt;</span>
  <span class="nx">print</span><span class="o">:</span><span class="nf">() =&gt;</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">@message</span><span class="p">)</span>

<span class="k">new</span> <span class="nx">ProtectedHoge</span><span class="p">(</span><span class="s">"Fujikido"</span><span class="p">).</span><span class="nx">print</span><span class="p">()</span>
</pre></div></div>

<h1>
<span id="ねっ簡単でしょう" class="fragment"></span><a href="#%E3%81%AD%E3%81%A3%E7%B0%A1%E5%8D%98%E3%81%A7%E3%81%97%E3%82%87%E3%81%86"><i class="fa fa-link"></i></a>ねっ？簡単でしょう？</h1>

<p>呼び出し元からthisを変えられる仕様にしたヤツを腹を切れ（#^ω^）ﾋﾞｷﾋﾞｷ</p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>vvakameさんの<br />4位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>312</kbd>
		<a target="_blank" href="https://qiita.com/vvakame/items/82aa9dde64826d25407d">Androiderに贈るAngularJS概説</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-03-01 00:20:12</center>
	</td>
	<td style="width:200px;">
		@vvakame<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/13283/profile-images/1473682747">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[JavaScript]</b> <b>[AngularJS]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p><a href="https://camo.qiitausercontent.com/a58872f97322f106e3d2d990c860c9b328f17a14/687474703a2f2f616e67756c61726a732e6f72672f696d672f416e67756c61724a532d6c617267652e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/a58872f97322f106e3d2d990c860c9b328f17a14/687474703a2f2f616e67756c61726a732e6f72672f696d672f416e67756c61724a532d6c617267652e706e67" alt="AngularJSロゴ" data-canonical-src="http://angularjs.org/img/AngularJS-large.png"></a></p>

<p>会社でAngularJSをわっしわっし使ってみて、そろそろ某かの意見を言えるようになったのではないか？と思ったので、推薦記事を書いてみます。AngularJSマンセー！</p>

<p>一般のAngularJS解説記事はまぁ巷にそれなりに出回っていると思うので、僕の周りに蔓延る混沌Andoroidクラスタ向けの説明記事を書いてみようと思います。<br>
というわけで、AngularJSをAndroid用語を駆使して説明します。正確さはあまり気にしません。</p>

<p>読者に要求されるもの</p>

<ul>
<li>Androidについての基本的な知識</li>
<li>JavaScriptやHTMLなどに対する基本的な知識</li>
</ul>

<p>参考</p>

<p><a href="http://b.hatena.ne.jp/vvakame/AngularJS/" rel="nofollow noopener" target="_blank">わかめのAngularJSはてブ</a></p>

<h1>
<span id="angularjsってなに" class="fragment"></span><a href="#angularjs%E3%81%A3%E3%81%A6%E3%81%AA%E3%81%AB"><i class="fa fa-link"></i></a>AngularJSってなに？</h1>

<p><a href="http://angularjs.org/" rel="nofollow noopener" target="_blank">AngularJS</a>はGoogleが作成しているWebアプリのクライアント側用フレームワークです。<br>
遠い仲間として<a href="http://backbonejs.org/" rel="nofollow noopener" target="_blank">Backbone.js</a>が、近い仲間として<a href="http://knockoutjs.com/" rel="nofollow noopener" target="_blank">Knockout.js</a>や<a href="http://twitter.github.com/flight/" rel="nofollow noopener" target="_blank">Flight</a>があります。<br>
(まぁわかめはこの中ではBackbone.jsしか使ったことがないんですが。)</p>

<p>近年のWebアプリ界隈の発展と注文の増加っぷりは目覚ましく、JavaScriptで実装する対象がどんどん拡大しているといえます。静的ページで対応できる要素なんてタカが知れているんだ…！<br>
要するに、要求がリッチになってきているので、クライアント側も発展しないとつらぽよだということです。<br>
そこでJavaScript用のフレームワークだ！フリーダムすぎるJavaScriptで徒手空拳とか全裸と絆創膏だけでシベリアに遊びに行くようなもんですよ。</p>

<h1>
<span id="なぜangularjsを選ぶべきなのか" class="fragment"></span><a href="#%E3%81%AA%E3%81%9Cangularjs%E3%82%92%E9%81%B8%E3%81%B6%E3%81%B9%E3%81%8D%E3%81%AA%E3%81%AE%E3%81%8B"><i class="fa fa-link"></i></a>なぜAngularJSを選ぶべきなのか？</h1>

<h2>
<span id="サーバ側動的ページ生成とか古いですよ" class="fragment"></span><a href="#%E3%82%B5%E3%83%BC%E3%83%90%E5%81%B4%E5%8B%95%E7%9A%84%E3%83%9A%E3%83%BC%E3%82%B8%E7%94%9F%E6%88%90%E3%81%A8%E3%81%8B%E5%8F%A4%E3%81%84%E3%81%A7%E3%81%99%E3%82%88"><i class="fa fa-link"></i></a>サーバ側動的ページ生成とか古いですよ！</h2>

<p>ぶっちゃけ、今更新規にアプリ作るのにJSPとか使って、何か操作するたびサーバ側でページ生成して…みたいな作り方することってないですよね。サーバはJSON吐く機械。ユーザに対する見た目(UI)を組み立て制御するのはJavaScriptでやるのが定番です。</p>

<h2>
<span id="javascriptで何かするにはフレームワークが欲しいですよ" class="fragment"></span><a href="#javascript%E3%81%A7%E4%BD%95%E3%81%8B%E3%81%99%E3%82%8B%E3%81%AB%E3%81%AF%E3%83%95%E3%83%AC%E3%83%BC%E3%83%A0%E3%83%AF%E3%83%BC%E3%82%AF%E3%81%8C%E6%AC%B2%E3%81%97%E3%81%84%E3%81%A7%E3%81%99%E3%82%88"><i class="fa fa-link"></i></a>JavaScriptで何かするにはフレームワークが欲しいですよ！</h2>

<p>JavaScriptは大変自由に書くことのできる言語で一定のルールを設けずに書くとなかなかヒドイことになります。わかめがTG社に入社したばかりの約3年前は、高階関数っぽい書き方をした中二病感漂うヤツと、ちゃんとOOPっぽく書くヤツと、C言語のように構造体+関数で書くヤツが混在してたような記憶があります。それはもう酷い有様です。(俺がどれかはあえて述べない)<br>
そこで、何らかのフレームワークを与え定まった書き方ができるのはメリットです。これはAngularJSに限った話ではないですが。</p>

<h2>
<span id="pushstateを自然に使うのが簡単になるよ" class="fragment"></span><a href="#pushstate%E3%82%92%E8%87%AA%E7%84%B6%E3%81%AB%E4%BD%BF%E3%81%86%E3%81%AE%E3%81%8C%E7%B0%A1%E5%8D%98%E3%81%AB%E3%81%AA%E3%82%8B%E3%82%88"><i class="fa fa-link"></i></a>pushStateを自然に使うのが簡単になるよ！</h2>

<p>githubでは、リポジトリ内で移動する時にはページを読みなおして移動するのではなく、必要な部分のみ更新していて、大変シームレスに移動することができます。なおかつ、ブラウザの戻るや進むもキチンと使えます。この機能をしっかり提供するためには、あるページが読み込まれた時に現在のURLから適切にページをJavaScriptで構築しなければなりません。これを自分で1から作るのは結構な苦労です。<br>
AngularJSであれば、URLに対してどういう画面を表示するかを指定する簡単な方法が提供されています。</p>

<h2>
<span id="テストを書くのが楽だよ" class="fragment"></span><a href="#%E3%83%86%E3%82%B9%E3%83%88%E3%82%92%E6%9B%B8%E3%81%8F%E3%81%AE%E3%81%8C%E6%A5%BD%E3%81%A0%E3%82%88"><i class="fa fa-link"></i></a>テストを書くのが楽だよ！</h2>

<p>あとはAngularJSはテストが楽なのも好ポイントです。DI(Dependency Injection 依存性注入)をベースに色々な部品間でデータの受け渡しをしているので、テストの時にはMockを利用するようにするのも簡単です。このお陰でAjaxが絡んだテストもやりやすくなっています。</p>

<h2>
<span id="プログラムとdomの分離が行いやすいよ" class="fragment"></span><a href="#%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%A0%E3%81%A8dom%E3%81%AE%E5%88%86%E9%9B%A2%E3%81%8C%E8%A1%8C%E3%81%84%E3%82%84%E3%81%99%E3%81%84%E3%82%88"><i class="fa fa-link"></i></a>プログラムとDOMの分離が行いやすいよ！</h2>

<p>さらに、通常のWebアプリではjQueryを使ってDOMをごしごし組み立てて追加して…といったように、見た目の操作にはプログラミングの知識が必須でした。ですが、AngularJSではDOMをプログラムからいじる場面が大変少なくなるので、プログラマの手を借りずにデザイナさんが独力でいじくれる範囲が他のフレームワークより広くなるのではないかと思います。想像ですが。</p>

<h2>
<span id="つまり" class="fragment"></span><a href="#%E3%81%A4%E3%81%BE%E3%82%8A"><i class="fa fa-link"></i></a>つまり</h2>

<p>今までわかめが試した限りでは、画面内でのDOMの組み換えや動きなどの少ないアプリ、例えば業務系のアプリなどを手早く組み立てるのに向いているように思います。</p>

<h1>
<span id="そしてangularjsを選ぶと苦労しそうな例" class="fragment"></span><a href="#%E3%81%9D%E3%81%97%E3%81%A6angularjs%E3%82%92%E9%81%B8%E3%81%B6%E3%81%A8%E8%8B%A6%E5%8A%B4%E3%81%97%E3%81%9D%E3%81%86%E3%81%AA%E4%BE%8B"><i class="fa fa-link"></i></a>そしてAngularJSを選ぶと苦労しそうな例</h1>

<p>逆に、AngularJSを使うと苦労しそうなアプリはどういうアプリかを考えてみます。申し訳ないですが、まだ説明していない用語も使って書くのでこの記事を最後まで読み終わった後にもう一度読むとよくわかるかもしれません。</p>

<h2>
<span id="既存のアプリを後からangularjs化するのはちょっと" class="fragment"></span><a href="#%E6%97%A2%E5%AD%98%E3%81%AE%E3%82%A2%E3%83%97%E3%83%AA%E3%82%92%E5%BE%8C%E3%81%8B%E3%82%89angularjs%E5%8C%96%E3%81%99%E3%82%8B%E3%81%AE%E3%81%AF%E3%81%A1%E3%82%87%E3%81%A3%E3%81%A8"><i class="fa fa-link"></i></a>既存のアプリを後からAngularJS化するのはちょっと…</h2>

<p>まず、既存のアプリをAngularJSに当てはめるのはあまりオススメできません。AngularJSに限らずですが、フレームワークというのはその世界観に100%入り浸った時に最大の恩恵が受けられるものです。なので、アプリを開発する時にAngularJSを導入する！と決めてしまうのが一番良いでしょう。無理矢理途中からAngularJSに置き換えた場合、controllerとDOMとの結合が強すぎて上手くテストできない！とかデータ通信周りのテストがあああぁ！とか<code>$routeProvider</code>を使った振り分けがあぁぁぁ！みたいな問題が出てきそうです。</p>

<h2>
<span id="domをぐりぐりいじくり倒すようなアプリはちょっと" class="fragment"></span><a href="#dom%E3%82%92%E3%81%90%E3%82%8A%E3%81%90%E3%82%8A%E3%81%84%E3%81%98%E3%81%8F%E3%82%8A%E5%80%92%E3%81%99%E3%82%88%E3%81%86%E3%81%AA%E3%82%A2%E3%83%97%E3%83%AA%E3%81%AF%E3%81%A1%E3%82%87%E3%81%A3%E3%81%A8"><i class="fa fa-link"></i></a>DOMをぐりぐりいじくり倒すようなアプリはちょっと…</h2>

<p>また、AngularJSでは<code>service</code>や<code>controller</code>ではDOMをいじくるようなことはしてはいけない事になっています。なので、<code>directive</code>を作成してDOMを操作するしかない…んですが、それがなかなかメンドクサイ。わかめは未だに作り方がピンと来ていません。逆に言うと、見た目や挙動に凝らなければDOM操作はかなり避けて作れる、ということでもあります。<br>
そのため、例えばゲームのようなアプリや、DOMをぐりぐりいじくり回すようなアプリは苦手なのではないかと思います。</p>

<p>と、思ったら<a href="http://bombermine.com/" rel="nofollow noopener" target="_blank">1000人対戦ボンバーマンのBombermine</a>がどうやらAngularJS使ってるみたいなんですよね…ど、どういうことだってばよ…( ﾟдﾟ)</p>

<h1>
<span id="angularjsのコードを見てみる" class="fragment"></span><a href="#angularjs%E3%81%AE%E3%82%B3%E3%83%BC%E3%83%89%E3%82%92%E8%A6%8B%E3%81%A6%E3%81%BF%E3%82%8B"><i class="fa fa-link"></i></a>AngularJSのコードを見てみる</h1>

<h2>
<span id="htmlangularjsしてみる" class="fragment"></span><a href="#htmlangularjs%E3%81%97%E3%81%A6%E3%81%BF%E3%82%8B"><i class="fa fa-link"></i></a>HTML+AngularJSしてみる</h2>

<p><a href="http://jsfiddle.net/vvakame/uUEGD/" rel="nofollow noopener" target="_blank">サンプル</a> を開くと自分で編集して試すことができます。jsFiddle便利なので、海外では結構流行っているみたいです。<br>
</p>

<p>まず最初のサンプルです。最初はHTMLを書くだけで出来る範囲で見てみましょう。<br>
以下の抜き出しではjsFiddleと少し変えて、より普通のAngularJSっぽくしてあります。</p>

<div class="code-frame" data-lang="html">
<div class="code-lang"><span class="bold">sample.html</span></div>
<div class="highlight"><pre><span></span><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span> <span class="na">ng-app</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">"text"</span> <span class="na">ng-model</span><span class="o">=</span><span class="s">"data"</span> <span class="na">placeholder</span><span class="o">=</span><span class="s">"名前？"</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">hr</span><span class="p">&gt;</span>
    {{data || 'vvakame'}} より愛をこめて
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
</div>

<p><code>ng-app</code>属性が付いているものがAngularJSの管理下になります。これはHTML中に通常1回だけ出てきます。<br>
通常、<code>ng-</code> で始まる属性はAngularJSがデフォルトで用意している要素です。つまり、公式のAPIを見れば解説が載っています。ng-appについて知りたい場合はngAppで検索したほうが良いかもしれません。</p>

<p>次に出てくるのは<code>ng-model</code>です。<code>ng-model</code>の中にはAngular Expressionsと呼ばれる式を書くことができます。概ねJavaScriptと似たような構文です。ここでは、<code>data</code>という変数を参照しています。inputタグへの入力値が<code>data</code>に反映されるようになります。<br>
その後にある{{}}の中もAngular Expressionsで、<code>data || 'vvakame'</code>が評価され、<code>data</code>の中身が表示されます。<code>data</code>が空の場合は後者の<code>'vvakame'</code>が表示されます。</p>

<p>レッスン！<br>
試しに、"○○から××へ愛をこめて" の形式になるように遊んでみましょう。<code>data</code>の部分をfromにし、もう一つtoのinputも増やしてみると上手くいきそうです。</p>

<h2>
<span id="htmljavascriptangularjsしてみる" class="fragment"></span><a href="#htmljavascriptangularjs%E3%81%97%E3%81%A6%E3%81%BF%E3%82%8B"><i class="fa fa-link"></i></a>HTML+JavaScript+AngularJSしてみる</h2>

<p><a href="http://jsfiddle.net/vvakame/njAjQ/" rel="nofollow noopener" target="_blank">サンプル</a><br>
</p>

<p>2番目のサンプルです。ちょっとJavaScriptを書いてみます。<code>controller</code>を導入してみます。<br>
ここでは <code>function Controller($scope)</code> という関数を定義し、HTML側で<code>ng-controller</code>に関数名を指定しています。引数の<code>$scope</code>はAngularJSではよく見る名前の引数です。<code>$scope</code>にセットした内容は、HTML側から参照することができます。変数のスコープまるまるそのものですね。<br>
入れ子にした場合どうなるとか、<code>$rootScope</code>と呼ばれる一番上位のスコープがあったりするのですが、この記事では割愛します。詳しくは<a href="http://docs.angularjs.org/guide/scope" rel="nofollow noopener" target="_blank">こちら</a>を参照してください。<br>
AngularJSのDIは、名前に従ってDIされるので、<code>$scope</code>以外の名前にすると上手く動かなくなってしまいます。どういう原理でDIをしているかというと、関数をtoStringすると関数のソースが手に入るので正規表現で無理矢理仮引数の名前を解析してDIしてます。無茶苦茶です。その場合、minifyすると引数の名前が変わってぶっ壊れちゃうんですが、そのための書き方もしっかり用意されています。しかし、めんどくさいので本記事では取り上げません。(というか、あんまり研究してない)</p>

<div class="code-frame" data-lang="html">
<div class="code-lang"><span class="bold">sample.html</span></div>
<div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">div</span> <span class="na">ng-app</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">ng-controller</span><span class="o">=</span><span class="s">"Controller"</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">"text"</span> <span class="na">ng-model</span><span class="o">=</span><span class="s">"data"</span> <span class="na">placeholder</span><span class="o">=</span><span class="s">"名前？"</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">button</span> <span class="na">ng-click</span><span class="o">=</span><span class="s">"reset()"</span><span class="p">&gt;</span>消す<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">hr</span><span class="p">&gt;</span>
        {{data}} より愛をこめて
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</pre></div>
</div>

<div class="code-frame" data-lang="javascript">
<div class="code-lang"><span class="bold">sample.js</span></div>
<div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">Controller</span><span class="p">(</span><span class="nx">$scope</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">$scope</span><span class="p">.</span><span class="nx">data</span> <span class="o">=</span> <span class="s2">"vvakame"</span><span class="p">;</span>
    <span class="nx">$scope</span><span class="p">.</span><span class="nx">reset</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="nx">$scope</span><span class="p">.</span><span class="nx">data</span> <span class="o">=</span> <span class="s2">"謎の誰か"</span><span class="p">;</span>
    <span class="p">};</span>
<span class="p">}</span>
</pre></div>
</div>

<p><code>ng-controller</code>は、そのタグの配下を制御する<code>controller</code>を指定してやります。<code>controller</code>には関数の名前を指定します。Controller内部では、変数の初期設定や使える関数を定義しています。<code>$scope.reset</code>では<code>data</code>の値を書き換えています。そして、<code>ng-click</code>の中ではその関数を呼んでいます。</p>

<h1>
<span id="angularjsをandroidで説明する" class="fragment"></span><a href="#angularjs%E3%82%92android%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>AngularJSをAndroidで説明する</h1>

<p>では、AngularJSで出てくる主要な仕組みや要素についてこれから説明していきます。</p>

<h2>
<span id="module--androidmanifestxml-や-library-project-相当" class="fragment"></span><a href="#module--androidmanifestxml-%E3%82%84-library-project-%E7%9B%B8%E5%BD%93"><i class="fa fa-link"></i></a>module = AndroidManifest.xml や library project 相当</h2>

<p>AngularJSで何かをする時に、<code>module</code>を作成することを避けて通ることはできません。<br>
サンプルコードだと<code>module</code>を作っていない場合も多いですが、<code>module</code>はAndroidManifest.xmlやlibrary projectに相当する設定が書けるのでざくざく書いてみましょう。</p>

<p><a href="http://jsfiddle.net/vvakame/D4pLq/" rel="nofollow noopener" target="_blank">サンプル</a></p>

<div class="code-frame" data-lang="javascript">
<div class="code-lang"><span class="bold">sample.js</span></div>
<div class="highlight"><pre><span></span><span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s2">"sample"</span><span class="p">,</span> <span class="p">[],</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">alert</span><span class="p">(</span><span class="s2">"初期化！"</span><span class="p">);</span>
<span class="p">});</span>

<span class="kd">function</span> <span class="nx">Controller</span><span class="p">(</span><span class="nx">$scope</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">$scope</span><span class="p">.</span><span class="nx">data</span> <span class="o">=</span> <span class="s2">"vvakame"</span><span class="p">;</span>
    <span class="nx">$scope</span><span class="p">.</span><span class="nx">reset</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="nx">$scope</span><span class="p">.</span><span class="nx">data</span> <span class="o">=</span> <span class="s2">"謎の誰か"</span><span class="p">;</span>
    <span class="p">};</span>
<span class="p">}</span>
</pre></div>
</div>

<div class="code-frame" data-lang="html">
<div class="code-lang"><span class="bold">sample.html</span></div>
<div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">div</span> <span class="na">ng-app</span><span class="o">=</span><span class="s">"sample"</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">ng-controller</span><span class="o">=</span><span class="s">"Controller"</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">"text"</span> <span class="na">ng-model</span><span class="o">=</span><span class="s">"data"</span> <span class="na">placeholder</span><span class="o">=</span><span class="s">"名前？"</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">button</span> <span class="na">ng-click</span><span class="o">=</span><span class="s">"reset()"</span><span class="p">&gt;</span>消す<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">hr</span><span class="p">&gt;</span>
        {{data}} より愛をこめて
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</pre></div>
</div>

<p>このようにします。moduleを定義した後は、<code>ng-app</code>にmodule名を指定すると、そのmoduleの元で初期化を行います。<br>
この例だと、どっちかというとカスタムしたandroid.app.Applicationっぽいですねｗ</p>

<p>module で行うことが多いのは以下の設定です。</p>

<h3>
<span id="依存するmoduleの指定" class="fragment"></span><a href="#%E4%BE%9D%E5%AD%98%E3%81%99%E3%82%8Bmodule%E3%81%AE%E6%8C%87%E5%AE%9A"><i class="fa fa-link"></i></a>依存するmoduleの指定</h3>

<p>ざっくり例えると、使うlibrary projectを追加する感じ。例えばInAppBillingが使いたい時はlibrary projectを使ったりするように、他の人が作ったmoduleや自作のmoduleを追加することもできます。</p>

<p><a href="http://jsfiddle.net/vvakame/ydxTq/" rel="nofollow noopener" target="_blank">サンプル</a></p>

<h3>
<span id="routeprovider-の設定" class="fragment"></span><a href="#routeprovider-%E3%81%AE%E8%A8%AD%E5%AE%9A"><i class="fa fa-link"></i></a>$routeProvider の設定</h3>

<p>ざっくり例えると、Activityとそれに対するIntentFilterを書くのに近いです。どのURLが表示/遷移された時にどのを表示するかを指定します。</p>

<p><a href="https://dl.dropbox.com/u/6581286/sample/AngularJS-routeProvider/index.html" rel="nofollow noopener" target="_blank">サンプル</a> pushStateを使うので、iframeだとなんか上手く動かないぽいのでjsFiddleは無しです。 <a href="https://gist.github.com/vvakame/5056731/" rel="nofollow noopener" target="_blank">gist</a></p>

<div class="code-frame" data-lang="javascript">
<div class="code-lang"><span class="bold">sample.js</span></div>
<div class="highlight"><pre><span></span><span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s2">"myApp"</span><span class="p">,</span> <span class="p">[],</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">$routeProvider</span><span class="p">,</span> <span class="nx">$locationProvider</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">$routeProvider</span>
        <span class="p">.</span><span class="nx">when</span><span class="p">(</span><span class="s2">"/foo"</span><span class="p">,</span> <span class="p">{</span>
            <span class="nx">templateUrl</span><span class="o">:</span> <span class="s2">"/template/foo.html"</span>
        <span class="p">})</span>
        <span class="p">.</span><span class="nx">when</span><span class="p">(</span><span class="s2">"/bar"</span><span class="p">,</span> <span class="p">{</span>
            <span class="nx">templateUrl</span><span class="o">:</span> <span class="s2">"/template/bar.html"</span>
        <span class="p">})</span>
        <span class="p">.</span><span class="nx">otherwise</span><span class="p">({</span>
            <span class="nx">templateUrl</span><span class="o">:</span> <span class="s2">"/template/main.html"</span>
        <span class="p">});</span>
    <span class="nx">$locationProvider</span><span class="p">.</span><span class="nx">html5Mode</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
</div>

<div class="code-frame" data-lang="html">
<div class="code-lang"><span class="bold">sample.html</span></div>
<div class="highlight"><pre><span></span><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span> <span class="na">ng-app</span><span class="o">=</span><span class="s">"myApp"</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>AngularJS + $rootProvider の説明<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>

    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">name</span><span class="o">=</span><span class="s">"viewport"</span> <span class="na">content</span><span class="o">=</span><span class="s">"width=device-width, initial-scale=1.0"</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">http-equiv</span><span class="o">=</span><span class="s">"Content-Type"</span> <span class="na">content</span><span class="o">=</span><span class="s">"text/html; charset=UTF-8"</span><span class="p">&gt;</span>

    <span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">"text/javascript"</span> <span class="na">src</span><span class="o">=</span><span class="s">"jquery.js"</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">"text/javascript"</span> <span class="na">src</span><span class="o">=</span><span class="s">"angular.js"</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">"text/javascript"</span> <span class="na">src</span><span class="o">=</span><span class="s">"main.js"</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">marquee</span><span class="p">&gt;</span>こんにちは〜<span class="p">&lt;/</span><span class="nt">marquee</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">div</span> <span class="na">ng-view</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">"text/ng-template"</span> <span class="na">id</span><span class="o">=</span><span class="s">"/template/foo.html"</span><span class="p">&gt;</span>
    <span class="nx">ふー</span><span class="err">！</span><span class="o">&lt;</span><span class="nx">br</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nx">a</span> <span class="nx">ng</span><span class="o">-</span><span class="nx">href</span><span class="o">=</span><span class="s2">"/u/6581286/sample/AngularJS-routeProvider/index.html"</span><span class="o">&gt;</span><span class="nx">メイン</span><span class="o">&lt;</span><span class="err">/a&gt;&lt;br&gt;</span>
    <span class="o">&lt;</span><span class="nx">a</span> <span class="nx">ng</span><span class="o">-</span><span class="nx">href</span><span class="o">=</span><span class="s2">"/bar"</span><span class="o">&gt;</span><span class="nx">ばー</span><span class="err">！</span><span class="o">&lt;</span><span class="err">/a&gt;</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">"text/ng-template"</span> <span class="na">id</span><span class="o">=</span><span class="s">"/template/bar.html"</span><span class="p">&gt;</span>
    <span class="nx">ばー</span><span class="err">！</span><span class="o">&lt;</span><span class="nx">br</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nx">a</span> <span class="nx">ng</span><span class="o">-</span><span class="nx">href</span><span class="o">=</span><span class="s2">"/u/6581286/sample/AngularJS-routeProvider/index.html"</span><span class="o">&gt;</span><span class="nx">メイン</span><span class="o">&lt;</span><span class="err">/a&gt;&lt;br&gt;</span>
    <span class="o">&lt;</span><span class="nx">a</span> <span class="nx">ng</span><span class="o">-</span><span class="nx">href</span><span class="o">=</span><span class="s2">"/foo"</span><span class="o">&gt;</span><span class="nx">ふー</span><span class="err">！</span><span class="o">&lt;</span><span class="err">/a&gt;</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">"text/ng-template"</span> <span class="na">id</span><span class="o">=</span><span class="s">"/template/main.html"</span><span class="p">&gt;</span>
    <span class="nx">おいでませクッパ城</span><span class="o">&lt;</span><span class="nx">br</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nx">a</span> <span class="nx">ng</span><span class="o">-</span><span class="nx">href</span><span class="o">=</span><span class="s2">"/foo"</span><span class="o">&gt;</span><span class="nx">ふー</span><span class="err">！</span><span class="o">&lt;</span><span class="err">/a&gt;&lt;br&gt;</span>
    <span class="o">&lt;</span><span class="nx">a</span> <span class="nx">ng</span><span class="o">-</span><span class="nx">href</span><span class="o">=</span><span class="s2">"/bar"</span><span class="o">&gt;</span><span class="nx">ばー</span><span class="err">！</span><span class="o">&lt;</span><span class="err">/a&gt;</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>

<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
</div>

<p>こんな感じです。リンクをクリックすると、ページの内容が差し替えられ、URLも書き換えられます。<br>
<code>$rootProvider</code>を使って、どのURLのパターンの時に<code>ng-view</code>に何を当てはめるかを指定してやります。この例では見た目を差し替えているだけですが、通常は<code>controller</code>の指定をおこなったりもします。<br>
実際使う時は、URLのパターンに<code>/resource/:resourceId</code>などと指定すると、<code>$routeParams</code>をDIで受け取った時に<code>$routeParams.resourceId</code>などで値を利用することもできます。RESTっぽい設計にするとき大変便利ですね。</p>

<h3>
<span id="directive-の設定" class="fragment"></span><a href="#directive-%E3%81%AE%E8%A8%AD%E5%AE%9A"><i class="fa fa-link"></i></a>directive の設定</h3>

<p>ざっくり例えると、独自Viewを作成するだけしておいてlibrary projectに投げ込んでおく感じです。実際に使うのはまた別の話。</p>

<h3>
<span id="service-の設定" class="fragment"></span><a href="#service-%E3%81%AE%E8%A8%AD%E5%AE%9A"><i class="fa fa-link"></i></a>service の設定</h3>

<p>ざっくり例えると、自作のSystemServiceを作成して登録する感じです。AndroidでいうService(バックグラウンドでほげほげしたい！)とは全く別のものです。どっちかというとContentProviderみたいなデータをやり取りするための口、に近いです。</p>

<h3>
<span id="filter-の作成" class="fragment"></span><a href="#filter-%E3%81%AE%E4%BD%9C%E6%88%90"><i class="fa fa-link"></i></a>filter の作成</h3>

<p>ざっくり例えようにも、Androidにはあんまり該当するものがないんですよね…。android.widget.FilterやAdapterが近いかもしれないけど、もっと柔軟で汎用的な仕組みです。Arrayから該当する要素だけを抜き出したり、JSONに変換したり、色々なことが出来るので、フィルタというよりコンバータの方が適切な言い方かもしれないですね。<br>
紛らわしいことに、<code>filter</code>という<code>filter</code>が存在して、これはまんまArrayから条件に当てはまる要素のみを抽出することができます。</p>

<h2>
<span id="directive--独自view" class="fragment"></span><a href="#directive--%E7%8B%AC%E8%87%AAview"><i class="fa fa-link"></i></a>directive = 独自View</h2>

<p><code>directive</code>は、HTML上で見慣れないタグや属性があったらもう全部<code>directive</code>って事でいいんじゃないでしょうか？<br>
<code>ng-app</code>も<code>ng-model</code>も<code>ng-click</code>もアレもコレも実は全部<code>directive</code>として実装されているんだよ！ナ、ナンダッテー！！</p>

<p>AngularJSでは、DOMを明示的にいじくる事はほとんどありません。むしろ、テストのやりやすさのために後述の<code>service</code>や<code>controller</code>中ではjQueryなどを使ってDOMをいじくるのは積極的に非推奨です。可能な限り行わないようにしましょう。<br>
では、DOMをいじくりたい時、jQueryのDatePickerやGoogle MapsのWidgetを使いたい時、どうやってAngularJSの世界に組み込めば良いのか？そういうのはdirectiveを使って定義することになります。<br>
<a href="http://angular-ui.github.com/" rel="nofollow noopener" target="_blank">AngularUI</a>などのサンプルをみてみると大変分かりやすいです。既存のjQuery pluginとかをAngularJSに組み込む時のサンプルにもなるでしょう。</p>

<p><a href="http://jsfiddle.net/vvakame/v6xFE/" rel="nofollow noopener" target="_blank">サンプル</a><br>
</p>

<div class="code-frame" data-lang="javascript">
<div class="code-lang"><span class="bold">sample.js</span></div>
<div class="highlight"><pre><span></span><span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">'myApp'</span><span class="p">,</span> <span class="p">[])</span>
    <span class="p">.</span><span class="nx">directive</span><span class="p">(</span><span class="s1">'vvMarquee'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">$parse</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="nx">restrict</span><span class="o">:</span> <span class="s1">'A'</span><span class="p">,</span>
            <span class="nx">require</span><span class="o">:</span> <span class="p">[</span><span class="s1">'?ngModel'</span><span class="p">],</span>
            <span class="nx">replace</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
            <span class="nx">template</span><span class="o">:</span> <span class="s1">'&lt;marquee/&gt;'</span><span class="p">,</span>
            <span class="nx">link</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">scope</span><span class="p">,</span> <span class="nx">element</span><span class="p">,</span> <span class="nx">attrs</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">scope</span><span class="p">.</span><span class="nx">$watch</span><span class="p">(</span><span class="nx">attrs</span><span class="p">.</span><span class="nx">ngModel</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">newVal</span><span class="p">)</span> <span class="p">{</span>
                    <span class="kd">var</span> <span class="nx">getter</span> <span class="o">=</span> <span class="nx">$parse</span><span class="p">(</span><span class="nx">attrs</span><span class="p">.</span><span class="nx">ngModel</span><span class="p">);</span>
                    <span class="kd">var</span> <span class="nx">model</span> <span class="o">=</span> <span class="nx">getter</span><span class="p">(</span><span class="nx">scope</span><span class="p">);</span>

                    <span class="nx">element</span><span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="nx">model</span><span class="p">);</span>
                <span class="p">});</span>
            <span class="p">}</span>
        <span class="p">};</span>
    <span class="p">});</span>

<span class="kd">function</span> <span class="nx">Controller</span><span class="p">(</span><span class="nx">$scope</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">$scope</span><span class="p">.</span><span class="nx">data</span> <span class="o">=</span> <span class="s2">"vvakame"</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>

<div class="code-frame" data-lang="html">
<div class="code-lang"><span class="bold">sample.html</span></div>
<div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">div</span> <span class="na">ng-app</span><span class="o">=</span><span class="s">"myApp"</span> <span class="na">ng-controller</span><span class="o">=</span><span class="s">"Controller"</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">vv-marquee</span> <span class="na">ng-model</span><span class="o">=</span><span class="s">"data"</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">"text"</span> <span class="na">ng-model</span><span class="o">=</span><span class="s">"data"</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</pre></div>
</div>

<p>このような感じで、DOMをいじくったりできます。ここでは昔なつかしmarqueeタグを使ってみました。ここでは詳しい説明を省きます。ぶっちゃけ難しくてキッチリ説明できるほどわかめも理解できていないという説が有力です。</p>

<p><a href="https://gist.github.com/vvakame/4991980" rel="nofollow noopener" target="_blank">もうちょいかっこいい例</a></p>

<h2>
<span id="service--contextgetsystemservicename的な" class="fragment"></span><a href="#service--contextgetsystemservicename%E7%9A%84%E3%81%AA"><i class="fa fa-link"></i></a>service = Context#getSystemService(name)的な</h2>

<p><code>service</code>は、わかめの理解ではサーバとAngularJSの世界を繋ぐためのノリのように使うのが良いようです。SystemServiceみたいとは一体なんだったのか…。事前にServiceの定義を用意しておいて、Fragmentなどから自在に呼び出してコキ使う…というのに向いています。<br>
こうしておくと、AngularJSはDIをベースに成り立っているため、サーバとの接続部分だけをテストしたり、<code>controller</code>がデータを受け取って処理をしたり…という部分を個別にテストしやすくなり、テスタビリティが向上します。</p>

<p><a href="http://jsfiddle.net/vvakame/bbTzH/" rel="nofollow noopener" target="_blank">サンプル</a><br>
</p>

<div class="code-frame" data-lang="javascript">
<div class="code-lang"><span class="bold">sample.js</span></div>
<div class="highlight"><pre><span></span><span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s2">"twitter"</span><span class="p">,</span> <span class="p">[],</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
<span class="p">})</span>
<span class="p">.</span><span class="nx">factory</span><span class="p">(</span><span class="s2">"twitterService"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">$http</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nx">TwitterService</span><span class="p">(</span><span class="nx">$http</span><span class="p">);</span>
<span class="p">});</span>

<span class="kd">function</span> <span class="nx">TwitterService</span><span class="p">(</span><span class="nx">$http</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">getList</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">word</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">$http</span><span class="p">({</span>
            <span class="nx">method</span><span class="o">:</span> <span class="s2">"JSONP"</span><span class="p">,</span>
            <span class="nx">url</span><span class="o">:</span> <span class="s2">"http://search.twitter.com/search.json?q="</span> <span class="o">+</span> <span class="nx">word</span> <span class="o">+</span> <span class="s2">"&amp;callback=JSON_CALLBACK"</span>
        <span class="p">});</span>
    <span class="p">};</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">Controller</span><span class="p">(</span><span class="nx">$scope</span><span class="p">,</span> <span class="nx">twitterService</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">twitterService</span><span class="p">.</span><span class="nx">getList</span><span class="p">(</span><span class="s2">"AngularJS"</span><span class="p">).</span><span class="nx">success</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">$scope</span><span class="p">.</span><span class="nx">tweets</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">results</span><span class="p">;</span>
    <span class="p">});</span>
<span class="p">};</span>
</pre></div>
</div>

<p>このような感じで、twitterServiceを<code>service</code>として登録し、Controllerから利用しています。$httpの使い方の説明はめんどくさいので説明を省きますが、TwitterのSearch APIでツイートを検索し、取得しています。ここで、serviceを利用することでControllerからはAjaxを利用していることなどを隠蔽し、普通のメソッド呼び出しの体になっています。<br>
TypeScriptを利用していることもあって、わかめはこの形式でserviceを利用しています。</p>

<h2>
<span id="filter--androidwidgetfilter-or-adapter" class="fragment"></span><a href="#filter--androidwidgetfilter-or-adapter"><i class="fa fa-link"></i></a>filter = android.widget.Filter or Adapter</h2>

<p><code>filter</code>は、主にデータの加工に利用したりします。Androidではありませんが、例えば <code>cat hoge.tx | grep android | wc -l</code> というコマンドを考えると、<code>cat hoge.txt</code>部分が加工元のデータ、<code>grep android</code>が1つ目のfilter、<code>wc -l</code>が2つ目のfilter、といった具合です。</p>

<p><a href="http://jsfiddle.net/vvakame/UAhsW/" rel="nofollow noopener" target="_blank">サンプル</a><br>
</p>

<div class="code-frame" data-lang="javascript">
<div class="code-lang"><span class="bold">sample.js</span></div>
<div class="highlight"><pre><span></span><span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s2">"myApp"</span><span class="p">,</span> <span class="p">[])</span>
    <span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="s2">"upper"</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="kd">function</span><span class="p">(</span><span class="nx">input</span><span class="p">,</span> <span class="nx">options</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">input</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">return</span> <span class="p">{</span>
                    <span class="nx">id</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span>
                    <span class="nx">name</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">name</span><span class="p">.</span><span class="nx">toUpperCase</span><span class="p">()</span>
                <span class="p">};</span>
            <span class="p">});</span>
        <span class="p">};</span>
    <span class="p">});</span>

<span class="kd">function</span> <span class="nx">Controller</span><span class="p">(</span><span class="nx">$scope</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">$scope</span><span class="p">.</span><span class="nx">list</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="nx">id</span><span class="o">:</span><span class="mi">1</span><span class="p">,</span>
            <span class="nx">name</span><span class="o">:</span><span class="s2">"vvakame"</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="nx">id</span><span class="o">:</span><span class="mi">2</span><span class="p">,</span>
            <span class="nx">name</span><span class="o">:</span><span class="s2">"grapswiz"</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="nx">id</span><span class="o">:</span><span class="mi">3</span><span class="p">,</span>
            <span class="nx">name</span><span class="o">:</span><span class="s2">"u1aryz"</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="nx">id</span><span class="o">:</span><span class="mi">4</span><span class="p">,</span>
            <span class="nx">name</span><span class="o">:</span><span class="s2">"eaglesakura"</span>
        <span class="p">}</span>
    <span class="p">];</span>
<span class="p">};</span>
</pre></div>
</div>

<div class="code-frame" data-lang="html">
<div class="code-lang"><span class="bold">sample.html</span></div>
<div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">div</span> <span class="na">ng-app</span><span class="o">=</span><span class="s">"myApp"</span> <span class="na">ng-controller</span><span class="o">=</span><span class="s">"Controller"</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">"text"</span> <span class="na">ng-model</span><span class="o">=</span><span class="s">"search"</span> <span class="na">placeholder</span><span class="o">=</span><span class="s">"絞込み"</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">li</span> <span class="na">ng-repeat</span><span class="o">=</span><span class="s">"data in list | filter:search | upper"</span><span class="p">&gt;</span>
            No.{{data.id}} {{data.name}}
        <span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</pre></div>
</div>

<p>ここでは、AngularJSがデフォルトで持っている<code>filter filter</code>で絞込みを行った後、作った<code>upper filter</code>で名前を大文字に変換しています。</p>

<h2>
<span id="controller--activity-or-fragment-or-adapter" class="fragment"></span><a href="#controller--activity-or-fragment-or-adapter"><i class="fa fa-link"></i></a>controller = Activity or Fragment or Adapter</h2>

<p><code>controller</code>は、ActivityやFragmentにあたるもので、Viewに対して表示するデータをやりくりして<code>ListFragment#setAdapter</code>にAdapterをセットしてやる、的な感じです。<code>controller</code>ではAdapterなどの代わりに<code>$scope</code>を利用します。$scopeに対して行った操作は、Viewとの双方向のデータのやり取りに利用します。</p>

<p>また、ネストさせる事もできるので、このように他のControllerの一部を再利用することもできます。ただ、あまり分かりやすいコードでもないですし、使うチャンスは少ないように思います。</p>

<p><a href="http://jsfiddle.net/vvakame/SzkwL/" rel="nofollow noopener" target="_blank">サンプル</a><br>
</p>

<div class="code-frame" data-lang="javascript">
<div class="code-lang"><span class="bold">sample.js</span></div>
<div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">SelectController</span><span class="p">(</span><span class="nx">$scope</span><span class="p">,</span> <span class="nx">$window</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">$scope</span><span class="p">.</span><span class="nx">selectedStateList</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="nx">$scope</span><span class="p">.</span><span class="nx">selectedDataList</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="nx">$scope</span><span class="p">.</span><span class="nx">changeSelection</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">$scope</span><span class="p">.</span><span class="nx">selectedStateList</span><span class="p">[</span><span class="nx">index</span><span class="p">])</span> <span class="p">{</span>
            <span class="nx">$scope</span><span class="p">.</span><span class="nx">selectedDataList</span><span class="p">[</span><span class="nx">index</span><span class="p">]</span> <span class="o">=</span> <span class="nx">data</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nx">$scope</span><span class="p">.</span><span class="nx">selectedDataList</span><span class="p">[</span><span class="nx">index</span><span class="p">]</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">};</span>
    <span class="nx">$scope</span><span class="p">.</span><span class="nx">show</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">message</span> <span class="o">=</span> <span class="s2">"selected "</span> <span class="o">+</span> <span class="nx">$scope</span><span class="p">.</span><span class="nx">selectedDataList</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">","</span><span class="p">);</span>
        <span class="nx">$window</span><span class="p">.</span><span class="nx">alert</span><span class="p">(</span><span class="nx">message</span><span class="p">);</span>
        <span class="nx">$scope</span><span class="p">.</span><span class="nx">message</span> <span class="o">=</span> <span class="nx">message</span>
    <span class="p">};</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">UserController</span><span class="p">(</span><span class="nx">$scope</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">$scope</span><span class="p">.</span><span class="nx">userList</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s2">"vvakame"</span><span class="p">,</span> <span class="s2">"sys1yagi"</span><span class="p">,</span> <span class="s2">"kojira"</span><span class="p">,</span> <span class="s2">"neco"</span>
    <span class="p">];</span>
<span class="p">}</span>
</pre></div>
</div>

<div class="code-frame" data-lang="html">
<div class="code-lang"><span class="bold">sample.html</span></div>
<div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">div</span> <span class="na">ng-app</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">ng-controller</span><span class="o">=</span><span class="s">"UserController"</span><span class="p">&gt;</span>
        ユーザ一覧
        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">ng-repeat</span><span class="o">=</span><span class="s">"user in userList"</span><span class="p">&gt;</span>
            {{user}}
        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">ng-controller</span><span class="o">=</span><span class="s">"SelectController"</span><span class="p">&gt;</span>
        ユーザ選択
        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">ng-controller</span><span class="o">=</span><span class="s">"UserController"</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">div</span> <span class="na">ng-repeat</span><span class="o">=</span><span class="s">"user in userList"</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">input</span>
                    <span class="na">type</span><span class="o">=</span><span class="s">"checkbox"</span> 
                    <span class="na">ng-model</span><span class="o">=</span><span class="s">"selectedStateList[$index]"</span> 
                    <span class="na">ng-change</span><span class="o">=</span><span class="s">"changeSelection($index, user)"</span><span class="p">&gt;</span>
                {{user}}
            <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
            {{message}}<span class="p">&lt;</span><span class="nt">br</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">button</span> <span class="na">ng-click</span><span class="o">=</span><span class="s">"show()"</span><span class="p">&gt;</span>選択してるユーザを表示<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</pre></div>
</div>

<h2>
<span id="html--layout-xml" class="fragment"></span><a href="#html--layout-xml"><i class="fa fa-link"></i></a>HTML = layout xml</h2>

<p>HTMLはまんまHTMLの本来の役割通りの画面です。<code>directive</code>と同じく、だいたいViewだと思ってもよいでしょう。HTMLは<code>controller</code>からデータを与えてもらい、画面に反映する役割を持ちます。どういう構造で表示するかを書く、という面でlayout xmlと似ています。ですが、どの<code>controller</code>が制御するかなどを指定する役割もあるので、細かく違うところももちろんあります。</p>

<p>HTMLについてもここまでに色々とサンプルで出てきたのでもはや割愛します。</p>

<h2>
<span id="window-や-location-とか" class="fragment"></span><a href="#window-%E3%82%84-location-%E3%81%A8%E3%81%8B"><i class="fa fa-link"></i></a>$window や $location とか</h2>

<p>unittestを行う際に実際のwindowやlocationなどを使ってしまうと、node.js環境で存在しなかったり、window.alertが呼ばれた時にポップアップが出てウザかったりするのでDIされた物を使うようにします。そのためにこれらが準備されています。</p>

<h1>
<span id="angularjsのもう少し詳しい情報" class="fragment"></span><a href="#angularjs%E3%81%AE%E3%82%82%E3%81%86%E5%B0%91%E3%81%97%E8%A9%B3%E3%81%97%E3%81%84%E6%83%85%E5%A0%B1"><i class="fa fa-link"></i></a>AngularJSのもう少し詳しい情報</h1>

<p>他に知ってたほうがいいことを概説してみます。</p>

<ul>
<li>
<a href="http://docs.angularjs.org/guide/forms" rel="nofollow noopener" target="_blank">Form</a>
入力値のvalidationやエラーメッセージの表示なども手軽に行うことができます。</li>
<li>
<a href="http://docs.angularjs.org/guide/expression" rel="nofollow noopener" target="_blank">Expression</a>
AngularJSでdirectiveなどに指定するExpressionについての解説です。JavaScriptっぽい構文ですが、完全に別物なのでうんうん唸って苦しんだりすることになります。なかなか覚えられなくて辛いです。</li>
<li>
<a href="http://docs.angularjs.org/guide/dev_guide.unit-testing" rel="nofollow noopener" target="_blank">UnitTest</a>
上でくどくどと言っていますが、AngularJSはDIで成り立っているので、テストもなかなか書きやすいです。ルールが飲み込めてくるまでは結構苦労するんですが…。Jasmineとかで適当にテストを書くことができます。ていうかこのドキュメントの最下部なんなの？マジぱないっす。

<ul>
<li>
<a href="http://testacular.github.com/" rel="nofollow noopener" target="_blank">testacular</a>
そのうえで、よく使われているのがtestacularです。AngularJS自体もtestacularを利用してテストされています。PhantomJSやChrome、Firefox、Safari、IEなど複数のブラウザ上でテストを一括で走らせることができます。</li>
</ul>
</li>
<li>
<a href="http://docs.angularjs.org/guide/dev_guide.e2e-testing" rel="nofollow noopener" target="_blank">E2E Test</a>
End to End testを書くこともできます。結構こういうのって珍しい気がします。この辺りはまだちゃんと研究していないので<a href="http://shogogg.hatenablog.jp/entry/2013/01/25/005753" rel="nofollow noopener" target="_blank">shogoggのブログ</a>とかを参照してみるといいかもしれない。</li>
</ul>

<h1>
<span id="angularjsとあまり関係のない情報" class="fragment"></span><a href="#angularjs%E3%81%A8%E3%81%82%E3%81%BE%E3%82%8A%E9%96%A2%E4%BF%82%E3%81%AE%E3%81%AA%E3%81%84%E6%83%85%E5%A0%B1"><i class="fa fa-link"></i></a>AngularJSとあまり関係のない情報</h1>

<ul>
<li>
<a href="http://www.typescriptlang.org/" rel="nofollow noopener" target="_blank">TypeScript</a>
型があるぞー！！JavaScriptとの互換性もかなりあるぞー！！やったーー！！！</li>
<li>
<a href="http://www.tsdpm.com/" rel="nofollow noopener" target="_blank">tsd</a>
TypeScript用の.d.tsファイルのダウンローダ的な感じ。</li>
<li>
<a href="http://gruntjs.com/" rel="nofollow noopener" target="_blank">grunt</a>
色々なタスクを行わせることができます。shell script書くより、色々な人が作ったタスクを組み合わせたほうが楽です。JavaScriptで設定ファイル書けますし。どっかのm○nとかいうXML編集させられるクソツールよりいいと思います。</li>
<li>
<a href="http://twitter.github.com/bower/" rel="nofollow noopener" target="_blank">bower</a>
npmのクライアント版です。</li>
</ul>

<h1>
<span id="参考情報-という名の愚痴" class="fragment"></span><a href="#%E5%8F%82%E8%80%83%E6%83%85%E5%A0%B1-%E3%81%A8%E3%81%84%E3%81%86%E5%90%8D%E3%81%AE%E6%84%9A%E7%97%B4"><i class="fa fa-link"></i></a>参考情報 という名の愚痴</h1>

<h2>
<span id="本家ドキュメント" class="fragment"></span><a href="#%E6%9C%AC%E5%AE%B6%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88"><i class="fa fa-link"></i></a>本家ドキュメント</h2>

<p><a href="http://angularjs.org/" rel="nofollow noopener" target="_blank">ここ</a> ぶっちゃけ、ドキュメントとしては量が少ないです。かなり大きなフレームワークですがそれに対して量が十分ではありません。なので、AngularJSを使い始めて、その世界観に慣れるまでに結構時間がかかります。わかめもなんやかやで2週間くらいかかった気がします。</p>

<p>また、本家ドキュメントとは直接関係はないのですが、Googleとかで検索した結果の資料として、1.0以前の内容はアテにならない場合が多いため、昔の情報はあまり信用しないほうがいいかもしれません。</p>

<h2>
<span id="テストの書き方" class="fragment"></span><a href="#%E3%83%86%E3%82%B9%E3%83%88%E3%81%AE%E6%9B%B8%E3%81%8D%E6%96%B9"><i class="fa fa-link"></i></a>テストの書き方</h2>

<p>わかるまでが大変なのが、serviceやcontrollerのテストです。<br>
そろそろサンプル作成するのが大変になってきたので、今書いているプロジェクトから抜粋します。言語はTypeScriptです。ご容赦ください…！！<br>
普段はTypeScript+Jasmine+Testacularでテストを作って流して、ってしています。</p>

<div class="code-frame" data-lang="typescript">
<div class="code-lang"><span class="bold">test.ts</span></div>
<div class="highlight"><pre><span></span><span class="nx">describe</span><span class="p">(</span><span class="s2">"Serviceの"</span><span class="p">,</span> <span class="p">()</span><span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">$injector</span>:<span class="kt">ng.auto.IInjectorService</span><span class="p">;</span>
    <span class="nx">beforeEach</span><span class="p">(()</span><span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">$injector</span> <span class="o">=</span> <span class="nx">angular</span><span class="p">.</span><span class="nx">injector</span><span class="p">([</span><span class="s1">'ngMock'</span><span class="p">]);</span>
    <span class="p">});</span>

    <span class="nx">describe</span><span class="p">(</span><span class="s2">"Sample.Serviceの"</span><span class="p">,</span> <span class="p">()</span><span class="o">=&gt;</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">$httpBackend</span>:<span class="kt">ng.IHttpBackendService</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">service</span>:<span class="kt">Sample.Service</span><span class="p">;</span>

        <span class="nx">beforeEach</span><span class="p">(()</span><span class="o">=&gt;</span> <span class="p">{</span>
            <span class="nx">$httpBackend</span> <span class="o">=</span> <span class="nx">$injector</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">"$httpBackend"</span><span class="p">);</span>

            <span class="nx">service</span> <span class="o">=</span> <span class="nx">$injector</span><span class="p">.</span><span class="nx">instantiate</span><span class="p">(</span><span class="nx">Sample</span><span class="p">.</span><span class="nx">Service</span><span class="p">,</span> <span class="p">{</span>
                <span class="nx">$routeParams</span><span class="o">:</span> <span class="p">{</span>
                    <span class="nx">hoge</span><span class="o">:</span> <span class="s2">"fuga"</span>
                <span class="p">}</span>
            <span class="p">});</span>
        <span class="p">});</span>

        <span class="nx">it</span><span class="p">(</span><span class="s2">"getメソッドのテスト"</span><span class="p">,</span> <span class="p">()</span><span class="o">=&gt;</span> <span class="p">{</span>
            <span class="nx">$httpBackend</span><span class="p">.</span><span class="nx">expect</span><span class="p">(</span><span class="s2">"POST"</span><span class="p">,</span> <span class="kc">null</span><span class="p">).</span><span class="nx">respond</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="p">{</span><span class="s2">"hoge"</span><span class="o">:</span> <span class="s2">"fuga"</span><span class="p">});</span>
            <span class="kd">var</span> <span class="nx">promise</span> <span class="o">=</span> <span class="nx">service</span><span class="p">.</span><span class="nx">get</span><span class="p">();</span>

            <span class="kd">var</span> <span class="nx">model</span><span class="p">;</span>
            <span class="nx">promise</span><span class="p">.</span><span class="nx">success</span><span class="p">((</span><span class="nx">data</span><span class="p">)</span><span class="o">=&gt;</span> <span class="nx">model</span> <span class="o">=</span> <span class="nx">data</span><span class="p">);</span>
            <span class="nx">$httpBackend</span><span class="p">.</span><span class="nx">flush</span><span class="p">();</span>

            <span class="nx">expect</span><span class="p">(</span><span class="nx">model</span><span class="p">).</span><span class="nx">toBeDefined</span><span class="p">();</span>
        <span class="p">});</span>
    <span class="p">});</span>
<span class="p">});</span>

<span class="nx">describe</span><span class="p">(</span><span class="s2">"Controllerの"</span><span class="p">,</span> <span class="p">()</span><span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">$injector</span>:<span class="kt">ng.auto.IInjectorService</span><span class="p">;</span>
    <span class="nx">beforeEach</span><span class="p">(()</span><span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">$injector</span> <span class="o">=</span> <span class="nx">angular</span><span class="p">.</span><span class="nx">injector</span><span class="p">([</span><span class="s1">'ngMock'</span><span class="p">]);</span>
    <span class="p">});</span>

    <span class="nx">describe</span><span class="p">(</span><span class="s2">"Sample.Controllerの"</span><span class="p">,</span> <span class="p">()</span><span class="o">=&gt;</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">$scope</span>:<span class="kt">Sample.Scope</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">$controller</span>:<span class="kt">ng.IControllerService</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">$httpBackend</span>:<span class="kt">ng.IHttpBackendService</span><span class="p">;</span>

        <span class="kd">var</span> <span class="nx">locals</span>:<span class="kt">any</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">makeController</span> <span class="o">=</span> <span class="p">(</span><span class="nx">specificLocals</span>:<span class="kt">any</span> <span class="o">=</span> <span class="nx">locals</span><span class="p">)</span><span class="o">:</span><span class="nx">Sample</span><span class="p">.</span><span class="nx">Controller</span> <span class="o">=&gt;</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">$controller</span><span class="p">(</span><span class="nx">Sample</span><span class="p">.</span><span class="nx">Controller</span><span class="p">,</span> <span class="nx">specificLocals</span><span class="p">);</span>
        <span class="p">};</span>

        <span class="nx">beforeEach</span><span class="p">(()</span><span class="o">=&gt;</span> <span class="p">{</span>
            <span class="nx">$httpBackend</span> <span class="o">=</span> <span class="nx">$injector</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">"$httpBackend"</span><span class="p">);</span>
            <span class="nx">$controller</span> <span class="o">=</span> <span class="nx">$injector</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">"$controller"</span><span class="p">);</span>

            <span class="nx">$scope</span> <span class="o">=</span> <span class="o">&lt;</span><span class="nx">any</span><span class="o">&gt;</span> <span class="nx">$injector</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">"$rootScope"</span><span class="p">).</span><span class="nx">$new</span><span class="p">();</span>

            <span class="kd">var</span> <span class="nx">sampleService</span> <span class="o">=</span> <span class="nx">$injector</span><span class="p">.</span><span class="nx">instantiate</span><span class="p">(</span><span class="nx">Sample</span><span class="p">.</span><span class="nx">Service</span><span class="p">,</span> <span class="p">{});</span>
            <span class="nx">locals</span> <span class="o">=</span> <span class="p">{</span>
                <span class="nx">$scope</span>: <span class="kt">$scope</span><span class="p">,</span>
                <span class="nx">sampleService</span>: <span class="kt">sampleService</span>
            <span class="p">};</span>
        <span class="p">});</span>

        <span class="nx">it</span><span class="p">(</span><span class="s2">"Controllerの作成"</span><span class="p">,</span> <span class="p">()</span><span class="o">=&gt;</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">controller</span> <span class="o">=</span> <span class="nx">makeController</span><span class="p">();</span>

            <span class="nx">expect</span><span class="p">(</span><span class="nx">controller</span><span class="p">).</span><span class="nx">not</span><span class="p">.</span><span class="nx">toBeNull</span><span class="p">();</span>
        <span class="p">});</span>

        <span class="nx">it</span><span class="p">(</span><span class="s2">"actionメソッドのテスト"</span><span class="p">,</span> <span class="p">()</span><span class="o">=&gt;</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">controller</span> <span class="o">=</span> <span class="nx">makeController</span><span class="p">();</span>

            <span class="nx">$httpBackend</span><span class="p">.</span><span class="nx">expect</span><span class="p">(</span><span class="s2">"POST"</span><span class="p">,</span> <span class="kc">null</span><span class="p">).</span><span class="nx">respond</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="p">{</span><span class="s2">"hoge"</span><span class="o">:</span> <span class="s2">"fuga"</span><span class="p">});</span>
            <span class="nx">$scope</span><span class="p">.</span><span class="nx">action</span><span class="p">();</span>
            <span class="nx">$httpBackend</span><span class="p">.</span><span class="nx">flush</span><span class="p">();</span>

            <span class="nx">expect</span><span class="p">(</span><span class="nx">$scope</span><span class="p">.</span><span class="nx">result</span><span class="p">).</span><span class="nx">toBeTruthy</span><span class="p">();</span>
        <span class="p">});</span>
    <span class="p">});</span>
<span class="p">});</span>
</pre></div>
</div>

<h2>
<span id="プロジェクト構成" class="fragment"></span><a href="#%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E6%A7%8B%E6%88%90"><i class="fa fa-link"></i></a>プロジェクト構成</h2>

<p><a href="https://gist.github.com/vvakame/5053711" rel="nofollow noopener" target="_blank">普段使ってる設定</a></p>

<h2>
<span id="日本語の情報" class="fragment"></span><a href="#%E6%97%A5%E6%9C%AC%E8%AA%9E%E3%81%AE%E6%83%85%E5%A0%B1"><i class="fa fa-link"></i></a>日本語の情報</h2>

<p><a href="https://github.com/angularjs-jp/angular.js/wiki" rel="nofollow noopener" target="_blank">AngularJSドキュメント日本語訳プロジェクト</a><br>
<a href="">AngularJS メーリングリスト</a></p>

<p>後半の失速っぷりﾊﾝﾊﾟﾅｲﾈ！</p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>vvakameさんの<br />5位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>107</kbd>
		<a target="_blank" href="https://qiita.com/vvakame/items/83bcfa02c5462610b89a">Google I/O 2013 Android関連セッションまとめ</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-05-30 17:09:18</center>
	</td>
	<td style="width:200px;">
		@vvakame<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/13283/profile-images/1473682747">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Android]</b> <b>[GoogleIO2013]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>今回のGoogle I/OではAndroidの新しいバージョンのアナウンスなどはありませんでした。<br>
しかし、Google Play Service を中心に据えたかなり大きな機能追加があり、面白いです。</p>

<p>わからないことがあったら <a href="http://y-anz-m.blogspot.jp/" rel="nofollow noopener" target="_blank">Y.A.M の 雑記帳</a> のセッションレポートを見るか、やんざむの口にカレーを注ぎ込むといいと思います。</p>

<p>Android の内容についてもっと知りたい人は 5/31(金)に行われる弊社の<a href="http://tech.topgate.co.jp/seminar/2013-05-31" rel="nofollow noopener" target="_blank">有料報告セミナー</a>に是非きてください！(宣伝<br>
僕はAndroid担当ですが、GoogleのCloudPlatformやGoogle Appsについても他の人が超しっかりキャッチアップしてお待ちしてます！</p>

<h1>
<span id="基調講演" class="fragment"></span><a href="#%E5%9F%BA%E8%AA%BF%E8%AC%9B%E6%BC%94"><i class="fa fa-link"></i></a>基調講演</h1>

<ul>
<li>
<a href="https://www.evernote.com/shard/s18/sh/0bb8260f-78ec-42db-bfd7-503e818b0fe1/937e828932228537e40684c6a0b54f31" rel="nofollow noopener" target="_blank">Keynote</a>

<ul>
<li>面白かった(小並感</li>
<li>主要なFeatureはすべて紹介されるので便利</li>
<li>GDGラウンジでKeynote視聴しながら爆睡する俺氏が多数報告された</li>
</ul>
</li>
</ul>

<h1>
<span id="新しい開発環境についてのセッション" class="fragment"></span><a href="#%E6%96%B0%E3%81%97%E3%81%84%E9%96%8B%E7%99%BA%E7%92%B0%E5%A2%83%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E3%81%AE%E3%82%BB%E3%83%83%E3%82%B7%E3%83%A7%E3%83%B3"><i class="fa fa-link"></i></a>新しい開発環境についてのセッション</h1>

<ul>
<li>
<a href="https://www.evernote.com/shard/s18/sh/3101289a-9c05-4ce5-994e-e4b7728f094c/f786851f533c037385db0a0a711a40f6" rel="nofollow noopener" target="_blank">What’s New in Android Developer Tools</a>

<ul>
<li>AndroidStudio！IntelliJ ベースなんだよー</li>
<li>デモ多くてすごいよいとか</li>
<li>Gradle使ってproductFlavorsとかbuildTypesの説明とか すごい良さそう</li>
</ul>
</li>
<li>
<a href="https://www.evernote.com/shard/s18/sh/c0856f9b-9563-414e-9c55-8e013cd0292e/926f15be91aac324cbae5db969c405f1" rel="nofollow noopener" target="_blank">The New Android SDK Build System</a>

<ul>
<li>Gradleベースの新しいビルドシステムについて</li>
<li>
<a href="http://qiita.com/items/83366fbfa47562fafbf4">これ</a> を見てから見たほうがよりわかりやすいはず</li>
<li>すごく自由度が高い 早く普及してほしい みんなこれを使おう！</li>
<li>Binary Bundle 激萌え お前らMavenやGradleの概念を知らずに呼吸することは2013年下半期じゃ許されんからな！</li>
</ul>
</li>
<li>
<a href="https://www.evernote.com/shard/s18/sh/657a3764-e940-482b-b74e-c0912c1c6503/5ffb108b8236cc01fdd6a7d45c3a6848" rel="nofollow noopener" target="_blank">What’s new for Developers in Google Play</a>

<ul>
<li>段階的リリースができるようになったよー α版 β版 段階的公開</li>
<li>タブレット対応きっちりやってるアプリを取り扱うとこができたらしい</li>
<li>デベコン新しくなった</li>
<li>レビューに対して返信できる機能が全開発者に公開されてるよー</li>
<li>レーティング変化のメトリクスが取れるようになった</li>
<li>なんかGoogle Analysis周りの情報をいい感じに表示する機能が来るとか</li>
<li>最適化Tipsの表示</li>
<li>翻訳会社にアプリの翻訳を頼める機能が追加されるお</li>
</ul>
</li>
</ul>

<h1>
<span id="google-play-service-関連セッション" class="fragment"></span><a href="#google-play-service-%E9%96%A2%E9%80%A3%E3%82%BB%E3%83%83%E3%82%B7%E3%83%A7%E3%83%B3"><i class="fa fa-link"></i></a>Google Play Service 関連セッション</h1>

<ul>
<li>
<a href="https://www.evernote.com/shard/s18/sh/18af09da-3057-4aa8-a209-2ec227698564/43f71e8ceeea4678131295974b871790" rel="nofollow noopener" target="_blank">What’s New in Google Play Services</a>

<ul>
<li>新しく追加されたものの紹介

<ul>
<li>Locatoion系</li>
<li>Game系</li>
<li>GCM系</li>
<li>Google Wallet</li>
</ul>
</li>
<li>導入方法解説 Google API Console とかAndroid系の人馴染みないだろうし見てみるといいんじゃね</li>
</ul>
</li>
<li>
<a href="https://www.evernote.com/shard/s18/sh/be6ddd28-e3ae-4877-b527-9b0f58c9f85c/dbeccd181ae03092e539e2d048315d87" rel="nofollow noopener" target="_blank">New Developments in Mobile Gaming</a>

<ul>
<li>本当は An Introduction to Play Game Services という名前</li>
<li>Play Service 系の大元セッション まずはこのセッションを見るといいかも

<ul>
<li>その後、ここの下 Mobile Multi〜〜 から Level Up〜〜 までを見る流れがオススメみたい</li>
</ul>
</li>
</ul>
</li>
<li>
<a href="https://www.evernote.com/shard/s18/sh/7eb1bbf1-9e83-43bf-b4e2-1a32651bb845/e67acc36afd90c3f69012e0f128c51d2" rel="nofollow noopener" target="_blank">Practical Android Games Development</a>

<ul>
<li>本当は Games Services in Practice という名前</li>
<li>実際のゲームの開発・テスト・運用から見た使い方の話</li>
</ul>
</li>
<li>
<a href="https://www.evernote.com/shard/s18/sh/a553f5b6-4371-4662-8f1f-2124af3f0dee/6b407f4b36cf9142f06da57b237cfe59" rel="nofollow noopener" target="_blank">Mobile Multiplayer Made Manageable</a>

<ul>
<li>マルチプレイヤーゲームの実装について</li>
<li>G+で対戦相手を招待して対戦！</li>
<li>対戦部屋の作成・招待・ゲーム開始からゲーム中のP2Pまで面倒を見てくれる</li>
</ul>
</li>
<li>
<a href="https://www.evernote.com/shard/s18/sh/270b0313-240f-4ed4-92ce-2877dacc9868/185a7d317490ea416d3a8826100ffe7d" rel="nofollow noopener" target="_blank">Advanced Game Development Topics</a>

<ul>
<li>実装方法やUIの組み立て方についての説明が多かったかな</li>
<li>ライフサイクルを考慮した各種Clientの使い方の説明があったのはよかった</li>
</ul>
</li>
<li>
<a href="https://www.evernote.com/shard/s18/sh/d0bbd0db-99d5-41c2-bb92-135a391a1e0e/b3ea081ee741e16e6a9fb3fe184af08f" rel="nofollow noopener" target="_blank">Level Up Your Android Game</a>

<ul>
<li>色々なゲーム関連のAPIの紹介やTips</li>
<li>スライド少なめでぶっちゃけよくわからん度高かった</li>
</ul>
</li>
<li>
<a href="https://www.evernote.com/shard/s18/sh/ccab0e29-33dd-475b-be27-66626cc9eb8c/fa2c3ba7f129faceb5d336ab3e42b023" rel="nofollow noopener" target="_blank">Beyond the Blue Dot: New Features in Android Location</a>

<ul>
<li>Fused Location Provider と Geofencing と Activity Recongize の実現方法やバッテリー節約度についての言及とか デモも充実</li>
<li>これは、みんなして速攻移行したほうがいいっすねぇーー！！って感じ

<ul>
<li>この機能を使うアプリが増えれば増えるほど嬉しい系</li>
</ul>
</li>
</ul>
</li>
<li>
<a href="https://www.evernote.com/shard/s18/sh/3a3e2b7a-5cad-43a2-9d06-4cb0c106e2a2/8bc57f401f1f027348d7b3f4021c6e82" rel="nofollow noopener" target="_blank">Google Cloud Messaging</a>

<ul>
<li>GCMは勝利の鍵だー的な</li>
<li>XMPPエンドポイントの追加とUpstreamのGCM、User Notifications の追加が新しいニュース

<ul>
<li>User Notifications は名前からだとまるで意味がわからない感すごい</li>
<li>非常におもしろそうなFeatureなので要チェックや！</li>
</ul>
</li>
</ul>
</li>
<li>
<a href="https://www.evernote.com/shard/s18/sh/86eefba9-107c-422d-b1b7-5588639e4734/625b5e0157029600409c76d1c10fe6f2" rel="nofollow noopener" target="_blank">When Android Meets Maps</a>

<ul>
<li>Maps v2の話</li>
<li>よくわからんかったけどすげーリッチそうだった</li>
<li>ピコーン！みたいな索敵半径表示みたいなのができるとか Indoor Mapとか</li>
</ul>
</li>
</ul>

<h1>
<span id="androidの新機能についてのセッション" class="fragment"></span><a href="#android%E3%81%AE%E6%96%B0%E6%A9%9F%E8%83%BD%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E3%81%AE%E3%82%BB%E3%83%83%E3%82%B7%E3%83%A7%E3%83%B3"><i class="fa fa-link"></i></a>Androidの新機能についてのセッション</h1>

<ul>
<li>
<a href="https://www.evernote.com/shard/s18/sh/85771992-99f9-40c1-a43f-0ee81f4f0b0f/4a53db005152a40157d076fa81ff9b3f" rel="nofollow noopener" target="_blank">Best Practices for Bluetooth Development</a>

<ul>
<li>だいたい BLE (Bluetooth Low Energy の宣伝)</li>
<li>いや、マジでAPI Level 18 もーすぐ出るから！そしたらこのAPI使えるから！みたいな</li>
<li>IOで18公開されなかった最大の被害者セッション感ある</li>
</ul>
</li>
<li>
<a href="https://www.evernote.com/shard/s18/sh/a007893a-1c2a-4bf9-b310-32ff60ccc55b/25212ead7ba580a2912b109468ad78a1" rel="nofollow noopener" target="_blank">From Nothing to Nirvana in Minutes: Cloud Backend for Your Android Application</a>

<ul>
<li>かずのりさんのMobileBackendStarterについてのセッション</li>
<li>サーバの事全くわからなくてもバリバリインタネッツ系アプリ作れるよ！みたいな話</li>
<li>既にGAEとかEC2とか使いこなしている人には必要ではない そうじゃないなら一回試してみるとよさそう</li>
</ul>
</li>
</ul>

<h1>
<span id="androidのデザインの指針や動作へのtips" class="fragment"></span><a href="#android%E3%81%AE%E3%83%87%E3%82%B6%E3%82%A4%E3%83%B3%E3%81%AE%E6%8C%87%E9%87%9D%E3%82%84%E5%8B%95%E4%BD%9C%E3%81%B8%E3%81%AEtips"><i class="fa fa-link"></i></a>Androidのデザインの指針や動作へのTips</h1>

<ul>
<li>
<a href="https://www.evernote.com/shard/s18/sh/7b85ac34-800c-4ff4-8be1-42aed97c3fcc/e5a1317b937d8b929813cd985223f31c" rel="nofollow noopener" target="_blank">Android Protips: Making Apps Work Like Magic</a>

<ul>
<li>喩え話や格言からの引用が多くてよくわからん＼(^o^)／</li>
<li>こういう機能とか実装とかいいよね的な話だ多分 知らん</li>
</ul>
</li>
<li>
<a href="https://www.evernote.com/shard/s18/sh/c96c8ecb-dfcd-4ad1-83da-c86dd54f14f1/324038e09a1105c769da20dfa1502ec2" rel="nofollow noopener" target="_blank">Enchant, Simplify, Amaze: Android’s Design Principles</a>

<ul>
<li>全然何伝えたいかわかんねぇ＼(^o^)／</li>
</ul>
</li>
<li>
<a href="https://www.evernote.com/shard/s18/sh/6092ccb2-74e9-495c-bf42-6e4372ba2391/4db95e58fb64eda1627d3538b0ee25e5" rel="nofollow noopener" target="_blank">Agile UX Research Practice in Android</a>

<ul>
<li>GoogleのUXリサーチチームのお仕事内容紹介！みたいな感じ 結構面白い</li>
<li>金持ちはいいよな！と思いながら聞いてたら "お前らでもできるよ"みたいな話されて＼(^o^)／</li>
</ul>
</li>
<li>
<a href="https://www.evernote.com/shard/s18/sh/06066318-dffb-496b-9dfd-7ac7cf39cbb9/fccaa8baf81209084d3835c37bbb215d" rel="nofollow noopener" target="_blank">Structure in Android App Design</a>

<ul>
<li>アプリの構造をどうするといいかみたいな話</li>
<li>色々デザパタが示されてこの場合はこう、この場合はこう、みたいな話</li>
<li>Navigation Drawer っていうのをついこないだ出してね(ﾄﾞﾔ とか</li>
</ul>
</li>
<li>
<a href="https://www.evernote.com/shard/s18/sh/73875963-048e-4d46-9485-1f191d3721c3/a56956d2a2f99c4060c6ae40e52ea97b" rel="nofollow noopener" target="_blank">Android Design for UI Developers</a>

<ul>
<li>ActionBarCompat とか ViewPager とか色々</li>
<li>Navigation Drawer ではこのくらいの幅で使ったほうがいいよ みたいな指針とか</li>
<li>Responsive Design の話とか 全然レスポンシブじゃなくて根性ポンシブな内容だった</li>
<li>お前らこんなTipsしらないだろ？しらないだろ！？しらないだろ！！みたいなパワーを感じた</li>
</ul>
</li>
<li>
<a href="https://www.evernote.com/shard/s18/sh/6e8cb5c1-8298-4f25-bb36-176130bf2c2a/3434da7102c6bba7f4c98caabc2c3e50" rel="nofollow noopener" target="_blank">A Moving Experience</a>

<ul>
<li>アニメーションの付け方のイロハとか</li>
<li>ViewTreeObserver超ベンリだけどお前ら使ってる？みたいな

<ul>
<li>onPreDraw で色々やる事例が多いみたいだ</li>
</ul>
</li>
</ul>
</li>
</ul>

<h1>
<span id="androidの既存機能をより深く使い倒すためのセッション" class="fragment"></span><a href="#android%E3%81%AE%E6%97%A2%E5%AD%98%E6%A9%9F%E8%83%BD%E3%82%92%E3%82%88%E3%82%8A%E6%B7%B1%E3%81%8F%E4%BD%BF%E3%81%84%E5%80%92%E3%81%99%E3%81%9F%E3%82%81%E3%81%AE%E3%82%BB%E3%83%83%E3%82%B7%E3%83%A7%E3%83%B3"><i class="fa fa-link"></i></a>Androidの既存機能をより深く使い倒すためのセッション</h1>

<ul>
<li>
<a href="https://www.evernote.com/shard/s18/sh/377fae5a-f8ce-4ea3-8204-f8309d6e3865/a02bbdbf9f5555de3b42a7d09c30d854" rel="nofollow noopener" target="_blank">Writing Custom Views for Android</a>

<ul>
<li>カスタムビューの作り方</li>
<li>ViewGroup系の作り方にかなり時間が割かれていた</li>
</ul>
</li>
<li>
<a href="https://www.evernote.com/shard/s18/sh/901c934c-2f44-45b7-940f-957a726344d7/4cbb383df39812a8df05df6cf1ebdf9e" rel="nofollow noopener" target="_blank">Volley: Easy, Fast Networking for Android</a>

<ul>
<li>Google Playアプリで使われているネットワーキングライブラリ</li>
<li>例えば、TwitterのタイムラインをListViewで表示するような場合にマッチしているらしい</li>
<li>大容量データのダウンロードとかは普通にDownloadManagerを使いましょう</li>
</ul>
</li>
<li>
<a href="https://www.evernote.com/shard/s18/sh/b3c98bb5-78e0-4044-8737-c6258adacc3f/a4253e22c36fb65c16e6204a9e805f38" rel="nofollow noopener" target="_blank">Androids Do Daydream</a>

<ul>
<li>Daydream(スクリーンセーバー)についてのセッション</li>
<li>APIの説明とかが大半</li>
<li>Fragmentがサポートされてない理由がライフサイクルが合わないから という説明があったのはよかった</li>
</ul>
</li>
<li>
<a href="https://www.evernote.com/shard/s18/sh/ac9c5318-69b6-4ce0-8175-deb4ef9d9395/7012fe902850b9afb99b175f1730272d" rel="nofollow noopener" target="_blank">In-App Billing Version 3</a>

<ul>
<li>v3からは同期的な動作になったしとても使いやすくなった</li>
<li>テスト環境も超進化したよ！</li>
<li>消費系アイテムも管理できるようになったよ</li>
</ul>
</li>
<li>
<a href="https://www.evernote.com/shard/s18/sh/f3ac6d1d-8cbe-4e4a-b516-cdf624b1a203/0a913fa0bd9466e43d7ec32810a46875" rel="nofollow noopener" target="_blank">Enabling Blind and Low-Vision Accessibility On Android</a>

<ul>
<li>盲目や弱視者の人のためのアクセシビリティについて</li>
<li>へーこんな機能あったんだー って感心するので一回見てみるといいかもね</li>
<li>セッションの内容を超訳すると、既存Viewだけでアプリ組むならあんましなんも考えなくてOK

<ul>
<li>装飾的な要素の android:contentDescription="<a href="/null" class="user-mention js-hovercard" title="null" data-hovercard-target-type="user" data-hovercard-target-name="null">@null</a>" を設定する</li>
</ul>
</li>
<li>セッションの大部分がフルスクラッチ系のカスタムViewの対応方法についてだった</li>
</ul>
</li>
<li>
<a href="https://www.evernote.com/shard/s18/sh/ad66f287-2b81-4fb0-a03f-dc854a917a50/3db3b7b849a2318c8128974b74cb2194" rel="nofollow noopener" target="_blank">Building Android Apps for a Global Audience</a>

<ul>
<li>国際化についての説明</li>
<li>ドイツ語で数を数えて表示するのめっちゃ複雑でヤバい</li>
<li>RTL(右から左に書く)な言語ヤバい</li>
<li>RTL系に対応するため、今まで paddingLeft とか書いてたのは paddingStart に変更になります(全アプリ的に

<ul>
<li>しばらくはLeftとStart両方書かないとダメそうでめんどくさい感</li>
<li>両方書いてあるとStartに書いてある方が優先されまーす(API Level 17以降</li>
</ul>
</li>
</ul>
</li>
<li>
<a href="https://www.evernote.com/shard/s18/sh/ace2302e-003e-4e71-986e-538cfdebf937/617d918182948eed56181f0af19f84d1" rel="nofollow noopener" target="_blank">Taking Advantage of Android Platform Features</a>

<ul>
<li>Gmailアプリを例に、FragmentやらLoaderやら色々なものについて基本的な所からきっちりおさらいしている</li>
<li>このセッションはみんな見たほうがいいよ！オススメ！</li>
</ul>
</li>
</ul>

<h1>
<span id="androidのマニアな人達向けのセッション" class="fragment"></span><a href="#android%E3%81%AE%E3%83%9E%E3%83%8B%E3%82%A2%E3%81%AA%E4%BA%BA%E9%81%94%E5%90%91%E3%81%91%E3%81%AE%E3%82%BB%E3%83%83%E3%82%B7%E3%83%A7%E3%83%B3"><i class="fa fa-link"></i></a>Androidのマニアな人達向けのセッション</h1>

<ul>
<li>
<a href="https://www.evernote.com/shard/s18/sh/802078dc-5bfb-42e8-866b-314f31735e89/24ef74465b517f394c40fa01de6655d9" rel="nofollow noopener" target="_blank">Android Graphics Performance</a>

<ul>
<li>Project Butter はまだまだ続いている！！

<ul>
<li>Roman Guy は "え？もう終わったでしょ？？" とか言ってたけどｗ</li>
</ul>
</li>
<li>Framework内のチューニングの内容とか</li>
<li>開発者向けのTipsとか 開発者オプションの便利な使い方とかもあった</li>
</ul>
</li>
<li>
<a href="https://www.evernote.com/shard/s18/sh/1fbc819c-213b-4203-beca-275e8796c1e8/ac0670697626c55da43bff9826b34274" rel="nofollow noopener" target="_blank">High Performance Audio</a>

<ul>
<li>オーディオ関係の音プチプチとかを解消するために日夜頑張ってるみたいな話</li>
<li>いやーデバッグのしようもねーからオシロスコープ使ってるよｗ とか言われても困るｗ</li>
<li>要訳するとOpenSL使え</li>
</ul>
</li>
<li>
<a href="https://www.evernote.com/shard/s18/sh/ec1e9425-b5da-4993-a790-2587440c033c/47d476bc1f319a2ed1790f0c03cf798d" rel="nofollow noopener" target="_blank">High Performance Applications with RenderScript</a>

<ul>
<li>RenderScriptは前からあったけど実用的になるぞそろそろ！</li>
<li>今までGPUが遊んでるとか全然なかったけど、そろそろ高速化のために利用できる余地でてきたかもみたいな</li>
<li>画像処理とかに適切なスクリプトなんでよろしこ</li>
</ul>
</li>
<li>
<a href="https://www.evernote.com/shard/s18/sh/c89ea9e3-e1eb-4727-9eab-30e98cba407e/6bef5115fb989c1162d00d218ec368a4" rel="nofollow noopener" target="_blank">Android: As seen on TV!</a>

<ul>
<li>お、おう</li>
<li>Google TV特有の事情や使える機能とか普通のAndroid共通の機能やTipsとか</li>
</ul>
</li>
</ul>

<h1>
<span id="マーケティング向けのセッション" class="fragment"></span><a href="#%E3%83%9E%E3%83%BC%E3%82%B1%E3%83%86%E3%82%A3%E3%83%B3%E3%82%B0%E5%90%91%E3%81%91%E3%81%AE%E3%82%BB%E3%83%83%E3%82%B7%E3%83%A7%E3%83%B3"><i class="fa fa-link"></i></a>マーケティング向けのセッション</h1>

<ul>
<li>
<a href="https://www.evernote.com/shard/s18/sh/92ff4a68-5821-40b9-a45f-597d9321d609/b7e28548acd7b0f11d684cf00227b5da" rel="nofollow noopener" target="_blank">Getting Discovered on Google Play</a>

<ul>
<li>どうするとダウンロードが伸びるか</li>
<li>こういう対応をするとPlayStore内での露出が増えるみたいなの</li>
<li>友達の+1状況とかからおすすめアプリ生成してるのは知らんかったなー</li>
</ul>
</li>
<li>
<a href="https://www.evernote.com/shard/s18/sh/197e4c86-8f38-405a-926b-f7df60e494b4/3e6ca39d4fffd351c81561285b51006e" rel="nofollow noopener" target="_blank">Making Money on Google Play</a>

<ul>
<li>こうするとこういう結果になる みたいなデータ集</li>
<li>お金関係のレポートがGoogleCloudStorageのbucketに自動で突っ込まれる機能が近々出るそうな</li>
<li>有名アプリを例に出してこうすると収益増えるみたいな事例紹介が</li>
<li>DeNAは上手いことやってるらしい</li>
</ul>
</li>
</ul>

<h1>
<span id="その他" class="fragment"></span><a href="#%E3%81%9D%E3%81%AE%E4%BB%96"><i class="fa fa-link"></i></a>その他</h1>

<ul>
<li>
<a href="https://www.evernote.com/shard/s18/sh/3a8b6a4e-727a-4cbb-a8aa-c205fa341520/c25150726bf87897c209127f950a062b" rel="nofollow noopener" target="_blank">Google+ Sign-In for Android Developers</a>

<ul>
<li>G+と上手く組み合わせて色々やる！みたいなセッション</li>
<li>PCでWeb上でサインインした時に対応アプリを自動的に端末にインストールする機能があるらしい</li>
<li>G+のあんま知られてない機能の使い方みたいな話が結構あったので試してみるといいかもしれないけどG+上のどこに反映されるのか皆目わからん</li>
</ul>
</li>
<li>
<a href="https://www.evernote.com/shard/s18/sh/039d0dcb-bffc-4f0f-a0c1-fda345615fda/65727c6e730f24e58a453efa54ba2547" rel="nofollow noopener" target="_blank">Fireside Chat with the Android Team</a>

<ul>
<li>スライドなし、その場で喋るだけという鬼のようなセッション</li>
<li>yanzmに聞け！</li>
</ul>
</li>
</ul>

<h1>
<span id="androidじゃないけど" class="fragment"></span><a href="#android%E3%81%98%E3%82%83%E3%81%AA%E3%81%84%E3%81%91%E3%81%A9"><i class="fa fa-link"></i></a>Androidじゃないけど</h1>

<ul>
<li>
<a href="https://www.evernote.com/shard/s18/sh/e27e2c78-025e-4c1c-99c0-d8915f38fd85/4b8fc76bd5e2100d1a5517c65949b8eb" rel="nofollow noopener" target="_blank">A More Awesome Web: Features You’ve Always Wanted</a>

<ul>
<li>新しいFeatureの紹介とか</li>
<li>Screen sharingは面白そうだった</li>
</ul>
</li>
<li>
<a href="https://www.evernote.com/shard/s18/sh/a6b441d1-17ec-4845-890b-3340ddfa0154/1f114d1bc412e4d77154ca3e71e79fd7" rel="nofollow noopener" target="_blank">The Modern Workflow for Developing the Mobile Web</a>

<ul>
<li>Android向けWeb開発しなきゃいけない人向けの超基礎から始めるセッション

<ul>
<li>エミュレータ作るとこから</li>
</ul>
</li>
<li>多分途中で寝た</li>
</ul>
</li>
<li>
<a href="https://www.evernote.com/shard/s18/sh/bbcb65ac-4e99-4835-903b-4b369ce5e483/7079cd40c93027252c63a25cadcb128f" rel="nofollow noopener" target="_blank">Using Drive as the Storage Solution on Android</a>

<ul>
<li>なんでAndroid系列セッションじゃないのか不思議だけど</li>
<li>すげー便利そう</li>
<li>ただまぁ、Google Play Service のCloudSaveで間に合っちゃうことが多そうだ…</li>
</ul>
</li>
<li>
<a href="https://www.evernote.com/shard/s18/sh/df36e238-39ee-4952-a25a-527ad5386eae/50f59c77662cbe749b8777bf24bddf98" rel="nofollow noopener" target="_blank">Web Components: A Tectonic Shift for Web Development</a>

<ul>
<li>ShadowDOM, HTML Templates, Custom Elements, HTML imports, とか</li>
<li>これは超すごい！！はやくこれが広く使えるようになってほしい</li>
<li>AngularJSユーザは、多分すごいすんなりとこれの嬉しさが理解できると思う</li>
</ul>
</li>
<li>
<a href="https://www.evernote.com/shard/s18/sh/aece859e-e96d-4bab-9bd6-b88ab9c79d08/a911009cfabeb5e7ae40754bd79d81b9" rel="nofollow noopener" target="_blank">Web Components in Action</a>

<ul>
<li>WebComponents のショーケース的な</li>
<li>Polyfill ライブラリがあるよーって話</li>
<li>途中で寝た</li>
</ul>
</li>
<li>
<a href="https://www.evernote.com/shard/s18/sh/f62c17ab-492f-461e-8be3-f88396c49cbf/6546e84fd43fe35cb6edb6f6d8fdaa0f" rel="nofollow noopener" target="_blank">Clientside Package Management: Less Work, More Awesome</a>

<ul>
<li>bower, npm, grunt の話</li>
<li>bower に軸足が寄りすぎて、npmやgruntわからない人はわけわかんなかったんじゃないかと思うし、その2つが分かる人はきっとbowerも知ってる</li>
<li>bower v2 が出たのは知らんかった</li>
</ul>
</li>
<li>
<a href="https://www.evernote.com/shard/s18/sh/8ac3c8ad-e520-4700-899c-187976bcfcda/3a383a26b3196cb384ac7d06d11e93a9" rel="nofollow noopener" target="_blank">Real-time communication with WebRTC</a>

<ul>
<li>WebRTC関連セッション</li>
<li>どういうものなのかサクッと理解できたし、知らない事も結構紹介されていてすごいよかった</li>
</ul>
</li>
<li>
<a href="https://www.evernote.com/shard/s18/sh/fdc7959f-c877-4fa6-a102-b36aecc27aea/cb54f729b85c5cfb4eee8a47e333e946" rel="nofollow noopener" target="_blank">Developing For Glass</a>

<ul>
<li>事前に予習していったことがほとんどだった</li>
<li>既に先んじてアプリ開発していたサードパーティ製アプリの事例紹介があったのは大変よかった</li>
</ul>
</li>
<li>
<a href="https://www.evernote.com/shard/s18/sh/f43c4db1-13d4-41f8-87af-7063b4d0dad9/00bd7c167aafbdc7e911c7da52593d73" rel="nofollow noopener" target="_blank">Voiding Your Warranty: Hacking Glass</a>

<ul>
<li>保証なんかいらんから好きに遊ばせろーーーばりばりーー！！</li>
<li>なんかRootとらなくても好きなapk入れて起動させて遊べることが判明して、それはかなりの収穫だった</li>
<li>このセッションの入り口で入場者数数えてたのでなんかくれるのかなと期待してたけどなんもなくてちょっとがっかり</li>
</ul>
</li>
<li>
<a href="https://www.evernote.com/shard/s18/sh/02b55dd1-24b8-4985-8d7b-9ab38e31bbbf/7c52d83d2539bb2503d9448b15b8cb08" rel="nofollow noopener" target="_blank">Selling physical goods on Android with Google Wallet Instant Buy</a>

<ul>
<li>物理的な商品をAndroidアプリ上で販売するためのInstant Buyの紹介</li>
<li>かなり良さそう なんとGoogleが手数料取らない！Feeなし！</li>
<li>まだLimited availabilityです</li>
<li>#なんなんかわいい グッズ売りが捗るね</li>
</ul>
</li>
</ul>

<p>弊社の<a href="http://tech.topgate.co.jp/seminar/2013-05-31" rel="nofollow noopener" target="_blank">IO報告セミナー</a>もよろしくね！(宣伝</p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>vvakameさんの<br />6位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>28</kbd>
		<a target="_blank" href="https://qiita.com/vvakame/items/d308b5d69d7b71dca470">TypeScript 0.9.5 breaking change!</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-12-10 01:31:53</center>
	</td>
	<td style="width:200px;">
		@vvakame<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/13283/profile-images/1473682747">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[TypeScript]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>TypeScript 0.9.5 が先日リリースされまして。<br>
そんでまぁ、breaking change(非互換な変更)があるわけですよ。<br>
しょうがないね、1.0 にまだなってないもんね。</p>

<p><a href="https://typescript.codeplex.com/wikipage?title=Known%20breaking%20changes%20between%200.8%20and%200.9&amp;referringTitle=Documentation" rel="nofollow noopener" target="_blank">こちら</a>が 0.9.1 から 0.9.5 への非互換な変更点でございます。<br>
この記事では、この非互換な変更点を解説し、0.9.1.1向けに書いているプロダクトの移行支援がしたいなぁ、という次第です。<br>
また、今後TypeScriptを使っていく上でのアドバイスとして、 —noImplicitAny オプションは必ず使うようにしましょう、ということです。<br>
これを使って開発していれば、今回の非互換な変更も引っかからずにスルーできるものが少しあります。今後、制約は増え、より堅牢なコードを自然と書けるような仕様になっていくと思いますが、その時のための転ばぬ先の杖としても役に立つと断言できます。</p>

<p>で、TypeScriptでコードを書くには、やはりJavaScriptのライブラリもバリバリ使うので、型定義ファイル(.d.ts)が必要になります。<br>
この型定義ファイルを集積しているサイトで、もっともよく使われているのが<a href="https://github.com/borisyankov/DefinitelyTyped" rel="nofollow noopener" target="_blank">DefinitelyTyped</a>というリポジトリになります。<br>
<a href="http://blogs.msdn.com/b/typescript/archive/2013/12/05/announcing-typescript-0-9-5.aspx" rel="nofollow noopener" target="_blank">TypeScript 0.9.5リリースの公式ブログ</a>でも言及されています。</p>

<p>12月24日によーやっとmasterが0.9.5になりました。<br>
Igorbekさんの活躍によるところが大です。ありがとうございました！<br>
<del><br>
んですが、ちょっと問題があって、0.9.5対応が<a href="https://github.com/borisyankov/DefinitelyTyped/pull/1385" rel="nofollow noopener" target="_blank">なかなか進んでいない</a>んです。<br>
現在のmasterブランチはTravis-CI上で 0.9.1.1 でテストされています。0.9.5対応は switch-0.9.5 ブランチで行われていて、Travis-CIも0.9.5で動いています。<br>
全てのテストが通ったら文句なくmasterにマージ！と相成るわけですので、こちらのブランチにpull requestが欲しいわけです。<br>
</del><br>
<del><br>
要約：0.9.5の対応方法教えてやっから DefinitelyTyped の switch-0.9.5 ブランチにpull requestくれよ！Travis-CI全部通るようにしてくれよー！<br>
</del></p>

<p>ちなみに、筆者(わかめ)はTravis-CIのためのテストランナー周りを書きなおしてしつこくpull requestを送っていたら見るのに飽きたのか、最近コミッタにしてもらいました。<br>
なので、GitHub上で議論にならない限りは、Twitterで日本語でサポートもできるのでお気軽にお問い合わせください。GitHub上で議論になったら頑張って英語で戦ってください(辛</p>

<p>もし、筆者の理解に誤りがあった場合は早めに教えていただけると大変喜びます。:;(∩´﹏`∩);:</p>

<h2>
<span id="genericsとかの型引数のデフォが-any-から--になった" class="fragment"></span><a href="#generics%E3%81%A8%E3%81%8B%E3%81%AE%E5%9E%8B%E5%BC%95%E6%95%B0%E3%81%AE%E3%83%87%E3%83%95%E3%82%A9%E3%81%8C-any-%E3%81%8B%E3%82%89--%E3%81%AB%E3%81%AA%E3%81%A3%E3%81%9F"><i class="fa fa-link"></i></a>Genericsとかの型引数のデフォが any から {} になった</h2>

<h3>
<span id="今まで" class="fragment"></span><a href="#%E4%BB%8A%E3%81%BE%E3%81%A7"><i class="fa fa-link"></i></a>今まで</h3>

<p>型引数がうまく推論できない場合、any が推論されていた。</p>

<h3>
<span id="これから" class="fragment"></span><a href="#%E3%81%93%E3%82%8C%E3%81%8B%E3%82%89"><i class="fa fa-link"></i></a>これから</h3>

<p>型引数がうまく推論できない場合、{} が推論される。<br>
{} は var a = {}; とした時の typeof a と同じもので、要するに何もプロパティを持たないので自由度がアホみたいに低い型を指します。</p>

<p>コレについて0.9.1.1と0.9.5でどういう差があるかわかるコードを作ってみようとしたのですが、案外0.9.1.1でもちゃんと弾いてくれちゃって思うようにいかないというね…。</p>

<h2>
<span id="オブジェクトに対する明示的なインデクサアクセスを許さないようにした" class="fragment"></span><a href="#%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AB%E5%AF%BE%E3%81%99%E3%82%8B%E6%98%8E%E7%A4%BA%E7%9A%84%E3%81%AA%E3%82%A4%E3%83%B3%E3%83%87%E3%82%AF%E3%82%B5%E3%82%A2%E3%82%AF%E3%82%BB%E3%82%B9%E3%82%92%E8%A8%B1%E3%81%95%E3%81%AA%E3%81%84%E3%82%88%E3%81%86%E3%81%AB%E3%81%97%E3%81%9F"><i class="fa fa-link"></i></a>オブジェクトに対する明示的なインデクサアクセスを許さないようにした</h2>

<h3>
<span id="今まで-1" class="fragment"></span><a href="#%E4%BB%8A%E3%81%BE%E3%81%A7-1"><i class="fa fa-link"></i></a>今まで</h3>

<p>Object(ここではEnum)に対してインデクサを使ってデータにアクセスできていました。<br>
この場合だと、Colorsの定義に<code>test</code>は含まれないため<code>undefined</code>が得られます。</p>

<div class="code-frame" data-lang="typescript">
<div class="code-lang"><span class="bold">enum.ts</span></div>
<div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">useEnum</span><span class="p">(</span><span class="nx">e</span><span class="o">:</span> <span class="p">{</span> <span class="p">[</span><span class="nx">idx</span>: <span class="kt">string</span><span class="p">]</span><span class="o">:</span> <span class="nx">any</span><span class="p">})</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">e</span><span class="p">[</span><span class="s2">"test"</span><span class="p">];</span>
<span class="p">}</span>

<span class="kr">enum</span> <span class="nx">Colors</span> <span class="p">{</span> <span class="nx">Blue</span><span class="p">,</span> <span class="nx">Green</span><span class="p">,</span> <span class="nx">Orange</span> <span class="p">}</span>

<span class="nx">useEnum</span><span class="p">(</span><span class="nx">Colors</span><span class="p">);</span>  <span class="c1">//errors in 0.9.5, but has no error in 0.9.1.1</span>
</pre></div>
</div>

<h3>
<span id="これから-1" class="fragment"></span><a href="#%E3%81%93%E3%82%8C%E3%81%8B%E3%82%89-1"><i class="fa fa-link"></i></a>これから</h3>

<p>コード内の型カバレッジを強化するために使えなくなりました。型カバレッジって表現すげーな。</p>

<p>ちなみに、以下のようにすれば一応回避することができます。</p>

<div class="code-frame" data-lang="typescript">
<div class="code-lang"><span class="bold">enum.ts</span></div>
<div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">useEnum</span><span class="p">(</span><span class="nx">e</span><span class="o">:</span> <span class="p">{</span> <span class="p">[</span><span class="nx">idx</span>: <span class="kt">string</span><span class="p">]</span><span class="o">:</span> <span class="nx">any</span><span class="p">})</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">e</span><span class="p">[</span><span class="s2">"test"</span><span class="p">];</span>
<span class="p">}</span>

<span class="kr">enum</span> <span class="nx">Colors</span> <span class="p">{</span> <span class="nx">Blue</span><span class="p">,</span> <span class="nx">Green</span><span class="p">,</span> <span class="nx">Orange</span> <span class="p">}</span>

<span class="nx">useEnum</span><span class="p">(</span><span class="o">&lt;</span><span class="nx">any</span><span class="o">&gt;</span><span class="nx">Colors</span><span class="p">);</span>  <span class="c1">// まぁ any にしてしまえば…</span>
</pre></div>
</div>

<p>こういう方法もあります。e を Colors そのものにしてしまうわけですね。<br>
e: Colors にすると、Colors全体ではなくColorsの1要素しか受け取れません。</p>

<div class="code-frame" data-lang="typescript">
<div class="code-lang"><span class="bold">enum.ts</span></div>
<div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">useEnum</span><span class="p">(</span><span class="nx">e</span>: <span class="kt">typeof</span> <span class="nx">Colors</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">e</span><span class="p">[</span><span class="s2">"test"</span><span class="p">];</span>
<span class="p">}</span>

<span class="kr">enum</span> <span class="nx">Colors</span> <span class="p">{</span> <span class="nx">Blue</span><span class="p">,</span> <span class="nx">Green</span><span class="p">,</span> <span class="nx">Orange</span> <span class="p">}</span>

<span class="nx">useEnum</span><span class="p">(</span><span class="nx">Colors</span><span class="p">);</span>  <span class="c1">// まぁ any にしてしまえば…</span>
</pre></div>
</div>

<p>TypeScriptの型推論さんはかなり頑張ってくれるので、<code>”test”</code>の部分を<code>”Blue”</code>とか、ホントに含まれている値にすると、正しくNumberと推論してくれます。<code>”test”</code>だとColorsに存在しないので any (undefined) になります。</p>

<h2>
<span id="any-が--のサブタイプではないようにした" class="fragment"></span><a href="#any-%E3%81%8C--%E3%81%AE%E3%82%B5%E3%83%96%E3%82%BF%E3%82%A4%E3%83%97%E3%81%A7%E3%81%AF%E3%81%AA%E3%81%84%E3%82%88%E3%81%86%E3%81%AB%E3%81%97%E3%81%9F"><i class="fa fa-link"></i></a>any が {} のサブタイプではないようにした</h2>

<h3>
<span id="今まで-2" class="fragment"></span><a href="#%E4%BB%8A%E3%81%BE%E3%81%A7-2"><i class="fa fa-link"></i></a>今まで</h3>

<p>any は {} のサブタイプになることができたようです。<br>
any はTypeScriptの仕様上、全ての型のスーパークラスとされているはずなのですが、any は {} のサブタイプであり、スーパークラスでもある、って、微妙に倒錯してませんかね…。</p>

<p>ともあれ、以下のようなコードが許されていました。</p>

<div class="code-frame" data-lang="typescript">
<div class="code-lang"><span class="bold">sample.ts</span></div>
<div class="highlight"><pre><span></span><span class="kr">interface</span> <span class="nx">MyOptionals</span> <span class="p">{</span>
    <span class="nx">optional1?</span>: <span class="kt">number</span><span class="p">;</span>
    <span class="nx">optional2?</span>: <span class="kt">boolean</span><span class="p">;</span>
<span class="p">}</span>

<span class="kr">interface</span> <span class="nx">MyInterface</span> <span class="p">{</span>
    <span class="nx">call</span><span class="p">()</span><span class="o">:</span> <span class="nx">MyOptionals</span><span class="p">;</span>
<span class="p">}</span> 

<span class="kr">class</span> <span class="nx">MyClass</span> <span class="kr">implements</span> <span class="nx">MyInterface</span> <span class="p">{</span> 
    <span class="nx">call</span><span class="p">()</span><span class="o">:</span> <span class="nx">any</span> <span class="p">{</span>
        <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>

<p>MyClassはMyInterfaceを実装していることになっています。</p>

<h3>
<span id="これから-2" class="fragment"></span><a href="#%E3%81%93%E3%82%8C%E3%81%8B%E3%82%89-2"><i class="fa fa-link"></i></a>これから</h3>

<p>これからはダメです！</p>

<div class="code-frame" data-lang="typescript">
<div class="code-lang"><span class="bold">sample.ts</span></div>
<div class="highlight"><pre><span></span><span class="kr">interface</span> <span class="nx">MyOptionals</span> <span class="p">{</span>
    <span class="nx">optional1?</span>: <span class="kt">number</span><span class="p">;</span>
    <span class="nx">optional2?</span>: <span class="kt">boolean</span><span class="p">;</span>
<span class="p">}</span>

<span class="kr">interface</span> <span class="nx">MyInterface</span> <span class="p">{</span>
    <span class="nx">call</span><span class="p">()</span><span class="o">:</span> <span class="nx">MyOptionals</span><span class="p">;</span>
<span class="p">}</span> 

<span class="c1">// MyClass does not implement MyInterface </span>
<span class="kr">class</span> <span class="nx">MyClass</span> <span class="kr">implements</span> <span class="nx">MyInterface</span> <span class="p">{</span> 
    <span class="nx">call</span><span class="p">()</span><span class="o">:</span> <span class="nx">any</span> <span class="p">{</span>
        <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>

<p>ちなみにこうするとコンパイル通ります(通るけど実用的ではない…</p>

<div class="code-frame" data-lang="typescript">
<div class="code-lang"><span class="bold">empty.ts</span></div>
<div class="highlight"><pre><span></span><span class="kr">class</span> <span class="nx">MyClass</span> <span class="kr">implements</span> <span class="nx">MyInterface</span> <span class="p">{</span> 
    <span class="nx">call</span><span class="p">()</span><span class="o">:</span> <span class="p">{}</span> <span class="p">{</span>
        <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>

<p>具体的な事例として以下のようなパターンがある。</p>

<div class="code-frame" data-lang="typescript">
<div class="code-lang"><span class="bold">lib.d.ts</span></div>
<div class="highlight"><pre><span></span><span class="kr">interface</span> <span class="nx">DOMStringMap</span> <span class="p">{</span>
<span class="p">}</span>

<span class="kr">interface</span> <span class="nx">HTMLElement</span> <span class="p">{</span>
    <span class="nx">dataset</span>: <span class="kt">DOMStringMap</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>

<div class="code-frame" data-lang="typescript">
<div class="code-lang"><span class="bold">swipeview.d.ts</span></div>
<div class="highlight"><pre><span></span><span class="kr">interface</span> <span class="nx">PageHTMLElement</span> <span class="kr">extends</span> <span class="nx">HTMLElement</span> <span class="p">{</span>
    <span class="nx">dataset</span>: <span class="kt">any</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>

<p>えぇい、lib.d.ts は組み込みだからいじくれないし、どうせいっちゅーんじゃ…！！</p>

<h2>
<span id="オーバーロードの解決規則が変わった" class="fragment"></span><a href="#%E3%82%AA%E3%83%BC%E3%83%90%E3%83%BC%E3%83%AD%E3%83%BC%E3%83%89%E3%81%AE%E8%A7%A3%E6%B1%BA%E8%A6%8F%E5%89%87%E3%81%8C%E5%A4%89%E3%82%8F%E3%81%A3%E3%81%9F"><i class="fa fa-link"></i></a>オーバーロードの解決規則が変わった</h2>

<h3>
<span id="今まで-3" class="fragment"></span><a href="#%E4%BB%8A%E3%81%BE%E3%81%A7-3"><i class="fa fa-link"></i></a>今まで</h3>

<p>超頑張って一番一致するの探してた(っぽい</p>

<h3>
<span id="これから-3" class="fragment"></span><a href="#%E3%81%93%E3%82%8C%E3%81%8B%E3%82%89-3"><i class="fa fa-link"></i></a>これから</h3>

<p>純粋に字句的に上にあるものから順にマッチするか試していって、最初に見つかったやつにマッチしたことにする。<br>
そのため、specialized signatureが既存のままだと動かなかったりする。</p>

<div class="code-frame" data-lang="typescript"><div class="highlight"><pre><span></span><span class="kr">class</span> <span class="nx">HTMLElement</span> <span class="p">{}</span>
<span class="kr">class</span> <span class="nx">HTMLSpanElement</span> <span class="kr">extends</span> <span class="nx">HTMLElement</span> <span class="p">{</span>
    <span class="nx">iAmSpan</span><span class="p">()</span><span class="o">:</span><span class="k">void</span><span class="p">{}</span>
<span class="p">}</span>

<span class="kr">declare</span> <span class="kr">class</span> <span class="nx">Document</span> <span class="p">{</span>
    <span class="c1">// “span” が string の下にあると、先にstringにマッチしちゃうので “span” の定義のほうが必ず上にこないといけない</span>
    <span class="nx">createElement</span><span class="p">(</span><span class="nx">tag</span><span class="o">:</span> <span class="s2">"span"</span><span class="p">)</span><span class="o">:</span><span class="nx">HTMLSpanElement</span><span class="p">;</span>
    <span class="nx">createElement</span><span class="p">(</span><span class="nx">tag</span>: <span class="kt">string</span><span class="p">)</span><span class="o">:</span><span class="nx">HTMLElement</span><span class="p">;</span>
<span class="p">}</span>
</pre></div></div>

<p>で、シンプルでわかりやすくて良いんだけど、Igorbekさんが<a href="https://typescript.codeplex.com/discussions/472172" rel="nofollow noopener" target="_blank">言及している</a>通り、複数の型定義ファイルから1つのinterfaceをいじくった場合に、どう頑張っても有効にできないシグニチャが出てきて困る… みたいな事例があるので、これはちょっと直して欲しい感じあります。</p>

<p>追記：議論のかいあり、1.0 では後からmergeしたインタフェースの定義のほうが優先度が高く扱われるように仕様が修正されることになり、問題は解決されそうです( <a href="https://typescript.codeplex.com/wikipage?title=Known%20breaking%20changes%20between%200.8%20and%200.9" class="autolink" rel="nofollow noopener" target="_blank">https://typescript.codeplex.com/wikipage?title=Known%20breaking%20changes%20between%200.8%20and%200.9</a> )。</p>

<h2>
<span id="rest-argument可変長引数を使った定義の上書き規則が変わった" class="fragment"></span><a href="#rest-argument%E5%8F%AF%E5%A4%89%E9%95%B7%E5%BC%95%E6%95%B0%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%9F%E5%AE%9A%E7%BE%A9%E3%81%AE%E4%B8%8A%E6%9B%B8%E3%81%8D%E8%A6%8F%E5%89%87%E3%81%8C%E5%A4%89%E3%82%8F%E3%81%A3%E3%81%9F"><i class="fa fa-link"></i></a>rest argument(可変長引数)を使った定義の上書き規則が変わった</h2>

<h3>
<span id="今まで-4" class="fragment"></span><a href="#%E4%BB%8A%E3%81%BE%E3%81%A7-4"><i class="fa fa-link"></i></a>今まで</h3>

<p>こういうコードが許されていた。元の定義は全て可変長引数なので、1番目の引数も2番目の引数も、渡されない(undefinedになる)可能性がありました。</p>

<div class="code-frame" data-lang="typescript">
<div class="code-lang"><span class="bold">rest.ts</span></div>
<div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">myFunction</span><span class="p">(</span><span class="nx">f</span><span class="o">:</span> <span class="p">(...</span><span class="nx">args</span>: <span class="kt">string</span><span class="p">[])</span> <span class="o">=&gt;</span> <span class="k">void</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>

<span class="nx">myFunction</span><span class="p">((</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="p">});</span> <span class="c1">//0.9.1.1</span>
</pre></div>
</div>

<h3>
<span id="これから-4" class="fragment"></span><a href="#%E3%81%93%E3%82%8C%E3%81%8B%E3%82%89-4"><i class="fa fa-link"></i></a>これから</h3>

<p>1番目の引数と2番目の引数が省略されうる(undefinedになる)可能性を省略せずコード上に表明しないといけないようになりました。</p>

<div class="code-frame" data-lang="typescript">
<div class="code-lang"><span class="bold">rest.ts</span></div>
<div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">myFunction</span><span class="p">(</span><span class="nx">f</span><span class="o">:</span> <span class="p">(...</span><span class="nx">args</span>: <span class="kt">string</span><span class="p">[])</span> <span class="o">=&gt;</span> <span class="k">void</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>

<span class="nx">myFunction</span><span class="p">((</span><span class="nx">x</span><span class="o">?</span><span class="p">,</span> <span class="nx">y</span><span class="o">?</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="p">});</span> <span class="c1">//0.9.5</span>
</pre></div>
</div>

<p>追記。<br>
basaratの<a href="https://github.com/borisyankov/DefinitelyTyped/pull/1435" rel="nofollow noopener" target="_blank">提案</a> では、今後こういう時は単に <code>f: Function</code> としたほうがいいだろう。という意見。なるほど確かに。</p>

<h2>
<span id="arrow-functionの即値評価の仕様をes6にあわせた" class="fragment"></span><a href="#arrow-function%E3%81%AE%E5%8D%B3%E5%80%A4%E8%A9%95%E4%BE%A1%E3%81%AE%E4%BB%95%E6%A7%98%E3%82%92es6%E3%81%AB%E3%81%82%E3%82%8F%E3%81%9B%E3%81%9F"><i class="fa fa-link"></i></a>Arrow Functionの即値評価の仕様をES6にあわせた</h2>

<p>TypeScriptはECMAScript 262 5.1 をベースにした言語ですが、一部ES6の仕様も取り込んでいます。<br>
そのため、あちらさんの変更に追従したようです。<br>
アロー関数式を使った時に即値評価(即実行)する時の仕様ですね。<br>
JavaScriptでは<code>(function(){ return 5; })()</code>と書くことが必須だったので、まぁ今まで通りで混乱がなくていいかな、という印象です。</p>

<div class="code-frame" data-lang="typescript">
<div class="code-lang"><span class="bold">arrow.ts</span></div>
<div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">f1</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="k">return</span> <span class="mi">5</span> <span class="p">}();</span>  <span class="c1">// Error now, used to be OK in 0.9.1.1</span>
<span class="kd">var</span> <span class="nx">f2</span> <span class="o">=</span> <span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="k">return</span> <span class="mi">5</span> <span class="p">})();</span> <span class="c1">// OK in 0.9.1.1 and 0.9.5</span>
</pre></div>
</div>

<h2>
<span id="--noresolveと外部モジュールのインポートが同時にできなくなった" class="fragment"></span><a href="#--noresolve%E3%81%A8%E5%A4%96%E9%83%A8%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB%E3%81%AE%E3%82%A4%E3%83%B3%E3%83%9D%E3%83%BC%E3%83%88%E3%81%8C%E5%90%8C%E6%99%82%E3%81%AB%E3%81%A7%E3%81%8D%E3%81%AA%E3%81%8F%E3%81%AA%E3%81%A3%E3%81%9F"><i class="fa fa-link"></i></a>--noResolveと外部モジュールのインポートが同時にできなくなった</h2>

<p>外部モジュールっていうのは <code>declare module “hoge” {</code> みたいな定義の仕方してたやつですね多分。<br>
—noResolveオプションと組み合わせた時に正しいコード生成を行えるようにするためにこの制約が追加されたようです。<br>
—noResolve 使ったことない…。</p>

<h2>
<span id="終わり" class="fragment"></span><a href="#%E7%B5%82%E3%82%8F%E3%82%8A"><i class="fa fa-link"></i></a>終わり</h2>

<p>以上です！ね？簡単でしょう？<br>
みんなも頑張って .d.ts のアップデートしてくださいなんです＞＜</p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>vvakameさんの<br />7位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>7</kbd>
		<a target="_blank" href="https://qiita.com/vvakame/items/8f609ca812bc4bb19d24">孤独のHaskell 第三回 わかめログ</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-09-14 01:15:50</center>
	</td>
	<td style="width:200px;">
		@vvakame<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/13283/profile-images/1473682747">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Haskell]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p><a href="http://www.zusaar.com/event/1025013" class="autolink" rel="nofollow noopener" target="_blank">http://www.zusaar.com/event/1025013</a></p>

<h1>
<span id="準備" class="fragment"></span><a href="#%E6%BA%96%E5%82%99"><i class="fa fa-link"></i></a>準備</h1>

<p><a href="https://gist.github.com/vvakame/4168457" rel="nofollow noopener" target="_blank">環境構築の仕方</a></p>

<p>uninstall-hs で古いの消して、 <a href="http://www.haskell.org/platform/mac.html" class="autolink" rel="nofollow noopener" target="_blank">http://www.haskell.org/platform/mac.html</a> から新しいの入れて、cabal install ghc-mod した。</p>

<h1>
<span id="目標" class="fragment"></span><a href="#%E7%9B%AE%E6%A8%99"><i class="fa fa-link"></i></a>目標</h1>

<p>以下のコードと同様のHaskellコードを書く。</p>

<div class="code-frame" data-lang="java"><div class="highlight"><pre><span></span><span class="kd">class</span> <span class="nc">Temp</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">){</span>
    <span class="n">Optional</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">redbull</span> <span class="o">=</span> <span class="n">Optional</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="mi">200</span><span class="o">);</span>
    <span class="n">Optional</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">water</span> <span class="o">=</span> <span class="n">Optional</span><span class="o">.</span><span class="na">empty</span><span class="o">();</span>
    <span class="c1">// Optional&lt;Integer&gt; water = Optional.of(140);</span>
    <span class="n">Optional</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">sandwich</span> <span class="o">=</span> <span class="n">Optional</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="mi">250</span><span class="o">);</span>

    <span class="n">List</span><span class="o">&lt;</span><span class="n">Optional</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;&gt;</span> <span class="n">shoppingList</span> <span class="o">=</span> <span class="n">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="n">redbull</span><span class="o">,</span> <span class="n">sandwich</span><span class="o">,</span> <span class="n">water</span><span class="o">);</span>
    <span class="n">Optional</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">total</span> <span class="o">=</span> <span class="n">shoppingList</span><span class="o">.</span><span class="na">stream</span><span class="o">().</span><span class="na">reduce</span><span class="o">(</span>
      <span class="n">Optional</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="mi">0</span><span class="o">),</span> <span class="c1">// 最初は0円からカウントしていく</span>
      <span class="o">(</span><span class="n">p</span><span class="o">,</span> <span class="n">c</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="n">p</span><span class="o">.</span><span class="na">flatMap</span><span class="o">(</span><span class="n">v1</span> <span class="o">-&gt;</span> <span class="n">c</span><span class="o">.</span><span class="na">flatMap</span><span class="o">(</span><span class="n">v2</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">v1</span> <span class="o">+</span> <span class="n">v2</span><span class="o">)))</span>
      <span class="c1">// 型注釈をつけるとこんな意味</span>
      <span class="c1">// (Optional&lt;Integer&gt; p, Optional&lt;Integer&gt; c) -&gt; p.flatMap((Integer v1) -&gt; c.flatMap((Integer v2) -&gt; Optional.of(v1 + v2)))</span>
    <span class="o">);</span>

    <span class="k">if</span> <span class="o">(</span><span class="n">total</span><span class="o">.</span><span class="na">isPresent</span><span class="o">())</span> <span class="o">{</span>
      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"全部買えました。合計"</span> <span class="o">+</span> <span class="n">total</span><span class="o">.</span><span class="na">get</span><span class="o">()</span> <span class="o">+</span> <span class="s">"円でした"</span><span class="o">);</span>
    <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"何かが売り切れていたので何も買ってきませんでした…"</span><span class="o">);</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></div></div>

<h1>
<span id="作業" class="fragment"></span><a href="#%E4%BD%9C%E6%A5%AD"><i class="fa fa-link"></i></a>作業</h1>

<h2>
<span id="モナドわすれた" class="fragment"></span><a href="#%E3%83%A2%E3%83%8A%E3%83%89%E3%82%8F%E3%81%99%E3%82%8C%E3%81%9F"><i class="fa fa-link"></i></a>モナドわすれた</h2>

<div class="code-frame" data-lang="haskell"><div class="highlight"><pre><span></span><span class="kr">do</span>  <span class="n">x</span> <span class="ow">&lt;-</span> <span class="n">mx</span>
    <span class="n">y</span> <span class="ow">&lt;-</span> <span class="n">my</span>
    <span class="n">return</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span>
</pre></div></div>

<p>的なの考えた時に</p>

<div class="code-frame" data-lang="haskell"><div class="highlight"><pre><span></span><span class="nf">mx</span> <span class="o">&gt;&gt;=</span> <span class="p">(</span><span class="nf">\</span><span class="n">x</span> <span class="ow">-&gt;</span> <span class="n">my</span> <span class="o">&gt;&gt;=</span> <span class="p">(</span><span class="nf">\</span><span class="n">y</span> <span class="ow">-&gt;</span> <span class="n">return</span> <span class="o">$</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span><span class="p">))</span>
</pre></div></div>

<p>と等価だよと教えてもらった。ひびのさんめっちゃ優しい。</p>

<h2>
<span id="まずは型から考える" class="fragment"></span><a href="#%E3%81%BE%E3%81%9A%E3%81%AF%E5%9E%8B%E3%81%8B%E3%82%89%E8%80%83%E3%81%88%E3%82%8B"><i class="fa fa-link"></i></a>まずは型から考える</h2>

<p>notogawa さんが第一回の後に<a href="http://d.hatena.ne.jp/notogawa/20121201/1354389374" rel="nofollow noopener" target="_blank">書いてくれた</a>通りにやる。</p>

<div class="code-frame" data-lang="haskell"><div class="highlight"><pre><span></span><span class="nf">shoppingList</span> <span class="ow">::</span> <span class="p">[</span><span class="kt">Maybe</span> <span class="kt">Integer</span><span class="p">]</span>
<span class="nf">shoppingList</span> <span class="ow">=</span> <span class="p">[</span><span class="kt">Just</span> <span class="mi">200</span><span class="p">,</span> <span class="kt">Nothing</span><span class="p">,</span> <span class="kt">Just</span> <span class="mi">250</span><span class="p">]</span>
</pre></div></div>

<p>これを、Maybe Integer に変換できれば終わり。<br>
つまり [Maybe Integer] -&gt; Maybe Integer にしたい。<br>
調べるのは<a href="http://www.haskell.org/hoogle/" rel="nofollow noopener" target="_blank">Hoogle</a>使う。<br>
たぶん、foldl とか使う？<br>
Just 0 &amp; [Just 200, Nothing, Just 250] → Just 200 &amp; [Nothing, Just 250] → Nothing &amp; [Just 250] → Nothing []<br>
と畳み込んでいけばなんとかなるに違いない。(Java8の書き方と同じ)</p>

<p>[Maybe Integer] -&gt; Maybe Integer に変換する関数ないかなーと [Maybe a] -&gt; Maybe a で調べる。msum というのを見つける。<br>
MonadPlus m =&gt; [m a] -&gt; m a なので、それっぽい。しかしMonadPlus のMaybeの実装を見るとそれっぽくない。</p>

<div class="code-frame" data-lang="haskell"><div class="highlight"><pre><span></span><span class="kr">instance</span> <span class="kt">MonadPlus</span> <span class="kt">Maybe</span> <span class="kr">where</span>
   <span class="n">mzero</span> <span class="ow">=</span> <span class="kt">Nothing</span>

   <span class="kt">Nothing</span> <span class="p">`</span><span class="n">mplus</span><span class="p">`</span> <span class="n">ys</span>  <span class="ow">=</span> <span class="n">ys</span>
   <span class="n">xs</span>      <span class="p">`</span><span class="n">mplus</span><span class="p">`</span> <span class="n">_ys</span> <span class="ow">=</span> <span class="n">xs</span>
</pre></div></div>

<p>コレじゃないなー。となんとなく察して途方にくれる。</p>

<p>sequence で Monad m =&gt; [m a] -&gt; m [a] に出来るよとひびのさんに教えてもらった。</p>

<p>次は Monad m =&gt; m [a] -&gt; m a が欲しいなーと思った。<br>
m [a] -&gt; m a で調べてもなんかそれっぽいのがない。</p>

<p>tanakhさんから m [a] -&gt; m a は m 外すと [a] -&gt; a になるので、こういうのはmがFunctorなので持ち上げるためにはfmapが定番、と教わる。<br>
[a] -&gt; a はsumらしい。</p>

<p>なので fmap sum . sequence とすると [m a] -&gt; m a で当初の [Maybe Integer] -&gt; Maybe Integer にマッチするようになった。</p>

<p>fmap sum . sequence は (fmap sum) . (sequence) という結合順序。</p>

<p>(.) の型は (b -&gt; c) -&gt; (a -&gt; b) -&gt; (a -&gt; c) 、つまり関数を2つとって関数を返す関数だ。<br>
つまり、<br>
a は [m a]<br>
c は m a<br>
なので、b -&gt; c 、[m a] -&gt; m [a] は既に知っているので、 m [a] -&gt; m a が用意できれば a -&gt; c の関数に合成できる。<br>
b は m [a] が当てはまるので、 b -&gt; c は m [a] -&gt; m a だ。<br>
(.) (fmap sum) sequence を当てはめると<br>
この時<br>
sum は [a] -&gt; a で fmapが (a -&gt; b) -&gt; f a -&gt; f b なので<br>
Monad f =&gt; ([a] -&gt; a) -&gt; f [a] -&gt; f a と考えると型があう<br>
つまり、a → b → c の b は関数を部分適用して得られた関数だ。<br>
(ここの文章を後から読むとHaskellの難しい本に書いてある説明と同じようなものに見えてくるので文章で記述するの難しいんだなと悟る。)</p>

<p>まとめると Monad m =&gt; [m a] -&gt; m a<br>
fmap sum . sequence</p>

<h2>
<span id="java8-と同じ結果にしてみる" class="fragment"></span><a href="#java8-%E3%81%A8%E5%90%8C%E3%81%98%E7%B5%90%E6%9E%9C%E3%81%AB%E3%81%97%E3%81%A6%E3%81%BF%E3%82%8B"><i class="fa fa-link"></i></a>Java8 と同じ結果にしてみる</h2>

<div class="code-frame" data-lang="haskell"><div class="highlight"><pre><span></span><span class="nf">main</span> <span class="ow">::</span> <span class="kt">IO</span> <span class="nb">()</span>
<span class="nf">main</span> <span class="ow">=</span> <span class="n">putStrLn</span> <span class="o">$</span> <span class="n">resultText</span> <span class="o">$</span> <span class="n">calc</span> <span class="p">[</span><span class="kt">Just</span> <span class="mi">200</span><span class="p">,</span> <span class="kt">Nothing</span><span class="p">,</span> <span class="kt">Just</span> <span class="mi">250</span><span class="p">]</span>

<span class="nf">resultText</span> <span class="ow">::</span> <span class="kt">Show</span> <span class="n">a</span> <span class="ow">=&gt;</span> <span class="kt">Maybe</span> <span class="n">a</span> <span class="ow">-&gt;</span> <span class="kt">String</span>
<span class="nf">resultText</span> <span class="p">(</span><span class="kt">Just</span> <span class="n">n</span><span class="p">)</span> <span class="ow">=</span> <span class="s">"全部買えました。合計"</span> <span class="o">++</span> <span class="p">(</span><span class="n">show</span> <span class="n">n</span><span class="p">)</span> <span class="o">++</span> <span class="s">"円でした"</span>
<span class="nf">resultText</span> <span class="kt">Nothing</span>  <span class="ow">=</span> <span class="s">"何かが売り切れていたので何も買ってきませんでした…"</span>

<span class="nf">calc</span> <span class="ow">::</span> <span class="p">[</span><span class="kt">Maybe</span> <span class="kt">Integer</span><span class="p">]</span> <span class="ow">-&gt;</span> <span class="kt">Maybe</span> <span class="kt">Integer</span>
<span class="nf">calc</span> <span class="ow">=</span> <span class="n">fmap</span> <span class="n">sum</span> <span class="o">.</span> <span class="n">sequence</span>
</pre></div></div>

<p>わー、解法が全然違う。<br>
どこでこの差がついたし…。Javaで同じ書き方ができる気がしないぞ！</p>

<h2>
<span id="java8-と同じやり方にしてみる" class="fragment"></span><a href="#java8-%E3%81%A8%E5%90%8C%E3%81%98%E3%82%84%E3%82%8A%E6%96%B9%E3%81%AB%E3%81%97%E3%81%A6%E3%81%BF%E3%82%8B"><i class="fa fa-link"></i></a>Java8 と同じやり方にしてみる</h2>

<div class="code-frame" data-lang="haskell"><div class="highlight"><pre><span></span><span class="nf">main</span> <span class="ow">::</span> <span class="kt">IO</span> <span class="nb">()</span>
<span class="nf">main</span> <span class="ow">=</span> <span class="n">putStrLn</span> <span class="o">$</span> <span class="n">resultText</span> <span class="o">$</span> <span class="n">calc'</span> <span class="p">[</span><span class="kt">Just</span> <span class="mi">200</span><span class="p">,</span> <span class="kt">Nothing</span><span class="p">,</span> <span class="kt">Just</span> <span class="mi">250</span><span class="p">]</span>

<span class="nf">resultText</span> <span class="ow">::</span> <span class="kt">Show</span> <span class="n">a</span> <span class="ow">=&gt;</span> <span class="kt">Maybe</span> <span class="n">a</span> <span class="ow">-&gt;</span> <span class="kt">String</span>
<span class="nf">resultText</span> <span class="p">(</span><span class="kt">Just</span> <span class="n">n</span><span class="p">)</span> <span class="ow">=</span> <span class="s">"全部買えました。合計"</span> <span class="o">++</span> <span class="p">(</span><span class="n">show</span> <span class="n">n</span><span class="p">)</span> <span class="o">++</span> <span class="s">"円でした"</span>
<span class="nf">resultText</span> <span class="kt">Nothing</span>  <span class="ow">=</span> <span class="s">"何かが売り切れていたので何も買ってきませんでした…"</span>

<span class="nf">calc'</span> <span class="ow">::</span> <span class="p">[</span><span class="kt">Maybe</span> <span class="kt">Integer</span><span class="p">]</span> <span class="ow">-&gt;</span> <span class="kt">Maybe</span> <span class="kt">Integer</span>
<span class="nf">calc'</span> <span class="ow">=</span> <span class="n">foldr</span> <span class="p">(</span><span class="nf">\</span><span class="n">p</span> <span class="n">c</span> <span class="ow">-&gt;</span> <span class="n">p</span> <span class="o">&gt;&gt;=</span> <span class="p">(</span><span class="nf">\</span><span class="n">v1</span> <span class="ow">-&gt;</span> <span class="n">c</span> <span class="o">&gt;&gt;=</span> <span class="p">(</span><span class="nf">\</span><span class="n">v2</span> <span class="ow">-&gt;</span> <span class="n">return</span> <span class="o">$</span> <span class="n">v1</span> <span class="o">+</span> <span class="n">v2</span><span class="p">)))</span> <span class="p">(</span><span class="kt">Just</span> <span class="mi">0</span><span class="p">)</span>
</pre></div></div>

<p>Java8 と同じにしてみた。foldr が reduce flatMap が &gt;&gt;= に対応しているだけで全く同じ構造だ。</p>

<div class="code-frame" data-lang="haskell"><div class="highlight"><pre><span></span><span class="nf">main</span> <span class="ow">::</span> <span class="kt">IO</span> <span class="nb">()</span>
<span class="nf">main</span> <span class="ow">=</span> <span class="n">putStrLn</span> <span class="o">$</span> <span class="n">resultText</span> <span class="o">$</span> <span class="n">calc''</span> <span class="p">[</span><span class="kt">Just</span> <span class="mi">200</span><span class="p">,</span> <span class="kt">Nothing</span><span class="p">,</span> <span class="kt">Just</span> <span class="mi">250</span><span class="p">]</span>

<span class="nf">resultText</span> <span class="ow">::</span> <span class="kt">Show</span> <span class="n">a</span> <span class="ow">=&gt;</span> <span class="kt">Maybe</span> <span class="n">a</span> <span class="ow">-&gt;</span> <span class="kt">String</span>
<span class="nf">resultText</span> <span class="p">(</span><span class="kt">Just</span> <span class="n">n</span><span class="p">)</span> <span class="ow">=</span> <span class="s">"全部買えました。合計"</span> <span class="o">++</span> <span class="p">(</span><span class="n">show</span> <span class="n">n</span><span class="p">)</span> <span class="o">++</span> <span class="s">"円でした"</span>
<span class="nf">resultText</span> <span class="kt">Nothing</span>  <span class="ow">=</span> <span class="s">"何かが売り切れていたので何も買ってきませんでした…"</span>

<span class="nf">calc''</span> <span class="ow">::</span> <span class="p">[</span><span class="kt">Maybe</span> <span class="kt">Integer</span><span class="p">]</span> <span class="ow">-&gt;</span> <span class="kt">Maybe</span> <span class="kt">Integer</span>
<span class="nf">calc''</span> <span class="ow">=</span> <span class="n">foldr</span> <span class="p">(</span><span class="nf">\</span><span class="n">p</span> <span class="n">c</span> <span class="ow">-&gt;</span> <span class="kr">do</span> <span class="p">{</span> <span class="n">v1</span> <span class="ow">&lt;-</span> <span class="n">p</span> <span class="p">;</span> <span class="n">v2</span> <span class="ow">&lt;-</span> <span class="n">c</span> <span class="p">;</span> <span class="n">return</span> <span class="o">$</span> <span class="n">v1</span> <span class="o">+</span> <span class="n">v2</span><span class="p">})</span> <span class="p">(</span><span class="kt">Just</span> <span class="mi">0</span><span class="p">)</span>
</pre></div></div>

<p>do式使ったほうがやっぱりわかりやすい。</p>

<h1>
<span id="まとめ" class="fragment"></span><a href="#%E3%81%BE%E3%81%A8%E3%82%81"><i class="fa fa-link"></i></a>まとめ</h1>

<p>ひびのさんが僕の理解した所によると以下のようなことを言ってたのが面白かった。<br>
「2重のレイヤーの構造に対して内側に対する演算とか定義できるのはHaskellのクールなところだよねー。」</p>

<p>モナド則を満たしていればモナドというのは、筒の底に穴が開いていなければ箱、というのと同等なんじゃないかな、と思った。</p>

<p>Java8 と Haskell の違いよくわからない。<br>
Java8にreturnがあればdo式のないHaskellと同じ表現力になるのかなー、と思ったけど型推論が全くアレなのでreturnがどこ型のreturnかわかんないしダメだこりゃ。</p>
</div>
	</td>
</tr>
</table>
<br />
	</body>
</html>
