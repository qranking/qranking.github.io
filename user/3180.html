<html>
	<head><!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-110075493-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-110075493-1');
</script>
<!-- Google AdSense -->
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-6168511236629369",
    enable_page_level_ads: true
  });
</script>

		<meta charset="UTF-8" />
		<title>Qiita Ranking (shu223)</title>
		<link rel="stylesheet" type="text/css" href="../qranking.css">
	</head>
	<body>
<div class="headerContainer">
<h1>Qiitaいいね数ランキング (shu223 さんの投稿分)</h1>
</div><!--class="headerContainer"-->
<p><i><img width="16" height="16" src="../thumb-up-120px.png" /></i>が同じ値の場合は投稿日時の新しいものが上位としています。</p>
<p><i><img width="16" height="16" src="../thumb-up-120px.png" /></i>がついていない記事は表示していません。</p>
<table border="1">
<tr>
	<td rowspan="3"><center>shu223さんの<br />1位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>1110</kbd>
		<a target="_blank" href="https://qiita.com/shu223/items/a895a989e84219e5302e">iOSアプリ開発に役立つTips100連発！</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2012-08-10 00:51:51</center>
	</td>
	<td style="width:200px;">
		@shu223<br />(Freelancer 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/3180/profile-images/1473682733">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Objective-C]</b> <b>[OSX]</b> <b>[Xcode]</b> <b>[iOS]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>１年半ほどコツコツと書きためてきた iOS アプリ開発 / Objective-C 関連の Tips をカテゴリ別にまとめてみました。</p>

<p>数が多いので、オススメのものを太字にしてあります。</p>

<p>（更新情報 2012.8.11）ちゃんと数えてみたら88個しかなかったので、20個ほど追加しました。</p>

<p>（追記 2013.10.1） <strong>本記事をきっかけに秀和システム社よりお声がけいただき、書籍を執筆</strong> させていただきました。iOS開発に役立つTips集です。ぜひ下記ページより <strong>目次を見ていただき、興味のある項目がありそうであれば</strong> ご購入いただけるととても嬉しいです。</p>

<p><a href="http://d.hatena.ne.jp/shu223/20130528/1369714635" rel="nofollow noopener" target="_blank">『iOSアプリ開発 達人のレシピ100』という本を書きました</a></p>

<p><a href="http://d.hatena.ne.jp/shu223/20130528/1369714635" rel="nofollow noopener" target="_blank"><img src="https://camo.qiitausercontent.com/8662d383c92d8396f98770f1c7b5ca1b71bc52bc/687474703a2f2f7370686f746f732d662e616b2e666263646e2e6e65742f6870686f746f732d616b2d617368332f363236335f3634303433393439353938343832305f313130373937333136395f6e2e6a7067" width="400" data-canonical-src="http://sphotos-f.ak.fbcdn.net/hphotos-ak-ash3/6263_640439495984820_1107973169_n.jpg"></a></p>

<h2>
<span id="ライブラリフレームワーク" class="fragment"></span><a href="#%E3%83%A9%E3%82%A4%E3%83%96%E3%83%A9%E3%83%AA%E3%83%95%E3%83%AC%E3%83%BC%E3%83%A0%E3%83%AF%E3%83%BC%E3%82%AF"><i class="fa fa-link"></i></a>ライブラリ／フレームワーク</h2>

<ul>
<li>
<p><strong><a href="http://d.hatena.ne.jp/shu223/20120806/1344151527" rel="nofollow noopener" target="_blank">ゲームアプリ向け UI コンポーネントセット "UIKitForGame"</a></strong></p>

<p>ゲームアプリをつくる際に便利な UIKit のカテゴリ／サブクラスの詰め合わせライブラリ</p>
</li>
<li>
<p><strong><a href="http://d.hatena.ne.jp/shu223/20120721/1342858736" rel="nofollow noopener" target="_blank">vImageのススメ</a></strong></p>

<p>iOS 5 から追加された高速画像処理ライブラリ、vImage の紹介と、サンプルコードの解説</p>
</li>
<li>
<p><strong><a href="http://d.hatena.ne.jp/shu223/20110428/1303930059" rel="nofollow noopener" target="_blank">アプリのメモリ使用量をリアルタイムに表示するクラスを公開しました</a></strong></p>

<p>メモリ消費量やUIViewの数など、「負荷を示すパラメータ」をリアルタイム表示するライブラリ</p>
</li>
<li><p><strong><a href="http://d.hatena.ne.jp/shu223/20120327/1332862169" rel="nofollow noopener" target="_blank">NSUserDefaults に保存する際に自動的に iCloud にも保存してくれるライブラリ "MKiCloudSync"</a></strong></p></li>
<li><p><strong><a href="http://d.hatena.ne.jp/shu223/20111117/1321496682" rel="nofollow noopener" target="_blank">CIFilter の効果を一通り試せるサンプルコード（フィルタ名一覧つき）</a></strong></p></li>
<li>
<p><strong><a href="http://d.hatena.ne.jp/shu223/20110227/1299368179" rel="nofollow noopener" target="_blank">iOS SDK用音声認識機能ライブラリVocalKitの使い方</a></strong></p>

<p>iPhone SDKで利用できる音声認識ライブラリ</p>
</li>
<li><p><strong><a href="http://d.hatena.ne.jp/shu223/20110201/1296564673" rel="nofollow noopener" target="_blank">iPhone用グラフ描画ライブラリ s7graphview の使い方</a></strong></p></li>
<li><p><strong><a href="http://gihyo.jp/dev/serial/01/ios_oss/0001" rel="nofollow noopener" target="_blank">様々なアニメーションを実現するiOSアプリ用トゥイーンライブラリ3種を比較！</a></strong></p></li>
<li><p><strong><a href="http://gihyo.jp/dev/serial/01/ios_oss/0002" rel="nofollow noopener" target="_blank">アプリ内でログを閲覧するためのライブラリ iConsole</a></strong></p></li>
<li><p><strong><a href="http://gihyo.jp/dev/serial/01/ios_oss/0003" rel="nofollow noopener" target="_blank">実装の面倒な部分をうまくラップしてくれている便利カテゴリ3選</a></strong><br>
UIImageに各種画像処理機能を持たせるNYXImagesKit<br>
面倒なデリゲート処理を Blocks で記述できるカテゴリ<br>
英単語の単数形／複数形変換をメソッド1つで行えるようにするNSStringのカテゴリ</p></li>
<li><p><strong><a href="http://gihyo.jp/dev/serial/01/ios_oss/0004" rel="nofollow noopener" target="_blank">UILabelでのテキスト表示をリッチにする機能拡張サブクラス3種</a></strong></p></li>
<li><p><strong><a href="http://gihyo.jp/dev/serial/01/ios_oss/0005" rel="nofollow noopener" target="_blank">グラデーション描画や色のアニメーションの実装を簡単にする色処理関連の便利OSS3選</a></strong><br>
グラデーション描画のヘルパークラスLBGradient<br>
2つのUIColorの間でクロスフェードさせるUIColorのカテゴリ<br>
色の重ね合わせやCSSカラー名での色の指定ができるようになるUIColorのカテゴリ</p></li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20120629/1340731114" rel="nofollow noopener" target="_blank">Path や Facebook ライクなスライドメニューを実現するライブラリ "IIViewDeckController"</a></p></li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20120627/1340718674" rel="nofollow noopener" target="_blank">スクロール付きタブバー "InfiniTabBar"</a></p></li>
</ul>

<h2>
<span id="sns連携" class="fragment"></span><a href="#sns%E9%80%A3%E6%90%BA"><i class="fa fa-link"></i></a>SNS連携</h2>

<ul>
<li><p><a href="http://d.hatena.ne.jp/shu223/20120712/1342102850" rel="nofollow noopener" target="_blank">Facebook SDK 3.0 for iOS のサンプルを一通り試してみました</a></p></li>
<li><p><strong><a href="http://d.hatena.ne.jp/shu223/20120305/1330966788" rel="nofollow noopener" target="_blank">Twitter や Facebook への投稿ライブラリ ShareKit の Tips</a></strong></p></li>
<li><p><strong><a href="http://d.hatena.ne.jp/shu223/20110223/1298415231" rel="nofollow noopener" target="_blank">カメラアプリにFacebookへの写真投稿機能をつける</a></strong></p></li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20110314/1300018597" rel="nofollow noopener" target="_blank">Facebook iOS SDK を使用して近況の投稿やプロフィール取得を実装する</a></p></li>
</ul>

<h2>
<span id="デバッグ関連" class="fragment"></span><a href="#%E3%83%87%E3%83%90%E3%83%83%E3%82%B0%E9%96%A2%E9%80%A3"><i class="fa fa-link"></i></a>デバッグ関連</h2>

<ul>
<li>
<p><strong><a href="http://d.hatena.ne.jp/shu223/20120317/1331914823" rel="nofollow noopener" target="_blank">ログ出力用マクロ</a></strong></p>

<p>クラス名、メソッド名、コード内の何行目か、を出力するマクロ</p>
</li>
<li>
<p><strong><a href="http://d.hatena.ne.jp/shu223/20120316/1331819831" rel="nofollow noopener" target="_blank">クラッシュイベントを受け取る</a></strong></p>

<p>TestFlight SDK のように、クラッシュイベントを受け取って Stack Trace をレポートするしくみの実装方法</p>
</li>
<li>
<p><a href="http://d.hatena.ne.jp/shu223/20110504/1304500466" rel="nofollow noopener" target="_blank">バッテリー消費量の計測方法など、iOSのデバッグに関するドキュメント</a></p>

<p>iOS Debugging Magic を読んで勉強になったことのメモ。</p>
</li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20110502/1304333582" rel="nofollow noopener" target="_blank">Instruments の Leaks の見方（Live Bytes や Living の意味）</a></p></li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20110427/1303921157" rel="nofollow noopener" target="_blank">iPhone の空きメモリ量や使用中のメモリ量を取得する</a></p></li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20111102/1321492522" rel="nofollow noopener" target="_blank">KVC で setValue:forUndefinedKey: エラーが発生する場合の対処法</a></p></li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20110217/1298826921" rel="nofollow noopener" target="_blank">アップロード時に An error occurred uploading to the iTunes Store エラーが出た場合の対処方法</a></p></li>
</ul>

<h2>
<span id="xcode" class="fragment"></span><a href="#xcode"><i class="fa fa-link"></i></a>XCode</h2>

<ul>
<li><p><strong><a href="http://d.hatena.ne.jp/shu223/20120804/1344155002" rel="nofollow noopener" target="_blank">$(SRCROOT) や $(BUILD_DIR) 等の Xcode で使用しているマクロの置換内容の一覧を調べる方法</a></strong></p></li>
<li><p><strong><a href="http://d.hatena.ne.jp/shu223/20110318/1300390974" rel="nofollow noopener" target="_blank">Xcode 4 に自作ファイルテンプレートを追加する</a></strong></p></li>
<li>
<p><strong><a href="http://d.hatena.ne.jp/shu223/20111229/1325141509" rel="nofollow noopener" target="_blank">ARC の有効／無効をファイルごとに設定する方法</a></strong></p>

<p>プロジェクト全体でARCを有効にした状態で、一部ファイルを「まとめて」無効にする方法など。</p>
</li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20120725/1344152423" rel="nofollow noopener" target="_blank">Beta 版の Xcode で開いたプロジェクトが現行 Xcode で起動しなくなった場合の対処法</a></p></li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20120724/1344145314" rel="nofollow noopener" target="_blank">ひとつのプロジェクトで複数の Bundle identifier を使い分ける方法</a></p></li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20110426/1304694650" rel="nofollow noopener" target="_blank">ビルド設定の "Other Linker Flags" に "-ObjC" を設定する意味</a></p></li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20110315/1300403884" rel="nofollow noopener" target="_blank">Xcode 4 の Code Snippet Library にスニペットを追加する</a></p></li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20110328/1301713208" rel="nofollow noopener" target="_blank">Xcode 4 でのプロジェクトテンプレート作成手順</a></p></li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20110414/1302751793" rel="nofollow noopener" target="_blank">２つの Xcode 4 プロジェクトのビルド設定を比較する</a></p></li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20110530/1307258057" rel="nofollow noopener" target="_blank">LLVM GCC と LLVM Compiler 2.0 とどっちがいいのか？</a></p></li>
</ul>

<h2>
<span id="ui関連" class="fragment"></span><a href="#ui%E9%96%A2%E9%80%A3"><i class="fa fa-link"></i></a>UI関連</h2>

<ul>
<li>
<p><strong><a href="http://d.hatena.ne.jp/shu223/20110531/1307300906" rel="nofollow noopener" target="_blank">リファクタリング講座メモ</a></strong></p>

<p>「リファクタリング講座」で勉強になったことのメモ。breakpointの右クリックエディットの話、xibファイルの話、クラスエクステンション、LLVMなどなど</p>
</li>
<li>
<p><strong><a href="http://d.hatena.ne.jp/shu223/20110417/1303138458" rel="nofollow noopener" target="_blank">スクリーンショットを撮る</a></strong></p>

<p>スクリーンショットをとって UIImage で返してくれるメソッド</p>
</li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20120722/1343061397" rel="nofollow noopener" target="_blank">UIWebView からアプリ内に入れたカスタムフォントを使う</a></p></li>
<li>
<p><strong><a href="http://d.hatena.ne.jp/shu223/20120209/1328793577" rel="nofollow noopener" target="_blank">放物線状にアニメーションさせる</a></strong></p>

<p>ジャンプに見立て、始点(startPos)と終点(targetPos)と高さ(height)を指定するように CAKeyframeAnimation をラップしたスニペット</p>
</li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20120401/1334019533" rel="nofollow noopener" target="_blank">クロスディゾルブで画面遷移</a></p></li>
<li>
<p><a href="http://d.hatena.ne.jp/shu223/20110604/1307890173" rel="nofollow noopener" target="_blank">UIFont の fontName 一覧</a></p>

<p>UIFont の fontWithName:size: メソッドに渡す fontName の一覧。</p>
</li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20110516/1305550835" rel="nofollow noopener" target="_blank">BMPファイルのカラーパレットを書き換える</a></p></li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20110403/1304235112" rel="nofollow noopener" target="_blank">UITableViewController のreloadDataをコールするタイミング</a></p></li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20110321/1301709440" rel="nofollow noopener" target="_blank">UINavigationBar に UISegmentControlを置く</a></p></li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20110316/1300375000" rel="nofollow noopener" target="_blank">UIPopoverControllerをiPhoneで使う</a></p></li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20110222/1299431262" rel="nofollow noopener" target="_blank">UITextFieldへの入力時にキーボードではなくUIPickerViewを出す方法</a></p></li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20110221/1299439884" rel="nofollow noopener" target="_blank">nibファイルの読み込みパフォーマンスを改善するUINibクラス</a></p></li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20110218/1298226268" rel="nofollow noopener" target="_blank">UITextViewのheight調整</a></p></li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20110208/1299336956" rel="nofollow noopener" target="_blank">iPhoneアプリの起動アニメーションの実装方法</a></p></li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20110207/1299335775" rel="nofollow noopener" target="_blank">アプリアップデート後の初回起動時にUIAlertViewでお知らせを表示する方法</a></p></li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20110206/1296942353" rel="nofollow noopener" target="_blank">入門本から得たTipsなど</a></p></li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20110204/1299333570" rel="nofollow noopener" target="_blank">UIAlertViewを左寄せにする</a></p></li>
</ul>

<h2>
<span id="foundation" class="fragment"></span><a href="#foundation"><i class="fa fa-link"></i></a>Foundation</h2>

<ul>
<li><p><a href="http://d.hatena.ne.jp/shu223/20110509/1304952981" rel="nofollow noopener" target="_blank">構造体を NSDictionary や NSArray に格納する方法</a></p></li>
<li>
<p><a href="http://d.hatena.ne.jp/shu223/20111101/1321307235" rel="nofollow noopener" target="_blank">NSUserDefaults の内容を一括消去する方法</a></p>

<p>開発時の動作確認用リセット（初期化）ボタン等に</p>
</li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20111002/1330232118" rel="nofollow noopener" target="_blank">NSUserDefaults に保存されている全てのキーと値の一覧を取得する</a></p></li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20110304/1300983192" rel="nofollow noopener" target="_blank">NSFileManagerによるファイル・ディレクトリ操作</a></p></li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20110219/1299330910" rel="nofollow noopener" target="_blank">NSStringの全角／半角バリデーションチェック</a></p></li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20110311/1300983799" rel="nofollow noopener" target="_blank">NSLogのフォーマット指定子一覧</a></p></li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20110308/1300397404" rel="nofollow noopener" target="_blank">NSAssertの使いどころ</a></p></li>
</ul>

<h2>
<span id="アプリ内課金--広告" class="fragment"></span><a href="#%E3%82%A2%E3%83%97%E3%83%AA%E5%86%85%E8%AA%B2%E9%87%91--%E5%BA%83%E5%91%8A"><i class="fa fa-link"></i></a>アプリ内課金 / 広告</h2>

<ul>
<li><p><strong><a href="http://d.hatena.ne.jp/shu223/20120723/1343060671" rel="nofollow noopener" target="_blank">In-App Purchase の脆弱性への対応方法</a></strong></p></li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20120204/1328941106" rel="nofollow noopener" target="_blank">In-App Purchase の Status が "Developer Action Needed" な場合の対処方法</a></p></li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20120114/1327794728" rel="nofollow noopener" target="_blank">In-App Purchase で、プロダクトID が invalid になる場合の対処方法</a></p></li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20120107/1327782618" rel="nofollow noopener" target="_blank">In-App Purchase のステータスが "Ready to Submit" な場合の対処法</a></p></li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20110324/1300985815" rel="nofollow noopener" target="_blank">新しいAdMob SDK（Google AdMob Ads SDK for iOS）での広告設置方法</a></p></li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20110503/1304488825" rel="nofollow noopener" target="_blank">AdMobの入金タイミング</a></p></li>
</ul>

<h2>
<span id="位置情報関連" class="fragment"></span><a href="#%E4%BD%8D%E7%BD%AE%E6%83%85%E5%A0%B1%E9%96%A2%E9%80%A3"><i class="fa fa-link"></i></a>位置情報関連</h2>

<ul>
<li>
<p><strong><a href="http://d.hatena.ne.jp/shu223/20110220/1298223410" rel="nofollow noopener" target="_blank">すれ違い通信アプリ開発で得たBluetoothの知見まとめ</a></strong></p>

<p>すれ違い通信アプリ『EncountMe』の開発を通して得たiPhoneのBluetoothまわりの諸々について</p>
</li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20120506/1336283901" rel="nofollow noopener" target="_blank">iOS 5.0 より追加された CLGeocoder を使用して逆ジオコーディング</a></p></li>
<li><p><strong><a href="http://d.hatena.ne.jp/shu223/20110528/1306564167" rel="nofollow noopener" target="_blank">Objective-C版GeoHexを試してみました</a></strong></p></li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20111001/1321305649" rel="nofollow noopener" target="_blank">位置情報のOn/Off、許可/不許可を確認する</a></p></li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20110710/1311627118" rel="nofollow noopener" target="_blank">位置情報サービス利用の際のバッテリー電力節約のためのヒント</a></p></li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20110506/1307312369" rel="nofollow noopener" target="_blank">MKAnnotationViewのコールアウトをカスタマイズする</a></p></li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20110406/1302028258" rel="nofollow noopener" target="_blank">CLLocationCoordinate2D から指定方向に指定距離離れた場所の緯度経度を計算する</a></p></li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20110325/1301709495" rel="nofollow noopener" target="_blank">MKMapViewのピンをタッチせずにコールアウトを出す</a></p></li>
</ul>

<h2>
<span id="unity--cocos2d--titanium" class="fragment"></span><a href="#unity--cocos2d--titanium"><i class="fa fa-link"></i></a>Unity / cocos2d / Titanium</h2>

<ul>
<li>
<p><a href="http://d.hatena.ne.jp/shu223/20120614/1339777051" rel="nofollow noopener" target="_blank">NGUIの使い方に関する記事まとめ</a></p>

<p>iOS SDK の UIKit に用意されているような UI を Unity で実装できるプラグイン</p>
</li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20110702/1310314681" rel="nofollow noopener" target="_blank">Unity での Bundle Identifier の設定方法</a></p></li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20110421/1303343800" rel="nofollow noopener" target="_blank">cocos2d を使用したゲームアプリのソースコード集</a></p></li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20110430/1304147261" rel="nofollow noopener" target="_blank">Titanium開発情報（日本語）を集めてみました</a></p></li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20110705/1310403782" rel="nofollow noopener" target="_blank">MonoDevelopの文字化け対策最終手段</a></p></li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20110415/1302792358" rel="nofollow noopener" target="_blank">cocos2dでの3Dアプリケーションの開発を可能とするエクステンション「cocos3d」</a></p></li>
<li><p><strong><a href="http://d.hatena.ne.jp/shu223/20110329/1301396786" rel="nofollow noopener" target="_blank">cocos2d のトランジションエフェクトのラッパークラスを公開しました</a></strong></p></li>
</ul>

<h2>
<span id="その他" class="fragment"></span><a href="#%E3%81%9D%E3%81%AE%E4%BB%96"><i class="fa fa-link"></i></a>その他</h2>

<ul>
<li><p><strong><a href="http://d.hatena.ne.jp/shu223/20110224/1299430528" rel="nofollow noopener" target="_blank">デバイスにインストールされているアプリ一覧を取得する</a></strong></p></li>
<li>
<p><a href="http://d.hatena.ne.jp/shu223/20120312/1331565988" rel="nofollow noopener" target="_blank">ARC 有効/無効に両対応させたい場合に便利なマクロ</a></p>

<p>__has_feature(objc_arc)で処理を書き分けるのが面倒な場合に便利なマクロ</p>
</li>
<li><p><strong><a href="http://d.hatena.ne.jp/shu223/20120226/1330231240" rel="nofollow noopener" target="_blank">オブジェクトが持つプロパティの型と名前のリストを取得する</a></strong></p></li>
<li>
<p><strong><a href="http://d.hatena.ne.jp/shu223/20120117/1326822089" rel="nofollow noopener" target="_blank">iOS Advent Calender 2011 で勉強になったことメモ</a></strong></p>

<p>CocoaPods の話、Cocoa Controls の話、DTrace でのデバッグの話、appCode という IDE の話、、などなど</p>
</li>
<li>
<p><strong><a href="http://d.hatena.ne.jp/shu223/20120210/1328878654" rel="nofollow noopener" target="_blank">NSNotification, NSNotificationCenter によるオブジェクト間通知のパフォーマンス</a></strong></p>

<p>NSNotification, NSNotificationCenter を用いたオブジェクト間連携は使いやすいのでついつい多用してしまうのですが、具体的に内部でどのような処理が行われていて、パフォーマンス面での影響はどのくらいなんだろう、ということをイメージできずにいたので、Appleのドキュメントで調べてみました</p>
</li>
<li>
<p><strong><a href="http://d.hatena.ne.jp/shu223/20110827/1314520691" rel="nofollow noopener" target="_blank">パフォーマンスチューニングに関するアップルのドキュメント</a></strong></p>

<p>アップルの『iOSアプリケーションプログラミングガイド（英語版）』にある、『パフォーマンスと応答性のチューニング』という章のためになった部分の紹介</p>
</li>
<li><p><strong><a href="http://d.hatena.ne.jp/shu223/20110418/1303137062" rel="nofollow noopener" target="_blank">Assets Library からの読み込みを高速化するための試行錯誤</a></strong></p></li>
<li>
<p><strong><a href="http://d.hatena.ne.jp/shu223/20110511/1305129443" rel="nofollow noopener" target="_blank">csvファイルからplistを生成するPHPスクリプト</a></strong></p>

<p>エクセルとかGoogle docsで編集されたデータをplistファイルとしてアプリに持たせたい、といった場合用の、csvファイルからplistファイルへの変換スクリプト</p>
</li>
<li>
<p><strong><a href="http://d.hatena.ne.jp/shu223/20110828/1314516533" rel="nofollow noopener" target="_blank">Push Notification おさらい</a></strong></p>

<p>プッシュ通知を実装するときに、「バックグラウンドで通知受けたときはapplication:didFinishLaunchingWithOptions:とapplication:didReceiveRemoteNotification:、どっちが呼ばれるんだっけ？」とかなんだかいつも自信なくなってきてドキュメントを見返したりしてしまうので、ドキュメントと、実際の動作を確認した内容をまとめました。</p>
</li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20110518/1305738227" rel="nofollow noopener" target="_blank">otoolでバイナリの内容をいろいろと調べる方法</a></p></li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20111119/1321586312" rel="nofollow noopener" target="_blank">mecab での形態素解析を試してみました</a></p></li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20110301/1299904208" rel="nofollow noopener" target="_blank">音声録音の実装方法</a></p></li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20110401/1303917228" rel="nofollow noopener" target="_blank">プロセス情報を取得する</a><br>
NSProcessInfo というクラスを使ってプロセス情報をいろいろと取得する方法</p></li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20120121/1327117228" rel="nofollow noopener" target="_blank">AppStoreに並ぶ最終的なバイナリサイズを計測する方法</a></p></li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20110425/1304953175" rel="nofollow noopener" target="_blank">大量の画像ファイルを圧縮したzipファイルをiPhoneで解凍するのに要する時間</a></p></li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20110423/1307314926" rel="nofollow noopener" target="_blank">バックグラウンドのアプリが殺される優先度</a></p></li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20110826/1314519637" rel="nofollow noopener" target="_blank">Objective-Cの.gitignoreテンプレート</a></p></li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20110601/1307559462" rel="nofollow noopener" target="_blank">iOSアップデート中に"This device isn't eligible for the requested build"エラーが出る場合の対処</a></p></li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20110527/1306770936" rel="nofollow noopener" target="_blank">コードスニペットまとめサイト</a></p></li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20110330/1301713140" rel="nofollow noopener" target="_blank">ボタンやアイコンなどの素材管理ツール</a></p></li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20110404/1304692649" rel="nofollow noopener" target="_blank">初回起動の判定方法</a></p></li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20110216/1299441142" rel="nofollow noopener" target="_blank">寄稿を受け付けているアプリ紹介ブログ／サイトリスト</a></p></li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20110407/1304693658" rel="nofollow noopener" target="_blank">ユーザー登録なしでユーザーを識別するベストプラクティス</a></p></li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20110215/1299431099" rel="nofollow noopener" target="_blank">iPhoneバイブの制御</a></p></li>
<li><p><a href="http://d.hatena.ne.jp/nns/20100123/1264202050" rel="nofollow noopener" target="_blank">iPhoneアプリ開発（iPhone SDK）の解説本、一挙14冊レビュー</a></p></li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20120315/1331819111" rel="nofollow noopener" target="_blank">GKLeaderboard でどのようなスコアデータの絞り込みができるか</a></p></li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20110317/1300380674" rel="nofollow noopener" target="_blank">GameCenterでどこまでサーバーサイド機能を代替できるか</a></p></li>
<li><p><strong><a href="http://d.hatena.ne.jp/shu223/20110131/1296408051" rel="nofollow noopener" target="_blank">Game Center のリーダーボード（スコアランキング）対応アプリの作り方</a></strong></p></li>
</ul>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>shu223さんの<br />2位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>687</kbd>
		<a target="_blank" href="https://qiita.com/shu223/items/ffd2202eaf92d342f83d">「顔以外」のものを画像認識する on iOS</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-12-02 10:59:59</center>
	</td>
	<td style="width:200px;">
		@shu223<br />(Freelancer 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/3180/profile-images/1473682733">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[iOS]</b> <b>[画像処理]</b> <b>[OpenCV]</b> <b>[機械学習]</b> <b>[Swift]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>iOS SDK では Core Image の CIDetector クラスで簡単に顔認識をおこなうことができます。iOS 7 からは、<a href="http://d.hatena.ne.jp/shu223/20130924/1379990718" rel="nofollow noopener" target="_blank">笑顔やまばたきの検出も可能に</a> なりました。</p>

<p>が、CIDetector は <code>detectorOfType:context:options:</code> というメソッドの第1引数で Detector Type を指定できる設計になっているものの、</p>

<div class="code-frame" data-lang="swift"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">let</span> <span class="nv">CIDetectorTypeFace</span><span class="p">:</span> <span class="nb">String</span>
<span class="kd">public</span> <span class="kd">let</span> <span class="nv">CIDetectorTypeRectangle</span><span class="p">:</span> <span class="nb">String</span>
<span class="kd">public</span> <span class="kd">let</span> <span class="nv">CIDetectorTypeQRCode</span><span class="p">:</span> <span class="nb">String</span>
<span class="kd">public</span> <span class="kd">let</span> <span class="nv">CIDetectorTypeText</span><span class="p">:</span> <span class="nb">String</span>
</pre></div></div>

<p><a href="https://developer.apple.com/library/ios/documentation/CoreImage/Reference/CIDetector_Ref/Reference/Reference.html#//apple_ref/doc/constant_group/Detector_Types" rel="nofollow noopener" target="_blank">Detector Types - CIDetector Class Reference</a></p>

<p>と、4つしか定義されてないので、結局のところ <strong>顔・矩形・QRコード・文字領域しか認識できません</strong>。</p>

<h2>
<span id="車やロゴや犬やネコを認識する" class="fragment"></span><a href="#%E8%BB%8A%E3%82%84%E3%83%AD%E3%82%B4%E3%82%84%E7%8A%AC%E3%82%84%E3%83%8D%E3%82%B3%E3%82%92%E8%AA%8D%E8%AD%98%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>車やロゴや犬やネコを認識する</h2>

<p>OpenCV には顔検出用の手法として、 <strong>Haar分類器</strong> というものが実装されています。</p>

<p>この手法の詳細はここでは省略しますが、この手法は、 <strong>顔検出だけでなく、車やペット等、さまざまな対象を検出</strong> するのに広く使用されています。</p>

<p>で、このHaar分類器は、オブジェクトを検出するために、 <strong>あらかじめその対象の特徴を学習させて作成した特徴量データ</strong> （正しくは識別器をカスケードさせたもの）の入っているxmlファイル（この記事ではカスケードファイルと呼ぶことにします）を使用します。</p>

<h3>
<span id="opencvに同梱されているカスケードファイル" class="fragment"></span><a href="#opencv%E3%81%AB%E5%90%8C%E6%A2%B1%E3%81%95%E3%82%8C%E3%81%A6%E3%81%84%E3%82%8B%E3%82%AB%E3%82%B9%E3%82%B1%E3%83%BC%E3%83%89%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB"><i class="fa fa-link"></i></a>OpenCVに同梱されているカスケードファイル</h3>

<p>OpenCV を git clone （参考：<a href="http://qiita.com/shu223/items/3ff48a8bd6edd910e780" id="reference-c79c8c3d390bd56f755e">OpenCV for iOSの使い方</a>）すると、data/haarcascades ディレクトリに、下記のカスケードファイルが入っています（2013年12月2日現在）。</p>

<ul>
<li>顔

<ul>
<li>haarcascade_frontalface_default.xml</li>
<li>haarcascade_frontalface_alt.xml</li>
<li>haarcascade_frontalface_alt2.xml</li>
<li>haarcascade_frontalface_alt_tree.xml</li>
<li>haarcascade_profileface.xml</li>
</ul>
</li>
<li>目

<ul>
<li>haarcascade_eye.xml</li>
<li>haarcascade_eye_tree_eyeglasses.xml</li>
<li>haarcascade_mcs_lefteye.xml</li>
<li>haarcascade_mcs_righteye.xml</li>
<li>haarcascade_lefteye_2splits.xml</li>
<li>haarcascade_righteye_2splits.xml</li>
<li>haarcascade_mcs_eyepair_big.xml</li>
<li>haarcascade_mcs_eyepair_small.xml</li>
</ul>
</li>
<li>耳

<ul>
<li>haarcascade_mcs_leftear.xml</li>
<li>haarcascade_mcs_rightear.xml</li>
</ul>
</li>
<li>口

<ul>
<li>haarcascade_mcs_mouth.xml</li>
</ul>
</li>
<li>鼻

<ul>
<li>haarcascade_mcs_nose.xml</li>
</ul>
</li>
<li>胴体

<ul>
<li>haarcascade_fullbody.xml</li>
<li>haarcascade_mcs_upperbody.xml</li>
<li>haarcascade_lowerbody.xml<br>
</li>
<li>haarcascade_upperbody.xml</li>
</ul>
</li>
</ul>

<p>結構いろいろありますが、Core Image の <strong>CIDetector では検出できない、耳・鼻・胴体</strong> といったオブジェクトを検出するためのカスケードファイルもあらかじめ入っていることがわかります。</p>

<p>ちなみに haarcascade_eye_tree_eyeglasses.xml は、 <strong>メガネ着用時の目</strong> を検出するものです。</p>

<h3>
<span id="カスケードファイルを自作する" class="fragment"></span><a href="#%E3%82%AB%E3%82%B9%E3%82%B1%E3%83%BC%E3%83%89%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%82%92%E8%87%AA%E4%BD%9C%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>カスケードファイルを自作する</h3>

<p>OpenCVにあらかじめ入っているものだけでも、Core Image よりも多くの対象を検出できることがわかりましたが、 <strong>人間以外のもの</strong> 、たとえば車やバイク、犬やネコを検出するためのカスケードファイルは入っていません。</p>

<p>その場合には、OpenCVに入っている、 <strong>haartraining</strong> というツールを使用して、カスケードファイルを自作する必要があります。</p>

<p>手順は以下の通り。</p>

<ol>
<li>学習したいオブジェクトの例からなるデータセット（対象物が入っている画像）を集める</li>
<li>createsamples ユーティリティを使用して、陽性サンプル（対象物が入っているサンプル）のベクトル出力ファイルを構築する</li>
<li>同様に、陰性サンプルのベクトル出力ファイルを構築する</li>
<li>haartraining で学習を実行する</li>
</ol>

<p>・・・とこう書くとわりとシンプルですが、手順 1 の <strong>データセット収集のハードルが半端なく高い</strong> です。</p>

<p>ある程度の精度を求めるなら、 <strong>1,000〜10,000枚</strong> もの画像を集める必要があり、さらに、それらすべてについて <strong>いくつの対象物がどこにあるか（オブジェクト数, 左上隅の x座標, y座標, 幅, 高さ）</strong> を指定する必要があります。</p>

<p>現実的には、そういった画像を自動収集するツール、対象物の位置特定を補助するようなツールを自作する、といった努力が必要になると思います。</p>

<h3>
<span id="webに落ちているカスケードファイルを探す" class="fragment"></span><a href="#web%E3%81%AB%E8%90%BD%E3%81%A1%E3%81%A6%E3%81%84%E3%82%8B%E3%82%AB%E3%82%B9%E3%82%B1%E3%83%BC%E3%83%89%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%82%92%E6%8E%A2%E3%81%99"><i class="fa fa-link"></i></a>Webに落ちているカスケードファイルを探す</h3>

<p>前述したハードルにより、カスケードファイルを自作することはあきらめ、偉大な先人達が公開してくれているものを探すことにします。</p>

<p>まず、カスケードファイルのデータベースみたいなものがあるのではないか、と探してみましたが、どうやらないようでした（あったらぜひ教えていただけると幸いです）。</p>

<p>というわけで <strong>人間以外の剛体を検出するためのカスケードファイル</strong> を、個別にキーワードをちまちま入れて探してみました。以下、見つけたものを列挙していきます。</p>

<h2>
<span id="車" class="fragment"></span><a href="#%E8%BB%8A"><i class="fa fa-link"></i></a>車</h2>

<h3>
<span id="vehicle-detection-tracking-and-counting-on-behance" class="fragment"></span><a href="#vehicle-detection-tracking-and-counting-on-behance"><i class="fa fa-link"></i></a><a href="http://www.behance.net/gallery/Vehicle-Detection-Tracking-and-Counting/4057777" rel="nofollow noopener" target="_blank">Vehicle Detection, Tracking and Counting on Behance</a>
</h3>

<ul>
<li>記事内に、カスケードファイルを含むソース一式が含まれています。</li>
</ul>

<p><a href="https://camo.qiitausercontent.com/7bea93ace49416cea88c6956c33b0fce1e8996e2/687474703a2f2f662e636c2e6c792f6974656d732f335a33643166304e3376334a325532343259334b2f39393262323263623461643833646134323838613763383266663866383831622e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/7bea93ace49416cea88c6956c33b0fce1e8996e2/687474703a2f2f662e636c2e6c792f6974656d732f335a33643166304e3376334a325532343259334b2f39393262323263623461643833646134323838613763383266663866383831622e706e67" alt="" data-canonical-src="http://f.cl.ly/items/3Z3d1f0N3v3J2U242Y3K/992b22cb4ad83da4288a7c82ff8f881b.png"></a></p>

<h3>
<span id="computer-vision-opencv-support-for-darpa-autonomous-vehicle" class="fragment"></span><a href="#computer-vision-opencv-support-for-darpa-autonomous-vehicle"><i class="fa fa-link"></i></a><a href="http://www.cs.utah.edu/%7Eturcsans/DUC/" rel="nofollow noopener" target="_blank">Computer Vision: OpenCV support for DARPA Autonomous Vehicle</a>
</h3>

<ul>
<li>"The trained Haar cascades can be found here." という記述のところに貼ってあるリンクからカスケードファイルをDLできます</li>
</ul>

<h2>
<span id="犬ネコ" class="fragment"></span><a href="#%E7%8A%AC%E3%83%8D%E3%82%B3"><i class="fa fa-link"></i></a>犬・ネコ</h2>

<h3>
<span id="visual-geometry-group-oxford-iiit-pet-dataset" class="fragment"></span><a href="#visual-geometry-group-oxford-iiit-pet-dataset"><i class="fa fa-link"></i></a><a href="http://www.robots.ox.ac.uk/%7Evgg/data/pets/" rel="nofollow noopener" target="_blank">Visual Geometry Group: Oxford-IIIT Pet Dataset</a>
</h3>

<ul>
<li>
<strong>"Oxford-IIIT-Pet dataset" というペットの特徴量学習用データ</strong> を使用</li>
<li>学習用データはダウンロードできたものの、カスケードファイルは公開してないっぽい</li>
<li>同ページから "Cats and Dogs" という詳細が書かれた論文をダウンロードできます</li>
</ul>

<p><a href="https://camo.qiitausercontent.com/dc6e3a26fb315fa00ae0f38e2a67b5a7b72023f5/687474703a2f2f662e636c2e6c792f6974656d732f314332693369306b3272326e3071314e306e30712f7065745f616e6e6f746174696f6e732e6a7067" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/dc6e3a26fb315fa00ae0f38e2a67b5a7b72023f5/687474703a2f2f662e636c2e6c792f6974656d732f314332693369306b3272326e3071314e306e30712f7065745f616e6e6f746174696f6e732e6a7067" alt="" data-canonical-src="http://f.cl.ly/items/1C2i3i0k2r2n0q1N0n0q/pet_annotations.jpg"></a></p>

<h3>
<span id="cat-head-detection-pdf" class="fragment"></span><a href="#cat-head-detection-pdf"><i class="fa fa-link"></i></a><a href="http://research.microsoft.com/en-us/um/people/jiansun/papers/ECCV08_CatDetection.pdf" rel="nofollow noopener" target="_blank">Cat Head Detection</a> (PDF)</h3>

<ul>
<li>論文のみ</li>
</ul>

<h3>
<span id="tracking-animals-in-wildlife-videos-using-face-detection" class="fragment"></span><a href="#tracking-animals-in-wildlife-videos-using-face-detection"><i class="fa fa-link"></i></a><a href="http://www.cs.bris.ac.uk/Publications/Papers/2000186.pdf" rel="nofollow noopener" target="_blank">TRACKING ANIMALS IN WILDLIFE VIDEOS USING FACE DETECTION</a>
</h3>

<ul>
<li>論文のみ</li>
</ul>

<h2>
<span id="標識" class="fragment"></span><a href="#%E6%A8%99%E8%AD%98"><i class="fa fa-link"></i></a>標識</h2>

<h3>
<span id="computer-vision-opencv-support-for-darpa-autonomous-vehicle-1" class="fragment"></span><a href="#computer-vision-opencv-support-for-darpa-autonomous-vehicle-1"><i class="fa fa-link"></i></a><a href="http://www.cs.utah.edu/%7Eturcsans/DUC/" rel="nofollow noopener" target="_blank">Computer Vision: OpenCV support for DARPA Autonomous Vehicle</a>
</h3>

<ul>
<li>一時停止の標識, 停止信号</li>
<li>"The trained Haar cascades can be found here." という記述のところに貼ってあるリンクからカスケードファイルをDLできます</li>
<li>stop signs, stop lights, and pedestrians とあるのですが、実際にどういう画像を学習させたかが不明</li>
</ul>

<h2>
<span id="ロゴ" class="fragment"></span><a href="#%E3%83%AD%E3%82%B4"><i class="fa fa-link"></i></a>ロゴ</h2>

<h3>
<span id="haar-cascade-logo-detection" class="fragment"></span><a href="#haar-cascade-logo-detection"><i class="fa fa-link"></i></a><a href="http://www.wirelust.com/2011/11/08/haar-cascade-logo-detection/" rel="nofollow noopener" target="_blank">Haar cascade logo detection</a>
</h3>

<ul>
<li>コカコーラのロゴを検出</li>
<li>カスケードファイルは公開されてない。100枚の画像で学習させたとのこと。</li>
</ul>



<h2>
<span id="人間の部位" class="fragment"></span><a href="#%E4%BA%BA%E9%96%93%E3%81%AE%E9%83%A8%E4%BD%8D"><i class="fa fa-link"></i></a>人間の部位</h2>

<p><strong>OpenCVにデフォルトで入っているhaarでは検出できない人間の部位</strong> を検出するカスケードファイル。</p>

<h3>
<span id="肩" class="fragment"></span><a href="#%E8%82%A9"><i class="fa fa-link"></i></a>肩</h3>

<ul>
<li><a href="http://stackoverflow.com/questions/9015498/need-haar-casscades-for-nose-eyes-lipsmouth" rel="nofollow noopener" target="_blank">Need Haar Casscades for Nose, Eyes &amp; Lips(Mouth)</a></li>
<li>"Try this one: mozart.dis.ulpgc.es/pub/Software/HaarClassifiers/… It's a set of haar cascades for face features." とあるコメントから、DLできるzipに、肩と頭 (Head and shoulders) を検出するカスケードファイルが入っている</li>
</ul>

<h3>
<span id="oppai" class="fragment"></span><a href="#oppai"><i class="fa fa-link"></i></a>Oppai</h3>

<ul>
<li><a href="http://yusukebe.com/archives/20080725/083750.html" rel="nofollow noopener" target="_blank">Oppai-Detect 2 @ CodereposCon#1</a></li>
<li>記事内に "cascade_oppai.xml" というカスケードファイルへのリンクあり</li>
<li>ただしリンクをから飛べなかったので、今は公開されていないのかもしれません</li>
</ul>

<h3>
<span id="笑顔" class="fragment"></span><a href="#%E7%AC%91%E9%A1%94"><i class="fa fa-link"></i></a>笑顔</h3>

<ul>
<li><a href="https://github.com/hromi/SMILEsmileD" rel="nofollow noopener" target="_blank">SMILEsmileD</a></li>
<li>これは <a href="http://d.hatena.ne.jp/shu223/20130924/1379990718" rel="nofollow noopener" target="_blank">iOS7 から Core Image でできる</a>
</li>
<li>学習用データセットもリポジトリに入っている</li>
</ul>

<h3>
<span id="手ジェスチャー" class="fragment"></span><a href="#%E6%89%8B%E3%82%B8%E3%82%A7%E3%82%B9%E3%83%81%E3%83%A3%E3%83%BC"><i class="fa fa-link"></i></a>手／ジェスチャー</h3>

<ul>
<li><a href="https://code.google.com/p/ehci/wiki/HandTracking" rel="nofollow noopener" target="_blank">EHCI 6 degrees of freedom hand tracker</a></li>
<li>ソース一式がDLできて、aGest.xml というカスケードファイルが入っている</li>
</ul>

<p><a href="https://camo.qiitausercontent.com/0b51a6eacfe6e44cdf00fb43c395202ac0e41957/687474703a2f2f662e636c2e6c792f6974656d732f30573167307231423178334a31323347307033752f76696f6c615f72315f63312e6a7067" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/0b51a6eacfe6e44cdf00fb43c395202ac0e41957/687474703a2f2f662e636c2e6c792f6974656d732f30573167307231423178334a31323347307033752f76696f6c615f72315f63312e6a7067" alt="" data-canonical-src="http://f.cl.ly/items/0W1g0r1B1x3J123G0p3u/viola_r1_c1.jpg"></a></p>

<h2>
<span id="ペン" class="fragment"></span><a href="#%E3%83%9A%E3%83%B3"><i class="fa fa-link"></i></a>ペン</h2>

<h3>
<span id="all-about-opencv-creating-a-haar-cascade-classifier-aka-haar-training" class="fragment"></span><a href="#all-about-opencv-creating-a-haar-cascade-classifier-aka-haar-training"><i class="fa fa-link"></i></a><a href="http://opencvuser.blogspot.in/2011/08/creating-haar-cascade-classifier-aka.html" rel="nofollow noopener" target="_blank">All about openCV: Creating a haar cascade classifier aka haar training</a>
</h3>

<ul>
<li>Pen detector という <strong>ペンを検出</strong> するカスケードファイルをダウンロードできます</li>
</ul>

<p><a href="https://camo.qiitausercontent.com/41554da9788c549b5870fed5cf0f50143a9d8d68/687474703a2f2f662e636c2e6c792f6974656d732f33423243333134353262325330563379337a32392f7069322e6a7067" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/41554da9788c549b5870fed5cf0f50143a9d8d68/687474703a2f2f662e636c2e6c792f6974656d732f33423243333134353262325330563379337a32392f7069322e6a7067" alt="" data-canonical-src="http://f.cl.ly/items/3B2C31452b2S0V3y3z29/pi2.jpg"></a></p>

<h2>
<span id="その他" class="fragment"></span><a href="#%E3%81%9D%E3%81%AE%E4%BB%96"><i class="fa fa-link"></i></a>その他</h2>

<p>見つけ次第随時追加していきます。ご存知の方はぜひコメント欄などでご連絡ください！</p>

<h2>
<span id="実装サンプル画像から車を検出する" class="fragment"></span><a href="#%E5%AE%9F%E8%A3%85%E3%82%B5%E3%83%B3%E3%83%97%E3%83%AB%E7%94%BB%E5%83%8F%E3%81%8B%E3%82%89%E8%BB%8A%E3%82%92%E6%A4%9C%E5%87%BA%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>実装サンプル：画像から車を検出する</h2>

<p>まず、 <strong>OpenCV for iOS の導入方法</strong> 等、基本的なところは下記をご覧ください。</p>

<p><a href="http://qiita.com/shu223/items/3ff48a8bd6edd910e780">OpenCV for iOSの使い方</a></p>

<p>上記記事で使っている OpenCVHelper.mm に、次のようなメソッドを追加します。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>+ (UIImage *)detect:(UIImage *)srcImage cascade:(NSString *)cascadeFilename {

    cv::Mat srcMat = [OpenCVHelper cvMatFromUIImage:srcImage];

    // グレースケール画像に変換
    cv::Mat grayMat;
    cv::cvtColor(srcMat, grayMat, CV_BGR2GRAY);

    // 分類器の読み込み
    NSString *path = [[NSBundle mainBundle] pathForResource:cascadeFilename
                                                     ofType:nil];
    std::string cascade_path = (char *)[path UTF8String];
    cv::CascadeClassifier cascade;

    if (!cascade.load(cascade_path)) {

        NSLog(@"Couldn't load haar cascade file.");
        return nil;
    }

    // 探索
    std::vector&lt;cv::Rect&gt; objects;
    cascade.detectMultiScale(grayMat, objects,      // 画像，出力矩形
                             1.1, 1,                // 縮小スケール，最低矩形数
                             CV_HAAR_SCALE_IMAGE,   // （フラグ）
                             cv::Size(40, 40));     // 最小矩形

    // 結果の描画
    std::vector&lt;cv::Rect&gt;::const_iterator r = objects.begin();
    for(; r != objects.end(); ++r) {
        cv::Point center;
        int radius;
        center.x = cv::saturate_cast&lt;int&gt;((r-&gt;x + r-&gt;width*0.5));
        center.y = cv::saturate_cast&lt;int&gt;((r-&gt;y + r-&gt;height*0.5));
        radius = cv::saturate_cast&lt;int&gt;((r-&gt;width + r-&gt;height)*0.25);
        cv::circle(srcMat, center, radius, cv::Scalar(80,80,255), 3, 8, 0 );
    }

    return [OpenCVHelper UIImageFromCVMat:srcMat];
}
</pre></div></div>

<p>前述した "Vehicle Detection" のページからカスケードファイル"haarcascade_car_1.xml" をダウンロードしてきて（リンクはよく探してみてください）、 プロジェクトに追加します。</p>

<p>そして、先ほど実装した <code>detect:cascade:</code> メソッドを使用して、</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>self.imageView.image = [OpenCVHelper detect:self.imageView.image
                                    cascade:@"haarcascade_car_1.xml"];
</pre></div></div>

<p>とやると、次のように車を検出できるようになります。</p>

<p><a href="https://camo.qiitausercontent.com/5f34da39b9348bfcca06526cfbff9c7b174c6f51/687474703a2f2f662e636c2e6c792f6974656d732f336a32463367326b32523365315133713037334a2f726573756c745f2e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/5f34da39b9348bfcca06526cfbff9c7b174c6f51/687474703a2f2f662e636c2e6c792f6974656d732f336a32463367326b32523365315133713037334a2f726573756c745f2e706e67" alt="" data-canonical-src="http://f.cl.ly/items/3j2F3g2k2R3e1Q3q073J/result_.png"></a></p>

<h2>
<span id="サンプルダウンロード" class="fragment"></span><a href="#%E3%82%B5%E3%83%B3%E3%83%97%E3%83%AB%E3%83%80%E3%82%A6%E3%83%B3%E3%83%AD%E3%83%BC%E3%83%89"><i class="fa fa-link"></i></a>サンプルダウンロード</h2>

<p>基本的に上記の手順通りに実装すればOKです。でも自分でつくるの面倒なのですぐにビルドできるものが欲しい！という方向けに、サンプルをgumroadよりダウンロードできるようにしました。</p>

<p><a href="https://gum.co/emov" class="autolink" rel="nofollow noopener" target="_blank">https://gum.co/emov</a></p>

<p>gumroadなので、 <strong>有料</strong> （102円）になります。サンプルはいらないけど記事が少しは役に立ったから寄付してやるか、というお気持ちもありがたく頂戴いたします。値段が中途半端なのは、gumroadの仕様のためです、スイマセン。繰り返しになりますが、 <strong>上記手順通りにやればOK（サンプルのダウンロードは不要）</strong> です。</p>

<h3>
<span id="注意点" class="fragment"></span><a href="#%E6%B3%A8%E6%84%8F%E7%82%B9"><i class="fa fa-link"></i></a>注意点</h3>

<ul>
<li>iOS 7.0 でのみ動作確認しております。</li>
<li>コードのみの販売です。サポート等はご容赦ください。</li>
</ul>

<h2>
<span id="参考書籍" class="fragment"></span><a href="#%E5%8F%82%E8%80%83%E6%9B%B8%E7%B1%8D"><i class="fa fa-link"></i></a>参考書籍</h2>

<p>Haar分類器の詳細や、OpenCVの各種学習ツールを使ったカスケードファイルの生成方法は、以下の書籍に詳しいです。</p>

<p></p><div class="">
<div class=""><a href="http://www.amazon.co.jp/exec/obidos/ASIN/4873114136/22301-22/ref=nosim/" rel="nofollow noopener" target="_blank"><img src="https://camo.qiitausercontent.com/3eb085c1998a908326eb9965ae4aa0c52a167ad5/687474703a2f2f6563782e696d616765732d616d617a6f6e2e636f6d2f696d616765732f492f353135796878674650444c2e5f534c3136305f2e6a7067" alt="詳解 OpenCV ―コンピュータビジョンライブラリを使った画像処理・認識" data-canonical-src="http://ecx.images-amazon.com/images/I/515yhxgFPDL._SL160_.jpg"></a></div>
<div class=""><div class="">
<a href="http://www.amazon.co.jp/exec/obidos/ASIN/4873114136/22301-22/ref=nosim/" rel="nofollow noopener" target="_blank">詳解 OpenCV ―コンピュータビジョンライブラリを使った画像処理・認識</a>

<p>広範囲な内容が640ページにわたってわかりやすく解説されていて、訳文もものすごく読みやすいので、超オススメです。</p>

<p>また、拙著でも、 <strong>画像処理関係のレシピ</strong> を多く取り上げております。下記記事にて内容をご確認いただき、もしよろしければ！</p>

<p><a href="http://d.hatena.ne.jp/shu223/20130528/1369714635" rel="nofollow noopener" target="_blank">『iOSアプリ開発 達人のレシピ100』という本を書きました</a></p>

<p><a href="https://camo.qiitausercontent.com/bbe113a999ffee813898e1d98f185f6a36f494db/687474703a2f2f6563782e696d616765732d616d617a6f6e2e636f6d2f696d616765732f492f35317862347737686f494c2e5f534c3136305f2e6a7067" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/bbe113a999ffee813898e1d98f185f6a36f494db/687474703a2f2f6563782e696d616765732d616d617a6f6e2e636f6d2f696d616765732f492f35317862347737686f494c2e5f534c3136305f2e6a7067" alt="" data-canonical-src="http://ecx.images-amazon.com/images/I/51xb4w7hoIL._SL160_.jpg"></a></p>
</div></div>
</div></div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>shu223さんの<br />3位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>654</kbd>
		<a target="_blank" href="https://qiita.com/shu223/items/a99ed643b9f0b2ed4254">評判のいいiOSアプリ開発のTips ベスト20</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-05-01 11:54:17</center>
	</td>
	<td style="width:200px;">
		@shu223<br />(Freelancer 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/3180/profile-images/1473682733">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Objective-C]</b> <b>[iPhone]</b> <b>[Xcode]</b> <b>[iOS]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>『<a href="http://www.facebook.com/iOSDevTips" rel="nofollow noopener" target="_blank">iOSアプリ開発に役立つTips</a>』という Facebook ページをやっておりまして、そこで<strong>評判が良かった投稿</strong>を 20 個ほど紹介します。（※ Facebook ページの insights にある「クチコミ度」の高いもの）</p>

<h2>
<span id="アプリ実行中にコードを修正してそのまま実行中のアプリに反映させる" class="fragment"></span><a href="#%E3%82%A2%E3%83%97%E3%83%AA%E5%AE%9F%E8%A1%8C%E4%B8%AD%E3%81%AB%E3%82%B3%E3%83%BC%E3%83%89%E3%82%92%E4%BF%AE%E6%AD%A3%E3%81%97%E3%81%A6%E3%81%9D%E3%81%AE%E3%81%BE%E3%81%BE%E5%AE%9F%E8%A1%8C%E4%B8%AD%E3%81%AE%E3%82%A2%E3%83%97%E3%83%AA%E3%81%AB%E5%8F%8D%E6%98%A0%E3%81%95%E3%81%9B%E3%82%8B"><i class="fa fa-link"></i></a>アプリ実行中にコードを修正してそのまま実行中のアプリに反映させる</h2>

<p>アプリ実行中にコードを修正してそのまま実行中のアプリに反映させることができるXcodeプラグイン。</p>

<p>実機でもシミュレータでも使用可能とのこと。実機での動作検証中に修正して再インストールは時間かかるので、超ありがたいかも。</p>

<p><a href="http://injectionforxcode.com/" rel="nofollow noopener" target="_blank">Injection for Xcode</a></p>

<p><a href="http://www.facebook.com/iOSDevTips/posts/600082166672616" rel="nofollow noopener" target="_blank">投稿：2013/2/4</a></p>

<h2>
<span id="pcのwebブラウザからiphoneのカメラロールにアクセスできるようにするアプリのしくみ" class="fragment"></span><a href="#pc%E3%81%AEweb%E3%83%96%E3%83%A9%E3%82%A6%E3%82%B6%E3%81%8B%E3%82%89iphone%E3%81%AE%E3%82%AB%E3%83%A1%E3%83%A9%E3%83%AD%E3%83%BC%E3%83%AB%E3%81%AB%E3%82%A2%E3%82%AF%E3%82%BB%E3%82%B9%E3%81%A7%E3%81%8D%E3%82%8B%E3%82%88%E3%81%86%E3%81%AB%E3%81%99%E3%82%8B%E3%82%A2%E3%83%97%E3%83%AA%E3%81%AE%E3%81%97%E3%81%8F%E3%81%BF"><i class="fa fa-link"></i></a>「PCのwebブラウザからiPhoneのカメラロールにアクセスできるようにするアプリ」のしくみ</h2>

<p>PCのwebブラウザからカメラロールにアクセスできるようにするアプリ。</p>

<p>アプリ側でURLを発行している画面キャプチャがあるので、<strong>アプリにHTTPサーバ機能をもたせて</strong>（古いけどCocoaHttpServerとか）、<strong>アプリ側でカメラロールにアクセスしてその情報をweb経由で見せる</strong>、というしくみでしょうか。</p>

<p><a href="https://camo.qiitausercontent.com/77e63d2c50d2672b3f88e6435fd6d41d0e957d96/687474703a2f2f65787465726e616c2e616b2e666263646e2e6e65742f736166655f696d6167652e7068703f643d415143766c7557326f4866685435703426773d31353526683d3131342675726c3d68747470253341253246253246666565647461696c6f722e6a70253246777025324677702d636f6e74656e7425324675706c6f6164732532463230313325324630342532466169726c69625f3230313330343137303634392e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/77e63d2c50d2672b3f88e6435fd6d41d0e957d96/687474703a2f2f65787465726e616c2e616b2e666263646e2e6e65742f736166655f696d6167652e7068703f643d415143766c7557326f4866685435703426773d31353526683d3131342675726c3d68747470253341253246253246666565647461696c6f722e6a70253246777025324677702d636f6e74656e7425324675706c6f6164732532463230313325324630342532466169726c69625f3230313330343137303634392e706e67" alt="" data-canonical-src="http://external.ak.fbcdn.net/safe_image.php?d=AQCvluW2oHfhT5p4&amp;w=155&amp;h=114&amp;url=http%3A%2F%2Ffeedtailor.jp%2Fwp%2Fwp-content%2Fuploads%2F2013%2F04%2Fairlib_201304170649.png"></a></p>

<p><a href="http://feedtailor.jp/wp/?p=11580" rel="nofollow noopener" target="_blank">新作！iPhoneのカメラロールをブラウザからアクセス出来るようにするアプリ「AirLib」を公開します | 関西/大阪のiPhone・iPadアプリ開発 feedtailor Inc. 社長ブログ</a></p>

<p><a href="http://www.facebook.com/538949829459616/posts/572670282754237" rel="nofollow noopener" target="_blank">投稿：2013/4/15</a></p>

<h2>
<span id="イラレで書いたパスデータをuibezierpathのコードに変換してくれるイラレ拡張" class="fragment"></span><a href="#%E3%82%A4%E3%83%A9%E3%83%AC%E3%81%A7%E6%9B%B8%E3%81%84%E3%81%9F%E3%83%91%E3%82%B9%E3%83%87%E3%83%BC%E3%82%BF%E3%82%92uibezierpath%E3%81%AE%E3%82%B3%E3%83%BC%E3%83%89%E3%81%AB%E5%A4%89%E6%8F%9B%E3%81%97%E3%81%A6%E3%81%8F%E3%82%8C%E3%82%8B%E3%82%A4%E3%83%A9%E3%83%AC%E6%8B%A1%E5%BC%B5"><i class="fa fa-link"></i></a>イラレで書いたパスデータを、UIBezierPathのコードに変換してくれるイラレ拡張</h2>

<p>イラレで書いたパスデータを、UIBezierPathのコードに変換してくれるイラレの拡張。</p>

<p>UIBezierPathでコードだけでいい感じの図形とか画像を描くのは無理があるので、これは便利かも。</p>

<p><a href="http://drawscri.pt/" rel="nofollow noopener" target="_blank">Drawscript - convert Illustrator shapes into code</a></p>

<p><a href="http://www.facebook.com/538949829459616/posts/122493027943932" rel="nofollow noopener" target="_blank">投稿：2013/4/1</a></p>

<h2>
<span id="アプリを操作中の写真を自動生成してくれるサービス" class="fragment"></span><a href="#%E3%82%A2%E3%83%97%E3%83%AA%E3%82%92%E6%93%8D%E4%BD%9C%E4%B8%AD%E3%81%AE%E5%86%99%E7%9C%9F%E3%82%92%E8%87%AA%E5%8B%95%E7%94%9F%E6%88%90%E3%81%97%E3%81%A6%E3%81%8F%E3%82%8C%E3%82%8B%E3%82%B5%E3%83%BC%E3%83%93%E3%82%B9"><i class="fa fa-link"></i></a>「アプリを操作中の写真」を自動生成してくれるサービス</h2>

<p>スクリーンショットの画像をアップすると、<strong>ハメコミ合成で「アプリを操作中の写真」を自動生成</strong>してくれるサイト。</p>

<p>ちょっと手元のスクリーンショットでやってみましたがなかなかいい感じの仕上がりでした。</p>

<p><a href="https://camo.qiitausercontent.com/ed1be531019523ffff3c918aa738011d8bd1a1aa/687474703a2f2f65787465726e616c2e616b2e666263646e2e6e65742f736166655f696d6167652e7068703f643d4151416d6a6d334c37354238314e356926773d31353526683d3131342675726c3d68747470253341253246253246706c61636569742e627265657a692e636f6d25324675706c6f616473253246737461676525324673746167655f696d61676525324636362532467468756d625f627265657a695f706c61636569745f5f315f2e706e6725334631333631323938373734" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/ed1be531019523ffff3c918aa738011d8bd1a1aa/687474703a2f2f65787465726e616c2e616b2e666263646e2e6e65742f736166655f696d6167652e7068703f643d4151416d6a6d334c37354238314e356926773d31353526683d3131342675726c3d68747470253341253246253246706c61636569742e627265657a692e636f6d25324675706c6f616473253246737461676525324673746167655f696d61676525324636362532467468756d625f627265657a695f706c61636569745f5f315f2e706e6725334631333631323938373734" alt="" data-canonical-src="http://external.ak.fbcdn.net/safe_image.php?d=AQAmjm3L75B81N5i&amp;w=155&amp;h=114&amp;url=http%3A%2F%2Fplaceit.breezi.com%2Fuploads%2Fstage%2Fstage_image%2F66%2Fthumb_breezi_placeit__1_.png%3F1361298774"></a></p>

<p><a href="http://placeit.breezi.com/productshots/83" rel="nofollow noopener" target="_blank">PlaceIt by Breezi - Generate Product Screenshots in Realistic Environments</a></p>

<p><a href="http://www.facebook.com/538949829459616/posts/367630723354164" rel="nofollow noopener" target="_blank">投稿：2013/4/10</a></p>

<h2>
<span id="コマンドラインからjsonをごにょごにょする" class="fragment"></span><a href="#%E3%82%B3%E3%83%9E%E3%83%B3%E3%83%89%E3%83%A9%E3%82%A4%E3%83%B3%E3%81%8B%E3%82%89json%E3%82%92%E3%81%94%E3%81%AB%E3%82%87%E3%81%94%E3%81%AB%E3%82%87%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>コマンドラインからJSONをごにょごにょする</h2>

<p>特にiOSアプリ開発に限った話ではないのですが、jqという、「コマンドラインからJSONをごにょごにょできる」コマンドがかなり便利そうです。</p>

<p>たとえば、ルート直下の要素だけを取り出したい場合は、</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ jq ".[0]" hoge.json
</pre></div></div>

<p>"entities"要素内の"hashtags"要素内の"text"という要素を取り出したい場合は</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ jq ".[].entities.hashtags[].text" hoge.json
</pre></div></div>

<p>みたいな感じで簡単にとれて、はじめて使うAPIのレスポンスの構造を調べるときとかに活躍しそうです。</p>

<p><a href="http://beatsync.net/main/log20130428.html" rel="nofollow noopener" target="_blank">jqコマンドが実は高性能すぎてビビッた話</a></p>

<p><a href="http://www.facebook.com/538949829459616/posts/577161045638494" rel="nofollow noopener" target="_blank">投稿：2013/4/26</a></p>

<h2>
<span id="nsnumberformatterで英語の勉強" class="fragment"></span><a href="#nsnumberformatter%E3%81%A7%E8%8B%B1%E8%AA%9E%E3%81%AE%E5%8B%89%E5%BC%B7"><i class="fa fa-link"></i></a>NSNumberFormatterで英語の勉強</h2>

<p>NSNumberFormatterのいろいろなサンプル。3桁ごとにカンマ区切りにする「以外」のサンプルってあまり見つからないので参考になりました。</p>

<p>とくに、NSNumberFormatterSpellOutStyleがおもしろくて、たとえば、</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>[formatter setNumberStyle:NSNumberFormatterSpellOutStyle];
NSString *formattedOutput = [formatter stringFromNumber:@129];
</pre></div></div>

<p>こうやると、</p>

<blockquote>
<p>one hundred twenty-nine</p>
</blockquote>

<p>って出力してくれます。</p>

<p>これで英語の勉強アプリつくれそうです。</p>

<p><a href="http://iosdevelopertips.com/cocoa/formatting-numbers-nsnumberformatter-examples.html" rel="nofollow noopener" target="_blank">Formatting Numbers – NSNumberFormatter Examples</a></p>

<h2>
<span id="iphoneの設定から通信速度を制限する" class="fragment"></span><a href="#iphone%E3%81%AE%E8%A8%AD%E5%AE%9A%E3%81%8B%E3%82%89%E9%80%9A%E4%BF%A1%E9%80%9F%E5%BA%A6%E3%82%92%E5%88%B6%E9%99%90%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>iPhoneの設定から通信速度を制限する</h2>

<p>久しぶりに設定の「デベロッパ」のとこ見てみたら、この通信速度以外にも、iAdのテスト用設定とかも追加されてました。</p>

<p><a href="https://camo.qiitausercontent.com/7f4985428805eb18c40978657ce3c8da8abdc4ed/687474703a2f2f65787465726e616c2e616b2e666263646e2e6e65742f736166655f696d6167652e7068703f643d415141776a7a6252395161753755496926773d31353526683d3131342675726c3d6874747025334125324625324632352e6d656469612e74756d626c722e636f6d253246396332663438393236303765636434636234393234643463633039656666373225324674756d626c725f6d6934366774304c587131717a7a616f376f335f3430302e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/7f4985428805eb18c40978657ce3c8da8abdc4ed/687474703a2f2f65787465726e616c2e616b2e666263646e2e6e65742f736166655f696d6167652e7068703f643d415141776a7a6252395161753755496926773d31353526683d3131342675726c3d6874747025334125324625324632352e6d656469612e74756d626c722e636f6d253246396332663438393236303765636434636234393234643463633039656666373225324674756d626c725f6d6934366774304c587131717a7a616f376f335f3430302e706e67" alt="" data-canonical-src="http://external.ak.fbcdn.net/safe_image.php?d=AQAwjzbR9Qau7UIi&amp;w=155&amp;h=114&amp;url=http%3A%2F%2F25.media.tumblr.com%2F9c2f4892607ecd4cb4924d4cc09eff72%2Ftumblr_mi46gt0LXq1qzzao7o3_400.png"></a></p>

<p><a href="http://qiita.com/items/efd3a033ac42afd93714">iPhone5実機(iOS6.0.2)で通信速度を制限する #iOS #iPhone - Qiita</a></p>

<p><a href="http://www.facebook.com/iOSDevTips/posts/420807358006603" rel="nofollow noopener" target="_blank">投稿：2013/2/14</a></p>

<h2>
<span id="core-animation-programming-guide大幅改定" class="fragment"></span><a href="#core-animation-programming-guide%E5%A4%A7%E5%B9%85%E6%94%B9%E5%AE%9A"><i class="fa fa-link"></i></a>『Core Animation Programming Guide』大幅改定</h2>

<p>『Core Animation Programming Guide』が大幅改定されたもよう。前回の更新から実に2年4ヶ月ぶり。『Animation Types and Timing Programming Guide』の内容もこっちに組み込んだとのこと。</p>

<p><a href="http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/CoreAnimation_guide/" rel="nofollow noopener" target="_blank">Core Animation Programming Guide</a></p>

<p><a href="http://www.facebook.com/538949829459616/posts/299365523522567" rel="nofollow noopener" target="_blank">投稿：2013/2/19</a></p>

<h2>
<span id="caemitterlayer-caemittercellを使ったパーティクルエフェクトの実装方法" class="fragment"></span><a href="#caemitterlayer-caemittercell%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%9F%E3%83%91%E3%83%BC%E3%83%86%E3%82%A3%E3%82%AF%E3%83%AB%E3%82%A8%E3%83%95%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AE%E5%AE%9F%E8%A3%85%E6%96%B9%E6%B3%95"><i class="fa fa-link"></i></a>CAEmitterLayer, CAEmitterCellを使ったパーティクルエフェクトの実装方法</h2>

<p>iOS5からCore Animationに追加された、CAEmitterLayer, CAEmitterCellを使ったパーティクルエフェクトの実装方法について書きました。</p>

<p><a href="http://d.hatena.ne.jp/shu223/20130315/1363298992" rel="nofollow noopener" target="_blank">UIKit上でパーティクルエフェクトを表示する - Over&amp;Out その後</a></p>

<p><a href="http://www.facebook.com/538949829459616/posts/217483281727841" rel="nofollow noopener" target="_blank">投稿：2013/3/13</a></p>

<h2>
<span id="コマンドラインからipaをつくる" class="fragment"></span><a href="#%E3%82%B3%E3%83%9E%E3%83%B3%E3%83%89%E3%83%A9%E3%82%A4%E3%83%B3%E3%81%8B%E3%82%89ipa%E3%82%92%E3%81%A4%E3%81%8F%E3%82%8B"><i class="fa fa-link"></i></a>コマンドラインから.ipaをつくる</h2>

<p>コマンドラインから.ipaをつくると"make adhoc"だけでできて楽ですよ、という話。</p>

<p>最初だけMakefileをつくるひと手間が必要ですが、curlコマンドも書いておけばビルド完了後に自動でtestflightにアップもできる、というのは便利そうと思いました。</p>

<p><a href="http://blog.ishkawa.org/blog/2013/02/27/make-ipa/" rel="nofollow noopener" target="_blank">.ipaをサッとつくる - blog.ishkawa.org</a></p>

<p><a href="http://www.facebook.com/538949829459616/posts/588602487834938" rel="nofollow noopener" target="_blank">投稿：2013/3/11</a></p>

<h2>
<span id="バッテリーの超詳細情報を取得する" class="fragment"></span><a href="#%E3%83%90%E3%83%83%E3%83%86%E3%83%AA%E3%83%BC%E3%81%AE%E8%B6%85%E8%A9%B3%E7%B4%B0%E6%83%85%E5%A0%B1%E3%82%92%E5%8F%96%E5%BE%97%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>バッテリーの超詳細情報を取得する</h2>

<p>これを実機で実行すると、バッテリーの相当細かい情報まで取得できます。電圧までとれる。</p>

<p>ここまでとれるのか〜、とソースの中身みてみると、もろにプライベートAPI使ってました。。OSDBatteryっていうクラスがあるようです。</p>

<p><a href="https://github.com/lyonanderson/BatteryInfo/" rel="nofollow noopener" target="_blank">BatteryInfo</a></p>

<p><a href="http://www.facebook.com/538949829459616/posts/575521922469073" rel="nofollow noopener" target="_blank">投稿：2013/4/23</a></p>

<h2>
<span id="自然言語のテキストを属性で区分" class="fragment"></span><a href="#%E8%87%AA%E7%84%B6%E8%A8%80%E8%AA%9E%E3%81%AE%E3%83%86%E3%82%AD%E3%82%B9%E3%83%88%E3%82%92%E5%B1%9E%E6%80%A7%E3%81%A7%E5%8C%BA%E5%88%86"><i class="fa fa-link"></i></a>自然言語のテキストを属性で区分</h2>

<p>NSLinguisticTaggerについて書きました。</p>

<p>自然言語のテキストを品詞（名詞、動詞、代名詞）や「個人名」「地名」といった属性で区分することができます。あと、日本語の形態素解析も可能です。</p>

<p><a href="https://camo.qiitausercontent.com/6319df4ee1afae2a47ae5af5eac36d0ba1059b37/687474703a2f2f65787465726e616c2e616b2e666263646e2e6e65742f736166655f696d6167652e7068703f643d4151427148683933677443485a36417226773d31353526683d3131342675726c3d68747470253341253246253246662e636c2e6c792532466974656d732532463433306d32323145336b337a30693166327231512532464c696e67756973746963546167676572315f72315f63312e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/6319df4ee1afae2a47ae5af5eac36d0ba1059b37/687474703a2f2f65787465726e616c2e616b2e666263646e2e6e65742f736166655f696d6167652e7068703f643d4151427148683933677443485a36417226773d31353526683d3131342675726c3d68747470253341253246253246662e636c2e6c792532466974656d732532463433306d32323145336b337a30693166327231512532464c696e67756973746963546167676572315f72315f63312e706e67" alt="" data-canonical-src="http://external.ak.fbcdn.net/safe_image.php?d=AQBqHh93gtCHZ6Ar&amp;w=155&amp;h=114&amp;url=http%3A%2F%2Ff.cl.ly%2Fitems%2F430m221E3k3z0i1f2r1Q%2FLinguisticTagger1_r1_c1.png"></a></p>

<p><a href="http://d.hatena.ne.jp/shu223/20130318/1363566717" rel="nofollow noopener" target="_blank">自然言語のテキストを属性で区分する - Over&amp;Out その後</a></p>

<p><a href="http://www.facebook.com/538949829459616/posts/551597251540891" rel="nofollow noopener" target="_blank">投稿：2013/3/16</a></p>

<h2>
<span id="auto-layoutの詳説スライド" class="fragment"></span><a href="#auto-layout%E3%81%AE%E8%A9%B3%E8%AA%AC%E3%82%B9%E3%83%A9%E3%82%A4%E3%83%89"><i class="fa fa-link"></i></a>Auto Layoutの詳説スライド</h2>

<p>70ページにわたるAuto Layoutの解説スライド（日本語）</p>

<p>Auto Layoutの基礎知識から、IBでの設定方法、ソースでの設定方法などなど。</p>

<p><a href="https://camo.qiitausercontent.com/947792dc8c5b9e713b4d9470cc1d8f566f6be886/687474703a2f2f65787465726e616c2e616b2e666263646e2e6e65742f736166655f696d6167652e7068703f643d4151434571764b683651653877626e4326773d31353526683d3131342675726c3d68747470253341253246253246696d6167652e736c696465736861726563646e2e636f6d253246696f736175746f6c61796f75742d3132313231313031313635322d70687061707030312532463935253246736c6964652d312d313032342e6a7067" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/947792dc8c5b9e713b4d9470cc1d8f566f6be886/687474703a2f2f65787465726e616c2e616b2e666263646e2e6e65742f736166655f696d6167652e7068703f643d4151434571764b683651653877626e4326773d31353526683d3131342675726c3d68747470253341253246253246696d6167652e736c696465736861726563646e2e636f6d253246696f736175746f6c61796f75742d3132313231313031313635322d70687061707030312532463935253246736c6964652d312d313032342e6a7067" alt="" data-canonical-src="http://external.ak.fbcdn.net/safe_image.php?d=AQCEqvKh6Qe8wbnC&amp;w=155&amp;h=114&amp;url=http%3A%2F%2Fimage.slidesharecdn.com%2Fiosautolayout-121211011652-phpapp01%2F95%2Fslide-1-1024.jpg"></a></p>

<p><a href="http://www.slideshare.net/classmethod/i-os-auto-layout" rel="nofollow noopener" target="_blank">iOS6 Auto Layout</a></p>

<p><a href="http://www.facebook.com/iOSDevTips/posts/307662352688900" rel="nofollow noopener" target="_blank">投稿</a></p>

<h2>
<span id="画像を使用せずアイコンを描画" class="fragment"></span><a href="#%E7%94%BB%E5%83%8F%E3%82%92%E4%BD%BF%E7%94%A8%E3%81%9B%E3%81%9A%E3%82%A2%E3%82%A4%E3%82%B3%E3%83%B3%E3%82%92%E6%8F%8F%E7%94%BB"><i class="fa fa-link"></i></a>画像を使用せずアイコンを描画</h2>

<p>FacebookとかTwitterアイコンのUIButtonを描画してくれるOSS。</p>

<p>UIBezierPathでパス描画してUIImageを生成してるので画像ファイル不使用。与えたサイズに対して相対位置で描画するように実装してあるので大きさも自在。</p>

<p><a href="https://github.com/goncz9/GRButtons" rel="nofollow noopener" target="_blank">GRButtons</a></p>

<p><a href="http://www.facebook.com/538949829459616/posts/607527675930034" rel="nofollow noopener" target="_blank">投稿</a></p>

<h2>
<span id="macのキーボードからiphoneに文字入力" class="fragment"></span><a href="#mac%E3%81%AE%E3%82%AD%E3%83%BC%E3%83%9C%E3%83%BC%E3%83%89%E3%81%8B%E3%82%89iphone%E3%81%AB%E6%96%87%E5%AD%97%E5%85%A5%E5%8A%9B"><i class="fa fa-link"></i></a>MacのキーボードからiPhoneに文字入力</h2>

<p>MacのキーボードからiPhoneとかiPadの文字入力できるようになります。今設定してみたばかりだけど超便利な予感。</p>

<p><a href="https://camo.qiitausercontent.com/da669abc8af68ff7df55ee73532da82a9fed4560/687474703a2f2f65787465726e616c2e616b2e666263646e2e6e65742f736166655f696d6167652e7068703f643d41514258655944366c787a414d59774526773d31353526683d3131342675726c3d687474702533412532462532466c697665646f6f722e626c6f67696d672e6a702532466c6173686f77253246696d6773253246392532463725324639373836393466312e6a7067" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/da669abc8af68ff7df55ee73532da82a9fed4560/687474703a2f2f65787465726e616c2e616b2e666263646e2e6e65742f736166655f696d6167652e7068703f643d41514258655944366c787a414d59774526773d31353526683d3131342675726c3d687474702533412532462532466c697665646f6f722e626c6f67696d672e6a702532466c6173686f77253246696d6773253246392532463725324639373836393466312e6a7067" alt="" data-canonical-src="http://external.ak.fbcdn.net/safe_image.php?d=AQBXeYD6lxzAMYwE&amp;w=155&amp;h=114&amp;url=http%3A%2F%2Flivedoor.blogimg.jp%2Flashow%2Fimgs%2F9%2F7%2F978694f1.jpg"></a></p>

<p><a href="http://blog.livedoor.jp/lashow/archives/4267145.html" rel="nofollow noopener" target="_blank">MacをWinodwsのキーボードにできるアプリ、1Keyboardが理想的すぎて感動した : しょぼいエンジニアが教えたいこと</a></p>

<p><a href="http://www.facebook.com/iOSDevTips/posts/516824555023406" rel="nofollow noopener" target="_blank">投稿</a></p>

<h2>
<span id="ファイルテンプレートの詳細な解説ページ" class="fragment"></span><a href="#%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%83%86%E3%83%B3%E3%83%97%E3%83%AC%E3%83%BC%E3%83%88%E3%81%AE%E8%A9%B3%E7%B4%B0%E3%81%AA%E8%A7%A3%E8%AA%AC%E3%83%9A%E3%83%BC%E3%82%B8"><i class="fa fa-link"></i></a>ファイルテンプレートの詳細な解説ページ</h2>

<p>Xcode4の、ファイルテンプレートまわりの詳細な解説ページ。</p>

<p>TemplateInfo.plistの各要素の説明とか、"<strong><em>FILEBASENAMEASIDENTIFIER</em></strong>"とかのテンプレート関連マクロが何に展開されるか等、とにかく徹底解説な感じです。</p>

<p>このあたりは<strong>Appleの正式なドキュメントがない</strong>ので、レア情報かと。</p>

<p><a href="https://camo.qiitausercontent.com/11ea596137c74d96f0b64397c7ed447432849e3d/687474703a2f2f65787465726e616c2e616b2e666263646e2e6e65742f736166655f696d6167652e7068703f643d4151446975506478514c546d304c506926773d31353426683d3135342675726c3d687474702533412532462532467777772e626f626d6363756e652e636f6d25324677702d636f6e74656e7425324675706c6f616473253246323031322532463033253246637573746f6d5f74656d706c6174652e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/11ea596137c74d96f0b64397c7ed447432849e3d/687474703a2f2f65787465726e616c2e616b2e666263646e2e6e65742f736166655f696d6167652e7068703f643d4151446975506478514c546d304c506926773d31353426683d3135342675726c3d687474702533412532462532467777772e626f626d6363756e652e636f6d25324677702d636f6e74656e7425324675706c6f616473253246323031322532463033253246637573746f6d5f74656d706c6174652e706e67" alt="" data-canonical-src="http://external.ak.fbcdn.net/safe_image.php?d=AQDiuPdxQLTm0LPi&amp;w=154&amp;h=154&amp;url=http%3A%2F%2Fwww.bobmccune.com%2Fwp-content%2Fuploads%2F2012%2F03%2Fcustom_template.png"></a></p>

<p><a href="http://rypearts.com/proof/bob/r1/2012/03/04/creating-custom-xcode-4-file-templates/" rel="nofollow noopener" target="_blank">Creating Custom Xcode 4 File Templates</a></p>

<h2>
<span id="画面の解像度種別を返してくれるカテゴリ" class="fragment"></span><a href="#%E7%94%BB%E9%9D%A2%E3%81%AE%E8%A7%A3%E5%83%8F%E5%BA%A6%E7%A8%AE%E5%88%A5%E3%82%92%E8%BF%94%E3%81%97%E3%81%A6%E3%81%8F%E3%82%8C%E3%82%8B%E3%82%AB%E3%83%86%E3%82%B4%E3%83%AA"><i class="fa fa-link"></i></a>画面の解像度種別を返してくれるカテゴリ</h2>

<p>iPhone5の画面サイズ対応についての質問と回答。回答２つめあたりの、UIDevice+Resolutionsっていう<strong>enumで定義した画面の解像度種別を返してくれるカテゴリ</strong>はつくっとくと便利そう。</p>

<p><a href="https://camo.qiitausercontent.com/3bc65b7b8e0369be399571e75d0030ce06c0a496/687474703a2f2f65787465726e616c2e616b2e666263646e2e6e65742f736166655f696d6167652e7068703f643d415142597374624f4c7556347538566926773d31353526683d3131342675726c3d68747470253341253246253246692e737461636b2e696d6775722e636f6d253246425865754b2e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/3bc65b7b8e0369be399571e75d0030ce06c0a496/687474703a2f2f65787465726e616c2e616b2e666263646e2e6e65742f736166655f696d6167652e7068703f643d415142597374624f4c7556347538566926773d31353526683d3131342675726c3d68747470253341253246253246692e737461636b2e696d6775722e636f6d253246425865754b2e706e67" alt="" data-canonical-src="http://external.ak.fbcdn.net/safe_image.php?d=AQBYstbOLuV4u8Vi&amp;w=155&amp;h=114&amp;url=http%3A%2F%2Fi.stack.imgur.com%2FBXeuK.png"></a></p>

<p><a href="http://stackoverflow.com/questions/12396545/ios-6-apps-how-to-deal-with-iphone-5-screen-size" rel="nofollow noopener" target="_blank">iOS 6 apps - how to deal with iPhone 5 screen size? - Stack Overflow</a></p>

<p><a href="http://www.facebook.com/iOSDevTips/posts/551523098206360" rel="nofollow noopener" target="_blank">投稿</a></p>

<h2>
<span id="appstoreのレビューをスクレイピングしてdbに保存" class="fragment"></span><a href="#appstore%E3%81%AE%E3%83%AC%E3%83%93%E3%83%A5%E3%83%BC%E3%82%92%E3%82%B9%E3%82%AF%E3%83%AC%E3%82%A4%E3%83%94%E3%83%B3%E3%82%B0%E3%81%97%E3%81%A6db%E3%81%AB%E4%BF%9D%E5%AD%98"><i class="fa fa-link"></i></a>AppStoreのレビューをスクレイピングしてDBに保存</h2>

<p>AppStoreのレビューをスクレイピングしてDBに保存したり表示したりするツール。</p>

<p>保存したレビューの一覧表示だけじゃなく、★の数を集計してグラフ表示したり、頻出キーワードを抽出したりもできるとのこと。</p>

<p><a href="https://github.com/punchdrunker/AppReviewViewer" rel="nofollow noopener" target="_blank">AppReviewViewer</a></p>

<p><a href="http://www.facebook.com/538949829459616/posts/309018215888340" rel="nofollow noopener" target="_blank">投稿</a></p>

<h2>
<span id="iosアプリ開発の細かい仕事で小遣い稼ぎ" class="fragment"></span><a href="#ios%E3%82%A2%E3%83%97%E3%83%AA%E9%96%8B%E7%99%BA%E3%81%AE%E7%B4%B0%E3%81%8B%E3%81%84%E4%BB%95%E4%BA%8B%E3%81%A7%E5%B0%8F%E9%81%A3%E3%81%84%E7%A8%BC%E3%81%8E"><i class="fa fa-link"></i></a>iOSアプリ開発の細かい仕事で小遣い稼ぎ</h2>

<p>仕事をアウトソースできるwebサービス。Skill RequiredをiPhoneに絞ると結構iOSアプリ開発まわりの仕事もでてきます。</p>

<p>アプリまるっと作ってくれ系は安すぎるものが目立ちますが、リンク先はGPUImageの調整をしてほしいというもので、こういう細かい仕事は小遣い稼ぎにはいいかもしれません。（この案件は既にclose）</p>

<p><a href="https://camo.qiitausercontent.com/0d9e30202e2c8c0ab12e3605cd0c73eaf1f8277d/687474703a2f2f65787465726e616c2e616b2e666263646e2e6e65742f736166655f696d6167652e7068703f643d415142374a6478596f65535f6d67525126773d31353526683d3131342675726c3d6874747025334125324625324663646e342e662d63646e2e636f6d253246696d67253246667265656c616e63657266622e6a70672533467625334438353939333262356663323436656263343865663663373131656337323136612532366d25334431" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/0d9e30202e2c8c0ab12e3605cd0c73eaf1f8277d/687474703a2f2f65787465726e616c2e616b2e666263646e2e6e65742f736166655f696d6167652e7068703f643d415142374a6478596f65535f6d67525126773d31353526683d3131342675726c3d6874747025334125324625324663646e342e662d63646e2e636f6d253246696d67253246667265656c616e63657266622e6a70672533467625334438353939333262356663323436656263343865663663373131656337323136612532366d25334431" alt="" data-canonical-src="http://external.ak.fbcdn.net/safe_image.php?d=AQB7JdxYoeS_mgRQ&amp;w=155&amp;h=114&amp;url=http%3A%2F%2Fcdn4.f-cdn.com%2Fimg%2Ffreelancerfb.jpg%3Fv%3D859932b5fc246ebc48ef6c711ec7216a%26m%3D1"></a></p>

<p><a href="http://www.freelancer.com/projects/iPhone-iPad/GPUImage-adjustment.html" rel="nofollow noopener" target="_blank">GPUImage adjustment | iPad | iPhone</a></p>

<p>[投稿]((<a href="http://www.facebook.com/iOSDevTips/posts/525518434137438" class="autolink" rel="nofollow noopener" target="_blank">http://www.facebook.com/iOSDevTips/posts/525518434137438</a>)</p>

<h2>
<span id="ビューにスポットライトをあてる" class="fragment"></span><a href="#%E3%83%93%E3%83%A5%E3%83%BC%E3%81%AB%E3%82%B9%E3%83%9D%E3%83%83%E3%83%88%E3%83%A9%E3%82%A4%E3%83%88%E3%82%92%E3%81%82%E3%81%A6%E3%82%8B"><i class="fa fa-link"></i></a>ビューにスポットライトをあてる</h2>

<p>スポットライトのように、中心をピークに、放射状に徐々に暗くするOSS。<code>addSpotlightInView:atPoint:</code> っていう感じで<strong>スポットライトをあてるビューと位置を指定するだけ</strong>なので直観的。</p>

<p>ソースを見たところ、内部実装としては、CoreGraphicsのCGGradientRefを使用して実装している。ちゃんと<strong>add/removeのときにふわっとするアニメーション</strong>も実装してある。</p>

<p><a href="https://camo.qiitausercontent.com/671b88931dcf155eb6175da21ac468c06fb02cd2/687474703a2f2f65787465726e616c2e616b2e666263646e2e6e65742f736166655f696d6167652e7068703f643d4151442d416f466345765258504e6f3726773d31353426683d3135342675726c3d6874747025334125324625324673332e616d617a6f6e6177732e636f6d253246636f636f61636f6e74726f6c735f70726f64756374696f6e253246696f735f73637265656e732532463136323025324666756c6c2e706e6725334631333630333436353232" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/671b88931dcf155eb6175da21ac468c06fb02cd2/687474703a2f2f65787465726e616c2e616b2e666263646e2e6e65742f736166655f696d6167652e7068703f643d4151442d416f466345765258504e6f3726773d31353426683d3135342675726c3d6874747025334125324625324673332e616d617a6f6e6177732e636f6d253246636f636f61636f6e74726f6c735f70726f64756374696f6e253246696f735f73637265656e732532463136323025324666756c6c2e706e6725334631333630333436353232" alt="" data-canonical-src="http://external.ak.fbcdn.net/safe_image.php?d=AQD-AoFcEvRXPNo7&amp;w=154&amp;h=154&amp;url=http%3A%2F%2Fs3.amazonaws.com%2Fcocoacontrols_production%2Fios_screens%2F1620%2Ffull.png%3F1360346522"></a></p>

<p><a href="http://www.cocoacontrols.com/controls/mlpspotlight" rel="nofollow noopener" target="_blank">MLPSpotlight for iOS - Cocoa Controls</a></p>

<h2>
<span id="おわりに" class="fragment"></span><a href="#%E3%81%8A%E3%82%8F%E3%82%8A%E3%81%AB"><i class="fa fa-link"></i></a>おわりに</h2>

<p>今回20個ほどピックアップしましたが、日々ちまちまと投稿しているので、Facebookページの方にはこの10倍ぐらいはTipsがたまってると思われます。</p>

<p><strong>「いいね！」しておくとTipsがタイムラインに流れる</strong>ようになるので、よろしければどうぞ！</p>

<p><a href="http://www.facebook.com/iOSDevTips" rel="nofollow noopener" target="_blank">iOSアプリ開発に役立つTips</a></p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>shu223さんの<br />4位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>446</kbd>
		<a target="_blank" href="https://qiita.com/shu223/items/170b899df86952544c17">Xcodeプロジェクト内のクラスの依存関係を図示する</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-01-10 18:18:31</center>
	</td>
	<td style="width:200px;">
		@shu223<br />(Freelancer 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/3180/profile-images/1473682733">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Python]</b> <b>[Objective-C]</b> <b>[iPhone]</b> <b>[Xcode]</b> <b>[iOS]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>他人から引き継いだプロジェクトの大まかな全体設計を把握したい場合、規模の大きいライブラリの一部だけ取り出して使用したい場合、複雑になってしまったコードをリファクタリングしたい場合等、プロジェクト内のクラスの依存関係が一望できると有益な場面は多いのではないでしょうか。</p>

<p>objc_depというスクリプトを用いると、下記のように、Xcodeプロジェクト内のクラスの依存関係を示す図をコマンド一発で生成することができます。</p>

<p><a href="https://camo.qiitausercontent.com/392f864ace97f946d5ec7917fbb284666e825f48/687474703a2f2f662e636c2e6c792f6974656d732f336134303277326e326e334431713153315632622f44657053616d706c652e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/392f864ace97f946d5ec7917fbb284666e825f48/687474703a2f2f662e636c2e6c792f6974656d732f336134303277326e326e334431713153315632622f44657053616d706c652e706e67" alt="依存関係図のサンプル" data-canonical-src="http://f.cl.ly/items/3a402w2n2n3D1q1S1V2b/DepSample.png"></a></p>

<p>このスクリプトの使い方、生成される図の見方等を紹介します。</p>

<h2>
<span id="スクリプトの実行方法" class="fragment"></span><a href="#%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%97%E3%83%88%E3%81%AE%E5%AE%9F%E8%A1%8C%E6%96%B9%E6%B3%95"><i class="fa fa-link"></i></a>スクリプトの実行方法</h2>

<p>次のURLからダウンロードしてきて解凍すると、objc_dep.py というファイルが入っています。</p>

<p><a href="https://github.com/nst/objc_dep" rel="nofollow noopener" target="_blank">https://github.com/nst/objc_dep</a> </p>

<p>そのスクリプトを適当な場所に置き、ターミナルから次のように実行します。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ python objc_dep.py {プロジェクトのパス} &gt; {出力ファイル名}.dot
</pre></div></div>

<p>たとえばホーム直下にDemoというプロジェクトフォルダがあり、demo.dotというファイル名で出力したい場合は、</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ python objc_dep.py ~/Demo &gt; demo.dot
</pre></div></div>

<p>というコマンドになります。</p>

<h2>
<span id="依存関係図を表示" class="fragment"></span><a href="#%E4%BE%9D%E5%AD%98%E9%96%A2%E4%BF%82%E5%9B%B3%E3%82%92%E8%A1%A8%E7%A4%BA"><i class="fa fa-link"></i></a>依存関係図を表示</h2>

<p>出力される.dotという形式のファイルは、<a href="http://www.graphviz.org/" rel="nofollow noopener" target="_blank">Graphviz</a> または <a href="http://www.omnigroup.com/" rel="nofollow noopener" target="_blank">Omnigraffle</a> というアプリケーションで表示できます。（Omnigraffle は定評のあるダイアグラム作成ソフトですが、なにぶん有料なので、とりあえず objc_dep を試してみたいという方は、オープンソースの Graphviz をオススメします。）</p>

<h2>
<span id="依存関係図の見方" class="fragment"></span><a href="#%E4%BE%9D%E5%AD%98%E9%96%A2%E4%BF%82%E5%9B%B3%E3%81%AE%E8%A6%8B%E6%96%B9"><i class="fa fa-link"></i></a>依存関係図の見方</h2>

<p>ここでは試しに、 "Facebook iOS SDK" に付属している "Hackbook" というサンプルアプリの依存関係を出力してみました。</p>

<p><a href="https://camo.qiitausercontent.com/b4ad1d1671b5aeee8d5dcd5904126820adb22630/687474703a2f2f662e636c2e6c792f6974656d732f3039316b3141343130493242304b31473070336b2f446570312e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/b4ad1d1671b5aeee8d5dcd5904126820adb22630/687474703a2f2f662e636c2e6c792f6974656d732f3039316b3141343130493242304b31473070336b2f446570312e706e67" alt="Hackbook の依存関係図" data-canonical-src="http://f.cl.ly/items/091k1A410I2B0K1G0p3k/Dep1.png"></a></p>

<p>出力された図を見ると、青い矢印で結ばれているところがあります。</p>

<p><a href="https://camo.qiitausercontent.com/52a0264edf592f785269a8ada99eee928791715e/687474703a2f2f662e636c2e6c792f6974656d732f33473331326f33523356316e31333267324432322f446570322e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/52a0264edf592f785269a8ada99eee928791715e/687474703a2f2f662e636c2e6c792f6974656d732f33473331326f33523356316e31333267324432322f446570322e706e67" alt="相互import" data-canonical-src="http://f.cl.ly/items/3G312o3R3V1n132g2D22/Dep2.png"></a></p>

<p>ソースコード内のコメントによると、「相互にimportしている」場合に青い矢印で結ばれるようです。</p>

<p>コードの保守性の観点から、クラスの相互依存はなるべく避けたいところかと思います。もし青い矢印が存在した場合、プロトコルを使用して直接参照を片方向からのみにできないか検討する、といったようにリファクタリングの指針とすることができます。</p>

<p>またこの例には出てきませんでしたが、赤い矢印が出てくることがあります。</p>

<p><a href="https://camo.qiitausercontent.com/5032e951984e7faa0be2fb94ef731e30f471b43e/687474703a2f2f662e636c2e6c792f6974656d732f3373324e31503155307a316a3132327a305532452f446570332e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/5032e951984e7faa0be2fb94ef731e30f471b43e/687474703a2f2f662e636c2e6c792f6974656d732f3373324e31503155307a316a3132327a305532452f446570332e706e67" alt="pchからのimport" data-canonical-src="http://f.cl.ly/items/3s2N1P1U0z1j122z0U2E/Dep3.png"></a></p>

<p>赤い矢印は、.pchファイルからのimportを意味します。</p>

<p>.pch ファイルから import されたヘッダは全クラスから参照される（この参照の矢印は描画されない）ため、このような使用になっているものと思われます。</p>

<p>こちらも、.pch で import しているのにさらに個別のクラスでも import している、.pch で import すべきではないクラスを import している、といったように不要な依存性がないかのチェックの指針となります。</p>

<p>同じくこの例には出ていませんが、カテゴリは（他のクラスに依存していない場合は）依存関係図から切り出して右上の方に列挙してくれます。カテゴリはその性質上多くのファイルから参照されていても設計上の問題とはならないため、図がゴチャゴチャしないようにこういう仕様になっているようです。</p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>shu223さんの<br />5位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>344</kbd>
		<a target="_blank" href="https://qiita.com/shu223/items/68f3dfd8d4dd55bae2cb">【iOS7】フラットデザインUI実装に役立つライブラリのまとめ</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-06-18 20:23:26</center>
	</td>
	<td style="width:200px;">
		@shu223<br />(Freelancer 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/3180/profile-images/1473682733">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Objective-C]</b> <b>[iPhone]</b> <b>[Xcode]</b> <b>[iOS]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>iOS7で採用された<strong>フラットデザインっぽいUIを、現行iOS（〜6.x）で実装する際に役立つライブラリ</strong>（OSS）をまとめました。後半ではiOS7っぽく<strong>下のビューをブラーかけて半透過表示</strong>するライブラリや、<strong>パララックス表示</strong>するライブラリも紹介しています。</p>

<h3>
<span id="flatuikit" class="fragment"></span><a href="#flatuikit"><i class="fa fa-link"></i></a><a href="https://github.com/Grouper/FlatUIKit" rel="nofollow noopener" target="_blank">FlatUIKit</a>
</h3>

<p>フラットデザインなUIコンポーネント詰め合わせ。ソースをみると、ほとんどのコンポーネントが該当するUIKitコンポーネントのカテゴリやサブクラスとしてつくってあって、使いやすそうです。</p>

<p><a href="https://camo.qiitausercontent.com/7f805484cdd183c2f4a4736762ea3edaa64a6e60/68747470733a2f2f7261772e6769746875622e636f6d2f47726f757065722f466c617455494b69742f6d61737465722f4578616d706c652f524541444d45253230696d616765732f667569627574746f6e2d736d616c6c2e676966" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/7f805484cdd183c2f4a4736762ea3edaa64a6e60/68747470733a2f2f7261772e6769746875622e636f6d2f47726f757065722f466c617455494b69742f6d61737465722f4578616d706c652f524541444d45253230696d616765732f667569627574746f6e2d736d616c6c2e676966" alt="" data-canonical-src="https://raw.github.com/Grouper/FlatUIKit/master/Example/README%20images/fuibutton-small.gif"></a></p>

<p><a href="https://camo.qiitausercontent.com/788bef52f14ea17d6624eb70acd1012812f1b636/68747470733a2f2f7261772e6769746875622e636f6d2f47726f757065722f466c617455494b69742f6d61737465722f4578616d706c652f524541444d45253230696d616765732f6675697377697463682d736d616c6c2e676966" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/788bef52f14ea17d6624eb70acd1012812f1b636/68747470733a2f2f7261772e6769746875622e636f6d2f47726f757065722f466c617455494b69742f6d61737465722f4578616d706c652f524541444d45253230696d616765732f6675697377697463682d736d616c6c2e676966" alt="" data-canonical-src="https://raw.github.com/Grouper/FlatUIKit/master/Example/README%20images/fuiswitch-small.gif"></a></p>

<p><a href="https://camo.qiitausercontent.com/5c35828338d00a9c6c08bf2cf35aaf5307737d41/68747470733a2f2f7261772e6769746875622e636f6d2f47726f757065722f466c617455494b69742f6d61737465722f4578616d706c652f524541444d45253230696d616765732f667569736c696465722d736d616c6c2e676966" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/5c35828338d00a9c6c08bf2cf35aaf5307737d41/68747470733a2f2f7261772e6769746875622e636f6d2f47726f757065722f466c617455494b69742f6d61737465722f4578616d706c652f524541444d45253230696d616765732f667569736c696465722d736d616c6c2e676966" alt="" data-canonical-src="https://raw.github.com/Grouper/FlatUIKit/master/Example/README%20images/fuislider-small.gif"></a></p>

<p><a href="https://camo.qiitausercontent.com/dc50f4d528a427f0465db1d07245e5ca11e3ec38/68747470733a2f2f7261772e6769746875622e636f6d2f47726f757065722f466c617455494b69742f6d61737465722f4578616d706c652f524541444d45253230696d616765732f6675696e61766261722d736d616c6c2e676966" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/dc50f4d528a427f0465db1d07245e5ca11e3ec38/68747470733a2f2f7261772e6769746875622e636f6d2f47726f757065722f466c617455494b69742f6d61737465722f4578616d706c652f524541444d45253230696d616765732f6675696e61766261722d736d616c6c2e676966" alt="" data-canonical-src="https://raw.github.com/Grouper/FlatUIKit/master/Example/README%20images/fuinavbar-small.gif"></a></p>

<h3>
<span id="ui7kit" class="fragment"></span><a href="#ui7kit"><i class="fa fa-link"></i></a><a href="https://github.com/youknowone/UI7Kit" rel="nofollow noopener" target="_blank">UI7Kit</a>
</h3>

<p>iOS5, iOS6 で iOS7 の見た目を実現するUIKitのサブクラス集。</p>

<p><a href="https://camo.qiitausercontent.com/a2f3c5fe7b7047015200208a0d0f1a156d7061df/687474703a2f2f662e636c2e6c792f6974656d732f3265325a33353177326432703344334a3039306a2f5549374b69745f72315f63315f2e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/a2f3c5fe7b7047015200208a0d0f1a156d7061df/687474703a2f2f662e636c2e6c792f6974656d732f3265325a33353177326432703344334a3039306a2f5549374b69745f72315f63315f2e706e67" alt="" data-canonical-src="http://f.cl.ly/items/2e2Z351w2d2p3D3J090j/UI7Kit_r1_c1_.png"></a></p>

<h3>
<span id="iphone-flat-design-ui" class="fragment"></span><a href="#iphone-flat-design-ui"><i class="fa fa-link"></i></a><a href="http://www.appdesignvault.com/iphone-flat-ui-design-patterns/" rel="nofollow noopener" target="_blank">iPhone Flat Design UI</a>
</h3>

<p>フラットデザインのサンプル集的なXcodeプロジェクト。コンポーネント化されて使い回せるわけではありませんが、こう設定すればこういう見た目にできるのか、という参考になります。</p>

<p><a href="https://camo.qiitausercontent.com/9ba16043e94ac74c10ea8a1f53f59280c572e76a/687474703a2f2f662e636c2e6c792f6974656d732f316f314b326f306a31473132306a3031307a32712f414456466c61745549312e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/9ba16043e94ac74c10ea8a1f53f59280c572e76a/687474703a2f2f662e636c2e6c792f6974656d732f316f314b326f306a31473132306a3031307a32712f414456466c61745549312e706e67" alt="" data-canonical-src="http://f.cl.ly/items/1o1K2o0j1G120j010z2q/ADVFlatUI1.png"></a><br>
<a href="https://camo.qiitausercontent.com/5e7dc6c3715d607ef49b8a06025d81e3df56b9e1/687474703a2f2f662e636c2e6c792f6974656d732f3175315a3076337a3432327631693236306d33692f414456466c61745549322e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/5e7dc6c3715d607ef49b8a06025d81e3df56b9e1/687474703a2f2f662e636c2e6c792f6974656d732f3175315a3076337a3432327631693236306d33692f414456466c61745549322e706e67" alt="" data-canonical-src="http://f.cl.ly/items/1u1Z0v3z422v1i260m3i/ADVFlatUI2.png"></a></p>

<h3>
<span id="qbflatbutton" class="fragment"></span><a href="#qbflatbutton"><i class="fa fa-link"></i></a><a href="https://github.com/questbeat/QBFlatButton" rel="nofollow noopener" target="_blank">QBFlatButton</a>
</h3>

<p>フラットな見た目にできるUIButtonのサブクラス。</p>

<p><a href="https://camo.qiitausercontent.com/e9bdee0893bec963da0430172b44ca544d13321f/68747470733a2f2f613234382e652e616b616d61692e6e65742f63616d6f2e6769746875622e636f6d2f663030303739626366653233613336633331636566626133356561323831646264663663653965612f36383734373437303361326632663631363436663734366637353734326537333631366237353732363132653665363532653661373032663637363937343638373536323266353134323436366336313734343237353734373436663665326637333733333033313265373036653637" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/e9bdee0893bec963da0430172b44ca544d13321f/68747470733a2f2f613234382e652e616b616d61692e6e65742f63616d6f2e6769746875622e636f6d2f663030303739626366653233613336633331636566626133356561323831646264663663653965612f36383734373437303361326632663631363436663734366637353734326537333631366237353732363132653665363532653661373032663637363937343638373536323266353134323436366336313734343237353734373436663665326637333733333033313265373036653637" alt="" data-canonical-src="https://a248.e.akamai.net/camo.github.com/f00079bcfe23a36c31cefba35ea281dbdf6ce9ea/687474703a2f2f61646f746f75742e73616b7572612e6e652e6a702f6769746875622f5142466c6174427574746f6e2f737330312e706e67"></a></p>

<h3>
<span id="flat-pill-button" class="fragment"></span><a href="#flat-pill-button"><i class="fa fa-link"></i></a><a href="https://github.com/brianmichel/FlatPillButton" rel="nofollow noopener" target="_blank">Flat Pill Button</a>
</h3>

<p><a href="https://camo.qiitausercontent.com/8c9cc4a829308477b5d2e81c32220f99b061c179/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f636f636f61636f6e74726f6c735f70726f64756374696f6e2f696f735f73637265656e732f313336362f66756c6c2e706e673f31333532363836373333" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/8c9cc4a829308477b5d2e81c32220f99b061c179/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f636f636f61636f6e74726f6c735f70726f64756374696f6e2f696f735f73637265656e732f313336362f66756c6c2e706e673f31333532363836373333" alt="" data-canonical-src="https://s3.amazonaws.com/cocoacontrols_production/ios_screens/1366/full.png?1352686733"></a></p>

<h3>
<span id="flatwebview" class="fragment"></span><a href="#flatwebview"><i class="fa fa-link"></i></a><a href="https://github.com/aaronbrethorst/FlatWebView" rel="nofollow noopener" target="_blank">FlatWebView</a>
</h3>

<p>UIWebViewの後ろのドロップシャドウをなくしたUIWebViewサブクラス。実装をみると、subviewsを辿ってUIImageViewをhiddenにしているようです。</p>

<p><a href="https://camo.qiitausercontent.com/24e6448d662c0903c15d45993d4baf4ed9709fc8/68747470733a2f2f6769746875622e636f6d2f6161726f6e62726574686f7273742f466c6174576562566965772f7261772f6d61737465722f53637265656e73686f742e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/24e6448d662c0903c15d45993d4baf4ed9709fc8/68747470733a2f2f6769746875622e636f6d2f6161726f6e62726574686f7273742f466c6174576562566965772f7261772f6d61737465722f53637265656e73686f742e706e67" alt="" data-canonical-src="https://github.com/aaronbrethorst/FlatWebView/raw/master/Screenshot.png"></a></p>

<h3>
<span id="flatbutton" class="fragment"></span><a href="#flatbutton"><i class="fa fa-link"></i></a><a href="https://github.com/jessesquires/FlatButton" rel="nofollow noopener" target="_blank">FlatButton</a>
</h3>

<p><a href="https://camo.qiitausercontent.com/5ccc427da912c18c1984b84d5dd2715675e45e62/68747470733a2f2f7261772e6769746875622e636f6d2f6a65737365737175697265732f466c6174427574746f6e2f6d61737465722f53637265656e73686f74732f73637265656e73686f742d6970686f6e65342d322e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/5ccc427da912c18c1984b84d5dd2715675e45e62/68747470733a2f2f7261772e6769746875622e636f6d2f6a65737365737175697265732f466c6174427574746f6e2f6d61737465722f53637265656e73686f74732f73637265656e73686f742d6970686f6e65342d322e706e67" alt="" data-canonical-src="https://raw.github.com/jessesquires/FlatButton/master/Screenshots/screenshot-iphone4-2.png"></a></p>

<h2>
<span id="おまけ1ios7ぽいビューを実現するuiライブラリ" class="fragment"></span><a href="#%E3%81%8A%E3%81%BE%E3%81%911ios7%E3%81%BD%E3%81%84%E3%83%93%E3%83%A5%E3%83%BC%E3%82%92%E5%AE%9F%E7%8F%BE%E3%81%99%E3%82%8Bui%E3%83%A9%E3%82%A4%E3%83%96%E3%83%A9%E3%83%AA"><i class="fa fa-link"></i></a>おまけ1：iOS7ぽいビューを実現するUIライブラリ</h2>

<h3>
<span id="dkliveblur" class="fragment"></span><a href="#dkliveblur"><i class="fa fa-link"></i></a><a href="https://github.com/kronik/DKLiveBlur" rel="nofollow noopener" target="_blank">DKLiveBlur</a>
</h3>

<p><a href="https://camo.qiitausercontent.com/70f135b066f1bd78a500e0aa0e63dfee14fdb961/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f636f636f61636f6e74726f6c735f70726f64756374696f6e2f696f735f73637265656e732f323038362f66756c6c2e706e673f31333731343732303635" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/70f135b066f1bd78a500e0aa0e63dfee14fdb961/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f636f636f61636f6e74726f6c735f70726f64756374696f6e2f696f735f73637265656e732f323038362f66756c6c2e706e673f31333731343732303635" alt="" data-canonical-src="https://s3.amazonaws.com/cocoacontrols_production/ios_screens/2086/full.png?1371472065"></a></p>

<p>動的に下のビューをぼかして半透過っぽく表示してくれるビュー。ちゃんと<strong>Accelerate.frameworkを使用</strong>して実装されてるのでレスポンス面は期待してよさげ。</p>

<h3>
<span id="cfifrostedoverlayview" class="fragment"></span><a href="#cfifrostedoverlayview"><i class="fa fa-link"></i></a><a href="https://github.com/CodaFi/CFIFrostedOverlayView" rel="nofollow noopener" target="_blank">CFIFrostedOverlayView</a>
</h3>

<p><a href="https://camo.qiitausercontent.com/7a48fca820259f063706c9d26dd6fe3042c74916/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f636f636f61636f6e74726f6c735f70726f64756374696f6e2f696f735f73637265656e732f323038342f66756c6c2e706e673f31333731343234323630" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/7a48fca820259f063706c9d26dd6fe3042c74916/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f636f636f61636f6e74726f6c735f70726f64756374696f6e2f696f735f73637265656e732f323038342f66756c6c2e706e673f31333731343234323630" alt="" data-canonical-src="https://s3.amazonaws.com/cocoacontrols_production/ios_screens/2084/full.png?1371424260"></a></p>

<p>上記同様、superviewをブラーをかけて表示してくれるビュー。こっちはGPUImageを使用。</p>

<h3>
<span id="parallax" class="fragment"></span><a href="#parallax"><i class="fa fa-link"></i></a><a href="https://github.com/acoomans/Parallax" rel="nofollow noopener" target="_blank">Parallax</a>
</h3>

<p><a href="https://camo.qiitausercontent.com/19805295c091dbb81e7b75a668268d02a9f6a525/68747470733a2f2f7261772e6769746875622e636f6d2f61636f6f6d616e732f506172616c6c61782f6d61737465722f506172616c6c617844656d6f2f706172616c6c61782e676966" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/19805295c091dbb81e7b75a668268d02a9f6a525/68747470733a2f2f7261772e6769746875622e636f6d2f61636f6f6d616e732f506172616c6c61782f6d61737465722f506172616c6c617844656d6f2f706172616c6c61782e676966" alt="" data-canonical-src="https://raw.github.com/acoomans/Parallax/master/ParallaxDemo/parallax.gif"></a></p>

<p>パララックス表示するビュー。ただサンプルのアニメーションGIFにあまりパララックス感がないような。。（あとで動かしてみます）</p>

<h2>
<span id="おまけ2フラットuiデザイン素材" class="fragment"></span><a href="#%E3%81%8A%E3%81%BE%E3%81%912%E3%83%95%E3%83%A9%E3%83%83%E3%83%88ui%E3%83%87%E3%82%B6%E3%82%A4%E3%83%B3%E7%B4%A0%E6%9D%90"><i class="fa fa-link"></i></a>おまけ2：フラットUIデザイン素材</h2>

<h3>
<span id="free-ios-7-ui-kit" class="fragment"></span><a href="#free-ios-7-ui-kit"><i class="fa fa-link"></i></a><a href="http://medialoot.com/item/free-ios-7-ui-kit/" rel="nofollow noopener" target="_blank">Free iOS 7 UI Kit</a>
</h3>

<blockquote>
<p>Start designing iOS 7 apps today with this comprehensive GUI kit for Photoshop. Absolutely every element you see is 100% vector and completely editable!</p>
</blockquote>

<p><a href="https://camo.qiitausercontent.com/395b9f785f83b2e03f3c5a4d1a3fddefce62e5c3/687474703a2f2f6d656469616c6f6f742e636f6d2f696d616765732f7468756d62732f3634307834343078315f694f535f375f55495f4b69745f50726576696577312e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/395b9f785f83b2e03f3c5a4d1a3fddefce62e5c3/687474703a2f2f6d656469616c6f6f742e636f6d2f696d616765732f7468756d62732f3634307834343078315f694f535f375f55495f4b69745f50726576696577312e706e67" alt="" data-canonical-src="http://medialoot.com/images/thumbs/640x440x1_iOS_7_UI_Kit_Preview1.png"></a></p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>shu223さんの<br />6位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>323</kbd>
		<a target="_blank" href="https://qiita.com/shu223/items/3d139133c9116f115d59">iOS 7 の新機能のサンプルコード集『iOS7 Sampler』</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-09-24 11:27:39</center>
	</td>
	<td style="width:200px;">
		@shu223<br />(Freelancer 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/3180/profile-images/1473682733">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Objective-C]</b> <b>[iPhone]</b> <b>[Xcode]</b> <b>[iOS]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>先週末に開催された『<a href="http://atnd.org/events/43284" rel="nofollow noopener" target="_blank">もくもく開発会＠鎌倉 #2 by Qiita</a>』にて、 <strong>iOS 7 で新たに加えられたAPI</strong> の使い方等を勉強しつつ、簡単なサンプルを集めたアプリをつくってGitHubにアップしました。</p>

<p><a href="https://github.com/shu223/iOS7-Sampler" rel="nofollow noopener" target="_blank">https://github.com/shu223/iOS7-Sampler</a></p>

<p><a href="https://camo.qiitausercontent.com/ce4ed808e4b3d28a753c8784edb1756635acd319/687474703a2f2f662e636c2e6c792f6974656d732f317432353073314e337a306331673248314e30502f694f533753616d706c6572315f72315f63312e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/ce4ed808e4b3d28a753c8784edb1756635acd319/687474703a2f2f662e636c2e6c792f6974656d732f317432353073314e337a306331673248314e30502f694f533753616d706c6572315f72315f63312e706e67" alt="" data-canonical-src="http://f.cl.ly/items/1t250s1N3z0c1g2H1N0P/iOS7Sampler1_r1_c1.png"></a></p>

<p>今のところ21個のサンプルが入っています。何か調べた折に随時追加していきます。</p>

<p>以下サンプルのリストです。</p>

<h2>
<span id="dynamic-behaviors" class="fragment"></span><a href="#dynamic-behaviors"><i class="fa fa-link"></i></a>Dynamic Behaviors</h2>

<p>iOS7では UIView サブクラスに簡単に物理演算を適用することができるようになりました。</p>

<p>本サンプルでは、UIDynamicAnimator, UIGravityBehavior, UICollisionBehavior, UIDynamicItemBehavior を用いて <strong>重力と衝突をシミュレート</strong> しています。</p>

<p><a href="https://camo.qiitausercontent.com/66f8c75e9de71c71f7f762d897fcd5954317cd16/687474703a2f2f662e636c2e6c792f6974656d732f334d32623131304131343144314f3043304430652f64796e616d696373315f5f2e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/66f8c75e9de71c71f7f762d897fcd5954317cd16/687474703a2f2f662e636c2e6c792f6974656d732f334d32623131304131343144314f3043304430652f64796e616d696373315f5f2e706e67" alt="" data-canonical-src="http://f.cl.ly/items/3M2b110A141D1O0C0D0e/dynamics1__.png"></a></p>

<p>関連：<a href="http://d.hatena.ne.jp/shu223/20130501/1367368335" rel="nofollow noopener" target="_blank">UIKit で物理演算エンジンを使用する</a></p>

<h2>
<span id="speech-synthesis" class="fragment"></span><a href="#speech-synthesis"><i class="fa fa-link"></i></a>Speech Synthesis</h2>

<p>AVSpeechSynthesizer, AVSpeechUtterance を用いた音声合成のサンプル。</p>

<p><strong>任意の文字列を iOS が読み上げ</strong> てくれます。Macのsayコマンドのようなもの。</p>

<p><a href="https://camo.qiitausercontent.com/de3506cd07b3155b3796c1ece94fab7b6f8dc43f/687474703a2f2f662e636c2e6c792f6974656d732f3379306933423052334f3345314e3173317732302f7370656563685f5f5f2e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/de3506cd07b3155b3796c1ece94fab7b6f8dc43f/687474703a2f2f662e636c2e6c792f6974656d732f3379306933423052334f3345314e3173317732302f7370656563685f5f5f2e706e67" alt="" data-canonical-src="http://f.cl.ly/items/3y0i3B0R3O3E1N1s1w20/speech___.png"></a></p>

<p>関連：<a href="http://d.hatena.ne.jp/shu223/20130810/1376105883" rel="nofollow noopener" target="_blank">フリーの iOS 向け音声認識／音声合成ライブラリ『OpenEars』の使い方</a></p>

<h2>
<span id="custom-transition" class="fragment"></span><a href="#custom-transition"><i class="fa fa-link"></i></a>Custom Transition</h2>

<p>UIViewControllerAnimatedTransitioning, UIViewControllerTransitioningDelegateを用いた <strong>カスタムトランジション</strong> （画面遷移）のサンプル。</p>

<p>トランジションエフェクトは下記のOSSを入れています。</p>

<h3>
<span id="huanimator" class="fragment"></span><a href="#huanimator"><i class="fa fa-link"></i></a><a href="https://github.com/cinkster/HUAnimator" rel="nofollow noopener" target="_blank">HUAnimator</a>
</h3>

<p>細い線に分解されて遷移するエフェクト。</p>

<p><a href="https://camo.qiitausercontent.com/71364255d595d65879e5c20759360ed8ffc15006/687474703a2f2f662e636c2e6c792f6974656d732f32503061325a33573057325033703157324c30582f7472616e736974696f6e5f6c696e65732e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/71364255d595d65879e5c20759360ed8ffc15006/687474703a2f2f662e636c2e6c792f6974656d732f32503061325a33573057325033703157324c30582f7472616e736974696f6e5f6c696e65732e706e67" alt="" data-canonical-src="http://f.cl.ly/items/2P0a2Z3W0W2P3p1W2L0X/transition_lines.png"></a></p>

<h3>
<span id="zbcustomtransitions" class="fragment"></span><a href="#zbcustomtransitions"><i class="fa fa-link"></i></a><a href="https://github.com/zonble/ZBCustomTransitions" rel="nofollow noopener" target="_blank">ZBCustomTransitions</a>
</h3>

<p>ブロックに分解されガラガラと崩れ落ちて遷移するエフェクト。</p>

<p><a href="https://camo.qiitausercontent.com/d645b918db879e5b27570a042a74ce632ba527b8/687474703a2f2f662e636c2e6c792f6974656d732f32533058333833523254316a31583259316533742f7472616e736974696f6e5f677261766974792e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/d645b918db879e5b27570a042a74ce632ba527b8/687474703a2f2f662e636c2e6c792f6974656d732f32533058333833523254316a31583259316533742f7472616e736974696f6e5f677261766974792e706e67" alt="" data-canonical-src="http://f.cl.ly/items/2S0X383R2T1j1X2Y1e3t/transition_gravity.png"></a></p>

<h2>
<span id="3d-マップ" class="fragment"></span><a href="#3d-%E3%83%9E%E3%83%83%E3%83%97"><i class="fa fa-link"></i></a>3D マップ</h2>

<p>MKMapView の camera プロパティ （MKMapCamera という新クラス）を用いた <strong>3D 地図表示</strong> のサンプル。</p>

<p><a href="https://camo.qiitausercontent.com/99570307898bb3ada652aec25482e0b515d0a451/687474703a2f2f662e636c2e6c792f6974656d732f3052325432613273314133733147326e334932352f33444d61705f2e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/99570307898bb3ada652aec25482e0b515d0a451/687474703a2f2f662e636c2e6c792f6974656d732f3052325432613273314133733147326e334932352f33444d61705f2e706e67" alt="" data-canonical-src="http://f.cl.ly/items/0R2T2a2s1A3s1G2n3I25/3DMap_.png"></a></p>

<p>関連：<a href="http://qiita.com/shu223/items/bfb5ef3e45682c2bb763" id="reference-8f770b973d79ab143b74">Google Maps SDK for iOSの導入手順</a></p>

<h2>
<span id="ibeacon" class="fragment"></span><a href="#ibeacon"><i class="fa fa-link"></i></a>iBeacon</h2>

<p>iBeacon を 2台のiPhone（iPad）同士で試せるようにしたサンプル。</p>

<p><a href="https://camo.qiitausercontent.com/49d15e24bde6133ed29e945642f93c731d88d713/687474703a2f2f662e636c2e6c792f6974656d732f3232304432463231304431783144304c315132302f626561636f6e5f5f2e676966" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/49d15e24bde6133ed29e945642f93c731d88d713/687474703a2f2f662e636c2e6c792f6974656d732f3232304432463231304431783144304c315132302f626561636f6e5f5f2e676966" alt="" data-canonical-src="http://f.cl.ly/items/220D2F210D1x1D0L1Q20/beacon__.gif"></a></p>

<p>一方をビーコン（Peripheral）、もう一方を監視側（Central）として使用します。</p>

<h3>
<span id="関連" class="fragment"></span><a href="#%E9%96%A2%E9%80%A3"><i class="fa fa-link"></i></a>関連</h3>

<p><a href="http://qiita.com/shu223/items/5018cf5e452c4fa0d002" id="reference-1372c544a43809627ab5">ビーコン的な演出をする</a></p>

<h2>
<span id="120fps-ビデオ録画slo-mo" class="fragment"></span><a href="#120fps-%E3%83%93%E3%83%87%E3%82%AA%E9%8C%B2%E7%94%BBslo-mo"><i class="fa fa-link"></i></a>120fps ビデオ録画（SLO-MO）</h2>

<p>AVFoundationでスローモーション動画撮影を行うサンプル。iPhone5sでは120fpsでの撮影が可能です。</p>

<p><a href="https://camo.qiitausercontent.com/4d54191ea6c97bae552fd4c918fb500c647f6cfa/687474703a2f2f662e636c2e6c792f6974656d732f33363061323731793147335132433261337032642f494d475f383930375f72315f63312e6a7067" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/4d54191ea6c97bae552fd4c918fb500c647f6cfa/687474703a2f2f662e636c2e6c792f6974656d732f33363061323731793147335132433261337032642f494d475f383930375f72315f63312e6a7067" alt="" data-canonical-src="http://f.cl.ly/items/360a271y1G3Q2C2a3p2d/IMG_8907_r1_c1.jpg"></a></p>

<h3>
<span id="作例" class="fragment"></span><a href="#%E4%BD%9C%E4%BE%8B"><i class="fa fa-link"></i></a>作例</h3>

<p><a href="https://camo.qiitausercontent.com/cb972e7f231fb947a51498123487df04642f6a7c/687474703a2f2f662e636c2e6c792f6974656d732f316233513068306b336b326d323631733352336e2f73616d706c656d6f7669655f5f2e676966" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/cb972e7f231fb947a51498123487df04642f6a7c/687474703a2f2f662e636c2e6c792f6974656d732f316233513068306b336b326d323631733352336e2f73616d706c656d6f7669655f5f2e676966" alt="" data-canonical-src="http://f.cl.ly/items/1b3Q0h0k3k2m261s3R3n/samplemovie__.gif"></a></p>

<p><a href="http://vimeo.com/82064431" rel="nofollow noopener" target="_blank">See the 120fps Slo-Mo video in Vimeo 120fps.</a></p>

<h3>
<span id="関連-1" class="fragment"></span><a href="#%E9%96%A2%E9%80%A3-1"><i class="fa fa-link"></i></a>関連</h3>

<p><a href="http://d.hatena.ne.jp/shu223/20131217/1387257304" rel="nofollow noopener" target="_blank">AVFoundationで120fpsスローモーション動画撮影を実装する</a></p>

<h2>
<span id="笑顔検出" class="fragment"></span><a href="#%E7%AC%91%E9%A1%94%E6%A4%9C%E5%87%BA"><i class="fa fa-link"></i></a>笑顔検出</h2>

<p>CIDetectorに新たに追加された <code>CIDetectorSmile</code> と、CIFeature に追加されたプロパティ <code>bounds</code>, <code>hasSmile</code> を用いた <strong>笑顔検出</strong> のサンプル。</p>

<p><a href="https://camo.qiitausercontent.com/108f9bc8f77abd9cd6413f590eb81e8a13018ccc/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f333138302f36623532303265332d373439642d643566382d383862612d3138373732393065333362322e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/108f9bc8f77abd9cd6413f590eb81e8a13018ccc/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f333138302f36623532303265332d373439642d643566382d383862612d3138373732393065333362322e706e67" alt="smile_.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/3180/6b5202e3-749d-d5f8-88ba-1877290e33b2.png"></a></p>

<h2>
<span id="画像フィルタ" class="fragment"></span><a href="#%E7%94%BB%E5%83%8F%E3%83%95%E3%82%A3%E3%83%AB%E3%82%BF"><i class="fa fa-link"></i></a>画像フィルタ</h2>

<p>CIFilter に追加されたフィルタのサンプル</p>

<p><a href="https://camo.qiitausercontent.com/1edd5d476d90bb8383e08816d5c4567ede452c66/687474703a2f2f662e636c2e6c792f6974656d732f334b305433633031326f30363262306f303631632f696d61676566696c746572735f5f2e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/1edd5d476d90bb8383e08816d5c4567ede452c66/687474703a2f2f662e636c2e6c792f6974656d732f334b305433633031326f30363262306f303631632f696d61676566696c746572735f5f2e706e67" alt="" data-canonical-src="http://f.cl.ly/items/3K0T3c012o062b0o061c/imagefilters__.png"></a></p>

<p>下記の画像処理ををピッカーで選択してかけられるようになっています。</p>

<ul>
<li>CILinearToSRGBToneCurve</li>
<li>CIPhotoEffectChrome</li>
<li>CIPhotoEffectFade</li>
<li>CIPhotoEffectInstant</li>
<li>CIPhotoEffectMono</li>
<li>CIPhotoEffectNoir</li>
<li>CIPhotoEffectProcess</li>
<li>CIPhotoEffectTonal</li>
<li>CIPhotoEffectTransfer</li>
<li>CISRGBToneCurveToLinear</li>
<li>CIVignetteEffect</li>
</ul>

<h2>
<span id="sprite-kit" class="fragment"></span><a href="#sprite-kit"><i class="fa fa-link"></i></a>Sprite Kit</h2>

<p>Sprite Kit の SKView, SKScene, SKSpriteNode, SKActionを用いて <strong>キャラのスプライトを生成し、アニメーションさせる</strong> サンプル。</p>

<p>ほぼCocos2Dと同じようなAPIです。</p>

<p><a href="https://camo.qiitausercontent.com/46b17b5b3f32ead7824163c25fdb0994063d37ec/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f333138302f39386663666237362d356163342d366333622d636663612d6130303837393063393438612e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/46b17b5b3f32ead7824163c25fdb0994063d37ec/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f333138302f39386663666237362d356163342d366333622d636663612d6130303837393063393438612e706e67" alt="spritekit__.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/3180/98fcfb76-5ac4-6c3b-cfca-a008790c948a.png"></a></p>

<h2>
<span id="map-directions" class="fragment"></span><a href="#map-directions"><i class="fa fa-link"></i></a>Map Directions</h2>

<p>MKDirections, MKDirectionsResponse, MKPolylineRenderer 等を用いた <strong>経路探索とルートの描画</strong> サンプル。</p>

<p><a href="https://camo.qiitausercontent.com/b46b7afa1df398d2174e396c42407f2cb013cdf6/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f333138302f33666534633666332d346433642d306664322d393265652d6535666663616335316238652e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/b46b7afa1df398d2174e396c42407f2cb013cdf6/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f333138302f33666534633666332d346433642d306664322d393265652d6535666663616335316238652e706e67" alt="mapdirection_.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/3180/3fe4c6f3-4d3d-0fd2-92ee-e5ffcac51b8e.png"></a></p>

<h2>
<span id="motion-effects-parallax" class="fragment"></span><a href="#motion-effects-parallax"><i class="fa fa-link"></i></a>Motion Effects (Parallax)</h2>

<p>UIMotionEffect を用いた <strong>パララックスエフェクト（視差効果）</strong> のサンプル。</p>

<p><a href="https://camo.qiitausercontent.com/668cbb0769da425aa7db4e52b5007034fea6b102/687474703a2f2f662e636c2e6c792f6974656d732f334c324e326d334d3169304734353038316f306a2f706172616c6c61785f2e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/668cbb0769da425aa7db4e52b5007034fea6b102/687474703a2f2f662e636c2e6c792f6974656d732f334c324e326d334d3169304734353038316f306a2f706172616c6c61785f2e706e67" alt="" data-canonical-src="http://f.cl.ly/items/3L2N2m3M1i0G45081o0j/parallax_.png"></a></p>

<h2>
<span id="multipeer-connectivity" class="fragment"></span><a href="#multipeer-connectivity"><i class="fa fa-link"></i></a>Multipeer Connectivity</h2>

<p><strong>Multipeer Connectivity Framework で Peer-to-Peer 通信を行う</strong> サンプル。P2P通信には Wi-Fi または Bluetooth LE を使用します。</p>

<p><a href="https://camo.qiitausercontent.com/acc82777bc3cb26a90b481bbe73b07992e154adb/687474703a2f2f662e636c2e6c792f6974656d732f33543433327933473177315331753257305830712f6d756c7469706565722e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/acc82777bc3cb26a90b481bbe73b07992e154adb/687474703a2f2f662e636c2e6c792f6974656d732f33543433327933473177315331753257305830712f6d756c7469706565722e706e67" alt="" data-canonical-src="http://f.cl.ly/items/3T432y3G1w1S1u2W0X0q/multipeer.png"></a></p>

<h2>
<span id="airdrop--flickr--vimeo--readinglist" class="fragment"></span><a href="#airdrop--flickr--vimeo--readinglist"><i class="fa fa-link"></i></a>AirDrop / Flickr / Vimeo / ReadingList</h2>

<p><strong>新たに追加された UIActivityType （UIActivityTypeAirDrop, UIActivityTypePostToFlickr, UIActivityTypePostToVimeo, UIActivityTypeAddToReadingList）のサンプル</strong> 。</p>

<p>AirDropはデバイスが対応している必要があり、Flickr, Vimeo は Settings でアカウントを設定している必要があります。</p>

<p><a href="https://camo.qiitausercontent.com/72c5db17da10606af3e684716f4c07e26853a851/687474703a2f2f662e636c2e6c792f6974656d732f32563245335032663158317a30453045304534372f41697244726f705f2e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/72c5db17da10606af3e684716f4c07e26853a851/687474703a2f2f662e636c2e6c792f6974656d732f32563245335032663158317a30453045304534372f41697244726f705f2e706e67" alt="" data-canonical-src="http://f.cl.ly/items/2V2E3P2f1X1z0E0E0E47/AirDrop_.png"></a></p>

<h2>
<span id="qr-code-reader" class="fragment"></span><a href="#qr-code-reader"><i class="fa fa-link"></i></a>QR Code Reader</h2>

<p>新たに追加された <code>AVMetadataObjectTypeQRCode</code> を利用してQRコードを読み取るサンプル。</p>

<p>参考：<a href="http://qiita.com/hkato193/items/c36a940c2929a124e416" id="reference-cc6de248599e15623c6b">iOS 7でバーコード・QRコードを読み取る方法と生成する方法（おまけもあるよ）</a></p>

<h2>
<span id="qr-code-generator" class="fragment"></span><a href="#qr-code-generator"><i class="fa fa-link"></i></a>QR Code Generator</h2>

<p>CIFilter の CIQRCodeGenerator を用いた <strong>QRコード生成</strong> のサンプル。</p>

<p><a href="https://camo.qiitausercontent.com/f46447c34e984d91201e41b16235a08c0d023640/687474703a2f2f662e636c2e6c792f6974656d732f334531713174314c326e313432723269324933532f7172636f64655f5f2e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/f46447c34e984d91201e41b16235a08c0d023640/687474703a2f2f662e636c2e6c792f6974656d732f334531713174314c326e313432723269324933532f7172636f64655f5f2e706e67" alt="" data-canonical-src="http://f.cl.ly/items/3E1q1t1L2n142r2i2I3S/qrcode__.png"></a></p>

<h2>
<span id="歩数カウントと移動状態" class="fragment"></span><a href="#%E6%AD%A9%E6%95%B0%E3%82%AB%E3%82%A6%E3%83%B3%E3%83%88%E3%81%A8%E7%A7%BB%E5%8B%95%E7%8A%B6%E6%85%8B"><i class="fa fa-link"></i></a>歩数カウントと移動状態</h2>

<p>Core Motion に新たに追加された CMStepCounter と CMMotionActivityManager を用いて、 <strong>歩数のカウント</strong> と <strong>移動状態（歩いている／走っている／車に乗っている）をトラッキング</strong> するサンプルです。</p>

<p><a href="https://camo.qiitausercontent.com/d598887549c4b3bf2ce8137dbc19ca9c7dd3775a/687474703a2f2f662e636c2e6c792f6974656d732f3339316f303734353046335534343342336930762f6d375f2e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/d598887549c4b3bf2ce8137dbc19ca9c7dd3775a/687474703a2f2f662e636c2e6c792f6974656d732f3339316f303734353046335534343342336930762f6d375f2e706e67" alt="" data-canonical-src="http://f.cl.ly/items/391o07450F3U443B3i0v/m7_.png"></a></p>

<p>本機能を使用するにはM7コプロセッサが必要なので、2013年10月現在出ているiOSデバイスでは <strong>iPhone5sでのみ動作</strong> します。</p>

<h2>
<span id="static-map-snapshots" class="fragment"></span><a href="#static-map-snapshots"><i class="fa fa-link"></i></a>Static Map Snapshots</h2>

<p>MKMapSnapshotOptions, MKMapSnapshotter を用いた <strong>地図のスナップショットを取得する</strong> サンプル。</p>

<p><a href="https://camo.qiitausercontent.com/0e8155df58bb04be73b998e6931e414dc0b78952/687474703a2f2f662e636c2e6c792f6974656d732f32513364343732443337303032663036333731362f6d61705f736e617073686f742e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/0e8155df58bb04be73b998e6931e414dc0b78952/687474703a2f2f662e636c2e6c792f6974656d732f32513364343732443337303032663036333731362f6d61705f736e617073686f742e706e67" alt="" data-canonical-src="http://f.cl.ly/items/2Q3d472D37002f063716/map_snapshot.png"></a></p>

<h2>
<span id="safari-reading-list" class="fragment"></span><a href="#safari-reading-list"><i class="fa fa-link"></i></a>Safari Reading List</h2>

<p><strong>新たに追加された Safari Services framework</strong> を使用して <strong>Safari の Reading List にWebサイトを追加</strong> するサンプル。</p>

<p>（※スクショは地味なので省略します）</p>

<h2>
<span id="new-fonts" class="fragment"></span><a href="#new-fonts"><i class="fa fa-link"></i></a>New Fonts</h2>

<p><strong>iOS 7 で新たに追加された全フォント36種類</strong> をフォント名と共に確認できます。</p>

<p><a href="https://camo.qiitausercontent.com/294c73be7b08e755cadfb4af0ac43bfcec349541/687474703a2f2f662e636c2e6c792f6974656d732f32693150333930533066334b33343069307031472f666f6e74325f2e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/294c73be7b08e755cadfb4af0ac43bfcec349541/687474703a2f2f662e636c2e6c792f6974656d732f32693150333930533066334b33343069307031472f666f6e74325f2e706e67" alt="" data-canonical-src="http://f.cl.ly/items/2i1P390S0f3K340i0p1G/font2_.png"></a></p>

<p>関連：<a href="http://d.hatena.ne.jp/shu223/20131017/1381992664" rel="nofollow noopener" target="_blank">iOS 7 で使えるフォント名一覧</a></p>

<h2>
<span id="ばね風アニメーション" class="fragment"></span><a href="#%E3%81%B0%E3%81%AD%E9%A2%A8%E3%82%A2%E3%83%8B%E3%83%A1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3"><i class="fa fa-link"></i></a>ばね風アニメーション</h2>

<p>ばね風のタイミングカーブでアニメーションさせることのできるUIViewのメソッドの挙動を確認できるサンプル。</p>

<p><a href="https://camo.qiitausercontent.com/528afe0a2347ebeb124ca16445ccfe5e2b5413a2/687474703a2f2f662e636c2e6c792f6974656d732f3153316e3377304d31333271336d3432343330422f737072696e67616e696d6174696f6e5f72315f63312e6a7067" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/528afe0a2347ebeb124ca16445ccfe5e2b5413a2/687474703a2f2f662e636c2e6c792f6974656d732f3153316e3377304d31333271336d3432343330422f737072696e67616e696d6174696f6e5f72315f63312e6a7067" alt="" data-canonical-src="http://f.cl.ly/items/1S1n3w0M132q3m42430B/springanimation_r1_c1.jpg"></a></p>

<p>関連：[ばねっぽいアニメーションを実現するUIViewの新メソッド](<a href="http://qiita.com/shu223/items/bce33f6ab448c90e4d2b" class="autolink" id="reference-e2b5ffeb894c3587e52f">http://qiita.com/shu223/items/bce33f6ab448c90e4d2b</a>]</p>

<h2>
<span id="uiwebviewのページネーション" class="fragment"></span><a href="#uiwebview%E3%81%AE%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%8D%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3"><i class="fa fa-link"></i></a>UIWebViewのページネーション</h2>

<p>UIWebViewの新機能、paginationMode のサンプル。Webページを書籍のように pagination して表示してくれます。</p>

<p><a href="https://camo.qiitausercontent.com/1dd4b6f7795cb1087e6c23ff8ca0698a8e719293/687474703a2f2f662e636c2e6c792f6974656d732f32713246304c326f324733483246306b306c31452f494d475f393232315f72315f63312e6a7067" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/1dd4b6f7795cb1087e6c23ff8ca0698a8e719293/687474703a2f2f662e636c2e6c792f6974656d732f32713246304c326f324733483246306b306c31452f494d475f393232315f72315f63312e6a7067" alt="" data-canonical-src="http://f.cl.ly/items/2q2F0L2o2G3H2F0k0l1E/IMG_9221_r1_c1.jpg"></a></p>

<p>関連：<a href="http://qiita.com/shu223/items/3f2141f8708dacb02d50" id="reference-bd94b9fe96392781e7f9">UIWebViewの新機能：UIWebPagination</a></p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>shu223さんの<br />7位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>240</kbd>
		<a target="_blank" href="https://qiita.com/shu223/items/3ff48a8bd6edd910e780">OpenCV for iOSの使い方</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2012-12-21 19:58:17</center>
	</td>
	<td style="width:200px;">
		@shu223<br />(Freelancer 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/3180/profile-images/1473682733">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[C++]</b> <b>[Objective-C]</b> <b>[iOS]</b> <b>[画像処理]</b> <b>[OpenCV]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>Core Image や vImage 等、iOS SDK の標準フレームワークの機能が充実してきたとはいえ、コンピュータビジョンの分野においてできることの幅広さではやはり OpenCV に軍配が上がります。そんな OpenCV を iOS アプリに導入する手順です。</p>

<p>下記の公式ドキュメントを参考に、自分でやってみて補足を加えました。<br>
<a href="http://docs.opencv.org/doc/tutorials/introduction/ios_install/ios_install.html#ios-installation" rel="nofollow noopener" target="_blank">公式ドキュメント1</a> / <a href="http://docs.opencv.org/doc/tutorials/ios/hello/hello.html#opencvioshelloworld" rel="nofollow noopener" target="_blank">公式ドキュメント2</a> / <a href="http://docs.opencv.org/doc/tutorials/ios/image_manipulation/image_manipulation.html#opencviosimagemanipulation" rel="nofollow noopener" target="_blank">公式ドキュメント3</a></p>

<h2>
<span id="準備編フレームワークをビルドする" class="fragment"></span><a href="#%E6%BA%96%E5%82%99%E7%B7%A8%E3%83%95%E3%83%AC%E3%83%BC%E3%83%A0%E3%83%AF%E3%83%BC%E3%82%AF%E3%82%92%E3%83%93%E3%83%AB%E3%83%89%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>準備編：フレームワークをビルドする</h2>

<h3>
<span id="1-githubからソースコードを取得" class="fragment"></span><a href="#1-github%E3%81%8B%E3%82%89%E3%82%BD%E3%83%BC%E3%82%B9%E3%82%B3%E3%83%BC%E3%83%89%E3%82%92%E5%8F%96%E5%BE%97"><i class="fa fa-link"></i></a>1. Githubからソースコードを取得</h3>

<p>githubからcloneします。<sup id="fnref1"><a href="#fn1" rel="footnote" title="以前はItseezアカウントにあったのですが、いつの間にかOpenCVアカウントになってました">1</a></sup></p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>cd ~/&lt;my_working _directory&gt;
git clone https://github.com/opencv/opencv.git
</pre></div></div>

<h3>
<span id="2-ビルドの準備" class="fragment"></span><a href="#2-%E3%83%93%E3%83%AB%E3%83%89%E3%81%AE%E6%BA%96%E5%82%99"><i class="fa fa-link"></i></a>2. ビルドの準備</h3>

<p>ルートディレクトリに、Xcodeのバンドル内にあるDeveloperフォルダへのシンボリックリンクを作成します。（ビルドスクリプトが参照するため）</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>cd /
sudo ln -s /Applications/Xcode.app/Contents/Developer Developer
</pre></div></div>

<h3>
<span id="3-ビルド" class="fragment"></span><a href="#3-%E3%83%93%E3%83%AB%E3%83%89"><i class="fa fa-link"></i></a>3. ビルド</h3>

<p>ビルドスクリプトを実行します。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>cd ~/&lt;my_working_directory&gt;
python opencv/platforms/ios/build_framework.py ios
</pre></div></div>

<p>ビルドが成功すると、最後に <code>** INSTALL SUCCEEDED **</code> と出て、 <code>~/&lt;my_working_directory&gt;/ios/opencv2.framework</code> にフレームワークができています。</p>

<ul>
<li>
<p>※1: もしスクリプト実行時に <code>sh: cmake: command not found</code> というエラーが出る場合は、cmake が入ってないのでインストールが必要です。homebrew の場合は</p>

<p>$ brew install cmake</p>
</li>
</ul>

<p>でインストールが始まります。</p>

<ul>
<li>※2: pythonのエラーが出た場合はスクリプトを実行する<strong>Pythonのバージョンが合ってない可能性</strong>があります。私はOpenCV 3.1のビルドスクリプトをPython v3.5.1で実行しようとして以下のようなエラーが出ました。</li>
</ul>

<blockquote>
<p>TypeError: cannot use a string pattern on a bytes-like object</p>
</blockquote>

<p>pyenvでPython 2.7に切り替えてこのエラーは解消されました。</p>

<ul>
<li>※3: OpenCV 3.1のビルドスクリプトがxcodebuildでコケました。マスターの最新コミット（2016.12.2現在）でも同様。</li>
</ul>

<h3>
<span id="バージョン確認方法" class="fragment"></span><a href="#%E3%83%90%E3%83%BC%E3%82%B8%E3%83%A7%E3%83%B3%E7%A2%BA%E8%AA%8D%E6%96%B9%E6%B3%95"><i class="fa fa-link"></i></a>バージョン確認方法</h3>

<p><code>opencv2.framework/Versions/A/Resources/Info.plist</code> に書かれているフレームワークバンドルのバージョン＝OpenCVのバージョンとなります。</p>

<p>たとえば 3.0.0 の場合は Info.plist はこうなっています。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>&lt;key&gt;CFBundleVersion&lt;/key&gt;
&lt;string&gt;3.0.0&lt;/string&gt;
&lt;key&gt;CFBundleShortVersionString&lt;/key&gt;
&lt;string&gt;3.0.0&lt;/string&gt;
</pre></div></div>

<h2>
<span id="導入編xcode-プロジェクトにフレームワークを追加する" class="fragment"></span><a href="#%E5%B0%8E%E5%85%A5%E7%B7%A8xcode-%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AB%E3%83%95%E3%83%AC%E3%83%BC%E3%83%A0%E3%83%AF%E3%83%BC%E3%82%AF%E3%82%92%E8%BF%BD%E5%8A%A0%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>導入編：Xcode プロジェクトにフレームワークを追加する</h2>

<h3>
<span id="1-フレームワークを追加" class="fragment"></span><a href="#1-%E3%83%95%E3%83%AC%E3%83%BC%E3%83%A0%E3%83%AF%E3%83%BC%E3%82%AF%E3%82%92%E8%BF%BD%E5%8A%A0"><i class="fa fa-link"></i></a>1. フレームワークを追加</h3>

<p>プロジェクトに opencv2.framework を追加します。</p>

<h3>
<span id="2-実装ファイルの拡張子をmmにする" class="fragment"></span><a href="#2-%E5%AE%9F%E8%A3%85%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AE%E6%8B%A1%E5%BC%B5%E5%AD%90%E3%82%92mm%E3%81%AB%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>2. 実装ファイルの拡張子を.mmにする</h3>

<p>C++ のコードを書くため、実装ファイルの拡張子を .m から .mm に修正します。</p>

<h3>
<span id="3-ヘッダファイルをインポート" class="fragment"></span><a href="#3-%E3%83%98%E3%83%83%E3%83%80%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%82%92%E3%82%A4%E3%83%B3%E3%83%9D%E3%83%BC%E3%83%88"><i class="fa fa-link"></i></a>3. ヘッダファイルをインポート</h3>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>#ifdef __cplusplus
#import &lt;opencv2/opencv.hpp&gt;
#endif
</pre></div></div>

<h2>
<span id="実践編簡単な画像処理を実行してみる" class="fragment"></span><a href="#%E5%AE%9F%E8%B7%B5%E7%B7%A8%E7%B0%A1%E5%8D%98%E3%81%AA%E7%94%BB%E5%83%8F%E5%87%A6%E7%90%86%E3%82%92%E5%AE%9F%E8%A1%8C%E3%81%97%E3%81%A6%E3%81%BF%E3%82%8B"><i class="fa fa-link"></i></a>実践編：簡単な画像処理を実行してみる</h2>

<h3>
<span id="1-uiimage-型の画像を-cvmat-型に変換するメソッドを定義" class="fragment"></span><a href="#1-uiimage-%E5%9E%8B%E3%81%AE%E7%94%BB%E5%83%8F%E3%82%92-cvmat-%E5%9E%8B%E3%81%AB%E5%A4%89%E6%8F%9B%E3%81%99%E3%82%8B%E3%83%A1%E3%82%BD%E3%83%83%E3%83%89%E3%82%92%E5%AE%9A%E7%BE%A9"><i class="fa fa-link"></i></a>1. UIImage 型の画像を cv::Mat 型に変換するメソッドを定義</h3>

<p>UIImage 型の画像を cv::Mat 型に変換するメソッドを定義します。（cv::Mat は、画像のビットマップデータへのポインタと、幅，高さ，ビット深度などの様々なプロパティを保持するクラスです。）</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>- (cv::Mat)cvMatFromUIImage:(UIImage *)image
{
    CGColorSpaceRef colorSpace = CGImageGetColorSpace(image.CGImage);
    CGFloat cols = image.size.width;
    CGFloat rows = image.size.height;

    cv::Mat cvMat(rows, cols, CV_8UC4); // 8 bits per component, 4 channels

    CGContextRef contextRef = CGBitmapContextCreate(cvMat.data,                 // Pointer to  data
                                                    cols,                       // Width of bitmap
                                                    rows,                       // Height of bitmap
                                                    8,                          // Bits per component
                                                    cvMat.step[0],              // Bytes per row
                                                    colorSpace,                 // Colorspace
                                                    kCGImageAlphaNoneSkipLast |
                                                    kCGBitmapByteOrderDefault); // Bitmap info flags

    CGContextDrawImage(contextRef, CGRectMake(0, 0, cols, rows), image.CGImage);
    CGContextRelease(contextRef);
    CGColorSpaceRelease(colorSpace);

    return cvMat;
}
</pre></div></div>

<h3>
<span id="2-cvmat-型の画像を-uiimage-型に変換するメソッドを定義" class="fragment"></span><a href="#2-cvmat-%E5%9E%8B%E3%81%AE%E7%94%BB%E5%83%8F%E3%82%92-uiimage-%E5%9E%8B%E3%81%AB%E5%A4%89%E6%8F%9B%E3%81%99%E3%82%8B%E3%83%A1%E3%82%BD%E3%83%83%E3%83%89%E3%82%92%E5%AE%9A%E7%BE%A9"><i class="fa fa-link"></i></a>2. cv::Mat 型の画像を UIImage 型に変換するメソッドを定義</h3>

<p>cv::Mat を UIImage に変換するメソッドも定義しておきます。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>- (UIImage *)UIImageFromCVMat:(cv::Mat)cvMat
{
    NSData *data = [NSData dataWithBytes:cvMat.data length:cvMat.elemSize()*cvMat.total()];
    CGColorSpaceRef colorSpace;

    if (cvMat.elemSize() == 1) {
        colorSpace = CGColorSpaceCreateDeviceGray();
    } else {
        colorSpace = CGColorSpaceCreateDeviceRGB();
    }

    CGDataProviderRef provider = CGDataProviderCreateWithCFData((__bridge CFDataRef)data);

    // Creating CGImage from cv::Mat
    CGImageRef imageRef = CGImageCreate(cvMat.cols,                                 //width
                                        cvMat.rows,                                 //height
                                        8,                                          //bits per component
                                        8 * cvMat.elemSize(),                       //bits per pixel
                                        cvMat.step[0],                              //bytesPerRow
                                        colorSpace,                                 //colorspace
                                        kCGImageAlphaNone|kCGBitmapByteOrderDefault,// bitmap info
                                        provider,                                   //CGDataProviderRef
                                        NULL,                                       //decode
                                        false,                                      //should interpolate
                                        kCGRenderingIntentDefault                   //intent
                                        );


    // Getting UIImage from CGImage
    UIImage *finalImage = [UIImage imageWithCGImage:imageRef];
    CGImageRelease(imageRef);
    CGDataProviderRelease(provider);
    CGColorSpaceRelease(colorSpace);

    return finalImage;
}
</pre></div></div>

<h3>
<span id="3-グレースケール画像に変換する" class="fragment"></span><a href="#3-%E3%82%B0%E3%83%AC%E3%83%BC%E3%82%B9%E3%82%B1%E3%83%BC%E3%83%AB%E7%94%BB%E5%83%8F%E3%81%AB%E5%A4%89%E6%8F%9B%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>3. グレースケール画像に変換する</h3>

<p>色空間変換を行う cvtColor() というメソッドと、上記で実装した UIImage と cv::Mat を相互変換するメソッドを用いて、下記のように UIImage をグレースケールに変換して UIImage として出力する処理を実装できます。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>cv::Mat srcMat = [self cvMatFromUIImage:srcImage];
cv::Mat greyMat;
cv::cvtColor(srcMat, greyMat, CV_BGR2GRAY);

return [self UIImageFromCVMat:greyMat];
</pre></div></div>

<h2>
<span id="応用編漫画カメラ風に写真を加工する" class="fragment"></span><a href="#%E5%BF%9C%E7%94%A8%E7%B7%A8%E6%BC%AB%E7%94%BB%E3%82%AB%E3%83%A1%E3%83%A9%E9%A2%A8%E3%81%AB%E5%86%99%E7%9C%9F%E3%82%92%E5%8A%A0%E5%B7%A5%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>応用編：漫画カメラ風に写真を加工する</h2>

<p>下記記事に、OpenCVを用いて<strong>漫画カメラ風に加工する手順</strong>を書いたので、よろしければご参照ください。</p>

<p><a href="http://d.hatena.ne.jp/shu223/20121129/1354145960" rel="nofollow noopener" target="_blank">たったの6ステップ！『漫画カメラ』風に写真を加工するiPhoneアプリの作り方</a></p>

<p><a href="https://camo.qiitausercontent.com/a38aa847b732a860883167de2668de37573d70de/687474703a2f2f696d672e662e686174656e612e6e652e6a702f696d616765732f666f746f6c6966652f732f7368753232332f32303132313132392f32303132313132393231303533302e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/a38aa847b732a860883167de2668de37573d70de/687474703a2f2f696d672e662e686174656e612e6e652e6a702f696d616765732f666f746f6c6966652f732f7368753232332f32303132313132392f32303132313132393231303533302e706e67" alt="manga" data-canonical-src="http://img.f.hatena.ne.jp/images/fotolife/s/shu223/20121129/20121129210530.png"></a></p>

<div class="footnotes">
<hr>
<ol>

<li id="fn1">
<p>以前はItseezアカウントにあったのですが、いつの間にかOpenCVアカウントになってました <a href="#fnref1">↩</a></p>
</li>

</ol>
</div>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>shu223さんの<br />8位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>221</kbd>
		<a target="_blank" href="https://qiita.com/shu223/items/eda02dc7d334c339ff64">フリーの iOS 向け音声認識／音声合成ライブラリ『OpenEars』の使い方</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-08-10 13:04:35</center>
	</td>
	<td style="width:200px;">
		@shu223<br />(Freelancer 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/3180/profile-images/1473682733">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Objective-C]</b> <b>[iOS]</b> <b>[音声合成]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>OpenEars は Politepix 社より提供されている <strong>フリーの iOS 向け音声認識／音声合成（Text to Speech, TTS）ライブラリ</strong> です。</p>

<p><a href="http://www.politepix.com/openears" rel="nofollow noopener" target="_blank">OpenEars</a></p>

<p><a href="https://camo.qiitausercontent.com/7848c075cf4b916196f756771939bfab0f700f95/687474703a2f2f63646e2d616b2e662e73742d686174656e612e636f6d2f696d616765732f666f746f6c6966652f732f7368753232332f32303133303830392f32303133303830393230343534392e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/7848c075cf4b916196f756771939bfab0f700f95/687474703a2f2f63646e2d616b2e662e73742d686174656e612e636f6d2f696d616765732f666f746f6c6966652f732f7368753232332f32303133303830392f32303133303830393230343534392e706e67" alt="" data-canonical-src="http://cdn-ak.f.st-hatena.com/images/fotolife/s/shu223/20130809/20130809204549.png"></a></p>

<p><strong>話した言葉を認識</strong>したり、 <strong>入力した文字列を読み上げ</strong> たり（mac の say コマンドみたいなもの）することができます。</p>

<p>試してみたところ超簡単に使えたので、自分のアプリに OpenEars を導入する方法を紹介します。</p>

<p>（2014.3.31追記） <strong>OpenEars 最新バージョンでの音声認識の導入方法については次の記事をご参照ください：『<a href="http://d.hatena.ne.jp/shu223/20140126/1391077538" rel="nofollow noopener" target="_blank">OpenEars 1.6で音声認識を行う</a>』</strong></p>

<h2>
<span id="音声合成の導入方法" class="fragment"></span><a href="#%E9%9F%B3%E5%A3%B0%E5%90%88%E6%88%90%E3%81%AE%E5%B0%8E%E5%85%A5%E6%96%B9%E6%B3%95"><i class="fa fa-link"></i></a>音声合成の導入方法</h2>

<p>フレームワーク追加、ヘッダインポートといった一般的なライブラリの導入手順をのぞけば、基本的には <strong>メソッドを1つ呼ぶだけ</strong> で導入できます。</p>

<h3>
<span id="1-フレームワークをプロジェクトに追加" class="fragment"></span><a href="#1-%E3%83%95%E3%83%AC%E3%83%BC%E3%83%A0%E3%83%AF%E3%83%BC%E3%82%AF%E3%82%92%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AB%E8%BF%BD%E5%8A%A0"><i class="fa fa-link"></i></a><b>1. フレームワークをプロジェクトに追加</b>
</h3>

<p>解凍したフォルダ配下にある <strong>Frameworkフォルダごと</strong> プロジェクトに追加します。フォルダには OpenEars.framework、Slt.framework ほか、言語モデルや辞書が入っています。</p>

<p>また、依存フレームワークである</p>

<ul>
<li>AVFoundation.framework</li>
<li>AudioToolbox.framework</li>
</ul>

<p>をプロジェクトに追加しておきます。</p>

<h3>
<span id="2-ヘッダをインポート" class="fragment"></span><a href="#2-%E3%83%98%E3%83%83%E3%83%80%E3%82%92%E3%82%A4%E3%83%B3%E3%83%9D%E3%83%BC%E3%83%88"><i class="fa fa-link"></i></a><b>2. ヘッダをインポート</b>
</h3>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>#import &lt;Slt/Slt.h&gt;
#import &lt;OpenEars/FliteController.h&gt;
</pre></div></div>

<h3>
<span id="3-オブジェクトを生成" class="fragment"></span><a href="#3-%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%82%92%E7%94%9F%E6%88%90"><i class="fa fa-link"></i></a><b>3. オブジェクトを生成</b>
</h3>

<p>FliteController, Slt オブジェクトを生成します。</p>

<p>プロパティを定義しておき、</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>@property (strong, nonatomic) FliteController *fliteController;
@property (strong, nonatomic) Slt *slt;
</pre></div></div>

<p>alloc / init します。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>self.fliteController = [[FliteController alloc] init];
self.slt = [[Slt alloc] init];
</pre></div></div>

<h3>
<span id="4-say-メソッドをコール" class="fragment"></span><a href="#4-say-%E3%83%A1%E3%82%BD%E3%83%83%E3%83%89%E3%82%92%E3%82%B3%E3%83%BC%E3%83%AB"><i class="fa fa-link"></i></a><b>4. say: メソッドをコール</b>
</h3>

<p>あとは音声合成で発声させたい文字列を渡して <code>say:</code> メソッドをコールするだけです。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>[self.fliteController say:@"Hello world!" withVoice:self.slt];
</pre></div></div>

<h3>
<span id="補足その１日本語を発声させる" class="fragment"></span><a href="#%E8%A3%9C%E8%B6%B3%E3%81%9D%E3%81%AE%EF%BC%91%E6%97%A5%E6%9C%AC%E8%AA%9E%E3%82%92%E7%99%BA%E5%A3%B0%E3%81%95%E3%81%9B%E3%82%8B"><i class="fa fa-link"></i></a><b>（補足その１）日本語を発声させる</b>
</h3>

<p>OpenEars （少なくとも上記の使い方では）日本語には対応していませんが、ローマ字的に文字列を渡すことでそれっぽくすることはできます。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>[self.fliteController say:@"Ai ou es apuri kaihatsu. Tatsujinn no recipe hyaku. Hatsubai chuu" withVoice:self.slt];
</pre></div></div>

<h3>
<span id="補足その２声を変える" class="fragment"></span><a href="#%E8%A3%9C%E8%B6%B3%E3%81%9D%E3%81%AE%EF%BC%92%E5%A3%B0%E3%82%92%E5%A4%89%E3%81%88%E3%82%8B"><i class="fa fa-link"></i></a><b>（補足その２）声を変える</b>
</h3>

<p>Bitbucket に <a href="https://bitbucket.org/Politepix/openearsextras/src" rel="nofollow noopener" target="_blank">openearsextras</a> というリポジトリがあり、ここに声を変えるためのデータ（.framework として提供されている）が置いてあります。</p>

<p>たとえば上記では SLT.framework を用いましたが、openearsextras の中にある <a href="https://bitbucket.org/Politepix/openearsextras/src/9f15cdb9e746732402e928424a46debb9d79ecc7/FliteVoices/Awb.framework?at=master" rel="nofollow noopener" target="_blank">Awb.framework</a> を用いると、 <strong>男性の声</strong> で読み上げられます。</p>

<h3>
<span id="品質について" class="fragment"></span><a href="#%E5%93%81%E8%B3%AA%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6"><i class="fa fa-link"></i></a>品質について</h3>

<p>音声合成の品質は、英語の場合でも「そこそこ」です。抑揚が変。まだドキュメントを詳しく読んでないのですが、細かいチューニングができるようになっているかもしれません。</p>

<h2>
<span id="音声認識の導入方法" class="fragment"></span><a href="#%E9%9F%B3%E5%A3%B0%E8%AA%8D%E8%AD%98%E3%81%AE%E5%B0%8E%E5%85%A5%E6%96%B9%E6%B3%95"><i class="fa fa-link"></i></a>音声認識の導入方法</h2>

<p>以前 <a href="http://d.hatena.ne.jp/shu223/20110227/1299368179" rel="nofollow noopener" target="_blank">VocalKitの使い方</a> という記事を書きましたが、執筆時から3年近く経っているので、内容が古くなっている可能性があります。（VocalKit のリポジトリも2年以上更新されていません。）</p>

<p>この OpenEars は VocalKit と同様に音声認識エンジンとして CMU Sphinx を使用しているので、その代替になりそうです。</p>

<p>実装方法は下記の通り。音響モデルや言語辞書の設定があったり、音声認識の各種ステータスを受け取るためにプロトコルの実装が必要だったりして一見煩雑ですが、 <strong>要は startListeningWith～ メソッドを呼んで認識結果を受け取るだけ</strong> （発話の検出とかは勝手にやってくれる）なので、とてもシンプルです。</p>

<h3>
<span id="2014130追記" class="fragment"></span><a href="#2014130%E8%BF%BD%E8%A8%98"><i class="fa fa-link"></i></a>※2014.1.30追記</h3>

<p>本記事にあるコードは <strong>OpenEars最新バージョンにおいてビルドエラーが起きる</strong> 箇所があります。最新版を用いた音声認識の実装方法については下記記事も併せてご参照ください。</p>

<ul>
<li><a href="http://d.hatena.ne.jp/shu223/20140126/1391077538:title:bookmark" rel="nofollow noopener" target="_blank">OpenEars 1.6で音声認識を行う</a></li>
</ul>

<h3>
<span id="1-フレームワークをプロジェクトに追加-1" class="fragment"></span><a href="#1-%E3%83%95%E3%83%AC%E3%83%BC%E3%83%A0%E3%83%AF%E3%83%BC%E3%82%AF%E3%82%92%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AB%E8%BF%BD%E5%8A%A0-1"><i class="fa fa-link"></i></a><b>1. フレームワークをプロジェクトに追加</b>
</h3>

<p>ここは音声合成と同様です。</p>

<h3>
<span id="2-ヘッダをインポート-1" class="fragment"></span><a href="#2-%E3%83%98%E3%83%83%E3%83%80%E3%82%92%E3%82%A4%E3%83%B3%E3%83%9D%E3%83%BC%E3%83%88-1"><i class="fa fa-link"></i></a><b>2. ヘッダをインポート</b>
</h3>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>#import &lt;OpenEars/LanguageModelGenerator.h&gt;
#import &lt;OpenEars/PocketsphinxController.h&gt;
</pre></div></div>

<h3>
<span id="3-プロトコルへの準拠" class="fragment"></span><a href="#3-%E3%83%97%E3%83%AD%E3%83%88%E3%82%B3%E3%83%AB%E3%81%B8%E3%81%AE%E6%BA%96%E6%8B%A0"><i class="fa fa-link"></i></a><b>3. プロトコルへの準拠</b>
</h3>

<p><a href="/interface" class="user-mention js-hovercard" title="interface" data-hovercard-target-type="user" data-hovercard-target-name="interface">@interface</a> で、音声認識の各種ステータスを受け取るための OpenEarsEventsObserverDelegate への準拠を宣言しておき、</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>&lt;OpenEarsEventsObserverDelegate&gt;
</pre></div></div>

<p>各種メソッドを実装します。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>- (void)pocketsphinxDidReceiveHypothesis:(NSString *)hypothesis
                        recognitionScore:(NSString *)recognitionScore
                             utteranceID:(NSString *)utteranceID
{
    NSLog(@"The received hypothesis is %@ with a score of %@ and an ID of %@",
          hypothesis, recognitionScore, utteranceID);
}
</pre></div></div>

<p>OpenEarsEventsObserverDelegate プロトコルには多くのメソッドが定義されていますが、 <strong>全部 optional</strong> なので、とりあえず認識結果を受け取るための上記メソッドを実装しておくだけでも雰囲気はつかめるかと思います。</p>

<h3>
<span id="4-オブジェクトを生成" class="fragment"></span><a href="#4-%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%82%92%E7%94%9F%E6%88%90"><i class="fa fa-link"></i></a><b>4. オブジェクトを生成</b>
</h3>

<p>各種プロパティを定義しておき、</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>@property (strong, nonatomic) NSString *lmPath;
@property (strong, nonatomic) NSString *dicPath;
@property (strong, nonatomic) PocketsphinxController *pocketsphinxController;
@property (strong, nonatomic) OpenEarsEventsObserver *openEarsEventsObserver;
</pre></div></div>

<p>言語モデル／辞書のパスと、各種オブジェクトを保持しておきます。<code>delegate</code> プロパティのセットも忘れずに。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>NSString *resorcePath = [[NSBundle mainBundle] resourcePath];
self.lmPath = [NSString stringWithFormat:@"%@/%@", resorcePath, @"OpenEars1.languagemodel"];
self.dicPath = [NSString stringWithFormat:@"%@/%@", resorcePath, @"OpenEars1.dic"];

self.pocketsphinxController = [[PocketsphinxController alloc] init];
self.openEarsEventsObserver = [[OpenEarsEventsObserver alloc] init];
[self.openEarsEventsObserver setDelegate:self];
</pre></div></div>

<h3>
<span id="5-認識スタート" class="fragment"></span><a href="#5-%E8%AA%8D%E8%AD%98%E3%82%B9%E3%82%BF%E3%83%BC%E3%83%88"><i class="fa fa-link"></i></a><b>5. 認識スタート</b>
</h3>

<p><code>startListeningWithLanguageModelAtPath:</code> メソッドをコールすると音声入力がスタートし、あとは勝手に発話を検出（一定レベルの音声入力を検出して発話開始と判定、一定時間の空白を検出して発話終了と判定）して認識してくれます。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>- (void)startListening {

    [self.pocketsphinxController startListeningWithLanguageModelAtPath:self.lmPath
                                                      dictionaryAtPath:self.dicPath
                                                   languageModelIsJSGF:NO];
}
</pre></div></div>

<p>発話を検出するたびに認識処理が走り、手順3で実装した <code>pocketsphinxDidReceiveHypothesis:recognitionScore:utteranceID:</code> が呼ばれます。Hypothesis が候補の文字列、recognitionScore はそのスコアです。</p>

<h3>
<span id="補足その１認識終了" class="fragment"></span><a href="#%E8%A3%9C%E8%B6%B3%E3%81%9D%E3%81%AE%EF%BC%91%E8%AA%8D%E8%AD%98%E7%B5%82%E4%BA%86"><i class="fa fa-link"></i></a><b>（補足その１）認識終了</b>
</h3>

<p><code>stopListening</code> メソッドを呼ぶと認識処理（音声入力の待ち受けと、認識処理）が終了します。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>[self.pocketsphinxController stopListening];
</pre></div></div>

<h3>
<span id="補足その２言語モデルの動的生成" class="fragment"></span><a href="#%E8%A3%9C%E8%B6%B3%E3%81%9D%E3%81%AE%EF%BC%92%E8%A8%80%E8%AA%9E%E3%83%A2%E3%83%87%E3%83%AB%E3%81%AE%E5%8B%95%E7%9A%84%E7%94%9F%E6%88%90"><i class="fa fa-link"></i></a><b>（補足その２）言語モデルの動的生成</b>
</h3>

<p>LanguageModelGenerator を用いると、認識したい言葉の配列から言語モデルを動的に生成することができます。</p>

<p>認識したい言葉（単語／フレーズ）の配列を生成し、</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span> NSArray *words = @[
                   @"SUNDAY",
                   @"MONDAY",
                   @"TUESDAY",
                   @"WEDNESDAY",
                   @"THURSDAY",
                   @"FRIDAY",
                   @"SATURDAY",
                   @"QUIDNUNC",
                   @"CHANGE MODEL",
                   ];
</pre></div></div>

<p><code>generateLanguageModelFromArray:withFilesNamed:</code> メソッドをコールします。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>LanguageModelGenerator *lmGenerator = [[LanguageModelGenerator alloc] init];
NSError *error = [lmGenerator generateLanguageModelFromArray:words
                                              withFilesNamed:@"OpenEarsDynamicGrammar"];

if (error.code != noErr) {

    NSLog(@"Error: %@",[error localizedDescription]);
}
else {

    NSDictionary *languageGeneratorResults = [error userInfo];

    self.lmPath = [languageGeneratorResults objectForKey:@"LMPath"];
    self.dicPath = [languageGeneratorResults objectForKey:@"DictionaryPath"];
}
</pre></div></div>

<p>NSError の <code>userInfo</code> に処理結果が入っている、というのはちょっと変な感じがしますが。。</p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>shu223さんの<br />9位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>218</kbd>
		<a target="_blank" href="https://qiita.com/shu223/items/223492e4f061032e652e">iOSで使える日本語OKな音声読み上げエンジン8種（TTS,音声合成）</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-12-02 15:13:29</center>
	</td>
	<td style="width:200px;">
		@shu223<br />(Freelancer 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/3180/profile-images/1473682733">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Objective-C]</b> <b>[iOS]</b> <b>[自然言語処理]</b> <b>[音声合成]</b> <b>[Swift]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p><a href="http://d.hatena.ne.jp/shu223/20130924/1379990718" rel="nofollow noopener" target="_blank">iOS7 から AVSpeechSynthesizer クラスが追加</a> され、音声合成（読み上げ／Text to Speech）が手軽に使えるようになりました。</p>

<p>既に <strong>日本語を含む36種の言語に対応したvoice</strong> が用意されていて、音質もなかなかです。ひらがなも漢字も読んでくれるので、テキストをまるっと渡せば読んでくれます。</p>

<p><a href="https://camo.qiitausercontent.com/c11cb18da743886496bed21f02d3477247f74475/687474703a2f2f662e636c2e6c792f6974656d732f334e325a33473046336e335032433055304231642f736972692d3367732d325f72315f63312e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/c11cb18da743886496bed21f02d3477247f74475/687474703a2f2f662e636c2e6c792f6974656d732f334e325a33473046336e335032433055304231642f736972692d3367732d325f72315f63312e706e67" alt="" data-canonical-src="http://f.cl.ly/items/3N2Z3G0F3n3P2C0U0B1d/siri-3gs-2_r1_c1.png"></a></p>

<p>が、ひとつ物足りなかったのが、 <strong>読み上げのチューニングができない</strong> こと。</p>

<p>音声合成は古くからあるジャンルなので、もっと細かくチューニングできて、音声がきれいなサードパーティ製SDKがあるんじゃないかと思い、いろいろ調べてみました。</p>

<h2>
<span id="aquestalk2" class="fragment"></span><a href="#aquestalk2"><i class="fa fa-link"></i></a><a href="http://www.a-quest.com/products/aquestalk.html" rel="nofollow noopener" target="_blank">AquesTalk2</a>
</h2>

<h3>
<span id="長所" class="fragment"></span><a href="#%E9%95%B7%E6%89%80"><i class="fa fa-link"></i></a>長所</h3>

<ul>
<li>評価版はすぐにDLして試せる</li>
<li>
<strong>日本語の特性を考慮した、非常に細かいチューニング</strong> が可能

<ul>
<li>アクセント</li>
<li>無声化</li>
<li>区切り</li>
<li>ガ行鼻濁音</li>
<li>数値桁読み</li>
<li>etc...</li>
</ul>
</li>
</ul>

<h3>
<span id="短所" class="fragment"></span><a href="#%E7%9F%AD%E6%89%80"><i class="fa fa-link"></i></a>短所</h3>

<ul>
<li>音質が低い

<ul>
<li>phontというしくみがあるので入れ替え可能かも</li>
</ul>
</li>
<li>漢字が読めない

<ul>
<li>ひらがなに変換してやる必要がある</li>
</ul>
</li>
<li>あまり更新されてない

<ul>
<li>サンプルの Deployment Target は 3.0。。</li>
</ul>
</li>
<li>使用方法が面倒（APIがシンプルじゃない）

<ul>
<li>例： <strong>読み上げてもらう文字列を ShiftJIS に変換する必要がある</strong>
</li>
</ul>
</li>
</ul>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>char *sjis = (char*)[self.textView.text cStringUsingEncoding:NSShiftJISStringEncoding];
</pre></div></div>

<h3>
<span id="その他" class="fragment"></span><a href="#%E3%81%9D%E3%81%AE%E4%BB%96"><i class="fa fa-link"></i></a>その他</h3>

<ul>
<li>ライセンスは5800円

<ul>
<li><a href="http://shop.a-quest.com/?mode=cate&amp;cbid=1377248&amp;csid=0" rel="nofollow noopener" target="_blank">オンラインで購入可</a></li>
</ul>
</li>
</ul>

<h2>
<span id="ispeech" class="fragment"></span><a href="#ispeech"><i class="fa fa-link"></i></a><a href="https://www.ispeech.org/developers/iphone" rel="nofollow noopener" target="_blank">iSpeech</a>
</h2>

<h3>
<span id="長所-1" class="fragment"></span><a href="#%E9%95%B7%E6%89%80-1"><i class="fa fa-link"></i></a>長所</h3>

<ul>
<li><strong>音質がいい</strong></li>
<li>導入しやすい

<ul>
<li>Blocksを使った記述も可能</li>
</ul>
</li>
<li>無料

<ul>
<li>モバイル用SDKからの使用のみ。APIは従量課金っぽい</li>
</ul>
</li>
</ul>

<h3>
<span id="短所-1" class="fragment"></span><a href="#%E7%9F%AD%E6%89%80-1"><i class="fa fa-link"></i></a>短所</h3>

<ul>
<li><strong>要ネットワーク</strong></li>
</ul>

<h3>
<span id="その他-1" class="fragment"></span><a href="#%E3%81%9D%E3%81%AE%E4%BB%96-1"><i class="fa fa-link"></i></a>その他</h3>

<ul>
<li>Evernote clearlyの読み上げ機能で<a href="http://blog.evernote.com/blog/2012/11/27/evernote-clearly-now-reads-pages-to-you-with-text-to-speech/" rel="nofollow noopener" target="_blank">使用されている</a>
</li>
</ul>

<h2>
<span id="acapela" class="fragment"></span><a href="#acapela"><i class="fa fa-link"></i></a><a href="http://www.acapela-for-iphone.com/" rel="nofollow noopener" target="_blank">Acapela</a>
</h2>

<h3>
<span id="長所-2" class="fragment"></span><a href="#%E9%95%B7%E6%89%80-2"><i class="fa fa-link"></i></a>長所</h3>

<ul>
<li>音質は標準（AVSpeechSynthesizer）と同じぐらい（※主観）</li>
<li>ひらがな、漢字をそのまま渡せる</li>
</ul>

<h3>
<span id="短所-2" class="fragment"></span><a href="#%E7%9F%AD%E6%89%80-2"><i class="fa fa-link"></i></a>短所</h3>

<ul>
<li>漢字の読みが間違っていても、修正できない（辞書登録等の方法がない）</li>
<li>評価版があまりメンテされてない

<ul>
<li>
<a href="http://www.acapela-for-iphone.com/download" rel="nofollow noopener" target="_blank">ここ</a>からダウンロードできる最新版は1.304</li>
<li>サンプルプロジェクトのコンパイラが古いものが指定されてるので、default compilerに変更する</li>
<li>評価版はシミュレータでのみ動作するとのことなので、シミュレータで動かしてみると、HelloTTSサンプルは動くが、TTSDemoサンプルはエラーが出る（ここで評価をあきらめた）</li>
<li>ライセンス購入するともらえるSDKは、少なくとも1.4以上らしい</li>
</ul>
</li>
</ul>

<h3>
<span id="その他-2" class="fragment"></span><a href="#%E3%81%9D%E3%81%AE%E4%BB%96-2"><i class="fa fa-link"></i></a>その他</h3>

<ul>
<li>有料：アプリの売り上げの30%（Apple税を引いた残りの30%）</li>
<li>
<a href="https://twitter.com/umekun123" rel="nofollow noopener" target="_blank">うめのん</a>さんの『<a href="http://voicepaperapp.com" rel="nofollow noopener" target="_blank">VoicePaper</a>』、『<a href="https://itunes.apple.com/jp/app/id685782917" rel="nofollow noopener" target="_blank">音声文庫</a>』といった読み上げ読書アプリは、Acapelaを使用しているとのこと。</li>
</ul>

<p>（参考記事：<a href="http://umenon.com/2013/08/16/aozorabunko/" rel="nofollow noopener" target="_blank">おかんでも使えるアプリ、青空文庫読み上げの音声文庫を作った</a>）</p>

<h2>
<span id="ドキュメントトーカ" class="fragment"></span><a href="#%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%83%88%E3%83%BC%E3%82%AB"><i class="fa fa-link"></i></a><a href="http://www.createsystem.co.jp/dtalkeriPhoneSDK.html" rel="nofollow noopener" target="_blank">ドキュメントトーカ</a>
</h2>

<h3>
<span id="長所-3" class="fragment"></span><a href="#%E9%95%B7%E6%89%80-3"><i class="fa fa-link"></i></a>長所</h3>

<ul>
<li><strong>日本語のイントネーションが自然</strong></li>
<li>
<strong>歌唱</strong> させることも可能</li>
<li>
<strong>男性の声</strong> も選択可能</li>
<li>漢字ひらがな混じりOK</li>
<li>ユーザー辞書の登録も可能</li>
<li>導入が簡単（APIがシンプル）</li>
</ul>

<h3>
<span id="短所-3" class="fragment"></span><a href="#%E7%9F%AD%E6%89%80-3"><i class="fa fa-link"></i></a>短所</h3>

<ul>
<li>音質はiOS標準（AVSpeechSynthesizer）に劣る</li>
<li>実際にデバイスで動作できる有償版は、要問い合わせ

<ul>
<li>どれぐらいの価格帯なのかも不明（有償版は5000円〜50万円ぐらいの幅があるので、目安の価格ぐらいは知りたい）</li>
<li>無料DLできる評価版はsimulatorでのみ動作する</li>
</ul>
</li>
</ul>

<h2>
<span id="neospeech" class="fragment"></span><a href="#neospeech"><i class="fa fa-link"></i></a><a href="http://www.neospeech.com/" rel="nofollow noopener" target="_blank">NeoSpeech</a>
</h2>

<p>フォームで諸々入力しないとSDKもらえないので試してないのですが、使ってみた人の話を聞いたところ、</p>

<ul>
<li>日本語音声はiSpeechと同じ人の声</li>
<li>API は ObjectiveC ではない</li>
</ul>

<p>とのこと。</p>

<h2>
<span id="google-tts" class="fragment"></span><a href="#google-tts"><i class="fa fa-link"></i></a>Google TTS</h2>

<p>APIを利用するものなので、試してないのですが、下記のような参考になる記事があります。サンプルあり。</p>

<p><a href="http://d.hatena.ne.jp/jonki/20130102" rel="nofollow noopener" target="_blank">【iOS】Google TTSでText To Speechを実装する</a></p>

<h2>
<span id="voice-text" class="fragment"></span><a href="#voice-text"><i class="fa fa-link"></i></a><a href="http://voicetext.jp/use_smartphone.html" rel="nofollow noopener" target="_blank">VOICE TEXT</a>
</h2>

<ul>
<li>by HOYA</li>
<li>要問い合わせ

<ul>
<li>有償、かつ評価版をwebからダウンロードすることができないため、試していない</li>
</ul>
</li>
</ul>

<h2>
<span id="n2" class="fragment"></span><a href="#n2"><i class="fa fa-link"></i></a><a href="http://www.kddilabs.jp/press/2013/0523-1.html" rel="nofollow noopener" target="_blank">N2</a>
</h2>

<ul>
<li>by KDDI</li>
<li>要問い合わせ

<ul>
<li>有償、かつ評価版をwebからダウンロードすることができないため、試していない</li>
</ul>
</li>
</ul>

<h2>
<span id="聴き比べ" class="fragment"></span><a href="#%E8%81%B4%E3%81%8D%E6%AF%94%E3%81%B9"><i class="fa fa-link"></i></a>聴き比べ</h2>

<ul>
<li>iOS SDKの AVSpeechSynthesizer</li>
<li>iSpeech</li>
<li>AquesTalk2</li>
<li>ドキュメントトーカ</li>
<li>Acapela</li>
</ul>

<p>を <strong>聴き比べできるサンプルアプリ</strong> を実装しました。</p>

<p><a href="https://camo.qiitausercontent.com/c8a4151060706bfd10992cdc35495da57d41980b/687474703a2f2f662e636c2e6c792f6974656d732f3267313733423261326f3151325632663377314c2f6576616c5f6170702e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/c8a4151060706bfd10992cdc35495da57d41980b/687474703a2f2f662e636c2e6c792f6974656d732f3267313733423261326f3151325632663377314c2f6576616c5f6170702e706e67" alt="" data-canonical-src="http://f.cl.ly/items/2g173B2a2o1Q2V2f3w1L/eval_app.png"></a></p>

<p>が、各社GitHubとかにSDKをアップしてるわけじゃないので、たぶん私がそれを再配布するのはアウトな気がする（未確認）ので、ローカルで試して結論を述べるにとどめておきます。</p>

<p>（というか、上述のまとめは、実装してみて聴き比べてみた上で書いたものです）</p>

<h2>
<span id="結論" class="fragment"></span><a href="#%E7%B5%90%E8%AB%96"><i class="fa fa-link"></i></a>結論</h2>

<p><strong>音質の良い順</strong> は、</p>

<p>iSpeech &gt; 標準（AVSpeech）≒ Acapela &gt; ドキュメントトーカ &gt;&gt; Aques</p>

<p>iOS標準より明らかに音質がいいのは iSpeech ぐらいでした。</p>

<p><strong>日本語のイントネーションの自然さ</strong> が良かったのは、ドキュメントトーカ、iSpeech、Aques（チューニングすれば）。</p>

<p>ただ、</p>

<ul>
<li>iSpeech はオフラインで使用できないこと</li>
<li>Acapela, DTalk 音質がApple標準と同等以下、かつ有料であること</li>
<li>Aquesは音質がかなり低いこと</li>
</ul>

<p>を加味すると、現実的には、 <strong>とりあえずはiOS標準が第一候補</strong> で、オンライン前提でもよければ <strong>iSpeech</strong> 、あとは、どうしてもイントネーションを調整したいとか、男性の声を使いたいとか、特殊なニーズに応じて検討、という感じです。</p>

<p>せっかくいろいろ調べたのに、なかなかしょっぱい結論となってしまいました。。</p>

<h2>
<span id="余談" class="fragment"></span><a href="#%E4%BD%99%E8%AB%87"><i class="fa fa-link"></i></a>余談</h2>

<p>ちなみに、今回TTSエンジンを検討したのは、 私の個人名刺に関係したアプリを作成するためでした。</p>

<p><a href="https://camo.qiitausercontent.com/b56f0ef9356be90f23279e8304eec00d9961fd5a/687474703a2f2f63646e2d616b2e662e73742d686174656e612e636f6d2f696d616765732f666f746f6c6966652f732f7368753232332f32303133313132382f32303133313132383030343535352e6a7067" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/b56f0ef9356be90f23279e8304eec00d9961fd5a/687474703a2f2f63646e2d616b2e662e73742d686174656e612e636f6d2f696d616765732f666f746f6c6966652f732f7368753232332f32303133313132382f32303133313132383030343535352e6a7067" width="300" data-canonical-src="http://cdn-ak.f.st-hatena.com/images/fotolife/s/shu223/20131128/20131128004555.jpg"></a></p>

<p><a href="http://d.hatena.ne.jp/shu223/20131118/1384757372" rel="nofollow noopener" target="_blank">iOS7対応の名刺をつくりました</a> </p>

<p>また準備が整ったら更新します。</p>

<h2>
<span id="関連ページ" class="fragment"></span><a href="#%E9%96%A2%E9%80%A3%E3%83%9A%E3%83%BC%E3%82%B8"><i class="fa fa-link"></i></a>関連ページ</h2>

<ul>
<li><a href="http://qiita.com/shu223/items/eda02dc7d334c339ff64" id="reference-d8d69acd925bf276d573">フリーの iOS 向け音声認識／音声合成ライブラリ『OpenEars』の使い方</a></li>
</ul>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>shu223さんの<br />10位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>169</kbd>
		<a target="_blank" href="https://qiita.com/shu223/items/bfb5ef3e45682c2bb763">Google Maps SDK for iOSの導入手順</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2012-12-14 10:29:40</center>
	</td>
	<td style="width:200px;">
		@shu223<br />(Freelancer 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/3180/profile-images/1473682733">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Objective-C]</b> <b>[iPhone]</b> <b>[AdventCalendar]</b> <b>[iOS]</b> <b>[GoogleMapsAPI]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>アプリ内で Google Maps を使用するための SDK、"Google Maps SDK for iOS" の導入手順です。</p>

<p>公式情報は <a href="https://developers.google.com/maps/documentation/ios/start" rel="nofollow noopener" target="_blank">Google Developers</a> にあります。</p>

<p><a href="https://camo.qiitausercontent.com/46b9af2f89b71c968760b4a080df79c3e3468ee2/687474703a2f2f662e636c2e6c792f6974656d732f33763267305a3230326d306330663358336f316b2f676d617073312e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/46b9af2f89b71c968760b4a080df79c3e3468ee2/687474703a2f2f662e636c2e6c792f6974656d732f33763267305a3230326d306330663358336f316b2f676d617073312e706e67" alt="サンプル" data-canonical-src="http://f.cl.ly/items/3v2g0Z202m0c0f3X3o1k/gmaps1.png"></a></p>

<h2>
<span id="1-api-keyを取得" class="fragment"></span><a href="#1-api-key%E3%82%92%E5%8F%96%E5%BE%97"><i class="fa fa-link"></i></a>1. API Keyを取得</h2>

<ul>
<li>
<a href="https://code.google.com/apis/console/" rel="nofollow noopener" target="_blank">Google APIs Console</a> の Services タブで、Google Maps SDK for iOS を ON にする。</li>
<li>API Access タブで、"Create new iOS key" ボタンをクリック。ポップアップで出てくるウィンドウに、Google Maps SDK for iOSを使用するアプリのBundle identifierを入力する。</li>
</ul>

<h2>
<span id="2-sdk-をプロジェクトに追加" class="fragment"></span><a href="#2-sdk-%E3%82%92%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AB%E8%BF%BD%E5%8A%A0"><i class="fa fa-link"></i></a>2. SDK をプロジェクトに追加</h2>

<ul>
<li><p>GoogleMaps SDK for iOS をダウンロード<br>
<a href="https://developers.google.com/maps/documentation/ios/start#getting_the_google_maps_sdk_for_ios" rel="nofollow noopener" target="_blank">Getting the Google Maps SDK for iOS</a></p></li>
<li><p>GoogleMaps.framework をプロジェクトに追加する</p></li>
<li><p>Build Phasesタブの、Copy Bundle Resourcesに、GoogleMaps.framework フォルダ配下にある GoogleMaps.bundle を追加する</p></li>
</ul>

<h2>
<span id="3-必要なフレームワークをプロジェクトに追加" class="fragment"></span><a href="#3-%E5%BF%85%E8%A6%81%E3%81%AA%E3%83%95%E3%83%AC%E3%83%BC%E3%83%A0%E3%83%AF%E3%83%BC%E3%82%AF%E3%82%92%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AB%E8%BF%BD%E5%8A%A0"><i class="fa fa-link"></i></a>3. 必要なフレームワークをプロジェクトに追加</h2>

<ul>
<li>AVFoundation.framework</li>
<li>CoreData.framework</li>
<li>CoreLocation.framework</li>
<li>CoreText.framework</li>
<li>GLKit.framework</li>
<li>ImageIO.framework</li>
<li>libicucore.dylib</li>
<li>libstdc++.dylib</li>
<li>libz.dylib</li>
<li>OpenGLES.framework</li>
<li>QuartzCore.framework</li>
<li>SystemConfiguration.framework</li>
</ul>

<h2>
<span id="4-ビルド設定" class="fragment"></span><a href="#4-%E3%83%93%E3%83%AB%E3%83%89%E8%A8%AD%E5%AE%9A"><i class="fa fa-link"></i></a>4. ビルド設定</h2>

<ul>
<li>Architectures を <code>armv7</code> にする（もしくは Valid Architectures から <code>armv7s</code> を外す）</li>
<li>Other Linker Flags に <code>-ObjC</code> を追加</li>
</ul>

<h2>
<span id="5-infoplistの編集" class="fragment"></span><a href="#5-infoplist%E3%81%AE%E7%B7%A8%E9%9B%86"><i class="fa fa-link"></i></a>5. Info.plistの編集</h2>

<p>Bundle identifier欄に、手順1でAPI Key取得時に入力したBundle identifierを入力する。</p>

<h2>
<span id="6-appdelegate-で初期化" class="fragment"></span><a href="#6-appdelegate-%E3%81%A7%E5%88%9D%E6%9C%9F%E5%8C%96"><i class="fa fa-link"></i></a>6. AppDelegate で初期化</h2>

<ul>
<li>ヘッダをインポート</li>
</ul>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>#import &lt;GoogleMaps/GoogleMaps.h&gt;
</pre></div></div>

<ul>
<li>
<code>application:didFinishLaunchingWithOptions:</code> で、<code>provideAPIKey:</code>メソッドをコール（引数には手順1で取得したAPI Keyを渡す）</li>
</ul>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>[GMSServices provideAPIKey:@"YOUR_API_KEY"];
</pre></div></div>

<h2>
<span id="7-地図を表示する-viewcontroller-の実装" class="fragment"></span><a href="#7-%E5%9C%B0%E5%9B%B3%E3%82%92%E8%A1%A8%E7%A4%BA%E3%81%99%E3%82%8B-viewcontroller-%E3%81%AE%E5%AE%9F%E8%A3%85"><i class="fa fa-link"></i></a>7. 地図を表示する ViewController の実装</h2>

<ul>
<li>ヘッダをインポート</li>
</ul>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>#import &lt;GoogleMaps/GoogleMaps.h&gt;
</pre></div></div>

<ul>
<li>プロパティ追加</li>
</ul>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>@property (nonatomic, weak) GMSMapView *mapView;
</pre></div></div>

<ul>
<li>GMSMapViewの初期化と諸々の設定</li>
</ul>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>- (void)loadView {

    GMSCameraPosition *camera = [GMSCameraPosition cameraWithLatitude:-33.8683
                                                            longitude:151.2086
                                                                 zoom:6];
    self.mapView = [GMSMapView mapWithFrame:CGRectZero camera:camera];
    self.mapView.myLocationEnabled = YES;
    self.view = self.mapView;

    GMSMarkerOptions *options = [[GMSMarkerOptions alloc] init];
    options.position = CLLocationCoordinate2DMake(-33.8683, 151.2086);
    options.title = @"Sydney";
    options.snippet = @"Australia";

    [self.mapView addMarkerWithOptions:options];
}
</pre></div></div>

<ul>
<li>地図の描画を開始する</li>
</ul>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>- (void)viewWillAppear:(BOOL)animated {

    [super viewWillAppear:animated];

    [self.mapView startRendering];
}
</pre></div></div>

<ul>
<li>地図の描画を停止する</li>
</ul>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>- (void)viewWillDisappear:(BOOL)animated {

    [self.mapView stopRendering];

    [super viewWillDisappear:animated];
}
</pre></div></div>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>shu223さんの<br />11位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>167</kbd>
		<a target="_blank" href="https://qiita.com/shu223/items/851c3cfa8ca076a5ece3">シャッター音の鳴らないカメラアプリを実装する</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-01-08 17:08:25</center>
	</td>
	<td style="width:200px;">
		@shu223<br />(Freelancer 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/3180/profile-images/1473682733">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Objective-C]</b> <b>[iPhone]</b> <b>[iOS]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>「カメラ機能をアプリにつけたいけどシャッター音を鳴らしたくない」とか、「カメラ起動時のアニメーションが嫌だ」とか、カメラ機能をもっと自由にカスタマイズしたい場合は、 UIImagePickerController を使うのではなく AVFoundation フレームワークを使う必要があります。</p>

<p>静止画撮影はデフォルトの挙動としてシャッター音がなってしまうようになっていてそこは変えられないので、<strong>動画モードで撮影を開始し、必要なフレームを静止画として取り込む</strong>ことで「シャッター音の鳴らないカメラ」を実現します。</p>

<p>以下、プレビュー表示と「シャッター音の鳴らない」撮影ボタンだけからなる、シンプルな無音カメラアプリの実装手順を説明します。</p>

<h2>
<span id="準備" class="fragment"></span><a href="#%E6%BA%96%E5%82%99"><i class="fa fa-link"></i></a>準備</h2>

<p>以下のフレームワークをプロジェクトに追加します。<br>
- AVFoundation.framework<br>
- AssetsLibrary.framework<br>
- CoreMedia.framework<br>
- CoreVideo.framework</p>

<h2>
<span id="ヘッダでの宣言" class="fragment"></span><a href="#%E3%83%98%E3%83%83%E3%83%80%E3%81%A7%E3%81%AE%E5%AE%A3%E8%A8%80"><i class="fa fa-link"></i></a>ヘッダでの宣言</h2>

<p>撮影を制御するのに使用するフラグと、ビットマップ保存領域用のポインタを定義します。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>BOOL isRequireTakePhoto;
BOOL isProcessingTakePhoto;
void *bitmap;
</pre></div></div>

<p>また、撮影画像を保持する UIImage 型のプロパティをイメージバッファを定義します。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>@property (nonatomic, retain) UIImage *imageBuffer;
</pre></div></div>

<p>AVCaptureVideoDataOutputSampleBufferDelegate プロトコルへの準拠を宣言します。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>&lt;AVCaptureVideoDataOutputSampleBufferDelegate&gt;
</pre></div></div>

<h2>
<span id="カメラ初期化処理の実装" class="fragment"></span><a href="#%E3%82%AB%E3%83%A1%E3%83%A9%E5%88%9D%E6%9C%9F%E5%8C%96%E5%87%A6%E7%90%86%E3%81%AE%E5%AE%9F%E8%A3%85"><i class="fa fa-link"></i></a>カメラ初期化処理の実装</h2>

<p>まず、撮影画像を保持するためのバッファを確保します。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>// バッファ作成
size_t width = 640;
size_t height = 480;
bitmap = malloc(width * height * 4);

CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
CGDataProviderRef dataProviderRef = CGDataProviderCreateWithData(NULL, bitmap, width * height * 4, NULL);
CGImageRef cgImage = CGImageCreate(width, height, 8, 32, width * 4, colorSpace, kCGBitmapByteOrder32Little | kCGImageAlphaPremultipliedFirst, dataProviderRef, NULL, 0, kCGRenderingIntentDefault);
self.imageBuffer = [UIImage imageWithCGImage:cgImage];
CGColorSpaceRelease(colorSpace);
CGDataProviderRelease(dataProviderRef);
</pre></div></div>

<p>次に、カメラデバイスと入力、セッションを初期化します。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>// カメラデバイスの初期化
AVCaptureDevice *captureDevice = [AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeVideo];

// 入力の初期化
NSError *error = nil;
AVCaptureInput *captureInput = [AVCaptureDeviceInput deviceInputWithDevice:captureDevice
                                                                     error:&amp;error];

// セッション初期化
AVCaptureSession *captureSession = [[AVCaptureSession alloc] init];
[captureSession addInput:captureInput];
[captureSession beginConfiguration];
captureSession.sessionPreset = AVCaptureSessionPreset640x480;
[captureSession commitConfiguration];
</pre></div></div>

<p>出力を初期化します。今回は動画の撮影なので、AVCaptureVideoDataOutput を使います。（静止画の撮影では出力先として AVCaptureStillImageOutput を使います）</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>AVCaptureVideoDataOutput *videoOutput = [[AVCaptureVideoDataOutput alloc] init];
[captureSession addOutput:videoOutput];
</pre></div></div>

<p>デリゲートを下記のように指定します。こうすることで、AVCaptureVideoDataOutputSampleBufferDelegate プロトコルの captureOutput:didOutputSampleBuffer:fromConnection: が毎フレーム呼ばれるようになります。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>dispatch_queue_t queue = dispatch_queue_create("com.overout223.myQueue", NULL);
[videoOutput setSampleBufferDelegate:self
                               queue:queue];
dispatch_release(queue);
</pre></div></div>

<h2>
<span id="シャッターボタンのアクションを実装" class="fragment"></span><a href="#%E3%82%B7%E3%83%A3%E3%83%83%E3%82%BF%E3%83%BC%E3%83%9C%E3%82%BF%E3%83%B3%E3%81%AE%E3%82%A2%E3%82%AF%E3%82%B7%E3%83%A7%E3%83%B3%E3%82%92%E5%AE%9F%E8%A3%85"><i class="fa fa-link"></i></a>シャッターボタンのアクションを実装</h2>

<p>ここでは「写真撮る」というフラグを立てるだけです。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>- (IBAction)pressShutter {        
    if (!isProcessingTakePhoto) {
        isRequireTakePhoto = YES;
    }
}
</pre></div></div>

<h2>
<span id="動画のフレーム取得時の処理を実装" class="fragment"></span><a href="#%E5%8B%95%E7%94%BB%E3%81%AE%E3%83%95%E3%83%AC%E3%83%BC%E3%83%A0%E5%8F%96%E5%BE%97%E6%99%82%E3%81%AE%E5%87%A6%E7%90%86%E3%82%92%E5%AE%9F%E8%A3%85"><i class="fa fa-link"></i></a>動画のフレーム取得時の処理を実装</h2>

<p>カメラが動画のフレームを取得する度に（つまり撮影時の毎フレーム）、AVCaptureVideoDataOutputSampleBufferDelegateプロトコルのcaptureOutput:didOutputSampleBuffer:fromConnection:メソッドが呼ばれるので、そこで必要に応じて画像の保存処理を行います。</p>

<p>ユーザーがシャッターボタンを押すと isRequireTakePhoto フラグが YES になっているので、そのときだけカメラロールへの保存処理を行うようにします。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>- (void)captureOutput:(AVCaptureOutput *)captureOutput
didOutputSampleBuffer:(CMSampleBufferRef)sampleBuffer
       fromConnection:(AVCaptureConnection *)connection {

    if (isRequireTakePhoto) {

        isRequireTakePhoto = NO;
        isProcessingTakePhoto = YES;

        CVPixelBufferRef pixbuff = CMSampleBufferGetImageBuffer(sampleBuffer);

        if(CVPixelBufferLockBaseAddress(pixbuff, 0) == kCVReturnSuccess){

            memcpy(bitmap, CVPixelBufferGetBaseAddress(pixbuff), 640 * 480 * 4);

            CMAttachmentMode attachmentMode;

            // メタデータ取得＆orientation情報追記
            CFDictionaryRef metadataRef = CMGetAttachment(sampleBuffer, CFSTR("MetadataDictionary"), &amp;attachmentMode);
            NSMutableDictionary *metadata = [NSMutableDictionary dictionaryWithDictionary:(NSDictionary *)CFBridgingRelease(metadataRef)];                

            // ここではorientaionは一定（6）とする
            [metadata setObject:[NSNumber numberWithInt:6]
                         forKey:(NSString *)kCGImagePropertyOrientation];

            // フォトアルバムに保存
            ALAssetsLibrary* library = [[ALAssetsLibrary alloc] init];

            [library writeImageToSavedPhotosAlbum:self.imageBuffer.CGImage
                                         metadata:metadata
                                  completionBlock:^(NSURL *assetURL, NSError *error) {

                                      NSLog(@"URL:%@", assetURL);
                                      NSLog(@"error:%@", error);
                                      isProcessingTakePhoto = NO;
                                  }];

            CVPixelBufferUnlockBaseAddress(pixbuff, 0);
        }
    }
}
</pre></div></div>

<h2>
<span id="サンプルコード" class="fragment"></span><a href="#%E3%82%B5%E3%83%B3%E3%83%97%E3%83%AB%E3%82%B3%E3%83%BC%E3%83%89"><i class="fa fa-link"></i></a>サンプルコード</h2>

<p>今回のサンプルコードは、gumroad よりダウンロードしていただけます。</p>

<p><a href="http://gum.co/pzBMA" class="autolink" rel="nofollow noopener" target="_blank">http://gum.co/pzBMA</a></p>

<p>（すいません、無料ではなく、85円です）</p>

<ul>
<li>iOS 6.0 で動作確認しております。<br>
</li>
<li>コードのみの販売です。サポート等はご容赦ください。</li>
</ul>

<h2>
<span id="参考書籍" class="fragment"></span><a href="#%E5%8F%82%E8%80%83%E6%9B%B8%E7%B1%8D"><i class="fa fa-link"></i></a>参考書籍</h2>

<p>上記サンプルは、次の書籍を参考に実装しました。</p>

<p><a href="http://www.amazon.co.jp/exec/obidos/ASIN/4844329766/22301-22/ref=nosim/" rel="nofollow noopener" target="_blank">iOS4プログラミングブック</a></p>

<p>こちらの第３章『マルチメディア』の章とサンプルコードが非常に参考になります。</p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>shu223さんの<br />12位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>157</kbd>
		<a target="_blank" href="https://qiita.com/shu223/items/c2eb639976154a491d19">テキストを装飾する／NSAttributedStringの属性一覧</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-03-21 14:31:00</center>
	</td>
	<td style="width:200px;">
		@shu223<br />(Freelancer 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/3180/profile-images/1473682733">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Objective-C]</b> <b>[iOS]</b> <b>[UIKit]</b> <b>[Swift]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>iOS 6 から、UILabel, UITextView, UITextFieldに、<code>attributedText</code> というNSAttributedString型のプロパティが追加されました。NSAttributedStringは文字列の属性を管理するクラスで、これを使用するとフォントや文字色、背景色、カーニング等の<strong>属性をテキスト内の指定範囲に対して適用</strong>することができるようになります。</p>

<p><a href="https://camo.qiitausercontent.com/006b69592509db5ed5e7b2c6a5e130426e9f280a/687474703a2f2f662e636c2e6c792f6974656d732f32703368307233393176334332493171326530622f73616d706c65312e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/006b69592509db5ed5e7b2c6a5e130426e9f280a/687474703a2f2f662e636c2e6c792f6974656d732f32703368307233393176334332493171326530622f73616d706c65312e706e67" alt="サンプル" data-canonical-src="http://f.cl.ly/items/2p3h0r391v3C2I1q2e0b/sample1.png"></a></p>

<h2>
<span id="基本的な実装手順" class="fragment"></span><a href="#%E5%9F%BA%E6%9C%AC%E7%9A%84%E3%81%AA%E5%AE%9F%E8%A3%85%E6%89%8B%E9%A0%86"><i class="fa fa-link"></i></a>基本的な実装手順</h2>

<p>基本的な手順は次の通りです。</p>

<h3>
<span id="1-nsmutableattributedstringオブジェクトを生成" class="fragment"></span><a href="#1-nsmutableattributedstring%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%82%92%E7%94%9F%E6%88%90"><i class="fa fa-link"></i></a>1. NSMutableAttributedStringオブジェクトを生成</h3>

<p><code>initWithString:</code>メソッドでオブジェクトを生成します。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>NSString *str = @"NSAttributedString Sample";
NSMutableAttributedString *attrStr;
attrStr = [[NSMutableAttributedString alloc] initWithString:str];
</pre></div></div>

<p>引数には対象となる文字列を渡します。</p>

<h3>
<span id="2-属性をセット" class="fragment"></span><a href="#2-%E5%B1%9E%E6%80%A7%E3%82%92%E3%82%BB%E3%83%83%E3%83%88"><i class="fa fa-link"></i></a>2. 属性をセット</h3>

<p><code>addAttribute:value:range:</code>メソッドを用いて属性、値、適用範囲をセットします。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>// フォント
[attrStr addAttribute:NSFontAttributeName
                value:[UIFont fontWithName:@"Futura-CondensedMedium" size:17.]
                range:NSMakeRange(0, [attrStr length])];

// 背景色
[attrStr addAttribute:NSBackgroundColorAttributeName
                value:[UIColor colorWithRed:1. green:1. blue:.0 alpha:1.]
                range:NSMakeRange(0, [attrStr length])];

// 打ち消し線
[attrStr addAttribute:NSStrikethroughStyleAttributeName
                value:[NSNumber numberWithInt:3]
                range:[str rangeOfString:@"Sample"]];
</pre></div></div>

<h3>
<span id="3-uilabelにセット" class="fragment"></span><a href="#3-uilabel%E3%81%AB%E3%82%BB%E3%83%83%E3%83%88"><i class="fa fa-link"></i></a>3. UILabelにセット</h3>

<p>UILabelの<code>attributedText</code>プロパティに、作成したNSMutableAttributedStringオブジェクトをセットします。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>[self.label setAttributedText:attrStr];
</pre></div></div>

<p>なお、サンプルではUILabelを用いていますが、UITextViewもUITextFieldもiOS6以上では同様の方法（attributedTextプロパティを使う）でテキストに装飾することができます。</p>

<p><a href="https://camo.qiitausercontent.com/df5a945076675c44881dc897b7abf51537a28e17/687474703a2f2f662e636c2e6c792f6974656d732f304c323131453168304c306c3175334c324e34332f73616d706c65322e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/df5a945076675c44881dc897b7abf51537a28e17/687474703a2f2f662e636c2e6c792f6974656d732f304c323131453168304c306c3175334c324e34332f73616d706c65322e706e67" alt="サンプル" data-canonical-src="http://f.cl.ly/items/0L211E1h0L0l1u3L2N43/sample2.png"></a></p>

<h2>
<span id="属性と値について" class="fragment"></span><a href="#%E5%B1%9E%E6%80%A7%E3%81%A8%E5%80%A4%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6"><i class="fa fa-link"></i></a>属性と値について</h2>

<p>上で載せたサンプルで<code>addAttribute:value:range:</code>メソッドに渡している属性は、それぞれ次のような効果があります。</p>

<ul>
<li>
<code>NSFontAttributeName</code>：フォントを指定する</li>
<li>
<code>NSBackgroundColorAttributeName</code>：背景色を指定する</li>
<li>
<code>NSStrikethroughStyleAttributeName</code>：打ち消し線を指定する</li>
</ul>

<p>そして、<strong>属性毎に引数valueに指定できる値の型は違ってきます。</strong>たとえば、属性<code>NSFontAttributeName</code>に対して値はUIFontオブジェクトを渡しますが、属性<code>NSBackgroundColorAttributeName</code>に対しては値としてUIColorオブジェクトを渡します。</p>

<p>属性毎に指定できる値の詳細は、</p>

<p><a href="http://developer.apple.com/library/ios/#documentation/uikit/reference/NSAttributedString_UIKit_Additions/Reference/Reference.html" rel="nofollow noopener" target="_blank">NSAttributedString UIKit Additions Reference</a></p>

<p>で確認することができます。</p>

<h2>
<span id="影と文字色" class="fragment"></span><a href="#%E5%BD%B1%E3%81%A8%E6%96%87%E5%AD%97%E8%89%B2"><i class="fa fa-link"></i></a>影と文字色</h2>

<p>文字色を指定する場合は<code>NSForegroundColorAttributeName</code>を使用します。値は<code>NSBackgroundColorAttributeName</code>と同様にUIColorオブジェクトを渡します。</p>

<p>また影をつける場合は<code>NSShadowAttributeName</code>を使用します。値にはNSShadowオブジェクトを渡します。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>// NSShadowオブジェクト
NSShadow *shadow = [[NSShadow alloc] init];
[shadow setShadowColor:[UIColor colorWithRed:0. green:0. blue:0. alpha:1.]];
[shadow setShadowBlurRadius:4.0];
[shadow setShadowOffset:CGSizeMake(2, 2)];

// 影
[attrStr addAttribute:NSShadowAttributeName
                value:shadow
                range:NSMakeRange(0, [attrStr length])];

// 文字色
[attrStr addAttribute:NSForegroundColorAttributeName
                value:[UIColor colorWithRed:1. green:1. blue:0. alpha:1.]
                range:NSMakeRange(0, [attrStr length])];
</pre></div></div>

<p><a href="https://camo.qiitausercontent.com/44e555eb386f2da733c73b46a9f08edf66265923/687474703a2f2f662e636c2e6c792f6974656d732f33513035307232783068323332423357314332352f73616d706c65332e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/44e555eb386f2da733c73b46a9f08edf66265923/687474703a2f2f662e636c2e6c792f6974656d732f33513035307232783068323332423357314332352f73616d706c65332e706e67" alt="サンプル" data-canonical-src="http://f.cl.ly/items/3Q050r2x0h232B3W1C25/sample3.png"></a></p>

<h2>
<span id="中抜き文字下線カーニング" class="fragment"></span><a href="#%E4%B8%AD%E6%8A%9C%E3%81%8D%E6%96%87%E5%AD%97%E4%B8%8B%E7%B7%9A%E3%82%AB%E3%83%BC%E3%83%8B%E3%83%B3%E3%82%B0"><i class="fa fa-link"></i></a>中抜き文字、下線、カーニング</h2>

<p><code>NSStrokeWidthAttributeName</code>を使用すると、中抜き文字にすることができます。値には線幅を指定します。中抜き文字の枠線の色を指定する場合は、<code>NSStrokeColorAttributeName</code>を使用します。</p>

<p>下線を引く場合は、<code>NSUnderlineStyleAttributeName</code>を使用します。値には整数のNSNumberオブジェクトを指定します。（ここでは定数<code>NSUnderlineStyleSingle</code>を使用しています。）</p>

<p>カーニングは<code>NSKernAttributeName</code>を使用します。値には浮動小数点数のNSNumberオブジェクトを指定します。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>// 中抜き文字の線幅
[attrStr addAttribute:NSStrokeWidthAttributeName
                value:@5
                range:NSMakeRange(0, [attrStr length])];

// 中抜き文字の枠線の色、下線、カーニングを一度に指定
NSDictionary *attributes = @{NSStrokeColorAttributeName: [UIColor magentaColor],
                             NSUnderlineStyleAttributeName: @(NSUnderlineStyleSingle),
                             NSKernAttributeName: @1.5};

[attrStr addAttributes:attributes
                 range:[str rangeOfString:@"Sample"]];
</pre></div></div>

<p>また上記では<code>addAttributes:range:</code>メソッドを使用して<strong>複数の属性と値を一度に指定</strong>しています。同じ範囲に対して適用する場合等に便利です。</p>

<p><a href="https://camo.qiitausercontent.com/8aedbe9121467e6dd534635725c20fa867f9212e/687474703a2f2f662e636c2e6c792f6974656d732f31533379306f32753242334132733034306d33592f73616d706c65342e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/8aedbe9121467e6dd534635725c20fa867f9212e/687474703a2f2f662e636c2e6c792f6974656d732f31533379306f32753242334132733034306d33592f73616d706c65342e706e67" alt="サンプル" data-canonical-src="http://f.cl.ly/items/1S3y0o2u2B3A2s040m3Y/sample4.png"></a></p>

<h2>
<span id="パラグラフスタイル" class="fragment"></span><a href="#%E3%83%91%E3%83%A9%E3%82%B0%E3%83%A9%E3%83%95%E3%82%B9%E3%82%BF%E3%82%A4%E3%83%AB"><i class="fa fa-link"></i></a>パラグラフスタイル</h2>

<p><code>NSParagraphStyleAttributeName</code>を使用すると、パラグラフスタイル（NSParagraphStyleオブジェクト）を指定することができます。NSParagraphStyleはアライメントやハイフネーションを指定するためのプロパティを持っています。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>// NSMutableParagraphStyleオブジェクト
NSMutableParagraphStyle *paragraph = [[NSMutableParagraphStyle alloc] init];

// アラインメント
paragraph.alignment = NSTextAlignmentRight;

// ハイフネーション
paragraph.hyphenationFactor = 0.9;

// パラグラフスタイル
[attrStr addAttribute:NSParagraphStyleAttributeName
                value:paragraph
                range:NSMakeRange(0, [attrStr length])];
</pre></div></div>

<p><code>hyphenationFactor</code>には0.0〜1.0の値を指定することができ、0.0でハイフネーション（行末で切れる単語をハイフンで繋ぐ）なし、1.0で常にハイフネーションを試みる設定となります。</p>

<p><a href="https://camo.qiitausercontent.com/7cd4ad45dd06b40d169fdc86ffc9d9b54348e50b/687474703a2f2f662e636c2e6c792f6974656d732f3268304d33723136324d307230623370324e316a2f73616d706c65352e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/7cd4ad45dd06b40d169fdc86ffc9d9b54348e50b/687474703a2f2f662e636c2e6c792f6974656d732f3268304d33723136324d307230623370324e316a2f73616d706c65352e706e67" alt="サンプル" data-canonical-src="http://f.cl.ly/items/2h0M3r162M0r0b3p2N1j/sample5.png"></a></p>

<h2>
<span id="テキストエフェクトios-7-or-later" class="fragment"></span><a href="#%E3%83%86%E3%82%AD%E3%82%B9%E3%83%88%E3%82%A8%E3%83%95%E3%82%A7%E3%82%AF%E3%83%88ios-7-or-later"><i class="fa fa-link"></i></a>テキストエフェクト（iOS 7 or later）</h2>

<p><code>NSTextEffectAttributeName</code> でテキストエフェクトを指定することができます。指定できる値としては今のところ <code>NSTextEffectLetterpressStyle</code> （実体は文字列）しかありません。</p>

<div class="code-frame" data-lang="swift">
<div class="code-lang"><span class="bold">swift</span></div>
<div class="highlight"><pre><span></span><span class="kd">let</span> <span class="nv">attributedStr</span> <span class="p">=</span> <span class="bp">NSMutableAttributedString</span><span class="p">(</span>
    <span class="n">string</span><span class="p">:</span> <span class="n">string</span><span class="p">,</span>
    <span class="n">attributes</span><span class="p">:</span> <span class="p">[</span><span class="n">NSTextEffectAttributeName</span><span class="p">:</span> <span class="n">NSTextEffectLetterpressStyle</span><span class="p">])</span>
</pre></div>
</div>

<p>こんな感じの効果が得られます。</p>

<p><a href="https://camo.qiitausercontent.com/18e2c771525a4f6b6ed0c450c0569d4a8b37e247/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f333138302f61326432326338622d653232632d656137632d303766392d3832343365353032386137392e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/18e2c771525a4f6b6ed0c450c0569d4a8b37e247/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f333138302f61326432326338622d653232632d656137632d303766392d3832343365353032386137392e706e67" alt="" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/3180/a2d22c8b-e22c-ea7c-07f9-8243e5028a79.png"></a></p>

<blockquote>
<p>A graphical text effect giving glyphs the appearance of letterpress printing, in which type is pressed into the paper.</p>
</blockquote>

<h2>
<span id="リンクios-7-or-later" class="fragment"></span><a href="#%E3%83%AA%E3%83%B3%E3%82%AFios-7-or-later"><i class="fa fa-link"></i></a>リンク（iOS 7 or later）</h2>

<p><code>NSLinkAttributeName</code> で文字列にリンクを貼れます。値は NSURL 型を推奨、NSString でもOK。</p>

<div class="code-frame" data-lang="swift">
<div class="code-lang"><span class="bold">swift</span></div>
<div class="highlight"><pre><span></span><span class="kd">let</span> <span class="nv">attributedStr</span> <span class="p">=</span> <span class="bp">NSMutableAttributedString</span><span class="p">(</span>
    <span class="n">string</span><span class="p">:</span> <span class="n">string</span><span class="p">,</span>
    <span class="n">attributes</span><span class="p">:</span> <span class="p">[</span><span class="n">NSLinkAttributeName</span><span class="p">:</span> <span class="bp">NSURL</span><span class="p">(</span><span class="n">string</span><span class="p">:</span> <span class="s">"https://github.com/shu223"</span><span class="p">)</span><span class="o">!</span><span class="p">])</span>
</pre></div>
</div>

<p><a href="https://camo.qiitausercontent.com/50dab29354e7fb305476aa9d60d38ea7967764b9/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f333138302f35383266393362332d613437332d303762332d373738362d6232386332633334326161642e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/50dab29354e7fb305476aa9d60d38ea7967764b9/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f333138302f35383266393362332d613437332d303762332d373738362d6232386332633334326161642e706e67" alt="" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/3180/582f93b3-a473-07b3-7786-b28c2c342aad.png"></a></p>

<h2>
<span id="カスタム絵文字ios-7-or-later" class="fragment"></span><a href="#%E3%82%AB%E3%82%B9%E3%82%BF%E3%83%A0%E7%B5%B5%E6%96%87%E5%AD%97ios-7-or-later"><i class="fa fa-link"></i></a>カスタム絵文字（iOS 7 or later）</h2>

<p><code>NSAttachmentAttributeName</code> を使用すると、文中に画像を挿入できます。つまり、<strong>カスタム絵文字</strong>的な使い方ができます。（Attachmentという名前なので、本当はもっと広い意味での用途を想定した機能だと思います）</p>

<div class="code-frame" data-lang="swift">
<div class="code-lang"><span class="bold">swift</span></div>
<div class="highlight"><pre><span></span><span class="kd">let</span> <span class="nv">attachment</span> <span class="p">=</span> <span class="bp">NSTextAttachment</span><span class="p">()</span>
<span class="n">attachment</span><span class="p">.</span><span class="n">image</span> <span class="p">=</span> <span class="bp">UIImage</span><span class="p">(</span><span class="n">named</span><span class="p">:</span> <span class="n">filename</span><span class="p">)</span><span class="o">!</span>
<span class="n">attachment</span><span class="p">.</span><span class="n">bounds</span> <span class="p">=</span> <span class="n">CGRectMake</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">21</span><span class="p">)</span>

<span class="kd">let</span> <span class="nv">attrStr</span> <span class="p">=</span> <span class="bp">NSAttributedString</span><span class="p">(</span><span class="n">attachment</span><span class="p">:</span> <span class="n">attachment</span><span class="p">)</span>
<span class="n">attributedStr</span><span class="p">.</span><span class="n">insertAttributedString</span><span class="p">(</span><span class="n">attrStr</span><span class="p">,</span> <span class="n">atIndex</span><span class="p">:</span> <span class="n">attributedStr</span><span class="p">.</span><span class="n">length</span><span class="p">)</span>
</pre></div>
</div>

<p><a href="https://camo.qiitausercontent.com/d4a35ab62c7af727eea9f0a3af607cdf51b77173/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f333138302f65393966643664362d373233332d356466662d366437372d3337356265626532393564342e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/d4a35ab62c7af727eea9f0a3af607cdf51b77173/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f333138302f65393966643664362d373233332d356466662d366437372d3337356265626532393564342e706e67" alt="" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/3180/e99fd6d6-7233-5dff-6d77-375bebe295d4.png"></a></p>

<p>実装方法は下記記事を参考にさせていただきました。</p>

<ul>
<li><a href="http://qiita.com/nagisawks/items/ff8232e92a2e9525ab0b" id="reference-fd7d0a57cfb1b44126d3">UILabelに画像を表示する</a></li>
</ul>

<h2>
<span id="nsattributedstringを使用可能なuikitのクラス" class="fragment"></span><a href="#nsattributedstring%E3%82%92%E4%BD%BF%E7%94%A8%E5%8F%AF%E8%83%BD%E3%81%AAuikit%E3%81%AE%E3%82%AF%E3%83%A9%E3%82%B9"><i class="fa fa-link"></i></a>NSAttributedStringを使用可能なUIKitのクラス</h2>

<p>UILabel, UITextView, UITextFieldの、<code>attributedText</code> プロパティ以外にも、NSAttributedStringをセットできるプロパティ／メソッドがいくつかのUIKitのクラスに追加されています。</p>

<p>※いずれも要iOS6以上</p>

<p><strong>UIButton</strong></p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>- (void)setAttributedTitle:(NSAttributedString *)title forState:(UIControlState)state
</pre></div></div>

<p><strong>UIPickerView</strong></p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>- (NSAttributedString *)pickerView:(UIPickerView *)pickerView
             attributedTitleForRow:(NSInteger)row
                      forComponent:(NSInteger)component
</pre></div></div>

<p><strong>UIRefreshControl</strong></p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>@property (nonatomic, retain) NSAttributedString *attributedTitle
</pre></div></div>

<p><strong>UITextField</strong></p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>@property(nonatomic,copy) NSAttributedString *attributedPlaceholder
</pre></div></div>

<h2>
<span id="20151222追記属性一覧" class="fragment"></span><a href="#20151222%E8%BF%BD%E8%A8%98%E5%B1%9E%E6%80%A7%E4%B8%80%E8%A6%A7"><i class="fa fa-link"></i></a>（2015.12.22追記）属性一覧</h2>

<p>現行バージョン（iOS 9.2）で利用可能な属性を NSAttributedString.h から抜き出して、iOSバージョンごとに分類しました。</p>

<p>また、<strong>本記事で解説したものを太字に</strong>しています。</p>

<h3>
<span id="ios-6-以上で利用可能" class="fragment"></span><a href="#ios-6-%E4%BB%A5%E4%B8%8A%E3%81%A7%E5%88%A9%E7%94%A8%E5%8F%AF%E8%83%BD"><i class="fa fa-link"></i></a>iOS 6 以上で利用可能</h3>

<ul>
<li>
<strong>NSFontAttributeName</strong>

<ul>
<li>UIFont, default Helvetica(Neue) 12</li>
</ul>
</li>
<li>
<strong>NSParagraphStyleAttributeName</strong>

<ul>
<li>NSParagraphStyle, default defaultParagraphStyle</li>
</ul>
</li>
<li>
<strong>NSForegroundColorAttributeName</strong>

<ul>
<li>UIColor, default blackColor</li>
</ul>
</li>
<li>
<strong>NSBackgroundColorAttributeName</strong>

<ul>
<li>UIColor, default nil: no background</li>
</ul>
</li>
<li>NSLigatureAttributeName

<ul>
<li>NSNumber containing integer, default 1: default ligatures, 0: no ligatures</li>
</ul>
</li>
<li>
<strong>NSKernAttributeName</strong>

<ul>
<li>NSNumber containing floating point value, in points; amount to modify default kerning. 0 means kerning is disabled.</li>
</ul>
</li>
<li>
<strong>NSStrikethroughStyleAttributeName</strong>

<ul>
<li>NSNumber containing integer, default 0: no strikethrough</li>
</ul>
</li>
<li>
<strong>NSUnderlineStyleAttributeName</strong>

<ul>
<li>NSNumber containing integer, default 0: no underline</li>
</ul>
</li>
<li>
<strong>NSStrokeColorAttributeName</strong>

<ul>
<li>UIColor, default nil: same as foreground color</li>
</ul>
</li>
<li>
<strong>NSStrokeWidthAttributeName</strong>

<ul>
<li>NSNumber containing floating point value, in percent of font point size, default 0: no stroke; positive for stroke alone, negative for stroke and fill (a typical value for outlined text would be 3.0)</li>
</ul>
</li>
<li>
<strong>NSShadowAttributeName</strong>

<ul>
<li>NSShadow, default nil: no shadow</li>
</ul>
</li>
<li>NSVerticalGlyphFormAttributeName

<ul>
<li>An NSNumber containing an integer value.  0 means horizontal text.  1 indicates vertical text.  If not specified, it could follow higher-level vertical orientation settings.  Currently on iOS, it's always horizontal.  The behavior for any other value is undefined.</li>
</ul>
</li>
</ul>

<h3>
<span id="ios-7-以上で利用可能" class="fragment"></span><a href="#ios-7-%E4%BB%A5%E4%B8%8A%E3%81%A7%E5%88%A9%E7%94%A8%E5%8F%AF%E8%83%BD"><i class="fa fa-link"></i></a>iOS 7 以上で利用可能</h3>

<ul>
<li>
<strong>NSTextEffectAttributeName</strong>

<ul>
<li>NSString, default nil: no text effect</li>
</ul>
</li>
<li>
<strong>NSAttachmentAttributeName</strong>

<ul>
<li>NSTextAttachment, default nil</li>
</ul>
</li>
<li>
<strong>NSLinkAttributeName</strong>

<ul>
<li>NSURL (preferred) or NSString</li>
</ul>
</li>
<li>NSBaselineOffsetAttributeName

<ul>
<li>NSNumber containing floating point value, in points; offset from baseline, default 0</li>
</ul>
</li>
<li>NSUnderlineColorAttributeName

<ul>
<li>UIColor, default nil: same as foreground color</li>
</ul>
</li>
<li>NSStrikethroughColorAttributeName

<ul>
<li>UIColor, default nil: same as foreground color</li>
</ul>
</li>
<li>NSObliquenessAttributeName

<ul>
<li>NSNumber containing floating point value; skew to be applied to glyphs, default 0: no skew</li>
</ul>
</li>
<li>NSExpansionAttributeName

<ul>
<li>NSNumber containing floating point value; log of expansion factor to be applied to glyphs, default 0: no expansion</li>
</ul>
</li>
<li>NSWritingDirectionAttributeName

<ul>
<li> NSArray of NSNumbers representing the nested levels of writing direction overrides as defined by Unicode LRE, RLE, LRO, and RLO characters.  The control characters can be obtained by masking NSWritingDirection and NSTextWritingDirection values.  LRE: NSWritingDirectionLeftToRight|NSWritingDirectionEmbedding, RLE: NSWritingDirectionRightToLeft|NSWritingDirectionEmbedding, LRO: NSWritingDirectionLeftToRight|NSWritingDirectionOverride, RLO: NSWritingDirectionRightToLeft|NSWritingDirectionOverride,</li>
</ul>
</li>
</ul>

<p>iOS 8、9 では新規追加されなかったようです。</p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>shu223さんの<br />13位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>155</kbd>
		<a target="_blank" href="https://qiita.com/shu223/items/5d8a245e5743f77df9eb">Xcodeのファイルテンプレートを自作する</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-01-09 16:55:13</center>
	</td>
	<td style="width:200px;">
		@shu223<br />(Freelancer 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/3180/profile-images/1473682733">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Objective-C]</b> <b>[iPhone]</b> <b>[iOS]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>Xcodeでクラスファイルを新規作成した後、毎回同じようなコードを書いていて面倒だなと感じることがあります。たとえば、</p>

<ul>
<li>UIViewControllerを継承したクラスにカスタムセルのUITableViewを持たせる</li>
<li>NSObjectを継承したクラスをシングルトンにする</li>
</ul>

<p>といった実装はアプリ開発ではよくありますが、手順は大体毎回同じです。</p>

<p>こういった実装をファイルテンプレート化しておけば、クラスファイルの新規作成時にそのコードが生成されるので、何度も同じコードを書く手間が省けとても便利です。</p>

<p>以下に、NSObjectを継承したシングルトンクラスのファイルテンプレートを例にとり、作成手順を説明していきます。</p>

<h2>
<span id="1-デフォルトテンプレートをコピーしてくる" class="fragment"></span><a href="#1-%E3%83%87%E3%83%95%E3%82%A9%E3%83%AB%E3%83%88%E3%83%86%E3%83%B3%E3%83%97%E3%83%AC%E3%83%BC%E3%83%88%E3%82%92%E3%82%B3%E3%83%94%E3%83%BC%E3%81%97%E3%81%A6%E3%81%8F%E3%82%8B"><i class="fa fa-link"></i></a>1. デフォルトテンプレートをコピーしてくる</h2>

<p>デフォルトテンプレートはXcode.appのパッケージの中身をたどって行った先にあります。</p>

<p>/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/Library/Xcode/Templates/File Templates</p>

<p>この直下にある、Cocoa Touchフォルダをコピーして、</p>

<p>~/Library/Developer/Xcode/Templates/File Templates</p>

<p>にペーストします。（上記フォルダがなければ、作成してください）</p>

<p>上記フォルダが<strong>カスタムファイルテンプレートの置き場</strong>となります。</p>

<h2>
<span id="2-フォルダ名をリネームする" class="fragment"></span><a href="#2-%E3%83%95%E3%82%A9%E3%83%AB%E3%83%80%E5%90%8D%E3%82%92%E3%83%AA%E3%83%8D%E3%83%BC%E3%83%A0%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>2. フォルダ名をリネームする</h2>

<p>コピーしてきたCocoa Touchというフォルダ名を"My Cocoa Touch"といった名前にリネームします。</p>

<p>ここで、試しにXcodeから新規ファイル作成画面を開いてみてください。テンプレートの選択肢に、コピーしてきてリネームしたフォルダ名が入っていることが確認できます。</p>

<p>※以下、フォルダ名をMy Cocoa Touchにリネームしたものとして説明します。</p>

<h2>
<span id="3-templateinfoplistを編集する" class="fragment"></span><a href="#3-templateinfoplist%E3%82%92%E7%B7%A8%E9%9B%86%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>3. TemplateInfo.plistを編集する</h2>

<p>My Cocoa Touch/Objective-C class.xctemplateフォルダ配下に、"TemplateInfo.plist"というファイルがあります。</p>

<p>このファイルをXcodeやテキストエディタ等で開き、"Options"という要素に次の項目を<strong>追加</strong>します。</p>

<div class="code-frame" data-lang="xml">
<div class="code-lang"><span class="bold">TemplateInfo.plist</span></div>
<div class="highlight"><pre><span></span><span class="nt">&lt;dict&gt;</span>
    <span class="nt">&lt;key&gt;</span>Default<span class="nt">&lt;/key&gt;</span>
    <span class="nt">&lt;string&gt;</span>false<span class="nt">&lt;/string&gt;</span>
    <span class="nt">&lt;key&gt;</span>Identifier<span class="nt">&lt;/key&gt;</span>
    <span class="nt">&lt;string&gt;</span>Singleton<span class="nt">&lt;/string&gt;</span>
    <span class="nt">&lt;key&gt;</span>Name<span class="nt">&lt;/key&gt;</span>
    <span class="nt">&lt;string&gt;</span>Singleton<span class="nt">&lt;/string&gt;</span>
    <span class="nt">&lt;key&gt;</span>RequiredOptions<span class="nt">&lt;/key&gt;</span>
    <span class="nt">&lt;dict&gt;</span>
        <span class="nt">&lt;key&gt;</span>cocoaTouchSubclass<span class="nt">&lt;/key&gt;</span>
        <span class="nt">&lt;array&gt;</span>
            <span class="nt">&lt;string&gt;</span>NSObject<span class="nt">&lt;/string&gt;</span>
        <span class="nt">&lt;/array&gt;</span>
    <span class="nt">&lt;/dict&gt;</span>
    <span class="nt">&lt;key&gt;</span>Type<span class="nt">&lt;/key&gt;</span>
    <span class="nt">&lt;string&gt;</span>checkbox<span class="nt">&lt;/string&gt;</span>
<span class="nt">&lt;/dict&gt;</span>
</pre></div>
</div>

<p>Xcodeから新規ファイル作成 &gt; My Cocoa Touch &gt; Objective-Cを選択 &gt; Nextと進み、SubclassにNSObjectを選ぶとSingletonというチェックボックスが有効になることが確認できます。</p>

<h2>
<span id="4-テンプレート用クラスファイルを作成する" class="fragment"></span><a href="#4-%E3%83%86%E3%83%B3%E3%83%97%E3%83%AC%E3%83%BC%E3%83%88%E7%94%A8%E3%82%AF%E3%83%A9%E3%82%B9%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%82%92%E4%BD%9C%E6%88%90%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>4. テンプレート用クラスファイルを作成する</h2>

<p>TemplateInfo.plistと同階層にある"NSObject"というフォルダを複製して、"NSObjectSingleton"というフォルダ名にリネームします。</p>

<p>このフォルダ名は、手順2でTemplateInfo.plistに追記した項目のうち、Identifierと、RequiredOptionsに関係しています。</p>

<p>RequiredOptionsに指定してあるNSObjectをクラス生成時に親クラスとして指定し、Singletonのチェックボックスにチェックを入れると、{cocoaTouchSubclass名}+{チェックボックス項目のIdentifier}、すなわち"NSObjectSingleton"という名前がついたフォルダにあるテンプレートファイルを参照するようになります。</p>

<h2>
<span id="5-テンプレート用クラスファイルを編集する" class="fragment"></span><a href="#5-%E3%83%86%E3%83%B3%E3%83%97%E3%83%AC%E3%83%BC%E3%83%88%E7%94%A8%E3%82%AF%E3%83%A9%E3%82%B9%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%82%92%E7%B7%A8%E9%9B%86%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>5. テンプレート用クラスファイルを編集する</h2>

<p>次に、NSObjectSingletonフォルダ配下にある、"___FILEBASENAME___.h"と、"___FILEBASENAME___.m"を編集します。</p>

<div class="code-frame" data-lang="c">
<div class="code-lang"><span class="bold">___FILEBASENAME___.h</span></div>
<div class="highlight"><pre><span></span><span class="n">___IMPORTHEADER_cocoaTouchSubclass___</span>

<span class="err">@</span><span class="n">interface</span> <span class="nl">___FILEBASENAMEASIDENTIFIER___</span> <span class="p">:</span> <span class="n">___VARIABLE_cocoaTouchSubclass___</span>

<span class="o">+</span> <span class="p">(</span><span class="n">id</span><span class="p">)</span><span class="n">sharedInstance</span><span class="p">;</span>

<span class="err">@</span><span class="n">end</span>
</pre></div>
</div>

<div class="code-frame" data-lang="limbo">
<div class="code-lang"><span class="bold">___FILEBASENAME___.m</span></div>
<div class="highlight"><pre><span></span><span class="c1">#import "___FILEBASENAME___.h"</span>

<span class="err">@</span><span class="n">implementation</span> <span class="n">___FILEBASENAMEASIDENTIFIER___</span>

<span class="n">static</span> <span class="n">id</span> <span class="n">instance</span> <span class="o">=</span> <span class="kc">nil</span><span class="p">;</span>

<span class="o">+</span> <span class="p">(</span><span class="n">id</span><span class="p">)</span><span class="n">sharedInstance</span> <span class="p">{</span>
    <span class="err">@</span><span class="n">synchronized</span><span class="p">(</span><span class="kt">self</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">instance</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">instance</span> <span class="o">=</span> <span class="p">[[</span><span class="kt">self</span> <span class="n">alloc</span><span class="p">]</span> <span class="n">init</span><span class="p">];</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">instance</span><span class="p">;</span>
<span class="p">}</span>

<span class="err">@</span><span class="n">end</span>
</pre></div>
</div>

<p>以上でNSObjectSingletonテンプレートは完成です。</p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>shu223さんの<br />14位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>126</kbd>
		<a target="_blank" href="https://qiita.com/shu223/items/cd612613761720ccc059">ダウンロード可能な Audio Unit 関連のサンプルコード11個</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-02-21 06:31:10</center>
	</td>
	<td style="width:200px;">
		@shu223<br />(Freelancer 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/3180/profile-images/1473682733">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Objective-C]</b> <b>[iPhone]</b> <b>[iOS]</b> <b>[AudioUnit]</b> <b>[CoreAudio]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>Audio Unit は、iOS の Core Audio においてもっとも低レベル（ハードウェアより）に位置するフレームワークです。そのため低レイテンシを要求されるオーディオ処理機能を提供するアプリに向いています。</p>

<p>「ユニットをつなげて複雑なオーディオ処理を実現する」というしくみ（AUGraph）を持っており、まるでギターのエフェクターをつないで音をつくるようにユニット同士を結合できて、実装していて楽しいフレームワークでもあります。</p>

<p>ただ API は全部 C ベースだし、音を再生するだけでも（AVAudioPlayer 等と比較すると）複雑だったりするので、参考になるサンプルをいろいろと集めてみました。</p>

<ul>
<li>どの Audio Unit を使用しているか（kAudioUnitSubType_xxxx で判断）</li>
<li>どういうサンプルか</li>
<li>最終更新はいつか</li>
</ul>

<p>の観点からまとめています。</p>

<p>使用ユニットの項目で、そのユニットを使用しているサンプルが他にない場合は、貴重なサンプルである、という意味をこめて<strong>太字</strong>にしています。</p>

<h2>
<span id="iphonemultichannelmixertest" class="fragment"></span><a href="#iphonemultichannelmixertest"><i class="fa fa-link"></i></a><a href="https://developer.apple.com/library/ios/#samplecode/iPhoneMultichannelMixerTest/" rel="nofollow noopener" target="_blank">iPhoneMultichannelMixerTest</a>
</h2>

<p>【使用ユニット】</p>

<ul>
<li>Remote IO (kAudioUnitSubType_RemoteIO)</li>
<li>Multi Channel Mixer (kAudioUnitSubType_MultiChannelMixer)</li>
</ul>

<p>【サンプル概要】</p>

<p>on/offとボリュームをチャンネル毎に変えられる、2チャンネルのミキサー。</p>

<p><a href="https://camo.qiitausercontent.com/c94d4d780a81f0061d4d5bd5bd3b91315bfb2478/687474703a2f2f662e636c2e6c792f6974656d732f323332793063316530613163304c3277304732792f2545332538322542392545332538322541462545332538332541412545332538332542432545332538332542332545332538322542372545332538332541372545332538332538332545332538332538385f323031332d30322d32305f31362e30322e30365f2e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/c94d4d780a81f0061d4d5bd5bd3b91315bfb2478/687474703a2f2f662e636c2e6c792f6974656d732f323332793063316530613163304c3277304732792f2545332538322542392545332538322541462545332538332541412545332538332542432545332538332542332545332538322542372545332538332541372545332538332538332545332538332538385f323031332d30322d32305f31362e30322e30365f2e706e67" alt="ss" data-canonical-src="http://f.cl.ly/items/232y0c1e0a1c0L2w0G2y/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88_2013-02-20_16.02.06_.png"></a></p>

<p>オーディオファイルの再生と、複数チャンネルを扱いたい場合に参考になります。</p>

<p>【最終更新日】</p>

<p>2010-07-07</p>

<h2>
<span id="audio-mixer-mixerhost" class="fragment"></span><a href="#audio-mixer-mixerhost"><i class="fa fa-link"></i></a><a href="https://developer.apple.com/library/ios/#samplecode/MixerHost/" rel="nofollow noopener" target="_blank">Audio Mixer (MixerHost)</a>
</h2>

<p>【使用ユニット】</p>

<ul>
<li>Remote IO (kAudioUnitSubType_RemoteIO)</li>
<li>Multi Channel Mixer (kAudioUnitSubType_MultiChannelMixer)</li>
</ul>

<p>【サンプル概要】</p>

<p>on/offとボリュームをチャンネル毎に変えられる、2チャンネルのミキサー。</p>

<p><a href="https://camo.qiitausercontent.com/3d6dc6c4ddd17997d9482d75573d1d933edbab35/687474703a2f2f662e636c2e6c792f6974656d732f33773371305130493365306d3236304c337133582f2545332538322542392545332538322541462545332538332541412545332538332542432545332538332542332545332538322542372545332538332541372545332538332538332545332538332538385f323031332d30322d32305f31362e31302e34315f2e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/3d6dc6c4ddd17997d9482d75573d1d933edbab35/687474703a2f2f662e636c2e6c792f6974656d732f33773371305130493365306d3236304c337133582f2545332538322542392545332538322541462545332538332541412545332538332542432545332538332542332545332538322542372545332538332541372545332538332538332545332538332538385f323031332d30322d32305f31362e31302e34315f2e706e67" alt="ss" data-canonical-src="http://f.cl.ly/items/3w3q0Q0I3e0m260L3q3X/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88_2013-02-20_16.10.41_.png"></a></p>

<p>サンプルの機能としては、上の "iPhoneMultichannelMixerTest" とまったく同じに見えるけど、なぜこの２つが存在するのでしょうか。。</p>

<p>こっちは、そのままビルドするとエラーになるので、xibをちょっといじる必要があります。</p>

<p>【最終更新日】</p>

<p>2010-07-27</p>

<p>【最終更新日】</p>

<p>2011-10-12</p>

<h2>
<span id="avcaptureaudiodataoutput-to-audiounit-ios" class="fragment"></span><a href="#avcaptureaudiodataoutput-to-audiounit-ios"><i class="fa fa-link"></i></a><a href="http://developer.apple.com/library/ios/#samplecode/AVCaptureToAudioUnit/" rel="nofollow noopener" target="_blank">AVCaptureAudioDataOutput To AudioUnit iOS</a>
</h2>

<p>【使用ユニット】</p>

<ul>
<li><strong>Delay (kAudioUnitSubType_Delay)</strong></li>
<li>Converter (kAudioUnitSubType_AUConverter)</li>
</ul>

<p>【サンプル概要】</p>

<p>AVFoundation の AVCapture で録音した音声に、Audio Unit でディレイエフェクトをかけ、ExtAudioFile でファイル出力するサンプル。</p>

<p><a href="https://camo.qiitausercontent.com/f3eb8fcc4a0fc0f6ffd1073ece52a1f16410292f/687474703a2f2f662e636c2e6c792f6974656d732f3377323933563366315830303159316c3147317a2f2545332538322542392545332538322541462545332538332541412545332538332542432545332538332542332545332538322542372545332538332541372545332538332538332545332538332538385f323031332d30322d32305f31372e31352e32345f2e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/f3eb8fcc4a0fc0f6ffd1073ece52a1f16410292f/687474703a2f2f662e636c2e6c792f6974656d732f3377323933563366315830303159316c3147317a2f2545332538322542392545332538322541462545332538332541412545332538332542432545332538332542332545332538322542372545332538332541372545332538332538332545332538332538385f323031332d30322d32305f31372e31352e32345f2e706e67" alt="ss" data-canonical-src="http://f.cl.ly/items/3w293V3f1X001Y1l1G1z/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88_2013-02-20_17.15.24_.png"></a></p>

<p>Audio Unit の Delay Unit を取り扱っているのは今回紹介する中では唯一、という点だけでも貴重なサンプルですが、AVCaptureSession の <code>captureOutput:didOutputSampleBuffer:fromConnection:</code> で取得した波形データを Audio Unit に渡してエフェクトをかける方法、Audio Unit から <code>ExtAudioFileWriteAsync</code> でファイル出力する方法、どっちも重要なので、<strong>見た目は地味ですがコードはとても参考になる</strong>サンプルとなっています。</p>

<p>【最終更新日】</p>

<p>2012-10-08</p>

<h2>
<span id="drummachine" class="fragment"></span><a href="#drummachine"><i class="fa fa-link"></i></a><a href="https://github.com/7gano/augraph_demo/tree/master/02-DrumMachine" rel="nofollow noopener" target="_blank">DrumMachine</a>
</h2>

<p>【使用ユニット】</p>

<ul>
<li>Sampler (kAudioUnitSubType_Sampler)</li>
<li>Remote IO (kAudioUnitSubType_RemoteIO)</li>
</ul>

<p>【サンプル概要】</p>

<p>Sampler Unit を使用した TR909（ドラムマシン）的なサンプルアプリ。4つの音をタイムライン上でon/offすることでリズムを作る。</p>

<p><a href="https://camo.qiitausercontent.com/f72c6999557282b3b466f1421812c6c0f3fce012/687474703a2f2f662e636c2e6c792f6974656d732f33433178343033323147337633413366305930792f2545332538322542392545332538322541462545332538332541412545332538332542432545332538332542332545332538322542372545332538332541372545332538332538332545332538332538385f323031332d30322d32335f392e30332e33345f2e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/f72c6999557282b3b466f1421812c6c0f3fce012/687474703a2f2f662e636c2e6c792f6974656d732f33433178343033323147337633413366305930792f2545332538322542392545332538322541462545332538332541412545332538332542432545332538332542332545332538322542372545332538332541372545332538332538332545332538332538385f323031332d30322d32335f392e30332e33345f2e706e67" alt="ss" data-canonical-src="http://f.cl.ly/items/3C1x40321G3v3A3f0Y0y/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88_2013-02-23_9.03.34_.png"></a></p>

<p>ちなみに作者は Core Audio本の著者である永野さん。</p>

<p>【最終更新日】</p>

<p>2013-02-23</p>

<h2>
<span id="sampler-unit-presets-loadpresetdemo" class="fragment"></span><a href="#sampler-unit-presets-loadpresetdemo"><i class="fa fa-link"></i></a><a href="https://developer.apple.com/library/ios/#samplecode/LoadPresetDemo/" rel="nofollow noopener" target="_blank">Sampler Unit Presets (LoadPresetDemo)</a>
</h2>

<p>【使用ユニット】</p>

<ul>
<li>Sampler (kAudioUnitSubType_Sampler)</li>
<li>Remote IO (kAudioUnitSubType_RemoteIO)</li>
</ul>

<p>【サンプル概要】</p>

<p>楽器を切り替えるボタンと、Low, Mid, High の音を鳴らすボタンをもつサンプラー。</p>

<p><a href="https://camo.qiitausercontent.com/4706a71804c6a09afaf5d44f78b7fa220ceed6f6/687474703a2f2f662e636c2e6c792f6974656d732f33633066313430793374303931333046324133572f494d475f333333325f2e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/4706a71804c6a09afaf5d44f78b7fa220ceed6f6/687474703a2f2f662e636c2e6c792f6974656d732f33633066313430793374303931333046324133572f494d475f333333325f2e706e67" alt="ss" data-canonical-src="http://f.cl.ly/items/3c0f140y3t09130F2A3W/IMG_3332_.png"></a></p>

<p>Sampler Unit を使用するものは他にもありますが、AUPreset ファイル（拡張子.aupreset）なるものを使用する点では唯一のサンプルです。（中身見たけどどういう調整をするものなのかよくわかりませんでした。DJとかやる人はピンとくるのかも。）</p>

<h2>
<span id="reverb" class="fragment"></span><a href="#reverb"><i class="fa fa-link"></i></a>Reverb</h2>

<p>※ <a href="http://www.amazon.co.jp/exec/obidos/ASIN/4844332228/22301-22/ref=nosim/" rel="nofollow noopener" target="_blank">iOS5プログラミングブック</a>のサンプル。ダウンロードURLは書籍をご参照ください。</p>

<p>【使用ユニット】</p>

<ul>
<li>Remote IO (kAudioUnitSubType_RemoteIO)</li>
<li>Converter (kAudioUnitSubType_AUConverter)</li>
<li><strong>Reverb2 (kAudioUnitSubType_Reverb2)</strong></li>
<li>Multi Channel Mixer (kAudioUnitSubType_MultiChannelMixer)</li>
</ul>

<p>【サンプル概要】</p>

<p>マイクから入力された音声にリバーブをかけるサンプル。</p>

<p><a href="https://camo.qiitausercontent.com/bf4ded6b73a34fb2dae31ea4ca810616253e1ab1/687474703a2f2f662e636c2e6c792f6974656d732f3230336a31313265304a33593159337a3379314b2f2545332538322542392545332538322541462545332538332541412545332538332542432545332538332542332545332538322542372545332538332541372545332538332538332545332538332538385f323031332d30322d32305f31362e34302e32395f2e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/bf4ded6b73a34fb2dae31ea4ca810616253e1ab1/687474703a2f2f662e636c2e6c792f6974656d732f3230336a31313265304a33593159337a3379314b2f2545332538322542392545332538322541462545332538332541412545332538332542432545332538332542332545332538322542372545332538332541372545332538332538332545332538332538385f323031332d30322d32305f31362e34302e32395f2e706e67" alt="ss" data-canonical-src="http://f.cl.ly/items/203j112e0J3Y1Y3z3y1K/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88_2013-02-20_16.40.29_.png"></a></p>

<p>唯一の Reverb2 のサンプル。マイク入力、エフェクト、マルチチャネルミキサーと、Audio Unit の基本が学べて、リバーブのパラメータをいろいろいじれて楽しい好サンプルです。</p>

<p>書籍の方も、AUGraph や AUNode の概念から、ひとつひとつのユニットの解説まで、わかりやすい図入りで説明されているので激しくおすすめです。</p>

<h2>
<span id="audiograph" class="fragment"></span><a href="#audiograph"><i class="fa fa-link"></i></a><a href="https://github.com/tkzic/audiograph" rel="nofollow noopener" target="_blank">audioGraph</a>
</h2>

<p>【使用ユニット】</p>

<ul>
<li>Remote IO (kAudioUnitSubType_RemoteIO)</li>
<li>Multi Channel Mixer (kAudioUnitSubType_MultiChannelMixer)</li>
<li><strong>Low Pass Filter (kAudioUnitSubType_LowPassFilter)</strong></li>
<li><strong>High Pass Filter (kAudioUnitSubType_HighPassFilter)</strong></li>
<li><strong>Audio File Player (kAudioUnitSubType_AudioFilePlayer)</strong></li>
<li>Sampler (kAudioUnitSubType_Sampler)</li>
</ul>

<p>【サンプル概要】</p>

<p>マイク入力とかシンセ音とかファイルからの音とかをマルチチャネル再生しつつ、エフェクトをかけられる。ステレオレベルメータつき。</p>

<p><a href="https://camo.qiitausercontent.com/ae98a16617dbec75dab6fe2a378e228e3c85b836/687474703a2f2f662e636c2e6c792f6974656d732f316d313030523076316f3243326a30783034336a2f2545332538322542392545332538322541462545332538332541412545332538332542432545332538332542332545332538322542372545332538332541372545332538332538332545332538332538385f323031332d30322d32305f32312e30392e33355f2e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/ae98a16617dbec75dab6fe2a378e228e3c85b836/687474703a2f2f662e636c2e6c792f6974656d732f316d313030523076316f3243326a30783034336a2f2545332538322542392545332538322541462545332538332541412545332538332542432545332538332542332545332538322542372545332538332541372545332538332538332545332538332538385f323031332d30322d32305f32312e30392e33355f2e706e67" alt="ss" data-canonical-src="http://f.cl.ly/items/1m100R0v1o2C2j0x043j/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88_2013-02-20_21.09.35_.png"></a></p>

<p>Audio Unit のもろもろ詰め合わせといった感じです。エフェクトはリングモジュレータやピッチシフターも実装されています。</p>

<h2>
<span id="iphonemixereqgraphtest" class="fragment"></span><a href="#iphonemixereqgraphtest"><i class="fa fa-link"></i></a><a href="https://developer.apple.com/library/ios/#samplecode/iPhoneMixerEQGraphTest/" rel="nofollow noopener" target="_blank">iPhoneMixerEQGraphTest</a>
</h2>

<p>【使用ユニット】</p>

<ul>
<li>Remote IO (kAudioUnitSubType_RemoteIO)</li>
<li><strong>iPod EQ (kAudioUnitSubType_AUiPodEQ)</strong></li>
<li>Multi Channel Mixer (kAudioUnitSubType_MultiChannelMixer)</li>
</ul>

<p>【サンプル概要】</p>

<p>iPod のイコライザー効果をかけるサンプル。（グラフィックイコライザーではなく、プリセットから選択する）</p>

<p><a href="https://camo.qiitausercontent.com/a73d4a79f53b5f9e1a8f71bafbed45ff007b5b71/687474703a2f2f662e636c2e6c792f6974656d732f32703074336730583235336930593039325633512f2545332538322542392545332538322541462545332538332541412545332538332542432545332538332542332545332538322542372545332538332541372545332538332538332545332538332538385f323031332d30322d32305f31362e33302e34385f2e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/a73d4a79f53b5f9e1a8f71bafbed45ff007b5b71/687474703a2f2f662e636c2e6c792f6974656d732f32703074336730583235336930593039325633512f2545332538322542392545332538322541462545332538332541412545332538332542432545332538332542332545332538322542372545332538332541372545332538332538332545332538332538385f323031332d30322d32305f31362e33302e34385f2e706e67" alt="ss" data-canonical-src="http://f.cl.ly/items/2p0t3g0X253i0Y092V3Q/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88_2013-02-20_16.30.48_.png"></a></p>

<p>【最終更新日】</p>

<p>2010-06-25</p>

<h2>
<span id="auriotouch2" class="fragment"></span><a href="#auriotouch2"><i class="fa fa-link"></i></a><a href="https://developer.apple.com/library/ios/#samplecode/aurioTouch2/" rel="nofollow noopener" target="_blank">aurioTouch2</a>
</h2>

<p>【使用ユニット】</p>

<ul>
<li>Remote IO (kAudioUnitSubType_RemoteIO)</li>
</ul>

<p>【サンプル概要】</p>

<p>マイク入力の波形を描画するサンプル。通常の時系列での波形表示の他、周波数ドメイン（FFTを使用）表示、ソノグラム表示もあり。</p>

<p><a href="https://camo.qiitausercontent.com/3bc291b76828ce639e8cf0e630c376601dc65623/687474703a2f2f662e636c2e6c792f6974656d732f325732343243323532323033307a3352307433632f2545332538322542392545332538322541462545332538332541412545332538332542432545332538332542332545332538322542372545332538332541372545332538332538332545332538332538385f323031332d30322d32305f31362e34372e33315f2e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/3bc291b76828ce639e8cf0e630c376601dc65623/687474703a2f2f662e636c2e6c792f6974656d732f325732343243323532323033307a3352307433632f2545332538322542392545332538322541462545332538332541412545332538332542432545332538332542332545332538322542372545332538332541372545332538332538332545332538332538385f323031332d30322d32305f31362e34372e33315f2e706e67" alt="ss" data-canonical-src="http://f.cl.ly/items/2W242C2522030z3R0t3c/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88_2013-02-20_16.47.31_.png"></a></p>

<p>Audio Unit の使用は Remote IO による入出力のみ。FFT には Accelerate フレームワークの <strong>vDSP</strong> を、波形やソノグラムの描画には OpenGL を使用している。</p>

<p>【最終更新日】</p>

<p>2011-12-06</p>

<h2>
<span id="iphone-core-audioプログラミング" class="fragment"></span><a href="#iphone-core-audio%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0"><i class="fa fa-link"></i></a><a href="http://www.amazon.co.jp/exec/obidos/ASIN/4797355158/22301-22/ref=nosim/" rel="nofollow noopener" target="_blank">iPhone Core Audioプログラミング</a>
</h2>

<p>※ Audio Unit のサンプルが多数あるので、これだけ例外的に書籍名をタイトルにしました。サンプルコードのダウンロードURLは書籍をご参照ください。</p>

<p>【サンプル概要】</p>

<p>各項目毎にサンプルが用意されているので、目次を載せておきます。</p>

<ul>
<li>Audio Unitの概要</li>
<li>Audio Component とAudio Unit</li>
<li>Audio Unit 正準形</li>
<li>サイン波を再生する</li>
<li>周波数を変更する</li>
<li>Examole -加速度センサーテルミンー</li>
<li>Audio Unit Processina Graoh Services</li>
<li>MultiChannel Mixer Unit</li>
<li>3D Mixer Unit</li>
<li>Converter Unit</li>
<li>iPod Equalizer Unit</li>
<li>マイクのモニタリング</li>
<li>Remote IOを使って録音する</li>
<li>レコーデイングレベルを調整する</li>
<li>Voice Processing IO Unit</li>
</ul>

<p>【使用ユニット】</p>

<p>たくさんあるので全ては確認できていませんが、iOS3.x時代にあったユニットは全部入っていると思われます。（多くのユニットがiOS5で追加されましたが、iOS5登場以前の本なのでそれらについては載っていません）</p>

<h2>
<span id="remoteio" class="fragment"></span><a href="#remoteio"><i class="fa fa-link"></i></a><a href="http://www.amazon.co.jp/exec/obidos/ASIN/4873114179/22301-22/ref=nosim/" rel="nofollow noopener" target="_blank">RemoteIO</a>
</h2>

<p>※<a href="http://www.amazon.co.jp/exec/obidos/ASIN/4873114179/22301-22/ref=nosim/" rel="nofollow noopener" target="_blank">iPhone SDK アプリケーション開発ガイド</a>のサンプル。サンプルコードのダウンロードURLは書籍をご参照ください。</p>

<p>【サンプル概要】</p>

<p>Remote IOでサイン波を鳴らすサンプル。書籍の Audio Unit の章は Core Audio 本の著者永野さんが書いているので、Core Audio本のChapter09のサンプルと同様と思われます。</p>

<p>Core Audio本は絶版になっていて中古で高値がついてしまってますが、こっちはまだ普通に買えるようです。</p>

<div class="">
<div class=""><a href="http://www.amazon.co.jp/exec/obidos/ASIN/4873114179/22301-22/ref=nosim/" rel="nofollow noopener" target="_blank"><img src="https://camo.qiitausercontent.com/fd26092409b54cc70829ddfa38f9e8d08450f144/687474703a2f2f6563782e696d616765732d616d617a6f6e2e636f6d2f696d616765732f492f343147326b31787073734c2e5f534c3136305f2e6a7067" alt="iPhone SDK アプリケーション開発ガイド" data-canonical-src="http://ecx.images-amazon.com/images/I/41G2k1xpssL._SL160_.jpg"></a></div>
<div class="">
<div class=""><a href="http://www.amazon.co.jp/exec/obidos/ASIN/4873114179/22301-22/ref=nosim/" rel="nofollow noopener" target="_blank">iPhone SDK アプリケーション開発ガイド</a></div>
<div class="">Jonathan Zdziarski <br>オライリージャパン <br>売り上げランキング: 28500<br>
</div>
<div class=""><div class=""><a href="http://www.amazon.co.jp/exec/obidos/ASIN/4873114179/22301-22/ref=nosim/" rel="nofollow noopener" target="_blank">Amazon.co.jp で詳細を見る</a></div></div>
</div>
<div class=""></div>
</div>

<h2>
<span id="audio-unitの参考資料" class="fragment"></span><a href="#audio-unit%E3%81%AE%E5%8F%82%E8%80%83%E8%B3%87%E6%96%99"><i class="fa fa-link"></i></a>Audio Unitの参考資料</h2>

<ul>
<li><a href="https://developer.apple.com/library/ios/#documentation/MusicAudio/Conceptual/CoreAudioOverview/" rel="nofollow noopener" target="_blank">Core Audio Overview</a></li>
<li>
<a href="https://developer.apple.com/library/mac/#documentation/MusicAudio/Conceptual/AudioUnitProgrammingGuide/Introduction/Introduction.html" rel="nofollow noopener" target="_blank">Audio Unit Programming Guide</a>

<ul>
<li>※Mac版。2013/2/20現在、iOS版はありません。</li>
</ul>
</li>
</ul>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>shu223さんの<br />15位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>119</kbd>
		<a target="_blank" href="https://qiita.com/shu223/items/6ee131aff8751b42666a">『iOSアプリ開発 達人のレシピ100』のレシピ一覧</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-05-28 14:56:37</center>
	</td>
	<td style="width:200px;">
		@shu223<br />(Freelancer 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/3180/profile-images/1473682733">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Objective-C]</b> <b>[iPhone]</b> <b>[Xcode]</b> <b>[iOS]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>拙著『<a href="http://www.amazon.co.jp/exec/obidos/ASIN/4798038180/22301-22/ref=nosim/" rel="nofollow noopener" target="_blank">iOSアプリ開発 達人のレシピ100</a>』という書籍の内容のまとめです。</p>

<p><a href="https://camo.qiitausercontent.com/0238508b2fed4778f35eaf0dcbf3565899e2ffba/687474703a2f2f662e636c2e6c792f6974656d732f304b326e3179314e30713043316530563073324f2f494d475f343339375f72315f63312e6a7067" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/0238508b2fed4778f35eaf0dcbf3565899e2ffba/687474703a2f2f662e636c2e6c792f6974656d732f304b326e3179314e30713043316530563073324f2f494d475f343339375f72315f63312e6a7067" alt="" data-canonical-src="http://f.cl.ly/items/0K2n1y1N0q0C1e0V0s2O/IMG_4397_r1_c1.jpg"></a></p>

<h2>
<span id="chapter1-アニメーション演出" class="fragment"></span><a href="#chapter1-%E3%82%A2%E3%83%8B%E3%83%A1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E6%BC%94%E5%87%BA"><i class="fa fa-link"></i></a>Chapter1 アニメーション／演出</h2>

<h3>
<span id="001-catransform3d-を用いて3d-表現をおこなう" class="fragment"></span><a href="#001-catransform3d-%E3%82%92%E7%94%A8%E3%81%84%E3%81%A63d-%E8%A1%A8%E7%8F%BE%E3%82%92%E3%81%8A%E3%81%93%E3%81%AA%E3%81%86"><i class="fa fa-link"></i></a>001 CATransform3D を用いて3D 表現をおこなう</h3>

<p><a href="https://camo.qiitausercontent.com/3f83f95388f291a560dbc062d3bd89995399bda0/687474703a2f2f662e636c2e6c792f6974656d732f315031513257325530323063326a3331313630752f43415472616e73666f726d33445f616c6c5f72315f63315f5f2e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/3f83f95388f291a560dbc062d3bd89995399bda0/687474703a2f2f662e636c2e6c792f6974656d732f315031513257325530323063326a3331313630752f43415472616e73666f726d33445f616c6c5f72315f63315f5f2e706e67" alt="" data-canonical-src="http://f.cl.ly/items/1P1Q2W2U020c2j31160u/CATransform3D_all_r1_c1__.png"></a></p>

<h3>
<span id="002-3dアニメーション" class="fragment"></span><a href="#002-3d%E3%82%A2%E3%83%8B%E3%83%A1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3"><i class="fa fa-link"></i></a>002 3Dアニメーション</h3>

<h3>
<span id="003-uikit-で物理演算エンジンを使用する" class="fragment"></span><a href="#003-uikit-%E3%81%A7%E7%89%A9%E7%90%86%E6%BC%94%E7%AE%97%E3%82%A8%E3%83%B3%E3%82%B8%E3%83%B3%E3%82%92%E4%BD%BF%E7%94%A8%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>003 UIKit で物理演算エンジンを使用する</h3>

<p><a href="https://camo.qiitausercontent.com/ab4c13ba9b6beb1974becf54dfc6e119bb4c57cc/687474703a2f2f662e636c2e6c792f6974656d732f33733275324e336a327a336a31763433326230572f426f7832445f72315f63315f72315f63315f72315f63312e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/ab4c13ba9b6beb1974becf54dfc6e119bb4c57cc/687474703a2f2f662e636c2e6c792f6974656d732f33733275324e336a327a336a31763433326230572f426f7832445f72315f63315f72315f63315f72315f63312e706e67" alt="Box2D_r1_c1.png" data-canonical-src="http://f.cl.ly/items/3s2u2N3j2z3j1v432b0W/Box2D_r1_c1_r1_c1_r1_c1.png"></a></p>

<h3>
<span id="004-uikit-上でパーティクルエフェクトを表示する" class="fragment"></span><a href="#004-uikit-%E4%B8%8A%E3%81%A7%E3%83%91%E3%83%BC%E3%83%86%E3%82%A3%E3%82%AF%E3%83%AB%E3%82%A8%E3%83%95%E3%82%A7%E3%82%AF%E3%83%88%E3%82%92%E8%A1%A8%E7%A4%BA%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>004 UIKit 上でパーティクルエフェクトを表示する</h3>

<p><a href="https://camo.qiitausercontent.com/303b5ac9328cc4ea3001350bb82563d37d8ca45f/687474703a2f2f662e636c2e6c792f6974656d732f325933453336324b335a307630463346305930422f7061727469636c65335f72315f63315f72315f63312e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/303b5ac9328cc4ea3001350bb82563d37d8ca45f/687474703a2f2f662e636c2e6c792f6974656d732f325933453336324b335a307630463346305930422f7061727469636c65335f72315f63315f72315f63312e706e67" alt="" data-canonical-src="http://f.cl.ly/items/2Y3E362K3Z0v0F3F0Y0B/particle3_r1_c1_r1_c1.png"></a></p>

<h3>
<span id="005-core-image-の遷移エフェクトを使う" class="fragment"></span><a href="#005-core-image-%E3%81%AE%E9%81%B7%E7%A7%BB%E3%82%A8%E3%83%95%E3%82%A7%E3%82%AF%E3%83%88%E3%82%92%E4%BD%BF%E3%81%86"><i class="fa fa-link"></i></a>005 Core Image の遷移エフェクトを使う</h3>

<p><a href="https://camo.qiitausercontent.com/6d8963692d2287c11ee9de47689e3f2c6688db95/687474703a2f2f662e636c2e6c792f6974656d732f34313252304e307033543257306b3376325a30472f436f7265496d6167655472616e736974696f6e5f5f5f72315f63312e676966" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/6d8963692d2287c11ee9de47689e3f2c6688db95/687474703a2f2f662e636c2e6c792f6974656d732f34313252304e307033543257306b3376325a30472f436f7265496d6167655472616e736974696f6e5f5f5f72315f63312e676966" alt="" data-canonical-src="http://f.cl.ly/items/412R0N0p3T2W0k3v2Z0G/CoreImageTransition___r1_c1.gif"></a></p>

<h3>
<span id="006-パスに沿ってアニメーションさせる" class="fragment"></span><a href="#006-%E3%83%91%E3%82%B9%E3%81%AB%E6%B2%BF%E3%81%A3%E3%81%A6%E3%82%A2%E3%83%8B%E3%83%A1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E3%81%95%E3%81%9B%E3%82%8B"><i class="fa fa-link"></i></a>006 パスに沿ってアニメーションさせる</h3>

<p><a href="https://camo.qiitausercontent.com/dab75e18fdb03dbb1aa1f82996f3b36c0d91a88e/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f333138302f36336565353133302d643565382d356261352d646535332d3266663134393536316234302e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/dab75e18fdb03dbb1aa1f82996f3b36c0d91a88e/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f333138302f36336565353133302d643565382d356261352d646535332d3266663134393536316234302e706e67" alt="PathAnimation1.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/3180/63ee5130-d5e8-5ba5-de53-2ff149561b40.png"></a></p>

<h3>
<span id="007-グラデーションカラーをアニメーションさせる" class="fragment"></span><a href="#007-%E3%82%B0%E3%83%A9%E3%83%87%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E3%82%AB%E3%83%A9%E3%83%BC%E3%82%92%E3%82%A2%E3%83%8B%E3%83%A1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E3%81%95%E3%81%9B%E3%82%8B"><i class="fa fa-link"></i></a>007 グラデーションカラーをアニメーションさせる</h3>

<p><a href="https://camo.qiitausercontent.com/3a231362409b0b5d76d987074dc080c280399443/687474703a2f2f662e636c2e6c792f6974656d732f3155327333643053304c333230553031314933452f477261646174696f6e416e696d6174696f6e5f72315f63312e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/3a231362409b0b5d76d987074dc080c280399443/687474703a2f2f662e636c2e6c792f6974656d732f3155327333643053304c333230553031314933452f477261646174696f6e416e696d6174696f6e5f72315f63312e706e67" alt="" data-canonical-src="http://f.cl.ly/items/1U2s3d0S0L320U011I3E/GradationAnimation_r1_c1.png"></a></p>

<h3>
<span id="008-画面を揺らすエフェクト" class="fragment"></span><a href="#008-%E7%94%BB%E9%9D%A2%E3%82%92%E6%8F%BA%E3%82%89%E3%81%99%E3%82%A8%E3%83%95%E3%82%A7%E3%82%AF%E3%83%88"><i class="fa fa-link"></i></a>008 画面を揺らすエフェクト</h3>

<h3>
<span id="009-クロスディゾルブで画面遷移" class="fragment"></span><a href="#009-%E3%82%AF%E3%83%AD%E3%82%B9%E3%83%87%E3%82%A3%E3%82%BE%E3%83%AB%E3%83%96%E3%81%A7%E7%94%BB%E9%9D%A2%E9%81%B7%E7%A7%BB"><i class="fa fa-link"></i></a>009 クロスディゾルブで画面遷移</h3>

<h3>
<span id="010-uiview-のblocksアニメーションをキャンセルする" class="fragment"></span><a href="#010-uiview-%E3%81%AEblocks%E3%82%A2%E3%83%8B%E3%83%A1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E3%82%92%E3%82%AD%E3%83%A3%E3%83%B3%E3%82%BB%E3%83%AB%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>010 UIView のBlocksアニメーションをキャンセルする</h3>

<h3>
<span id="011-トゥイーンライブラリを使用するprtween" class="fragment"></span><a href="#011-%E3%83%88%E3%82%A5%E3%82%A4%E3%83%BC%E3%83%B3%E3%83%A9%E3%82%A4%E3%83%96%E3%83%A9%E3%83%AA%E3%82%92%E4%BD%BF%E7%94%A8%E3%81%99%E3%82%8Bprtween"><i class="fa fa-link"></i></a>011 トゥイーンライブラリを使用する：PRTween</h3>

<h3>
<span id="012-トゥイーンライブラリを使用するaheasing" class="fragment"></span><a href="#012-%E3%83%88%E3%82%A5%E3%82%A4%E3%83%BC%E3%83%B3%E3%83%A9%E3%82%A4%E3%83%96%E3%83%A9%E3%83%AA%E3%82%92%E4%BD%BF%E7%94%A8%E3%81%99%E3%82%8Baheasing"><i class="fa fa-link"></i></a>012 トゥイーンライブラリを使用する：AHEasing</h3>

<p><a href="https://camo.qiitausercontent.com/f9a9faa3387c773dc9044a3eeb883955aba9968e/687474703a2f2f662e636c2e6c792f6974656d732f32643051305730523377337630773266324f32662f4148456173696e67526f746174655f6f72675f72315f63315f5f72315f63312e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/f9a9faa3387c773dc9044a3eeb883955aba9968e/687474703a2f2f662e636c2e6c792f6974656d732f32643051305730523377337630773266324f32662f4148456173696e67526f746174655f6f72675f72315f63315f5f72315f63312e706e67" alt="AHEasingRotate_org_r1_c1_.png" data-canonical-src="http://f.cl.ly/items/2d0Q0W0R3w3v0w2f2O2f/AHEasingRotate_org_r1_c1__r1_c1.png"></a></p>

<h2>
<span id="chapter2-画像処理色処理" class="fragment"></span><a href="#chapter2-%E7%94%BB%E5%83%8F%E5%87%A6%E7%90%86%E8%89%B2%E5%87%A6%E7%90%86"><i class="fa fa-link"></i></a>Chapter2 画像処理／色処理</h2>

<h3>
<span id="013-opencv-for-ios-を使う" class="fragment"></span><a href="#013-opencv-for-ios-%E3%82%92%E4%BD%BF%E3%81%86"><i class="fa fa-link"></i></a>013 OpenCV for iOS を使う</h3>

<h3>
<span id="014-vimageで画像処理をおこなう" class="fragment"></span><a href="#014-vimage%E3%81%A7%E7%94%BB%E5%83%8F%E5%87%A6%E7%90%86%E3%82%92%E3%81%8A%E3%81%93%E3%81%AA%E3%81%86"><i class="fa fa-link"></i></a>014 vImageで画像処理をおこなう</h3>

<h3>
<span id="015-シャッター音の鳴らないカメラアプリを実装する" class="fragment"></span><a href="#015-%E3%82%B7%E3%83%A3%E3%83%83%E3%82%BF%E3%83%BC%E9%9F%B3%E3%81%AE%E9%B3%B4%E3%82%89%E3%81%AA%E3%81%84%E3%82%AB%E3%83%A1%E3%83%A9%E3%82%A2%E3%83%97%E3%83%AA%E3%82%92%E5%AE%9F%E8%A3%85%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>015 シャッター音の鳴らないカメラアプリを実装する</h3>

<h3>
<span id="016-カメラにフォーカスと露出をタップで合わせる機能をつける" class="fragment"></span><a href="#016-%E3%82%AB%E3%83%A1%E3%83%A9%E3%81%AB%E3%83%95%E3%82%A9%E3%83%BC%E3%82%AB%E3%82%B9%E3%81%A8%E9%9C%B2%E5%87%BA%E3%82%92%E3%82%BF%E3%83%83%E3%83%97%E3%81%A7%E5%90%88%E3%82%8F%E3%81%9B%E3%82%8B%E6%A9%9F%E8%83%BD%E3%82%92%E3%81%A4%E3%81%91%E3%82%8B"><i class="fa fa-link"></i></a>016 カメラにフォーカスと露出をタップで合わせる機能をつける</h3>

<h3>
<span id="017-core-image-の各フィルタのパラメータの詳細を調べる" class="fragment"></span><a href="#017-core-image-%E3%81%AE%E5%90%84%E3%83%95%E3%82%A3%E3%83%AB%E3%82%BF%E3%81%AE%E3%83%91%E3%83%A9%E3%83%A1%E3%83%BC%E3%82%BF%E3%81%AE%E8%A9%B3%E7%B4%B0%E3%82%92%E8%AA%BF%E3%81%B9%E3%82%8B"><i class="fa fa-link"></i></a>017 Core Image の各フィルタのパラメータの詳細を調べる</h3>

<h3>
<span id="018-core-imageでノイズチェッカーボードストライプ等のパターンを生成する" class="fragment"></span><a href="#018-core-image%E3%81%A7%E3%83%8E%E3%82%A4%E3%82%BA%E3%83%81%E3%82%A7%E3%83%83%E3%82%AB%E3%83%BC%E3%83%9C%E3%83%BC%E3%83%89%E3%82%B9%E3%83%88%E3%83%A9%E3%82%A4%E3%83%97%E7%AD%89%E3%81%AE%E3%83%91%E3%82%BF%E3%83%BC%E3%83%B3%E3%82%92%E7%94%9F%E6%88%90%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>018 Core Imageでノイズ/チェッカーボード/ストライプ等のパターンを生成する</h3>

<p><a href="https://camo.qiitausercontent.com/76d184d9c95c26d0d467b4a7745761673567d64c/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f333138302f39386666336239362d643739322d653131662d623238622d6233663531363966666163322e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/76d184d9c95c26d0d467b4a7745761673567d64c/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f333138302f39386666336239362d643739322d653131662d623238622d6233663531363966666163322e706e67" alt="CoreImagePatterns1_r1_c1.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/3180/98ff3b96-d792-e11f-b28b-b3f5169ffac2.png"></a></p>

<h3>
<span id="019-トイカメラのようなトンネルエフェクトビネット効果を写真に加える" class="fragment"></span><a href="#019-%E3%83%88%E3%82%A4%E3%82%AB%E3%83%A1%E3%83%A9%E3%81%AE%E3%82%88%E3%81%86%E3%81%AA%E3%83%88%E3%83%B3%E3%83%8D%E3%83%AB%E3%82%A8%E3%83%95%E3%82%A7%E3%82%AF%E3%83%88%E3%83%93%E3%83%8D%E3%83%83%E3%83%88%E5%8A%B9%E6%9E%9C%E3%82%92%E5%86%99%E7%9C%9F%E3%81%AB%E5%8A%A0%E3%81%88%E3%82%8B"><i class="fa fa-link"></i></a>019 トイカメラのようなトンネルエフェクト（ビネット効果）を写真に加える</h3>

<p><a href="https://camo.qiitausercontent.com/f17ecdc952dbe3626fc15a07e3c6123ccedff8d9/687474703a2f2f63646e2d616b2e662e73742d686174656e612e636f6d2f696d616765732f666f746f6c6966652f732f7368753232332f32303133303532372f32303133303532373034313233342e706e673f31333639353935353631" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/f17ecdc952dbe3626fc15a07e3c6123ccedff8d9/687474703a2f2f63646e2d616b2e662e73742d686174656e612e636f6d2f696d616765732f666f746f6c6966652f732f7368753232332f32303133303532372f32303133303532373034313233342e706e673f31333639353935353631" alt="" data-canonical-src="http://cdn-ak.f.st-hatena.com/images/fotolife/s/shu223/20130527/20130527041234.png?1369595561"></a></p>

<h3>
<span id="020-画像をポスタライズ色数を減らすする" class="fragment"></span><a href="#020-%E7%94%BB%E5%83%8F%E3%82%92%E3%83%9D%E3%82%B9%E3%82%BF%E3%83%A9%E3%82%A4%E3%82%BA%E8%89%B2%E6%95%B0%E3%82%92%E6%B8%9B%E3%82%89%E3%81%99%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>020 画像をポスタライズ（色数を減らす）する</h3>

<p><a href="https://camo.qiitausercontent.com/02d6f2f00c9ce932884ff13fec26b00af3604839/687474703a2f2f63646e2d616b2e662e73742d686174656e612e636f6d2f696d616765732f666f746f6c6966652f732f7368753232332f32303133303532372f32303133303532373034303332392e706e673f31333639353935303138" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/02d6f2f00c9ce932884ff13fec26b00af3604839/687474703a2f2f63646e2d616b2e662e73742d686174656e612e636f6d2f696d616765732f666f746f6c6966652f732f7368753232332f32303133303532372f32303133303532373034303332392e706e673f31333639353935303138" alt="" data-canonical-src="http://cdn-ak.f.st-hatena.com/images/fotolife/s/shu223/20130527/20130527040329.png?1369595018"></a></p>

<h3>
<span id="021-画像にモザイクをかける" class="fragment"></span><a href="#021-%E7%94%BB%E5%83%8F%E3%81%AB%E3%83%A2%E3%82%B6%E3%82%A4%E3%82%AF%E3%82%92%E3%81%8B%E3%81%91%E3%82%8B"><i class="fa fa-link"></i></a>021 画像にモザイクをかける</h3>

<p><a href="https://camo.qiitausercontent.com/4e00def46e7850d36cc3d0568f350320dc76eba9/687474703a2f2f63646e2d616b2e662e73742d686174656e612e636f6d2f696d616765732f666f746f6c6966652f732f7368753232332f32303133303532372f32303133303532373033353934382e706e673f31333639353934373936" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/4e00def46e7850d36cc3d0568f350320dc76eba9/687474703a2f2f63646e2d616b2e662e73742d686174656e612e636f6d2f696d616765732f666f746f6c6966652f732f7368753232332f32303133303532372f32303133303532373033353934382e706e673f31333639353934373936" alt="" data-canonical-src="http://cdn-ak.f.st-hatena.com/images/fotolife/s/shu223/20130527/20130527035948.png?1369594796"></a></p>

<h3>
<span id="022-uibezierpathでパスを描画する" class="fragment"></span><a href="#022-uibezierpath%E3%81%A7%E3%83%91%E3%82%B9%E3%82%92%E6%8F%8F%E7%94%BB%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>022 UIBezierPathでパスを描画する</h3>

<h3>
<span id="023-svgファイルをuibezierpath-オブジェクトに変換する" class="fragment"></span><a href="#023-svg%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%82%92uibezierpath-%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AB%E5%A4%89%E6%8F%9B%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>023 SVGファイルをUIBezierPath オブジェクトに変換する</h3>

<p><a href="https://camo.qiitausercontent.com/1dcbd0b0cbba632152ae5074034e53521db3cd12/687474703a2f2f662e636c2e6c792f6974656d732f3153324c326a33453075304130613269336231492f627574746f6e735f73637265656e73686f745f72315f63315f2e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/1dcbd0b0cbba632152ae5074034e53521db3cd12/687474703a2f2f662e636c2e6c792f6974656d732f3153324c326a33453075304130613269336231492f627574746f6e735f73637265656e73686f745f72315f63315f2e706e67" alt="" data-canonical-src="http://f.cl.ly/items/1S2L2j3E0u0A0a2i3b1I/buttons_screenshot_r1_c1_.png"></a></p>

<h3>
<span id="024-画像を多角形で切り抜く" class="fragment"></span><a href="#024-%E7%94%BB%E5%83%8F%E3%82%92%E5%A4%9A%E8%A7%92%E5%BD%A2%E3%81%A7%E5%88%87%E3%82%8A%E6%8A%9C%E3%81%8F"><i class="fa fa-link"></i></a>024 画像を多角形で切り抜く</h3>

<p><a href="https://camo.qiitausercontent.com/811307f50a29ad35675a2b9e8d6c1a4857990d3f/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f333138302f38666665636131372d626535332d343531372d383863382d3865333930363665383135352e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/811307f50a29ad35675a2b9e8d6c1a4857990d3f/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f333138302f38666665636131372d626535332d343531372d383863382d3865333930363665383135352e706e67" alt="BezierCrop1__r1_c1.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/3180/8ffeca17-be53-4517-88c8-8e39066e8155.png"></a></p>

<h3>
<span id="025-プログラムからスクリーンショットを撮影する" class="fragment"></span><a href="#025-%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%A0%E3%81%8B%E3%82%89%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88%E3%82%92%E6%92%AE%E5%BD%B1%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>025 プログラムからスクリーンショットを撮影する</h3>

<h3>
<span id="026-画像の4-角を維持したまま拡大縮小する9スライス" class="fragment"></span><a href="#026-%E7%94%BB%E5%83%8F%E3%81%AE4-%E8%A7%92%E3%82%92%E7%B6%AD%E6%8C%81%E3%81%97%E3%81%9F%E3%81%BE%E3%81%BE%E6%8B%A1%E5%A4%A7%E7%B8%AE%E5%B0%8F%E3%81%99%E3%82%8B9%E3%82%B9%E3%83%A9%E3%82%A4%E3%82%B9"><i class="fa fa-link"></i></a>026 画像の4 角を維持したまま拡大縮小する（9スライス）</h3>

<p><a href="https://camo.qiitausercontent.com/dcbd7fef39df2b7f794c985895ad055e4101cee6/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f333138302f64653237333464382d626430642d653933652d613139622d3962386166366565633937652e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/dcbd7fef39df2b7f794c985895ad055e4101cee6/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f333138302f64653237333464382d626430642d653933652d613139622d3962386166366565633937652e706e67" alt="9Slice0.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/3180/de2734d8-bd0d-e93e-a19b-9b8af6eec97e.png"></a></p>

<h3>
<span id="027-core-graphics-を用いてグラデーションを描画する" class="fragment"></span><a href="#027-core-graphics-%E3%82%92%E7%94%A8%E3%81%84%E3%81%A6%E3%82%B0%E3%83%A9%E3%83%87%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E3%82%92%E6%8F%8F%E7%94%BB%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>027 Core Graphics を用いてグラデーションを描画する</h3>

<p><a href="https://camo.qiitausercontent.com/7a8388f1925c1fab32b7a907570861e1b8450a08/687474703a2f2f63646e2d616b2e662e73742d686174656e612e636f6d2f696d616765732f666f746f6c6966652f732f7368753232332f32303133303532372f32303133303532373033343735362e706e673f31333639353934303930" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/7a8388f1925c1fab32b7a907570861e1b8450a08/687474703a2f2f63646e2d616b2e662e73742d686174656e612e636f6d2f696d616765732f666f746f6c6966652f732f7368753232332f32303133303532372f32303133303532373033343735362e706e673f31333639353934303930" alt="" data-canonical-src="http://cdn-ak.f.st-hatena.com/images/fotolife/s/shu223/20130527/20130527034756.png?1369594090"></a></p>

<h3>
<span id="028-uicolor-の重ね合わせcssカラー名での色指定をおこなう" class="fragment"></span><a href="#028-uicolor-%E3%81%AE%E9%87%8D%E3%81%AD%E5%90%88%E3%82%8F%E3%81%9Bcss%E3%82%AB%E3%83%A9%E3%83%BC%E5%90%8D%E3%81%A7%E3%81%AE%E8%89%B2%E6%8C%87%E5%AE%9A%E3%82%92%E3%81%8A%E3%81%93%E3%81%AA%E3%81%86"><i class="fa fa-link"></i></a>028 UIColor の重ね合わせ/CSSカラー名での色指定をおこなう</h3>

<h3>
<span id="029-配色技法に基づいた色のセットを自動生成する" class="fragment"></span><a href="#029-%E9%85%8D%E8%89%B2%E6%8A%80%E6%B3%95%E3%81%AB%E5%9F%BA%E3%81%A5%E3%81%84%E3%81%9F%E8%89%B2%E3%81%AE%E3%82%BB%E3%83%83%E3%83%88%E3%82%92%E8%87%AA%E5%8B%95%E7%94%9F%E6%88%90%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>029 配色技法に基づいた色のセットを自動生成する</h3>

<p><a href="https://camo.qiitausercontent.com/c8bbe2797372825c259da2d71cb440269f5e339e/687474703a2f2f662e636c2e6c792f6974656d732f31473038313330743056317a315630413052324e2f436f6c6f72536368656d65315f72315f63312e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/c8bbe2797372825c259da2d71cb440269f5e339e/687474703a2f2f662e636c2e6c792f6974656d732f31473038313330743056317a315630413052324e2f436f6c6f72536368656d65315f72315f63312e706e67" alt="ColorScheme1_r1_c1.png" data-canonical-src="http://f.cl.ly/items/1G08130t0V1z1V0A0R2N/ColorScheme1_r1_c1.png"></a></p>

<h2>
<span id="chapter3-オーディオ処理" class="fragment"></span><a href="#chapter3-%E3%82%AA%E3%83%BC%E3%83%87%E3%82%A3%E3%82%AA%E5%87%A6%E7%90%86"><i class="fa fa-link"></i></a>Chapter3 オーディオ処理</h2>

<h3>
<span id="030-openalで3d-空間に音源を配置する" class="fragment"></span><a href="#030-openal%E3%81%A73d-%E7%A9%BA%E9%96%93%E3%81%AB%E9%9F%B3%E6%BA%90%E3%82%92%E9%85%8D%E7%BD%AE%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>030 OpenALで3D 空間に音源を配置する</h3>

<h3>
<span id="031-デバイスのボリュームボタンの操作を検出する" class="fragment"></span><a href="#031-%E3%83%87%E3%83%90%E3%82%A4%E3%82%B9%E3%81%AE%E3%83%9C%E3%83%AA%E3%83%A5%E3%83%BC%E3%83%A0%E3%83%9C%E3%82%BF%E3%83%B3%E3%81%AE%E6%93%8D%E4%BD%9C%E3%82%92%E6%A4%9C%E5%87%BA%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>031 デバイスのボリュームボタンの操作を検出する</h3>

<h3>
<span id="032-ヘッドフォンジャックの抜き差しを検知する" class="fragment"></span><a href="#032-%E3%83%98%E3%83%83%E3%83%89%E3%83%95%E3%82%A9%E3%83%B3%E3%82%B8%E3%83%A3%E3%83%83%E3%82%AF%E3%81%AE%E6%8A%9C%E3%81%8D%E5%B7%AE%E3%81%97%E3%82%92%E6%A4%9C%E7%9F%A5%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>032 ヘッドフォンジャックの抜き差しを検知する</h3>

<h3>
<span id="033-バイブを鳴らす" class="fragment"></span><a href="#033-%E3%83%90%E3%82%A4%E3%83%96%E3%82%92%E9%B3%B4%E3%82%89%E3%81%99"><i class="fa fa-link"></i></a>033 バイブを鳴らす</h3>

<h3>
<span id="034-システムボリュームに左右されない音量でシャッター音を鳴らす" class="fragment"></span><a href="#034-%E3%82%B7%E3%82%B9%E3%83%86%E3%83%A0%E3%83%9C%E3%83%AA%E3%83%A5%E3%83%BC%E3%83%A0%E3%81%AB%E5%B7%A6%E5%8F%B3%E3%81%95%E3%82%8C%E3%81%AA%E3%81%84%E9%9F%B3%E9%87%8F%E3%81%A7%E3%82%B7%E3%83%A3%E3%83%83%E3%82%BF%E3%83%BC%E9%9F%B3%E3%82%92%E9%B3%B4%E3%82%89%E3%81%99"><i class="fa fa-link"></i></a>034 システムボリュームに左右されない音量でシャッター音を鳴らす</h3>

<h3>
<span id="035-avaudiorecordを用いてマイクに入力された音声を録音する" class="fragment"></span><a href="#035-avaudiorecord%E3%82%92%E7%94%A8%E3%81%84%E3%81%A6%E3%83%9E%E3%82%A4%E3%82%AF%E3%81%AB%E5%85%A5%E5%8A%9B%E3%81%95%E3%82%8C%E3%81%9F%E9%9F%B3%E5%A3%B0%E3%82%92%E9%8C%B2%E9%9F%B3%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>035 AVAudioRecordを用いてマイクに入力された音声を録音する</h3>

<h3>
<span id="036-avcapture-を用いてマイクに入力された音声を録音する" class="fragment"></span><a href="#036-avcapture-%E3%82%92%E7%94%A8%E3%81%84%E3%81%A6%E3%83%9E%E3%82%A4%E3%82%AF%E3%81%AB%E5%85%A5%E5%8A%9B%E3%81%95%E3%82%8C%E3%81%9F%E9%9F%B3%E5%A3%B0%E3%82%92%E9%8C%B2%E9%9F%B3%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>036 AVCapture を用いてマイクに入力された音声を録音する</h3>

<h2>
<span id="chapter4-ui" class="fragment"></span><a href="#chapter4-ui"><i class="fa fa-link"></i></a>Chapter4 UI</h2>

<h3>
<span id="037-3d-表現を用いたui" class="fragment"></span><a href="#037-3d-%E8%A1%A8%E7%8F%BE%E3%82%92%E7%94%A8%E3%81%84%E3%81%9Fui"><i class="fa fa-link"></i></a>037 3D 表現を用いたUI</h3>

<p><a href="https://camo.qiitausercontent.com/d369f20fa388a73f0fc5f4207fdb9ccaab44f010/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f333138302f35373133623139362d643432372d323034642d643433362d6531623262383130336133362e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/d369f20fa388a73f0fc5f4207fdb9ccaab44f010/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f333138302f35373133623139362d643432372d323034642d643433362d6531623262383130336133362e706e67" alt="FlipSample1_r1_c1.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/3180/5713b196-d427-204d-d436-e1b2b8103a36.png"></a></p>

<h3>
<span id="038-uinavigationcontroller-の遷移アニメーションをカスタマイズする" class="fragment"></span><a href="#038-uinavigationcontroller-%E3%81%AE%E9%81%B7%E7%A7%BB%E3%82%A2%E3%83%8B%E3%83%A1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E3%82%92%E3%82%AB%E3%82%B9%E3%82%BF%E3%83%9E%E3%82%A4%E3%82%BA%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>038 UINavigationController の遷移アニメーションをカスタマイズする</h3>

<h3>
<span id="039-バウンスさせてビューを出す" class="fragment"></span><a href="#039-%E3%83%90%E3%82%A6%E3%83%B3%E3%82%B9%E3%81%95%E3%81%9B%E3%81%A6%E3%83%93%E3%83%A5%E3%83%BC%E3%82%92%E5%87%BA%E3%81%99"><i class="fa fa-link"></i></a>039 バウンスさせてビューを出す</h3>

<h3>
<span id="040-pathやfacebookライクなスライドメニューを実装する" class="fragment"></span><a href="#040-path%E3%82%84facebook%E3%83%A9%E3%82%A4%E3%82%AF%E3%81%AA%E3%82%B9%E3%83%A9%E3%82%A4%E3%83%89%E3%83%A1%E3%83%8B%E3%83%A5%E3%83%BC%E3%82%92%E5%AE%9F%E8%A3%85%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>040 PathやFacebookライクなスライドメニューを実装する</h3>

<p><a href="https://camo.qiitausercontent.com/dfe7b7768c823522eee5ed915c89ee42122fb716/687474703a2f2f63646e2d616b2e662e73742d686174656e612e636f6d2f696d616765732f666f746f6c6966652f732f7368753232332f32303133303532372f32303133303532373034303530312e706e673f31333639353935313038" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/dfe7b7768c823522eee5ed915c89ee42122fb716/687474703a2f2f63646e2d616b2e662e73742d686174656e612e636f6d2f696d616765732f666f746f6c6966652f732f7368753232332f32303133303532372f32303133303532373034303530312e706e673f31333639353935313038" alt="" data-canonical-src="http://cdn-ak.f.st-hatena.com/images/fotolife/s/shu223/20130527/20130527040501.png?1369595108"></a></p>

<h3>
<span id="041-数値をバッジで表示する" class="fragment"></span><a href="#041-%E6%95%B0%E5%80%A4%E3%82%92%E3%83%90%E3%83%83%E3%82%B8%E3%81%A7%E8%A1%A8%E7%A4%BA%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>041 数値をバッジで表示する</h3>

<p><a href="https://camo.qiitausercontent.com/03d9055da7682daab6b104d0d58a7f55f2122373/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f333138302f35653237336332382d316163372d653164392d353436342d6436363239313932623537622e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/03d9055da7682daab6b104d0d58a7f55f2122373/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f333138302f35653237336332382d316163372d653164392d353436342d6436363239313932623537622e706e67" alt="Badge2.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/3180/5e273c28-1ac7-e1d9-5464-d6629192b57b.png"></a></p>

<h3>
<span id="042-スクロール付きタブバーを実装する" class="fragment"></span><a href="#042-%E3%82%B9%E3%82%AF%E3%83%AD%E3%83%BC%E3%83%AB%E4%BB%98%E3%81%8D%E3%82%BF%E3%83%96%E3%83%90%E3%83%BC%E3%82%92%E5%AE%9F%E8%A3%85%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>042 スクロール付きタブバーを実装する</h3>

<h3>
<span id="043-uialertviewを左寄せにする" class="fragment"></span><a href="#043-uialertview%E3%82%92%E5%B7%A6%E5%AF%84%E3%81%9B%E3%81%AB%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>043 UIAlertViewを左寄せにする</h3>

<p><a href="https://camo.qiitausercontent.com/343ee1653a4b8ce75ff598b3f036e7db2ea56198/687474703a2f2f662e636c2e6c792f6974656d732f33573078307332783353327033763344315530542f416c657274566965774c656674315f72315f63312e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/343ee1653a4b8ce75ff598b3f036e7db2ea56198/687474703a2f2f662e636c2e6c792f6974656d732f33573078307332783353327033763344315530542f416c657274566965774c656674315f72315f63312e706e67" alt="AlertViewLeft1_r1_c1.png" data-canonical-src="http://f.cl.ly/items/3W0x0s2x3S2p3v3D1U0T/AlertViewLeft1_r1_c1.png"></a></p>

<h3>
<span id="044-uiview-サブクラスをxibファイルから生成する" class="fragment"></span><a href="#044-uiview-%E3%82%B5%E3%83%96%E3%82%AF%E3%83%A9%E3%82%B9%E3%82%92xib%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%8B%E3%82%89%E7%94%9F%E6%88%90%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>044 UIView サブクラスをxibファイルから生成する</h3>

<h3>
<span id="045-xibファイルのローカライズをinterface-builder上でできるようにする" class="fragment"></span><a href="#045-xib%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AE%E3%83%AD%E3%83%BC%E3%82%AB%E3%83%A9%E3%82%A4%E3%82%BA%E3%82%92interface-builder%E4%B8%8A%E3%81%A7%E3%81%A7%E3%81%8D%E3%82%8B%E3%82%88%E3%81%86%E3%81%AB%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>045 xibファイルのローカライズをInterface Builder上でできるようにする</h3>

<p><a href="https://camo.qiitausercontent.com/45090531b967148c68677913efbaea65db71c325/687474703a2f2f63646e2d616b2e662e73742d686174656e612e636f6d2f696d616765732f666f746f6c6966652f732f7368753232332f32303133303532372f32303133303532373033353335342e706e673f31333639353934343339" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/45090531b967148c68677913efbaea65db71c325/687474703a2f2f63646e2d616b2e662e73742d686174656e612e636f6d2f696d616765732f666f746f6c6966652f732f7368753232332f32303133303532372f32303133303532373033353335342e706e673f31333639353934343339" alt="" data-canonical-src="http://cdn-ak.f.st-hatena.com/images/fotolife/s/shu223/20130527/20130527035354.png?1369594439"></a></p>

<h3>
<span id="046-背景色にビルトインテクスチャを適用する" class="fragment"></span><a href="#046-%E8%83%8C%E6%99%AF%E8%89%B2%E3%81%AB%E3%83%93%E3%83%AB%E3%83%88%E3%82%A4%E3%83%B3%E3%83%86%E3%82%AF%E3%82%B9%E3%83%81%E3%83%A3%E3%82%92%E9%81%A9%E7%94%A8%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>046 背景色にビルトインテクスチャを適用する</h3>

<p><a href="https://camo.qiitausercontent.com/07968fd7b1a08a2ed1efed2364c03bf14c958c74/687474703a2f2f662e636c2e6c792f6974656d732f30713169326c316b3146306c3159336a326833612f42475061747465726e5f694f53365f5f72315f63315f72315f63312e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/07968fd7b1a08a2ed1efed2364c03bf14c958c74/687474703a2f2f662e636c2e6c792f6974656d732f30713169326c316b3146306c3159336a326833612f42475061747465726e5f694f53365f5f72315f63315f72315f63312e706e67" alt="" data-canonical-src="http://f.cl.ly/items/0q1i2l1k1F0l1Y3j2h3a/BGPattern_iOS6__r1_c1_r1_c1.png"></a></p>

<h3>
<span id="047-glkitを用いて描画処理を高速化する" class="fragment"></span><a href="#047-glkit%E3%82%92%E7%94%A8%E3%81%84%E3%81%A6%E6%8F%8F%E7%94%BB%E5%87%A6%E7%90%86%E3%82%92%E9%AB%98%E9%80%9F%E5%8C%96%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>047 GLKitを用いて描画処理を高速化する</h3>

<h3>
<span id="048-画面の解像度の種別を判定する" class="fragment"></span><a href="#048-%E7%94%BB%E9%9D%A2%E3%81%AE%E8%A7%A3%E5%83%8F%E5%BA%A6%E3%81%AE%E7%A8%AE%E5%88%A5%E3%82%92%E5%88%A4%E5%AE%9A%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>048 画面の解像度の種別を判定する</h3>

<h3>
<span id="049-core-plot-で折れ線グラフを描画する" class="fragment"></span><a href="#049-core-plot-%E3%81%A7%E6%8A%98%E3%82%8C%E7%B7%9A%E3%82%B0%E3%83%A9%E3%83%95%E3%82%92%E6%8F%8F%E7%94%BB%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>049 Core Plot で折れ線グラフを描画する</h3>

<p><a href="https://camo.qiitausercontent.com/1e64546f059a2489964a9bf9373f9a795e6c51d5/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f333138302f31313636633934632d633832652d633739662d356334392d3165363562323565373336622e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/1e64546f059a2489964a9bf9373f9a795e6c51d5/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f333138302f31313636633934632d633832652d633739662d356334392d3165363562323565373336622e706e67" alt="CorePlot1_3_r2_c2.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/3180/1166c94c-c82e-c79f-5c49-1e65b25e736b.png"></a></p>

<h2>
<span id="chapter5-テキスト" class="fragment"></span><a href="#chapter5-%E3%83%86%E3%82%AD%E3%82%B9%E3%83%88"><i class="fa fa-link"></i></a>Chapter5 テキスト</h2>

<h3>
<span id="050-自然言語のテキストを属性で区分する" class="fragment"></span><a href="#050-%E8%87%AA%E7%84%B6%E8%A8%80%E8%AA%9E%E3%81%AE%E3%83%86%E3%82%AD%E3%82%B9%E3%83%88%E3%82%92%E5%B1%9E%E6%80%A7%E3%81%A7%E5%8C%BA%E5%88%86%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>050 自然言語のテキストを属性で区分する</h3>

<p><a href="https://camo.qiitausercontent.com/df52cc83da8cf6c214860b3aa86511d9ace66b68/687474703a2f2f662e636c2e6c792f6974656d732f307732573041335a3071335a306532783043337a2f4c696e67756973746963546167676572305f72315f63312e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/df52cc83da8cf6c214860b3aa86511d9ace66b68/687474703a2f2f662e636c2e6c792f6974656d732f307732573041335a3071335a306532783043337a2f4c696e67756973746963546167676572305f72315f63312e706e67" alt="" data-canonical-src="http://f.cl.ly/items/0w2W0A3Z0q3Z0e2x0C3z/LinguisticTagger0_r1_c1.png"></a></p>

<h3>
<span id="051-正規表現を使う" class="fragment"></span><a href="#051-%E6%AD%A3%E8%A6%8F%E8%A1%A8%E7%8F%BE%E3%82%92%E4%BD%BF%E3%81%86"><i class="fa fa-link"></i></a>051 正規表現を使う</h3>

<h3>
<span id="052-uilabelでのテキスト表示をリッチにする" class="fragment"></span><a href="#052-uilabel%E3%81%A7%E3%81%AE%E3%83%86%E3%82%AD%E3%82%B9%E3%83%88%E8%A1%A8%E7%A4%BA%E3%82%92%E3%83%AA%E3%83%83%E3%83%81%E3%81%AB%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>052 UILabelでのテキスト表示をリッチにする</h3>

<h3>
<span id="053-uilabel--uitextview--uitextfieldのテキストをnsattributedstringで装飾する" class="fragment"></span><a href="#053-uilabel--uitextview--uitextfield%E3%81%AE%E3%83%86%E3%82%AD%E3%82%B9%E3%83%88%E3%82%92nsattributedstring%E3%81%A7%E8%A3%85%E9%A3%BE%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>053 UILabel ／ UITextView ／ UITextFieldのテキストをNSAttributedStringで装飾する</h3>

<p><a href="https://camo.qiitausercontent.com/1c12670907ca54b12c0154c1473c617c061f0cc3/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f333138302f64323966613832302d306134372d343564612d613664322d3836626137303565323335342e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/1c12670907ca54b12c0154c1473c617c061f0cc3/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f333138302f64323966613832302d306134372d343564612d613664322d3836626137303565323335342e706e67" alt="AttributedText1.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/3180/d29fa820-0a47-45da-a6d2-86ba705e2354.png"></a></p>

<h3>
<span id="054-uilabel-のテキストに効果をかける" class="fragment"></span><a href="#054-uilabel-%E3%81%AE%E3%83%86%E3%82%AD%E3%82%B9%E3%83%88%E3%81%AB%E5%8A%B9%E6%9E%9C%E3%82%92%E3%81%8B%E3%81%91%E3%82%8B"><i class="fa fa-link"></i></a>054 UILabel のテキストに効果をかける</h3>

<p><a href="https://camo.qiitausercontent.com/db86ed35ed6250f7aedbc985342e4c5522072ca2/687474703a2f2f662e636c2e6c792f6974656d732f314330433369324f31353044325a3371325631682f46584c6162656c345f72315f63312e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/db86ed35ed6250f7aedbc985342e4c5522072ca2/687474703a2f2f662e636c2e6c792f6974656d732f314330433369324f31353044325a3371325631682f46584c6162656c345f72315f63312e706e67" alt="" data-canonical-src="http://f.cl.ly/items/1C0C3i2O150D2Z3q2V1h/FXLabel4_r1_c1.png"></a></p>

<h3>
<span id="055-uilabel-の文字列を立体的に見せる" class="fragment"></span><a href="#055-uilabel-%E3%81%AE%E6%96%87%E5%AD%97%E5%88%97%E3%82%92%E7%AB%8B%E4%BD%93%E7%9A%84%E3%81%AB%E8%A6%8B%E3%81%9B%E3%82%8B"><i class="fa fa-link"></i></a>055 UILabel の文字列を立体的に見せる</h3>

<p><a href="https://camo.qiitausercontent.com/adb221ae7dd0fa540294e306545ffacb6a48b41b/687474703a2f2f63646e2d616b2e662e73742d686174656e612e636f6d2f696d616765732f666f746f6c6966652f732f7368753232332f32303133303532372f32303133303532373034303933392e706e673f31333639353935333835" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/adb221ae7dd0fa540294e306545ffacb6a48b41b/687474703a2f2f63646e2d616b2e662e73742d686174656e612e636f6d2f696d616765732f666f746f6c6966652f732f7368753232332f32303133303532372f32303133303532373034303933392e706e673f31333639353935333835" alt="" data-canonical-src="http://cdn-ak.f.st-hatena.com/images/fotolife/s/shu223/20130527/20130527040939.png?1369595385"></a></p>

<h3>
<span id="056-uiwebview-からアプリ内に入れたカスタムフォントを使う" class="fragment"></span><a href="#056-uiwebview-%E3%81%8B%E3%82%89%E3%82%A2%E3%83%97%E3%83%AA%E5%86%85%E3%81%AB%E5%85%A5%E3%82%8C%E3%81%9F%E3%82%AB%E3%82%B9%E3%82%BF%E3%83%A0%E3%83%95%E3%82%A9%E3%83%B3%E3%83%88%E3%82%92%E4%BD%BF%E3%81%86"><i class="fa fa-link"></i></a>056 UIWebView からアプリ内に入れたカスタムフォントを使う</h3>

<h3>
<span id="057-uitextview-やuibutton-のテキスト位置を調整する" class="fragment"></span><a href="#057-uitextview-%E3%82%84uibutton-%E3%81%AE%E3%83%86%E3%82%AD%E3%82%B9%E3%83%88%E4%BD%8D%E7%BD%AE%E3%82%92%E8%AA%BF%E6%95%B4%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>057 UITextView やUIButton のテキスト位置を調整する</h3>

<h3>
<span id="058-uilabel--uitextview-の高さを調整する" class="fragment"></span><a href="#058-uilabel--uitextview-%E3%81%AE%E9%AB%98%E3%81%95%E3%82%92%E8%AA%BF%E6%95%B4%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>058 UILabel ／ UITextView の高さを調整する</h3>

<h3>
<span id="059-英単語の単数形複数形変換をおこなう" class="fragment"></span><a href="#059-%E8%8B%B1%E5%8D%98%E8%AA%9E%E3%81%AE%E5%8D%98%E6%95%B0%E5%BD%A2%E8%A4%87%E6%95%B0%E5%BD%A2%E5%A4%89%E6%8F%9B%E3%82%92%E3%81%8A%E3%81%93%E3%81%AA%E3%81%86"><i class="fa fa-link"></i></a>059 英単語の単数形／複数形変換をおこなう</h3>

<h3>
<span id="060-uitextfield-への入力時にキーボードではなくピッカーを出す" class="fragment"></span><a href="#060-uitextfield-%E3%81%B8%E3%81%AE%E5%85%A5%E5%8A%9B%E6%99%82%E3%81%AB%E3%82%AD%E3%83%BC%E3%83%9C%E3%83%BC%E3%83%89%E3%81%A7%E3%81%AF%E3%81%AA%E3%81%8F%E3%83%94%E3%83%83%E3%82%AB%E3%83%BC%E3%82%92%E5%87%BA%E3%81%99"><i class="fa fa-link"></i></a>060 UITextField への入力時にキーボードではなくピッカーを出す</h3>

<p><a href="https://camo.qiitausercontent.com/5568ddd06fd2ff0e3e1ebe666c30ed6f499ba628/687474703a2f2f63646e2d616b2e662e73742d686174656e612e636f6d2f696d616765732f666f746f6c6966652f732f7368753232332f32303133303532372f32303133303532373033353832312e706e673f31333639353934373036" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/5568ddd06fd2ff0e3e1ebe666c30ed6f499ba628/687474703a2f2f63646e2d616b2e662e73742d686174656e612e636f6d2f696d616765732f666f746f6c6966652f732f7368753232332f32303133303532372f32303133303532373033353832312e706e673f31333639353934373036" alt="" data-canonical-src="http://cdn-ak.f.st-hatena.com/images/fotolife/s/shu223/20130527/20130527035821.png?1369594706"></a></p>

<h2>
<span id="chapter6-位置情報" class="fragment"></span><a href="#chapter6-%E4%BD%8D%E7%BD%AE%E6%83%85%E5%A0%B1"><i class="fa fa-link"></i></a>Chapter6 位置情報</h2>

<h3>
<span id="061-google-maps-sdk-for-ios-を使用する" class="fragment"></span><a href="#061-google-maps-sdk-for-ios-%E3%82%92%E4%BD%BF%E7%94%A8%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>061 Google Maps SDK for iOS を使用する</h3>

<p><a href="https://camo.qiitausercontent.com/1288e19de5ca2143c0bcb5a87feec87038a6e5ee/687474703a2f2f63646e2d616b2e662e73742d686174656e612e636f6d2f696d616765732f666f746f6c6966652f732f7368753232332f32303133303532372f32303133303532373033353630372e706e673f31333639353934353937" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/1288e19de5ca2143c0bcb5a87feec87038a6e5ee/687474703a2f2f63646e2d616b2e662e73742d686174656e612e636f6d2f696d616765732f666f746f6c6966652f732f7368753232332f32303133303532372f32303133303532373033353630372e706e673f31333639353934353937" alt="" data-canonical-src="http://cdn-ak.f.st-hatena.com/images/fotolife/s/shu223/20130527/20130527035607.png?1369594597"></a></p>

<h3>
<span id="062-mkannotationview-のコールアウト吹き出しをカスタマイズする" class="fragment"></span><a href="#062-mkannotationview-%E3%81%AE%E3%82%B3%E3%83%BC%E3%83%AB%E3%82%A2%E3%82%A6%E3%83%88%E5%90%B9%E3%81%8D%E5%87%BA%E3%81%97%E3%82%92%E3%82%AB%E3%82%B9%E3%82%BF%E3%83%9E%E3%82%A4%E3%82%BA%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>062 MKAnnotationView のコールアウト（吹き出し）をカスタマイズする</h3>

<p><a href="https://camo.qiitausercontent.com/72cc92d741f7508504eae8e74c279be0609f38e6/687474703a2f2f662e636c2e6c792f6974656d732f336930703267336e3349326d31673037306630442f437573746f6d43616c6c6f75745f72315f63312e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/72cc92d741f7508504eae8e74c279be0609f38e6/687474703a2f2f662e636c2e6c792f6974656d732f336930703267336e3349326d31673037306630442f437573746f6d43616c6c6f75745f72315f63312e706e67" alt="" data-canonical-src="http://f.cl.ly/items/3i0p2g3n3I2m1g070f0D/CustomCallout_r1_c1.png"></a></p>

<h3>
<span id="063-mkmapview-のピンをタップせずにコールアウトを出す" class="fragment"></span><a href="#063-mkmapview-%E3%81%AE%E3%83%94%E3%83%B3%E3%82%92%E3%82%BF%E3%83%83%E3%83%97%E3%81%9B%E3%81%9A%E3%81%AB%E3%82%B3%E3%83%BC%E3%83%AB%E3%82%A2%E3%82%A6%E3%83%88%E3%82%92%E5%87%BA%E3%81%99"><i class="fa fa-link"></i></a>063 MKMapView のピンをタップせずにコールアウトを出す</h3>

<h3>
<span id="064-指定方向に指定距離離れた場所の緯度経度を計算する" class="fragment"></span><a href="#064-%E6%8C%87%E5%AE%9A%E6%96%B9%E5%90%91%E3%81%AB%E6%8C%87%E5%AE%9A%E8%B7%9D%E9%9B%A2%E9%9B%A2%E3%82%8C%E3%81%9F%E5%A0%B4%E6%89%80%E3%81%AE%E7%B7%AF%E5%BA%A6%E7%B5%8C%E5%BA%A6%E3%82%92%E8%A8%88%E7%AE%97%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>064 指定方向に指定距離離れた場所の緯度経度を計算する</h3>

<p><a href="https://camo.qiitausercontent.com/1348c3fc185f2cd3b49781397f0511ce0efc8263/687474703a2f2f662e636c2e6c792f6974656d732f33723237304b31583332306d33703079326631302f434c4c6f636174696f6e43616c635f72315f63312e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/1348c3fc185f2cd3b49781397f0511ce0efc8263/687474703a2f2f662e636c2e6c792f6974656d732f33723237304b31583332306d33703079326631302f434c4c6f636174696f6e43616c635f72315f63312e706e67" alt="CLLocationCalc_r1_c1.png" data-canonical-src="http://f.cl.ly/items/3r270K1X320m3p0y2f10/CLLocationCalc_r1_c1.png"></a></p>

<h2>
<span id="chapter7-web-サービス連携" class="fragment"></span><a href="#chapter7-web-%E3%82%B5%E3%83%BC%E3%83%93%E3%82%B9%E9%80%A3%E6%90%BA"><i class="fa fa-link"></i></a>Chapter7 WEB サービス連携</h2>

<h3>
<span id="065-uiactivityviewcontroller-の連携アプリを追加する" class="fragment"></span><a href="#065-uiactivityviewcontroller-%E3%81%AE%E9%80%A3%E6%90%BA%E3%82%A2%E3%83%97%E3%83%AA%E3%82%92%E8%BF%BD%E5%8A%A0%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>065 UIActivityViewController の連携アプリを追加する</h3>

<p><a href="https://camo.qiitausercontent.com/1436c47d5f7cd678b629591a13bd5b69d8cb24d9/687474703a2f2f63646e2d616b2e662e73742d686174656e612e636f6d2f696d616765732f666f746f6c6966652f732f7368753232332f32303133303532372f32303133303532373034313034362e706e673f31333639353935343630" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/1436c47d5f7cd678b629591a13bd5b69d8cb24d9/687474703a2f2f63646e2d616b2e662e73742d686174656e612e636f6d2f696d616765732f666f746f6c6966652f732f7368753232332f32303133303532372f32303133303532373034313034362e706e673f31333639353935343630" alt="" data-canonical-src="http://cdn-ak.f.st-hatena.com/images/fotolife/s/shu223/20130527/20130527041046.png?1369595460"></a></p>

<h3>
<span id="066-カスタムuiacitivityを実装する" class="fragment"></span><a href="#066-%E3%82%AB%E3%82%B9%E3%82%BF%E3%83%A0uiacitivity%E3%82%92%E5%AE%9F%E8%A3%85%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>066 カスタムUIAcitivityを実装する</h3>

<p><a href="https://camo.qiitausercontent.com/ef24bd0c06aeeb316198282089921121cbb1fd37/687474703a2f2f662e636c2e6c792f6974656d732f3365336c3072314f304e316e33763044314330482f437573746f6d55494163746976697479325f72315f63312e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/ef24bd0c06aeeb316198282089921121cbb1fd37/687474703a2f2f662e636c2e6c792f6974656d732f3365336c3072314f304e316e33763044314330482f437573746f6d55494163746976697479325f72315f63312e706e67" alt="" data-canonical-src="http://f.cl.ly/items/3e3l0r1O0N1n3v0D1C0H/CustomUIActivity2_r1_c1.png"></a></p>

<h3>
<span id="067-uiwebviewで表示中のhtmlコンテンツを取得する" class="fragment"></span><a href="#067-uiwebview%E3%81%A7%E8%A1%A8%E7%A4%BA%E4%B8%AD%E3%81%AEhtml%E3%82%B3%E3%83%B3%E3%83%86%E3%83%B3%E3%83%84%E3%82%92%E5%8F%96%E5%BE%97%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>067 UIWebViewで表示中のHTMLコンテンツを取得する</h3>

<h3>
<span id="068-app-store-のapi-からアプリの最新バージョンを取得する" class="fragment"></span><a href="#068-app-store-%E3%81%AEapi-%E3%81%8B%E3%82%89%E3%82%A2%E3%83%97%E3%83%AA%E3%81%AE%E6%9C%80%E6%96%B0%E3%83%90%E3%83%BC%E3%82%B8%E3%83%A7%E3%83%B3%E3%82%92%E5%8F%96%E5%BE%97%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>068 App Store のAPI からアプリの最新バージョンを取得する</h3>

<h3>
<span id="069-ユーザーにapp-store-のレビュー投稿を促す" class="fragment"></span><a href="#069-%E3%83%A6%E3%83%BC%E3%82%B6%E3%83%BC%E3%81%ABapp-store-%E3%81%AE%E3%83%AC%E3%83%93%E3%83%A5%E3%83%BC%E6%8A%95%E7%A8%BF%E3%82%92%E4%BF%83%E3%81%99"><i class="fa fa-link"></i></a>069 ユーザーにApp Store のレビュー投稿を促す</h3>

<p><a href="https://camo.qiitausercontent.com/be4768b3f6676b8d6d863f375f373793e2c865ac/687474703a2f2f63646e2d616b2e662e73742d686174656e612e636f6d2f696d616765732f666f746f6c6966652f732f7368753232332f32303133303532372f32303133303532373033353133372e706e673f31333639353934333033" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/be4768b3f6676b8d6d863f375f373793e2c865ac/687474703a2f2f63646e2d616b2e662e73742d686174656e612e636f6d2f696d616765732f666f746f6c6966652f732f7368753232332f32303133303532372f32303133303532373033353133372e706e673f31333639353934333033" alt="" data-canonical-src="http://cdn-ak.f.st-hatena.com/images/fotolife/s/shu223/20130527/20130527035137.png?1369594303"></a></p>

<h2>
<span id="chapter8-デバッグ" class="fragment"></span><a href="#chapter8-%E3%83%87%E3%83%90%E3%83%83%E3%82%B0"><i class="fa fa-link"></i></a>Chapter8 デバッグ</h2>

<h3>
<span id="070-instrumentsを使わずに空きメモリ使用メモリ-cpu-負荷を取得する" class="fragment"></span><a href="#070-instruments%E3%82%92%E4%BD%BF%E3%82%8F%E3%81%9A%E3%81%AB%E7%A9%BA%E3%81%8D%E3%83%A1%E3%83%A2%E3%83%AA%E4%BD%BF%E7%94%A8%E3%83%A1%E3%83%A2%E3%83%AA-cpu-%E8%B2%A0%E8%8D%B7%E3%82%92%E5%8F%96%E5%BE%97%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>070 Instrumentsを使わずに空きメモリ／使用メモリ／ CPU 負荷を取得する</h3>

<h3>
<span id="071-使用メモリ量やcpu-負荷をリアルタイムにアプリui-上に表示する" class="fragment"></span><a href="#071-%E4%BD%BF%E7%94%A8%E3%83%A1%E3%83%A2%E3%83%AA%E9%87%8F%E3%82%84cpu-%E8%B2%A0%E8%8D%B7%E3%82%92%E3%83%AA%E3%82%A2%E3%83%AB%E3%82%BF%E3%82%A4%E3%83%A0%E3%81%AB%E3%82%A2%E3%83%97%E3%83%AAui-%E4%B8%8A%E3%81%AB%E8%A1%A8%E7%A4%BA%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>071 使用メモリ量やCPU 負荷をリアルタイムにアプリUI 上に表示する</h3>

<p><a href="https://camo.qiitausercontent.com/d037f138c74fe24e1f2d3fbc7859a0e2a1ee151c/687474703a2f2f63646e2d616b2e662e73742d686174656e612e636f6d2f696d616765732f666f746f6c6966652f732f7368753232332f32303133303532372f32303133303532373034303831342e706e673f31333639353935333030" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/d037f138c74fe24e1f2d3fbc7859a0e2a1ee151c/687474703a2f2f63646e2d616b2e662e73742d686174656e612e636f6d2f696d616765732f666f746f6c6966652f732f7368753232332f32303133303532372f32303133303532373034303831342e706e673f31333639353935333030" alt="" data-canonical-src="http://cdn-ak.f.st-hatena.com/images/fotolife/s/shu223/20130527/20130527040814.png?1369595300"></a></p>

<h3>
<span id="072-例外発生時にスタックトレースを出力する" class="fragment"></span><a href="#072-%E4%BE%8B%E5%A4%96%E7%99%BA%E7%94%9F%E6%99%82%E3%81%AB%E3%82%B9%E3%82%BF%E3%83%83%E3%82%AF%E3%83%88%E3%83%AC%E3%83%BC%E3%82%B9%E3%82%92%E5%87%BA%E5%8A%9B%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>072 例外発生時にスタックトレースを出力する</h3>

<h3>
<span id="073-クラス名メソッド名コード内の何行目かをログ出力する" class="fragment"></span><a href="#073-%E3%82%AF%E3%83%A9%E3%82%B9%E5%90%8D%E3%83%A1%E3%82%BD%E3%83%83%E3%83%89%E5%90%8D%E3%82%B3%E3%83%BC%E3%83%89%E5%86%85%E3%81%AE%E4%BD%95%E8%A1%8C%E7%9B%AE%E3%81%8B%E3%82%92%E3%83%AD%E3%82%B0%E5%87%BA%E5%8A%9B%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>073 クラス名／メソッド名／コード内の何行目かをログ出力する</h3>

<p><a href="https://camo.qiitausercontent.com/4c87277fe2e861b988692b0a4280e3d3d7a07722/687474703a2f2f662e636c2e6c792f6974656d732f326b3054307233503266343232633248323032612f44656275674c6f674d6163726f5f72315f63312e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/4c87277fe2e861b988692b0a4280e3d3d7a07722/687474703a2f2f662e636c2e6c792f6974656d732f326b3054307233503266343232633248323032612f44656275674c6f674d6163726f5f72315f63312e706e67" alt="" data-canonical-src="http://f.cl.ly/items/2k0T0r3P2f422c2H202a/DebugLogMacro_r1_c1.png"></a></p>

<h3>
<span id="074-静的アナライザによる解析を特定のファイルで無効にする" class="fragment"></span><a href="#074-%E9%9D%99%E7%9A%84%E3%82%A2%E3%83%8A%E3%83%A9%E3%82%A4%E3%82%B6%E3%81%AB%E3%82%88%E3%82%8B%E8%A7%A3%E6%9E%90%E3%82%92%E7%89%B9%E5%AE%9A%E3%81%AE%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%A7%E7%84%A1%E5%8A%B9%E3%81%AB%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>074 静的アナライザによる解析を特定のファイルで無効にする</h3>

<h3>
<span id="075-アプリ内でログを閲覧する" class="fragment"></span><a href="#075-%E3%82%A2%E3%83%97%E3%83%AA%E5%86%85%E3%81%A7%E3%83%AD%E3%82%B0%E3%82%92%E9%96%B2%E8%A6%A7%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>075 アプリ内でログを閲覧する</h3>

<p><a href="https://camo.qiitausercontent.com/43f1c76e338d4c132f51f29981d7b7bf5976f609/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f333138302f39373939386131332d383062632d376261312d353838362d6631323731373735613831352e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/43f1c76e338d4c132f51f29981d7b7bf5976f609/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f333138302f39373939386131332d383062632d376261312d353838362d6631323731373735613831352e706e67" alt="ConsoleSample_r1_c1_r1_c1.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/3180/97998a13-80bc-7ba1-5886-f1271775a815.png"></a></p>

<h2>
<span id="chapter9-開発ツール" class="fragment"></span><a href="#chapter9-%E9%96%8B%E7%99%BA%E3%83%84%E3%83%BC%E3%83%AB"><i class="fa fa-link"></i></a>Chapter9 開発ツール</h2>

<h3>
<span id="076-クラスの依存関係を図示する" class="fragment"></span><a href="#076-%E3%82%AF%E3%83%A9%E3%82%B9%E3%81%AE%E4%BE%9D%E5%AD%98%E9%96%A2%E4%BF%82%E3%82%92%E5%9B%B3%E7%A4%BA%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>076 クラスの依存関係を図示する</h3>

<p><a href="https://camo.qiitausercontent.com/392f864ace97f946d5ec7917fbb284666e825f48/687474703a2f2f662e636c2e6c792f6974656d732f336134303277326e326e334431713153315632622f44657053616d706c652e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/392f864ace97f946d5ec7917fbb284666e825f48/687474703a2f2f662e636c2e6c792f6974656d732f336134303277326e326e334431713153315632622f44657053616d706c652e706e67" alt="" data-canonical-src="http://f.cl.ly/items/3a402w2n2n3D1q1S1V2b/DepSample.png"></a></p>

<h3>
<span id="077-ドキュメントを自動生成する" class="fragment"></span><a href="#077-%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%82%92%E8%87%AA%E5%8B%95%E7%94%9F%E6%88%90%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>077 ドキュメントを自動生成する</h3>

<p><a href="https://camo.qiitausercontent.com/95f6b838855ca59cb4675885498f3c37538ae10c/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f333138302f31373536623963352d323561342d303834302d613031612d3863653461646666313265382e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/95f6b838855ca59cb4675885498f3c37538ae10c/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f333138302f31373536623963352d323561342d303834302d613031612d3863653461646666313265382e706e67" alt="appledoc1_r1_c1.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/3180/1756b9c5-25a4-0840-a01a-8ce4adff12e8.png"></a></p>

<h3>
<span id="078-csvファイルからスクリプトでplistを生成する" class="fragment"></span><a href="#078-csv%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%8B%E3%82%89%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%97%E3%83%88%E3%81%A7plist%E3%82%92%E7%94%9F%E6%88%90%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>078 CSVファイルからスクリプトでplistを生成する</h3>

<h3>
<span id="079-otoolでアプリが使っているフレームワークの一覧を取得する" class="fragment"></span><a href="#079-otool%E3%81%A7%E3%82%A2%E3%83%97%E3%83%AA%E3%81%8C%E4%BD%BF%E3%81%A3%E3%81%A6%E3%81%84%E3%82%8B%E3%83%95%E3%83%AC%E3%83%BC%E3%83%A0%E3%83%AF%E3%83%BC%E3%82%AF%E3%81%AE%E4%B8%80%E8%A6%A7%E3%82%92%E5%8F%96%E5%BE%97%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>079 otoolでアプリが使っているフレームワークの一覧を取得する</h3>

<h3>
<span id="080-apple-の開発用ツールをxcodeメニューに追加する" class="fragment"></span><a href="#080-apple-%E3%81%AE%E9%96%8B%E7%99%BA%E7%94%A8%E3%83%84%E3%83%BC%E3%83%AB%E3%82%92xcode%E3%83%A1%E3%83%8B%E3%83%A5%E3%83%BC%E3%81%AB%E8%BF%BD%E5%8A%A0%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>080 Apple の開発用ツールをXcodeメニューに追加する</h3>

<h2>
<span id="chapter10-xcode" class="fragment"></span><a href="#chapter10-xcode"><i class="fa fa-link"></i></a>Chapter10 Xcode</h2>

<h3>
<span id="081-xcode-のファイルテンプレートを自作する" class="fragment"></span><a href="#081-xcode-%E3%81%AE%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%83%86%E3%83%B3%E3%83%97%E3%83%AC%E3%83%BC%E3%83%88%E3%82%92%E8%87%AA%E4%BD%9C%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>081 Xcode のファイルテンプレートを自作する</h3>

<h3>
<span id="082-xcode-のfunction-menu-にコメントを表示する" class="fragment"></span><a href="#082-xcode-%E3%81%AEfunction-menu-%E3%81%AB%E3%82%B3%E3%83%A1%E3%83%B3%E3%83%88%E3%82%92%E8%A1%A8%E7%A4%BA%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>082 Xcode のFunction Menu にコメントを表示する</h3>

<h3>
<span id="083-xcode-のrun-scriptを特定のconfigurationに対してだけ実行する" class="fragment"></span><a href="#083-xcode-%E3%81%AErun-script%E3%82%92%E7%89%B9%E5%AE%9A%E3%81%AEconfiguration%E3%81%AB%E5%AF%BE%E3%81%97%E3%81%A6%E3%81%A0%E3%81%91%E5%AE%9F%E8%A1%8C%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>083 Xcode のRun Scriptを特定のConfigurationに対してだけ実行する</h3>

<h3>
<span id="084-xcodeマクロsrcrootやbuild_dir等の置換内容の一覧を調べる" class="fragment"></span><a href="#084-xcode%E3%83%9E%E3%82%AF%E3%83%ADsrcroot%E3%82%84build_dir%E7%AD%89%E3%81%AE%E7%BD%AE%E6%8F%9B%E5%86%85%E5%AE%B9%E3%81%AE%E4%B8%80%E8%A6%A7%E3%82%92%E8%AA%BF%E3%81%B9%E3%82%8B"><i class="fa fa-link"></i></a>084 Xcodeマクロ($(SRCROOT)や$(BUILD_DIR)等)の置換内容の一覧を調べる</h3>

<h3>
<span id="085-xcode-4-のcode-snippet-libraryにコードスニペットを追加する" class="fragment"></span><a href="#085-xcode-4-%E3%81%AEcode-snippet-library%E3%81%AB%E3%82%B3%E3%83%BC%E3%83%89%E3%82%B9%E3%83%8B%E3%83%9A%E3%83%83%E3%83%88%E3%82%92%E8%BF%BD%E5%8A%A0%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>085 Xcode 4 のCode Snippet Libraryにコードスニペットを追加する</h3>

<p><a href="https://camo.qiitausercontent.com/444e36e8d7cd5cad76d04d5b0eb962ab3fa34da0/687474703a2f2f63646e2d616b2e662e73742d686174656e612e636f6d2f696d616765732f666f746f6c6966652f732f7368753232332f32303133303532372f32303133303532373034303631342e706e673f31333639353935313833" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/444e36e8d7cd5cad76d04d5b0eb962ab3fa34da0/687474703a2f2f63646e2d616b2e662e73742d686174656e612e636f6d2f696d616765732f666f746f6c6966652f732f7368753232332f32303133303532372f32303133303532373034303631342e706e673f31333639353935313833" alt="" data-canonical-src="http://cdn-ak.f.st-hatena.com/images/fotolife/s/shu223/20130527/20130527040614.png?1369595183"></a></p>

<h3>
<span id="086-arc-の有効無効をファイルごとに設定する" class="fragment"></span><a href="#086-arc-%E3%81%AE%E6%9C%89%E5%8A%B9%E7%84%A1%E5%8A%B9%E3%82%92%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%94%E3%81%A8%E3%81%AB%E8%A8%AD%E5%AE%9A%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>086 ARC の有効／無効をファイルごとに設定する</h3>

<h3>
<span id="087-1つのプロジェクトで複数のbundle-identifierを使い分ける" class="fragment"></span><a href="#087-1%E3%81%A4%E3%81%AE%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%A7%E8%A4%87%E6%95%B0%E3%81%AEbundle-identifier%E3%82%92%E4%BD%BF%E3%81%84%E5%88%86%E3%81%91%E3%82%8B"><i class="fa fa-link"></i></a>087 1つのプロジェクトで複数のBundle identifierを使い分ける</h3>

<h3>
<span id="088-カラーテーマファイルを用いてxcodeのエディタのカラーをカスタマイズする" class="fragment"></span><a href="#088-%E3%82%AB%E3%83%A9%E3%83%BC%E3%83%86%E3%83%BC%E3%83%9E%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%82%92%E7%94%A8%E3%81%84%E3%81%A6xcode%E3%81%AE%E3%82%A8%E3%83%87%E3%82%A3%E3%82%BF%E3%81%AE%E3%82%AB%E3%83%A9%E3%83%BC%E3%82%92%E3%82%AB%E3%82%B9%E3%82%BF%E3%83%9E%E3%82%A4%E3%82%BA%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>088 カラーテーマファイルを用いてXcodeのエディタのカラーをカスタマイズする</h3>

<h2>
<span id="chapter11-その他" class="fragment"></span><a href="#chapter11-%E3%81%9D%E3%81%AE%E4%BB%96"><i class="fa fa-link"></i></a>Chapter11 その他</h2>

<h3>
<span id="089-デバイスにインストールされているアプリ一覧を取得する方法その1" class="fragment"></span><a href="#089-%E3%83%87%E3%83%90%E3%82%A4%E3%82%B9%E3%81%AB%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB%E3%81%95%E3%82%8C%E3%81%A6%E3%81%84%E3%82%8B%E3%82%A2%E3%83%97%E3%83%AA%E4%B8%80%E8%A6%A7%E3%82%92%E5%8F%96%E5%BE%97%E3%81%99%E3%82%8B%E6%96%B9%E6%B3%95%E3%81%9D%E3%81%AE1"><i class="fa fa-link"></i></a>089 デバイスにインストールされているアプリ一覧を取得する（方法その1）</h3>

<h3>
<span id="090-デバイスにインストールされているアプリ一覧を取得する方法その2" class="fragment"></span><a href="#090-%E3%83%87%E3%83%90%E3%82%A4%E3%82%B9%E3%81%AB%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB%E3%81%95%E3%82%8C%E3%81%A6%E3%81%84%E3%82%8B%E3%82%A2%E3%83%97%E3%83%AA%E4%B8%80%E8%A6%A7%E3%82%92%E5%8F%96%E5%BE%97%E3%81%99%E3%82%8B%E6%96%B9%E6%B3%95%E3%81%9D%E3%81%AE2"><i class="fa fa-link"></i></a>090 デバイスにインストールされているアプリ一覧を取得する（方法その2）</h3>

<h3>
<span id="091-ipa-ファイル生成を自動化する" class="fragment"></span><a href="#091-ipa-%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E7%94%9F%E6%88%90%E3%82%92%E8%87%AA%E5%8B%95%E5%8C%96%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>091 .ipa ファイル生成を自動化する</h3>

<h3>
<span id="092-1行でiosバージョンを判定する" class="fragment"></span><a href="#092-1%E8%A1%8C%E3%81%A7ios%E3%83%90%E3%83%BC%E3%82%B8%E3%83%A7%E3%83%B3%E3%82%92%E5%88%A4%E5%AE%9A%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>092 1行でiOSバージョンを判定する</h3>

<h3>
<span id="093-zipファイルを解凍する" class="fragment"></span><a href="#093-zip%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%82%92%E8%A7%A3%E5%87%8D%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>093 zipファイルを解凍する</h3>

<h3>
<span id="094-csvファイルを読み込む" class="fragment"></span><a href="#094-csv%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%82%92%E8%AA%AD%E3%81%BF%E8%BE%BC%E3%82%80"><i class="fa fa-link"></i></a>094 CSVファイルを読み込む</h3>

<h3>
<span id="095-通知名の有無をチェックする" class="fragment"></span><a href="#095-%E9%80%9A%E7%9F%A5%E5%90%8D%E3%81%AE%E6%9C%89%E7%84%A1%E3%82%92%E3%83%81%E3%82%A7%E3%83%83%E3%82%AF%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>095 通知名の有無をチェックする</h3>

<h3>
<span id="096-nsuserdefaults-の内容を一括消去する" class="fragment"></span><a href="#096-nsuserdefaults-%E3%81%AE%E5%86%85%E5%AE%B9%E3%82%92%E4%B8%80%E6%8B%AC%E6%B6%88%E5%8E%BB%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>096 NSUserDefaults の内容を一括消去する</h3>

<h3>
<span id="097-構造体をnsdictionary-やnsarray-に格納する" class="fragment"></span><a href="#097-%E6%A7%8B%E9%80%A0%E4%BD%93%E3%82%92nsdictionary-%E3%82%84nsarray-%E3%81%AB%E6%A0%BC%E7%B4%8D%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>097 構造体をNSDictionary やNSArray に格納する</h3>

<h3>
<span id="098-オブジェクトが持つプロパティの型と名前の一覧を取得する" class="fragment"></span><a href="#098-%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%8C%E6%8C%81%E3%81%A4%E3%83%97%E3%83%AD%E3%83%91%E3%83%86%E3%82%A3%E3%81%AE%E5%9E%8B%E3%81%A8%E5%90%8D%E5%89%8D%E3%81%AE%E4%B8%80%E8%A6%A7%E3%82%92%E5%8F%96%E5%BE%97%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>098 オブジェクトが持つプロパティの型と名前の一覧を取得する</h3>

<h3>
<span id="099-浮動小数点数の乱数を生成する" class="fragment"></span><a href="#099-%E6%B5%AE%E5%8B%95%E5%B0%8F%E6%95%B0%E7%82%B9%E6%95%B0%E3%81%AE%E4%B9%B1%E6%95%B0%E3%82%92%E7%94%9F%E6%88%90%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>099 浮動小数点数の乱数を生成する</h3>

<h3>
<span id="100-gcd-を用いてバックグラウンドで処理を遅延実行する" class="fragment"></span><a href="#100-gcd-%E3%82%92%E7%94%A8%E3%81%84%E3%81%A6%E3%83%90%E3%83%83%E3%82%AF%E3%82%B0%E3%83%A9%E3%82%A6%E3%83%B3%E3%83%89%E3%81%A7%E5%87%A6%E7%90%86%E3%82%92%E9%81%85%E5%BB%B6%E5%AE%9F%E8%A1%8C%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>100 GCD を用いてバックグラウンドで処理を遅延実行する</h3>

<h2>
<span id="補足" class="fragment"></span><a href="#%E8%A3%9C%E8%B6%B3"><i class="fa fa-link"></i></a>補足</h2>

<ul>
<li>
<strong>ほぼすべてのレシピにサンプルコード</strong>がついています。</li>
<li>iOS6対応</li>
<li>電子書籍版は、企画発生当初よりお願いしているのですが、いろいろとハードルがあるらしく、まだ<strong>今のところ予定がありません</strong>。。</li>
</ul>

<h2>
<span id="ご購入" class="fragment"></span><a href="#%E3%81%94%E8%B3%BC%E5%85%A5"><i class="fa fa-link"></i></a>ご購入</h2>

<ul>
<li><a href="http://www.amazon.co.jp/exec/obidos/ASIN/4798038180/22301-22/ref=nosim/" rel="nofollow noopener" target="_blank">Amazon</a></li>
<li><a href="https://takestock.jp/book/4798038180/search/" rel="nofollow noopener" target="_blank">近隣のリアル店舗における在庫の有無を調べる</a></li>
</ul>

<h2>
<span id="こちらもどうぞ" class="fragment"></span><a href="#%E3%81%93%E3%81%A1%E3%82%89%E3%82%82%E3%81%A9%E3%81%86%E3%81%9E"><i class="fa fa-link"></i></a>こちらもどうぞ</h2>

<p><a href="http://d.hatena.ne.jp/shu223/20130528/1369714635" rel="nofollow noopener" target="_blank">『iOSアプリ開発 達人のレシピ100』という本を書きました</a></p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>shu223さんの<br />16位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>114</kbd>
		<a target="_blank" href="https://qiita.com/shu223/items/3868894458832d4cc8e1">Method Swizzling をうまく使っている実用例</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2012-12-07 09:46:56</center>
	</td>
	<td style="width:200px;">
		@shu223<br />(Freelancer 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/3180/profile-images/1473682733">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Objective-C]</b> <b>[iPhone]</b> <b>[AdventCalendar]</b> <b>[iOS]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>Method Swizzlingは、<strong>既存のメソッドの実装を、自前の実装に差し替える</strong>ための手法です。</p>

<p>・・・ということを知ってはいても、どういうときに使うと便利なのかイマイチわかってなかったので、Method Swizzlingをうまく使った実用例を2つほど探してきました。</p>

<h2>
<span id="実用例その1既存ソースコードに手を入れずに機能追加" class="fragment"></span><a href="#%E5%AE%9F%E7%94%A8%E4%BE%8B%E3%81%9D%E3%81%AE1%E6%97%A2%E5%AD%98%E3%82%BD%E3%83%BC%E3%82%B9%E3%82%B3%E3%83%BC%E3%83%89%E3%81%AB%E6%89%8B%E3%82%92%E5%85%A5%E3%82%8C%E3%81%9A%E3%81%AB%E6%A9%9F%E8%83%BD%E8%BF%BD%E5%8A%A0"><i class="fa fa-link"></i></a>実用例その1：既存ソースコードに手を入れずに機能追加</h2>

<h3>
<span id="xib-ファイルのローカライズを-ib-上でできるようにする-autonibl10n" class="fragment"></span><a href="#xib-%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AE%E3%83%AD%E3%83%BC%E3%82%AB%E3%83%A9%E3%82%A4%E3%82%BA%E3%82%92-ib-%E4%B8%8A%E3%81%A7%E3%81%A7%E3%81%8D%E3%82%8B%E3%82%88%E3%81%86%E3%81%AB%E3%81%99%E3%82%8B-autonibl10n"><i class="fa fa-link"></i></a>xib ファイルのローカライズを IB 上でできるようにする AutoNibL10n</h3>

<p>通常、xibで作成したUIをローカライズする場合、</p>

<ul>
<li>xibファイルを言語ごとに用意する</li>
<li>アウトレットを定義してプログラム側からローカライズした文言をセットする</li>
</ul>

<p>といった面倒な作業が必要でしたが、<a href="https://github.com/AliSoftware/AutoNibL10n" rel="nofollow noopener" target="_blank">AutoNibL10n</a> を使用すると、<strong>xibファイルを IB から直接多言語対応</strong>できるようになります。</p>

<p>たとえば、RootViewController.xibというファイルがあり、その中のUILabelオブジェクトを多言語化したい場合、直接 IB から UILabel のtextプロパティに "mytext" を指定すれば、Localizable.strings に"mytext"というキーで定義された各言語の文字列が挿入されるようになります。</p>

<h3>
<span id="autonibl10n-における-method-swizzling" class="fragment"></span><a href="#autonibl10n-%E3%81%AB%E3%81%8A%E3%81%91%E3%82%8B-method-swizzling"><i class="fa fa-link"></i></a>AutoNibL10n における Method Swizzling</h3>

<p>この AutoNibL10n、<strong>使用するために新たにコードを書く必要は一切なく、ヘッダをインポートする必要すらありません。</strong></p>

<p>どうやっているかというと、Method Swizzling を利用して、<code>load</code> メソッドがコールされるタイミングで（＝メモリにアプリケーションがロードされるタイミングで） NSObject の <code>awakeFromNib</code> メソッドを自前の <code>localizeNibObject</code> メソッドに入れ替えることで実現しています。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>+(void)load {
    Method localizeNibObject = class_getInstanceMethod([NSObject class], @selector(localizeNibObject));
    Method awakeFromNib = class_getInstanceMethod([NSObject class], @selector(awakeFromNib));
    method_exchangeImplementations(awakeFromNib, localizeNibObject);
}
</pre></div></div>

<p>awakeFromNib の差し替え後のメソッド <code>localizeNibObject</code> の実装はこんな感じです。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>-(void)localizeNibObject {
    LocalizeIfClass(UIBarButtonItem);
    else LocalizeIfClass(UIBarItem);
    else LocalizeIfClass(UIButton);
    else LocalizeIfClass(UILabel);
    else LocalizeIfClass(UINavigationItem);
    else LocalizeIfClass(UISearchBar);
    else LocalizeIfClass(UISegmentedControl);
    else LocalizeIfClass(UITextField);
    else LocalizeIfClass(UITextView);
    else LocalizeIfClass(UIViewController);

    if (self.isAccessibilityElement == YES)
    {
        self.accessibilityLabel = localizedString(self.accessibilityLabel);
        self.accessibilityHint = localizedString(self.accessibilityHint);
    }

    [self localizeNibObject]; // actually calls awakeFromNib as we did some method swizzling
}
</pre></div></div>

<p>この中でコールされている <code>localizedString メソッド</code>で、NSBundle の <code>localizedStringForKey:value:table:</code> メソッドを用いて Localizable.strings に定義されたローカライズ文字列を取得しています。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>return [[NSBundle mainBundle] localizedStringForKey:aString value:nil table:nil];
</pre></div></div>

<h2>
<span id="実用例その2iosバージョンの違いを吸収する" class="fragment"></span><a href="#%E5%AE%9F%E7%94%A8%E4%BE%8B%E3%81%9D%E3%81%AE2ios%E3%83%90%E3%83%BC%E3%82%B8%E3%83%A7%E3%83%B3%E3%81%AE%E9%81%95%E3%81%84%E3%82%92%E5%90%B8%E5%8F%8E%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>実用例その2：iOSバージョンの違いを吸収する</h2>

<h3>
<span id="uirefreshcontrol-を-ios5-でも使えるようにする-isrefreshcontrol" class="fragment"></span><a href="#uirefreshcontrol-%E3%82%92-ios5-%E3%81%A7%E3%82%82%E4%BD%BF%E3%81%88%E3%82%8B%E3%82%88%E3%81%86%E3%81%AB%E3%81%99%E3%82%8B-isrefreshcontrol"><i class="fa fa-link"></i></a>UIRefreshControl を iOS5 でも使えるようにする ISRefreshControl</h3>

<p><a href="https://github.com/ishkawa/ISRefreshControl" rel="nofollow noopener" target="_blank">ISRefreshControl</a> は、<strong>iOS6で導入された UIRefreshControl を iOS5 でも使えるようにするライブラリ</strong>です。</p>

<p>UIRefreshControl と同じ API なので、<b>導入する側は UIRefreshControl と同じように実装するだけ</b>。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>self.refreshControl = (id)[[ISRefreshControl alloc] init];
[self.refreshControl addTarget:self
                        action:@selector(refresh)
              forControlEvents:UIControlEventValueChanged];
</pre></div></div>

<p>これだけで、<strong>iOS6 で動作させると UIKit の UIRefreshControl が呼ばれ、iOS5 で動作させると ISRefreshControl （UIRefreshControl と同じ見た目、挙動）が呼ばれます</strong>。</p>

<h3>
<span id="isrefreshcontrol-における-method-swizzling" class="fragment"></span><a href="#isrefreshcontrol-%E3%81%AB%E3%81%8A%E3%81%91%E3%82%8B-method-swizzling"><i class="fa fa-link"></i></a>ISRefreshControl における Method Swizzling</h3>

<p>UITableViewController+RefreshControl というカテゴリが用意されていて、これの load メソッド内で、次のように Method Swizzling が行われています。（※Swizzle()は同ファイルに定義されているMethod Swizzlingのラッパー関数）</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>+ (void)load
{
    @autoreleasepool {
        if ([[[UIDevice currentDevice] systemVersion] hasPrefix:@"5"]) {
            Swizzle([self class], @selector(refreshControl), @selector(iOS5_refreshControl));
            Swizzle([self class], @selector(setRefreshControl:), @selector(iOS5_setRefreshControl:));
        }
    }
}
</pre></div></div>

<p>iOSのバージョンが "5" だった場合に、UITableViewController の refreshControl というプロパティの setter と getter を差し替える実装になっていることがわかります。</p>

<p>iOS5のときに差し替える実装は、</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>- (ISRefreshControl *)iOS5_refreshControl
{
    return objc_getAssociatedObject(self, @"iOS5RefreshControl");
}

- (void)iOS5_setRefreshControl:(ISRefreshControl *)refreshControl
{
    objc_setAssociatedObject(self, @"iOS5RefreshControl", refreshControl, OBJC_ASSOCIATION_RETAIN);
}
</pre></div></div>

<p>となっていて、<strong>Associated Objectの仕組みを利用して iOS5 で UITableViewController の refreshControl というプロパティにアクセスできるように</strong>しています。</p>

<p>で、KVOでrefreshControlプロパティを見張り、</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>    [self addObserver:self
           forKeyPath:@"refreshControl"
              options:options
              context:NULL];
</pre></div></div>

<p>refreshControlプロパティに値（UIViewサブクラスのオブジェクト）がセットされたときに、所定の位置にそのビューを貼付ける、という実装になっています。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context
{
    if (object == self &amp;&amp; [keyPath isEqualToString:@"refreshControl"]) {
        UIView *oldView = [change objectForKey:@"old"];
        UIView *newView = [change objectForKey:@"new"];

        if ([oldView isKindOfClass:[UIView class]]) {
            [oldView removeFromSuperview];
        }
        if ([newView isKindOfClass:[UIView class]]) {
            newView.frame = CGRectMake(0, -50, self.view.frame.size.width, 50);
            newView.autoresizingMask = UIViewAutoresizingFlexibleWidth;
            [newView setNeedsLayout];
            [self.view addSubview:newView];
        }
        return;
    }
    // 後略
}
</pre></div></div>

<p>このように、Method Swizzling を用いることで、<strong>導入する側は iOS のバージョン判定も、このライブラリ独自のAPIを使う必要もなく、UIRefreshControlと同じように実装するだけ</strong>、というカンタン導入を実現しています。</p>

<h2>
<span id="method-swizzlingの参考書籍" class="fragment"></span><a href="#method-swizzling%E3%81%AE%E5%8F%82%E8%80%83%E6%9B%B8%E7%B1%8D"><i class="fa fa-link"></i></a>Method Swizzlingの参考書籍</h2>

<p>日本語の本だと、『<a href="http://www.amazon.co.jp/exec/obidos/ASIN/4873114721/22301-22/ref=nosim/" rel="nofollow noopener" target="_blank">iOS SDK Hacks</a>』に解説と事例が掲載されています。</p>

<h2>
<span id="まとめ" class="fragment"></span><a href="#%E3%81%BE%E3%81%A8%E3%82%81"><i class="fa fa-link"></i></a>まとめ</h2>

<p>Method Swizzlingをうまく使っている実用例を２つ紹介しました。</p>

<p>これ以外にも、単体テストで使える OCMock というライブラリも、Method Swizzling を利用して既存オブジェクトのメソッドを差し替えてテストできるようにしていたりと、Github上にはたくさんの実用例が転がっているようなので、また追記したいと思います。</p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>shu223さんの<br />17位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>111</kbd>
		<a target="_blank" href="https://qiita.com/shu223/items/c15547667f8318d4acfe">パスに沿ってアニメーションさせる</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-05-01 10:00:58</center>
	</td>
	<td style="width:200px;">
		@shu223<br />(Freelancer 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/3180/profile-images/1473682733">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Objective-C]</b> <b>[Xcode]</b> <b>[iOS]</b> <b>[アニメーション]</b> <b>[Swift]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>Core Animationを用いると、UIViewのアニメーションと比較してより自由度の高いアニメーションを実現できます。たとえば、CAKeyframeAnimation に Core Graphics で描画したパスを渡すことで、円に沿ってアニメーションさせたり、放物線状にアニメーションさせたり、ハート形などの図形や、手書きの軌跡に沿ってアニメーションさせたりといったことが可能になります。</p>

<h2>
<span id="放物線状にアニメーションさせる" class="fragment"></span><a href="#%E6%94%BE%E7%89%A9%E7%B7%9A%E7%8A%B6%E3%81%AB%E3%82%A2%E3%83%8B%E3%83%A1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E3%81%95%E3%81%9B%E3%82%8B"><i class="fa fa-link"></i></a>放物線状にアニメーションさせる</h2>

<p>パスに沿ってアニメーションさせる方法のシンプルな事例として、サイドビューの2Dゲームのキャラ（例：マリオ）のジャンプのように、<strong>放物線状に</strong>アニメーションさせる場合の実装例を紹介します。</p>

<p><a href="https://camo.qiitausercontent.com/bca3a9235338a31c059958a8a739c06487cdb338/687474703a2f2f662e636c2e6c792f6974656d732f3376343632573350317330783332336f316533712f50617468416e696d6174696f6e312e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/bca3a9235338a31c059958a8a739c06487cdb338/687474703a2f2f662e636c2e6c792f6974656d732f3376343632573350317330783332336f316533712f50617468416e696d6174696f6e312e706e67" alt="" data-canonical-src="http://f.cl.ly/items/3v462W3P1s0x323o1e3q/PathAnimation1.png"></a></p>

<p><a href="https://camo.qiitausercontent.com/c424e025269537537101c2eba2f5ba1cb9d71b73/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f333138302f64326637616661352d326136662d636430632d633564632d6339303234336131383936342e676966" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/c424e025269537537101c2eba2f5ba1cb9d71b73/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f333138302f64326637616661352d326136662d636430632d633564632d6339303234336131383936342e676966" alt="jump.gif" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/3180/d2f7afa5-2a6f-cd0c-c5dc-c90243a18964.gif"></a></p>

<p>アニメーションの処理を下記のように実装します。</p>

<div class="code-frame" data-lang="swift">
<div class="code-lang"><span class="bold">swift</span></div>
<div class="highlight"><pre><span></span><span class="c1">// CAKeyframeAnimationオブジェクトを生成</span>
<span class="kd">let</span> <span class="nv">animation</span> <span class="p">=</span> <span class="bp">CAKeyframeAnimation</span><span class="p">(</span><span class="n">keyPath</span><span class="p">:</span> <span class="s">"position"</span><span class="p">)</span>
<span class="n">animation</span><span class="p">.</span><span class="n">fillMode</span> <span class="p">=</span> <span class="n">kCAFillModeForwards</span>
<span class="n">animation</span><span class="p">.</span><span class="n">removedOnCompletion</span> <span class="p">=</span> <span class="kc">false</span>
<span class="n">animation</span><span class="p">.</span><span class="n">duration</span> <span class="p">=</span> <span class="mf">1.0</span>

<span class="c1">// 放物線のパスを生成</span>
<span class="kd">let</span> <span class="nv">path</span> <span class="p">=</span> <span class="n">CGPathCreateMutable</span><span class="p">()</span>
<span class="n">CGPathMoveToPoint</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="kc">nil</span><span class="p">,</span> <span class="n">startPos</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="n">startPos</span><span class="p">.</span><span class="n">y</span><span class="p">)</span>
<span class="n">CGPathAddCurveToPoint</span><span class="p">(</span>
    <span class="n">path</span><span class="p">,</span> <span class="kc">nil</span><span class="p">,</span>
    <span class="n">startPos</span><span class="p">.</span><span class="n">x</span> <span class="o">-</span> <span class="n">jumpHeight</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="n">startPos</span><span class="p">.</span><span class="n">y</span> <span class="o">-</span> <span class="n">jumpHeight</span><span class="p">,</span>
    <span class="n">endPos</span><span class="p">.</span><span class="n">x</span> <span class="o">-</span> <span class="n">jumpHeight</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="n">startPos</span><span class="p">.</span><span class="n">y</span> <span class="o">-</span> <span class="n">jumpHeight</span><span class="p">,</span>
    <span class="n">endPos</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="n">endPos</span><span class="p">.</span><span class="n">y</span><span class="p">)</span>

<span class="c1">// パスをCAKeyframeAnimationオブジェクトにセット</span>
<span class="n">animation</span><span class="p">.</span><span class="n">path</span> <span class="p">=</span> <span class="n">path</span>

<span class="c1">// レイヤーにアニメーションを追加</span>
<span class="n">imageView</span><span class="p">.</span><span class="n">layer</span><span class="p">.</span><span class="n">addAnimation</span><span class="p">(</span><span class="n">animation</span><span class="p">,</span> <span class="n">forKey</span><span class="p">:</span> <span class="kc">nil</span><span class="p">)</span>
</pre></div>
</div>

<div class="code-frame" data-lang="objc">
<div class="code-lang"><span class="bold">objc</span></div>
<div class="highlight"><pre><span></span><span class="c1">// CAKeyframeAnimationオブジェクトを生成</span>
<span class="bp">CAKeyframeAnimation</span> <span class="o">*</span><span class="n">animation</span><span class="p">;</span>
<span class="n">animation</span> <span class="o">=</span> <span class="p">[</span><span class="bp">CAKeyframeAnimation</span> <span class="nl">animationWithKeyPath</span><span class="p">:</span><span class="s">@"position"</span><span class="p">];</span>
<span class="n">animation</span><span class="p">.</span><span class="n">fillMode</span> <span class="o">=</span> <span class="n">kCAFillModeForwards</span><span class="p">;</span>
<span class="n">animation</span><span class="p">.</span><span class="n">removedOnCompletion</span> <span class="o">=</span> <span class="nb">NO</span><span class="p">;</span>
<span class="n">animation</span><span class="p">.</span><span class="n">duration</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">;</span>

<span class="c1">// 放物線のパスを生成</span>
<span class="n">CGFloat</span> <span class="n">jumpHeight</span> <span class="o">=</span> <span class="mf">80.0</span><span class="p">;</span>
<span class="n">CGMutablePathRef</span> <span class="n">curvedPath</span> <span class="o">=</span> <span class="n">CGPathCreateMutable</span><span class="p">();</span>
<span class="n">CGPathMoveToPoint</span><span class="p">(</span><span class="n">curvedPath</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="n">kStartPos</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="n">kStartPos</span><span class="p">.</span><span class="n">y</span><span class="p">);</span>
<span class="n">CGPathAddCurveToPoint</span><span class="p">(</span><span class="n">curvedPath</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span>
                      <span class="n">kStartPos</span><span class="p">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">jumpHeight</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="n">kStartPos</span><span class="p">.</span><span class="n">y</span> <span class="o">-</span> <span class="n">jumpHeight</span><span class="p">,</span>
                      <span class="n">kEndPos</span><span class="p">.</span><span class="n">x</span> <span class="o">-</span> <span class="n">jumpHeight</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="n">kStartPos</span><span class="p">.</span><span class="n">y</span> <span class="o">-</span> <span class="n">jumpHeight</span><span class="p">,</span>
                      <span class="n">kEndPos</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="n">kEndPos</span><span class="p">.</span><span class="n">y</span><span class="p">);</span>

<span class="c1">// パスをCAKeyframeAnimationオブジェクトにセット</span>
<span class="n">animation</span><span class="p">.</span><span class="n">path</span> <span class="o">=</span> <span class="n">curvedPath</span><span class="p">;</span>

<span class="c1">// パスを解放</span>
<span class="n">CGPathRelease</span><span class="p">(</span><span class="n">curvedPath</span><span class="p">);</span>

<span class="c1">// レイヤーにアニメーションを追加</span>
<span class="p">[</span><span class="nb">self</span><span class="p">.</span><span class="n">imageView</span><span class="p">.</span><span class="n">layer</span> <span class="nl">addAnimation</span><span class="p">:</span><span class="n">animation</span> <span class="nl">forKey</span><span class="p">:</span><span class="nb">nil</span><span class="p">];</span>
</pre></div>
</div>

<p>この実装のポイントは以下の2点です。</p>

<ul>
<li>CAKeyFrameAnimation で <code>position</code> プロパティをアニメーションさせるよう指定する</li>
<li>Core Graphics で描画した放物線のパスを CAKeyframeAnimation の <code>path</code> プロパティにセットする</li>
</ul>

<h2>
<span id="アニメーション完了時に処理を行う" class="fragment"></span><a href="#%E3%82%A2%E3%83%8B%E3%83%A1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E5%AE%8C%E4%BA%86%E6%99%82%E3%81%AB%E5%87%A6%E7%90%86%E3%82%92%E8%A1%8C%E3%81%86"><i class="fa fa-link"></i></a>アニメーション完了時に処理を行う</h2>

<p>アニメーション完了後に処理をさせたい場合は、CAAnimation のプロパティにある <code>delegate</code> を指定しておけば、</p>

<div class="code-frame" data-lang="swift">
<div class="code-lang"><span class="bold">swift</span></div>
<div class="highlight"><pre><span></span><span class="n">animation</span><span class="p">.</span><span class="n">delegate</span> <span class="p">=</span> <span class="kc">self</span>
</pre></div>
</div>

<div class="code-frame" data-lang="objc">
<div class="code-lang"><span class="bold">objc</span></div>
<div class="highlight"><pre><span></span><span class="n">animation</span><span class="p">.</span><span class="n">delegate</span> <span class="o">=</span> <span class="nb">self</span><span class="p">;</span>
</pre></div>
</div>

<p><code>animationDidStop:finished:</code>メソッドがアニメーション完了後に呼ばれるようになります。</p>

<div class="code-frame" data-lang="swift">
<div class="code-lang"><span class="bold">swift</span></div>
<div class="highlight"><pre><span></span><span class="kr">override</span> <span class="kd">func</span> <span class="nf">animationDidStop</span><span class="p">(</span><span class="n">anim</span><span class="p">:</span> <span class="bp">CAAnimation</span><span class="p">,</span> <span class="n">finished</span> <span class="n">flag</span><span class="p">:</span> <span class="nb">Bool</span><span class="p">)</span> <span class="p">{</span>
    <span class="bp">print</span><span class="p">(</span><span class="s">"完了"</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>
</div>

<div class="code-frame" data-lang="objc">
<div class="code-lang"><span class="bold">objc</span></div>
<div class="highlight"><pre><span></span><span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">animationDidStop:</span><span class="p">(</span><span class="bp">CAAnimation</span> <span class="o">*</span><span class="p">)</span><span class="nv">anim</span> <span class="nf">finished:</span><span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nv">flag</span> <span class="p">{</span>
    <span class="n">NSLog</span><span class="p">(</span><span class="s">@"完了"</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>

<h2>
<span id="uibezierpath-オブジェクトをパスとして使用する" class="fragment"></span><a href="#uibezierpath-%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%82%92%E3%83%91%E3%82%B9%E3%81%A8%E3%81%97%E3%81%A6%E4%BD%BF%E7%94%A8%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>UIBezierPath オブジェクトをパスとして使用する</h2>

<p>CAKeyframeAnimation の <code>path</code> プロパティの型は CGPathRef なので、UIBezierPath オブジェクトをパスとして使用したい場合は、<strong>UIBezierPath の <code>CGPath</code> プロパティから CGPathRef を取り出して使用</strong>します。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>// CAKeyframeAnimationオブジェクトを生成
CAKeyframeAnimation *animation;
animation = [CAKeyframeAnimation animationWithKeyPath:@"position"];
animation.fillMode = kCAFillModeForwards;
animation.removedOnCompletion = NO;
animation.duration = 1.0;

// UIBezierPathで放物線のパスを生成
UIBezierPath *path = [UIBezierPath bezierPath];

CGFloat jumpHeight = 80.0;
[path moveToPoint:kStartPos];
[path addCurveToPoint:kEndPos
        controlPoint1:CGPointMake(kStartPos.x + jumpHeight/2,
                                  kStartPos.y - jumpHeight)
        controlPoint2:CGPointMake(kEndPos.x - jumpHeight/2,
                                  kEndPos.y - jumpHeight)];

// パスをCAKeyframeAnimationオブジェクトにセット
animation.path = path.CGPath;

// レイヤーにアニメーションを追加
[self.imageView.layer addAnimation:animation forKey:nil];
</pre></div></div>

<h2>
<span id="参考資料" class="fragment"></span><a href="#%E5%8F%82%E8%80%83%E8%B3%87%E6%96%99"><i class="fa fa-link"></i></a>参考資料</h2>

<ul>
<li><a href="https://developer.apple.com/library/ios/#documentation/GraphicsImaging/Reference/CAKeyframeAnimation_class/" rel="nofollow noopener" target="_blank">CAKeyframeAnimation Class Reference</a></li>
<li><a href="https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/CoreAnimation_guide/" rel="nofollow noopener" target="_blank">Core Animation Programming Guide</a></li>
</ul>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>shu223さんの<br />18位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>109</kbd>
		<a target="_blank" href="https://qiita.com/shu223/items/5bfba10e642b453e6d30">.ipa ファイル生成を自動化する</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-03-13 18:02:19</center>
	</td>
	<td style="width:200px;">
		@shu223<br />(Freelancer 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/3180/profile-images/1473682733">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[ShellScript]</b> <b>[Objective-C]</b> <b>[iPhone]</b> <b>[Xcode]</b> <b>[iOS]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>通常.ipaファイルを作成するには、Product メニューの Archive 実行後に、</p>

<ul>
<li>Organizer から アーカイブを選択し Distribute ボタン押下</li>
<li>"Save for Enterprise or Ad-Hoc Deployment" を選択し Next ボタン押下</li>
<li>ドロップダウンリストから該当するプロビジョニングプロファイルを選択</li>
<li>保存先を指定</li>
</ul>

<p>という手順を踏みます。ウィザードに従って進めるだけなので、たまに行う程度であれば問題ないのですが、.ipaファイルを作成して共有する頻度が多い場合（例えばリリースが近く細かい修正と確認を繰り返す場合）は面倒になってきます。</p>

<p>Xcode の Run Script を利用し、<strong>アーカイブ完了後に自動で ipa ファイルを生成する</strong>よう設定する方法を紹介します。</p>

<p>※通常のアドホックビルドの準備の手順（アドホックビルド用のプロビジョニングプロファイルの作成とインストール、Configurationの作成と Code Signing Identity の設定）については説明を省略します。</p>

<h2>
<span id="準備" class="fragment"></span><a href="#%E6%BA%96%E5%82%99"><i class="fa fa-link"></i></a>準備</h2>

<p>Build Phases タブの右下にある "Add Build Phase" ボタンから Run Script を追加し、次のようにスクリプトを登録します。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>if [ "${CONFIGURATION}" = "&lt;Configuration名&gt;" ]; then
xcrun -sdk iphoneos PackageApplication \
"${BUILD_DIR}/${CONFIGURATION}${EFFECTIVE_PLATFORM_NAME}"/"${WRAPPER_NAME}" \
-o &lt;出力パス&gt;/&lt;ipaファイル名&gt; \
--embed ~/Library/MobileDevice/Provisioning\ Profiles/&lt;プロファイルのファイル名&gt;
fi
</pre></div></div>

<p>&lt;Configuration名&gt; はプロジェクトの設定に従って置き換え、&lt;出力パス&gt;、&lt;ipaファイル名&gt; はそれぞれ任意のパス、名前に置き換えてください。（例：~/Hoge.ipa）</p>

<p>&lt;プロファイルのファイル名&gt;は、オーガナイザで該当するプロファイルを選択し、右クリックメニューの「Reveal Profile in Finder」からプロファイルの実体ファイルを Finder で表示して調べることができます。（713F1C87-93C7-4F29-9F3E-F8C5E652394B.mobileprovision というように、英数字の羅列＋拡張子 .mobileprovision で構成されるファイル名です。）</p>

<p>たとえば、Configuration名が Ad Hoc となるプロジェクトの.ipaファイルをホームフォルダ直下に自動生成したい場合のスクリプトは次のようになります。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>if [ "${CONFIGURATION}" = "Ad Hoc" ]; then
xcrun -sdk iphoneos PackageApplication \
"${BUILD_DIR}/${CONFIGURATION}${EFFECTIVE_PLATFORM_NAME}"/"${WRAPPER_NAME}" \
-o ~/Hoge.ipa \
--embed ~/Library/MobileDevice/Provisioning\ Profiles/xxxxxxxxxxx.mobileprovision
fi
</pre></div></div>

<h2>
<span id="実行" class="fragment"></span><a href="#%E5%AE%9F%E8%A1%8C"><i class="fa fa-link"></i></a>実行</h2>

<p>（Build の Scheme として "Ad Hoc" を選択した状態で、）<strong>Product メニューから Build を実行するだけ</strong>で、自動で.ipa ファイルが生成されます。</p>

<h2>
<span id="more" class="fragment"></span><a href="#more"><i class="fa fa-link"></i></a>More</h2>

<p>xcrunコマンド（これで .ipa ファイルを生成している）の後に curl コマンドで Testflight の API を叩くようにすれば、アーカイブ実行時に <strong>Testflight へのアップロードまで自動化</strong>することもできます。</p>

<h2>
<span id="参考" class="fragment"></span><a href="#%E5%8F%82%E8%80%83"><i class="fa fa-link"></i></a>参考</h2>

<ul>
<li><a href="http://blog.ishkawa.org/blog/2013/02/27/make-ipa/" rel="nofollow noopener" target="_blank">.ipaをサッとつくる - blog.ishkawa.org</a></li>
<li><a href="http://d.hatena.ne.jp/shu223/20120804/1344155002" rel="nofollow noopener" target="_blank">$(SRCROOT) や $(BUILD_DIR) 等の Xcode で使用しているマクロの置換内容の一覧を調べる方法</a></li>
</ul>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>shu223さんの<br />19位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>103</kbd>
		<a target="_blank" href="https://qiita.com/shu223/items/cf9e25ff60804044f437">自然言語のテキストを属性で区分する</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-03-18 09:10:43</center>
	</td>
	<td style="width:200px;">
		@shu223<br />(Freelancer 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/3180/profile-images/1473682733">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Objective-C]</b> <b>[iOS]</b> <b>[自然言語処理]</b> <b>[NLP]</b> <b>[Swift]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>NSLinguisticTaggerを用いると、<strong>自然言語のテキストを品詞（名詞、動詞、代名詞）や「個人名」「地名」といった属性で区分</strong>（トークンに分解）することができます。<strong>日本語の形態素解析</strong>も可能です。</p>

<p><a href="https://camo.qiitausercontent.com/df52cc83da8cf6c214860b3aa86511d9ace66b68/687474703a2f2f662e636c2e6c792f6974656d732f307732573041335a3071335a306532783043337a2f4c696e67756973746963546167676572305f72315f63312e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/df52cc83da8cf6c214860b3aa86511d9ace66b68/687474703a2f2f662e636c2e6c792f6974656d732f307732573041335a3071335a306532783043337a2f4c696e67756973746963546167676572305f72315f63312e706e67" alt="" data-canonical-src="http://f.cl.ly/items/0w2W0A3Z0q3Z0e2x0C3z/LinguisticTagger0_r1_c1.png"></a></p>

<p>使い方は非常にシンプルで、基本的な手順は</p>

<ol>
<li>スキームを引数に渡してNSLinguisticTaggerオブジェクトを生成</li>
<li>処理対象テキストをセット</li>
<li>トークン分解開始</li>
</ol>

<p>の3ステップです。</p>

<div class="code-frame" data-lang="objc">
<div class="code-lang"><span class="bold">objc</span></div>
<div class="highlight"><pre><span></span><span class="c1">// スキーム</span>
<span class="bp">NSArray</span> <span class="o">*</span><span class="n">schemes</span> <span class="o">=</span> <span class="l">@[</span><span class="n">NSLinguisticTagSchemeLexicalClass</span><span class="l">]</span><span class="p">;</span>

<span class="c1">// NSLinguisticTaggerオブジェクトを生成</span>
<span class="bp">NSLinguisticTagger</span> <span class="o">*</span><span class="n">tagger</span> <span class="o">=</span> <span class="p">[[</span><span class="bp">NSLinguisticTagger</span> <span class="n">alloc</span><span class="p">]</span> <span class="nl">initWithTagSchemes</span><span class="p">:</span><span class="n">schemes</span>
                                                                    <span class="nl">options</span><span class="p">:</span><span class="mi">0</span><span class="p">];</span>

<span class="c1">// 処理対象テキスト</span>
<span class="bp">NSString</span> <span class="o">*</span><span class="n">targetText</span> <span class="o">=</span> <span class="nb">self</span><span class="p">.</span><span class="n">textView</span><span class="p">.</span><span class="n">text</span><span class="p">;</span>
<span class="p">[</span><span class="n">tagger</span> <span class="nl">setString</span><span class="p">:</span><span class="n">targetText</span><span class="p">];</span>

<span class="c1">// トークンへの分解開始</span>
<span class="p">[</span><span class="n">tagger</span> <span class="nl">enumerateTagsInRange</span><span class="p">:</span><span class="n">NSMakeRange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">targetText</span><span class="p">.</span><span class="n">length</span><span class="p">)</span>
                      <span class="nl">scheme</span><span class="p">:</span><span class="n">NSLinguisticTagSchemeLexicalClass</span>
                     <span class="nl">options</span><span class="p">:</span><span class="mi">0</span>
                  <span class="nl">usingBlock</span><span class="p">:</span>
 <span class="o">^</span><span class="p">(</span><span class="bp">NSString</span> <span class="o">*</span><span class="n">tag</span><span class="p">,</span> <span class="n">NSRange</span> <span class="n">tokenRange</span><span class="p">,</span> <span class="n">NSRange</span> <span class="n">sentenceRange</span><span class="p">,</span> <span class="kt">BOOL</span> <span class="o">*</span><span class="n">stop</span><span class="p">)</span> <span class="p">{</span>

     <span class="bp">NSString</span> <span class="o">*</span><span class="n">subStr</span> <span class="o">=</span> <span class="p">[</span><span class="n">targetText</span> <span class="nl">substringWithRange</span><span class="p">:</span><span class="n">tokenRange</span><span class="p">];</span>
     <span class="n">NSLog</span><span class="p">(</span><span class="s">@"%@ : %@"</span><span class="p">,</span> <span class="n">subStr</span><span class="p">,</span> <span class="n">tag</span><span class="p">);</span>
 <span class="p">}];</span>
</pre></div>
</div>

<div class="code-frame" data-lang="swift">
<div class="code-lang"><span class="bold">swift</span></div>
<div class="highlight"><pre><span></span><span class="kd">let</span> <span class="nv">schemes</span> <span class="p">=</span> <span class="p">[</span><span class="n">NSLinguisticTagScheme</span><span class="p">.</span><span class="n">lexicalClass</span><span class="p">]</span>
<span class="kd">let</span> <span class="nv">tagger</span> <span class="p">=</span> <span class="bp">NSLinguisticTagger</span><span class="p">(</span><span class="n">tagSchemes</span><span class="p">:</span> <span class="n">schemes</span><span class="p">,</span> <span class="n">options</span><span class="p">:</span> <span class="mi">0</span><span class="p">)</span>

<span class="n">tagger</span><span class="p">.</span><span class="n">string</span> <span class="p">=</span> <span class="n">orgStr</span>
<span class="kd">let</span> <span class="nv">attrStr</span> <span class="p">=</span> <span class="bp">NSMutableAttributedString</span><span class="p">(</span><span class="n">string</span><span class="p">:</span> <span class="n">orgStr</span><span class="p">)</span>

<span class="k">guard</span> <span class="kd">let</span> <span class="nv">scheme</span> <span class="p">=</span> <span class="n">schemes</span><span class="p">.</span><span class="bp">first</span> <span class="k">else</span> <span class="p">{</span><span class="bp">fatalError</span><span class="p">()}</span>
<span class="n">tagger</span><span class="p">.</span><span class="n">enumerateTags</span><span class="p">(</span><span class="k">in</span><span class="p">:</span> <span class="n">NSMakeRange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">orgStr</span><span class="p">.</span><span class="n">characters</span><span class="p">.</span><span class="bp">count</span><span class="p">),</span> <span class="n">scheme</span><span class="p">:</span> <span class="n">scheme</span><span class="p">,</span> <span class="n">options</span><span class="p">:</span> <span class="bp">NSLinguisticTagger</span><span class="p">.</span><span class="n">Options</span><span class="p">(</span><span class="n">rawValue</span><span class="p">:</span> <span class="mi">0</span><span class="p">))</span> <span class="p">{</span> <span class="p">(</span><span class="n">tag</span><span class="p">,</span> <span class="n">tokenRange</span><span class="p">,</span> <span class="n">sentenceRange</span><span class="p">,</span> <span class="n">stop</span><span class="p">)</span> <span class="k">in</span>
    <span class="k">guard</span> <span class="kd">let</span> <span class="nv">tag</span> <span class="p">=</span> <span class="n">tag</span> <span class="k">else</span> <span class="p">{</span><span class="k">return</span><span class="p">}</span>
    <span class="n">attrStr</span><span class="p">.</span><span class="n">addAttribute</span><span class="p">(.</span><span class="n">foregroundColor</span> <span class="k">as</span> <span class="n">NSAttributedStringKey</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">color</span><span class="p">(</span><span class="k">for</span><span class="p">:</span> <span class="n">tag</span><span class="p">),</span> <span class="n">range</span><span class="p">:</span> <span class="n">tokenRange</span><span class="p">)</span>
<span class="p">}</span>

<span class="n">textView</span><span class="p">.</span><span class="n">attributedText</span> <span class="p">=</span> <span class="n">attrStr</span>
</pre></div>
</div>

<p>スキームとは、トークン分解をどのような属性に基づいて行うかを指定するもので、上記サンプルで使用している<code>NSLinguisticTagSchemeLexicalClass</code>は品詞（「名詞」「動詞」etc）によってテキストを分解するスキームです。</p>

<p><code>enumerateTagsInRange:scheme:options:usingBlock:</code>メソッドをコールするとトークン分解が開始され、トークンが見つかるごとに引数 usingBlock に渡されたBloksの処理が実行されます。</p>

<h2>
<span id="品詞で区分する" class="fragment"></span><a href="#%E5%93%81%E8%A9%9E%E3%81%A7%E5%8C%BA%E5%88%86%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>品詞で区分する</h2>

<p>名詞、動詞といった品詞でテキストを区分するには、スキームとして<code>NSLinguisticTagSchemeLexicalClass</code>を使用します。</p>

<p><code>enumerateTagsInRange:scheme:options:usingBlock:</code>メソッドで取得できるタグの種類には、次のようなものがあります。（主なものを抜粋）</p>

<ul>
<li>NSLinguisticTagNoun：名詞</li>
<li>NSLinguisticTagVerb：動詞</li>
<li>NSLinguisticTagAdjective：形容詞</li>
<li>NSLinguisticTagPronoun：代名詞</li>
<li>NSLinguisticTagAdverb：副詞</li>
<li>NSLinguisticTagConjunction：接続詞</li>
<li>NSLinguisticTagPreposition：前置詞</li>
<li>NSLinguisticTagParticle：助詞</li>
<li>NSLinguisticTagDeterminer：限定詞</li>
</ul>

<p>たとえば、品詞で区分して色分けする場合、この NSLinguisticTagger で取得できるタグに応じて色を決定するメソッドを実装しておき、</p>

<div class="code-frame" data-lang="objc"><div class="highlight"><pre><span></span><span class="p">-</span> <span class="p">(</span><span class="bp">UIColor</span> <span class="o">*</span><span class="p">)</span><span class="nf">colorForAtteributeForLinguisticTag:</span><span class="p">(</span><span class="bp">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">linguisticTag</span> <span class="p">{</span>

    <span class="c1">// 名詞</span>
    <span class="k">if</span> <span class="p">([</span><span class="n">linguisticTag</span> <span class="nl">isEqualToString</span><span class="p">:</span><span class="n">NSLinguisticTagNoun</span><span class="p">])</span> <span class="p">{</span>

        <span class="k">return</span> <span class="p">[</span><span class="bp">UIColor</span> <span class="n">redColor</span><span class="p">];</span>
    <span class="p">}</span>
    <span class="c1">// 動詞</span>
    <span class="k">else</span> <span class="k">if</span> <span class="p">([</span><span class="n">linguisticTag</span> <span class="nl">isEqualToString</span><span class="p">:</span><span class="n">NSLinguisticTagVerb</span><span class="p">])</span> <span class="p">{</span>

        <span class="k">return</span> <span class="p">[</span><span class="bp">UIColor</span> <span class="n">blueColor</span><span class="p">];</span>
    <span class="p">}</span>
    <span class="c1">// 形容詞</span>
    <span class="k">else</span> <span class="k">if</span> <span class="p">([</span><span class="n">linguisticTag</span> <span class="nl">isEqualToString</span><span class="p">:</span><span class="n">NSLinguisticTagAdjective</span><span class="p">])</span> <span class="p">{</span>

        <span class="k">return</span> <span class="p">[</span><span class="bp">UIColor</span> <span class="n">magentaColor</span><span class="p">];</span>
    <span class="p">}</span>
    <span class="c1">// 代名詞</span>
    <span class="k">else</span> <span class="k">if</span> <span class="p">([</span><span class="n">linguisticTag</span> <span class="nl">isEqualToString</span><span class="p">:</span><span class="n">NSLinguisticTagPronoun</span><span class="p">])</span> <span class="p">{</span>

        <span class="k">return</span> <span class="p">[</span><span class="bp">UIColor</span> <span class="n">orangeColor</span><span class="p">];</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="p">[</span><span class="bp">UIColor</span> <span class="n">whiteColor</span><span class="p">];</span>
<span class="p">}</span>
</pre></div></div>

<p>次のように<code>enumerateTagsInRange:scheme:options:usingBlock:</code>メソッドのBlocks内でタグに応じた色分けを実施します。</p>

<div class="code-frame" data-lang="objc"><div class="highlight"><pre><span></span><span class="c1">// スキーム</span>
<span class="bp">NSArray</span> <span class="o">*</span><span class="n">schemes</span> <span class="o">=</span> <span class="l">@[</span><span class="n">NSLinguisticTagSchemeLexicalClass</span><span class="l">]</span><span class="p">;</span>

<span class="c1">// NSLinguisticTaggerオブジェクトを生成</span>
<span class="bp">NSLinguisticTagger</span> <span class="o">*</span><span class="n">tagger</span> <span class="o">=</span> <span class="p">[[</span><span class="bp">NSLinguisticTagger</span> <span class="n">alloc</span><span class="p">]</span> <span class="nl">initWithTagSchemes</span><span class="p">:</span><span class="n">schemes</span>
                                                                    <span class="nl">options</span><span class="p">:</span><span class="mi">0</span><span class="p">];</span>

<span class="c1">// 処理対象テキスト</span>
<span class="bp">NSString</span> <span class="o">*</span><span class="n">targetText</span> <span class="o">=</span> <span class="nb">self</span><span class="p">.</span><span class="n">textView</span><span class="p">.</span><span class="n">text</span><span class="p">;</span>
<span class="p">[</span><span class="n">tagger</span> <span class="nl">setString</span><span class="p">:</span><span class="n">targetText</span><span class="p">];</span>

<span class="c1">// テキストに色をつけるためにNSMutableAttributedStringを生成</span>
<span class="bp">NSMutableAttributedString</span> <span class="o">*</span><span class="n">formatted</span><span class="p">;</span>
<span class="n">formatted</span> <span class="o">=</span> <span class="p">[[</span><span class="bp">NSMutableAttributedString</span> <span class="n">alloc</span><span class="p">]</span> <span class="nl">initWithString</span><span class="p">:</span><span class="n">targetText</span><span class="p">];</span>

<span class="c1">// トークンのタグを取得開始</span>
<span class="p">[</span><span class="n">tagger</span> <span class="nl">enumerateTagsInRange</span><span class="p">:</span><span class="n">NSMakeRange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">targetText</span><span class="p">.</span><span class="n">length</span><span class="p">)</span>
                      <span class="nl">scheme</span><span class="p">:</span><span class="n">NSLinguisticTagSchemeLexicalClass</span>
                     <span class="nl">options</span><span class="p">:</span><span class="mi">0</span>
                  <span class="nl">usingBlock</span><span class="p">:</span>
 <span class="o">^</span><span class="p">(</span><span class="bp">NSString</span> <span class="o">*</span><span class="n">tag</span><span class="p">,</span> <span class="n">NSRange</span> <span class="n">tokenRange</span><span class="p">,</span> <span class="n">NSRange</span> <span class="n">sentenceRange</span><span class="p">,</span> <span class="kt">BOOL</span> <span class="o">*</span><span class="n">stop</span><span class="p">)</span> <span class="p">{</span>

     <span class="c1">// タグに応じた色分け</span>
     <span class="bp">UIColor</span> <span class="o">*</span><span class="n">color</span> <span class="o">=</span> <span class="p">[</span><span class="nb">self</span> <span class="nl">colorForAtteributeForLinguisticTag</span><span class="p">:</span><span class="n">tag</span><span class="p">];</span>
     <span class="p">[</span><span class="n">formatted</span> <span class="nl">addAttribute</span><span class="p">:</span><span class="n">NSForegroundColorAttributeName</span>
                       <span class="nl">value</span><span class="p">:</span><span class="n">color</span>
                       <span class="nl">range</span><span class="p">:</span><span class="n">tokenRange</span><span class="p">];</span>
 <span class="p">}];</span>

<span class="c1">// 色分けされたテキストを表示</span>
<span class="nb">self</span><span class="p">.</span><span class="n">textView</span><span class="p">.</span><span class="n">attributedText</span> <span class="o">=</span> <span class="n">formatted</span><span class="p">;</span>
</pre></div></div>

<p><a href="https://camo.qiitausercontent.com/df15958cc0c2e77b1da7d2c4d705d6bb436c126a/687474703a2f2f662e636c2e6c792f6974656d732f33623261307533463276335531423430326430772f4c696e67756973746963546167676572315f72315f63312e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/df15958cc0c2e77b1da7d2c4d705d6bb436c126a/687474703a2f2f662e636c2e6c792f6974656d732f33623261307533463276335531423430326430772f4c696e67756973746963546167676572315f72315f63312e706e67" alt="品詞による色分け" data-canonical-src="http://f.cl.ly/items/3b2a0u3F2v3U1B402d0w/LinguisticTagger1_r1_c1.png"></a></p>

<h2>
<span id="地名個人名組織名で区分する" class="fragment"></span><a href="#%E5%9C%B0%E5%90%8D%E5%80%8B%E4%BA%BA%E5%90%8D%E7%B5%84%E7%B9%94%E5%90%8D%E3%81%A7%E5%8C%BA%E5%88%86%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>地名、個人名、組織名で区分する</h2>

<p>スキームとして<code>NSLinguisticTagSchemeNameType</code>を使用します。他は品詞による区分の場合と同じ手順でOKです。</p>

<p><a href="https://camo.qiitausercontent.com/4524008746c879876a6ee1cad8ad78e8c599a67d/687474703a2f2f662e636c2e6c792f6974656d732f303333333278337532743070324e3172304632762f4c696e67756973746963546167676572325f72315f63312e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/4524008746c879876a6ee1cad8ad78e8c599a67d/687474703a2f2f662e636c2e6c792f6974656d732f303333333278337532743070324e3172304632762f4c696e67756973746963546167676572325f72315f63312e706e67" alt="名詞の種別による色分け" data-canonical-src="http://f.cl.ly/items/03332x3u2t0p2N1r0F2v/LinguisticTagger2_r1_c1.png"></a></p>

<h2>
<span id="スキーム種別" class="fragment"></span><a href="#%E3%82%B9%E3%82%AD%E3%83%BC%E3%83%A0%E7%A8%AE%E5%88%A5"><i class="fa fa-link"></i></a>スキーム種別</h2>

<p>上で使用した <strong><code>NSLinguisticTagSchemeLexicalClass</code>, <code>NSLinguisticTagSchemeNameType</code></strong> 以外に、次のようなスキームが用意されています。</p>

<ul>
<li>
<strong>NSLinguisticTagSchemeTokenType</strong>：「単語」「区切り文字」「ホワイトスペース」「その他」で分解する</li>
<li>
<strong>NSLinguisticTagSchemeLemma</strong>：各単語の原形をタグとして取得する</li>
<li>
<strong>NSLinguisticTagSchemeLanguage</strong>：言語名（"ja", "en",...）をタグとして取得する</li>
<li>
<strong>NSLinguisticTagSchemeScript</strong>：書き文字種別（"Jpan", "Latn",...）をタグとして取得する</li>
<li>
<strong>NSLinguisticTagSchemeNameTypeOrLexicalClass</strong>：<code>NSLinguisticTagSchemeLexicalClass</code>または<code>NSLinguisticTagSchemeNameType</code>にある属性で分解する</li>
</ul>

<h2>
<span id="言語ごとの対応スキームを確認する" class="fragment"></span><a href="#%E8%A8%80%E8%AA%9E%E3%81%94%E3%81%A8%E3%81%AE%E5%AF%BE%E5%BF%9C%E3%82%B9%E3%82%AD%E3%83%BC%E3%83%A0%E3%82%92%E7%A2%BA%E8%AA%8D%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>言語ごとの対応スキームを確認する</h2>

<p><code>availableTagSchemesForLanguage:</code>メソッドを使用すると、引数に指定した言語で利用できるスキームの配列（NSArray型）を取得することができます。</p>

<div class="code-frame" data-lang="objc"><div class="highlight"><pre><span></span><span class="bp">NSArray</span> <span class="o">*</span><span class="n">schemes</span> <span class="o">=</span> <span class="p">[</span><span class="bp">NSLinguisticTagger</span> <span class="nl">availableTagSchemesForLanguage</span><span class="p">:</span><span class="s">@"ja"</span><span class="p">];</span>

<span class="n">NSLog</span><span class="p">(</span><span class="s">@"schemes:%@"</span><span class="p">,</span> <span class="n">schemes</span><span class="p">);</span>
</pre></div></div>

<p>上記コードの実行結果は、</p>

<div class="code-frame" data-lang="objc"><div class="highlight"><pre><span></span><span class="nl">schemes</span><span class="p">:(</span>
    <span class="n">TokenType</span><span class="p">,</span>
    <span class="n">Language</span><span class="p">,</span>
    <span class="n">Script</span>
<span class="p">)</span>
</pre></div></div>

<p>となりました。（iPhone 6.1 Simulatorで実行）</p>

<p>つまり、"ja"（日本語）で利用できるスキームは<code>NSLinguisticTagSchemeTokenType</code>, <code>NSLinguisticTagSchemeLanguage</code>, <code>NSLinguisticTagSchemeScript</code>の3種のみであることがわかります。</p>

<p>一方、引数に "en"（英語）を指定しての実行結果は、次のようになりました。</p>

<div class="code-frame" data-lang="objc"><div class="highlight"><pre><span></span><span class="nl">schemes</span><span class="p">:(</span>
    <span class="n">TokenType</span><span class="p">,</span>
    <span class="n">Language</span><span class="p">,</span>
    <span class="n">Script</span><span class="p">,</span>
    <span class="n">Lemma</span><span class="p">,</span>
    <span class="n">LexicalClass</span><span class="p">,</span>
    <span class="n">NameType</span><span class="p">,</span>
    <span class="n">NameTypeOrLexicalClass</span>
<span class="p">)</span>
</pre></div></div>

<p><strong>英語ではすべてのスキームが利用可能</strong>であることがわかります。</p>

<h2>
<span id="日本語の形態素解析を行う" class="fragment"></span><a href="#%E6%97%A5%E6%9C%AC%E8%AA%9E%E3%81%AE%E5%BD%A2%E6%85%8B%E7%B4%A0%E8%A7%A3%E6%9E%90%E3%82%92%E8%A1%8C%E3%81%86"><i class="fa fa-link"></i></a>日本語の形態素解析を行う</h2>

<p>日本語は英語と違い、単語の間がスペースで区切られていません。そこで自然言語処理を行う際のベースとなる処理として、「形態素解析」という、文を形態素（言語で意味を持つ最小単位）に分解する処理が必要となります。</p>

<p>前項で<code>availableTagSchemesForLanguage:</code>メソッドを用いて調べたとおり、英語と比較すると日本語の対応スキームは少ないですが、<code>NSLinguisticTagSchemeTokenType</code>には対応しているので、単語への分解が可能です。すなわち、<code>NSLinguisticTagger</code>を用いて<strong>日本語の形態素解析</strong>を行うことができます。</p>

<p>スキームに<code>NSLinguisticTagSchemeTokenType</code>を指定し、<code>string</code>プロパティに日本語の文字列を渡すだけ、つまり英語の場合と実装方法は同じなので、詳細な説明は省略します。</p>

<h2>
<span id="nsstringのカテゴリを利用する" class="fragment"></span><a href="#nsstring%E3%81%AE%E3%82%AB%E3%83%86%E3%82%B4%E3%83%AA%E3%82%92%E5%88%A9%E7%94%A8%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>NSStringのカテゴリを利用する</h2>

<p>NSLinguisticTagger.h には、NSString のカテゴリも定義されており、<strong>NSLinguisticTaggerを使用せず NSStringだけ</strong>でも同様の処理ができるようになっています。</p>

<p>NSStringに追加された<code>enumerateLinguisticTagsInRange:scheme:options:orthography:usingBlock:</code>というメソッドを使用します。使い方は<code>NSLinguisticTagger</code>とほぼ同様です。</p>

<div class="code-frame" data-lang="objc"><div class="highlight"><pre><span></span><span class="bp">NSString</span> <span class="o">*</span><span class="n">targetText</span> <span class="o">=</span> <span class="nb">self</span><span class="p">.</span><span class="n">textView</span><span class="p">.</span><span class="n">text</span><span class="p">;</span>

<span class="p">[</span><span class="n">targetText</span> <span class="nl">enumerateLinguisticTagsInRange</span><span class="p">:</span><span class="n">NSMakeRange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">targetText</span><span class="p">.</span><span class="n">length</span><span class="p">)</span>
                              <span class="nl">scheme</span><span class="p">:</span><span class="n">NSLinguisticTagSchemeLexicalClass</span>
                             <span class="nl">options</span><span class="p">:</span><span class="mi">0</span>
                         <span class="nl">orthography</span><span class="p">:</span><span class="nb">nil</span>
                          <span class="nl">usingBlock</span><span class="p">:</span>
 <span class="o">^</span><span class="p">(</span><span class="bp">NSString</span> <span class="o">*</span><span class="n">tag</span><span class="p">,</span> <span class="n">NSRange</span> <span class="n">tokenRange</span><span class="p">,</span> <span class="n">NSRange</span> <span class="n">sentenceRange</span><span class="p">,</span> <span class="kt">BOOL</span> <span class="o">*</span><span class="n">stop</span><span class="p">)</span> <span class="p">{</span>

     <span class="c1">// トークン取得時の処理</span>
 <span class="p">}];</span>
</pre></div></div>

<h2>
<span id="サンプルコード" class="fragment"></span><a href="#%E3%82%B5%E3%83%B3%E3%83%97%E3%83%AB%E3%82%B3%E3%83%BC%E3%83%89"><i class="fa fa-link"></i></a>サンプルコード</h2>

<p>Githubにアップしてあります。</p>

<p><a href="https://github.com/shu223/LinguisticTaggerSample" rel="nofollow noopener" target="_blank">LinguisticTaggerSample</a></p>

<h2>
<span id="参考資料" class="fragment"></span><a href="#%E5%8F%82%E8%80%83%E8%B3%87%E6%96%99"><i class="fa fa-link"></i></a>参考資料</h2>

<ul>
<li><a href="http://www.amazon.co.jp/exec/obidos/ASIN/4798032034/22301-22/ref=nosim/" rel="nofollow noopener" target="_blank">詳解iOS5プログラミング</a></li>
<li><a href="http://developer.apple.com/library/ios/#documentation/cocoa/reference/NSLinguisticTagger_Class/Reference/Reference.html" rel="nofollow noopener" target="_blank">NSLinguisticTagger Class Reference</a></li>
</ul>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>shu223さんの<br />20位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>98</kbd>
		<a target="_blank" href="https://qiita.com/shu223/items/c72ca6d3c7de0e0d63ba">APIクライアントをAFNetworkingを用いてつくる手順</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-09-08 15:58:06</center>
	</td>
	<td style="width:200px;">
		@shu223<br />(Freelancer 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/3180/profile-images/1473682733">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Objective-C]</b> <b>[iPhone]</b> <b>[Xcode]</b> <b>[iOS]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>「ちょっとこの Web API 使ってなんかつくってみるか」ということがたまにある（とくにハッカソンで）ので、手早くつくれるように僕なりの手順をまとめてみました。</p>

<p>「共通処理の実装」までは簡単な文字列の置換で済むので、 <strong>ファイルテンプレートにしておく</strong> とより簡単になりそうです（参考：<a href="http://qiita.com/shu223/items/5d8a245e5743f77df9eb" id="reference-c9f00859560695e1a135">Xcodeのファイルテンプレートを自作する</a>）。</p>

<h2>
<span id="1-共通処理の実装" class="fragment"></span><a href="#1-%E5%85%B1%E9%80%9A%E5%87%A6%E7%90%86%E3%81%AE%E5%AE%9F%E8%A3%85"><i class="fa fa-link"></i></a>1. 共通処理の実装</h2>

<p>APIキーをセットするメソッドの定義と実装と、オブジェクト初期化用のメソッド実装。</p>

<h3>
<span id="ヘッダ" class="fragment"></span><a href="#%E3%83%98%E3%83%83%E3%83%80"><i class="fa fa-link"></i></a>ヘッダ</h3>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>+ (void)setAPIKey:(NSString *)APIKey;
</pre></div></div>

<h3>
<span id="実装ファイル" class="fragment"></span><a href="#%E5%AE%9F%E8%A3%85%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB"><i class="fa fa-link"></i></a>実装ファイル</h3>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>#import "AFJSONRequestOperation.h"
</pre></div></div>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>#define API_BASE_URL      @"http://xxxx"
</pre></div></div>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>@interface XXXX ()
@property (nonatomic) NSString *APIKey;
@end
</pre></div></div>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>+ (XXXX *)sharedClient
{
    static XXXX *sharedClient = nil;

    static dispatch_once_t onceToken;
    dispatch_once(&amp;onceToken, ^{
        sharedClient = [[XXXX alloc] initWithBaseURL:[NSURL URLWithString:API_BASE_URL]];
    });

    return sharedClient;
}

- (id)initWithBaseURL:(NSURL *)url
{
    if (self = [super initWithBaseURL:url]) {

        [self registerHTTPOperationClass:[AFJSONRequestOperation class]];
        [self setParameterEncoding:AFJSONParameterEncoding];
        [self setDefaultHeader:@"Accept"     value:@"application/json"];
    }

    return self;
}

+ (void)setAPIKey:(NSString *)APIKey {

    [[XXXX sharedClient] setAPIKey:APIKey];
}
</pre></div></div>

<h2>
<span id="2-汎用privateメソッドの実装" class="fragment"></span><a href="#2-%E6%B1%8E%E7%94%A8private%E3%83%A1%E3%82%BD%E3%83%83%E3%83%89%E3%81%AE%E5%AE%9F%E8%A3%85"><i class="fa fa-link"></i></a>2. 汎用Privateメソッドの実装</h2>

<p>ここは各サービスの仕様に合わせて実装を変える必要がある。APIキーをセットする、とか、そのサービスにおけるAPIをたたく際の共通の処理をここで行う。</p>

<p>（APIキーをパラメータに渡す場合）</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>- (NSMutableURLRequest *)requestWithMethod:(NSString *)method
                                      path:(NSString *)path
                                parameters:(NSDictionary *)parameters
{
    NSAssert(self.APIKey, @"API Key has not been set.\n\n");

    path = [path stringByAppendingFormat:@"?api_key=%@", self.APIKey];

    for (NSString *key in [parameters keyEnumerator]) {

        NSString *value = [NSString stringWithFormat:@"%@",
                           [parameters valueForKey:key]];

        NSAssert2([key length] &amp;&amp; [value length],
                  @"invalid param! key:%@: value:%@", key, value);

        path = [path stringByAppendingFormat:@"&amp;%@=%@", key, value];
    }

    NSMutableURLRequest *req = [super requestWithMethod:method
                                                   path:path
                                             parameters:nil];

    return req;
}
</pre></div></div>

<h2>
<span id="3-各apiに対応したメソッドを書く" class="fragment"></span><a href="#3-%E5%90%84api%E3%81%AB%E5%AF%BE%E5%BF%9C%E3%81%97%E3%81%9F%E3%83%A1%E3%82%BD%E3%83%83%E3%83%89%E3%82%92%E6%9B%B8%E3%81%8F"><i class="fa fa-link"></i></a>3. 各APIに対応したメソッドを書く</h2>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>- (void)companyWithName:(NSString *)name
                handler:(void (^)(NSDictionary *result, NSError *error))handler
{
    NSAssert([name length], @"name is required");

    __weak XXXX *weakSelf = self;

    dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);
    dispatch_async(queue, ^{

        NSString *path = [NSString stringWithFormat:@"company/%@.js", name];

        [weakSelf getPath:path
               parameters:nil
                  success:^(AFHTTPRequestOperation *operation, id responseObject) {

                      dispatch_async(dispatch_get_main_queue(), ^{

                          handler(responseObject, nil);
                      });

                  } failure:^(AFHTTPRequestOperation *operation, NSError *error) {

                      dispatch_async(dispatch_get_main_queue(), ^{

                          handler(nil, error);
                      });
                  }];
    });
}
</pre></div></div>

<h2>
<span id="サンプル" class="fragment"></span><a href="#%E3%82%B5%E3%83%B3%E3%83%97%E3%83%AB"><i class="fa fa-link"></i></a>サンプル</h2>

<p>この手順でつくったAPIクライアント</p>

<ul>
<li>
<a href="https://github.com/shu223/CrunchBase-API-Client-for-iOS" rel="nofollow noopener" target="_blank">CrunchBase API Client for iOS</a>

<ul>
<li>米国のテック系企業の情報が詰まったデータベース『CrunchBase』のAPIクライアント</li>
<li>記事：<a href="http://d.hatena.ne.jp/shu223/20130908/1378616621" rel="nofollow noopener" target="_blank">CrunchBase APIをiOSアプリで使用する手順のメモ、およびAPIクライアントつくりました</a>
</li>
</ul>
</li>
<li>
<a href="https://github.com/shu223/Klout-API-Client-for-iOS" rel="nofollow noopener" target="_blank">Klout API Client for iOS</a>

<ul>
<li>Klout スコアを取得するAPIクライアント</li>
<li>記事：<a href="http://d.hatena.ne.jp/shu223/20130908/1378629298" rel="nofollow noopener" target="_blank">Kloutスコアを取得するライブラリをつくりました</a>
</li>
</ul>
</li>
</ul>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>shu223さんの<br />21位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>96</kbd>
		<a target="_blank" href="https://qiita.com/shu223/items/78af3e20b4d6cd18f8a6"> Instrumentsを使用せず、プログラムから空きメモリ量や使用中のメモリ量、CPU負荷を取得する</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-01-06 11:26:00</center>
	</td>
	<td style="width:200px;">
		@shu223<br />(Freelancer 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/3180/profile-images/1473682733">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Objective-C]</b> <b>[iPhone]</b> <b>[iOS]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;">
<h2>
<span id="デバイスの空きメモリ量を取得する" class="fragment"></span><a href="#%E3%83%87%E3%83%90%E3%82%A4%E3%82%B9%E3%81%AE%E7%A9%BA%E3%81%8D%E3%83%A1%E3%83%A2%E3%83%AA%E9%87%8F%E3%82%92%E5%8F%96%E5%BE%97%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>デバイスの空きメモリ量を取得する</h2>

<p>host_statistics() を使用して、vm_statistics_data_t 構造体を取得します。その中の free_count という値が空きメモリ量を示しています。（この値の単位はページ数なので、単位をバイトに変換するためにはページサイズを掛ける必要があります。）</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>#import &lt;mach/mach.h&gt;

+ (unsigned int)getFreeMemory {

    mach_port_t host_port;
    mach_msg_type_number_t host_size;
    vm_size_t pagesize;

    host_port = mach_host_self();
    host_size = sizeof(vm_statistics_data_t) / sizeof(integer_t);
    host_page_size(host_port, &amp;pagesize);
    vm_statistics_data_t vm_stat;

    if (host_statistics(host_port, HOST_VM_INFO, (host_info_t)&amp;vm_stat, &amp;host_size) != KERN_SUCCESS) {
        NSLog(@"Failed to fetch vm statistics");
        return 0;
    }

    natural_t mem_free = vm_stat.free_count * pagesize;

    return (unsigned int)mem_free;
}        
</pre></div></div>

<h2>
<span id="アプリが使用しているメモリ量を取得する" class="fragment"></span><a href="#%E3%82%A2%E3%83%97%E3%83%AA%E3%81%8C%E4%BD%BF%E7%94%A8%E3%81%97%E3%81%A6%E3%81%84%E3%82%8B%E3%83%A1%E3%83%A2%E3%83%AA%E9%87%8F%E3%82%92%E5%8F%96%E5%BE%97%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>アプリが使用しているメモリ量を取得する</h2>

<p>タスク（いわゆるプロセス）の基本情報を取得するための関数 task_info() を使用して、task_basic_info 構造体を取得します。その中の resident_size という値が、物理メモリ使用量（バイト）を示しています。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>struct task_basic_info basic_info;
mach_msg_type_number_t t_info_count = TASK_BASIC_INFO_COUNT;
kern_return_t status;

status = task_info(current_task(), TASK_BASIC_INFO,
                   (task_info_t)&amp;basic_info, &amp;t_info_count);

if (status != KERN_SUCCESS)
{
    NSLog(@"%s(): Error in task_info(): %s",
          __FUNCTION__, strerror(errno));
}

vm_size_t residentSize = basic_info.resident_size;
</pre></div></div>

<h2>
<span id="アプリの-cpu-負荷を取得する" class="fragment"></span><a href="#%E3%82%A2%E3%83%97%E3%83%AA%E3%81%AE-cpu-%E8%B2%A0%E8%8D%B7%E3%82%92%E5%8F%96%E5%BE%97%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>アプリの CPU 負荷を取得する</h2>

<p>使用メモリ量を取得する際に用いた task_info() は第2引数に渡す値に応じて様々な情報を得ることができます。</p>

<p><a href="http://web.mit.edu/darwin/src/modules/xnu/osfmk/man/task_info.html" rel="nofollow noopener" target="_blank">task_info の man page</a></p>

<p>メモリ使用量を取得する場合には TASK_BASIC_INFO を指定しましたが、 TASK_THREAD_TIMES_INFO を指定することで実行中のスレッドの CPU 使用時間を取得することができます。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>struct task_thread_times_info thread_info;
t_info_count = TASK_THREAD_TIMES_INFO_COUNT;
kern_return_t status;

status = task_info(current_task(), TASK_THREAD_TIMES_INFO,
                   (task_info_t)&amp;thread_info, &amp;t_info_count);

if (status != KERN_SUCCESS) {
    NSLog(@"%s(): Error in task_info(): %s",
          __FUNCTION__, strerror(errno));
    return;
}

uint64_t userTime   = tval2msec(thread_info.user_time);
</pre></div></div>

<p>上記コードで用いている tval2msec は time_value_t 型で得られた CPU 使用時間を msec に変換するためのマクロです。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>#define tval2msec(tval) ((tval.seconds * 1000) + (tval.microseconds / 1000))
</pre></div></div>

<h2>
<span id="アプリ内でメモリ使用量と-cpu-負荷をリアルタイム表示" class="fragment"></span><a href="#%E3%82%A2%E3%83%97%E3%83%AA%E5%86%85%E3%81%A7%E3%83%A1%E3%83%A2%E3%83%AA%E4%BD%BF%E7%94%A8%E9%87%8F%E3%81%A8-cpu-%E8%B2%A0%E8%8D%B7%E3%82%92%E3%83%AA%E3%82%A2%E3%83%AB%E3%82%BF%E3%82%A4%E3%83%A0%E8%A1%A8%E7%A4%BA"><i class="fa fa-link"></i></a>アプリ内でメモリ使用量と CPU 負荷をリアルタイム表示</h2>

<p>上記の方法で取得したメモリ使用量と CPU 負荷、加えて View の数をアプリ内にリアルタイム表示するクラスを公開しています。よろしければご利用ください。</p>

<p>stats<br>
<a href="http://d.hatena.ne.jp/shu223/20110428/1303930059" rel="nofollow noopener" target="_blank">http://d.hatena.ne.jp/shu223/20110428/1303930059</a></p>

<p><a href="https://camo.qiitausercontent.com/2a655e2d312b190689db88d7ee41200bf6a5074b/687474703a2f2f73332e616d617a6f6e6177732e636f6d2f636f636f61636f6e74726f6c735f70726f64756374696f6e2f696f735f73637265656e732f313236352f66756c6c2e706e673f31333439323234393230" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/2a655e2d312b190689db88d7ee41200bf6a5074b/687474703a2f2f73332e616d617a6f6e6177732e636f6d2f636f636f61636f6e74726f6c735f70726f64756374696f6e2f696f735f73637265656e732f313236352f66756c6c2e706e673f31333439323234393230" alt="stats" data-canonical-src="http://s3.amazonaws.com/cocoacontrols_production/ios_screens/1265/full.png?1349224920"></a></p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>shu223さんの<br />22位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>95</kbd>
		<a target="_blank" href="https://qiita.com/shu223/items/e776cd80f7ef1eff9c39">vImageで画像処理を行う</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-02-07 13:18:35</center>
	</td>
	<td style="width:200px;">
		@shu223<br />(Freelancer 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/3180/profile-images/1473682733">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Objective-C]</b> <b>[iPhone]</b> <b>[Xcode]</b> <b>[iOS]</b> <b>[画像処理]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>vImageとは、iOS5からAccelerate.frameworkに追加された高速画像処理ライブラリです。特徴は何といっても<strong>ハードウェア向けに最適化されていて高速</strong>という点です。WWDC2011のセッション209 "Inside the Accelerate Framework" によると、vImageを使わないで書いたコードよりも14倍高速という結果が出ていました。また同セッションの資料には、消費電力が抑えられるという報告もあります。</p>

<p>ここでは、画像処理の基本演算である畳み込み演算を行う関数<code>vImageConvolve_ARGB8888</code>を用いて画像にフィルタをかける方法を紹介します。</p>

<h2>
<span id="準備" class="fragment"></span><a href="#%E6%BA%96%E5%82%99"><i class="fa fa-link"></i></a>準備</h2>

<ol>
<li>Accelerateフレームワークをプロジェクトに追加する</li>
<li>Accelerate.hをインポートする</li>
</ol>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>#import &lt;Accelerate/Accelerate.h&gt;
</pre></div></div>

<h2>
<span id="入力画像のビットマップデータを取得" class="fragment"></span><a href="#%E5%85%A5%E5%8A%9B%E7%94%BB%E5%83%8F%E3%81%AE%E3%83%93%E3%83%83%E3%83%88%E3%83%9E%E3%83%83%E3%83%97%E3%83%87%E3%83%BC%E3%82%BF%E3%82%92%E5%8F%96%E5%BE%97"><i class="fa fa-link"></i></a>入力画像のビットマップデータを取得</h2>

<p><code>vImageConvolve_ARGB8888</code>の引数に渡すため、UIImageとして読み込んだ入力画像のビットマップデータを取得します。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>const size_t width = self.size.width;
const size_t height = self.size.height;
const size_t bytesPerRow = width * 4;

CGColorSpaceRef space = CGColorSpaceCreateDeviceRGB();
CGBitmapInfo bitmapInfo = kCGBitmapByteOrderDefault | kCGImageAlphaPremultipliedFirst;
CGContextRef bmContext = CGBitmapContextCreate(NULL, width, height, 8,
                                               bytesPerRow, space,
                                               bitmapInfo);
CGColorSpaceRelease(space);

if (!bmContext) {
    return nil;
}

CGRect dstRect = CGRectMake(0, 0, width, height);
CGContextDrawImage(bmContext, dstRect, self.CGImage);

UInt8 *data = (UInt8 *)CGBitmapContextGetData(bmContext);
if (!data) {
    CGContextRelease(bmContext);
    return nil;
}

vImage_Buffer src = {data, height, width, bytesPerRow};
</pre></div></div>

<h2>
<span id="出力画像のメモリ領域を確保" class="fragment"></span><a href="#%E5%87%BA%E5%8A%9B%E7%94%BB%E5%83%8F%E3%81%AE%E3%83%A1%E3%83%A2%E3%83%AA%E9%A0%98%E5%9F%9F%E3%82%92%E7%A2%BA%E4%BF%9D"><i class="fa fa-link"></i></a>出力画像のメモリ領域を確保</h2>

<p>入力画像と同サイズの出力画像用のメモリ領域を確保します。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>const size_t dstSize = sizeof(UInt8) * width * height * 4;
void *dstData = malloc(dstSize);
vImage_Buffer dst = {dstData, height, width, bytesPerRow};
</pre></div></div>

<h2>
<span id="畳み込み処理を実行" class="fragment"></span><a href="#%E7%95%B3%E3%81%BF%E8%BE%BC%E3%81%BF%E5%87%A6%E7%90%86%E3%82%92%E5%AE%9F%E8%A1%8C"><i class="fa fa-link"></i></a>畳み込み処理を実行</h2>

<p><code>vImageConvolve_ARGB8888</code>を実行します。引数が多く複雑に見えますが、どれも畳み込み処理にある程度汎用性を持たせようとすると必要なものばかりです。</p>

<p>下記サンプルコードは、画像全体にガウシアンブラーフィルタをかける場合の例です。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>vImageConvolve_ARGB8888(&amp;src,   // const vImage_Buffer *src
                        &amp;dst,   // const vImage_Buffer *dest
                        NULL,   // void *tempBuffer
                        0,      // vImagePixelCount srcOffsetToROI_X
                        0,      // vImagePixelCount srcOffsetToROI_Y
                        gaussianblur_kernel,    // const int16_t *kernel
                        5,      // uint32_t kernel_height
                        5,      // uint32_t kernel_width
                        256,    // int32_t divisor
                        NULL,   // Pixel_8888 backgroundColor
                        kvImageCopyInPlace  // vImage_Flags flags
                        );

</pre></div></div>

<p>ここでは、このサンプルでポイントとなる引数に絞って補足します。</p>

<p>まず、第1引数と第2引数は、それぞれ入力画像と出力画像のvImage_Buffer構造体へのポインタです。前項と前々項で用意したものを渡しています。</p>

<p>そして重要なのが第6引数"kernel"で、渡している値gaussianblur_kernelは、次のように定義された配列へのポインタです。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>static int16_t gaussianblur_kernel[25] = {
    1, 4, 6, 4, 1, 
    4, 16, 24, 16, 4,
    6, 24, 36, 24, 6,
    4, 16, 24, 16, 4,
    1, 4, 6, 4, 1
};
</pre></div></div>

<p>5x5のガウシアンブラーフィルタのカーネルの値が格納されています。</p>

<p>第7、第8引数はこのカーネルの高さと幅、第9引数"divisor"はこのカーネルの値の合計値です。"divisor"は畳み込み演算の際に値を正規化するために指定します。</p>

<h2>
<span id="処理結果をuiimageに変換" class="fragment"></span><a href="#%E5%87%A6%E7%90%86%E7%B5%90%E6%9E%9C%E3%82%92uiimage%E3%81%AB%E5%A4%89%E6%8F%9B"><i class="fa fa-link"></i></a>処理結果をUIImageに変換</h2>

<p>処理後のビットマップデータから<code>CGBitmapContextCreateImage</code>関数を用いてCGImageRefオブジェクトを生成し、そこから<code>imageWithCGImage:</code>メソッドを用いてUIImageオブジェクトを生成します。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>memcpy(data, dstData, dstSize);
free(dstData);

CGImageRef blurredImageRef = CGBitmapContextCreateImage(bmContext);
UIImage* blurred = [UIImage imageWithCGImage:blurredImageRef];

CGImageRelease(blurredImageRef);
CGContextRelease(bmContext);
</pre></div></div>

<p>以上が、入力画像のUIImageから、vImageの<code>vImageConvolve_ARGB8888</code>関数を用いて畳み込み処理を行った出力画像をUIImageとして取得するまでの手順です。</p>

<p><a href="https://camo.qiitausercontent.com/a11a30039a78576f940a90a968d5fb18df0b313f/687474703a2f2f662e636c2e6c792f6974656d732f343030613155337a3376307133653045314230332f76496d6167655f626c75722e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/a11a30039a78576f940a90a968d5fb18df0b313f/687474703a2f2f662e636c2e6c792f6974656d732f343030613155337a3376307133653045314230332f76496d6167655f626c75722e706e67" alt="ブラーサンプル" data-canonical-src="http://f.cl.ly/items/400a1U3z3v0q3e0E1B03/vImage_blur.png"></a></p>

<h2>
<span id="他のフィルタ処理を行う" class="fragment"></span><a href="#%E4%BB%96%E3%81%AE%E3%83%95%E3%82%A3%E3%83%AB%E3%82%BF%E5%87%A6%E7%90%86%E3%82%92%E8%A1%8C%E3%81%86"><i class="fa fa-link"></i></a>他のフィルタ処理を行う</h2>

<p>同じ<code>vImageConvolve_ARGB8888</code>関数を用いて、第6引数"kernel"の配列をいろいろと変えることで、様々なフィルタ効果を得ることができます。</p>

<p>以下ではカーネルの配列と、<code>vImageConvolve_ARGB8888</code>をコールする部分のみサンプルを示します。カーネルの配列に合わせて<code>vImageConvolve_ARGB8888</code>の第7〜第9引数を変えている点にご注目ください。</p>

<p><strong>エンボス</strong></p>

<p><a href="https://camo.qiitausercontent.com/ada26fee194a7d7cceaa18b3f047e7001abf0276/687474703a2f2f662e636c2e6c792f6974656d732f3238316f314831673277343033443035317534342f76496d6167655f656d626f73732e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/ada26fee194a7d7cceaa18b3f047e7001abf0276/687474703a2f2f662e636c2e6c792f6974656d732f3238316f314831673277343033443035317534342f76496d6167655f656d626f73732e706e67" alt="エンボスサンプル" data-canonical-src="http://f.cl.ly/items/281o1H1g2w403D051u44/vImage_emboss.png"></a></p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>static int16_t emboss_kernel[9] = {
    -2, 0, 0, 
    0, 1, 0, 
    0, 0, 2
};
</pre></div></div>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>vImageConvolve_ARGB8888(&amp;src,
                        &amp;dst,
                        NULL,
                        0,
                        0,
                        emboss_kernel,
                        3,
                        3,
                        1,
                        NULL,
                        kvImageCopyInPlace);
</pre></div></div>

<p><strong>先鋭化</strong></p>

<p><a href="https://camo.qiitausercontent.com/58595145948837f834228ae4e014e051f3d24d69/687474703a2f2f662e636c2e6c792f6974656d732f317331393142337a3065326833433374313731532f76496d6167655f7368617270656e2e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/58595145948837f834228ae4e014e051f3d24d69/687474703a2f2f662e636c2e6c792f6974656d732f317331393142337a3065326833433374313731532f76496d6167655f7368617270656e2e706e67" alt="先鋭化サンプル" data-canonical-src="http://f.cl.ly/items/1s191B3z0e2h3C3t171S/vImage_sharpen.png"></a></p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>static int16_t sharpen_kernel[9] = {
    -1, -1, -1, 
    -1, 9, -1, 
    -1, -1, -1
};
</pre></div></div>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>vImageConvolve_ARGB8888(&amp;src,
                        &amp;dst,
                        NULL,
                        0,
                        0,
                        sharpen_kernel,
                        3,
                        3,
                        1,
                        NULL,
                        kvImageCopyInPlace);

</pre></div></div>

<p><strong>エッジ検出</strong></p>

<p>(後ほど画像を貼付けます)</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>static int16_t edgedetect_kernel[9] = {
 -1, -1, -1, 
 -1, 8, -1, 
 -1, -1, -1
 };
</pre></div></div>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>vImageConvolve_ARGB8888(&amp;src,
                        &amp;dst,
                        NULL,
                        0,
                        0,
                        edgedetect_kernel,
                        3,
                        3,
                        1,
                        backgroundColorBlack,
                        kvImageCopyInPlace);
</pre></div></div>

<p>※処理結果を視認しやすくするために、第10引数で背景色を指定しています。</p>

<h2>
<span id="サンプルコード" class="fragment"></span><a href="#%E3%82%B5%E3%83%B3%E3%83%97%E3%83%AB%E3%82%B3%E3%83%BC%E3%83%89"><i class="fa fa-link"></i></a>サンプルコード</h2>

<p>vImageCategoryという、vImageによる画像処理を行えるクラスと、そのデモプロジェクトを下記リポジトリにて公開しています。</p>

<p><a href="https://github.com/shu223/vImageCategory" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/shu223/vImageCategory</a></p>

<p>UIImage のカテゴリとして作ってあってAPIも下記のようにシンプルにしてあります。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>// Convolution Oprations
- (UIImage *)gaussianBlur;
- (UIImage *)edgeDetection;
- (UIImage *)emboss;
- (UIImage *)sharpen;
- (UIImage *)unsharpen;

// Geometric Operations
- (UIImage *)rotateInRadians:(float)radians;

// Morphological Operations
- (UIImage *)dilate;
- (UIImage *)erode;
- (UIImage *)dilateWithIterations:(int)iterations;
- (UIImage *)erodeWithIterations:(int)iterations;
- (UIImage *)gradientWithIterations:(int)iterations;
- (UIImage *)tophatWithIterations:(int)iterations;
- (UIImage *)blackhatWithIterations:(int)iterations;

// Histogram Operations
- (UIImage *)equalization;
</pre></div></div>

<p>ここでは紹介していない、<strong>回転や膨張、収縮</strong>の機能も入っているので、それらを使用する際のサンプルとしてもご参照ください。</p>

<p><a href="https://camo.qiitausercontent.com/d0cddeeab29bcc50f0435232f1b0cd097869c5a8/687474703a2f2f662e636c2e6c792f6974656d732f304b33633366313032343334326d30583174336f2f76496d6167655f64656d6f5f72315f63312e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/d0cddeeab29bcc50f0435232f1b0cd097869c5a8/687474703a2f2f662e636c2e6c792f6974656d732f304b33633366313032343334326d30583174336f2f76496d6167655f64656d6f5f72315f63312e706e67" alt="処理結果サンプル" data-canonical-src="http://f.cl.ly/items/0K3c3f1024342m0X1t3o/vImage_demo_r1_c1.png"></a></p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>shu223さんの<br />23位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>93</kbd>
		<a target="_blank" href="https://qiita.com/shu223/items/bce33f6ab448c90e4d2b">【iOS7】ばねっぽいアニメーションを実現するUIViewの新メソッド</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2014-02-06 15:12:24</center>
	</td>
	<td style="width:200px;">
		@shu223<br />(Freelancer 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/3180/profile-images/1473682733">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Objective-C]</b> <b>[iOS]</b> <b>[アニメーション]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>iOS7から追加された、 <strong>ばね風のタイミングカーブでアニメーションさせることのできるUIViewのメソッド</strong> <code>animateWithDuration:delay:usingSpringWithDamping:initialSpringVelocity:options:animations:completion:</code> （101文字）を使ってみました。</p>

<p>メソッドの定義はこんな感じです。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>+ (void)animateWithDuration:(NSTimeInterval)duration
                      delay:(NSTimeInterval)delay
     usingSpringWithDamping:(CGFloat)dampingRatio
      initialSpringVelocity:(CGFloat)velocity
                    options:(UIViewAnimationOptions)options
                 animations:(void (^)(void))animations
                 completion:(void (^)(BOOL finished))completion;
</pre></div></div>

<p>引数が多いですが、ほとんどは従来のアニメーションメソッドと同じなので、ポイントは <code>dampingRatio</code> と <code>velocity</code> の２つだけ。</p>

<h2>
<span id="dampingratio" class="fragment"></span><a href="#dampingratio"><i class="fa fa-link"></i></a>dampingRatio</h2>

<p>UIView.h の UIViewAnimationWithBlocks カテゴリとして定義されている部分を読むと、</p>

<blockquote>
<p>When <code>dampingRatio</code> is 1, the animation will smoothly decelerate to its final model values without oscillating. Damping ratios less than 1 will oscillate more and more before coming to a complete stop. </p>
</blockquote>

<p>とあります。</p>

<ul>
<li>1のときは振動することなく最終値に向かって滑らかに減速する</li>
<li>1以下でより小さいほど完全に停止するまでの振動が大きくなる</li>
</ul>

<p>とのこと。</p>

<h2>
<span id="velocity" class="fragment"></span><a href="#velocity"><i class="fa fa-link"></i></a>velocity</h2>

<p>同じく UIView.h の UIViewAnimationWithBlocks カテゴリとして定義されている部分を読むと、</p>

<blockquote>
<p>You can use the initial spring velocity to specify how fast the object at the end of the simulated spring was moving before it was attached. It's a unit coordinate system, where 1 is defined as travelling the total animation distance in a second. So if you're changing an object's position by 200pt in this animation, and you want the animation to behave as if the object was moving at 100pt/s before the animation started, you'd pass 0.5. You'll typically want to pass 0 for the velocity.</p>
</blockquote>

<p>とあります。</p>

<p>ばねの初速を意味し、</p>

<ul>
<li>この値の "1" は "アニメーションで移動する距離全体を1秒で移動する" ことを意味する</li>
<li>たとえばアニメーション全体で200ポイント移動する場合に、初速を100ポイント/sにしたかったら、0.5を指定する</li>
<li>とりあえず0を指定しとけ</li>
</ul>

<p>とのことです。</p>

<h2>
<span id="サンプル" class="fragment"></span><a href="#%E3%82%B5%E3%83%B3%E3%83%97%E3%83%AB"><i class="fa fa-link"></i></a>サンプル</h2>

<p><a href="http://d.hatena.ne.jp/shu223/20130924/1379990718" rel="nofollow noopener" target="_blank">iOS7 Sampler</a>にサンプルコードを追加しました。</p>

<p><a href="https://camo.qiitausercontent.com/528afe0a2347ebeb124ca16445ccfe5e2b5413a2/687474703a2f2f662e636c2e6c792f6974656d732f3153316e3377304d31333271336d3432343330422f737072696e67616e696d6174696f6e5f72315f63312e6a7067" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/528afe0a2347ebeb124ca16445ccfe5e2b5413a2/687474703a2f2f662e636c2e6c792f6974656d732f3153316e3377304d31333271336d3432343330422f737072696e67616e696d6174696f6e5f72315f63312e6a7067" alt="" data-canonical-src="http://f.cl.ly/items/1S1n3w0M132q3m42430B/springanimation_r1_c1.jpg"></a></p>

<p>スライダーで <code>dampingRatio</code> と <code>velocity</code> を調整しつつ挙動を確認できます。</p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>shu223さんの<br />24位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>92</kbd>
		<a target="_blank" href="https://qiita.com/shu223/items/3809f9a6e0945554bc37">openFrameworks for iOS の日本語チュートリアル記事まとめ</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-12-09 13:56:58</center>
	</td>
	<td style="width:200px;">
		@shu223<br />(Freelancer 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/3180/profile-images/1473682733">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Objective-C]</b> <b>[iPhone]</b> <b>[iOS]</b> <b>[openFrameworks]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p><strong>openFrameworks を iOS アプリで使う際に参考になる記事</strong> をまとめました。</p>

<p>ただまとめるだけだと自分の習性として「あとで見ない」ので、 <strong>中身を軽く見たうえで、どんな情報が書かれているか</strong> についても触れています。</p>

<h2>
<span id="グラフィックス系" class="fragment"></span><a href="#%E3%82%B0%E3%83%A9%E3%83%95%E3%82%A3%E3%83%83%E3%82%AF%E3%82%B9%E7%B3%BB"><i class="fa fa-link"></i></a>グラフィックス系</h2>

<h3>
<span id="openframeworks--iphoneでオリジナルのカメラアプリを作る--yoppa-org" class="fragment"></span><a href="#openframeworks--iphone%E3%81%A7%E3%82%AA%E3%83%AA%E3%82%B8%E3%83%8A%E3%83%AB%E3%81%AE%E3%82%AB%E3%83%A1%E3%83%A9%E3%82%A2%E3%83%97%E3%83%AA%E3%82%92%E4%BD%9C%E3%82%8B--yoppa-org"><i class="fa fa-link"></i></a><a href="http://yoppa.org/iphone10/1163.html" rel="nofollow noopener" target="_blank">openFrameworks + iPhoneで、オリジナルのカメラアプリを作る | yoppa org</a>
</h3>

<ul>
<li>ofxiPhoneImagePicker アドオンを使用してカメラアプリをつくる</li>
<li>ofImage のビットマップ情報にアクセスして画像処理を行う</li>
<li>glBlendFunc で画面の描画を加算合成にしたり、ofCircle で円を描画したり。</li>
</ul>

<p><a href="https://camo.qiitausercontent.com/b8b856fcea5ffcc482c6b0605ba9d987f20f72f9/687474703a2f2f69322e77702e636f6d2f6c68342e67677068742e636f6d2f5f533974434e76646d3374552f535f5a343641636c7550492f41414141414141414466382f414b57446c495f32447a342f733430302f73637265656e254546254243253838323031302d30352d323125323032312e30372e31362545462542432538392e6a7067" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/b8b856fcea5ffcc482c6b0605ba9d987f20f72f9/687474703a2f2f69322e77702e636f6d2f6c68342e67677068742e636f6d2f5f533974434e76646d3374552f535f5a343641636c7550492f41414141414141414466382f414b57446c495f32447a342f733430302f73637265656e254546254243253838323031302d30352d323125323032312e30372e31362545462542432538392e6a7067" width="200" data-canonical-src="http://i2.wp.com/lh4.ggpht.com/_S9tCNvdm3tU/S_Z46AcluPI/AAAAAAAADf8/AKWDlI_2Dz4/s400/screen%EF%BC%882010-05-21%2021.07.16%EF%BC%89.jpg"></a></p>

<p><a href="https://camo.qiitausercontent.com/bb3e30eb2667e2f76389313020de91013d9581bb/687474703a2f2f69312e77702e636f6d2f6c68332e67677068742e636f6d2f5f533974434e76646d3374552f535f5a3436326b52646a492f41414141414141414467452f4f747666793653345a62512f733430302f73637265656e254546254243253838323031302d30352d323125323032312e30392e35372545462542432538392e6a7067" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/bb3e30eb2667e2f76389313020de91013d9581bb/687474703a2f2f69312e77702e636f6d2f6c68332e67677068742e636f6d2f5f533974434e76646d3374552f535f5a3436326b52646a492f41414141414141414467452f4f747666793653345a62512f733430302f73637265656e254546254243253838323031302d30352d323125323032312e30392e35372545462542432538392e6a7067" width="200" data-canonical-src="http://i1.wp.com/lh3.ggpht.com/_S9tCNvdm3tU/S_Z462kRdjI/AAAAAAAADgE/Otvfy6S4ZbQ/s400/screen%EF%BC%882010-05-21%2021.09.57%EF%BC%89.jpg"></a></p>

<h3>
<span id="openframeworks-for-iphone画像ファイルを読み込むアニメーションを作成する--yoppa-org" class="fragment"></span><a href="#openframeworks-for-iphone%E7%94%BB%E5%83%8F%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%82%92%E8%AA%AD%E3%81%BF%E8%BE%BC%E3%82%80%E3%82%A2%E3%83%8B%E3%83%A1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E3%82%92%E4%BD%9C%E6%88%90%E3%81%99%E3%82%8B--yoppa-org"><i class="fa fa-link"></i></a><a href="http://yoppa.org/iphone10/1359.html" rel="nofollow noopener" target="_blank">openFrameworks for iPhone：画像ファイルを読み込む、アニメーションを作成する | yoppa org</a>
</h3>

<ul>
<li>ofImageを使用して各種画像ファイルを読み込み、描画</li>
<li>アニメーションは、配列に格納しておいた画像をdraw()で順番に描画するだけ</li>
<li>ofImage – freeImageライブラリをopenFrameworksで使用しやすいようにしたクラス

<ul>
<li>ただのUIImageのラッパーじゃない</li>
</ul>
</li>
</ul>

<h3>
<span id="openframeworks-for-iphoneお絵描きアプリを作る--yoppa-org" class="fragment"></span><a href="#openframeworks-for-iphone%E3%81%8A%E7%B5%B5%E6%8F%8F%E3%81%8D%E3%82%A2%E3%83%97%E3%83%AA%E3%82%92%E4%BD%9C%E3%82%8B--yoppa-org"><i class="fa fa-link"></i></a><a href="http://yoppa.org/iphone10/1403.html" rel="nofollow noopener" target="_blank">openFrameworks for iPhone：お絵描きアプリを作る | yoppa org</a>
</h3>

<ul>
<li>タッチイベントを利用して ofCircle とかで円を描画したり、距離が開いたところを補完したり。</li>
</ul>

<h3>
<span id="画像をタッチ編集-アートなiphoneカメラアプリを作る---it" class="fragment"></span><a href="#%E7%94%BB%E5%83%8F%E3%82%92%E3%82%BF%E3%83%83%E3%83%81%E7%B7%A8%E9%9B%86-%E3%82%A2%E3%83%BC%E3%83%88%E3%81%AAiphone%E3%82%AB%E3%83%A1%E3%83%A9%E3%82%A2%E3%83%97%E3%83%AA%E3%82%92%E4%BD%9C%E3%82%8B---it"><i class="fa fa-link"></i></a><a href="http://www.atmarkit.co.jp/ait/articles/1205/08/news141.html" rel="nofollow noopener" target="_blank">画像をタッチ編集！ アートなiPhoneカメラアプリを作る - ＠IT</a>
</h3>

<ul>
<li>画面をタッチした場所に応じて画像処理をかける。</li>
</ul>

<h2>
<span id="サウンド系" class="fragment"></span><a href="#%E3%82%B5%E3%82%A6%E3%83%B3%E3%83%89%E7%B3%BB"><i class="fa fa-link"></i></a>サウンド系</h2>

<h3>
<span id="openframeworks--iphone-マルチタッチイベントの取得音アプリを作る--yoppa-org" class="fragment"></span><a href="#openframeworks--iphone-%E3%83%9E%E3%83%AB%E3%83%81%E3%82%BF%E3%83%83%E3%83%81%E3%82%A4%E3%83%99%E3%83%B3%E3%83%88%E3%81%AE%E5%8F%96%E5%BE%97%E9%9F%B3%E3%82%A2%E3%83%97%E3%83%AA%E3%82%92%E4%BD%9C%E3%82%8B--yoppa-org"><i class="fa fa-link"></i></a><a href="http://yoppa.org/iphone10/1146.html" rel="nofollow noopener" target="_blank">openFrameworks + iPhone マルチタッチイベントの取得、音アプリを作る | yoppa org</a>
</h3>

<ul>
<li>OpenAL（ofxALSoundPlayerアドオン）の使い方</li>
</ul>

<p>ちなみに完全に余談ですが、OpenALを使用してiOSで 3D空間に音源を配置する方法については拙著でも触れています。</p>

<div class="">
<div class=""><a href="http://www.amazon.co.jp/exec/obidos/ASIN/4798038180/22301-22/ref=nosim/" rel="nofollow noopener" target="_blank"><img src="https://camo.qiitausercontent.com/5da2d8d202c54d1af8033ff041fe09673c46a261/687474703a2f2f6563782e696d616765732d616d617a6f6e2e636f6d2f696d616765732f492f343169457a70717258634c2e5f534c3136305f2e6a7067" alt="iOSアプリ開発達人のレシピ100―開発現場で実証された実用コード集" data-canonical-src="http://ecx.images-amazon.com/images/I/41iEzpqrXcL._SL160_.jpg"></a></div>
<div class="">
<div class="">
<a href="http://www.amazon.co.jp/exec/obidos/ASIN/4798038180/22301-22/ref=nosim/" rel="nofollow noopener" target="_blank">iOSアプリ開発達人のレシピ100―開発現場で実証された実用コード集</a><div class=""></div>
</div>

<h3>
<span id="openframeworks-for-iphoneサウンドの録音再生--yoppa-org" class="fragment"></span><a href="#openframeworks-for-iphone%E3%82%B5%E3%82%A6%E3%83%B3%E3%83%89%E3%81%AE%E9%8C%B2%E9%9F%B3%E5%86%8D%E7%94%9F--yoppa-org"><i class="fa fa-link"></i></a><a href="http://yoppa.org/iphone10/1317.html" rel="nofollow noopener" target="_blank">openFrameworks for iPhone：サウンドの録音・再生 | yoppa org</a>
</h3>

<ul>
<li>
<code>ofSoundStreamSetup</code> というのを呼ぶと、音の入出力に関するイベントが発生し <code>audioReceived</code>, <code>audioRequested</code>なるコールバックが呼ばれるようになるらしい</li>
<li>
<code>audioRequested</code> で再生させる音をoutputに渡す際に、バッファの位置や係数を調整し、音程や音程を変える</li>
<li>（これらの処理において iOS SDK のどの API をラップしてるのか、ソース見て確かめる）</li>
</ul>

<h2>
<span id="gui関連" class="fragment"></span><a href="#gui%E9%96%A2%E9%80%A3"><i class="fa fa-link"></i></a>GUI関連</h2>

<p>主に、UIKit と oF を併用する話。</p>

<h3>
<span id="iosのguiをopenframeworksのプロジェクトに追加する--yoppa-org" class="fragment"></span><a href="#ios%E3%81%AEgui%E3%82%92openframeworks%E3%81%AE%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AB%E8%BF%BD%E5%8A%A0%E3%81%99%E3%82%8B--yoppa-org"><i class="fa fa-link"></i></a><a href="http://yoppa.org/blog/2995.html" rel="nofollow noopener" target="_blank">iOSのGUIをopenFrameworksのプロジェクトに追加する | yoppa org</a>
</h3>

<h3>
<span id="openframeworksでiosのguiを使ってみる--like-a-long-sigh" class="fragment"></span><a href="#openframeworks%E3%81%A7ios%E3%81%AEgui%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%A6%E3%81%BF%E3%82%8B--like-a-long-sigh"><i class="fa fa-link"></i></a><a href="http://netdiever.com/archives/11592" rel="nofollow noopener" target="_blank">openFrameworksでiOSのGUIを使ってみる | Like a Long Sigh</a>
</h3>

<p>あ</p>

<h2>
<span id="その他" class="fragment"></span><a href="#%E3%81%9D%E3%81%AE%E4%BB%96"><i class="fa fa-link"></i></a>その他</h2>

<h3>
<span id="perfumeのモーションデータをiphoneアプリにして動かしてみた---it" class="fragment"></span><a href="#perfume%E3%81%AE%E3%83%A2%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E3%83%87%E3%83%BC%E3%82%BF%E3%82%92iphone%E3%82%A2%E3%83%97%E3%83%AA%E3%81%AB%E3%81%97%E3%81%A6%E5%8B%95%E3%81%8B%E3%81%97%E3%81%A6%E3%81%BF%E3%81%9F---it"><i class="fa fa-link"></i></a><a href="http://www.atmarkit.co.jp/ait/articles/1204/03/news125.html" rel="nofollow noopener" target="_blank">PerfumeのモーションデータをiPhoneアプリにして動かしてみた - ＠IT</a>
</h3>

<ul>
<li>Perfumeのモーションキャプチャデータと、それに同梱されているサンプルを、iOS実機で動くよう改変するチュートリアル</li>
</ul>

<p><a href="https://camo.qiitausercontent.com/8abf2ef227d6d043a219de7b8b8e940798a75666/687474703a2f2f662e636c2e6c792f6974656d732f314e314b31703331317a32663245326a306b30522f72313330312e676966" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/8abf2ef227d6d043a219de7b8b8e940798a75666/687474703a2f2f662e636c2e6c792f6974656d732f314e314b31703331317a32663245326a306b30522f72313330312e676966" alt="" data-canonical-src="http://f.cl.ly/items/1N1K1p311z2f2E2j0k0R/r1301.gif"></a></p>

<p><a href="https://camo.qiitausercontent.com/913eea80c5c79226a81b3d5f5b4c1f77c6338b8e/687474703a2f2f662e636c2e6c792f6974656d732f306b30713331305132783373325331663165326b2f72313330322e676966" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/913eea80c5c79226a81b3d5f5b4c1f77c6338b8e/687474703a2f2f662e636c2e6c792f6974656d732f306b30713331305132783373325331663165326b2f72313330322e676966" width="200" data-canonical-src="http://f.cl.ly/items/0k0q310Q2x3s2S1f1e2k/r1302.gif"></a></p>

<ul>
<li>（これは個人的にアツいのであとでやってみる）</li>
</ul>

<h3>
<span id="openframeworks-for-iphoneaddonをつかう--yoppa-org" class="fragment"></span><a href="#openframeworks-for-iphoneaddon%E3%82%92%E3%81%A4%E3%81%8B%E3%81%86--yoppa-org"><i class="fa fa-link"></i></a><a href="http://yoppa.org/iphone10/1213.html" rel="nofollow noopener" target="_blank">openFrameworks for iPhone：Addonをつかう | yoppa org</a>
</h3>

<ul>
<li>標準で入っているアドオンについて軽く解説あり</li>
<li>ofxBox2D の使用サンプル</li>
</ul>

<p><a href="https://camo.qiitausercontent.com/8d987b97aa9a54bc232b5bc52c235ed411ef1840/687474703a2f2f69322e77702e636f6d2f6c68362e67677068742e636f6d2f5f533974434e76646d3374552f5441692d653833757467492f4141414141414141446d6f2f50674b366d75574946734d2f733430302f73637265656e254546254243253838323031302d30362d303425323031372e35302e35312545462542432538392e6a7067" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/8d987b97aa9a54bc232b5bc52c235ed411ef1840/687474703a2f2f69322e77702e636f6d2f6c68362e67677068742e636f6d2f5f533974434e76646d3374552f5441692d653833757467492f4141414141414141446d6f2f50674b366d75574946734d2f733430302f73637265656e254546254243253838323031302d30362d303425323031372e35302e35312545462542432538392e6a7067" alt="" data-canonical-src="http://i2.wp.com/lh6.ggpht.com/_S9tCNvdm3tU/TAi-e83utgI/AAAAAAAADmo/PgK6muWIFsM/s400/screen%EF%BC%882010-06-04%2017.50.51%EF%BC%89.jpg"></a></p>

<h3>
<span id="openframeworks-for-iphonemapkitを利用して地図を表示する--yoppa-org" class="fragment"></span><a href="#openframeworks-for-iphonemapkit%E3%82%92%E5%88%A9%E7%94%A8%E3%81%97%E3%81%A6%E5%9C%B0%E5%9B%B3%E3%82%92%E8%A1%A8%E7%A4%BA%E3%81%99%E3%82%8B--yoppa-org"><i class="fa fa-link"></i></a><a href="http://yoppa.org/iphone10/1262.html" rel="nofollow noopener" target="_blank">openFrameworks for iPhone：MapKitを利用して地図を表示する | yoppa org</a>
</h3>

<ul>
<li>ofxiPhoneMapKit を使用</li>
<li>（MapKit と CoreLocation を単にラップしただけ？ ofxiPhoneMapKit のソース見てみる）</li>
</ul>

<h3>
<span id="openframeworks-for-iphone時計をつくる--yoppa-org" class="fragment"></span><a href="#openframeworks-for-iphone%E6%99%82%E8%A8%88%E3%82%92%E3%81%A4%E3%81%8F%E3%82%8B--yoppa-org"><i class="fa fa-link"></i></a><a href="http://yoppa.org/iphone10/1284.html" rel="nofollow noopener" target="_blank">openFrameworks for iPhone：時計をつくる | yoppa org</a>
</h3>

<ul>
<li>時刻の取得</li>
<li>あとはいろいろな表現方法が例示されているが、oFの使い方として他の記事にないような情報はないかも。</li>
</ul>

<h3>
<span id="hr2_blog-ofxnetworkを使ってiphoneとmacでtcp通信" class="fragment"></span><a href="#hr2_blog-ofxnetwork%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%A6iphone%E3%81%A8mac%E3%81%A7tcp%E9%80%9A%E4%BF%A1"><i class="fa fa-link"></i></a><a href="http://hrhrblog.blogspot.jp/2010/03/iphonemactcpip.html" rel="nofollow noopener" target="_blank">HR2_blog: ofxNetworkを使ってiPhoneとMacでTCP通信</a>
</h3>

<ul>
<li>ofxNetworkを使って、iPhoneとMacを連動させるチュートリアル</li>
<li>（「デバイスAとデバイスBを連動させる」という引き出しはなるべく多く持っておきたいので、これもあとで試す）</li>
</ul>
</div>
</div></div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>shu223さんの<br />25位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>85</kbd>
		<a target="_blank" href="https://qiita.com/shu223/items/9488fc314ff5cd70a8a3">Bluetooth 4.0 および Bluetooth Low Energy (BLE) に関する技術情報のまとめ</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2014-02-13 14:27:35</center>
	</td>
	<td style="width:200px;">
		@shu223<br />(Freelancer 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/3180/profile-images/1473682733">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Objective-C]</b> <b>[iOS]</b> <b>[bluetooth]</b> <b>[iBeacon]</b> <b>[BLE]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>Bluetooth 4.0 や BLE に関して、「あれどこに書いてあったっけ」とならないように自分的お役立ち情報をここにまとめておきます。本記事は随時更新していきます。</p>

<p>（2014.12.22追記）<strong>引用元記事では記述や数値が修正されている部分があります。正確な情報は元記事やBluetooth SIGのドキュメントを参照してください。</strong></p>

<h2>
<span id="bluetoothのはなし2wirelessのおとサイレックステクノロジー株式会社" class="fragment"></span><a href="#bluetooth%E3%81%AE%E3%81%AF%E3%81%AA%E3%81%972wireless%E3%81%AE%E3%81%8A%E3%81%A8%E3%82%B5%E3%82%A4%E3%83%AC%E3%83%83%E3%82%AF%E3%82%B9%E3%83%86%E3%82%AF%E3%83%8E%E3%83%AD%E3%82%B8%E3%83%BC%E6%A0%AA%E5%BC%8F%E4%BC%9A%E7%A4%BE"><i class="fa fa-link"></i></a><a href="http://www.silex.jp/blog/wireless/2012/10/bluetooth2.html" rel="nofollow noopener" target="_blank">Bluetoothのはなし(2)｜Wireless・のおと｜サイレックス・テクノロジー株式会社</a>
</h2>

<p>この記事はちょっと突っ込んだ情報をわかりやすく簡潔に書いてくれていて、とても参考になります。</p>

<h3>
<span id="bluetoothのバージョンについて" class="fragment"></span><a href="#bluetooth%E3%81%AE%E3%83%90%E3%83%BC%E3%82%B8%E3%83%A7%E3%83%B3%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6"><i class="fa fa-link"></i></a>Bluetoothのバージョンについて</h3>

<blockquote>
<p>まず明らかにしておきたいのは、 <strong>「Bluetooth Low Energy(LE)」と「Bluetooth 4.0」という用語の定義は同じではない</strong> 、ということです。「Bluetooth LE」は Bluetooth 4.0 で新たに追加された新しい通信方式ですが、「Bluetooth 4.0」は以前の Bluetooth バージョンの仕様全て(2.1 で追加された高速モードの EDR や、3.0 で追加された超高速モード HS も)を含んでいいます。つまり <strong>「Blueotooth X.X」という表記はプロトコル仕様であってハードウェア仕様を示すものではなく、ハードウェア拡張仕様についてはバージョンの後につく「EDR」とか「HS」とか「LE」によって示される</strong> のです。例を挙げると</p>

<ul>
<li>「Bluetooth 1.2」...1Mbps の Bluetooth (BDR)</li>
<li>「Bluetooth 2.1」...1Mbps の Bluetooth, SSP ペアリングなどの拡張仕様に対応</li>
<li>「Bluetooth 2.1+EDR」...上に加えて 2Mbps/3Mbps の EDR 高速モード対応</li>
<li>「Bluetooth 3.0+EDR」...上に加えて拡張省電力モード(EPC)などに対応</li>
<li>「Bluetooth 3.0+HS」...上に加えて WiFi 利用の超高速モード(HS)に対応</li>
<li>「Bluetooth 4.0+HS」...上に加えて GATT アトリビュートに対応</li>
<li>「Bluetooth 4.0LE」...GATT アトリビュートに対応、LE モードに対応(但し、この表記からBDR/EDR対応状況は読み取れない)</li>
</ul>
</blockquote>

<h3>
<span id="bleで接続時間が改善された理由" class="fragment"></span><a href="#ble%E3%81%A7%E6%8E%A5%E7%B6%9A%E6%99%82%E9%96%93%E3%81%8C%E6%94%B9%E5%96%84%E3%81%95%E3%82%8C%E3%81%9F%E7%90%86%E7%94%B1"><i class="fa fa-link"></i></a>BLEで接続時間が改善された理由</h3>

<blockquote>
<p>レガシイ Bluetooth の場合、１対のマスター・スレーブが使用する通信周波数は 1MHz 幅 79 本のチャネルを 625 μ秒単位で出鱈目に(疑似乱数に沿って)飛びまわります。Bluetooth のホッピングは徹底しており、デバイス検索時の問い合わせ手順(Inquiry)すら周波数はホッピングします。これは、PAN(Personal Area Network)の一種である Bluetooth においては多くの機器が高い密度で密集すると考えられたため、スペクトラム拡散(Spread Spectrum)を用いて周波数衝突を避けようとした設計だと思われます。</p>

<p>しかしこの結果、レガシイ Bluetooth では <strong>デバイス検索においてもマスター・スレーブ間のホッピングパターン同期手順が必要</strong> となり、ペアリングの成立していないデバイス検索には長くて数秒** 、ペアリングが成立しているデバイスの再接続にも最短で 0.1 秒程度の時間を要することになりました。これは携帯電話のヘッドセットのような用途には許容できる時間ですが、センサー・ネットワークのように「数秒に一度、十数バイト程度のデータ」を送信する用途においては消費電力や応答時間の点で不利になります。</p>

<p>Bluetooth LE ではチャネルの数を 79 から 40 に半減させて周波数精度の要求を下げ、40 本あるチャネルのうち 3 本を「Advertise Channel」として予約し、デバイス検出は常にこの 3 本の周波数を使うように仕様が単純化されました。このため、 <strong>デバイスの検索～接続～通信に要する遅延時間は 10msec 未満に短縮された</strong> と言われています。<br>
&lt;&lt;</p>
</blockquote>

<h3>
<span id="connection-intervalの時間単位" class="fragment"></span><a href="#connection-interval%E3%81%AE%E6%99%82%E9%96%93%E5%8D%98%E4%BD%8D"><i class="fa fa-link"></i></a>Connection Intervalの時間単位</h3>

<blockquote>
<p>「Connection Interval」時間単位( <strong>1.25msec の整数倍</strong> )</p>
</blockquote>

<h3>
<span id="同時接続可能な台数" class="fragment"></span><a href="#%E5%90%8C%E6%99%82%E6%8E%A5%E7%B6%9A%E5%8F%AF%E8%83%BD%E3%81%AA%E5%8F%B0%E6%95%B0"><i class="fa fa-link"></i></a>同時接続可能な台数</h3>

<blockquote>
<p>レガシイ Bluetooth の一大制約だった「１台のマスターに同時接続・通信可能なスレーブ数が最大７台」という 3bit のリンクアドレス長は 32bit に大幅拡張され、 <strong>実用上無制限のスレーブが接続可能</strong> になっています。</p>
</blockquote>

<h2>
<span id="bluetoothのはなし5wirelessのおとサイレックステクノロジー株式会社" class="fragment"></span><a href="#bluetooth%E3%81%AE%E3%81%AF%E3%81%AA%E3%81%975wireless%E3%81%AE%E3%81%8A%E3%81%A8%E3%82%B5%E3%82%A4%E3%83%AC%E3%83%83%E3%82%AF%E3%82%B9%E3%83%86%E3%82%AF%E3%83%8E%E3%83%AD%E3%82%B8%E3%83%BC%E6%A0%AA%E5%BC%8F%E4%BC%9A%E7%A4%BE"><i class="fa fa-link"></i></a><a href="http://www.silex.jp/blog/wireless/2013/02/bluetooth5.html" rel="nofollow noopener" target="_blank">Bluetoothのはなし(5)｜Wireless・のおと｜サイレックス・テクノロジー株式会社</a>
</h2>

<p>上の記事と同じシリーズ。この回では <strong>Bluetoothを本気で使おうとすると必ず悩まされる「WiFiとBluetoothの干渉」問題</strong> について詳しくかつわかりやすく書かれています。</p>

<h3>
<span id="wifiとbluetoothの干渉" class="fragment"></span><a href="#wifi%E3%81%A8bluetooth%E3%81%AE%E5%B9%B2%E6%B8%89"><i class="fa fa-link"></i></a>WiFiとBluetoothの干渉</h3>

<blockquote>
<p>WiFi(2.4GHz) と Bluetooth は <strong>同じ周波数帯域</strong> を使います。なので <strong>両者が同時に稼動すると干渉が発生することを避けられません。</strong> 両者が同じ室内で稼動する程度であれば「ある程度」の干渉で済むのですが、 <strong>携帯電話のように小型機器に WiFi と Bluetooth を実装するシステムでは深刻な影響が出ます。</strong> 小型機器では実装面積が足りず WiFi と Bluetooth のアンテナが隣接することを避けがたい(場合によっては共用アンテナを使うこともある)ため、干渉の影響が桁違いに大きくなるためです。</p>
</blockquote>

<h3>
<span id="干渉による影響" class="fragment"></span><a href="#%E5%B9%B2%E6%B8%89%E3%81%AB%E3%82%88%E3%82%8B%E5%BD%B1%E9%9F%BF"><i class="fa fa-link"></i></a>干渉による影響</h3>

<blockquote>
<p>WiFi と Bluetooth の電波が衝突すると</p>

<ul>
<li>WiFi から見た場合：チャネル内に Bluetooth の電波が入ると、一部のサブキャリアが崩れる。</li>
<li>Bluetooth から見た場合：ホッピング通信しているなかで  <strong>WiFi チャネルと衝突したフレームが消える</strong> 。</li>
</ul>

<p>という影響が出ます。</p>

<p>WiFi と Bluetooth がぶつかると、WiFi はパケット損失を検出し送信レートを落とす(シンボル冗長度を上げ、変調精度を下げる)ため性能微減、Bluetooth は損失したパケットをタイムアウトで検出し再送する(このとき FH によって以前衝突したのとは違う周波数で再送される確率が高い)ので性能大減というような影響となって現われます。</p>
</blockquote>

<h3>
<span id="電波の強さ" class="fragment"></span><a href="#%E9%9B%BB%E6%B3%A2%E3%81%AE%E5%BC%B7%E3%81%95"><i class="fa fa-link"></i></a>電波の強さ</h3>

<blockquote>
<p>電波の強さも両者で異なっており、一般的な WiFi システムが送信出力 15dBm(30mW) 前後なのに対し、Bluetooth Class2 は 4dBm (2.5mW) 以下です。つまり一般的には、 <strong>WiFi と Bluetooth がぶつかると Bluetooth が負けることが多い</strong> のです。</p>
</blockquote>

<h2>
<span id="ble---通信の基礎---エンジニアの備忘録" class="fragment"></span><a href="#ble---%E9%80%9A%E4%BF%A1%E3%81%AE%E5%9F%BA%E7%A4%8E---%E3%82%A8%E3%83%B3%E3%82%B8%E3%83%8B%E3%82%A2%E3%81%AE%E5%82%99%E5%BF%98%E9%8C%B2"><i class="fa fa-link"></i></a><a href="https://sites.google.com/site/bluexeyexcrow/bluetooth/ble_basic" rel="nofollow noopener" target="_blank">BLE - 通信の基礎 - エンジニアの備忘録</a>
</h2>

<h3>
<span id="connection-intervalの最小間隔" class="fragment"></span><a href="#connection-interval%E3%81%AE%E6%9C%80%E5%B0%8F%E9%96%93%E9%9A%94"><i class="fa fa-link"></i></a>Connection Intervalの最小間隔</h3>

<blockquote>
<p>Connection Intervalは、iOSに対応したBLE機器の場合、 <strong>37.5msecが最小間隔</strong> になっており、それ以上の通信をおこなうことはありません。<br>
そのため、 <strong>Characteristicの読み書きには通常は 40msec ほどの時間が掛かる</strong> と思ってプログラムを組む必要があります。各OSのBLE APIが非同期処理になっているのもこのような理由があるからと思います。</p>
</blockquote>

<h3>
<span id="送信データサイズ" class="fragment"></span><a href="#%E9%80%81%E4%BF%A1%E3%83%87%E3%83%BC%E3%82%BF%E3%82%B5%E3%82%A4%E3%82%BA"><i class="fa fa-link"></i></a>送信データサイズ</h3>

<blockquote>
<p>一回の通信でやりとりできるデータのサイズは  <strong>20バイトほどが基本単位</strong> になっているので、現在のBLE機器のCharacteristicのサイズも 20バイト以下になっているものが多いです。</p>

<p>BLE仕様では、より大きなCharacteristicのRead/Writeを可能にするプロトコルもありますが、それらをサポートしていないOSもあるので、当面は Characteristicは 20バイト程度以下と思ってよいと思います。</p>
</blockquote>

<h3>
<span id="readwriteの頻度について" class="fragment"></span><a href="#readwrite%E3%81%AE%E9%A0%BB%E5%BA%A6%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6"><i class="fa fa-link"></i></a>Read/Writeの頻度について</h3>

<blockquote>
<p>ひとつのRead/Writeをおこなった後に、その <strong>応答が返ってくる前に次のRead/Writeをおこなうことは、BLE仕様としては認められていない</strong> ので、その点も注意が必要です。</p>

<p>大抵のOSはRead/Writeの要求をキューによりシリアライズしているようなので、特に意識する必要はなさそうですが、あまり大量のRead/Writeをおこなうと、キュー詰まりが起きて、レスポンスが悪くなることがあります。</p>

<p>効率よく通信をおこないたいのであれば、アプリケーションの実装側で Read/Writeの頻度やタイミングをうまく調整した方が良いでしょう。</p>
</blockquote>

<h3>
<span id="通信途絶によるコネクションクローズ後の再接続について" class="fragment"></span><a href="#%E9%80%9A%E4%BF%A1%E9%80%94%E7%B5%B6%E3%81%AB%E3%82%88%E3%82%8B%E3%82%B3%E3%83%8D%E3%82%AF%E3%82%B7%E3%83%A7%E3%83%B3%E3%82%AF%E3%83%AD%E3%83%BC%E3%82%BA%E5%BE%8C%E3%81%AE%E5%86%8D%E6%8E%A5%E7%B6%9A%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6"><i class="fa fa-link"></i></a>通信途絶によるコネクションクローズ後の再接続について</h3>

<blockquote>
<p>BLE通信の Link Layerでは、GATTの通信の有無に関わらず、Connection Interval毎に常に通信をおこなっており、もし数秒間その通信が途絶えるとリンクが切れたと判断されて、コネクションがクローズします。</p>

<p>CentralまたはPeripheralのどちらかが明確にコネクションをクローズしたときはすぐに切断状態になりますが、上記の <strong>通信途絶によるクローズ直後は相手側がまだ切断を認識していないことがありますので、その場合、すぐには再接続ができないことになります。</strong> </p>
</blockquote>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>shu223さんの<br />26位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>82</kbd>
		<a target="_blank" href="https://qiita.com/shu223/items/8a1d064411a2a122983d">UIKit で物理演算エンジンを使用する</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-05-01 09:15:24</center>
	</td>
	<td style="width:200px;">
		@shu223<br />(Freelancer 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/3180/profile-images/1473682733">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Objective-C]</b> <b>[iPhone]</b> <b>[Xcode]</b> <b>[iOS]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>cocos2d や Unity などのゲームエンジンや openFrameworks では、標準で物理演算エンジンがサポートされていて手軽に扱えますが、ビューを作成したり画像を表示したりといった基本的な部分の実装方法や、ものによっては使用言語も違うため、「物理演算エンジンを使用したい」というだけの場合はかえって導入障壁が高くなる場合もあります。</p>

<p>それらを使用せず、UIKit ベースでの iOS アプリケーションに物理演算エンジンを単体で導入する方法、すなわち <strong>UIView オブジェクトを剛体として物理演算に基づいて動かす</strong>方法を紹介します。</p>

<p><a href="https://camo.qiitausercontent.com/c232754385ebba218287a1d7b7721b70b68ceb4a/687474703a2f2f662e636c2e6c792f6974656d732f306931413159334133593163316a3071326633612f426f7832445f72315f63312e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/c232754385ebba218287a1d7b7721b70b68ceb4a/687474703a2f2f662e636c2e6c792f6974656d732f306931413159334133593163316a3071326633612f426f7832445f72315f63312e706e67" alt="" data-canonical-src="http://f.cl.ly/items/0i1A1Y3A3Y1c1j0q2f3a/Box2D_r1_c1.png"></a></p>

<h2>
<span id="準備" class="fragment"></span><a href="#%E6%BA%96%E5%82%99"><i class="fa fa-link"></i></a>準備</h2>

<p><strong>1. Box2D のソースをダウンロード</strong></p>

<p>適当なフォルダで、次のように svn の checkout を実行します。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>svn checkout http://box2d.googlecode.com/svn/trunk/ box2d-read-only
</pre></div></div>

<p><strong>2. Box2Dをプロジェクトに追加</strong></p>

<p>box2d-read-only/Box2D/Box2D フォルダごと、プロジェクトに追加します。</p>

<p><strong>3. Box2Dのヘッダファイルのパスを登録</strong></p>

<p>Build Settings の "Header Search Path" に</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>${PROJECT_DIR}
</pre></div></div>

<p>を登録します。</p>

<p><strong>4. 拡張子を変更</strong></p>

<p>Box2D は C++ で書かれているため、Objective-C++ としてコンパイルされるよう、Box2D を使用するクラスファイルの拡張子を .mm にします。</p>

<p><strong>5. ヘッダをインポート</strong></p>

<p>手順4で拡張子を .mm にしたクラスで、ヘッダをインポートします。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>#import &lt;Box2D/Box2D.h&gt;
</pre></div></div>

<p>問題がなければ、この時点で<strong>ビルドに成功</strong>します。</p>

<h2>
<span id="物理ワールドと地面の設定" class="fragment"></span><a href="#%E7%89%A9%E7%90%86%E3%83%AF%E3%83%BC%E3%83%AB%E3%83%89%E3%81%A8%E5%9C%B0%E9%9D%A2%E3%81%AE%E8%A8%AD%E5%AE%9A"><i class="fa fa-link"></i></a>物理ワールドと地面の設定</h2>

<p><strong>1. メンバ変数を宣言</strong></p>

<p>物理ワールドを保持するためのメンバ変数を宣言します。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>@interface ViewController ()
{
    b2World *world;
}
@end
</pre></div></div>

<p><strong>2. 物理ワールドを生成</strong></p>

<p>まず、重力を b2Vec2 型で設定します。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>b2Vec2 gravity;
gravity.Set(0.0f, -9.81f);
</pre></div></div>

<p>9.81 は地球表面での重力加速度です。Box2D の座標系が<strong>左下を (0, 0) として右上に向かって大きくなる</strong>ので、重力値は下に向かうという意味でマイナスの符号がついています。</p>

<p>次に設定した重力の値をコンストラクタの引数に渡して b2World 型の物理ワールド（物理演算でシミュレーションする空間）を生成します。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>world = new b2World(gravity);
world-&gt;SetContinuousPhysics(true);
</pre></div></div>

<p><strong>3. 壁の剛体を生成</strong></p>

<p>画面の上下左右に当たり判定のある壁を生成します。</p>

<p>まず、壁の剛体を b2Body 型として生成します。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>// 壁の剛体を定義
b2BodyDef edgeBodyDef;
edgeBodyDef.position.Set(0, 0);

// 壁の剛体を生成
b2Body *edgeBody = world-&gt;CreateBody(&amp;edgeBodyDef);
</pre></div></div>

<p>次に、壁の形状を設定します。上下左右に壁を設けるため、形状の型として b2EdgeShape を使用します。</p>

<p>上下左右のそれぞれの辺ごとに両端の座標を設定し、壁の剛体として生成した b2Body オブジェクトに<code>CreateFixture</code>メソッドを用いてセットします。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>// 壁の形状を設定
b2EdgeShape edgeShape;
float32 widthByMeter  = screenSize.width  / kPointsPerMeter;
float32 heightByMeter = screenSize.height / kPointsPerMeter;

// 下
edgeShape.Set(b2Vec2(0, 0),
              b2Vec2(widthByMeter, 0));
edgeBody-&gt;CreateFixture(&amp;edgeShape, 0);

// 上
edgeShape.Set(b2Vec2(0, heightByMeter),
              b2Vec2(widthByMeter, heightByMeter));
edgeBody-&gt;CreateFixture(&amp;edgeShape, 0);

// 左
edgeShape.Set(b2Vec2(0, heightByMeter),
              b2Vec2(0, 0));
edgeBody-&gt;CreateFixture(&amp;edgeShape, 0);

// 右
edgeShape.Set(b2Vec2(widthByMeter, heightByMeter),
              b2Vec2(widthByMeter, 0));
edgeBody-&gt;CreateFixture(&amp;edgeShape, 0);
</pre></div></div>

<p>上記コードで用いている <code>kPointPerMeter</code> は、「UIKit におけるポイント単位での長さを、Box2D の世界における長さの単位であるメートルに変換する」ための定数で、サンプルでは次のように定義してあります。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>#define kPointsPerMeter 16
</pre></div></div>

<p>この定義は、1メートル＝16ポイントということを意味しています。</p>

<h2>
<span id="uiviewオブジェクトの剛体を生成" class="fragment"></span><a href="#uiview%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AE%E5%89%9B%E4%BD%93%E3%82%92%E7%94%9F%E6%88%90"><i class="fa fa-link"></i></a>UIViewオブジェクトの剛体を生成</h2>

<p>UIView オブジェクト（UIView または UIView を継承するクラスのオブジェクト）に対して b2Body 型の剛体を生成します。ここでは次のように、「引数に渡された UIView オブジェクトに対して剛体を生成する」メソッドを実装します。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>- (void)addPhysicalBodyForView:(UIView *)physicalView {

    CGSize screenSize = self.view.bounds.size;
    CGPoint pos = physicalView.center;
    CGSize physicalSize = physicalView.bounds.size;

    // 剛体を定義
    b2BodyDef bodyDef;
    bodyDef.type = b2_dynamicBody;
    bodyDef.position.Set(pos.x / kPointsPerMeter,
                         (screenSize.height - pos.y) / kPointsPerMeter);
    bodyDef.userData = (__bridge void *)physicalView;

    // 剛体を生成
    b2Body *body = world-&gt;CreateBody(&amp;bodyDef);

    // 剛体の形状を設定
    b2PolygonShape dynamicBox;

    CGFloat boxHalfWidth  = physicalSize.width  / kPointsPerMeter / 2.0;
    CGFloat boxHalfHeight = physicalSize.height / kPointsPerMeter / 2.0;
    dynamicBox.SetAsBox(boxHalfWidth, boxHalfHeight);

    // 形状と各種パラメータを剛体にセット
    b2FixtureDef fixtureDef;
    fixtureDef.shape = &amp;dynamicBox;
    fixtureDef.density = 3.0f;
    fixtureDef.restitution = 0.5f;
    body-&gt;CreateFixture(&amp;fixtureDef);
}
</pre></div></div>

<p>ここでは形状の型として「多角形の剛体」を定義できる b2PolygonShape を使用し、<code>SetAsBox</code> メソッドで長方形に設定しています。</p>

<p>また<strong>引数に渡された UIView オブジェクトと生成する剛体とを結びつける</strong>ために、</p>

<ul>
<li>UIView オブジェクトの座標を Box2D の座標形に変換し、b2BodyDef 構造体の position 要素にセットして位置を合わせる</li>
<li>userData 要素にUIView オブジェクトのポインタを格納</li>
</ul>

<p>ということを行っています。</p>

<h2>
<span id="時間を経過させる" class="fragment"></span><a href="#%E6%99%82%E9%96%93%E3%82%92%E7%B5%8C%E9%81%8E%E3%81%95%E3%81%9B%E3%82%8B"><i class="fa fa-link"></i></a>時間を経過させる</h2>

<p>物理演算に基づいて剛体を動かすには、物理ワールドの時間を進める必要があります。</p>

<p>時間管理用のNSTimerを生成します。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>@property (nonatomic, assign) NSTimer *timer;
</pre></div></div>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>self.timer = [NSTimer scheduledTimerWithTimeInterval:1.0/60.0
                                              target:self
                                            selector:@selector(step:)
                                            userInfo:nil
                                             repeats:YES];

</pre></div></div>

<p>ここでは60FPSで動作するようタイマーを生成しています。</p>

<p>時間が1/60秒経過するごとに呼ばれるメソッドを次のように実装します。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>- (void)step:(NSTimer *)timer {

    // 物理ワールドの時間を進める
    int32 velocityIterations = 8;
    int32 positionIterations = 1;

    world-&gt;Step(1.0f/60.0f, velocityIterations, positionIterations);


    // UIViewオブジェクトを剛体に合わせて移動、回転させる
    CGFloat screenHeight = self.view.bounds.size.height;
    for (b2Body *aBody = world-&gt;GetBodyList(); aBody; aBody = aBody-&gt;GetNext())
    {

        if (aBody-&gt;GetUserData() == NULL) {

            continue;
        }

        // 剛体のuserDataに格納されているUIViewオブジェクトへのポインタを取得
        UIView *aView = (__bridge UIView *)aBody-&gt;GetUserData();

        // 剛体の現在位置に合わせUIViewオブジェクトを移動させる
        b2Vec2 bodyPos = aBody-&gt;GetPosition();
        CGFloat newCenterX = bodyPos.x * kPointsPerMeter;
        CGFloat newCenterY = screenHeight - bodyPos.y * kPointsPerMeter;
        aView.center = CGPointMake(newCenterX, newCenterY);

        // 剛体の現在の角度に合わせUIViewオブジェクトを回転させる
        CGAffineTransform transform;
        transform = CGAffineTransformMakeRotation(-aBody-&gt;GetAngle());
        aView.transform = transform;
    }
}
</pre></div></div>

<p>物理ワールドの時間を経過させ、その経過によって生じた<strong>剛体の位置と向きの変化を、剛体に結びつけられた UIView オブジェクトに反映</strong>させています。</p>

<h2>
<span id="タップで剛体を生成" class="fragment"></span><a href="#%E3%82%BF%E3%83%83%E3%83%97%E3%81%A7%E5%89%9B%E4%BD%93%E3%82%92%E7%94%9F%E6%88%90"><i class="fa fa-link"></i></a>タップで剛体を生成</h2>

<p>ビューをタップしたら物理演算に基づいて動作するUIViewオブジェクトを生成するようにします。</p>

<p>次のように UITapGestureRecognizer オブジェクトを生成し、ビューに登録します。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>UIGestureRecognizer *gesture;
gesture = [[UITapGestureRecognizer alloc] initWithTarget:self
                                                  action:@selector(tapped:)];
[self.view addGestureRecognizer:gesture];
</pre></div></div>

<p>そしてタップジェスチャーのハンドラメソッドを次のように実装します。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>- (void)tapped:(UITapGestureRecognizer *)gesture {

    CGRect frame = CGRectMake(0, 0, 50, 30);
    UIView *phisicalView = [[UIView alloc] initWithFrame:frame];
    phisicalView.backgroundColor = [UIColor colorWithRed:0.0
                                                   green:204.0/255.0
                                                    blue:1.0
                                                   alpha:1.0];
    [self.view addSubview:phisicalView];

    CGPoint tappedPos = [gesture locationInView:gesture.view];
    phisicalView.center = tappedPos;

    [self addPhysicalBodyForView:phisicalView];
}
</pre></div></div>

<p>UIViewオブジェクトを新たに生成し、手順『UIViewオブジェクトの剛体を生成』で実装した <code>addPhysicalBodyForView:</code> メソッドでその UIView オブジェクトに対して剛体を生成しています。</p>

<p>以上の手順で、画面をタップすると物理演算に基づいて動く UIView オブジェクトが生成されるようになります。</p>

<h2>
<span id="ワールドの解放" class="fragment"></span><a href="#%E3%83%AF%E3%83%BC%E3%83%AB%E3%83%89%E3%81%AE%E8%A7%A3%E6%94%BE"><i class="fa fa-link"></i></a>ワールドの解放</h2>

<p>生成した物理ワールド（b2World インスタンス）が必要なくなったら、<code>delete</code> で解放します。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>delete(world);
</pre></div></div>

<p>ワールドを解放すると、<code>CreateBody</code> や <code>CreateFixture</code> で生成された剛体やフィクスチャも解放されます。</p>

<p>剛体やフィクスチャを個別に解放したい場合は、それぞれ <code>DestroyBody</code>, <code>DestroyFixture</code> を使用します。</p>

<h2>
<span id="参考資料" class="fragment"></span><a href="#%E5%8F%82%E8%80%83%E8%B3%87%E6%96%99"><i class="fa fa-link"></i></a>参考資料</h2>

<ul>
<li><a href="http://box2d.org/manual.pdf" rel="nofollow noopener" target="_blank">Box2D ユーザーマニュアル</a></li>
<li><a href="http://box2d.org/forum/viewforum.php?f=18" rel="nofollow noopener" target="_blank">Box2D Forums の iPhone ページ</a></li>
</ul>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>shu223さんの<br />27位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>79</kbd>
		<a target="_blank" href="https://qiita.com/shu223/items/1435e424bd398b666a26">openFrameworks × OpenCV で動体検出するiOSアプリをつくる</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-12-10 22:46:43</center>
	</td>
	<td style="width:200px;">
		@shu223<br />(Freelancer 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/3180/profile-images/1473682733">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Objective-C]</b> <b>[Xcode]</b> <b>[iOS]</b> <b>[openFrameworks]</b> <b>[OpenCV]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>openFrameworksとofxOpenCvを使って、 <strong>iPhoneのカメラ入力をリアルタイム解析し、動いている物体を検出する</strong> サンプルを作成する手順です。</p>

<p>ofxOpenCVと、ofVideoGrabberを使用します。</p>

<p>関連記事：<a href="http://qiita.com/shu223/items/8a357b92b50eaeafcf12" id="reference-7d0edb7be5d48b839bf7">openFrameworks - 「iPhoneのカメラからの入力をリアルタイム処理する」ための実装を超簡単にする ofVideoGrabber - Qiita [キータ]</a></p>

<h2>
<span id="プロジェクトの準備" class="fragment"></span><a href="#%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AE%E6%BA%96%E5%82%99"><i class="fa fa-link"></i></a>プロジェクトの準備</h2>

<h3>
<span id="プロジェクト作成" class="fragment"></span><a href="#%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E4%BD%9C%E6%88%90"><i class="fa fa-link"></i></a>プロジェクト作成</h3>

<p>videoGrabberExampleをコピー＆リネームする</p>

<h3>
<span id="アドオンの導入" class="fragment"></span><a href="#%E3%82%A2%E3%83%89%E3%82%AA%E3%83%B3%E3%81%AE%E5%B0%8E%E5%85%A5"><i class="fa fa-link"></i></a>アドオンの導入</h3>

<ol>
<li>プロジェクトのaddonsグループに、ofxOpenCVを追加</li>
<li>[User Header Search Paths] に "../../../addons/ofxOpenCv/libs" を recursive で追加する。</li>
</ol>

<h2>
<span id="実装" class="fragment"></span><a href="#%E5%AE%9F%E8%A3%85"><i class="fa fa-link"></i></a>実装</h2>

<h3>
<span id="ヘッダ" class="fragment"></span><a href="#%E3%83%98%E3%83%83%E3%83%80"><i class="fa fa-link"></i></a>ヘッダ</h3>

<p>ヘッダをinclude</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>#include "ofxOpenCv.h"
</pre></div></div>

<p>メンバ変数を追加</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>ofxCvColorImage     colorImg;
ofxCvGrayscaleImage grayImage;
ofxCvGrayscaleImage grayBg;
ofxCvGrayscaleImage grayDiff;
ofxCvContourFinder  contourFinder;

float   capW;
float   capH;
int     threshold;
bool    bLearnBakground;
</pre></div></div>

<h3>
<span id="タッチイベントのハンドラ" class="fragment"></span><a href="#%E3%82%BF%E3%83%83%E3%83%81%E3%82%A4%E3%83%99%E3%83%B3%E3%83%88%E3%81%AE%E3%83%8F%E3%83%B3%E3%83%89%E3%83%A9"><i class="fa fa-link"></i></a>タッチイベントのハンドラ</h3>

<p>画面をタップしたときにフラグが <code>true</code> になるようにする。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>void testApp::touchDown(ofTouchEventArgs &amp; touch){

    bLearnBakground = true;
}
</pre></div></div>

<h3>
<span id="セットアップ" class="fragment"></span><a href="#%E3%82%BB%E3%83%83%E3%83%88%E3%82%A2%E3%83%83%E3%83%97"><i class="fa fa-link"></i></a>セットアップ</h3>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>void testApp::setup(){  

    // フレームレート
    ofSetFrameRate(20);

    // ofVideoGrabber初期化
    grabber.initGrabber(320, 568, OF_PIXELS_BGRA);

    // 幅、高さ
    capW = grabber.getWidth();
    capH = grabber.getHeight();

    // 各Imageオブジェクトのメモリ確保
    colorImg.allocate(capW,capH);
    grayImage.allocate(capW,capH);
    grayBg.allocate(capW,capH);
    grayDiff.allocate(capW,capH);

    // フラグ、閾値を初期化
    bLearnBakground = true;
    threshold = 80;
}
</pre></div></div>

<h3>
<span id="画像解析" class="fragment"></span><a href="#%E7%94%BB%E5%83%8F%E8%A7%A3%E6%9E%90"><i class="fa fa-link"></i></a>画像解析</h3>

<p>毎フレーム呼ばれる処理。ここで画像解析を行う。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>void testApp::update(){

    ofBackground(255,255,255);

    // カメラ入力取得
    grabber.update();
    colorImg.setFromPixels(grabber.getPixels(), capW, capH);
    grayImage = colorImg;

    // 背景画像取得
    if (bLearnBakground == true) {

        grayBg = grayImage;
        bLearnBakground = false;
    }

    // 差分画像を計算
    grayDiff.absDiff(grayBg, grayImage);
    grayDiff.threshold(threshold);

    // 輪郭抽出
    contourFinder.findContours(grayDiff,        // input
                               20,              // minArea
                               (capW*capH)/3,   // maxArea
                               10,              // nあered
                               true);           // find holes
}
</pre></div></div>

<p>ここでやってる画像解析のアルゴリズム</p>

<ol>
<li>カメラ入力取得</li>
<li>背景画像取得</li>
<li>1と2の差分画像を計算</li>
<li>輪郭抽出</li>
</ol>

<p>輪郭抽出には <a href="http://openframeworks.cc/documentation/ofxOpenCv/ofxCvContourFinder.html#!show_findContours" rel="nofollow noopener" target="_blank">ofxCvContourFinder::findContours()</a> を利用。</p>

<h2>
<span id="描画" class="fragment"></span><a href="#%E6%8F%8F%E7%94%BB"><i class="fa fa-link"></i></a>描画</h2>

<p>得られた各種画像を画面上に描画。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>void testApp::draw(){   

    ofPushMatrix();
    ofScale(0.5, 0.5, 1);
    ofSetHexColor(0xffffff);

    // カメラ入力を描画
    grabber.draw(0, 0);

    // カメラ入力をグレー化した画像を描画
    grayImage.draw(320, 0);

    // 背景画像を描画
    grayBg.draw(0, capH);

    // 差分画像を描画
    grayDiff.draw(320, capH);

    // blob領域を描画
    for (int i = 0; i &lt; contourFinder.blobs.size(); i++){

        contourFinder.blobs[i].draw(capW, capH);
    }

    ofPopMatrix();
}
</pre></div></div>

<h3>
<span id="できあがり" class="fragment"></span><a href="#%E3%81%A7%E3%81%8D%E3%81%82%E3%81%8C%E3%82%8A"><i class="fa fa-link"></i></a>できあがり</h3>

<p><a href="https://camo.qiitausercontent.com/692f37e9fa622b4bf5a741188fbe23b3418c0dca/687474703a2f2f662e636c2e6c792f6974656d732f3141324c316931423368314432693333324b316c2f6f70656e63762e6a7067" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/692f37e9fa622b4bf5a741188fbe23b3418c0dca/687474703a2f2f662e636c2e6c792f6974656d732f3141324c316931423368314432693333324b316c2f6f70656e63762e6a7067" alt="" data-canonical-src="http://f.cl.ly/items/1A2L1i1B3h1D2i332K1l/opencv.jpg"></a></p>

<p>左上から、右下に向かって、</p>

<ul>
<li>元画像</li>
<li>元画像をグレー化した画像</li>
<li>背景画像</li>
<li>差分画像</li>
</ul>

<p>が表示されていて、差分画像上に水色で輪郭が、ピンクでblog領域が描画されています。</p>

<p>（本来は <strong>カメラに手をかざすと、手の輪郭を検出し、指をblobとして抽出してくれる</strong> サンプルなのですが、スクショを取るのに両手が必要で、自動録画をいれるのも面倒だったので、結局手もかざさないスクショとなっています。あと、スクショとるときにぶれています。）</p>

<p>あと、ここまで書いておいてなんですが、実は、opencvExample で</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>#define _USE_LIVE_VIDEO
</pre></div></div>

<p>すれば、これとほぼ同じ実装になります。</p>

<h2>
<span id="いずれ調べる" class="fragment"></span><a href="#%E3%81%84%E3%81%9A%E3%82%8C%E8%AA%BF%E3%81%B9%E3%82%8B"><i class="fa fa-link"></i></a>いずれ調べる</h2>

<h3>
<span id="ofvideograbber-で-iphone-のフロントカメラを使う方法" class="fragment"></span><a href="#ofvideograbber-%E3%81%A7-iphone-%E3%81%AE%E3%83%95%E3%83%AD%E3%83%B3%E3%83%88%E3%82%AB%E3%83%A1%E3%83%A9%E3%82%92%E4%BD%BF%E3%81%86%E6%96%B9%E6%B3%95"><i class="fa fa-link"></i></a>ofVideoGrabber で iPhone のフロントカメラを使う方法</h3>

<ul>
<li>ofVideoGrabberのヘッダをみても、直接セットできそうなメソッドや定数の定義は見当たらなかった。</li>
<li>
<code>setDeviceID(int _deviceID)</code> と <code>listDevices()</code> っていうメソッドがある

<ul>
<li>
<code>listDevices</code> でフロントカメラのデバイスIDを探して、 <code>setDeviceID</code> でセットすると使えるかも</li>
</ul>
</li>
<li>最悪、 <a href="http://qiita.com/shu223/items/8a357b92b50eaeafcf12">AVFoundationVideoGrabber</a> を修正する</li>
</ul>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>shu223さんの<br />28位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>65</kbd>
		<a target="_blank" href="https://qiita.com/shu223/items/b4363d4b41ac96bd23fc">iOSアプリに友達招待機能を追加できる『AppSocially SDK』の使い方</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-09-06 11:08:14</center>
	</td>
	<td style="width:200px;">
		@shu223<br />(Freelancer 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/3180/profile-images/1473682733">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Objective-C]</b> <b>[iPhone]</b> <b>[Xcode]</b> <b>[iOS]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p><a href="https://github.com/appsocially/AppSocially-iOS-SDK" rel="nofollow noopener" target="_blank">AppSocially iOS SDK</a> を使うと、 <strong>たった1行コードを追加するだけで、友達を招待する機能をアプリに追加</strong> することができます。無料で使えて、招待数による従量課金もありません。</p>

<p><a href="https://camo.qiitausercontent.com/d5097745b5e2b7009b4b2034eea77c7e57e585a7/687474703a2f2f63646e2e3530302e636f2f77702d636f6e74656e742f75706c6f6164732f323031332f30352f617070736f6369616c6c795f6c6f676f5f383030783230302e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/d5097745b5e2b7009b4b2034eea77c7e57e585a7/687474703a2f2f63646e2e3530302e636f2f77702d636f6e74656e742f75706c6f6164732f323031332f30352f617070736f6369616c6c795f6c6f676f5f383030783230302e706e67" alt="" data-canonical-src="http://cdn.500.co/wp-content/uploads/2013/05/appsocially_logo_800x200.png"></a></p>

<p>招待の方法もいろいろあって、いまのところ</p>

<ul>
<li><strong>Facebook のチャット</strong></li>
<li><strong>Twitter の DM</strong></li>
<li><strong>メール</strong></li>
<li><strong>SMS</strong></li>
<li><strong>LINE</strong></li>
</ul>

<p>が用意されています。</p>

<p>iOS6 以降は Social.framework によって Facebook や Twitter への投稿がものすごく簡単になりましが、 <strong>DM やチャットは Accounts.framework を用いた認証や、SLRequest で API をハンドリングする処理を自前で</strong> 書かなければならず (*1)、それでいてアプリ毎に固有な差別化要素でもないので、まるっと外部ライブラリに任せてしまえばかなり手間が省けます。</p>

<h2>
<span id="導入方法" class="fragment"></span><a href="#%E5%B0%8E%E5%85%A5%E6%96%B9%E6%B3%95"><i class="fa fa-link"></i></a>導入方法</h2>

<p>上述したとおり、フレームワーク追加、ヘッダインポートといった一般的なライブラリの導入手順をのぞけば、基本的には <strong>メソッドを1つ呼ぶだけ</strong> で導入できます。</p>

<h3>
<span id="1-フレームワークをプロジェクトに追加" class="fragment"></span><a href="#1-%E3%83%95%E3%83%AC%E3%83%BC%E3%83%A0%E3%83%AF%E3%83%BC%E3%82%AF%E3%82%92%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AB%E8%BF%BD%E5%8A%A0"><i class="fa fa-link"></i></a>1. フレームワークをプロジェクトに追加</h3>

<p>GitHubリポジトリから<a href="https://github.com/appsocially/AppSocially-iOS-SDK/releases" rel="nofollow noopener" target="_blank">最新リリース版</a> のzipをダウンロードし、解凍したフォルダ配下にある <strong>AppSocially SDK フォルダごと</strong> プロジェクトに追加します。（フォルダには AppSocially.framework と AppSocially.bundle が入っています。）</p>

<p>また、下記の依存フレームワークもプロジェクトに追加し、</p>

<ul>
<li>Accounts.framework</li>
<li>AddressBook.framework</li>
<li>AddressBookUI.framework</li>
<li>CFNetwork.framework</li>
<li>MessageUI.framework</li>
<li>MobileCoreServices.framework</li>
<li>QuartzCore.framework</li>
<li>Security.framework</li>
<li>Social.framework</li>
<li>SystemConfiguration.framework</li>
<li>libresolv.dylib</li>
<li>libxml2.dylib</li>
<li>libiconv.dylib</li>
</ul>

<p>Build Settings の "Other Linker Flags" に、<code>-ObjC</code> と <code>-all_load</code> を追加しておきます。</p>

<p>このあたりは、サードパーティ製フレームワークを導入する際にはおなじみの手順です。</p>

<h3>
<span id="2-sdkを初期化" class="fragment"></span><a href="#2-sdk%E3%82%92%E5%88%9D%E6%9C%9F%E5%8C%96"><i class="fa fa-link"></i></a>2. SDKを初期化</h3>

<p>AppDelegateでヘッダをインポートし、</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>#import &lt;AppSocially/AppSocially.h&gt;
</pre></div></div>

<p>AppSocially API Key と Facebook APP ID をセットします (*2)。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    [AppSocially setAPIKey:@"5acbd3940b4603f68108ff2efd02e02b"];

    [AppSocially setFacebookAppID:@"117100645022644"];

    // And you code here...

    return YES;
} 
</pre></div></div>

<h3>
<span id="3-招待用アクションシート表示メソッドをコール" class="fragment"></span><a href="#3-%E6%8B%9B%E5%BE%85%E7%94%A8%E3%82%A2%E3%82%AF%E3%82%B7%E3%83%A7%E3%83%B3%E3%82%B7%E3%83%BC%E3%83%88%E8%A1%A8%E7%A4%BA%E3%83%A1%E3%82%BD%E3%83%83%E3%83%89%E3%82%92%E3%82%B3%E3%83%BC%E3%83%AB"><i class="fa fa-link"></i></a>3. 招待用アクションシート表示メソッドをコール</h3>

<p>あとは、<code>showInviteSheetInView:</code> メソッドをコールするだけ。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>[ASInviter showInviteSheetInView:self.view];
</pre></div></div>

<p>このメソッドにより、次のような招待用アクションシートが表示され、</p>

<p><a href="https://camo.qiitausercontent.com/f1670ac8a75b7103e1628854049e9343a2e006a7/687474703a2f2f63646e2d616b2e662e73742d686174656e612e636f6d2f696d616765732f666f746f6c6966652f732f7368753232332f32303133303930352f32303133303930353136303735362e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/f1670ac8a75b7103e1628854049e9343a2e006a7/687474703a2f2f63646e2d616b2e662e73742d686174656e612e636f6d2f696d616765732f666f746f6c6966652f732f7368753232332f32303133303930352f32303133303930353136303735362e706e67" alt="" data-canonical-src="http://cdn-ak.f.st-hatena.com/images/fotolife/s/shu223/20130905/20130905160756.png"></a></p>

<p>あとはSDK内でよしなにやってくれます。</p>

<p>※このアクションシートからの招待は、SDK に同梱されている『FirstSample』というサンプルアプリで、挙動をすぐに試すことができます。</p>

<h2>
<span id="ランディングページのカスタマイズ" class="fragment"></span><a href="#%E3%83%A9%E3%83%B3%E3%83%87%E3%82%A3%E3%83%B3%E3%82%B0%E3%83%9A%E3%83%BC%E3%82%B8%E3%81%AE%E3%82%AB%E3%82%B9%E3%82%BF%E3%83%9E%E3%82%A4%E3%82%BA"><i class="fa fa-link"></i></a>ランディングページのカスタマイズ</h2>

<p>AppSocially では、アプリ毎に最適化を施して招待効果を高められるよう、またクリックやインストールをトラッキングできるように、「 <strong>招待毎</strong> 」にランディングページを生成します。</p>

<p><a href="https://camo.qiitausercontent.com/44c0b64b005d9576f7eff2c7393cd2334c31e41a/687474703a2f2f63646e2d616b2e662e73742d686174656e612e636f6d2f696d616765732f666f746f6c6966652f732f7368753232332f32303133303930352f32303133303930353136303735372e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/44c0b64b005d9576f7eff2c7393cd2334c31e41a/687474703a2f2f63646e2d616b2e662e73742d686174656e612e636f6d2f696d616765732f666f746f6c6966652f732f7368753232332f32303133303930352f32303133303930353136303735372e706e67" alt="" title="facebook chat経由で届いた招待ページ" data-canonical-src="http://cdn-ak.f.st-hatena.com/images/fotolife/s/shu223/20130905/20130905160757.png"></a></p>

<p>デフォルトは上記のようなシンプルなものですが、これを <strong>ダッシュボードで自由にカスタマイズ</strong> できるようになっています。</p>

<h3>
<span id="undaの事例" class="fragment"></span><a href="#unda%E3%81%AE%E4%BA%8B%E4%BE%8B"><i class="fa fa-link"></i></a>Undaの事例</h3>

<p><a href="https://camo.qiitausercontent.com/a136395535a20af47395a5738d997cc910af0296/687474703a2f2f63646e2d616b2e662e73742d686174656e612e636f6d2f696d616765732f666f746f6c6966652f732f7368753232332f32303133303930352f32303133303930353136343332362e6a7067" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/a136395535a20af47395a5738d997cc910af0296/687474703a2f2f63646e2d616b2e662e73742d686174656e612e636f6d2f696d616765732f666f746f6c6966652f732f7368753232332f32303133303930352f32303133303930353136343332362e6a7067" alt="" data-canonical-src="http://cdn-ak.f.st-hatena.com/images/fotolife/s/shu223/20130905/20130905164326.jpg"></a></p>

<p>AppSocially SDK を導入しているビデオメッセンジャーアプリの『 <strong><a href="http://www.unda.me/" rel="nofollow noopener" target="_blank">Unda</a></strong> 』 (<em>3) では、 *</em>招待ランディングページ内に動画を埋め込み** 、</p>

<p><a href="https://camo.qiitausercontent.com/06df52f3fc3a494912a8df1cdddb8bc056bab7fd/687474703a2f2f63646e2d616b2e662e73742d686174656e612e636f6d2f696d616765732f666f746f6c6966652f732f7368753232332f32303133303930352f32303133303930353136303735382e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/06df52f3fc3a494912a8df1cdddb8bc056bab7fd/687474703a2f2f63646e2d616b2e662e73742d686174656e612e636f6d2f696d616765732f666f746f6c6966652f732f7368753232332f32303133303930352f32303133303930353136303735382e706e67" alt="" data-canonical-src="http://cdn-ak.f.st-hatena.com/images/fotolife/s/shu223/20130905/20130905160758.png"></a></p>

<p>招待というよりは、 <strong>まだ Unda を始めていない友達に Facebook chat や Twitter DM、メール、SMS でビデオメッセージを送る</strong> といった見え方になるようなかたちで招待機能が実装されています。</p>

<h3>
<span id="カスタマイズのやりかた" class="fragment"></span><a href="#%E3%82%AB%E3%82%B9%E3%82%BF%E3%83%9E%E3%82%A4%E3%82%BA%E3%81%AE%E3%82%84%E3%82%8A%E3%81%8B%E3%81%9F"><i class="fa fa-link"></i></a>カスタマイズのやりかた</h3>

<p>ページカスタマイズはダッシュボードの『Templates』メニューから行います。</p>

<p><a href="https://camo.qiitausercontent.com/140b04b9018a1f6311ec3a3cbe7ea2d88df424d5/687474703a2f2f63646e2d616b2e662e73742d686174656e612e636f6d2f696d616765732f666f746f6c6966652f732f7368753232332f32303133303930362f32303133303930363038353233322e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/140b04b9018a1f6311ec3a3cbe7ea2d88df424d5/687474703a2f2f63646e2d616b2e662e73742d686174656e612e636f6d2f696d616765732f666f746f6c6966652f732f7368753232332f32303133303930362f32303133303930363038353233322e706e67" alt="" data-canonical-src="http://cdn-ak.f.st-hatena.com/images/fotolife/s/shu223/20130906/20130906085232.png"></a></p>

<p>プレビュー上にある "EDIT" を押すとエディタが開き、編集できるようになります。</p>

<p><a href="https://camo.qiitausercontent.com/0385f13bf83b4d5aa3dbffcdfcd10958bde98054/687474703a2f2f63646e2d616b2e662e73742d686174656e612e636f6d2f696d616765732f666f746f6c6966652f732f7368753232332f32303133303930362f32303133303930363038353631372e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/0385f13bf83b4d5aa3dbffcdfcd10958bde98054/687474703a2f2f63646e2d616b2e662e73742d686174656e612e636f6d2f696d616765732f666f746f6c6966652f732f7368753232332f32303133303930362f32303133303930363038353631372e706e67" alt="" data-canonical-src="http://cdn-ak.f.st-hatena.com/images/fotolife/s/shu223/20130906/20130906085617.png"></a></p>

<p><strong>基本的に HTML + CSS</strong> です。動的に文字列を埋め込みたい場合には、たとえば次のように書きます。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>&lt;img class="app-icon" src="{{app.icon_url}}" width="72" height="72"&gt;
</pre></div></div>

<p>このあたりのドキュメントは <a href="https://github.com/appsocially/AppSocially-iOS-SDK/wiki/Display-customized-data-on-landing-pages" rel="nofollow noopener" target="_blank">こちら</a> にあります。</p>

<h2>
<span id="undaタイプの招待画面" class="fragment"></span><a href="#unda%E3%82%BF%E3%82%A4%E3%83%97%E3%81%AE%E6%8B%9B%E5%BE%85%E7%94%BB%E9%9D%A2"><i class="fa fa-link"></i></a>Undaタイプの招待画面</h2>

<p>さきほど紹介した Unda の招待画面は、ASFriendPickerViewController というクラスを使用して実装されています。</p>

<p><a href="https://camo.qiitausercontent.com/47a2495d31bc7d98f7fb69974ce6da4a0024002a/687474703a2f2f63646e2d616b2e662e73742d686174656e612e636f6d2f696d616765732f666f746f6c6966652f732f7368753232332f32303133303930362f32303133303930363039323633312e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/47a2495d31bc7d98f7fb69974ce6da4a0024002a/687474703a2f2f63646e2d616b2e662e73742d686174656e612e636f6d2f696d616765732f666f746f6c6966652f732f7368753232332f32303133303930362f32303133303930363039323633312e706e67" alt="" data-canonical-src="http://cdn-ak.f.st-hatena.com/images/fotolife/s/shu223/20130906/20130906092631.png"></a></p>

<p>これは、 <strong>Facebook、Twitter、アドレス帳にある情報をひとつの TableView に一覧表示</strong> し、そこから選択して招待するための UIViewController サブクラスです。</p>

<p>ここから <strong>複数の友達を選択しての一括招待</strong> もできるので、効果的につかえば、強力なユーザー獲得手段となりえます。</p>

<p>これを用いた招待機能の実装方法は、SDKに同梱されている『InviteSample』と、<a href="https://github.com/appsocially/AppSocially-iOS-SDK/wiki/Aggregated-friend-picker" rel="nofollow noopener" target="_blank">こちらのドキュメント</a> が参考になります。</p>

<h2>
<span id="おわりに" class="fragment"></span><a href="#%E3%81%8A%E3%82%8F%E3%82%8A%E3%81%AB"><i class="fa fa-link"></i></a>おわりに</h2>

<p>これを書かないとステマになってしまうので書いておきますと、AppSocially は、僕が所属しているアメリカのスタートアップ『AppSocially』が提供しているサービスです。で、SDK は僕が開発しています。</p>

<p>SDKの最新バージョンは 0.7.1 で、1.0.0 に到達していないことからも汲んでいただける通り、まだまだやることが盛りだくさんです（たとえばつい先週までドキュメントは皆無でした）。(*4)</p>

<p>今回ここに書いた以外にも、AppSocially にはユーザー獲得にまつわるさまざま機能があり、SDKに同梱のサンプルコードにてご確認いただけますが、「こういうことできるの？」「どうやるの？」といったご要望やご質問は僕にメールや Twitter で（お手柔らかに）お伝えいただければ、善処させていただきます。</p>

<p>そんなわけで AppSocially SDK、ぜひこの土日にでも <strong>お手持ちのアプリにサクッと導入して申請</strong> していただけると幸いです！</p>

<h2>
<span id="注釈" class="fragment"></span><a href="#%E6%B3%A8%E9%87%88"><i class="fa fa-link"></i></a>注釈</h2>

<p><strong><a href="https://github.com/appsocially/AppSocially-iOS-SDK/releases" rel="nofollow noopener" target="_blank">AppSocially iOS SDKをダウンロード</a></strong></p>

<p>(*1) FacebookのPermissionまわりや、Twitterのマルチアカウント対応、API回数制限のことなど、ちゃんとやろうとすると意外とめんどくさいことがポロポロと出てきます</p>

<p>(*2) AppSocially API Key は <a href="https://appsocial.ly/" rel="nofollow noopener" target="_blank">AppSocially のサービス</a>にサインアップしてダッシュボードから取得する必要があるのですが、ここではすぐに試せるよう、僕がつくったキーを入れてあります。また Facebook APP ID も <a href="https://developers.facebook.com/apps" rel="nofollow noopener" target="_blank">Facebook Developers</a> より（本番で使う際には）作成してください。</p>

<p>(*3) 参考：<a href="http://engineer.typemag.jp/article/unda" rel="nofollow noopener" target="_blank">LINEの次はこれかも…注目のビデオメッセンジャー『unda』を開発した徳井直生氏が、シリコンバレーで学んだこと</a></p>

<p>(*4) 実は [<a href="http://togetter.com/li/523123:title=yidev@%E6%B8%8B%E8%B0%B7%E5%8B%89%E5%BC%B7%E4%BC%9A" class="autolink" rel="nofollow noopener" target="_blank">http://togetter.com/li/523123:title=yidev@渋谷勉強会</a> 第一回] にてバージョン 0.2 か 0.3 のころに発表させていただいたのですが、いろいろあって発表スライドを公開するタイミングを逸してしまいました。</p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>shu223さんの<br />29位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>64</kbd>
		<a target="_blank" href="https://qiita.com/shu223/items/9b913aff08e15d54e8b0">UILabelでのテキスト表示をリッチにする</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-03-19 07:47:24</center>
	</td>
	<td style="width:200px;">
		@shu223<br />(Freelancer 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/3180/profile-images/1473682733">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Objective-C]</b> <b>[iPhone]</b> <b>[Xcode]</b> <b>[iOS]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>UILabelはiOSアプリ開発において使用頻度の高いUIコンポーネントですが、カユいところに手が届かなかったりします。例えばテキストの一部だけ強調表示したい、色を変えたい、フォントを変えたいといったHTMLのような使い方ができません。</p>

<p>iOS6以上であれば、<code>attributedText</code> というNSAttributedStringオブジェクトをセットできるプロパティを標準で持っているので、そのままでテキストの装飾が可能なのですが、残念ながらiOS5以下では使えません。</p>

<p>OHAttributedLabelとTTTAttributedLabelは、そんなUILabelの機能を拡張するOSSです。</p>

<h2>
<span id="ohattributedlabel" class="fragment"></span><a href="#ohattributedlabel"><i class="fa fa-link"></i></a>OHAttributedLabel</h2>

<h3>
<span id="特長" class="fragment"></span><a href="#%E7%89%B9%E9%95%B7"><i class="fa fa-link"></i></a>特長</h3>

<p>NSAttributedString をラップして UILabel に持たせたもので、テキストの一部だけフォントや色を変えたり、リンクの付与といった指定が簡単にできるようになります。</p>

<p><a href="https://camo.qiitausercontent.com/4b3fd276e9f3d4c4c3c9b9b2fddf445db55fa575/687474703a2f2f662e636c2e6c792f6974656d732f336b3044304e334f315131373244314b337a30642f4f4853616d706c655f72315f63312e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/4b3fd276e9f3d4c4c3c9b9b2fddf445db55fa575/687474703a2f2f662e636c2e6c792f6974656d732f336b3044304e334f315131373244314b337a30642f4f4853616d706c655f72315f63312e706e67" alt="OHAttributedLabel の使用例" data-canonical-src="http://f.cl.ly/items/3k0D0N3O1Q172D1K3z0d/OHSample_r1_c1.png"></a></p>

<p>また、 iOS6のテキスト装飾の手順と同じ（NSMutableAttributedString オブジェクトを作成して <code>attributedText</code> プロパティにセットする）で、シンプルでわかりやすいAPIも特長です。</p>

<h3>
<span id="使用準備" class="fragment"></span><a href="#%E4%BD%BF%E7%94%A8%E6%BA%96%E5%82%99"><i class="fa fa-link"></i></a>使用準備</h3>

<ol>
<li>ソースコードをダウンロード
<a href="https://github.com/AliSoftware/OHAttributedLabel" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/AliSoftware/OHAttributedLabel</a>
</li>
<li>クラスファイル一式をプロジェクトに追加<br>
OHAttributedLabelフォルダ配下にあるクラスファイルをすべてプロジェクトに追加します。必要最小限のファイルのみ追加したい場合は
CoreTextUtils, NSTextCheckingResult+ExtendedURL, OHParagraphStyle, NSAttributedString+Attributes, OHAttributedLabelの5つを追加します。</li>
<li>CoreText.framework をプロジェクトに追加</li>
<li>ヘッダをインポート</li>
</ol>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>#import "OHAttributedLabel.h"
</pre></div></div>

<h2>
<span id="基本的な使用方法" class="fragment"></span><a href="#%E5%9F%BA%E6%9C%AC%E7%9A%84%E3%81%AA%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95"><i class="fa fa-link"></i></a>基本的な使用方法</h2>

<p>指定範囲の文字色を変更する方法を例にとり、OHAttributedLabelの基本的な使い方の流れを説明します。</p>

<p><strong>1. NSMutableAttributedStringオブジェクトを生成</strong></p>

<p>引数には表示する文字列を渡します。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>NSString *txt = @"表示する文字列";
NSMutableAttributedString *attrStr = [NSMutableAttributedString attributedStringWithString:txt];
</pre></div></div>

<p><strong>2. 文字色と範囲を指定</strong></p>

<p><code>setTextColor:range:</code> メソッドで、変更する文字色と、変更する範囲を指定します。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>NSRange range = [txt rangeOfString:@"文字"];
UIColor *color = [UIColor colorWithRed:0.f green:0.f blue:0.f alpha:1.f];
[attrStr setTextColor:color range:range];
</pre></div></div>

<p><strong>3. <code>attributedText</code>プロパティにセット</strong></p>

<p>OHAttributedLabel オブジェクトの attributedText プロパティに NSMutableAttributedString オブジェクトをセットして適用完了です。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>self.ohLabel.attributedText = attrStr;
</pre></div></div>

<p>ちなみに、<code>setTextColor:range:</code> の代わりに range 引数のない <code>setTextColor:</code> メソッドを用いると、文字列全体に適用されます。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>[attrStr setFont:[UIFont fontWithName:@"Helvetica" size:16]];
[attrStr setTextColor:[UIColor grayColor]];
</pre></div></div>

<h3>
<span id="その他の使用方法" class="fragment"></span><a href="#%E3%81%9D%E3%81%AE%E4%BB%96%E3%81%AE%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95"><i class="fa fa-link"></i></a>その他の使用方法</h3>

<p>太字指定は <code>setTextBold:range:</code> メソッドで YES をセットするか、</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>[attrStr setTextBold:YES range:range];
</pre></div></div>

<p>ボールドフォントの UIFont オブジェクトを <code>setFont:range:</code> メソッドに渡します。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>UIFont *boldFont = [UIFont boldSystemFontOfSize:18];
[attrStr setFont:boldFont range:strongRange];
</pre></div></div>

<p>リンクを貼る場合は、<code>setLink:range:</code> メソッドにURLと範囲を指定します。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>NSRange linkRange = [txt rangeOfString:linkStr];
NSURL *linkUrl = [NSURL URLWithString:@"http://www.facebook.com/iOSDevTips"];
[attrStr setLink:linkUrl range:linkRange];
</pre></div></div>

<p>OHAttributedLabel のソースコードに付属しているサンプルプロジェクトには、デリゲートメソッドを実装してアラートを出したり、タップ済みのリンクの文字色を変えたりといったサンプルも入っています。</p>

<p>centerVertically プロパティに YES をセットすると中央揃え、NO で上寄せになります。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>self.ohLabel.centerVertically = YES;
</pre></div></div>

<p>UILabel の textAlignment に指定できる値として、UITextAlignmentJustify が追加されています。これは</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>#define UITextAlignmentJustify ((UITextAlignment)kCTJustifiedTextAlignment)
</pre></div></div>

<p>このように CoreText で定義されているアライメントタイプである <code>kCTJustifiedTextAlignment</code> を UITextAlignment 型にキャストしたもので、これを指定すると<strong>パラグラフの末尾が自然に揃えられます</strong>。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>self.ohLabel.textAlignment = UITextAlignmentJustify;
</pre></div></div>

<h2>
<span id="tttattributedlabel" class="fragment"></span><a href="#tttattributedlabel"><i class="fa fa-link"></i></a>TTTAttributedLabel</h2>

<h3>
<span id="特長-1" class="fragment"></span><a href="#%E7%89%B9%E9%95%B7-1"><i class="fa fa-link"></i></a>特長</h3>

<p>OHAttributedLabel と同じく、NSAttributedString の機能を UILabel に持たせたものです。APIの手軽さでは OHAttributedLabel に軍配が上がりますが、機能の豊富さではこちらが勝ります。</p>

<p><a href="https://camo.qiitausercontent.com/e2ee4935cc61a4a24c1ac748a3ea103521319739/687474703a2f2f662e636c2e6c792f6974656d732f3239327133633069307a327631723358313432542f54545453616d706c655f72315f63312e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/e2ee4935cc61a4a24c1ac748a3ea103521319739/687474703a2f2f662e636c2e6c792f6974656d732f3239327133633069307a327631723358313432542f54545453616d706c655f72315f63312e706e67" alt="TTTAttributedLabelの使用例" data-canonical-src="http://f.cl.ly/items/292q3c0i0z2v1r3X142T/TTTSample_r1_c1.png"></a></p>

<h3>
<span id="使用準備-1" class="fragment"></span><a href="#%E4%BD%BF%E7%94%A8%E6%BA%96%E5%82%99-1"><i class="fa fa-link"></i></a>使用準備</h3>

<ol>
<li>ソースコードをダウンロード<br>
<a href="https://github.com/mattt/TTTAttributedLabel" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/mattt/TTTAttributedLabel</a>
</li>
<li>CoreText.framework をプロジェクトに追加</li>
<li>TTTAttributedLabel.h をインポート</li>
</ol>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>#import "TTTAttributedLabel.h"
</pre></div></div>

<h3>
<span id="使い方" class="fragment"></span><a href="#%E4%BD%BF%E3%81%84%E6%96%B9"><i class="fa fa-link"></i></a>使い方</h3>

<p>OHAttributedLabel と使用方法の比較ができるよう、テキストの一部を赤字・太字にする方法、リンクを貼る方法を紹介します。</p>

<p>文字色、太字等の属性の指定は、<code>setText:afterInheritingLabelAttributesAndConfiguringWithBlock:</code> メソッドのブロック内で行います。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>[self.tttLabel setText:txt afterInheritingLabelAttributesAndConfiguringWithBlock:
 ^NSMutableAttributedString *(NSMutableAttributedString *attrStr) {

     // ベースの設定
     [attrStr setFont:baseFont];
     [attrStr setTextColor:[UIColor grayColor]];

     // 文字色
     [attrStr setTextColor:strongColor range:strongRange];

     // Bold
     [attrStr setFont:boldFont range:strongRange];

     return attrStr;
 }];
</pre></div></div>

<h3>
<span id="リンク" class="fragment"></span><a href="#%E3%83%AA%E3%83%B3%E3%82%AF"><i class="fa fa-link"></i></a>リンク</h3>

<p>リンクの指定は <code>addLinkToURL:withRange:</code> メソッドをコールします。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>[self.tttLabel addLinkToURL:linkUrl withRange:linkRange];
</pre></div></div>

<p>また、<code>TTTAttributedLabel</code>では、リンクをタップされたときの処理用の delegate メソッドを実装する必要があります。</p>

<p>そのため、プロトコルへの準拠を宣言しておき、</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>&lt;TTTAttributedLabelDelegate&gt;
</pre></div></div>

<p>TTTAttributedLabelの<code>delegate</code>プロパティに移譲先をセットします。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>self.tttLabel.delegate = self;
</pre></div></div>

<p><code>attributedLabel:didSelectLinkWithURL:</code> メソッドを実装します。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>- (void)attributedLabel:(TTTAttributedLabel *)label didSelectLinkWithURL:(NSURL *)url {

    [[UIApplication sharedApplication] openURL:self.linkUrl];
}
</pre></div></div>

<p>OHAttributedLabel はここはラップしてくれているのでひと手間増えることになりますが、<code>openURL:</code> ですぐに Safari や iTunes に飛ばすのではなく、一旦確認を挟みたい場合には便利です。（ただし、OHAttributedLabel もデリゲートメソッドの <code>attributedLabel:shouldFollowLink:</code> を実装すれば同等のことができます。）</p>

<h2>
<span id="サンプルコード" class="fragment"></span><a href="#%E3%82%B5%E3%83%B3%E3%83%97%E3%83%AB%E3%82%B3%E3%83%BC%E3%83%89"><i class="fa fa-link"></i></a>サンプルコード</h2>

<p>OHAttributedLabel と TTTAttributedLabel ともにサンプルプロジェクトがそれぞれのリポジトリに付属していますが、両者のAPIの違いを比較しやすいよう、両OSSを使用したサンプルアプリをGithubにアップしてあります。</p>

<p><a href="https://github.com/shu223/LabelDemo" rel="nofollow noopener" target="_blank">LabelDemo</a></p>

<p><a href="https://camo.qiitausercontent.com/097ee4dea49093b487f0eb21e98598ecc6d08704/687474703a2f2f662e636c2e6c792f6974656d732f3359326e30763268316a327732353157316332672f526963684c6162656c5f72315f63312e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/097ee4dea49093b487f0eb21e98598ecc6d08704/687474703a2f2f662e636c2e6c792f6974656d732f3359326e30763268316a327732353157316332672f526963684c6162656c5f72315f63312e706e67" alt="サンプル" data-canonical-src="http://f.cl.ly/items/3Y2n0v2h1j2w251W1c2g/RichLabel_r1_c1.png"></a></p>

<h2>
<span id="参考" class="fragment"></span><a href="#%E5%8F%82%E8%80%83"><i class="fa fa-link"></i></a>参考</h2>

<ul>
<li><a href="http://gihyo.jp/dev/serial/01/ios_oss/0004?ard=1363646129" rel="nofollow noopener" target="_blank">UILabelでのテキスト表示をリッチにする機能拡張サブクラス3種</a></li>
<li><a href="http://www.amazon.co.jp/exec/obidos/ASIN/4798036277/22301-22/ref=nosim/" rel="nofollow noopener" target="_blank">iOSオープンソースライブラリ徹底活用</a></li>
</ul>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>shu223さんの<br />30位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>63</kbd>
		<a target="_blank" href="https://qiita.com/shu223/items/7846ef33a80a489dff93">顔をリアルタイムにトラッキングする</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-12-04 18:01:32</center>
	</td>
	<td style="width:200px;">
		@shu223<br />(Freelancer 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/3180/profile-images/1473682733">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Mac]</b> <b>[OSX]</b> <b>[openFrameworks]</b> <b>[画像処理]</b> <b>[OpenCV]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p><strong>カメラに映っている人間の顔をリアルタイムにトラッキング</strong> してくれる openFrameworks のアドオン、 <strong>ofxFaceTracker</strong> を試してみました。</p>

<h2>
<span id="導入" class="fragment"></span><a href="#%E5%B0%8E%E5%85%A5"><i class="fa fa-link"></i></a>導入</h2>

<p>※MacOSXでの使用が前提です。</p>

<h3>
<span id="1-ofxcv-を入手" class="fragment"></span><a href="#1-ofxcv-%E3%82%92%E5%85%A5%E6%89%8B"><i class="fa fa-link"></i></a>1. ofxCv を入手</h3>

<p>ofxFaceTracker を使用するには <strong>ofxCv というアドオンも必要</strong> になります。<a href="https://github.com/kylemcdonald/ofxCv" rel="nofollow noopener" target="_blank">ここ</a> からダウンロード or clone します。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>cd openFrameworks/addons/
git clone https://github.com/kylemcdonald/ofxCv.git
</pre></div></div>

<h3>
<span id="2-ofxfacetracker-を入手" class="fragment"></span><a href="#2-ofxfacetracker-%E3%82%92%E5%85%A5%E6%89%8B"><i class="fa fa-link"></i></a>2. ofxFaceTracker を入手</h3>

<p><a href="https://github.com/kylemcdonald/ofxFaceTracker" rel="nofollow noopener" target="_blank">ここ</a> からダウンロード or clone します。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>cd openFrameworks/addons/
git clone https://github.com/kylemcdonald/ofxFaceTracker.git
</pre></div></div>

<h2>
<span id="新規プロジェクト作成of-090-で確認" class="fragment"></span><a href="#%E6%96%B0%E8%A6%8F%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E4%BD%9C%E6%88%90of-090-%E3%81%A7%E7%A2%BA%E8%AA%8D"><i class="fa fa-link"></i></a>新規プロジェクト作成（oF 0.9.0 で確認）</h2>

<h3>
<span id="1-アドオン追加" class="fragment"></span><a href="#1-%E3%82%A2%E3%83%89%E3%82%AA%E3%83%B3%E8%BF%BD%E5%8A%A0"><i class="fa fa-link"></i></a>1. アドオン追加</h3>

<p>projectGenerator で新規プロジェクトを作成する際、次の3つのアドオンを追加します。</p>

<ul>
<li>ofxOpenCv

<ul>
<li>ofxCv で <code>#include "opencv2/opencv.hpp"</code> しているため</li>
</ul>
</li>
<li>ofxCv</li>
<li>ofxFaceTracker</li>
</ul>

<h3>
<span id="2-モデルデータ追加" class="fragment"></span><a href="#2-%E3%83%A2%E3%83%87%E3%83%AB%E3%83%87%E3%83%BC%E3%82%BF%E8%BF%BD%E5%8A%A0"><i class="fa fa-link"></i></a>2. モデルデータ追加</h3>

<p>ofxFaceTracker の libs/FaceTracker 配下にある、 <strong>model フォルダをプロジェクトの bin/data フォルダ（なければ作成する）にコピー</strong> します。</p>

<h3>
<span id="3-include" class="fragment"></span><a href="#3-include"><i class="fa fa-link"></i></a>3. include</h3>

<p>2つのアドオンのヘッダを include</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>#include "ofxCv.h"
#include "ofxFaceTracker.h"
</pre></div></div>

<h3>
<span id="4-ビルドエラー修正" class="fragment"></span><a href="#4-%E3%83%93%E3%83%AB%E3%83%89%E3%82%A8%E3%83%A9%E3%83%BC%E4%BF%AE%E6%AD%A3"><i class="fa fa-link"></i></a>4. ビルドエラー修正</h3>

<p>ofxFaceTracker.cpp でビルドエラーが出るため、</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>#include "ofGraphics.h"
</pre></div></div>

<p>が必要でした。（oF 0.9.0, Xcode 7.2）</p>

<h2>
<span id="サンプルを試してみる" class="fragment"></span><a href="#%E3%82%B5%E3%83%B3%E3%83%97%E3%83%AB%E3%82%92%E8%A9%A6%E3%81%97%E3%81%A6%E3%81%BF%E3%82%8B"><i class="fa fa-link"></i></a>サンプルを試してみる</h2>

<p>※上記と同様に各サンプルプロジェクトにもモデルデータを配備する必要があります。</p>

<h3>
<span id="example-extraction" class="fragment"></span><a href="#example-extraction"><i class="fa fa-link"></i></a>example-extraction</h3>

<p><a href="https://camo.qiitausercontent.com/009fba4779607c134ecc4584ace896bfa46e0e17/687474703a2f2f662e636c2e6c792f6974656d732f3136334f306633513254306130583137337330362f65787472616374696f6e2e6a7067" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/009fba4779607c134ecc4584ace896bfa46e0e17/687474703a2f2f662e636c2e6c792f6974656d732f3136334f306633513254306130583137337330362f65787472616374696f6e2e6a7067" width="400" data-canonical-src="http://f.cl.ly/items/163O0f3Q2T0a0X173s06/extraction.jpg"></a></p>

<p>目と口がどうにかなるサンプルのようです。</p>

<h2>
<span id="example-advanced" class="fragment"></span><a href="#example-advanced"><i class="fa fa-link"></i></a>example-advanced</h2>

<p><a href="https://camo.qiitausercontent.com/fb16aaa49a0318d49f8684017c6ac6d3fa2e6cca/687474703a2f2f662e636c2e6c792f6974656d732f32593159304430773375323430693031305133622f616476616e636564332e6a7067" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/fb16aaa49a0318d49f8684017c6ac6d3fa2e6cca/687474703a2f2f662e636c2e6c792f6974656d732f32593159304430773375323430693031305133622f616476616e636564332e6a7067" width="400" data-canonical-src="http://f.cl.ly/items/2Y1Y0D0w3u240i010Q3b/advanced3.jpg"></a></p>

<p>トラッキングした顔のメッシュを取得（<code>ofxFaceTracker::getObjectMesh</code>）し、ワイヤーフレームを描画（<code>ofMesh::drawWireframe</code>）するサンプル。</p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>shu223さんの<br />31位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>62</kbd>
		<a target="_blank" href="https://qiita.com/shu223/items/8a357b92b50eaeafcf12">「iPhoneのカメラからの入力をリアルタイム処理する」ための実装を超簡単にする ofVideoGrabber</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-12-10 13:23:18</center>
	</td>
	<td style="width:200px;">
		@shu223<br />(Freelancer 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/3180/profile-images/1473682733">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Objective-C]</b> <b>[iPhone]</b> <b>[Xcode]</b> <b>[iOS]</b> <b>[openFrameworks]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>iPhoneのカメラからの入力をリアルタイムに取得し、何らかの画像処理を行う、つまり <strong>iOSアプリで動画処理を行う</strong> のは、なかなか面倒です。</p>

<p>下記記事を見るとわかりますが、</p>

<p><a href="http://d.hatena.ne.jp/shu223/20121202/1354436478" rel="nofollow noopener" target="_blank">シャッター音の鳴らないカメラアプリの実装方法 - Over&amp;Out その後</a></p>

<p>AVFoundation を用いて、 <strong>カメラからの入力を毎フレーム取得しようとするだけで、かなりやることが多い</strong> です。デリゲートメソッドに渡されてくる画像データが CMSampleBufferRef という型で渡ってくるのも（個人的には）ハードルを感じる部分で、毎回「どう取り扱うんだっけ？」とググってしまいます。</p>

<p>さらに、毎フレーム送られてくる画像情報をリアルタイムに処理をしようとすると、やっぱり <strong>OpenGL ベースで処理</strong> する必要が出てきて、これまた（個人的には）気が重くなってしまうところです。</p>

<p>ところが、videoGrabberExample という openFrameworks に同梱されているサンプルのソースを見ると、実にシンプルな実装で、カメラからの入力のリアルタイム処理が実現されていました。</p>

<p><a href="http://qiita.com/shu223/items/e28110bf729fdf8712e0" id="reference-1acd828302cb2a2d8a78">openFrameworks for iOS のサンプル一覧 - Qiita [キータ]</a></p>

<p>こりゃ便利そう、ということで、その使い方と、チラッとソースをのぞいてみた内容を以下にまとめます。</p>

<h2>
<span id="実装" class="fragment"></span><a href="#%E5%AE%9F%E8%A3%85"><i class="fa fa-link"></i></a>実装</h2>

<p>こんな感じで、カメラからの入力に対してリアルタイムに反転処理をかけ、左下に表示するための実装手順です。（基本的には videoGrabberExample のコードをシンプルにしてコメントつけただけです）</p>

<p><a href="https://camo.qiitausercontent.com/6f36ca97f099ac86fa125da1b79765cd0942b8fe/687474703a2f2f662e636c2e6c792f6974656d732f3173336433583157316c323631373351313330422f766964656f677261626265722e6a7067" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/6f36ca97f099ac86fa125da1b79765cd0942b8fe/687474703a2f2f662e636c2e6c792f6974656d732f3173336433583157316c323631373351313330422f766964656f677261626265722e6a7067" alt="" data-canonical-src="http://f.cl.ly/items/1s3d3X1W1l26173Q130B/videograbber.jpg"></a></p>

<h3>
<span id="セットアップ" class="fragment"></span><a href="#%E3%82%BB%E3%83%83%E3%83%88%E3%82%A2%E3%83%83%E3%83%97"><i class="fa fa-link"></i></a>セットアップ</h3>

<p>メンバ変数に</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>ofVideoGrabber grabber;
ofTexture tex;
unsigned char * pix;
</pre></div></div>

<p>を定義しておき、</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>void testApp::setup(){

    // ofVideoGrabberを初期化
    grabber.initGrabber(480, 360, OF_PIXELS_BGRA);

    // テクスチャをallocate
    tex.allocate(grabber.getWidth(), grabber.getHeight(), GL_RGB);

    // バッファ確保
    pix = new unsigned char[ (int)( grabber.getWidth() * grabber.getHeight() * 3.0) ];
}
</pre></div></div>

<h3>
<span id="カメラからの入力を取得して画像処理" class="fragment"></span><a href="#%E3%82%AB%E3%83%A1%E3%83%A9%E3%81%8B%E3%82%89%E3%81%AE%E5%85%A5%E5%8A%9B%E3%82%92%E5%8F%96%E5%BE%97%E3%81%97%E3%81%A6%E7%94%BB%E5%83%8F%E5%87%A6%E7%90%86"><i class="fa fa-link"></i></a>カメラからの入力を取得して画像処理</h3>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>void testApp::update(){

    // カメラからの入力を取得
    grabber.update();
    unsigned char * src = grabber.getPixels();

    // 画素数 x チャンネル数
    int totalPix = grabber.getWidth() * grabber.getHeight() * 3;

    // 反転処理
    for(int k = 0; k &lt; totalPix; k+= 3){
        pix[k  ] = 255 - src[k];
        pix[k+1] = 255 - src[k+1];
        pix[k+2] = 255 - src[k+2];        
    }

    // テクスチャデータ生成
    tex.loadData(pix, grabber.getWidth(), grabber.getHeight(), GL_RGB);
}
</pre></div></div>

<p>上記コードではフレーム毎の入力を取得して、そこに各画素値を反転させる処理を行っています。</p>

<h3>
<span id="描画" class="fragment"></span><a href="#%E6%8F%8F%E7%94%BB"><i class="fa fa-link"></i></a>描画</h3>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>void testApp::draw(){    

    // カメラからの入力を描画    
    grabber.draw(0, 0);

    // 生成したテクスチャを描画
    tex.draw(0, 0, tex.getWidth() / 4, tex.getHeight() / 4);
}
</pre></div></div>

<h2>
<span id="ソースの中身をのぞいてみる" class="fragment"></span><a href="#%E3%82%BD%E3%83%BC%E3%82%B9%E3%81%AE%E4%B8%AD%E8%BA%AB%E3%82%92%E3%81%AE%E3%81%9E%E3%81%84%E3%81%A6%E3%81%BF%E3%82%8B"><i class="fa fa-link"></i></a>ソースの中身をのぞいてみる</h2>

<p>先日書いた <a href="http://qiita.com/shu223/items/52ec9ae8585d7424c393">こちらの記事</a> で、一部の oF クラスに、 <strong>単なるラッパー疑惑</strong> を抱いたのですが、これはその逆ですごく便利なので、どんな感じにラップされてるのかソースの中身をみてみました。</p>

<h3>
<span id="avfoundationvideograbber" class="fragment"></span><a href="#avfoundationvideograbber"><i class="fa fa-link"></i></a>AVFoundationVideoGrabber</h3>

<p>ソースは <code>addons/ofxiOS/src/video/AVFoundation</code> にあるのですが、AVFoundation まわりの諸々はこの AVFoundationVideoGrabber というクラスでラップされてました。</p>

<h3>
<span id="ofxiosvideograbber" class="fragment"></span><a href="#ofxiosvideograbber"><i class="fa fa-link"></i></a>ofxiOSVideoGrabber</h3>

<p>このクラスのソースは <code>addons/ofxiOS/src/video</code> にあります。</p>

<p>上記の AVFoundationVideoGrabber へのポインタを持っています。ofBaseVideoGrabber を継承していて、オーバーライドしている各メソッドの中身では、AVFoundationVideoGrabber のメソッドを呼んでいます。</p>

<h3>
<span id="ofvideograbber" class="fragment"></span><a href="#ofvideograbber"><i class="fa fa-link"></i></a>ofVideoGrabber</h3>

<p>ソースの場所は <code>libs/openFrameworks/video</code></p>

<p>iOS環境の場合に、ofxiOSVideoGrabber をインスタンスとして持つように実装されています。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>#ifdef OF_VIDEO_CAPTURE_IOS
    #include "ofxiOSVideoGrabber.h"
    #define OF_VID_GRABBER_TYPE ofxiOSVideoGrabber
#endif
</pre></div></div>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>if( grabber == NULL ){
    setGrabber( ofPtr&lt;OF_VID_GRABBER_TYPE&gt;(new OF_VID_GRABBER_TYPE) );
}
</pre></div></div>

<p>AVFoundation <strong>以外</strong> の諸々（OpenGLのテクスチャとしての描画とか）はここに実装されています。</p>

<h2>
<span id="いずれ調べる" class="fragment"></span><a href="#%E3%81%84%E3%81%9A%E3%82%8C%E8%AA%BF%E3%81%B9%E3%82%8B"><i class="fa fa-link"></i></a>いずれ調べる</h2>

<p>iOS アプリで OpenGL で画像／動画処理をする場合、GPUImage を利用することが多いので、それと併用するにはどうやるのがいいか（何かしらの共通フォーマットにすればいいと思うので、それを、どのタイミングで、どのフォーマットにするのがいいか）というのをいずれ調べようと思います。</p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>shu223さんの<br />32位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>58</kbd>
		<a target="_blank" href="https://qiita.com/shu223/items/e28110bf729fdf8712e0">openFrameworks for iOS のサンプル一覧</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-12-04 15:52:46</center>
	</td>
	<td style="width:200px;">
		@shu223<br />(Freelancer 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/3180/profile-images/1473682733">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Objective-C]</b> <b>[Xcode]</b> <b>[iOS]</b> <b>[openFrameworks]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>openFrameworks（以下 oF）には大量のサンプルプロジェクトが同梱されています。「UIKitのビューと oF のビューを一緒に使いたいけどどうやるんだろう」みたいなときにそういうサンプルがあるのがわかってると話がはやいので、ここにサンプルの一覧をまとめていこうと思います。</p>

<p>実行時のスクリーンショットと、ソースで <strong>どういった処理が実装がされているか</strong> （何の機能のサンプルなのか）も書いていきます。</p>

<p>（※随時更新していきます。ストックしておくと、更新通知が飛んでくるので便利です。）</p>

<h2>
<span id="primitivesexample" class="fragment"></span><a href="#primitivesexample"><i class="fa fa-link"></i></a>PrimitivesExample</h2>

<p>（v0.9.8）</p>

<p><a href="https://camo.qiitausercontent.com/68a175dc4a52b347124302c6c58a41a15732619a/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f333138302f39316334313862612d613962332d333230322d313739312d6261313865653563376533652e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/68a175dc4a52b347124302c6c58a41a15732619a/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f333138302f39316334313862612d613962332d333230322d313739312d6261313865653563376533652e706e67" alt="IMG_1673.PNG" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/3180/91c418ba-a9b3-3202-1791-ba18ee5c7e3e.png"></a></p>

<p><code>ofSpherePrimitive</code> や <code>ofCylinderPrimitive</code> といったクラスを使って3D図形を描画するサンプル。</p>

<h2>
<span id="corelocationexample" class="fragment"></span><a href="#corelocationexample"><i class="fa fa-link"></i></a>CoreLocationExample</h2>

<h2>
<span id="imagepickerexample" class="fragment"></span><a href="#imagepickerexample"><i class="fa fa-link"></i></a>ImagePickerExample</h2>

<h2>
<span id="keyboardexample" class="fragment"></span><a href="#keyboardexample"><i class="fa fa-link"></i></a>KeyboardExample</h2>

<h2>
<span id="mapkitexample" class="fragment"></span><a href="#mapkitexample"><i class="fa fa-link"></i></a>MapKitExample</h2>

<h2>
<span id="touchandaccelexample" class="fragment"></span><a href="#touchandaccelexample"><i class="fa fa-link"></i></a>TouchAndAccelExample</h2>

<h2>
<span id="advancedeventsexample" class="fragment"></span><a href="#advancedeventsexample"><i class="fa fa-link"></i></a>advancedEventsExample</h2>

<h2>
<span id="advancedgraphics" class="fragment"></span><a href="#advancedgraphics"><i class="fa fa-link"></i></a>advancedGraphics</h2>

<h2>
<span id="assimpexample" class="fragment"></span><a href="#assimpexample"><i class="fa fa-link"></i></a>assimpExample</h2>

<h2>
<span id="audioinputexample" class="fragment"></span><a href="#audioinputexample"><i class="fa fa-link"></i></a>audioInputExample</h2>

<h2>
<span id="audiooutputexample" class="fragment"></span><a href="#audiooutputexample"><i class="fa fa-link"></i></a>audioOutputExample</h2>

<h2>
<span id="dirlistexample" class="fragment"></span><a href="#dirlistexample"><i class="fa fa-link"></i></a>dirListExample</h2>

<h2>
<span id="emptyexample" class="fragment"></span><a href="#emptyexample"><i class="fa fa-link"></i></a>emptyExample</h2>

<h2>
<span id="eventsexample" class="fragment"></span><a href="#eventsexample"><i class="fa fa-link"></i></a>eventsExample</h2>

<h2>
<span id="fontshapesexample" class="fragment"></span><a href="#fontshapesexample"><i class="fa fa-link"></i></a>fontShapesExample</h2>

<h2>
<span id="fontsexample" class="fragment"></span><a href="#fontsexample"><i class="fa fa-link"></i></a>fontsExample</h2>

<h2>
<span id="graphicsexample" class="fragment"></span><a href="#graphicsexample"><i class="fa fa-link"></i></a>graphicsExample</h2>

<h2>
<span id="iphoneguiexample" class="fragment"></span><a href="#iphoneguiexample"><i class="fa fa-link"></i></a>iPhoneGuiExample</h2>

<h2>
<span id="imageloaderexample" class="fragment"></span><a href="#imageloaderexample"><i class="fa fa-link"></i></a>imageLoaderExample</h2>

<h2>
<span id="ioscustomsizeexample" class="fragment"></span><a href="#ioscustomsizeexample"><i class="fa fa-link"></i></a>iosCustomSizeExample</h2>

<h2>
<span id="ioses2shaderexample" class="fragment"></span><a href="#ioses2shaderexample"><i class="fa fa-link"></i></a>iosES2ShaderExample</h2>

<h2>
<span id="iosexternaldisplayexample" class="fragment"></span><a href="#iosexternaldisplayexample"><i class="fa fa-link"></i></a>iosExternalDisplayExample</h2>

<h2>
<span id="iosnativeexample" class="fragment"></span><a href="#iosnativeexample"><i class="fa fa-link"></i></a>iosNativeExample</h2>

<h2>
<span id="iosorientationexample" class="fragment"></span><a href="#iosorientationexample"><i class="fa fa-link"></i></a>iosOrientationExample</h2>

<h2>
<span id="movieplayerexample" class="fragment"></span><a href="#movieplayerexample"><i class="fa fa-link"></i></a>moviePlayerExample</h2>

<h2>
<span id="ofxguiexample" class="fragment"></span><a href="#ofxguiexample"><i class="fa fa-link"></i></a>ofxGuiExample</h2>

<p>ビルドして実行すると、nibをロードするあたりでクラッシュするため、プロジェクトにいくつかの修正が必要。</p>

<ul>
<li>MyGuiView.xib の File's Owner の Custom Class が "MyMusicView" となっているので、"MyGuiView" に直す</li>
<li><strong>MyGuiView.xibを、Copy Bundle Resourcesに追加する</strong></li>
</ul>

<p><a href="https://camo.qiitausercontent.com/4c6ae0fbfe9203b8615e888f9f14d355064bec38/687474703a2f2f662e636c2e6c792f6974656d732f325330373430306131473253336b3053323531742f6775695f2e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/4c6ae0fbfe9203b8615e888f9f14d355064bec38/687474703a2f2f662e636c2e6c792f6974656d732f325330373430306131473253336b3053323531742f6775695f2e706e67" alt="" data-canonical-src="http://f.cl.ly/items/2S07400a1G2S3k0S251t/gui_.png"></a></p>

<p>UIKit の UISwitch と UISlider で、 oF によって描画されている図形が変化します。</p>

<p><strong>UIKit と oF を同居させる</strong> 貴重なサンプル。</p>

<h2>
<span id="opencvexample" class="fragment"></span><a href="#opencvexample"><i class="fa fa-link"></i></a>opencvExample</h2>

<p>アドオン ofxOpenCv を使ったサンプル。</p>

<ul>
<li>動画を再生（<code>ofVideoPlayer::play</code>）しつつ、</li>
<li>背景（動画再生開始時のフレームを背景とする。以後、タップするとその瞬間のフレームを背景とする）を差し引き（<code>ofxCvGrayscaleImage::absDiff</code>）、</li>
<li>指の輪郭を検出する（<code>ofxCvContourFinder::findContours</code>）</li>
</ul>

<p>サンプルです。</p>

<p><a href="https://camo.qiitausercontent.com/00870d2c2ca319095806a54076df6680703edfe9/687474703a2f2f662e636c2e6c792f6974656d732f3173324f316b34353432316832493058304a32752f63764578616d706c655f2e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/00870d2c2ca319095806a54076df6680703edfe9/687474703a2f2f662e636c2e6c792f6974656d732f3173324f316b34353432316832493058304a32752f63764578616d706c655f2e706e67" alt="" data-canonical-src="http://f.cl.ly/items/1s2O1k45421h2I0X0J2u/cvExample_.png"></a></p>

<h2>
<span id="opencvfaceexample" class="fragment"></span><a href="#opencvfaceexample"><i class="fa fa-link"></i></a>opencvFaceExample</h2>

<h2>
<span id="oscreceiverexample" class="fragment"></span><a href="#oscreceiverexample"><i class="fa fa-link"></i></a>oscReceiverExample</h2>

<p><a href="https://camo.qiitausercontent.com/d04ac098e03b06c56ea1c8f9dab91afb98375aa1/687474703a2f2f662e636c2e6c792f6974656d732f306d3152314a314a337033723133336e3074306e2f494d475f383932395f72315f63312e6a7067" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/d04ac098e03b06c56ea1c8f9dab91afb98375aa1/687474703a2f2f662e636c2e6c792f6974656d732f306d3152314a314a337033723133336e3074306e2f494d475f383932395f72315f63312e6a7067" width="400" data-canonical-src="http://f.cl.ly/items/0m1R1J1J3p3r133n0t0n/IMG_8929_r1_c1.jpg"></a></p>

<h2>
<span id="oscsenderexample" class="fragment"></span><a href="#oscsenderexample"><i class="fa fa-link"></i></a>oscSenderExample</h2>

<p><a href="https://camo.qiitausercontent.com/c0b8d91685b5b28364db17f7d4524ac2a33112b6/687474703a2f2f662e636c2e6c792f6974656d732f304932433165306d32383339304f306c335833762f494d475f373937325f72315f63312e6a7067" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/c0b8d91685b5b28364db17f7d4524ac2a33112b6/687474703a2f2f662e636c2e6c792f6974656d732f304932433165306d32383339304f306c335833762f494d475f373937325f72315f63312e6a7067" width="400" data-canonical-src="http://f.cl.ly/items/0I2C1e0m28390O0l3X3v/IMG_7972_r1_c1.jpg"></a></p>

<p>タッチの情報をReceiver側に送る。</p>

<h2>
<span id="polygonexample" class="fragment"></span><a href="#polygonexample"><i class="fa fa-link"></i></a>polygonExample</h2>

<h2>
<span id="soundplayerexample" class="fragment"></span><a href="#soundplayerexample"><i class="fa fa-link"></i></a>soundPlayerExample</h2>

<h2>
<span id="textureexample" class="fragment"></span><a href="#textureexample"><i class="fa fa-link"></i></a>textureExample</h2>

<h2>
<span id="vboexample" class="fragment"></span><a href="#vboexample"><i class="fa fa-link"></i></a>vboExample</h2>

<p>ofVbo を使用するサンプル。</p>

<p><a href="https://camo.qiitausercontent.com/3a0146e7e402340bd223df50cb7ca355b80ae6e3/687474703a2f2f662e636c2e6c792f6974656d732f316e326a3371316532553038324b31363072304d2f76626f5f2e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/3a0146e7e402340bd223df50cb7ca355b80ae6e3/687474703a2f2f662e636c2e6c792f6974656d732f316e326a3371316532553038324b31363072304d2f76626f5f2e706e67" alt="" data-canonical-src="http://f.cl.ly/items/1n2j3q1e2U082K160r0M/vbo_.png"></a></p>

<p>VBOというのは Vertex Buffer Object の略で、『頂点データを格納するGPU側のメモリに置かれたバッファ』とのこと。</p>

<p>参考：<a href="http://www.slis.tsukuba.ac.jp/~fujisawa.makoto.fu/cgi-bin/wiki/index.php?OpenGL%20-%20VBO" rel="nofollow noopener" target="_blank">OpenGL - VBO - PukiWiki for PBCG Lab</a></p>

<h2>
<span id="videograbberexample" class="fragment"></span><a href="#videograbberexample"><i class="fa fa-link"></i></a>videoGrabberExample</h2>

<p>ofVideoGrabber を使用して、 <strong>iPhoneのカメラからの入力（動画）をリアルタイム処理</strong> するサンプル。</p>

<p><a href="https://camo.qiitausercontent.com/6f36ca97f099ac86fa125da1b79765cd0942b8fe/687474703a2f2f662e636c2e6c792f6974656d732f3173336433583157316c323631373351313330422f766964656f677261626265722e6a7067" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/6f36ca97f099ac86fa125da1b79765cd0942b8fe/687474703a2f2f662e636c2e6c792f6974656d732f3173336433583157316c323631373351313330422f766964656f677261626265722e6a7067" alt="" data-canonical-src="http://f.cl.ly/items/1s3d3X1W1l26173Q130B/videograbber.jpg"></a></p>

<h2>
<span id="xmlsettingsexample" class="fragment"></span><a href="#xmlsettingsexample"><i class="fa fa-link"></i></a>xmlSettingsExample</h2>

<h2>
<span id="ビルドエラー修正メモ" class="fragment"></span><a href="#%E3%83%93%E3%83%AB%E3%83%89%E3%82%A8%E3%83%A9%E3%83%BC%E4%BF%AE%E6%AD%A3%E3%83%A1%E3%83%A2"><i class="fa fa-link"></i></a>ビルドエラー修正メモ</h2>

<ul>
<li>oF v0.9.8 / Xcode 8.3 にて "library not found for -lcrt1.3.1.o" というエラー</li>
</ul>

<p>→ プロジェクトのTarget iOSバージョンを上げる （<a href="http://stackoverflow.com/questions/39632155/ld-library-not-found-for-lcrt1-3-1-o-error-while-running-app-in-device-with-xc" rel="nofollow noopener" target="_blank">参考</a>）</p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>shu223さんの<br />33位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>57</kbd>
		<a target="_blank" href="https://qiita.com/shu223/items/dc1759fc9695cea27756">1行で iOS バージョン判定できる便利マクロ</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2012-12-19 20:57:16</center>
	</td>
	<td style="width:200px;">
		@shu223<br />(Freelancer 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/3180/profile-images/1473682733">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Objective-C]</b> <b>[iPhone]</b> <b>[iOS]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>下記のようにマクロを定義しておけば、</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>#define SYSTEM_VERSION_LESS_THAN(v) ([[[UIDevice currentDevice] systemVersion] \
compare:v options:NSNumericSearch] == NSOrderedAscending)
</pre></div></div>

<p>こんな感じで1行でバージョン判定できて便利です。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>if (SYSTEM_VERSION_LESS_THAN(@"6.0"))
{
    // ios 5.x and below
}
else
{
    // ios 6.0 and above
}
</pre></div></div>

<p>普通の実装をマクロで定義しただけですが・・・</p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>shu223さんの<br />34位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>55</kbd>
		<a target="_blank" href="https://qiita.com/shu223/items/5018cf5e452c4fa0d002">ビーコン的な演出をする for iBeacon</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-12-05 19:05:05</center>
	</td>
	<td style="width:200px;">
		@shu223<br />(Freelancer 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/3180/profile-images/1473682733">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Objective-C]</b> <b>[iOS]</b> <b>[bluetooth]</b> <b>[iBeacon]</b> <b>[IoT]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>この記事は iBeacon Advent Calendar 4日目の記事ですが、 <strong>iBeacon の話は一切出てきません。</strong> <sup id="fnref1"><a href="#fn1" rel="footnote" title="iBeaconとはなんぞや、というところから勉強しつつ何か書こうと思っていたのですが、いざ勉強しようと ここ を見たら書きたかったネタが全部既出となっていました">1</a></sup> 　</p>

<p>それどころかiOS7の新機能の話もなく、iOSの古の時代からある Core Animation を使用してビーコン的な演出 <sup id="fnref2"><a href="#fn2" rel="footnote" title="Estimote のアプリでもこういう演出をしていたので、こういうのがビーコン的なのかなと。。">2</a></sup> をするクラスをつくったので、その紹介でお茶を濁そうと思います。</p>

<h2>
<span id="こういうの" class="fragment"></span><a href="#%E3%81%93%E3%81%86%E3%81%84%E3%81%86%E3%81%AE"><i class="fa fa-link"></i></a>こういうの</h2>

<p><a href="https://camo.qiitausercontent.com/49d15e24bde6133ed29e945642f93c731d88d713/687474703a2f2f662e636c2e6c792f6974656d732f3232304432463231304431783144304c315132302f626561636f6e5f5f2e676966" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/49d15e24bde6133ed29e945642f93c731d88d713/687474703a2f2f662e636c2e6c792f6974656d732f3232304432463231304431783144304c315132302f626561636f6e5f5f2e676966" alt="" data-canonical-src="http://f.cl.ly/items/220D2F210D1x1D0L1Q20/beacon__.gif"></a></p>

<h2>
<span id="ダウンロード" class="fragment"></span><a href="#%E3%83%80%E3%82%A6%E3%83%B3%E3%83%AD%E3%83%BC%E3%83%89"><i class="fa fa-link"></i></a>ダウンロード</h2>

<p>ソース一式を GitHub に置いてあります。</p>

<p><a href="https://github.com/shu223/PulsingHalo" rel="nofollow noopener" target="_blank">PulsingHalo</a></p>

<h2>
<span id="使い方" class="fragment"></span><a href="#%E4%BD%BF%E3%81%84%E6%96%B9"><i class="fa fa-link"></i></a>使い方</h2>

<p>PulsingHaloLayer (h,m) をプロジェクトに追加し、CALayer オブジェクトとして <strong><code>addSublayer</code> するだけ</strong> 。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>PulsingHaloLayer *halo = [PulsingHaloLayer layer];
halo.position = self.view.center;
[self.view.layer addSublayer:halo];
</pre></div></div>

<h2>
<span id="カスタマイズ" class="fragment"></span><a href="#%E3%82%AB%E3%82%B9%E3%82%BF%E3%83%9E%E3%82%A4%E3%82%BA"><i class="fa fa-link"></i></a>カスタマイズ</h2>

<h3>
<span id="大きさを変える" class="fragment"></span><a href="#%E5%A4%A7%E3%81%8D%E3%81%95%E3%82%92%E5%A4%89%E3%81%88%E3%82%8B"><i class="fa fa-link"></i></a>大きさを変える</h3>

<p><code>radius</code> プロパティに所望の値をセットすれば、半径が変わります。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>self.halo.radius = 240.0;
</pre></div></div>

<h3>
<span id="色を変える" class="fragment"></span><a href="#%E8%89%B2%E3%82%92%E5%A4%89%E3%81%88%E3%82%8B"><i class="fa fa-link"></i></a>色を変える</h3>

<p>CALayer にもともとある、<code>backgroundColor</code> に CGColorRef 型の値をセットします。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>UIColor *color = [UIColor colorWithRed:0.7
                                 green:0.9
                                  blue:0.3
                                 alpha:1.0];

self.halo.backgroundColor = color.CGColor;
</pre></div></div>

<h3>
<span id="アニメーションの速度を変える" class="fragment"></span><a href="#%E3%82%A2%E3%83%8B%E3%83%A1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E3%81%AE%E9%80%9F%E5%BA%A6%E3%82%92%E5%A4%89%E3%81%88%E3%82%8B"><i class="fa fa-link"></i></a>アニメーションの速度を変える</h3>

<p>パルスの広がる速さについては <code>animationDuration</code> を、パルス間隔については <code>pulseInterval</code> を調整してください。</p>

<h2>
<span id="デモ" class="fragment"></span><a href="#%E3%83%87%E3%83%A2"><i class="fa fa-link"></i></a>デモ</h2>

<p>半径、色のプロパティについてはリポジトリに同梱されているデモプロジェクトで挙動を確認できます。</p>

<p><a href="https://camo.qiitausercontent.com/c1952deb8e86817fa0283bdd09f50fdda6f9b18b/687474703a2f2f662e636c2e6c792f6974656d732f303331573050315431393071333832503036336d2f626561636f6e5f64656d6f332e6a7067" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/c1952deb8e86817fa0283bdd09f50fdda6f9b18b/687474703a2f2f662e636c2e6c792f6974656d732f303331573050315431393071333832503036336d2f626561636f6e5f64656d6f332e6a7067" alt="" data-canonical-src="http://f.cl.ly/items/031W0P1T190q382P063m/beacon_demo3.jpg"></a></p>

<h2>
<span id="しくみ" class="fragment"></span><a href="#%E3%81%97%E3%81%8F%E3%81%BF"><i class="fa fa-link"></i></a>しくみ</h2>

<ul>
<li>CALayer のサブクラスとして実装</li>
<li>CALayer の <code>cornerRadius</code> プロパティで円形にしている</li>
<li>CAAnimationGroup で、x,y方向のscaleと、opacityのアニメーションを行っている</li>
</ul>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>CABasicAnimation *scaleAnimation = [CABasicAnimation animationWithKeyPath:@"transform.scale.xy"];
scaleAnimation.fromValue = @0.0;
scaleAnimation.toValue = @1.0;
scaleAnimation.duration = self.animationDuration;

CAKeyframeAnimation *opacityAnimation = [CAKeyframeAnimation animationWithKeyPath:@"opacity"];
opacityAnimation.duration = self.animationDuration;
opacityAnimation.values = @[@0.45, @0.45, @0];
opacityAnimation.keyTimes = @[@0, @0.2, @1];
opacityAnimation.removedOnCompletion = NO;

NSArray *animations = @[scaleAnimation, opacityAnimation];

self.animationGroup.animations = animations;
</pre></div></div>

<h2>
<span id="参考" class="fragment"></span><a href="#%E5%8F%82%E8%80%83"><i class="fa fa-link"></i></a>参考</h2>

<p>ソースは下記OSSを参考にさせていただきました。</p>

<p><a href="https://github.com/samvermette/SVPulsingAnnotationView" rel="nofollow noopener" target="_blank">SVPulsingAnnotationView</a></p>

<h2>
<span id="追記複数パルスをサポートしました" class="fragment"></span><a href="#%E8%BF%BD%E8%A8%98%E8%A4%87%E6%95%B0%E3%83%91%E3%83%AB%E3%82%B9%E3%82%92%E3%82%B5%E3%83%9D%E3%83%BC%E3%83%88%E3%81%97%E3%81%BE%E3%81%97%E3%81%9F"><i class="fa fa-link"></i></a>（追記）複数パルスをサポートしました！</h2>

<p>iBeaconアドベントカレンダーに名乗りを上げたものの、iBeaconをまったく触る時間がなく、逃げの一手としてつくった本ライブラリでしたが、その後（意外にも）OSSとして人気が出て、ありがたいことに pull request もちょくちょくいただくようになりました。</p>

<p>そんな中で、待望の <strong>複数パルス表示</strong> のプルリクをいただいたので、ぜひその素晴らしい新機能をご紹介したいと思います。</p>

<p>下のgifアニの右側のような感じです。</p>

<p><a href="https://camo.qiitausercontent.com/1e0f7aca585f2130c42db8de59cb7d0fcce62c4e/68747470733a2f2f63616d6f2e67697468756275736572636f6e74656e742e636f6d2f646465633866663330346365346535353336333662656336353063303533656566633030363966312f36383734373437303361326632663636326536333663326536633739326636393734363536643733326633323531333035383330333533323730333236643333333733313664333037373332346633303433326636383631366336663637363936363265363736393636" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/1e0f7aca585f2130c42db8de59cb7d0fcce62c4e/68747470733a2f2f63616d6f2e67697468756275736572636f6e74656e742e636f6d2f646465633866663330346365346535353336333662656336353063303533656566633030363966312f36383734373437303361326632663636326536333663326536633739326636393734363536643733326633323531333035383330333533323730333236643333333733313664333037373332346633303433326636383631366336663637363936363265363736393636" alt="" data-canonical-src="https://camo.githubusercontent.com/ddec8ff304ce4e553636bec650c053eefc0069f1/687474703a2f2f662e636c2e6c792f6974656d732f3251305830353270326d3337316d3077324f30432f68616c6f6769662e676966"></a></p>

<h3>
<span id="実装方法" class="fragment"></span><a href="#%E5%AE%9F%E8%A3%85%E6%96%B9%E6%B3%95"><i class="fa fa-link"></i></a>実装方法</h3>

<p>MultiplePulsingHaloLayer というクラスを使用します。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>MultiplePulsingHaloLayer *multiLayer = [[MultiplePulsingHaloLayer alloc] initWithHaloLayerNum:3 andStartInterval:1];
multiLayer.position = self.view.center;
[multiLayer buildSublayers];
[self.view.layer addSublayer:multiLayer];
</pre></div></div>

<p>単発パルスと比べて増えた手順は</p>

<ul>
<li>初期化時に引数を渡す</li>
<li>
<code>buildSublayers</code> を呼ぶ</li>
</ul>

<p>だけ！</p>

<h2>
<span id="追記ibeaconを2台のiphoneで試せるサンプル" class="fragment"></span><a href="#%E8%BF%BD%E8%A8%98ibeacon%E3%82%922%E5%8F%B0%E3%81%AEiphone%E3%81%A7%E8%A9%A6%E3%81%9B%E3%82%8B%E3%82%B5%E3%83%B3%E3%83%97%E3%83%AB"><i class="fa fa-link"></i></a>（追記）iBeaconを2台のiPhoneで試せるサンプル</h2>

<p>iOS7の <strong>新機能のサンプルコード</strong> を約20種詰め込んだオープンソースアプリ <a href="http://d.hatena.ne.jp/shu223/20130924/1379990718" rel="nofollow noopener" target="_blank">iOS7 Sampler</a> に、iBeacon のサンプルを追加しました。</p>

<p><a href="https://github.com/shu223/iOS7-Sampler" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/shu223/iOS7-Sampler</a></p>

<p>2台のiPhoneを使用して、一方をビーコン（Peripheral）、もう一方を監視側（Central）として iBeacon の挙動を試すことができます。</p>

<p>PulsingHaloも内部で用いています。</p>

<ul>
<li>参考にした記事

<ul>
<li><a href="http://dev.classmethod.jp/references/ios7-ibeacon-api/" rel="nofollow noopener" target="_blank">[iOS 7] 新たな領域観測サービス iBeacon を使ってみる ｜ Developers.IO</a></li>
<li><a href="http://brightechno.com/blog/archives/220" rel="nofollow noopener" target="_blank">iBeacon Tips: 正しいビーコン監視方法 | ブライテクノBlog</a></li>
</ul>
</li>
</ul>

<div class="footnotes">
<hr>
<ol>

<li id="fn1">
<p>iBeaconとはなんぞや、というところから勉強しつつ何か書こうと思っていたのですが、いざ勉強しようと <a href="http://qiita.com/hedjirog/items/abd48a55387891cc8503" id="reference-6ba83e588570b5f45cb5">ここ</a> を見たら書きたかったネタが全部既出となっていました <a href="#fnref1">↩</a></p>
</li>

<li id="fn2">
<p>Estimote のアプリでもこういう演出をしていたので、こういうのがビーコン的なのかなと。。 <a href="#fnref2">↩</a></p>
</li>

</ol>
</div>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>shu223さんの<br />35位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>54</kbd>
		<a target="_blank" href="https://qiita.com/shu223/items/c2222e4e1f87d473b23a">Parseにサーバーサイドのコードを書いてiOSアプリから呼ぶ</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-10-05 12:35:35</center>
	</td>
	<td style="width:200px;">
		@shu223<br />(Freelancer 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/3180/profile-images/1473682733">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Objective-C]</b> <b>[iPhone]</b> <b>[iOS]</b> <b>[Parse]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>Parse の Cloud Code をはじめて触ってみた際に書いたメモです。 <strong>ローカルで生成した JavaScript のコードをデプロイし、iOSアプリから呼んでみる</strong> までの手順。</p>

<h3>
<span id="1-準備" class="fragment"></span><a href="#1-%E6%BA%96%E5%82%99"><i class="fa fa-link"></i></a>1. 準備</h3>

<ul>
<li>Parseダッシュボードからアプリをつくっておく</li>
<li>コマンドラインツールをインストールする</li>
</ul>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ curl -s https://www.parse.com/downloads/cloud_code/installer.sh | sudo /bin/bash
</pre></div></div>

<h3>
<span id="2-parse-newコマンドを実行する" class="fragment"></span><a href="#2-parse-new%E3%82%B3%E3%83%9E%E3%83%B3%E3%83%89%E3%82%92%E5%AE%9F%E8%A1%8C%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>2. Parse newコマンドを実行する</h3>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ parse new MyCloudCode
</pre></div></div>

<p>EmailとPasswordを求められるので、入力する。</p>

<p>GitHubとかでサインアップした場合、Passwordがないので、ParseのダッシュボードのAccount-&gt;Editで設定しておく。</p>

<p>認証に成功すると、</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>1:MyAppA
2:MyAppB
Select an App: 
</pre></div></div>

<p>みたいな感じでどのアプリにするか聞かれるので、番号を入力する。</p>

<p>成功すると、下記フォルダ／ファイルが自動生成される。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>-config/
  global.json
-cloud/
  main.js
-public/
  index.html
</pre></div></div>

<h3>
<span id="3-デプロイする" class="fragment"></span><a href="#3-%E3%83%87%E3%83%97%E3%83%AD%E3%82%A4%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>3. デプロイする</h3>

<p>cloud/main.js にはHello world的なコードが入ってるので、すぐにデプロイして試せる。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ cd MyCloudCode
$ parse deploy
</pre></div></div>

<p>成功すると、ダッシュボードの Cloud Code タブで main.js の内容を確認できる。</p>

<p>ちなみにこんなコード。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>Parse.Cloud.define("hello", function(request, response) {
  response.success("Hello world!");
});
</pre></div></div>

<h3>
<span id="4-コマンドラインからたたいてみる" class="fragment"></span><a href="#4-%E3%82%B3%E3%83%9E%E3%83%B3%E3%83%89%E3%83%A9%E3%82%A4%E3%83%B3%E3%81%8B%E3%82%89%E3%81%9F%E3%81%9F%E3%81%84%E3%81%A6%E3%81%BF%E3%82%8B"><i class="fa fa-link"></i></a>4. コマンドラインからたたいてみる</h3>

<p>curlコマンドからmain.jsに実装されているhello関数を呼ぶ。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>curl -X POST \
  -H "X-Parse-Application-Id: {Application ID}" \
  -H "X-Parse-REST-API-Key: {REST API Key}" \
  -H "Content-Type: application/json" \
  -d '{}' \
  https://api.parse.com/1/functions/hello
</pre></div></div>

<p>こういうレスポンスが返ってくる。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>{
  "result": "Hello world!"
}
</pre></div></div>

<h3>
<span id="5-iosアプリからたたいてみる" class="fragment"></span><a href="#5-ios%E3%82%A2%E3%83%97%E3%83%AA%E3%81%8B%E3%82%89%E3%81%9F%E3%81%9F%E3%81%84%E3%81%A6%E3%81%BF%E3%82%8B"><i class="fa fa-link"></i></a>5. iOSアプリからたたいてみる</h3>

<h4>
<span id="iosアプリへparse-sdkを導入する" class="fragment"></span><a href="#ios%E3%82%A2%E3%83%97%E3%83%AA%E3%81%B8parse-sdk%E3%82%92%E5%B0%8E%E5%85%A5%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>iOSアプリへParse SDKを導入する</h4>

<p>この詳しい手順は省略します。</p>

<p><a href="https://www.parse.com/apps/quickstart" rel="nofollow noopener" target="_blank">クイックスタートガイド</a></p>

<p>Parse.frameworkを追加して、依存フレームワークを追加して、APIキーとかをセットするメソッドを呼ぶ、それだけです。</p>

<h4>
<span id="callfunctioninbackgroundwithparameters-メソッドで実装した関数を呼ぶ" class="fragment"></span><a href="#callfunctioninbackgroundwithparameters-%E3%83%A1%E3%82%BD%E3%83%83%E3%83%89%E3%81%A7%E5%AE%9F%E8%A3%85%E3%81%97%E3%81%9F%E9%96%A2%E6%95%B0%E3%82%92%E5%91%BC%E3%81%B6"><i class="fa fa-link"></i></a><code>callFunctionInBackground:withParameters:</code> メソッドで実装した関数を呼ぶ</h4>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>[PFCloud callFunctionInBackground:@"hello"
                   withParameters:@{}
                            block:^(NSString *result, NSError *error) {

                                if (error) {

                                    NSLog(@"error:%@", error);
                                }
                                else {

                                    NSLog(@"result:%@", result);
                                }
                            }];
</pre></div></div>

<h3>
<span id="参考資料" class="fragment"></span><a href="#%E5%8F%82%E8%80%83%E8%B3%87%E6%96%99"><i class="fa fa-link"></i></a>参考資料</h3>

<ul>
<li> <a href="https://www.parse.com/docs/cloud_code_guide" rel="nofollow noopener" target="_blank">Getting Started</a> </li>
<li> <a href="https://www.parse.com/docs/ios_guide#cloudfunctions/iOS" rel="nofollow noopener" target="_blank">Cloud Functions</a> </li>
</ul>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>shu223さんの<br />36位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>52</kbd>
		<a target="_blank" href="https://qiita.com/shu223/items/a3754f8015875c1cc4f2">openFrameworksとArduinoを連携させる</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-12-11 02:42:13</center>
	</td>
	<td style="width:200px;">
		@shu223<br />(Freelancer 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/3180/profile-images/1473682733">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Objective-C]</b> <b>[Mac]</b> <b>[Arduino]</b> <b>[Xcode]</b> <b>[openFrameworks]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>ofSerial を使用して <strong>シリアル通信で openFrameworks と Arduino を連携させる</strong> 方法について書きます。</p>

<p>下記書籍を参考にしました。</p>

<div class="">
<div class=""><a href="http://www.amazon.co.jp/exec/obidos/ASIN/4777516393/22301-22/ref=nosim/" rel="nofollow noopener" target="_blank"><img src="https://camo.qiitausercontent.com/c565d4a4210215a27628768ff3b3dd94bdbd9bcf/687474703a2f2f6563782e696d616765732d616d617a6f6e2e636f6d2f696d616765732f492f3531475548484c3973704c2e5f534c3136305f2e6a7067" alt="はじめてのopenFrameworks―「クリエイティブ・コーディング」のための「C++」用フレームワーク! (I・O BOOKS)" data-canonical-src="http://ecx.images-amazon.com/images/I/51GUHHL9spL._SL160_.jpg"></a></div>
<div class="">
<div class=""><a href="http://www.amazon.co.jp/exec/obidos/ASIN/4777516393/22301-22/ref=nosim/" rel="nofollow noopener" target="_blank">はじめてのopenFrameworks―「クリエイティブ・コーディング」のための「C++」用フレームワーク! (I・O BOOKS)</a></div>
<div class="">泉本 優輝 <br>工学社 <br>売り上げランキング: 799,616<br>
</div>
<div class=""><div class=""><a href="http://www.amazon.co.jp/exec/obidos/ASIN/4777516393/22301-22/ref=nosim/" rel="nofollow noopener" target="_blank">Amazon.co.jpで詳細を見る</a></div></div>
</div>
<div class=""></div>
</div>

<p>＃上記の本は、厳しいレビューがついていますし、本は薄く、オシャレ感もありませんが、そもそも <strong>国内に2種類しかでてない</strong> oF 専門書のうちのひとつですし、 <strong>Arduino, Wiiリモコン, Kinect</strong> などとのデバイスとの連携方法も載ってて、参考になる部分もあるので、意外とオススメです。</p>

<h2>
<span id="arduino側" class="fragment"></span><a href="#arduino%E5%81%B4"><i class="fa fa-link"></i></a>Arduino側</h2>

<h3>
<span id="回路を組む" class="fragment"></span><a href="#%E5%9B%9E%E8%B7%AF%E3%82%92%E7%B5%84%E3%82%80"><i class="fa fa-link"></i></a>回路を組む</h3>

<p><a href="https://camo.qiitausercontent.com/5a0b381895c0ca12bb3cae5c5ae095320e3458eb/687474703a2f2f662e636c2e6c792f6974656d732f3435326d3150306f3153326b3432304e323432562f61726475696e6f5f5f5f2e6a7067" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/5a0b381895c0ca12bb3cae5c5ae095320e3458eb/687474703a2f2f662e636c2e6c792f6974656d732f3435326d3150306f3153326b3432304e323432562f61726475696e6f5f5f5f2e6a7067" data-canonical-src="http://f.cl.ly/items/452m1P0o1S2k420N242V/arduino___.jpg"></a></p>

<p>タクトスイッチの片方をGNDへ、もう片方をデジタルピンの2番に挿しています。</p>

<h3>
<span id="コード" class="fragment"></span><a href="#%E3%82%B3%E3%83%BC%E3%83%89"><i class="fa fa-link"></i></a>コード</h3>

<p>Arduinoのコードはこんな感じです。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>const int SW  = 2;

void setup(){

  // シリアル通信開始
  Serial.begin(9600);

  // ピンモード
  pinMode(SW,  INPUT_PULLUP);
}

void loop(){

  // スイッチの値を読み取る
  int value = digitalRead(2);

  if (value != HIGH) {

    Serial.println(1);
  } 
}
</pre></div></div>

<p>タクトスイッチが押されている間、"1" をシリアル通信で送ります。</p>

<h2>
<span id="openframeworks側の実装" class="fragment"></span><a href="#openframeworks%E5%81%B4%E3%81%AE%E5%AE%9F%E8%A3%85"><i class="fa fa-link"></i></a>openFrameworks側の実装</h2>

<h3>
<span id="メンバ変数を追加" class="fragment"></span><a href="#%E3%83%A1%E3%83%B3%E3%83%90%E5%A4%89%E6%95%B0%E3%82%92%E8%BF%BD%E5%8A%A0"><i class="fa fa-link"></i></a>メンバ変数を追加</h3>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>int nBytesRead = 0;
ofSerial serial;
char bytesReadString[4];
</pre></div></div>

<p>セットアップ</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>void testApp::setup(){

    ofBackground(255,255,255);

    // シリアル通信開始
    serial.setup("/dev/tty.usbmodem1411",9600);
}
</pre></div></div>

<p>シリアル通信を開始する <code>ofSerial::setup</code> の第1引数にはポート名を指定する必要があるのですが、このポート名は、ArduinoのIDEから、</p>

<p>[Tools] -&gt; [Serial Port]</p>

<p>で確認できます。Arduinoをつないでいるポート名にチェックマークが付いています。</p>

<h3>
<span id="通信データの読み込みと描画" class="fragment"></span><a href="#%E9%80%9A%E4%BF%A1%E3%83%87%E3%83%BC%E3%82%BF%E3%81%AE%E8%AA%AD%E3%81%BF%E8%BE%BC%E3%81%BF%E3%81%A8%E6%8F%8F%E7%94%BB"><i class="fa fa-link"></i></a>通信データの読み込みと描画</h3>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>void testApp::update(){

    nBytesRead = 0;
    int nRead = 0;
    char bytesRead[3];
    unsigned char bytesReturned[3];

    memset(bytesReturned, 0, 3);
    memset(bytesReadString, 0, 4);

    // シリアル通信で受け取ったデータを読み込む
    while ((nRead = serial.readBytes(bytesReturned, 3)) &gt; 0) {

        nBytesRead = nRead;
    };

    if (nBytesRead &gt; 0) {

        memcpy(bytesReadString, bytesReturned, 3);
        string x = bytesReadString;
    }
}

void testApp::draw(){

    // 送られてきた文字列を表示
    string msg;
    msg += ofToString(nBytesRead) + " [bytes]" + "\n";
    msg += "read: " + ofToString(bytesReadString);
    ofSetColor(0);
    ofDrawBitmapString(msg, 100, 100);
}
</pre></div></div>

<h2>
<span id="動かしてみる" class="fragment"></span><a href="#%E5%8B%95%E3%81%8B%E3%81%97%E3%81%A6%E3%81%BF%E3%82%8B"><i class="fa fa-link"></i></a>動かしてみる</h2>

<ul>
<li>モニタ用に Arduino の [Tools] -&gt; [Serial Monitor] を立ち上げておく</li>
<li>Arduinoのスイッチを押すと、シリアル通信で送られてきた情報が表示される</li>
</ul>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>shu223さんの<br />37位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>51</kbd>
		<a target="_blank" href="https://qiita.com/shu223/items/3f2141f8708dacb02d50">【iOS7】UIWebViewの新機能：UIWebPagination</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2014-02-07 19:21:08</center>
	</td>
	<td style="width:200px;">
		@shu223<br />(Freelancer 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/3180/profile-images/1473682733">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Objective-C]</b> <b>[iPad]</b> <b>[Xcode]</b> <b>[iOS]</b> <b>[ios7]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>UIWebViewにもいろいろと見慣れないメソッドがiOS7で追加されていたので、使ってみました。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>@property (nonatomic) UIWebPaginationMode paginationMode;
@property (nonatomic) UIWebPaginationBreakingMode paginationBreakingMode;
@property (nonatomic) CGFloat pageLength;
@property (nonatomic) CGFloat gapBetweenPages;
@property (nonatomic, readonly) NSUInteger pageCount;
</pre></div></div>

<p>名前から察するに、全体的に <strong>Webのページネーション</strong> に関する機能追加のようです。</p>

<p>UIWebPaginationMode には次のような値が定義されています。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>typedef NS_ENUM(NSInteger, UIWebPaginationMode) {
    UIWebPaginationModeUnpaginated,
    UIWebPaginationModeLeftToRight,
    UIWebPaginationModeTopToBottom,
    UIWebPaginationModeBottomToTop,
    UIWebPaginationModeRightToLeft
};
</pre></div></div>

<p>ドキュメントによると UIWebView のプロパティ <code>paginationMode</code> にはデフォルトで <code>UIWebPaginationModeUnpaginate</code> が入っているとのこと。</p>

<p><code>paginationMode</code> を変えると何が起きるのか、次のように簡単なアプリをつくって試してみました。</p>

<p><a href="https://camo.qiitausercontent.com/1f77557a1d33a92014d9ad3dd0b7ddbbfc4461f5/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f333138302f63653835663564322d646332372d626235642d346237372d6138336436373331363264642e6a706567" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/1f77557a1d33a92014d9ad3dd0b7ddbbfc4461f5/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f333138302f63653835663564322d646332372d626235642d346237372d6138336436373331363264642e6a706567" alt="pagination1.jpg" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/3180/ce85f5d2-dc27-bb5d-4b77-a83d673162dd.jpeg"></a></p>

<p>画面下部の UISegmentedControl で <code>paginationMode</code> を切り替えられます。</p>

<p>これで試してみて、「なるほど」と思った部分だけ紹介します。</p>

<h2>
<span id="uiwebpaginationmodelefttoright" class="fragment"></span><a href="#uiwebpaginationmodelefttoright"><i class="fa fa-link"></i></a>UIWebPaginationModeLeftToRight</h2>

<p><code>paginationMode</code> に <code>UIWebPaginationModeLeftToRight</code> を指定すると、</p>

<p><a href="https://camo.qiitausercontent.com/d18f07ebb5ded443ad42aedd1b113fd543f4fc4e/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f333138302f33346337386261342d613139642d393336392d396630662d3165303734616132306665352e6a706567" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/d18f07ebb5ded443ad42aedd1b113fd543f4fc4e/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f333138302f33346337386261342d613139642d393336392d396630662d3165303734616132306665352e6a706567" alt="pagination2.jpg" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/3180/34c78ba4-a19d-9369-9f0f-1e074aa20fe5.jpeg"></a></p>

<p>一見普通だったのが、水平方向にスクロールさせてみると、</p>

<p><a href="https://camo.qiitausercontent.com/66c06c15f21e2bc669bc03d83aeeb94b5bdcdf14/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f333138302f34663163643533642d386638312d346365632d303133332d3435323331366466663531312e6a706567" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/66c06c15f21e2bc669bc03d83aeeb94b5bdcdf14/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f333138302f34663163643533642d386638312d346365632d303133332d3435323331366466663531312e6a706567" alt="pagination3.jpg" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/3180/4f1cd53d-8f81-4cec-0133-452316dff511.jpeg"></a></p>

<p>なるほど、確かに Left to Right にページネーションされています。</p>

<p>ちなみに、 <strong>ロード完了したあとでも <code>paginationMode</code> を変えると表示が更新されます</strong> （コンテンツ自体は変わりないので、当たり前ですが）。</p>

<h2>
<span id="pagecount" class="fragment"></span><a href="#pagecount"><i class="fa fa-link"></i></a>pageCount</h2>

<p><code>paginationMode</code> を指定して描画すると <code>pageCount</code> が取れるようになりました。UIPageControl の <code>numberOfPages</code> に渡したりするとよさそうです。</p>

<p>ちなみに上記サンプルで表示しているのは自分のブログですが、26ページでした。</p>

<h2>
<span id="ページングを有効にする" class="fragment"></span><a href="#%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%B3%E3%82%B0%E3%82%92%E6%9C%89%E5%8A%B9%E3%81%AB%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>ページングを有効にする</h2>

<p>ページネーションしてくれるならページングを有効にしない手はない、ということで</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>self.webView.scrollView.pagingEnabled = YES;
</pre></div></div>

<p>するといい感じです。</p>

<h2>
<span id="サンプル" class="fragment"></span><a href="#%E3%82%B5%E3%83%B3%E3%83%97%E3%83%AB"><i class="fa fa-link"></i></a>サンプル</h2>

<p>『<a href="http://d.hatena.ne.jp/shu223/20130924/1379990718" rel="nofollow noopener" target="_blank">iOS7 Sampler</a>』にサンプルコードを追加してあります。</p>

<p><a href="https://camo.qiitausercontent.com/1dd4b6f7795cb1087e6c23ff8ca0698a8e719293/687474703a2f2f662e636c2e6c792f6974656d732f32713246304c326f324733483246306b306c31452f494d475f393232315f72315f63312e6a7067" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/1dd4b6f7795cb1087e6c23ff8ca0698a8e719293/687474703a2f2f662e636c2e6c792f6974656d732f32713246304c326f324733483246306b306c31452f494d475f393232315f72315f63312e6a7067" alt="" data-canonical-src="http://f.cl.ly/items/2q2F0L2o2G3H2F0k0l1E/IMG_9221_r1_c1.jpg"></a></p>

<h2>
<span id="所感" class="fragment"></span><a href="#%E6%89%80%E6%84%9F"><i class="fa fa-link"></i></a>所感</h2>

<p>Web漫画とかみるアプリにはいいかもしれません。</p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>shu223さんの<br />38位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>51</kbd>
		<a target="_blank" href="https://qiita.com/shu223/items/352a84a60be75d656ae3">iOSのCore Bluetooth / BLEの通信速度</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2014-02-04 21:04:17</center>
	</td>
	<td style="width:200px;">
		@shu223<br />(Freelancer 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/3180/profile-images/1473682733">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Objective-C]</b> <b>[iOS]</b> <b>[bluetooth]</b> <b>[BLE]</b> <b>[IoT]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p><strong>Bluetooth Low Energy（Bluetooth4.0,  以下BLE）の通信速度</strong> について調査、 <strong>実測</strong> してみたメモ。</p>

<p><strong>（2015.3追記）この記事は古く、書いた当時はBLEについての知識も乏しかったので内容には多分に誤りが混じっている可能性があります。</strong></p>

<h1>
<span id="調査" class="fragment"></span><a href="#%E8%AA%BF%E6%9F%BB"><i class="fa fa-link"></i></a>調査</h1>

<p>まず "BLE 通信速度" でググってみました。</p>

<h3>
<span id="blebluetooth-low-energyとはについて真面目に書く" class="fragment"></span><a href="#blebluetooth-low-energy%E3%81%A8%E3%81%AF%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%9C%9F%E9%9D%A2%E7%9B%AE%E3%81%AB%E6%9B%B8%E3%81%8F"><i class="fa fa-link"></i></a><a href="http://mixture-art.net/blebluetooth-low-energy%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%9C%9F%E9%9D%A2%E7%9B%AE%E3%81%AB%E6%9B%B8%E3%81%8F/" rel="nofollow noopener" target="_blank">BLE(Bluetooth Low Energy)とは？について真面目に書く</a>
</h3>

<blockquote>
<p>BLEでは「無接続状態」から→「接続」→「データやり取り」までの速度を圧倒的に早くすることで<br>
普段は頻繁に「つないで」「死んで」「つないで」「死んで」を繰り返している。</p>

<p>ホントに必要なときしか動かないことで消費電力を最適化しているわけだ。</p>

<p>そうすると気になるのは送信側でのデータ入力から受信側での受け取りまでのディレイだが、<br>
 <strong>接続自体のディレイは6ms程度、なのできっとデータ送受信トータル20-30msくらい</strong> なのかなぁ。</p>

<p>まぁ普通の人間が感じることができる（違和感を感じることができる）ディレイなんてせいぜい30ms以上の場合だけだから既出のキーボードなどの用途ではまったくもって申し分ないレベルだ、といえるだろう。</p>
</blockquote>

<h3>
<span id="スルー防止も-bleがもたらすビジネスチャンス" class="fragment"></span><a href="#%E3%82%B9%E3%83%AB%E3%83%BC%E9%98%B2%E6%AD%A2%E3%82%82-ble%E3%81%8C%E3%82%82%E3%81%9F%E3%82%89%E3%81%99%E3%83%93%E3%82%B8%E3%83%8D%E3%82%B9%E3%83%81%E3%83%A3%E3%83%B3%E3%82%B9"><i class="fa fa-link"></i></a><a href="http://www.atmarkit.co.jp/ait/articles/1310/15/news097.html" rel="nofollow noopener" target="_blank">スルー防止も？ BLEがもたらすビジネスチャンス</a>
</h3>

<blockquote>
<p>スペック上は最大通信速度が1Mbpsと謳われているが、「 <strong>実質10kbps程度</strong> と圧倒的に遅い」（森山氏）そうだ。</p>
</blockquote>

<h3>
<span id="ios-bluetooth-low-energyの開発-その1" class="fragment"></span><a href="#ios-bluetooth-low-energy%E3%81%AE%E9%96%8B%E7%99%BA-%E3%81%9D%E3%81%AE1"><i class="fa fa-link"></i></a><a href="http://reinforce-lab.github.io/blog/2013/01/21/ios-ble-introduction/" rel="nofollow noopener" target="_blank">iOS Bluetooth Low Energyの開発 その1</a>
</h3>

<blockquote>
<p>BLEは、例えば1秒に20バイト程度のデータを送受信するような、データのやり取り頻度は低いけれども、無線接続自体は長期間維持できる応用分野を想定した規格です。データ通信速度も物理層で1Mbpsです。クラシックBTは、ヘッドセットやパーソナル・エリア・ネットワーク(PAN)のような、特定の端末と接続すること(ペアリング)、常時データ通信があること、また高いデータ・レート(~3Mbps)が必要とされる、場面を想定した規格です。</p>

<p>BLEの通信速度は、物理層で1Mbps、 <strong>実際の通信速度は~50kbps程度</strong> です。一方でクラシックBTは物理層で3Mbps(WiFiの物理層を使わないものであれば)で、~500kbps程度です。そもそも、そのような連続かつ高速のデータ送受信をし続ける応用例には、BLEを選択すること自体が、BLEの規格の狙い目からはずれていますから、クラシックBTのみで設計すればよいでしょう。</p>
</blockquote>

<p>諸説ありますが、 <strong>実質10～50kbps</strong> のようです。</p>

<h1>
<span id="iosのcore-bluetoothで実測" class="fragment"></span><a href="#ios%E3%81%AEcore-bluetooth%E3%81%A7%E5%AE%9F%E6%B8%AC"><i class="fa fa-link"></i></a>iOSのCore Bluetoothで実測</h1>

<p>Core Bluetoothで実際に実装して計ってみました。</p>

<p>計測用アプリは、下記書籍のサンプルをもとに、</p>

<ul>
<li>NSTimerでセントラルからのRead処理 ((ペリフェラルからのNotifyも同様にループさせて試してみたところ、Readよりも遅かったので、本記事ではReadについてのみ言及しています。)) をループさせる（ループ間隔はUIで変更できる）</li>
<li>ペリフェラルからはランダムなNSDataを送り返す（データ長はUIで変更できる）</li>
<li>セントラルで受信したデータサイズから通信速度（最大、最小、平均）を計算する</li>
</ul>

<p>というような <strong>計測用アプリ</strong> をつくりました。</p>

<div class="">
<div class=""><a href="http://www.amazon.co.jp/exec/obidos/ASIN/4844335200/22301-22/ref=nosim/" rel="nofollow noopener" target="_blank"><img src="https://camo.qiitausercontent.com/0bde5aade92b59a7113a9919dc4a9281fc4d4c26/687474703a2f2f6563782e696d616765732d616d617a6f6e2e636f6d2f696d616765732f492f343168732532425068534d714c2e5f534c3136305f2e6a7067" alt="上を目指すプログラマーのためのiPhoneアプリ開発テクニック iOS 7編" data-canonical-src="http://ecx.images-amazon.com/images/I/41hs%2BPhSMqL._SL160_.jpg"></a></div>
<div class="">
<div class="">
<a href="http://www.amazon.co.jp/exec/obidos/ASIN/4844335200/22301-22/ref=nosim/" rel="nofollow noopener" target="_blank">上を目指すプログラマーのためのiPhoneアプリ開発テクニック iOS 7編</a><div class="">posted with <a href="http://www.amazlet.com/" title="amazlet" rel="nofollow noopener" target="_blank">amazlet</a> at 14.01.09</div>
</div>
<div class="">加藤 寛人 西方 夏子 藤川 宏之 鈴木 晃 高丘 知央 <br>インプレスジャパン <br>売り上げランキング: 6,194<br>
</div>
<div class=""><div class=""><a href="http://www.amazon.co.jp/exec/obidos/ASIN/4844335200/22301-22/ref=nosim/" rel="nofollow noopener" target="_blank">Amazon.co.jpで詳細を見る</a></div></div>
</div>
<div class=""></div>
</div>

<p>セントラル側に iPhone5s、ペリフェラル側に iPhone5 を使用し、ループ間隔や、一度に送るNSDataオブジェクトのサイズをいろいろ変更しつつ計測したところ、 <strong>安定して出た通信速度は 5kbps 程度</strong> でした。</p>

<h1>
<span id="関連記事" class="fragment"></span><a href="#%E9%96%A2%E9%80%A3%E8%A8%98%E4%BA%8B"><i class="fa fa-link"></i></a>関連記事</h1>

<ul>
<li><a href="http://d.hatena.ne.jp/shu223/20140130/1391033579" rel="nofollow noopener" target="_blank">Core Bluetooth / BLEで音声データをやりとりする</a></li>
<li><a href="http://d.hatena.ne.jp/shu223/20140109/1389216052" rel="nofollow noopener" target="_blank">Core Bluetoothのプロファイルについて調べたことのまとめ</a></li>
</ul>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>shu223さんの<br />39位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>51</kbd>
		<a target="_blank" href="https://qiita.com/shu223/items/6fd2a22b717055e9682b">iOS 7 で使えるフォント名一覧</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-10-17 16:25:03</center>
	</td>
	<td style="width:200px;">
		@shu223<br />(Freelancer 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/3180/profile-images/1473682733">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Objective-C]</b> <b>[iPhone]</b> <b>[Xcode]</b> <b>[iOS]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>iOS7のフォント名一覧です。</p>

<p>（追記2013/10/17）</p>

<ul>
<li><p><a href="http://d.hatena.ne.jp/shu223/20131017/1381992664" rel="nofollow noopener" target="_blank">こちらに書いた記事</a>では、 <strong>iOS7で追加されたフォント、iOS6で追加されたフォントがわかるよう色分け</strong> してあります。</p></li>
<li><p><a href="http://d.hatena.ne.jp/shu223/20131017/1381992664:title=" rel="nofollow noopener" target="_blank">iOS7の新機能のサンプルコード集、『iOS7 Sampler』</a> で新フォントを確認できるようにしました。</p></li>
</ul>

<p><a href="https://camo.qiitausercontent.com/4ac6e17fefcf4d378e936730942af899a7af52ab/687474703a2f2f63646e2d616b2e662e73742d686174656e612e636f6d2f696d616765732f666f746f6c6966652f732f7368753232332f32303133313031372f32303133313031373231323230392e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/4ac6e17fefcf4d378e936730942af899a7af52ab/687474703a2f2f63646e2d616b2e662e73742d686174656e612e636f6d2f696d616765732f666f746f6c6966652f732f7368753232332f32303133313031372f32303133313031373231323230392e706e67" width="240" data-canonical-src="http://cdn-ak.f.st-hatena.com/images/fotolife/s/shu223/20131017/20131017212209.png"></a></p>

<p>（追記ここまで）</p>

<h3>
<span id="何に使うのか" class="fragment"></span><a href="#%E4%BD%95%E3%81%AB%E4%BD%BF%E3%81%86%E3%81%AE%E3%81%8B"><i class="fa fa-link"></i></a>何に使うのか？</h3>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>self.hogeLabel.font = [UIFont fontWithName:@"Helvetica Bold Oblique" size:10.0];
</pre></div></div>

<p>みたいな感じで <strong>システムフォント以外の UIFont を使う場合</strong> にこのフォント名が必要になります。</p>

<h3>
<span id="どうやって出力したのか" class="fragment"></span><a href="#%E3%81%A9%E3%81%86%E3%82%84%E3%81%A3%E3%81%A6%E5%87%BA%E5%8A%9B%E3%81%97%E3%81%9F%E3%81%AE%E3%81%8B"><i class="fa fa-link"></i></a>どうやって出力したのか？</h3>

<p>UIFont の <code>familyNames</code> メソッドと、<code>fontNamesForFamilyName:</code> メソッドを使います。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>NSMutableString *str = @"".mutableCopy;
for (NSString *familyName in [UIFont familyNames]) {
    [str appendFormat:@"**%@**\n\n", familyName];
    for (NSString *fontName in [UIFont fontNamesForFamilyName:familyName]) {
        [str appendFormat:@"- %@\n", fontName];
    }
    [str appendFormat:@"\n"];
}
NSLog(@"%@", str);
</pre></div></div>

<p>（ここに貼り付ける用にmarkdown形式で出力してます）</p>

<h2>
<span id="一覧" class="fragment"></span><a href="#%E4%B8%80%E8%A6%A7"><i class="fa fa-link"></i></a>一覧</h2>

<p>合計で <strong>ファミリー数が71、フォント数が236</strong> でした。</p>

<p><strong>Thonburi</strong></p>

<ul>
<li>Thonburi-Bold</li>
<li>Thonburi</li>
<li>Thonburi-Light</li>
</ul>

<p><strong>Snell Roundhand</strong></p>

<ul>
<li>SnellRoundhand-Black</li>
<li>SnellRoundhand-Bold</li>
<li>SnellRoundhand</li>
</ul>

<p><strong>Academy Engraved LET</strong></p>

<ul>
<li>AcademyEngravedLetPlain</li>
</ul>

<p><strong>Marker Felt</strong></p>

<ul>
<li>MarkerFelt-Thin</li>
<li>MarkerFelt-Wide</li>
</ul>

<p><strong>Avenir</strong></p>

<ul>
<li>Avenir-Heavy</li>
<li>Avenir-Oblique</li>
<li>Avenir-Black</li>
<li>Avenir-Book</li>
<li>Avenir-BlackOblique</li>
<li>Avenir-HeavyOblique</li>
<li>Avenir-Light</li>
<li>Avenir-MediumOblique</li>
<li>Avenir-Medium</li>
<li>Avenir-LightOblique</li>
<li>Avenir-Roman</li>
<li>Avenir-BookOblique</li>
</ul>

<p><strong>Geeza Pro</strong></p>

<ul>
<li>GeezaPro-Bold</li>
<li>GeezaPro</li>
<li>GeezaPro-Light</li>
</ul>

<p><strong>Arial Rounded MT Bold</strong></p>

<ul>
<li>ArialRoundedMTBold</li>
</ul>

<p><strong>Trebuchet MS</strong></p>

<ul>
<li>Trebuchet-BoldItalic</li>
<li>TrebuchetMS</li>
<li>TrebuchetMS-Bold</li>
<li>TrebuchetMS-Italic</li>
</ul>

<p><strong>Arial</strong></p>

<ul>
<li>ArialMT</li>
<li>Arial-BoldItalicMT</li>
<li>Arial-ItalicMT</li>
<li>Arial-BoldMT</li>
</ul>

<p><strong>Marion</strong></p>

<ul>
<li>Marion-Regular</li>
<li>Marion-Italic</li>
<li>Marion-Bold</li>
</ul>

<p><strong>Menlo</strong></p>

<ul>
<li>Menlo-BoldItalic</li>
<li>Menlo-Regular</li>
<li>Menlo-Bold</li>
<li>Menlo-Italic</li>
</ul>

<p><strong>Malayalam Sangam MN</strong></p>

<ul>
<li>MalayalamSangamMN</li>
<li>MalayalamSangamMN-Bold</li>
</ul>

<p><strong>Kannada Sangam MN</strong></p>

<ul>
<li>KannadaSangamMN</li>
<li>KannadaSangamMN-Bold</li>
</ul>

<p><strong>Gurmukhi MN</strong></p>

<ul>
<li>GurmukhiMN-Bold</li>
<li>GurmukhiMN</li>
</ul>

<p><strong>Bodoni 72 Oldstyle</strong></p>

<ul>
<li>BodoniSvtyTwoOSITCTT-BookIt</li>
<li>BodoniSvtyTwoOSITCTT-Bold</li>
<li>BodoniSvtyTwoOSITCTT-Book</li>
</ul>

<p><strong>Bradley Hand</strong></p>

<ul>
<li>BradleyHandITCTT-Bold</li>
</ul>

<p><strong>Cochin</strong></p>

<ul>
<li>Cochin-Bold</li>
<li>Cochin-BoldItalic</li>
<li>Cochin-Italic</li>
<li>Cochin</li>
</ul>

<p><strong>Sinhala Sangam MN</strong></p>

<ul>
<li>SinhalaSangamMN</li>
<li>SinhalaSangamMN-Bold</li>
</ul>

<p><strong>Hiragino Kaku Gothic ProN</strong></p>

<ul>
<li>HiraKakuProN-W6</li>
<li>HiraKakuProN-W3</li>
</ul>

<p><strong>Iowan Old Style</strong></p>

<ul>
<li>IowanOldStyle-Bold</li>
<li>IowanOldStyle-BoldItalic</li>
<li>IowanOldStyle-Italic</li>
<li>IowanOldStyle-Roman</li>
</ul>

<p><strong>Damascus</strong></p>

<ul>
<li>DamascusBold</li>
<li>Damascus</li>
<li>DamascusMedium</li>
<li>DamascusSemiBold</li>
</ul>

<p><strong>Al Nile</strong></p>

<ul>
<li>AlNile-Bold</li>
<li>AlNile</li>
</ul>

<p><strong>Farah</strong></p>

<ul>
<li>Farah</li>
</ul>

<p><strong>Papyrus</strong></p>

<ul>
<li>Papyrus-Condensed</li>
<li>Papyrus</li>
</ul>

<p><strong>Verdana</strong></p>

<ul>
<li>Verdana-BoldItalic</li>
<li>Verdana-Italic</li>
<li>Verdana</li>
<li>Verdana-Bold</li>
</ul>

<p><strong>Zapf Dingbats</strong></p>

<ul>
<li>ZapfDingbatsITC</li>
</ul>

<p><strong>DIN Condensed</strong></p>

<ul>
<li>DINCondensed-Bold</li>
</ul>

<p><strong>Avenir Next Condensed</strong></p>

<ul>
<li>AvenirNextCondensed-Regular</li>
<li>AvenirNextCondensed-MediumItalic</li>
<li>AvenirNextCondensed-UltraLightItalic</li>
<li>AvenirNextCondensed-UltraLight</li>
<li>AvenirNextCondensed-BoldItalic</li>
<li>AvenirNextCondensed-Italic</li>
<li>AvenirNextCondensed-Medium</li>
<li>AvenirNextCondensed-HeavyItalic</li>
<li>AvenirNextCondensed-Heavy</li>
<li>AvenirNextCondensed-DemiBoldItalic</li>
<li>AvenirNextCondensed-DemiBold</li>
<li>AvenirNextCondensed-Bold</li>
</ul>

<p><strong>Courier</strong></p>

<ul>
<li>Courier</li>
<li>Courier-Oblique</li>
<li>Courier-BoldOblique</li>
<li>Courier-Bold</li>
</ul>

<p><strong>Hoefler Text</strong></p>

<ul>
<li>HoeflerText-Regular</li>
<li>HoeflerText-BlackItalic</li>
<li>HoeflerText-Italic</li>
<li>HoeflerText-Black</li>
</ul>

<p><strong>Euphemia UCAS</strong></p>

<ul>
<li>EuphemiaUCAS</li>
<li>EuphemiaUCAS-Bold</li>
<li>EuphemiaUCAS-Italic</li>
</ul>

<p><strong>Helvetica</strong></p>

<ul>
<li>Helvetica-Oblique</li>
<li>Helvetica-Light</li>
<li>Helvetica-Bold</li>
<li>Helvetica</li>
<li>Helvetica-BoldOblique</li>
<li>Helvetica-LightOblique</li>
</ul>

<p><strong>Hiragino Mincho ProN</strong></p>

<ul>
<li>HiraMinProN-W6</li>
<li>HiraMinProN-W3</li>
</ul>

<p><strong>Bodoni Ornaments</strong></p>

<ul>
<li>BodoniOrnamentsITCTT</li>
</ul>

<p><strong>Superclarendon</strong></p>

<ul>
<li>Superclarendon-Regular</li>
<li>Superclarendon-BoldItalic</li>
<li>Superclarendon-Light</li>
<li>Superclarendon-BlackItalic</li>
<li>Superclarendon-Italic</li>
<li>Superclarendon-LightItalic</li>
<li>Superclarendon-Bold</li>
<li>Superclarendon-Black</li>
</ul>

<p><strong>Mishafi</strong></p>

<ul>
<li>DiwanMishafi</li>
</ul>

<p><strong>Optima</strong></p>

<ul>
<li>Optima-Regular</li>
<li>Optima-Italic</li>
<li>Optima-Bold</li>
<li>Optima-BoldItalic</li>
<li>Optima-ExtraBlack</li>
</ul>

<p><strong>Gujarati Sangam MN</strong></p>

<ul>
<li>GujaratiSangamMN-Bold</li>
<li>GujaratiSangamMN</li>
</ul>

<p><strong>Devanagari Sangam MN</strong></p>

<ul>
<li>DevanagariSangamMN</li>
<li>DevanagariSangamMN-Bold</li>
</ul>

<p><strong>Apple Color Emoji</strong></p>

<ul>
<li>AppleColorEmoji</li>
</ul>

<p><strong>Savoye LET</strong></p>

<ul>
<li>SavoyeLetPlain</li>
</ul>

<p><strong>Kailasa</strong></p>

<ul>
<li>Kailasa</li>
<li>Kailasa-Bold</li>
</ul>

<p><strong>Times New Roman</strong></p>

<ul>
<li>TimesNewRomanPS-BoldItalicMT</li>
<li>TimesNewRomanPSMT</li>
<li>TimesNewRomanPS-BoldMT</li>
<li>TimesNewRomanPS-ItalicMT</li>
</ul>

<p><strong>Telugu Sangam MN</strong></p>

<ul>
<li>TeluguSangamMN</li>
<li>TeluguSangamMN-Bold</li>
</ul>

<p><strong>Heiti SC</strong></p>

<ul>
<li>STHeitiSC-Medium</li>
<li>STHeitiSC-Light</li>
</ul>

<p><strong>Apple SD Gothic Neo</strong></p>

<ul>
<li>AppleSDGothicNeo-Thin</li>
<li>AppleSDGothicNeo-SemiBold</li>
<li>AppleSDGothicNeo-Medium</li>
<li>AppleSDGothicNeo-Regular</li>
<li>AppleSDGothicNeo-Bold</li>
<li>AppleSDGothicNeo-Light</li>
</ul>

<p><strong>Futura</strong></p>

<ul>
<li>Futura-Medium</li>
<li>Futura-CondensedMedium</li>
<li>Futura-MediumItalic</li>
<li>Futura-CondensedExtraBold</li>
</ul>

<p><strong>Bodoni 72</strong></p>

<ul>
<li>BodoniSvtyTwoITCTT-Book</li>
<li>BodoniSvtyTwoITCTT-Bold</li>
<li>BodoniSvtyTwoITCTT-BookIta</li>
</ul>

<p><strong>Baskerville</strong></p>

<ul>
<li>Baskerville-Bold</li>
<li>Baskerville-SemiBoldItalic</li>
<li>Baskerville-BoldItalic</li>
<li>Baskerville</li>
<li>Baskerville-SemiBold</li>
<li>Baskerville-Italic</li>
</ul>

<p><strong>Symbol</strong></p>

<ul>
<li>Symbol</li>
</ul>

<p><strong>Heiti TC</strong></p>

<ul>
<li>STHeitiTC-Medium</li>
<li>STHeitiTC-Light</li>
</ul>

<p><strong>Copperplate</strong></p>

<ul>
<li>Copperplate</li>
<li>Copperplate-Light</li>
<li>Copperplate-Bold</li>
</ul>

<p><strong>Party LET</strong></p>

<ul>
<li>PartyLetPlain</li>
</ul>

<p><strong>American Typewriter</strong></p>

<ul>
<li>AmericanTypewriter-Light</li>
<li>AmericanTypewriter-CondensedLight</li>
<li>AmericanTypewriter-CondensedBold</li>
<li>AmericanTypewriter</li>
<li>AmericanTypewriter-Condensed</li>
<li>AmericanTypewriter-Bold</li>
</ul>

<p><strong>Chalkboard SE</strong></p>

<ul>
<li>ChalkboardSE-Light</li>
<li>ChalkboardSE-Regular</li>
<li>ChalkboardSE-Bold</li>
</ul>

<p><strong>Avenir Next</strong></p>

<ul>
<li>AvenirNext-MediumItalic</li>
<li>AvenirNext-Bold</li>
<li>AvenirNext-UltraLight</li>
<li>AvenirNext-DemiBold</li>
<li>AvenirNext-HeavyItalic</li>
<li>AvenirNext-Heavy</li>
<li>AvenirNext-Medium</li>
<li>AvenirNext-Italic</li>
<li>AvenirNext-UltraLightItalic</li>
<li>AvenirNext-BoldItalic</li>
<li>AvenirNext-Regular</li>
<li>AvenirNext-DemiBoldItalic</li>
</ul>

<p><strong>Bangla Sangam MN</strong></p>

<ul>
<li>BanglaSangamMN</li>
<li>BanglaSangamMN-Bold</li>
</ul>

<p><strong>Noteworthy</strong></p>

<ul>
<li>Noteworthy-Bold</li>
<li>Noteworthy-Light</li>
</ul>

<p><strong>Zapfino</strong></p>

<ul>
<li>Zapfino</li>
</ul>

<p><strong>Tamil Sangam MN</strong></p>

<ul>
<li>TamilSangamMN</li>
<li>TamilSangamMN-Bold</li>
</ul>

<p><strong>Chalkduster</strong></p>

<ul>
<li>Chalkduster</li>
</ul>

<p><strong>Arial Hebrew</strong></p>

<ul>
<li>ArialHebrew-Bold</li>
<li>ArialHebrew-Light</li>
<li>ArialHebrew</li>
</ul>

<p><strong>Georgia</strong></p>

<ul>
<li>Georgia-BoldItalic</li>
<li>Georgia-Bold</li>
<li>Georgia-Italic</li>
<li>Georgia</li>
</ul>

<p><strong>Helvetica Neue</strong></p>

<ul>
<li>HelveticaNeue-BoldItalic</li>
<li>HelveticaNeue-Light</li>
<li>HelveticaNeue-Italic</li>
<li>HelveticaNeue-UltraLightItalic</li>
<li>HelveticaNeue-CondensedBold</li>
<li>HelveticaNeue-MediumItalic</li>
<li>HelveticaNeue-Thin</li>
<li>HelveticaNeue-Medium</li>
<li>HelveticaNeue-Thin_Italic</li>
<li>HelveticaNeue-LightItalic</li>
<li>HelveticaNeue-UltraLight</li>
<li>HelveticaNeue-Bold</li>
<li>HelveticaNeue</li>
<li>HelveticaNeue-CondensedBlack</li>
</ul>

<p><strong>Gill Sans</strong></p>

<ul>
<li>GillSans</li>
<li>GillSans-Italic</li>
<li>GillSans-BoldItalic</li>
<li>GillSans-Light</li>
<li>GillSans-LightItalic</li>
<li>GillSans-Bold</li>
</ul>

<p><strong>Palatino</strong></p>

<ul>
<li>Palatino-Roman</li>
<li>Palatino-Italic</li>
<li>Palatino-Bold</li>
<li>Palatino-BoldItalic</li>
</ul>

<p><strong>Courier New</strong></p>

<ul>
<li>CourierNewPSMT</li>
<li>CourierNewPS-BoldMT</li>
<li>CourierNewPS-ItalicMT</li>
<li>CourierNewPS-BoldItalicMT</li>
</ul>

<p><strong>Oriya Sangam MN</strong></p>

<ul>
<li>OriyaSangamMN</li>
<li>OriyaSangamMN-Bold</li>
</ul>

<p><strong>Didot</strong></p>

<ul>
<li>Didot-Bold</li>
<li>Didot-Italic</li>
<li>Didot</li>
</ul>

<p><strong>DIN Alternate</strong></p>

<ul>
<li>DINAlternate-Bold</li>
</ul>

<p><strong>Bodoni 72 Smallcaps</strong></p>

<ul>
<li>BodoniSvtyTwoSCITCTT-Book</li>
</ul>

<h2>
<span id="過去のiosバージョンとの比較" class="fragment"></span><a href="#%E9%81%8E%E5%8E%BB%E3%81%AEios%E3%83%90%E3%83%BC%E3%82%B8%E3%83%A7%E3%83%B3%E3%81%A8%E3%81%AE%E6%AF%94%E8%BC%83"><i class="fa fa-link"></i></a>過去のiOSバージョンとの比較</h2>

<p>同じコードをiOS5と、iOS6でも実行してみました。</p>

<table>
<thead>
<tr>
<th style="text-align: left">Version</th>
<th style="text-align: right">Families</th>
<th style="text-align: center">Fonts</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left">iOS5.1</td>
<td style="text-align: right">58</td>
<td style="text-align: center">163</td>
</tr>
<tr>
<td style="text-align: left">iOS6.1</td>
<td style="text-align: right">61</td>
<td style="text-align: center">199</td>
</tr>
<tr>
<td style="text-align: left">iOS7.0</td>
<td style="text-align: right">71</td>
<td style="text-align: center">236</td>
</tr>
</tbody>
</table>

<p>だいぶ数が増えたようです。</p>

<p>参考までに、下記記事は iOS5 の頃に同様の方法で一覧を出力したものです。</p>

<p><a href="http://d.hatena.ne.jp/shu223/searchdiary?word=familynames" rel="nofollow noopener" target="_blank">UIFont の fontName 一覧</a></p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>shu223さんの<br />40位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>45</kbd>
		<a target="_blank" href="https://qiita.com/shu223/items/1d6c6daf2d555cae3e21">Max/MSP/Jitterの参考記事まとめ</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-12-26 03:23:56</center>
	</td>
	<td style="width:200px;">
		@shu223<br />(Freelancer 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/3180/profile-images/1473682733">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Max-MSP]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>Max/MSP/Jitterの参考記事を、勉強しようと思っている項目ごとにまとめます。</p>

<p>（<a href="http://qiita.com/shu223/items/38a14ad3efd260faafe0" id="reference-29b9f7ec5ad0811fa4fe">勉強しようと思って</a>チマチマストックしていたものですが、結局<a href="http://qiita.com/advent-calendar/2013/max">全然やれてない</a>のでいったんまとめようかと。）</p>

<h2>
<span id="入門" class="fragment"></span><a href="#%E5%85%A5%E9%96%80"><i class="fa fa-link"></i></a>入門</h2>

<ul>
<li><a href="http://yoppa.org/sbaw09/534.html" rel="nofollow noopener" target="_blank">Max/MSP入門1：サンプリング&amp;プレイバック | yoppa org</a></li>
<li><a href="http://yoppa.org/ssaw10/912.html" rel="nofollow noopener" target="_blank">Max/MSP入門2 – 様々な音響合成、サンプリング&amp;プレイバック導入 | yoppa org</a></li>
<li><a href="http://antymark.com/maxmsp_workshop/2009/08/04/maxmsp.html" rel="nofollow noopener" target="_blank">Max/MSPの勉強方法 - Max/MSP workshop @ WOMB LOUNGE</a></li>
<li><a href="http://tatsuto.way-nifty.com/blog/2008/10/maxmsp-d392.html" rel="nofollow noopener" target="_blank">【教えたいシリーズ】Max/MSPとは？読むだけで使いたくなる解説: 楽語.comのブログ。</a></li>
<li><a href="http://www.s-musiclab.jp/pages/pre-tut/pre-tutorial.html" rel="nofollow noopener" target="_blank">MSP超入門</a></li>
<li><a href="http://www.slp.k.hosei.ac.jp/~itou/lecture/2009/ProjectA/maxmsp_01.pdf" rel="nofollow noopener" target="_blank">Max/MSP超入門</a></li>
</ul>

<h2>
<span id="jitter" class="fragment"></span><a href="#jitter"><i class="fa fa-link"></i></a>Jitter</h2>

<ul>
<li><a href="http://tokyomax.jp/?p=1339" rel="nofollow noopener" target="_blank">[MaxTips_17] はじめてのJitter | Tokyo Max Users Group</a></li>
<li><a href="http://tokyomax.jp/?p=1431" rel="nofollow noopener" target="_blank">[MaxTips_18] Max6でのJitterの新機能 | Tokyo Max Users Group</a></li>
</ul>

<h2>
<span id="勉強に役立つサイトのまとめ" class="fragment"></span><a href="#%E5%8B%89%E5%BC%B7%E3%81%AB%E5%BD%B9%E7%AB%8B%E3%81%A4%E3%82%B5%E3%82%A4%E3%83%88%E3%81%AE%E3%81%BE%E3%81%A8%E3%82%81"><i class="fa fa-link"></i></a>勉強に役立つサイトのまとめ</h2>

<ul>
<li><a href="http://tokyomax.jp/?p=904" rel="nofollow noopener" target="_blank">[MaxTips_14] Max/MSPの学習に役立つ書籍・サイト | Tokyo Max Users Group</a></li>
<li><a href="http://matome.naver.jp/odai/2136164721875311301" rel="nofollow noopener" target="_blank">MAX/MSPの勉強に役立つサイトまとめ - NAVER まとめ</a></li>
<li><a href="http://www.s-musiclab.jp/mmj_docs/max5/max/max_tutorial/max5_mxtu_top.html" rel="nofollow noopener" target="_blank">Max チュートリアル</a></li>
<li><a href="http://cycling74.com/category/articles/tutorials/?utm_source=max6&amp;utm_medium=max&amp;utm_campaign=max_welcome&amp;utm_content=tutorials" rel="nofollow noopener" target="_blank">tutorials « Cycling 74</a></li>
</ul>

<h2>
<span id="osc" class="fragment"></span><a href="#osc"><i class="fa fa-link"></i></a>OSC</h2>

<ul>
<li><a href="http://endo-ta.blogspot.jp/2012/07/maxmsposc.html" rel="nofollow noopener" target="_blank">れんらくちょう: Max/MSPでOSCを使う準備</a></li>
<li><a href="http://endo-ta.blogspot.jp/2012/07/processingoscmaxmsp.html" rel="nofollow noopener" target="_blank">れんらくちょう: ProcessingからOSCでMax/MSPにデータを送る</a></li>
<li><a href="http://tokyomax.jp/?p=923" rel="nofollow noopener" target="_blank">[MaxTips_15] MaxMSP + Processing, OSCでヴィジュアライザー | Tokyo Max Users Group</a></li>
<li><a href="http://labs.karappo.net/interact/index.php?itemid=131" rel="nofollow noopener" target="_blank">Karappo Interaction Lab. » Max/MSP でOSCを使う</a></li>
<li><a href="http://saqoo.sh/a/1803" rel="nofollow noopener" target="_blank">Saqoosha :: My first Max/MSP</a></li>
<li><a href="http://r-dimension.xsrv.jp/classes_j/flosc/" rel="nofollow noopener" target="_blank">flosc (Flash OpenSound Control) 入門 | Yasushi Noguchi Class</a></li>
</ul>

<h2>
<span id="gui" class="fragment"></span><a href="#gui"><i class="fa fa-link"></i></a>GUI</h2>

<ul>
<li><a href="http://tokyomax.jp/?p=189" rel="nofollow noopener" target="_blank">[MaxTips_8] ダブルクリックや修飾キーを使った操作 | Tokyo Max Users Group</a></li>
</ul>

<h2>
<span id="ide" class="fragment"></span><a href="#ide"><i class="fa fa-link"></i></a>IDE</h2>

<ul>
<li><a href="http://akihikomatsumoto.com/maxmsp/shortcut.html" rel="nofollow noopener" target="_blank">short cut Max/MSP | Max/Msp Algorithmic Computer Music Online Tutorial / アルゴリズミック コンピュータ音楽 オンラインチュートリアル</a></li>
<li><a href="http://bassocontinuo.seesaa.net/article/17759961.html" rel="nofollow noopener" target="_blank">【Max/MSP】ショートカット: basso continuo</a></li>
</ul>

<h2>
<span id="maxmsp--何か" class="fragment"></span><a href="#maxmsp--%E4%BD%95%E3%81%8B"><i class="fa fa-link"></i></a>Max/MSP + 何か</h2>

<ul>
<li><a href="http://yang02.org/log/?p=707#more-707" rel="nofollow noopener" target="_blank">AndB( log ) — Max/MSP (MIDI) &gt; ELATION CYBER PAK test</a></li>
<li><a href="http://tokyomax.jp/?p=983" rel="nofollow noopener" target="_blank">[MaxTips_16]シーケンサーを作ってみよう | Tokyo Max Users Group</a></li>
</ul>

<h2>
<span id="その他" class="fragment"></span><a href="#%E3%81%9D%E3%81%AE%E4%BB%96"><i class="fa fa-link"></i></a>その他</h2>

<ul>
<li><a href="http://tokyomax.jp/?cat=9&amp;paged=2" rel="nofollow noopener" target="_blank">Max/MSP/Jitter | Tokyo Max Users Group | ページ 2</a></li>
<li><a href="http://tokyomax.jp/?p=625" rel="nofollow noopener" target="_blank">[MaxTips_13] MaxMSPで作るベースシーケンサー（TB-303クローン） | Tokyo Max Users Group</a></li>
<li><a href="http://tokyomax.jp/?p=550" rel="nofollow noopener" target="_blank">[MaxTips_12] ディレイの応用で音作り2 – RjDj Scene Yamakasaの中身 | Tokyo Max Users Group</a></li>
<li><a href="http://tokyomax.jp/?p=398" rel="nofollow noopener" target="_blank">[MaxTips_11] ディレイの応用で音作り1 – RjDj Scene Yamakasaの中身 | Tokyo Max Users Group</a></li>
<li><a href="http://tokyomax.jp/?p=256" rel="nofollow noopener" target="_blank">[MaxTips_9] MIDIノートメッセージのランダマイズ | Tokyo Max Users Group</a></li>
<li><a href="http://tokyomax.jp/?p=282" rel="nofollow noopener" target="_blank">[MaxTips_10] 正規表現を使ってファイルブラウズ | Tokyo Max Users Group</a></li>
</ul>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>shu223さんの<br />41位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>45</kbd>
		<a target="_blank" href="https://qiita.com/shu223/items/f28c47f9760957e7c812">Facebook SDK for iOS v3.8 の導入手順</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-10-03 17:30:56</center>
	</td>
	<td style="width:200px;">
		@shu223<br />(Freelancer 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/3180/profile-images/1473682733">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Objective-C]</b> <b>[Facebook]</b> <b>[Xcode]</b> <b>[iOS]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>iOS 7 で Social.framework や Accounts.framework は <strong><a href="https://developer.apple.com/library/ios/releasenotes/General/iOS70APIDiffs/index.html#//apple_ref/doc/uid/TP40013203" rel="nofollow noopener" target="_blank">ほとんど機能追加されなかった</a></strong> ので、Facebook連携をしっかりやろうとすると、結局 Facebook SDK for iOS を使うことになりそうです。</p>

<p>で、日本語で丁寧に書かれたオフィシャルのスタートガイドがあるのですが、</p>

<blockquote>
<p><a href="https://developers.facebook.com/docs/ios/getting-started/jp/" rel="nofollow noopener" target="_blank">Getting Started 日本語版</a> （英語版は<a href="https://developers.facebook.com/docs/ios/getting-started/" rel="nofollow noopener" target="_blank">こちら</a>）</p>
</blockquote>

<p>微妙に古い部分があったりして、<a href="https://developers.facebook.com/docs/ios/change-log-3.x/" rel="nofollow noopener" target="_blank">Change Log</a> や Upgrading Guide にしか書いてないこととかもあったりします。</p>

<p>とくに、Upgrading Guideの方は、<a href="https://developers.facebook.com/docs/ios/" rel="nofollow noopener" target="_blank">公式ドキュメントの iOS トップ</a> からは最新版の一つ前 → 最新版への移行ガイドにしかリンクされておらず（※）、ちょっと前の大きい変更の <a href="https://developers.facebook.com/docs/ios/upgrading-from-3.2-to-3.5/" rel="nofollow noopener" target="_blank">3.2 to 3.5 の移行ガイド</a> にけっこう重要な情報が書かれてたりします。</p>

<p>（※ Upgrading Guideのページにいくと、サイドバーに過去のUpgrading Guideへのリンクが現れる。難易度高い。。）</p>

<h2>
<span id="v38の導入手順" class="fragment"></span><a href="#v38%E3%81%AE%E5%B0%8E%E5%85%A5%E6%89%8B%E9%A0%86"><i class="fa fa-link"></i></a>v3.8の導入手順</h2>

<p>そんなこんなで、 以下、10/3現在の最新版、v3.8のざっくり導入手順です。</p>

<ol>
<li><strong>FacebookSDK.framework をプロジェクトに追加する</strong></li>
</ol>

<p>v3.8現在、FacebookSDKResources.bundleを別途追加する必要はなくなっています。</p>

<ol>
<li><p><strong>依存フレームワークをプロジェクトに追加する</strong></p></li>
<li><p><strong>Facebook App ID と URL scheme と FacebookDisplayName を Info.plist に追記する</strong></p></li>
</ol>

<p>FacebookDisplayName はダッシュボードの Display Name に合わせる。</p>

<ol>
<li><strong><code>application:openURL:sourceApplication:annotation:</code> で <code>handleOpenURL:sourceApplication:</code> を呼ぶ</strong></li>
</ol>

<p>Share Dialogを使う場合など、Facebookアプリに飛んでURL schemeで戻ってくる際に、エラー等をハンドルするのに必要。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>- (BOOL)application:(UIApplication *)application
            openURL:(NSURL *)url
  sourceApplication:(NSString *)sourceApplication
         annotation:(id)annotation {

    BOOL wasHandled = [FBAppCall handleOpenURL:url
                             sourceApplication:sourceApplication];

    // add app-specific handling code here
    return wasHandled;
}
</pre></div></div>

<h2>
<span id="参考ページ" class="fragment"></span><a href="#%E5%8F%82%E8%80%83%E3%83%9A%E3%83%BC%E3%82%B8"><i class="fa fa-link"></i></a>参考ページ</h2>

<ul>
<li><a href="https://developer.apple.com/library/ios/releasenotes/General/iOS70APIDiffs/index.html#//apple_ref/doc/uid/TP40013203" rel="nofollow noopener" target="_blank">iOS7のAPI diffs</a></li>
<li><a href="https://developers.facebook.com/docs/ios/getting-started/" rel="nofollow noopener" target="_blank">Documentation › iOS › Getting Started</a></li>
<li><a href="https://developers.facebook.com/docs/ios/getting-started/jp/" rel="nofollow noopener" target="_blank">iOS向けFacebook SDKスタートガイド</a></li>
<li><a href="https://developers.facebook.com/docs/ios/change-log-3.x/" rel="nofollow noopener" target="_blank">Change Log</a></li>
<li><a href="https://developers.facebook.com/docs/ios/upgrading-from-3.2-to-3.5/" rel="nofollow noopener" target="_blank">3.2 to 3.5 の移行ガイド</a></li>
</ul>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>shu223さんの<br />42位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>43</kbd>
		<a target="_blank" href="https://qiita.com/shu223/items/8e6ee3b83903dbabfea4">Core Image の遷移エフェクトを使う</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-03-11 09:40:17</center>
	</td>
	<td style="width:200px;">
		@shu223<br />(Freelancer 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/3180/profile-images/1473682733">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Objective-C]</b> <b>[iPhone]</b> <b>[iOS]</b> <b>[CoreImage]</b> <b>[animation]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>Core Image のフィルタ (CIFilter) には、<code>CICategoryTransition</code> というカテゴリーがあり、次のような遷移エフェクトが用意されています。</p>

<ul>
<li>CIBarsSwipeTransition</li>
<li>CICopyMachineTransition</li>
<li>CIDisintegrateWithMaskTransition</li>
<li>CIDissolveTransition</li>
<li>CIFlashTransition</li>
<li>CIModTransition</li>
<li>CISwipeTransition</li>
<li>CIAccordionFoldTransition（iOS 8）</li>
<li>CIPageCurlTransition（<strong>iOS 9</strong>）</li>
<li>CIPageCurlWithShadowTransition（<strong>iOS 9</strong>）</li>
<li>CIRippleTransition（<strong>iOS 9</strong>）</li>
</ul>

<p>次のような一風変わった遷移エフェクトを実現できます。</p>

<p><a href="https://camo.qiitausercontent.com/c884dbd14a5d2c2b2485577a17c1eed795535d46/687474703a2f2f662e73742d686174656e612e636f6d2f696d616765732f666f746f6c6966652f732f7368753232332f32303135313030352f32303135313030353137333330392e676966" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/c884dbd14a5d2c2b2485577a17c1eed795535d46/687474703a2f2f662e73742d686174656e612e636f6d2f696d616765732f666f746f6c6966652f732f7368753232332f32303135313030352f32303135313030353137333330392e676966" alt="CoreImageTransition" data-canonical-src="http://f.st-hatena.com/images/fotolife/s/shu223/20151005/20151005173309.gif"></a></p>

<h2>
<span id="サンプルコードcoreimagetransition" class="fragment"></span><a href="#%E3%82%B5%E3%83%B3%E3%83%97%E3%83%AB%E3%82%B3%E3%83%BC%E3%83%89coreimagetransition"><i class="fa fa-link"></i></a>サンプルコード『CoreImageTransition』</h2>

<p>Githubにサンプルをアップしてあります。iOS 9 で追加された3種類を含む、全9種類の遷移エフェクトを試すことができます。</p>

<ul>
<li><a href="https://github.com/shu223/CoreImageTransition" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/shu223/CoreImageTransition</a></li>
</ul>

<p><strong>※GPUを利用するためシミュレータではなく実機で</strong>ご確認ください</p>

<p>以下実装手順です。</p>

<h2>
<span id="宣言と初期化処理の実装" class="fragment"></span><a href="#%E5%AE%A3%E8%A8%80%E3%81%A8%E5%88%9D%E6%9C%9F%E5%8C%96%E5%87%A6%E7%90%86%E3%81%AE%E5%AE%9F%E8%A3%85"><i class="fa fa-link"></i></a>宣言と初期化処理の実装</h2>

<p>使い方の基本的な部分は CIFilter の他のフィルタと同じなのですが、遷移エフェクトなので、遷移前と遷移後の2つの画像を用意します。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>@interface TransitionView ()
{
    NSTimeInterval  base;
    CGRect imageRect;
}
@property (nonatomic, strong) CIImage *image1;
@property (nonatomic, strong) CIImage *image2;
@property (nonatomic, strong) CIFilter *transition;
@end
</pre></div></div>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>// 遷移前後の画像を生成
UIImage *uiImage1 = [UIImage imageNamed:@"sample1.jpg"];
UIImage *uiImage2 = [UIImage imageNamed:@"sample2.jpg"];
self.image1 = [CIImage imageWithCGImage:uiImage1.CGImage];
self.image2 = [CIImage imageWithCGImage:uiImage2.CGImage];

// マスク画像を生成
UIImage *uiMaskImage = [UIImage imageNamed:@"mask.jpg"];
CIImage *maskImage = [[CIImage alloc] initWithCGImage:uiMaskImage.CGImage];

// CIFilterオブジェクトを生成
self.transition = [CIFilter filterWithName: @"CIDisintegrateWithMaskTransition"
                             keysAndValues:
                   @"inputMaskImage", maskImage,
                   nil];

// 表示領域を示す矩形（CGRect型）
imageRect = CGRectMake(0, 0, uiImage1.size.width / 2, uiImage1.size.height / 2);

// 遷移アニメーション制御の基準となる時刻
base = [NSDate timeIntervalSinceReferenceDate];    

// 遷移アニメーションを制御するタイマー
[NSTimer scheduledTimerWithTimeInterval:1.0/30.0
                                 target:self
                               selector:@selector(onTimer:)
                               userInfo:nil
                                repeats:YES];
</pre></div></div>

<p>初期化処理では各種 CIImage オブジェクトの生成、CIFilter オブジェクトの生成と、表示領域を示す矩形、遷移アニメーション制御に必要な時刻とタイマーの生成を行います。（※実際にはNSTimer ではなく <strong>CADisplayLink</strong> を使うべき）</p>

<p>CIDisintegrateWithMaskTransition はマスクを使用するエフェクトなので、マスク画像の CIImage オブジェクトを生成し、<code>@"inputMaskImage"</code>キーの値に設定しています。</p>

<h2>
<span id="フィルタ処理の実装" class="fragment"></span><a href="#%E3%83%95%E3%82%A3%E3%83%AB%E3%82%BF%E5%87%A6%E7%90%86%E3%81%AE%E5%AE%9F%E8%A3%85"><i class="fa fa-link"></i></a>フィルタ処理の実装</h2>

<p>遷移アニメーション中の各フレームで行うフィルタ処理を実装します。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>- (CIImage *)imageForTransitionAtTime:(float)time
{
    // 遷移前後の画像をtimeによって切り替える
    if (fmodf(time, 2.0) &lt; 1.0f)
    {
        [self.transition setValue:self.image1 forKey:@"inputImage"];
        [self.transition setValue:self.image2 forKey:@"inputTargetImage"];
    }
    else
    {
        [self.transition setValue:self.image2 forKey:@"inputImage"];
        [self.transition setValue:self.image1 forKey:@"inputTargetImage"];
    }

    // 遷移アニメーションの時間を指定
    [self.transition setValue:@(fmodf(time, 1.0f)) forKey:@"inputTime"];

    // フィルタ処理実行
    CIImage *transitionImage = [self.transition valueForKey:@"outputImage"];

    return transitionImage;
}
</pre></div></div>

<p>遷移前後の画像をそれぞれ <code>@"inputImage"</code> キーと <code>@"inputTargetImage"</code> キーに指定し、遷移アニメーションの時間（範囲は0〜1）を <code>@"inputTime"</code> キーに指定します。</p>

<h2>
<span id="アニメーション制御" class="fragment"></span><a href="#%E3%82%A2%E3%83%8B%E3%83%A1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E5%88%B6%E5%BE%A1"><i class="fa fa-link"></i></a>アニメーション制御</h2>

<p>初期化時に生成したタイマーのハンドラでは<code>setNeedsDisplay</code>をコールし、</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>- (void)onTimer:(NSTimer *)timer {

    [self setNeedsDisplay];
}
</pre></div></div>

<p>それにより呼ばれるようになる UIView の <code>drawRect:</code> で次のように処理を行います。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>- (void)drawRect:(CGRect)rect {

    CGFloat time = 0.4 * ([NSDate timeIntervalSinceReferenceDate] - base);

    CIImage *image = [self imageForTransitionAtTime:time];
    UIImage *uiImage = [UIImage imageWithCIImage:image];

    [uiImage drawInRect:imageRect];
}
</pre></div></div>

<p>先に実装した <code>imageForTransitionAtTime:</code> をコールし、受け取ったフィルタ処理結果の画像を描画しています。</p>

<h2>
<span id="glkview-を用いた高速化" class="fragment"></span><a href="#glkview-%E3%82%92%E7%94%A8%E3%81%84%E3%81%9F%E9%AB%98%E9%80%9F%E5%8C%96"><i class="fa fa-link"></i></a>GLKView を用いた高速化</h2>

<p>スムーズにアニメーションさせるには描画が追いつかないので、GLKView に描画します。このあたりはコメント欄をご参照ください。（サンプルは GLKit を利用して実装してあります。また拙著にも解説を書きました）</p>

<ul>
<li><a href="http://d.hatena.ne.jp/shu223/20130528/1369714635" class="autolink" rel="nofollow noopener" target="_blank">http://d.hatena.ne.jp/shu223/20130528/1369714635</a></li>
</ul>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>shu223さんの<br />43位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>42</kbd>
		<a target="_blank" href="https://qiita.com/shu223/items/5de3db7ed8d9b3ace000">Core Bluetooth / BLEで音声データをやりとりする</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2014-02-04 20:28:13</center>
	</td>
	<td style="width:200px;">
		@shu223<br />(Freelancer 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/3180/profile-images/1473682733">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Objective-C]</b> <b>[iOS]</b> <b>[bluetooth]</b> <b>[BLE]</b> <b>[IoT]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;">
<h1>
<span id="はじめに" class="fragment"></span><a href="#%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB"><i class="fa fa-link"></i></a>はじめに</h1>

<p>以前書いた２つの記事でわかったことは、 <strong>BLEは少量データ／低頻度での用途に特化することで省電力を実現した規格なので、音声データをやり取りするような用途にはそもそも向かない</strong> 、ということでした。</p>

<ul>
<li><a href="http://d.hatena.ne.jp/shu223/20140109/1389216052" rel="nofollow noopener" target="_blank">Core Bluetoothのプロファイルについて調べたことのまとめ</a></li>
<li><a href="http://d.hatena.ne.jp/shu223/20140110/1389292125:title:bookmark" rel="nofollow noopener" target="_blank">iOSのCore Bluetooth / BLEの通信速度</a></li>
</ul>

<p>ただ、<b>MFiなし、WiFiもなしでデバイスとiOSアプリを無線通信させたい</b>場合、iOSの現状の公開APIで可能な範囲ではやはりCoreBluetooth/BLE一択になってくるので、どうにかならないものかと。</p>

<p>そんなわけで、いろいろと調べたり聞いてみたり試行錯誤してみたことを書いておきます。</p>

<p><strong>（2015.8追記）この記事は古く、書いた当時はBLEについての知識も乏しかったので内容には多分に誤りが混じっている可能性があります。</strong></p>

<h1>
<span id="bluetooth40イヤホンはどうやって音声データを流してるのか" class="fragment"></span><a href="#bluetooth40%E3%82%A4%E3%83%A4%E3%83%9B%E3%83%B3%E3%81%AF%E3%81%A9%E3%81%86%E3%82%84%E3%81%A3%E3%81%A6%E9%9F%B3%E5%A3%B0%E3%83%87%E3%83%BC%E3%82%BF%E3%82%92%E6%B5%81%E3%81%97%E3%81%A6%E3%82%8B%E3%81%AE%E3%81%8B"><i class="fa fa-link"></i></a>Bluetooth4.0イヤホンはどうやって音声データを流してるのか</h1>

<p>疑問だったのは、自分がいま使ってるイヤホンは、Bluetooth4.0であることでした。</p>

<div class="">
<div class=""><a href="http://www.amazon.co.jp/exec/obidos/ASIN/B0093QUS2W/22301-22/ref=nosim/" rel="nofollow noopener" target="_blank"><img src="https://camo.qiitausercontent.com/7cd12c7bc03131d639153b758ac67bb476b6955f/687474703a2f2f6563782e696d616765732d616d617a6f6e2e636f6d2f696d616765732f492f3331636e57737575726e4c2e5f534c3136305f2e6a7067" alt="Logitec Bluetooth ステレオヘッドホン カナルタイプ 高音質aptX/AAC対応 SpecialEdition ブラック LBT-AVHP06SEBK" data-canonical-src="http://ecx.images-amazon.com/images/I/31cnWsuurnL._SL160_.jpg"></a></div>
<div class="">
<div class="">
<a href="http://www.amazon.co.jp/exec/obidos/ASIN/B0093QUS2W/22301-22/ref=nosim/" rel="nofollow noopener" target="_blank">Logitec Bluetooth ステレオヘッドホン カナルタイプ 高音質aptX/AAC対応 SpecialEdition ブラック LBT-AVHP06SEBK</a><div class="">posted with <a href="http://www.amazlet.com/" title="amazlet" rel="nofollow noopener" target="_blank">amazlet</a> at 14.01.29</div>
</div>
<div class="">ロジテック (2012-11-05)<br>売り上げランキング: 3,022<br>
</div>
<div class=""><div class=""><a href="http://www.amazon.co.jp/exec/obidos/ASIN/B0093QUS2W/22301-22/ref=nosim/" rel="nofollow noopener" target="_blank">Amazon.co.jpで詳細を見る</a></div></div>
</div>
<div class=""></div>
</div>

<p>自分は Bluetooth4.0 = BLE だと思っていたので、何でBLEで音楽聴けてるんだろう？と。ビットレートをそこまで落としてる感じもしないし。</p>

<h2>
<span id="識者の方々に聞いてみた" class="fragment"></span><a href="#%E8%AD%98%E8%80%85%E3%81%AE%E6%96%B9%E3%80%85%E3%81%AB%E8%81%9E%E3%81%84%E3%81%A6%E3%81%BF%E3%81%9F"><i class="fa fa-link"></i></a>識者の方々に聞いてみた</h2>

<p>というわけで、Facebookの<a href="https://www.facebook.com/groups/563064710384459/" rel="nofollow noopener" target="_blank">WF-BTLE</a>グループで、次のような質問をしました。</p>

<blockquote>
<p>BLEのプロファイルについてよくわからない点があるので、質問させてください。</p>

<p>BLEは『少量のデータを低頻度でやりとりする用途に、ハードウェアの低コスト化と、コイン型電池で1～2年間の連続動作ができる超低消費電力に特化』（<a href="http://reinforce-lab.github.io/blog/2013/09/19/blebook-ch3-corebluetooth/" rel="nofollow noopener" target="_blank">こちらの記事</a>より引用）した規格であると認識しています。</p>

<p>なので、BLEのGATTベースのプロファイルは、Heart Rateや、Battery Serviceなど、少量データ・低頻度で済む用途のものが<a href="https://developer.bluetooth.org/gatt/services/Pages/ServicesHome.aspx" rel="nofollow noopener" target="_blank">定義されている</a>し、GATTの規格自体も大きいデータを流しっぱなしにするようにはなっていない（アトリビュートのvalueは512バイトまで）と。</p>

<p>ただよくわからないのが、世の中には<a href="http://buffalo.jp/products/catalog/supply/multimedia/headset/bluetooth/bshsbe23/" rel="nofollow noopener" target="_blank">Bluetooth4.0用のヘッドセットなども出ている</a>点です。</p>

<p>上記ヘッドセットのページにはプロファイルにHFPを使用しているようなことが書いてあります。 <strong>私の認識ではBLE機器ではGATTベースのプロファイルしか使えず、HFPなどは3.0以前の従来規格でしか使用できない、というものなのですが、そんなことないのでしょうか？もしくは、フレームレートを抑える等の工夫をしてGATTの規格内でHFP相当の通信ができるようにしている、ということなのでしょうか？</strong></p>

<p>見当違いのことを言ってるかもしれませんが、識者のみなさま、ご教示いただけると幸いです。</p>

<p>ちなみにこの質問をする意図としては、iOSのCoreBluetoothで、デバイスと音声データのやり取りをしたい（音質は5kbpsぐらいまで落とせる）、というものになります。BLEはそもそもそういう用途の規格ではないとは思いますが、MFiなし、WiFiもなしでデバイスとiOSアプリを無線通信させたい場合、やはりCoreBluetooth/BLE一択になってくるので。。</p>
</blockquote>

<p>そして、回答をいくつかいただきました。（掲載許可は得ていないので）原文を載せるのは避け、要約すると、</p>

<ul>
<li>
<b>Bluetooth4.0は、3.0までの技術に、Low Energyの技術を統合したもの。なので、3までの技術も使える</b>
-- 両方に対応したものをデュアルモードと呼ぶ</li>
<li>ただ、<b>Core Bluetoothでは、Low Energyの部分しか制御できない</b>
</li>
<li>BLEを音声通信的なものに利用するのは、あり。CoreAudioでBluetothのヘッドセットへルート切り替えが、最近はできるようになったはず。</li>
<li>参考リンク

<ul>
<li><a href="http://www.cloudcluster.cloudysunny14.org/show_materials?id=ahBzfm9uY2xvdWRjbHVzdGVyciULEg9NYXRlcmlhbHNUaGVtZXMY-VUMCxIITWVudGlvbnMY6QcM" rel="nofollow noopener" target="_blank">Bluetooth Low Energy(BLE)についての概要 #2</a></li>
<li><a href="http://reinforce-lab.github.io/blog/2013/07/26/blebook-ch1/" rel="nofollow noopener" target="_blank">Bluetooth LEの解説本、第1章 - Reinforce-Lab.’s Blog</a></li>
</ul>
</li>
</ul>

<p>という明快な回答をいただきました。</p>

<p>なるほど、まず大前提として、「Bluetooth 4.0 = BLE」というのが大きな勘違いでした。</p>

<p>「デュアルモード」というのは知ってましたが、それは3.0にも対応している、という意味だと思っていて、4.0の仕様が3.0の仕様も含んでいる、ということだとは知りませんでした。</p>

<p>で、音楽を聴けるヘッドセットやイヤホンは、3.0までの技術を使っていて、それはMFiなしで使えるCoreBluetoothでは制御できないと。</p>

<p>また「Bluetoothを扱いたければCoreBluetoothだ！」とばかり思っていたので、オーディオのルート切り替えは盲点でした。</p>

<h2>
<span id="オーディオセッションによるbluetoothデバイスへのルート切り替え" class="fragment"></span><a href="#%E3%82%AA%E3%83%BC%E3%83%87%E3%82%A3%E3%82%AA%E3%82%BB%E3%83%83%E3%82%B7%E3%83%A7%E3%83%B3%E3%81%AB%E3%82%88%E3%82%8Bbluetooth%E3%83%87%E3%83%90%E3%82%A4%E3%82%B9%E3%81%B8%E3%81%AE%E3%83%AB%E3%83%BC%E3%83%88%E5%88%87%E3%82%8A%E6%9B%BF%E3%81%88"><i class="fa fa-link"></i></a>オーディオセッションによるBluetoothデバイスへのルート切り替え</h2>

<p>そういえば、ルート切り替えの定義でBluetoothなんちゃらっての見たことあるな、というのはなんとなく記憶にあったので、改めて見てみると、</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>kAudioSessionInputRoute_BluetoothHFP
kAudioSessionOutputRoute_BluetoothHFP
kAudioSessionOutputRoute_BluetoothA2DP
</pre></div></div>

<p>というのがありました。</p>

<p>これができれば、HFPプロファイルに対応したデバイスから音声データを受け取ってそのままAudio Unitとかで波形処理できるので、なかなか良さそうです。 <strong>iOS7からdeprecated</strong> になってましたが。。</p>

<h1>
<span id="core-bluetoothでどうにかしてみる" class="fragment"></span><a href="#core-bluetooth%E3%81%A7%E3%81%A9%E3%81%86%E3%81%AB%E3%81%8B%E3%81%97%E3%81%A6%E3%81%BF%E3%82%8B"><i class="fa fa-link"></i></a>Core Bluetoothでどうにかしてみる</h1>

<p>上述したようにオーディオセッションでルートを切り替えることで音声データのやりとりができそう、とわかったものの、デバイス側がいまのところGATTベースのプロファイルにしか対応してないので、結局Core Bluetoothでどうにかすることにしました。</p>

<p><strong>※ペリフェラル側でS/N比などをみて音声データを切って送信する前提です。</strong></p>

<h2>
<span id="ペリフェラル側" class="fragment"></span><a href="#%E3%83%9A%E3%83%AA%E3%83%95%E3%82%A7%E3%83%A9%E3%83%AB%E5%81%B4"><i class="fa fa-link"></i></a>ペリフェラル側</h2>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>- (void)peripheralManager:(CBPeripheralManager *)peripheral
    didReceiveReadRequest:(CBATTRequest *)request
{
    // 音声バッファの続きを渡す
    request.value = [self soundDataFromCurrentIndex];

    [peripheral respondToRequest:request
                      withResult:CBATTErrorSuccess];
}
</pre></div></div>

<p>上記コード内で呼んでいる soundDataFromCurrentIndex というメソッドでは128バイトずつ音声バッファのデータを渡すようにしています。</p>

<h2>
<span id="セントラル側" class="fragment"></span><a href="#%E3%82%BB%E3%83%B3%E3%83%88%E3%83%A9%E3%83%AB%E5%81%B4"><i class="fa fa-link"></i></a>セントラル側</h2>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>- (void)                 peripheral:(CBPeripheral *)peripheral
    didUpdateValueForCharacteristic:(CBCharacteristic *)characteristic
                              error:(NSError *)error
{
    NSData *data = characteristic.value;
    NSUInteger bytes = data.length;

    [self.receivedData appendData:data];

    // 次のデータを読み込む
    if (bytes &gt;= kMaxBytes) {

        [cbPeripheral readValueForCharacteristic:self.characteristic];
    }
    // 受信完了
    else {

        // receivedDataに対して処理を行う
    }
}
</pre></div></div>

<p>全部読み終わるまでreadし続ける、という（とくにTips要素もない）普通の処理です。</p>

<h1>
<span id="試してみた結果" class="fragment"></span><a href="#%E8%A9%A6%E3%81%97%E3%81%A6%E3%81%BF%E3%81%9F%E7%B5%90%E6%9E%9C"><i class="fa fa-link"></i></a>試してみた結果</h1>

<p>上記方法で試しに 15kB の wavデータ（16bit, 16kHz）を送ってみると、20秒ちょいかかりました。<a href="http://d.hatena.ne.jp/shu223/20140110/1389292125" rel="nofollow noopener" target="_blank">先日計測した速度</a>とだいたい同じぐらいなので妥当そうですが、送ったのは再生時間が1秒にも満たないデータなので、 <strong>リアルタイムにはほど遠い</strong> レベルです。</p>

<p>5kbpsぐらいの通信速度である程度リアルタイムに送るには、1秒当たり600バイトぐらいに収める必要があるので、ビットレートを落とすだけじゃなく、いったんaacとかの圧縮フォーマットにエンコードして送る必要がありそうです。</p>

<h1>
<span id="関連記事" class="fragment"></span><a href="#%E9%96%A2%E9%80%A3%E8%A8%98%E4%BA%8B"><i class="fa fa-link"></i></a>関連記事</h1>

<ul>
<li><a href="http://d.hatena.ne.jp/shu223/20140129/1391035286" rel="nofollow noopener" target="_blank">Bluetooth Low Energy (BLE) のサービス／キャラクタリクスの構成例一覧</a></li>
<li><a href="http://stackoverflow.com/questions/19280429/reading-long-characteristic-values-using-corebluetooth" rel="nofollow noopener" target="_blank">Reading long characteristic values using CoreBluetooth</a></li>
<li><a href="http://d.hatena.ne.jp/shu223/20121125/1353877706" rel="nofollow noopener" target="_blank">iOS のオーディオ／サウンド処理について学べる書籍10冊＋α</a></li>
<li><a href="http://d.hatena.ne.jp/shu223/20140128/1391063947" rel="nofollow noopener" target="_blank">Bluetooth 4.0 および Bluetooth Low Energy (BLE) に関する技術情報のまとめ</a></li>
</ul>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>shu223さんの<br />44位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>41</kbd>
		<a target="_blank" href="https://qiita.com/shu223/items/56d7930b0366d53cd37b">openFrameworks で定番っぽいアドオンと参考記事のまとめ</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-12-09 14:46:29</center>
	</td>
	<td style="width:200px;">
		@shu223<br />(Freelancer 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/3180/profile-images/1473682733">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Objective-C]</b> <b>[Mac]</b> <b>[Xcode]</b> <b>[iOS]</b> <b>[openFrameworks]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>定番もなにも、まだ openFrameworks を使って何かをつくったことがないので、実際に開発者コミュニティで何がどう評価されているとか、よく使われてるとか、あれはもうレガシーだねといった <strong>空気感</strong> みたいなものはわからないので、</p>

<ul>
<li>openFrameworksのディストリビューションに同梱されている</li>
<li>GitHubでスターが多い  <sup id="fnref1"><a href="#fn1" rel="footnote" title="実は、 ofxAddons を見ればデフォルトでStar順でソートされるので、あまりここでわざわざリストにする意味はないかもしれません。ここまで書いて気付いたので、参考記事を併記することにしました。">1</a></sup>
</li>
</ul>

<p>といった客観的情報から、 <strong>定番「ぽい」アドオン</strong> を列挙していきたいと思います。あとで自分が勉強しやすいよう、アドオン名でググって出てきた <strong>日本語解説記事も併記</strong> しておきます。</p>

<p>（※随時更新していきます。ストックしておくと、更新通知が飛んでくるので便利です。）</p>

<h2>
<span id="openframeworks-に同梱されているもの" class="fragment"></span><a href="#openframeworks-%E3%81%AB%E5%90%8C%E6%A2%B1%E3%81%95%E3%82%8C%E3%81%A6%E3%81%84%E3%82%8B%E3%82%82%E3%81%AE"><i class="fa fa-link"></i></a>openFrameworks に同梱されているもの</h2>

<p>openFrameworks for iOS のディストリビューションに同梱されているアドオン。</p>

<h3>
<span id="ofx3dmodelloader" class="fragment"></span><a href="#ofx3dmodelloader"><i class="fa fa-link"></i></a>ofx3DModelLoader</h3>

<p>3ds形式の3DモデルをoFに読みこむ</p>

<ul>
<li><a href="http://hrhrblog.blogspot.jp/2010/02/shade3dofx3dmodelloader.html" rel="nofollow noopener" target="_blank">HR2_blog: Shadeで作った3Dモデルをofx3DModelLoaderで読み込んでみる</a></li>
<li><a href="http://morisawa-lab.blogspot.jp/2011/07/imported-of-3d-model.html" rel="nofollow noopener" target="_blank">MorisawaY Research Blog: Imported of a 3D model</a></li>
<li><a href="http://level0.kayac.com/#!2011/03/sss_kinect.php" rel="nofollow noopener" target="_blank">BMCL第二弾「電脳空間システム」 #ph9 | _level0 | Kayac Front End Engineer's Blog</a></li>
</ul>

<h3>
<span id="ofxaccelerometer" class="fragment"></span><a href="#ofxaccelerometer"><i class="fa fa-link"></i></a>ofxAccelerometer</h3>

<p>加速度センサーをoFで使う</p>

<ul>
<li><a href="http://r-dimension.xsrv.jp/classes_j/of_basics/" rel="nofollow noopener" target="_blank">openFrameworks入門 （iPhone）基礎 | Yasushi Noguchi Class</a></li>
</ul>

<h3>
<span id="ofxassimpmodelloader" class="fragment"></span><a href="#ofxassimpmodelloader"><i class="fa fa-link"></i></a>ofxAssimpModelLoader</h3>

<p>ボーンアニメーション付きモデリングデータを読み込んでパースして表示してくれるアドオン（？）</p>

<ul>
<li><a href="http://saqoo.sh/a/2366" rel="nofollow noopener" target="_blank">Saqoosha :: Bokeh Particles</a></li>
</ul>

<p> </p><p><a href="http://vimeo.com/42484148" rel="nofollow noopener" target="_blank">Bokeh Particles</a> from <a href="http://vimeo.com/saqoosha" rel="nofollow noopener" target="_blank">Saqoosha</a> on <a href="https://vimeo.com" rel="nofollow noopener" target="_blank">Vimeo</a>.</p>

<p>上記のSaqooshaさんのはソースコードがGitHubにあがってるらしく、</p>

<blockquote>
<p>ofxUI, ofxXmlSettings, ofxOsc, ofxFft, ofxTween, ofxFx, ofxFenster, ofxAssimpModelLoader</p>
</blockquote>

<p>を使ってるとのこと。</p>

<ul>
<li><a href="http://www.daijima.jp/blog/" rel="nofollow noopener" target="_blank">Daidiru | 代汁</a></li>
</ul>

<blockquote>
<p>openFrameworksとArduinoと光センサーを使って部屋の明暗を検知して何か表現してみるテスト。</p>
</blockquote>

<p> </p><p><a href="http://vimeo.com/60807495" rel="nofollow noopener" target="_blank">[oFSketch1] ドブえもんの明と暗 / Dobuemon's light &amp; darkness</a> from <a href="http://vimeo.com/daijimachine" rel="nofollow noopener" target="_blank">daijimachine</a> on <a href="https://vimeo.com" rel="nofollow noopener" target="_blank">Vimeo</a>.</p>

<h3>
<span id="ofxgui" class="fragment"></span><a href="#ofxgui"><i class="fa fa-link"></i></a>ofxGui</h3>

<ul>
<li><a href="http://verytired.hateblo.jp/entry/2013/09/10/165209" rel="nofollow noopener" target="_blank">ofxGUIの使い方 - Shut the fuck up and write some code</a></li>
<li><a href="http://nariakiiwatani.net/?tag=ofxgui" rel="nofollow noopener" target="_blank">ofxGui | nariakiiwatani.net</a></li>
</ul>

<h3>
<span id="ofxkinect" class="fragment"></span><a href="#ofxkinect"><i class="fa fa-link"></i></a>ofxKinect</h3>

<h3>
<span id="ofxmultitouch" class="fragment"></span><a href="#ofxmultitouch"><i class="fa fa-link"></i></a>ofxMultiTouch</h3>

<h3>
<span id="ofxnetwork" class="fragment"></span><a href="#ofxnetwork"><i class="fa fa-link"></i></a>ofxNetwork</h3>

<p>TCPとUDPを oF で使用する。</p>

<h3>
<span id="ofxopencv" class="fragment"></span><a href="#ofxopencv"><i class="fa fa-link"></i></a>ofxOpenCv</h3>

<p>OpenCVを使用する。</p>

<h3>
<span id="ofxosc" class="fragment"></span><a href="#ofxosc"><i class="fa fa-link"></i></a>ofxOsc</h3>

<p>Open Sound Control (アプリケーション間で主にサウンド情報をやりとりするプロトコル) を使用する。</p>

<h3>
<span id="ofxsvg" class="fragment"></span><a href="#ofxsvg"><i class="fa fa-link"></i></a>ofxSvg</h3>

<h3>
<span id="ofxthreadedimageloader" class="fragment"></span><a href="#ofxthreadedimageloader"><i class="fa fa-link"></i></a>ofxThreadedImageLoader</h3>

<h3>
<span id="ofxvectorgraphics" class="fragment"></span><a href="#ofxvectorgraphics"><i class="fa fa-link"></i></a>ofxVectorGraphics</h3>

<p>Postscriptを生成し出力する。</p>

<h3>
<span id="ofxxmlsettings" class="fragment"></span><a href="#ofxxmlsettings"><i class="fa fa-link"></i></a>ofxXmlSettings</h3>

<p>アプリケーションの設定をXML形式で読み込み／保存する。</p>

<h3>
<span id="ofxios" class="fragment"></span><a href="#ofxios"><i class="fa fa-link"></i></a>ofxiOS</h3>

<h2>
<span id="githubでstarが多いもの" class="fragment"></span><a href="#github%E3%81%A7star%E3%81%8C%E5%A4%9A%E3%81%84%E3%82%82%E3%81%AE"><i class="fa fa-link"></i></a>GitHubでStarが多いもの</h2>

<h3>
<span id="ofxfacetracker" class="fragment"></span><a href="#ofxfacetracker"><i class="fa fa-link"></i></a><a href="http://github.com/kylemcdonald/ofxFaceTracker" rel="nofollow noopener" target="_blank">ofxFaceTracker</a>
</h3>

<blockquote>
<p>ASM face tracking addon based on Jason Saragih's FaceTracker.</p>
</blockquote>

<p><a href="https://camo.qiitausercontent.com/fb16aaa49a0318d49f8684017c6ac6d3fa2e6cca/687474703a2f2f662e636c2e6c792f6974656d732f32593159304430773375323430693031305133622f616476616e636564332e6a7067" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/fb16aaa49a0318d49f8684017c6ac6d3fa2e6cca/687474703a2f2f662e636c2e6c792f6974656d732f32593159304430773375323430693031305133622f616476616e636564332e6a7067" width="240" data-canonical-src="http://f.cl.ly/items/2Y1Y0D0w3u240i010Q3b/advanced3.jpg"></a></p>

<ul>
<li><p><a href="http://qiita.com/shu223/items/7846ef33a80a489dff93" id="reference-7afa7b63b3bd34112124">openFrameworks - 顔をリアルタイムにトラッキングする - Qiita [キータ]</a></p></li>
<li><p><a href="http://yoppa.org/ma2_11/3357.html" rel="nofollow noopener" target="_blank">第８回：openFrameworks addonを利用する3：フェイストラッキング – ofxCv, ofxFaceTracker | yoppa org</a></p></li>
</ul>

<h3>
<span id="ofxui" class="fragment"></span><a href="#ofxui"><i class="fa fa-link"></i></a><a href="http://github.com/rezaali/ofxUI" rel="nofollow noopener" target="_blank">ofxUI</a>
</h3>

<blockquote>
<p>A User Interface Library/Addon for openFrameworks</p>
</blockquote>

<ul>
<li><a href="http://shuheikagawa.com/blog/2012/04/02/how-to-use-ofxui/" rel="nofollow noopener" target="_blank">How to use ofxUI - Blog</a></li>
</ul>

<h3>
<span id="ofxopenni" class="fragment"></span><a href="#ofxopenni"><i class="fa fa-link"></i></a><a href="http://github.com/gameoverhack/ofxOpenNI" rel="nofollow noopener" target="_blank">ofxOpenNI</a>
</h3>

<blockquote>
<p>Wrapper for OpenNI, NITE and SensorKinect</p>
</blockquote>

<h3>
<span id="" class="fragment"></span><a href="#"><i class="fa fa-link"></i></a><a href="http://github.com/kylemcdonald/ofxCv" rel="nofollow noopener" target="_blank"></a>
</h3>

<h3>
<span id="-1" class="fragment"></span><a href="#-1"><i class="fa fa-link"></i></a><a href="http://github.com/vanderlin/ofxBox2d" rel="nofollow noopener" target="_blank"></a>
</h3>

<h3>
<span id="-2" class="fragment"></span><a href="#-2"><i class="fa fa-link"></i></a><a href="http://github.com/YCAMInterlab/ofxTimeline" rel="nofollow noopener" target="_blank"></a>
</h3>

<h3>
<span id="-3" class="fragment"></span><a href="#-3"><i class="fa fa-link"></i></a><a href="http://github.com/patriciogonzalezvivo/ofxFX" rel="nofollow noopener" target="_blank"></a>
</h3>

<h3>
<span id="-4" class="fragment"></span><a href="#-4"><i class="fa fa-link"></i></a><a href="http://github.com/ofTheo/ofxLeapMotion" rel="nofollow noopener" target="_blank"></a>
</h3>

<div class="footnotes">
<hr>
<ol>

<li id="fn1">
<p>実は、 <a href="http://ofxaddons.com/" rel="nofollow noopener" target="_blank">ofxAddons</a> を見ればデフォルトでStar順でソートされるので、あまりここでわざわざリストにする意味はないかもしれません。ここまで書いて気付いたので、参考記事を併記することにしました。 <a href="#fnref1">↩</a></p>
</li>

</ol>
</div>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>shu223さんの<br />45位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>40</kbd>
		<a target="_blank" href="https://qiita.com/shu223/items/90aa1baaf2e0971c8dfb">カスタムUIActivityの実装手順</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2012-12-19 16:38:15</center>
	</td>
	<td style="width:200px;">
		@shu223<br />(Freelancer 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/3180/profile-images/1473682733">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Objective-C]</b> <b>[iPhone]</b> <b>[iOS]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>カスタムUIActivityの実装手順です。</p>

<h2>
<span id="サンプルコード" class="fragment"></span><a href="#%E3%82%B5%E3%83%B3%E3%83%97%E3%83%AB%E3%82%B3%E3%83%BC%E3%83%89"><i class="fa fa-link"></i></a>サンプルコード</h2>

<p>サンプルコードのリポジトリはこちら。  </p>

<p><a href="https://github.com/shu223/SHNakamapActivity" rel="nofollow noopener" target="_blank">SHNakamapActivity</a></p>

<p>グループチャットサービス『ナカマップ』の UIActivity です。</p>

<h2>
<span id="実装手順" class="fragment"></span><a href="#%E5%AE%9F%E8%A3%85%E6%89%8B%E9%A0%86"><i class="fa fa-link"></i></a>実装手順</h2>

<h3>
<span id="1-アイコンを用意する" class="fragment"></span><a href="#1-%E3%82%A2%E3%82%A4%E3%82%B3%E3%83%B3%E3%82%92%E7%94%A8%E6%84%8F%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>1. アイコンを用意する</h3>

<p>周囲を透過にする必要があります。透過にしないとどうなるか、どんな画像を用意すればよいかは、<a href="http://hirakiuc.blogspot.jp/2012/09/uiactivity.html" rel="nofollow noopener" target="_blank">こちらの記事</a>が画像付きでわかりやすいです。</p>

<p>サイズは</p>

<ul>
<li>43x43</li>
<li>86x86</li>
<li>55x55</li>
<li>110x110</li>
</ul>

<p>の4種類入れておきます。</p>

<h3>
<span id="2-uiactivity-を継承したクラスを新規作成" class="fragment"></span><a href="#2-uiactivity-%E3%82%92%E7%B6%99%E6%89%BF%E3%81%97%E3%81%9F%E3%82%AF%E3%83%A9%E3%82%B9%E3%82%92%E6%96%B0%E8%A6%8F%E4%BD%9C%E6%88%90"><i class="fa fa-link"></i></a>2. UIActivity を継承したクラスを新規作成</h3>

<p>UIActivity を継承したクラスを新規作成します。今回はヘッダファイルは新規作成時のままとくにいじりません。</p>

<h3>
<span id="3-uiactivityのメソッドをオーバーライド" class="fragment"></span><a href="#3-uiactivity%E3%81%AE%E3%83%A1%E3%82%BD%E3%83%83%E3%83%89%E3%82%92%E3%82%AA%E3%83%BC%E3%83%90%E3%83%BC%E3%83%A9%E3%82%A4%E3%83%89"><i class="fa fa-link"></i></a>3. UIActivityのメソッドをオーバーライド</h3>

<p>下記を参考に、サービス／アプリに合わせてよしなにオーバーライドします。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>- (NSString *)activityType {
    return @"com.kayac.nakamap";
}

- (UIImage *)activityImage {
    return [UIImage imageNamed:@"NakamapActivityIcon.png"];
}

- (NSString *)activityTitle {
    return @"Nakamap";
}

- (BOOL)canPerformWithActivityItems:(NSArray *)activityItems {
    for (id activityItem in activityItems) {
        if ([activityItem isKindOfClass:[NSString class]]) {
            return YES;
        }
    }
    return NO;
}

- (void)prepareWithActivityItems:(NSArray *)activityItems {
    for (id activityItem in activityItems) {
        if ([self openNakamapWithItem:activityItem]) {
            break;
        }
    }
}
</pre></div></div>

<h3>
<span id="4-連携処理を実装" class="fragment"></span><a href="#4-%E9%80%A3%E6%90%BA%E5%87%A6%E7%90%86%E3%82%92%E5%AE%9F%E8%A3%85"><i class="fa fa-link"></i></a>4. 連携処理を実装</h3>

<p>サービス／アプリとの連携処理を実装します。サービスならAPI、アプリならURL Schemeを呼びます。（アプリ内のフレームワークとかを呼び出すUIActivityもあります）</p>

<p>SHNakamapActivity では、prepareWithActivityItems: で呼んでいる openNakamapWithItem: のところで、ナカマップのチャット用 URL Schemeをたたいています。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>- (BOOL)openNakamapWithItem:(id)item {
    NSURL *url = [NSURL URLWithString:@"nakamap://chat"];
    NSString *urlStrWithItem = [NSString stringWithFormat:@"nakamap://chat?message=%@", item];
    NSURL *urlWithItem = [NSURL URLWithString:urlStrWithItem];
    [[UIApplication sharedApplication] openURL:urlWithItem];
    return YES;
}
</pre></div></div>

<p>（上記コードは簡単化のため各種チェック処理は省いています）</p>

<p>以上でできあがり！</p>

<h2>
<span id="呼び出し側の実装" class="fragment"></span><a href="#%E5%91%BC%E3%81%B3%E5%87%BA%E3%81%97%E5%81%B4%E3%81%AE%E5%AE%9F%E8%A3%85"><i class="fa fa-link"></i></a>呼び出し側の実装</h2>

<p>参考までに、呼び出し側のコードはこんな感じです。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>SHNakamapActivity *nakamapActivity = [[SHNakamapActivity alloc] init];
UIActivityViewController *activityView = [[UIActivityViewController alloc] initWithActivityItems:@[@"投稿テキスト"]
                                                                           applicationActivities:@[nakamapActivity]];
[self presentViewController:activityView animated:YES completion:nil];
</pre></div></div>

<h2>
<span id="カスタムuiactivityをまとめたリポジトリ" class="fragment"></span><a href="#%E3%82%AB%E3%82%B9%E3%82%BF%E3%83%A0uiactivity%E3%82%92%E3%81%BE%E3%81%A8%E3%82%81%E3%81%9F%E3%83%AA%E3%83%9D%E3%82%B8%E3%83%88%E3%83%AA"><i class="fa fa-link"></i></a>カスタムUIActivityをまとめたリポジトリ</h2>

<p>Dropbox、Instagram、LINEといった著名サービスの UIActivity は、すでにちらほら Github で公開されはじめているので、それらを集めたリポジトリをつくりました。詳細は下記記事をご覧ください。</p>

<p><a href="http://d.hatena.ne.jp/shu223/20121127/1354017518" rel="nofollow noopener" target="_blank">たった1行でWebサービスと連携！UIActivity のまとめリポジトリをつくりました</a></p>

<h2>
<span id="その他のios6の機能" class="fragment"></span><a href="#%E3%81%9D%E3%81%AE%E4%BB%96%E3%81%AEios6%E3%81%AE%E6%A9%9F%E8%83%BD"><i class="fa fa-link"></i></a>その他のiOS6の機能</h2>

<p>iOS 6 には UIActivity 以外にもイノベーティブな新機能がたくさんあります。そんな iOS6新機能のサンプルコード／ライブラリをまとめた記事がこちら。</p>

<p><a href="http://d.hatena.ne.jp/shu223/20120923/1348355900" rel="nofollow noopener" target="_blank">iOS 6 新機能のサンプルコード／ライブラリのまとめ22個</a></p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>shu223さんの<br />46位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>39</kbd>
		<a target="_blank" href="https://qiita.com/shu223/items/83ba753de9c6d1ead947">iBeaconに関してAppleの公式ドキュメントに書かれていたこと</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2014-02-13 12:46:07</center>
	</td>
	<td style="width:200px;">
		@shu223<br />(Freelancer 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/3180/profile-images/1473682733">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Objective-C]</b> <b>[iOS]</b> <b>[bluetooth]</b> <b>[iBeacon]</b> <b>[BLE]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>"<a href="https://developer.apple.com/library/ios/documentation/UserExperience/Conceptual/LocationAwarenessPG/" rel="nofollow noopener" target="_blank">Location and Maps Programming Guide</a>" という <strong>CoreLocationとMapKitまわりのApple公式のプログラミングガイド</strong> があり、そこにはiBeaconまわりの情報が詳細に載っているのですが、いつも更新が遅い（もしくは更新されない）印象がある日本語版にも早々にこの更新が反映されています。</p>

<p><strong><a href="https://developer.apple.com/jp/devcenter/ios/library/documentation/LocationAwarenessPG.pdf" rel="nofollow noopener" target="_blank">位置情報とマッププログラミングガイド</a></strong></p>

<ul>
<li>「領域を退出（exit）するときにしばらく時間をおいてからデリゲートメソッドが呼ばれる」</li>
<li>「境界を連続して横切った際に、iOS側で何度もイベントが発生しないように制御している」</li>
</ul>

<p>といったiBeaconを試した人がよく言及している挙動についてもちゃんとこのドキュメントに明記されていて、 <strong>有用な情報が多い</strong> と感じました。</p>

<p>というわけで以下に「これは」と思った情報を抜粋します。</p>

<h2>
<span id="フレームワーク内で隠蔽されている挙動に関する情報" class="fragment"></span><a href="#%E3%83%95%E3%83%AC%E3%83%BC%E3%83%A0%E3%83%AF%E3%83%BC%E3%82%AF%E5%86%85%E3%81%A7%E9%9A%A0%E8%94%BD%E3%81%95%E3%82%8C%E3%81%A6%E3%81%84%E3%82%8B%E6%8C%99%E5%8B%95%E3%81%AB%E9%96%A2%E3%81%99%E3%82%8B%E6%83%85%E5%A0%B1"><i class="fa fa-link"></i></a>フレームワーク内で隠蔽されている挙動に関する情報</h2>

<h3>
<span id="バックグラウンドでの挙動" class="fragment"></span><a href="#%E3%83%90%E3%83%83%E3%82%AF%E3%82%B0%E3%83%A9%E3%82%A6%E3%83%B3%E3%83%89%E3%81%A7%E3%81%AE%E6%8C%99%E5%8B%95"><i class="fa fa-link"></i></a>バックグラウンドでの挙動</h3>

<blockquote>
<p>アプリケーションが実行していないときに、ある領域の境界線を横切ると、アプリケーションはそのイベントを処理するためにバックグラウンドで起動されます。同様に、イベントが発生したときにアプリケーションが一時停止中の場合、アプリケーションは動作させられて、 <strong>イベントを処理するために短い時間（約10秒）が割り当てられます。</strong> </p>
</blockquote>

<h3>
<span id="境界線横断時の緩衝距離について" class="fragment"></span><a href="#%E5%A2%83%E7%95%8C%E7%B7%9A%E6%A8%AA%E6%96%AD%E6%99%82%E3%81%AE%E7%B7%A9%E8%A1%9D%E8%B7%9D%E9%9B%A2%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6"><i class="fa fa-link"></i></a>境界線横断時の緩衝距離について</h3>

<blockquote>
<p>システムは、境界線に加え、 <strong>システムで定義された緩衝距離を越えるまで境界線の横断を報告しません。緩衝距離は、ユーザが境界線付近を移動しているときに、システムが大量の進入・退出イベントを立て続けに生成するのを防ぐための値です。</strong></p>
</blockquote>

<h3>
<span id="領域通知の条件について" class="fragment"></span><a href="#%E9%A0%98%E5%9F%9F%E9%80%9A%E7%9F%A5%E3%81%AE%E6%9D%A1%E4%BB%B6%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6"><i class="fa fa-link"></i></a>領域通知の条件について</h3>

<blockquote>
<p>iOSシミュレータまたはデバイスで領域観測コードのテストを行う場合は、領域の境界線が横断されてもすぐには領域イベントが発生しないことがあることを理解しておいてください。 <strong>不確かな通知が行われるのを避けるために、iOSでは一定のしきい値条件が満たされないと領域通知を行いません。</strong> <br>
特に、 <strong>ユーザの位置が領域の境界線を横断し、この境界線から最小距離だけ離れてから、この位置を少なくとも20秒間保持</strong> しないと、通知は報告されません。</p>
</blockquote>

<blockquote>
<p><strong>この距離のしきい値は、ハードウェアと現在使用可能な位置情報テクノロジーとによって決められています。</strong> たとえば、Wi-Fiが無効になっている場合、領域観測の精度は大幅に低下します。しかしながら、テスト目的の場合は、最小距離は約200メートルであると仮定することができます。</p>
</blockquote>

<h2>
<span id="実装のヒント" class="fragment"></span><a href="#%E5%AE%9F%E8%A3%85%E3%81%AE%E3%83%92%E3%83%B3%E3%83%88"><i class="fa fa-link"></i></a>実装のヒント</h2>

<blockquote>
<p>これらのデリゲートメソッド（注：<code>didEnterRegion:</code> と <code>didExitRegion:</code>）は、ユーザがビーコン領域に対して進入または退出を行うと必ずデフォルトで呼び出されますが、アプリケーションでこの動作をカスタマイズされることがあります。たとえば、ユーザがデバイスのディスプレイをオンにするまで、ユーザのビーコン領域への進入の通知を遅らせる場合があります。これを行うには、ビーコン領域の登録時に、ビーコン領域の <strong>notifyEntryStateOnDisplayプロパティの値をYESに設定（そして領域のnotifyOnEntryプロパティをNOに設定）</strong> するだけです。ユーザに通知が何回も送信されるのを防止するには、領域への進入ごとに1回だけ位置に関する通知を配信するようにします。</p>
</blockquote>

<blockquote>
<p>このビーコンの配列（注：<code>locationManager:didRangeBeacons:inRegion:</code> の第2引数に入ってくる配列のこと）は、 <strong>最も近くにあるビーコンが配列の先頭にあるように、デバイスからの距離によって整列</strong> されています。</p>
</blockquote>

<blockquote>
<p>ビーコンによる距離測定は、Bluetooth Low Energy無線ビーコンの検出に依存しているため、距離測定の結果は、ユーザがデバイスをどのように扱っているのかによって変わります。たとえば、デバイスがユーザのポケットやバッグの中にある場合やユーザがデバイス手の中で持っている場合、またビーコンと結ぶ直線距離の中に視界を遮るものがあるかどうかによって、距離測定の結果は変わってきます。 <strong>アプリケーションによる距離測定の結果を一定に保つための方法の1つは、アプリケーションがフォアグラウンドある場合は、デバイスがユーザの手の中にある確率が高いため、アプリケーションがフォアグラウンドにある場合にのみビーコンとの距離測定を使用することです。</strong></p>
</blockquote>

<h2>
<span id="領域観測を利用したサービスに関する示唆" class="fragment"></span><a href="#%E9%A0%98%E5%9F%9F%E8%A6%B3%E6%B8%AC%E3%82%92%E5%88%A9%E7%94%A8%E3%81%97%E3%81%9F%E3%82%B5%E3%83%BC%E3%83%93%E3%82%B9%E3%81%AB%E9%96%A2%E3%81%99%E3%82%8B%E7%A4%BA%E5%94%86"><i class="fa fa-link"></i></a>領域観測を利用したサービスに関する示唆</h2>

<blockquote>
<p>たとえば、特定のドライクリーニング店に近づいたら、アプリケーションでは、預けていてもう仕上がっている服を受け取るようにユーザに通知することができます。</p>
</blockquote>

<p>passbookでクーポン配信、というユースケースは一番よく言われていますが、こういう場所に紐づいたアラートのようなユースケースもおもしろいと思いました。</p>

<blockquote>
<p>あるデパートにおける顧客の体験を豊かにするための専用のアプリケーションでは、 <strong>このデパートのすべてのチェーン店で同じ近接UUIDで観測を行いながら、各店舗をメジャー値とマイナー値によって区別する</strong> という使用方法があります。</p>

<p>ユーザがこのデパート位置にある入口の1つに近づくと、アプリケーションがそのことをユーザに通知します。さらにアプリケーションでは、 <strong>異なるマイナー値を使用して同じ店舗内の別の売り場を区別</strong> することが可能で、位置に適したよりきめの細かい情報をユーザに提供できます。</p>
</blockquote>

<p>UUID, Major, Minorをひとつのアプリケーションでどう使い分けるか、の一例としてわかりやすい。</p>

<h2>
<span id="関連記事" class="fragment"></span><a href="#%E9%96%A2%E9%80%A3%E8%A8%98%E4%BA%8B"><i class="fa fa-link"></i></a>関連記事</h2>

<ul>
<li><a href="http://d.hatena.ne.jp/shu223/20131219/1387448941" rel="nofollow noopener" target="_blank">iBeaconの実装に役立つ記事の逆引きリファレンス</a></li>
<li><a href="http://d.hatena.ne.jp/shu223/20140131/1391155397" rel="nofollow noopener" target="_blank">Estimote Beacon をリバースエンジニアリング</a></li>
</ul>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>shu223さんの<br />47位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>39</kbd>
		<a target="_blank" href="https://qiita.com/shu223/items/547470625f7feafa1b6c">UIKit上でパーティクルエフェクトを表示する</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-03-15 06:57:54</center>
	</td>
	<td style="width:200px;">
		@shu223<br />(Freelancer 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/3180/profile-images/1473682733">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Objective-C]</b> <b>[iOS]</b> <b>[CoreAnimation]</b> <b>[アニメーション]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>iOS5より、Core Animationでパーティクルシステムがサポートされ、<strong>UIKitで実装されたUI上でパーティクル表現</strong>を簡単に行えるようになりました。</p>

<p>ここでは CAEmitterLayer と CAEmmiterCell を用いたパーティクルエフェクトの基本的な実装方法を説明し、入れ子にして花火のような段階的なエフェクトを実現する方法や、動的にパラメータを変更する方法を紹介します。</p>

<h2>
<span id="基本的な実装方法" class="fragment"></span><a href="#%E5%9F%BA%E6%9C%AC%E7%9A%84%E3%81%AA%E5%AE%9F%E8%A3%85%E6%96%B9%E6%B3%95"><i class="fa fa-link"></i></a>基本的な実装方法</h2>

<p><strong>1. パーティクル画像をプロジェクトに追加する</strong></p>

<p>パーティクルシステムは、1つの画像を大量に描画することで多様な表現を行うものなので、その素となる画像が必要になります。ここでは、わかりやすいように次のようなシンプルな円形のpng画像を使います。</p>

<p><a href="https://camo.qiitausercontent.com/0d3840b06813a7e434f4c6596039a34ac3b61889/687474703a2f2f662e636c2e6c792f6974656d732f3352325431433430316b3149315233363373316b2f7061727469636c65312e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/0d3840b06813a7e434f4c6596039a34ac3b61889/687474703a2f2f662e636c2e6c792f6974656d732f3352325431433430316b3149315233363373316b2f7061727469636c65312e706e67" alt="パーティクル画像" data-canonical-src="http://f.cl.ly/items/3R2T1C401k1I1R363s1k/particle1.png"></a></p>

<p>（※視認しやすいよう背景を黒にして載せています）</p>

<p>プロパティから色を変えられるので、白ベースの画像を用いることが多いですが、あらかじめ着色した画像を用いてもOKです。</p>

<p><strong>2. QuartzCore.frameworkをプロジェクトに追加し、ヘッダをインポート</strong></p>

<div class="code-frame" data-lang="objc"><div class="highlight"><pre><span></span><span class="cp">#import &lt;QuartzCore/QuartzCore.h&gt;</span>
</pre></div></div>

<p><strong>3. CAEmitterLayerオブジェクトを生成</strong></p>

<p>パーティクルを発生させるレイヤーであるCAEmitterLayerオブジェクトを1つ生成します。</p>

<div class="code-frame" data-lang="objc"><div class="highlight"><pre><span></span><span class="bp">CAEmitterLayer</span> <span class="o">*</span><span class="n">emitterLayer</span> <span class="o">=</span> <span class="p">[</span><span class="bp">CAEmitterLayer</span> <span class="n">layer</span><span class="p">];</span>
<span class="bp">CGSize</span> <span class="n">size</span> <span class="o">=</span> <span class="nb">self</span><span class="p">.</span><span class="n">view</span><span class="p">.</span><span class="n">bounds</span><span class="p">.</span><span class="n">size</span><span class="p">;</span>
<span class="n">emitterLayer</span><span class="p">.</span><span class="n">emitterPosition</span> <span class="o">=</span> <span class="n">CGPointMake</span><span class="p">(</span><span class="n">size</span><span class="p">.</span><span class="n">width</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="n">size</span><span class="p">.</span><span class="n">height</span> <span class="o">/</span> <span class="mi">2</span><span class="p">);</span>
<span class="n">emitterLayer</span><span class="p">.</span><span class="n">renderMode</span> <span class="o">=</span> <span class="n">kCAEmitterLayerAdditive</span><span class="p">;</span>
<span class="p">[</span><span class="nb">self</span><span class="p">.</span><span class="n">view</span><span class="p">.</span><span class="n">layer</span> <span class="nl">addSublayer</span><span class="p">:</span><span class="n">emitterLayer</span><span class="p">];</span>
</pre></div></div>

<p><code>renderMode</code>プロパティは各パーティクルを重ね合わせる際の描画モードを指定できます。ここで使用している<code>kCAEmitterLayerAdditive</code>は加算による重ね合わせが行われます。</p>

<p><code>emitterPosition</code>プロパティにはパーティクルを発生させる座標を指定します。</p>

<p><strong>4. CAEmitterCellオブジェクトを生成</strong></p>

<p>パーティクルの発生源となるCAEmitterCellオブジェクトを生成します。</p>

<div class="code-frame" data-lang="objc"><div class="highlight"><pre><span></span><span class="bp">CAEmitterCell</span> <span class="o">*</span><span class="n">emitterCell</span> <span class="o">=</span> <span class="p">[</span><span class="bp">CAEmitterCell</span> <span class="n">emitterCell</span><span class="p">];</span>
<span class="bp">UIImage</span> <span class="o">*</span><span class="n">image</span> <span class="o">=</span> <span class="p">[</span><span class="bp">UIImage</span> <span class="nl">imageNamed</span><span class="p">:</span><span class="s">@"particle.png"</span><span class="p">];</span>
<span class="n">emitterCell</span><span class="p">.</span><span class="n">contents</span> <span class="o">=</span> <span class="p">(</span><span class="k">__bridge</span> <span class="kt">id</span><span class="p">)(</span><span class="n">image</span><span class="p">.</span><span class="bp">CGImage</span><span class="p">);</span>
<span class="n">emitterCell</span><span class="p">.</span><span class="n">emissionLongitude</span> <span class="o">=</span> <span class="n">M_PI</span> <span class="o">*</span> <span class="mi">2</span><span class="p">;</span>
<span class="n">emitterCell</span><span class="p">.</span><span class="n">emissionRange</span> <span class="o">=</span> <span class="n">M_PI</span> <span class="o">*</span> <span class="mi">2</span><span class="p">;</span>
<span class="n">emitterCell</span><span class="p">.</span><span class="n">birthRate</span> <span class="o">=</span> <span class="mi">800</span><span class="p">;</span>
<span class="n">emitterCell</span><span class="p">.</span><span class="n">lifetimeRange</span> <span class="o">=</span> <span class="mf">1.2</span><span class="p">;</span>
<span class="n">emitterCell</span><span class="p">.</span><span class="n">velocity</span> <span class="o">=</span> <span class="mi">240</span><span class="p">;</span>
<span class="n">emitterCell</span><span class="p">.</span><span class="n">color</span> <span class="o">=</span> <span class="p">[</span><span class="bp">UIColor</span> <span class="nl">colorWithRed</span><span class="p">:</span><span class="mf">0.89</span>
                                    <span class="nl">green</span><span class="p">:</span><span class="mf">0.56</span>
                                     <span class="nl">blue</span><span class="p">:</span><span class="mf">0.36</span>
                                    <span class="nl">alpha</span><span class="p">:</span><span class="mf">0.5</span><span class="p">].</span><span class="bp">CGColor</span><span class="p">;</span>
</pre></div></div>

<p>contentsプロパティには、手順1で用意したパーティクル画像をCGImageRef型でセットします。</p>

<p>他にもプロパティがたくさんありますが、パーティクルの発生具合を調整するためのものです。それぞれの具体的な意味は後述します。</p>

<p><strong>5. CAEmitterCellsプロパティを設定</strong></p>

<p>CAEmitterLayerは<code>emitterCells</code>というプロパティを持ち、NSArray型で複数のCAEmitterCellオブジェクトを登録できます。</p>

<div class="code-frame" data-lang="objc"><div class="highlight"><pre><span></span><span class="nb">self</span><span class="p">.</span><span class="n">emitterLayer</span><span class="p">.</span><span class="n">emitterCells</span> <span class="o">=</span> <span class="l">@[</span><span class="n">emitterCell</span><span class="l">]</span><span class="p">;</span>
</pre></div></div>

<p>ここでは手順4で生成したCAEmitterCellオブジェクトを登録しています。</p>

<p>以上で次のようなパーティクルエフェクトを表示できます。</p>

<p><a href="https://camo.qiitausercontent.com/4bc4e990ad83331fdd591b9083feb67faf3d497c/687474703a2f2f662e636c2e6c792f6974656d732f31773230324c324a326c343332363078315830642f7061727469636c65322e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/4bc4e990ad83331fdd591b9083feb67faf3d497c/687474703a2f2f662e636c2e6c792f6974656d732f31773230324c324a326c343332363078315830642f7061727469636c65322e706e67" alt="particle2" data-canonical-src="http://f.cl.ly/items/1w202L2J2l43260x1X0d/particle2.png"></a></p>

<h2>
<span id="caemittercellを入れ子にして用いる" class="fragment"></span><a href="#caemittercell%E3%82%92%E5%85%A5%E3%82%8C%E5%AD%90%E3%81%AB%E3%81%97%E3%81%A6%E7%94%A8%E3%81%84%E3%82%8B"><i class="fa fa-link"></i></a>CAEmitterCellを入れ子にして用いる</h2>

<p>先ほどの手順ではCAEmitterLayerの<code>emitterCells</code>プロパティにCAEmitterCellオブジェクトの配列をセットしましたが、CAEmitterCell自体も<code>emitterCells</code>プロパティを持っており、（CAEmitterLayerと同様に）CAEmitterCellオブジェクトの配列を持つことができます。</p>

<p>これはどういうことかというと、CAEmitterCellから発された<strong>パーティクル自身がまたパーティクルの発生源となれる</strong>、ということを意味しています。</p>

<p>例えば次のように、ひとつのCAEmitterCellオブジェクトから、</p>

<ul>
<li>上昇中のパーティクルの発生源となるCAEmitterCellオブジェクト</li>
<li>破裂後に飛散するパーティクルの発生源となるCAEmitterCellオブジェクト</li>
</ul>

<p>の2種類のCAEmitterCellオブジェクトを発生させるようにすると、花火のようなパーティクルエフェクトを実現することができます。</p>

<div class="code-frame" data-lang="objc"><div class="highlight"><pre><span></span><span class="c1">// パーティクル画像</span>
<span class="bp">UIImage</span> <span class="o">*</span><span class="n">particleImage</span> <span class="o">=</span> <span class="p">[</span><span class="bp">UIImage</span> <span class="nl">imageNamed</span><span class="p">:</span><span class="s">@"particle.png"</span><span class="p">];</span>

<span class="c1">// 花火自体の発生源</span>
<span class="bp">CAEmitterCell</span> <span class="o">*</span><span class="n">baseCell</span> <span class="o">=</span> <span class="p">[</span><span class="bp">CAEmitterCell</span> <span class="n">emitterCell</span><span class="p">];</span>
<span class="n">baseCell</span><span class="p">.</span><span class="n">emissionLongitude</span> <span class="o">=</span> <span class="o">-</span><span class="n">M_PI</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>
<span class="n">baseCell</span><span class="p">.</span><span class="n">emissionLatitude</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="n">baseCell</span><span class="p">.</span><span class="n">emissionRange</span> <span class="o">=</span> <span class="n">M_PI</span> <span class="o">/</span> <span class="mi">5</span><span class="p">;</span>
<span class="n">baseCell</span><span class="p">.</span><span class="n">lifetime</span> <span class="o">=</span> <span class="mf">2.0</span><span class="p">;</span>
<span class="n">baseCell</span><span class="p">.</span><span class="n">birthRate</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="n">baseCell</span><span class="p">.</span><span class="n">velocity</span> <span class="o">=</span> <span class="mi">400</span><span class="p">;</span>
<span class="n">baseCell</span><span class="p">.</span><span class="n">velocityRange</span> <span class="o">=</span> <span class="mi">50</span><span class="p">;</span>
<span class="n">baseCell</span><span class="p">.</span><span class="n">yAcceleration</span> <span class="o">=</span> <span class="mi">300</span><span class="p">;</span>
<span class="n">baseCell</span><span class="p">.</span><span class="n">color</span> <span class="o">=</span> <span class="n">CGColorCreateCopy</span><span class="p">([</span><span class="bp">UIColor</span> <span class="nl">colorWithRed</span><span class="p">:</span><span class="mf">0.5</span>
                                                   <span class="nl">green</span><span class="p">:</span><span class="mf">0.5</span>
                                                    <span class="nl">blue</span><span class="p">:</span><span class="mf">0.5</span>
                                                   <span class="nl">alpha</span><span class="p">:</span><span class="mf">0.5</span><span class="p">].</span><span class="bp">CGColor</span><span class="p">);</span>
<span class="n">baseCell</span><span class="p">.</span><span class="n">redRange</span>   <span class="o">=</span> <span class="mf">0.5</span><span class="p">;</span>
<span class="n">baseCell</span><span class="p">.</span><span class="n">greenRange</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">;</span>
<span class="n">baseCell</span><span class="p">.</span><span class="n">blueRange</span>  <span class="o">=</span> <span class="mf">0.5</span><span class="p">;</span>
<span class="n">baseCell</span><span class="p">.</span><span class="n">alphaRange</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">;</span>

<span class="c1">// 上昇中のパーティクルの発生源</span>
<span class="bp">CAEmitterCell</span> <span class="o">*</span><span class="n">risingCell</span> <span class="o">=</span> <span class="p">[</span><span class="bp">CAEmitterCell</span> <span class="n">emitterCell</span><span class="p">];</span>
<span class="n">risingCell</span><span class="p">.</span><span class="n">contents</span> <span class="o">=</span> <span class="p">(</span><span class="k">__bridge</span> <span class="kt">id</span><span class="p">)</span><span class="n">particleImage</span><span class="p">.</span><span class="bp">CGImage</span><span class="p">;</span>
<span class="n">risingCell</span><span class="p">.</span><span class="n">emissionLongitude</span> <span class="o">=</span> <span class="p">(</span><span class="mi">4</span> <span class="o">*</span> <span class="n">M_PI</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>
<span class="n">risingCell</span><span class="p">.</span><span class="n">emissionRange</span> <span class="o">=</span> <span class="n">M_PI</span> <span class="o">/</span> <span class="mi">7</span><span class="p">;</span>
<span class="n">risingCell</span><span class="p">.</span><span class="n">scale</span> <span class="o">=</span> <span class="mf">0.4</span><span class="p">;</span>
<span class="n">risingCell</span><span class="p">.</span><span class="n">velocity</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span>
<span class="n">risingCell</span><span class="p">.</span><span class="n">birthRate</span> <span class="o">=</span> <span class="mi">50</span><span class="p">;</span>
<span class="n">risingCell</span><span class="p">.</span><span class="n">lifetime</span> <span class="o">=</span> <span class="mf">1.5</span><span class="p">;</span>
<span class="n">risingCell</span><span class="p">.</span><span class="n">yAcceleration</span> <span class="o">=</span> <span class="mi">350</span><span class="p">;</span>
<span class="n">risingCell</span><span class="p">.</span><span class="n">alphaSpeed</span> <span class="o">=</span> <span class="o">-</span><span class="mf">0.7</span><span class="p">;</span>
<span class="n">risingCell</span><span class="p">.</span><span class="n">scaleSpeed</span> <span class="o">=</span> <span class="o">-</span><span class="mf">0.1</span><span class="p">;</span>
<span class="n">risingCell</span><span class="p">.</span><span class="n">scaleRange</span> <span class="o">=</span> <span class="mf">0.1</span><span class="p">;</span>
<span class="n">risingCell</span><span class="p">.</span><span class="n">beginTime</span> <span class="o">=</span> <span class="mf">0.01</span><span class="p">;</span>
<span class="n">risingCell</span><span class="p">.</span><span class="n">duration</span> <span class="o">=</span> <span class="mf">0.7</span><span class="p">;</span>

<span class="c1">// 破裂後に飛散するパーティクルの発生源</span>
<span class="bp">CAEmitterCell</span> <span class="o">*</span><span class="n">sparkCell</span> <span class="o">=</span> <span class="p">[</span><span class="bp">CAEmitterCell</span> <span class="n">emitterCell</span><span class="p">];</span>
<span class="n">sparkCell</span><span class="p">.</span><span class="n">contents</span> <span class="o">=</span> <span class="p">(</span><span class="k">__bridge</span> <span class="kt">id</span><span class="p">)</span><span class="n">particleImage</span><span class="p">.</span><span class="bp">CGImage</span><span class="p">;</span>
<span class="n">sparkCell</span><span class="p">.</span><span class="n">emissionRange</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">M_PI</span><span class="p">;</span>
<span class="n">sparkCell</span><span class="p">.</span><span class="n">birthRate</span> <span class="o">=</span> <span class="mi">8000</span><span class="p">;</span>
<span class="n">sparkCell</span><span class="p">.</span><span class="n">scale</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">;</span>
<span class="n">sparkCell</span><span class="p">.</span><span class="n">velocity</span> <span class="o">=</span> <span class="mi">130</span><span class="p">;</span>
<span class="n">sparkCell</span><span class="p">.</span><span class="n">lifetime</span> <span class="o">=</span> <span class="mf">3.0</span><span class="p">;</span>
<span class="n">sparkCell</span><span class="p">.</span><span class="n">yAcceleration</span> <span class="o">=</span> <span class="mi">80</span><span class="p">;</span>
<span class="n">sparkCell</span><span class="p">.</span><span class="n">beginTime</span> <span class="o">=</span> <span class="n">risingCell</span><span class="p">.</span><span class="n">lifetime</span><span class="p">;</span>
<span class="n">sparkCell</span><span class="p">.</span><span class="n">duration</span> <span class="o">=</span> <span class="mf">0.1</span><span class="p">;</span>
<span class="n">sparkCell</span><span class="p">.</span><span class="n">alphaSpeed</span> <span class="o">=</span> <span class="o">-</span><span class="mf">0.1</span><span class="p">;</span>
<span class="n">sparkCell</span><span class="p">.</span><span class="n">scaleSpeed</span> <span class="o">=</span> <span class="o">-</span><span class="mf">0.1</span><span class="p">;</span>

<span class="c1">// baseCellからrisingCellとsparkCellを発生させる</span>
<span class="n">baseCell</span><span class="p">.</span><span class="n">emitterCells</span> <span class="o">=</span> <span class="p">[</span><span class="bp">NSArray</span> <span class="nl">arrayWithObjects</span><span class="p">:</span><span class="n">risingCell</span><span class="p">,</span> <span class="n">sparkCell</span><span class="p">,</span> <span class="nb">nil</span><span class="p">];</span>

<span class="c1">// baseCellはemitterLayerから発生させる</span>
<span class="nb">self</span><span class="p">.</span><span class="n">emitterLayer</span><span class="p">.</span><span class="n">emitterCells</span> <span class="o">=</span> <span class="p">[</span><span class="bp">NSArray</span> <span class="nl">arrayWithObjects</span><span class="p">:</span><span class="n">baseCell</span><span class="p">,</span> <span class="nb">nil</span><span class="p">];</span>
</pre></div></div>

<p>花火の「上昇後に破裂する」という2段階のプロセスを表現するため、sparkCellの<code>beginTime</code>プロパティに、risingCellの<code>lifeTime</code>プロパティと同じ値をセットすることで、risingCellによる放射が完了した後にsparkCellによる放射が開始するようにしています。</p>

<p><a href="https://camo.qiitausercontent.com/a7667ea663fa1c802cdebb95fde3bcd5d23c66d6/687474703a2f2f662e636c2e6c792f6974656d732f33413171327133343055304631513169333133382f7061727469636c65332e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/a7667ea663fa1c802cdebb95fde3bcd5d23c66d6/687474703a2f2f662e636c2e6c792f6974656d732f33413171327133343055304631513169333133382f7061727469636c65332e706e67" alt="particle3" data-canonical-src="http://f.cl.ly/items/3A1q2q340U0F1Q1i3138/particle3.png"></a></p>

<h2>
<span id="動的にパラメータを変更する" class="fragment"></span><a href="#%E5%8B%95%E7%9A%84%E3%81%AB%E3%83%91%E3%83%A9%E3%83%A1%E3%83%BC%E3%82%BF%E3%82%92%E5%A4%89%E6%9B%B4%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>動的にパラメータを変更する</h2>

<p>CAEmitterCellの<code>name</code>プロパティに値をセットしておけば、パラメータを動的変更することができます。</p>

<p>花火のサンプルを例にとると、baseCellの<code>name</code>プロパティに下記のように名前をセットしておけば、</p>

<div class="code-frame" data-lang="objc"><div class="highlight"><pre><span></span><span class="n">baseCell</span><span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">@"fireworks"</span><span class="p">;</span>
</pre></div></div>

<p><code>setValue:forKeyPath:</code>メソッドを用いて次のようにパラメータを変更することができます。</p>

<div class="code-frame" data-lang="objc"><div class="highlight"><pre><span></span><span class="p">[</span><span class="nb">self</span><span class="p">.</span><span class="n">emitterLayer</span> <span class="nl">setValue</span><span class="p">:</span><span class="mi">@0</span>
                 <span class="nl">forKeyPath</span><span class="p">:</span><span class="s">@"emitterCells.fireworks.birthRate"</span><span class="p">];</span>
</pre></div></div>

<p><code>emitterCells</code>プロパティが保持する配列内にある "fireworks" という名前の CAEmitterCell オブジェクトの <code>birthRate</code> プロパティに値 0 をセットしています。</p>

<p><code>birthRate</code>に 0 をセットすることは、パーティクルの発生を停止することを意味するので、上記コードは<strong>動的にパーティクルエフェクトを停止</strong>していることになります。</p>

<h2>
<span id="caemittercellの各プロパティの効果" class="fragment"></span><a href="#caemittercell%E3%81%AE%E5%90%84%E3%83%97%E3%83%AD%E3%83%91%E3%83%86%E3%82%A3%E3%81%AE%E5%8A%B9%E6%9E%9C"><i class="fa fa-link"></i></a>CAEmitterCellの各プロパティの効果</h2>

<p>種類が多く、言葉で定義を説明するよりも実際に動作させながら「変更してみると何が起きるか」を確認した方が理解が早いので、ここでは必要最小限のものについて説明します。</p>

<ul>
<li>
<code>birthRate</code>:１秒間に生成するパーティクルの数。</li>
<li>
<code>lifetime</code>:パーティクルが発生してから消えるまでの時間。単位は秒。</li>
<li>
<code>color</code>:パーティクルの色。</li>
<li>
<code>velocity</code>:パーティクルの秒速。</li>
<li>
<code>emissionRange</code>:パーティクルを発生する角度の範囲。単位はラジアン。</li>
</ul>

<p><code>lifetimeRange</code>や<code>velocityRange</code>のように、xxxxRangeという名前のプロパティは、それぞれ各プロパティにランダム性をもたせるために、幅を設定するものです。たとえば、velocityRangeは、velocityに設定した値に幅を持たせるためのプロパティです。</p>

<h2>
<span id="サンプルコード" class="fragment"></span><a href="#%E3%82%B5%E3%83%B3%E3%83%97%E3%83%AB%E3%82%B3%E3%83%BC%E3%83%89"><i class="fa fa-link"></i></a>サンプルコード</h2>

<p>Githubにアップしてあります。</p>

<p><a href="https://github.com/shu223/CAEmitterSample" rel="nofollow noopener" target="_blank">CAEmitterSample</a></p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>shu223さんの<br />48位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>38</kbd>
		<a target="_blank" href="https://qiita.com/shu223/items/b017d574fda777735a3d">$(SRCROOT)や$(BUILD_DIR)等のXcodeで使用しているマクロの置換内容の一覧を調べる</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-01-08 19:03:36</center>
	</td>
	<td style="width:200px;">
		@shu223<br />(Freelancer 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/3180/profile-images/1473682733">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Objective-C]</b> <b>[Xcode]</b> <b>[iOS]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>Info.plistや、ビルド設定を変更したりしていると、こんな文字列に出くわします。</p>

<ul>
<li>$(PRODUCT_NAME)</li>
<li>$(TARGET_TEMP_DIR)</li>
<li>$(SRCROOT)</li>
</ul>

<p>これらはそれぞれ特別な意味を持ち、Xcodeがビルド時等の様々なタイミングでプロダクト名や環境に応じたパスに置き換えたりしてくれるものです。</p>

<p>複雑なパスを簡単な文字列で指定できるので便利なのですが、「SRCROOTがプロジェクトフォルダ直下かそれともその一つ下かわからなくなる」「Library Search Pathを指定したいがどのマクロを使っていいかわからない」といった状況で、その置換内容を逆に知りたい場合があります。</p>

<p>このXcodeマクロに関するドキュメントとしては、Appleの<a href="http://developer.apple.com/library/ios/#documentation/DeveloperTools/Reference/XcodeBuildSettingRef" rel="nofollow noopener" target="_blank">Xcode Build Setting Reference</a>に情報がまとまっているのですが、たとえばBUILT_PRODUCTS_DIRの項を見てみると</p>

<blockquote>
<p>$SYMROOT/BuiltProducts: When DEPLOYMENT_LOCATION = YES AND RETAIN_RAW_BINARIES = YES,<br>
   $CONFIGURATION_BUILD_DIR: Is the alternative.</p>
</blockquote>

<p>といった感じで、条件分岐があったり他の環境変数との入れ子があったりして、これだけを見てマクロの置換内容を具体的に知るのは容易ではありません。</p>

<h2>
<span id="現在の環境でのxcodeマクロの置換内容を一覧表示する方法" class="fragment"></span><a href="#%E7%8F%BE%E5%9C%A8%E3%81%AE%E7%92%B0%E5%A2%83%E3%81%A7%E3%81%AExcode%E3%83%9E%E3%82%AF%E3%83%AD%E3%81%AE%E7%BD%AE%E6%8F%9B%E5%86%85%E5%AE%B9%E3%82%92%E4%B8%80%E8%A6%A7%E8%A1%A8%E7%A4%BA%E3%81%99%E3%82%8B%E6%96%B9%E6%B3%95"><i class="fa fa-link"></i></a>現在の環境でのXcodeマクロの置換内容を一覧表示する方法</h2>

<p>次のスクリプトをRun Scriptに登録（Build PhasesタブのAdd Build Phaseボタンから登録できます）してビルド実行することで、現在の環境でのXcodeで使用しているマクロの置換内容を一覧表示することができます。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>env &gt; env.txt
</pre></div></div>

<p>ビルド実行すると、プロジェクトフォルダに env.txt というファイルが生成され、</p>

<blockquote>
<p>PRODUCT_NAME=xxxxxx<br>
   TEMP_FILES_DIR=/Users/xxxx/Library/Developer/Xcode/DerivedData/xxxxx/Build/Intermediates/xxxx.build/Debug-iphoneos/xxxx.build<br>
   SRCROOT=/Users/xxxx/xxx/xxxx/xxxx</p>
</blockquote>

<p>といった感じでズラズラとマクロ名とその置換内容の一覧が出力されます。</p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>shu223さんの<br />49位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>37</kbd>
		<a target="_blank" href="https://qiita.com/shu223/items/51f764101e6fd5c2161b">AV Foundationで240fpsスローモーション動画撮影を実装する</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2014-02-04 20:53:49</center>
	</td>
	<td style="width:200px;">
		@shu223<br />(Freelancer 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/3180/profile-images/1473682733">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Objective-C]</b> <b>[iOS]</b> <b>[avfoundation]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>iPhone5s以降で登場した機能として、<b>秒間120コマ</b>（2013年当時。最近は240コマ）<b>までの高速撮影</b> があり、標準カメラアプリではこれを利用した <b>スローモーション動画撮影機能</b> が可能となっています。</p>

<p><a href="https://camo.qiitausercontent.com/64169c73fc60f8d9ebcac1dbbb0691f7873e6423/687474703a2f2f662e636c2e6c792f6974656d732f304f314531573351334d323333393232325231742f736c6f2d6d6f5f72315f63312e6a7067" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/64169c73fc60f8d9ebcac1dbbb0691f7873e6423/687474703a2f2f662e636c2e6c792f6974656d732f304f314531573351334d323333393232325231742f736c6f2d6d6f5f72315f63312e6a7067" data-canonical-src="http://f.cl.ly/items/0O1E1W3Q3M2339222R1t/slo-mo_r1_c1.jpg"></a></p>

<p>これに類する機能をAVFoundationで実装できないかやってみたところ、うまくいったので、その方法を紹介します。</p>

<h2>
<span id="できたもの" class="fragment"></span><a href="#%E3%81%A7%E3%81%8D%E3%81%9F%E3%82%82%E3%81%AE"><i class="fa fa-link"></i></a>できたもの</h2>

<p>サンプルアプリをGitHubにアップしております。</p>

<ul>
<li><a href="https://github.com/shu223/SlowMotionVideoRecorder" rel="nofollow noopener" target="_blank">shu223/SlowMotionVideoRecorder</a></li>
</ul>

<p><a href="https://camo.qiitausercontent.com/4d54191ea6c97bae552fd4c918fb500c647f6cfa/687474703a2f2f662e636c2e6c792f6974656d732f33363061323731793147335132433261337032642f494d475f383930375f72315f63312e6a7067" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/4d54191ea6c97bae552fd4c918fb500c647f6cfa/687474703a2f2f662e636c2e6c792f6974656d732f33363061323731793147335132433261337032642f494d475f383930375f72315f63312e6a7067" width="250" data-canonical-src="http://f.cl.ly/items/360a271y1G3Q2C2a3p2d/IMG_8907_r1_c1.jpg"></a></p>

<p>スクショ下部にあるように、 <b>デフォルト / 60fps / 240fps</b> を切り替えられるようになっています。</p>

<p>このアプリを使って撮ったものがこちら（寒かったので外に出てすぐ目の前にあったこれを撮影しました）。</p>

<p><a href="https://camo.qiitausercontent.com/cb972e7f231fb947a51498123487df04642f6a7c/687474703a2f2f662e636c2e6c792f6974656d732f316233513068306b336b326d323631733352336e2f73616d706c656d6f7669655f5f2e676966" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/cb972e7f231fb947a51498123487df04642f6a7c/687474703a2f2f662e636c2e6c792f6974656d732f316233513068306b336b326d323631733352336e2f73616d706c656d6f7669655f5f2e676966" alt="" data-canonical-src="http://f.cl.ly/items/1b3Q0h0k3k2m261s3R3n/samplemovie__.gif"></a></p>

<p><a href="http://vimeo.com/82064431" rel="nofollow noopener" target="_blank">120fps Slow-Motion video recorded using AVFoundation.</a></p>

<p>（中盤をスローモーションにしています。）</p>

<h2>
<span id="実装方法" class="fragment"></span><a href="#%E5%AE%9F%E8%A3%85%E6%96%B9%E6%B3%95"><i class="fa fa-link"></i></a>実装方法</h2>

<p>わりと複雑な処理になったので、 <strong>AVFoundation関連の処理を全部ラップしたクラス</strong> をつくりました。</p>

<p>そのラッパークラス <code>TTMCaptureManager</code> を使うと、下記のように <strong>3行</strong> で実装できます。</p>

<h3>
<span id="1-初期化" class="fragment"></span><a href="#1-%E5%88%9D%E6%9C%9F%E5%8C%96"><i class="fa fa-link"></i></a>1. 初期化</h3>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>self.captureManager = [[TTMCaptureManager alloc] initWithPreviewView:self.view];
</pre></div></div>

<h3>
<span id="2-録画開始" class="fragment"></span><a href="#2-%E9%8C%B2%E7%94%BB%E9%96%8B%E5%A7%8B"><i class="fa fa-link"></i></a>2. 録画開始</h3>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>[self.captureManager startRecording];
</pre></div></div>

<h3>
<span id="3-録画停止" class="fragment"></span><a href="#3-%E9%8C%B2%E7%94%BB%E5%81%9C%E6%AD%A2"><i class="fa fa-link"></i></a>3. 録画停止</h3>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>[self.captureManager stopRecording];
</pre></div></div>

<p>停止したときに撮影した動画を保存する、とかはデリゲートメソッドを使用します。そのあたりはサンプルをご参照ください。</p>

<p>また今はこのサンプルの用途しか考慮されてないAPIになっているのですが、<a href="http://careerhack.en-japan.com/report/detail/245" rel="nofollow noopener" target="_blank">これから動画処理とかは積極的にやっていく</a>ので、随時拡張していく所存です。</p>

<h2>
<span id="ラッパーを使わない実装" class="fragment"></span><a href="#%E3%83%A9%E3%83%83%E3%83%91%E3%83%BC%E3%82%92%E4%BD%BF%E3%82%8F%E3%81%AA%E3%81%84%E5%AE%9F%E8%A3%85"><i class="fa fa-link"></i></a>ラッパーを使わない実装</h2>

<p>大部分はAVCapture～で動画撮影する場合の一般的な処理で、240fps実装ならではのポイントは AVCaptureManager の次の部分に集約されています。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>AVCaptureDevice *videoDevice = [AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeVideo];
AVCaptureDeviceFormat *selectedFormat = nil;
int32_t maxWidth = 0;
AVFrameRateRange *frameRateRange = nil;

for (AVCaptureDeviceFormat *format in [videoDevice formats]) {

    for (AVFrameRateRange *range in format.videoSupportedFrameRateRanges) {

        CMFormatDescriptionRef desc = format.formatDescription;
        CMVideoDimensions dimensions = CMVideoFormatDescriptionGetDimensions(desc);
        int32_t width = dimensions.width;

        if (range.minFrameRate &lt;= desiredFPS &amp;&amp; desiredFPS &lt;= range.maxFrameRate &amp;&amp; width &gt;= maxWidth) {

            selectedFormat = format;
            frameRateRange = range;
            maxWidth = width;
        }
    }
}

if (selectedFormat) {

    if ([videoDevice lockForConfiguration:nil]) {

        NSLog(@"selected format:%@", selectedFormat);
        videoDevice.activeFormat = selectedFormat;
        videoDevice.activeVideoMinFrameDuration = CMTimeMake(1, (int32_t)desiredFPS);
        videoDevice.activeVideoMaxFrameDuration = CMTimeMake(1, (int32_t)desiredFPS);
        [videoDevice unlockForConfiguration];
    }
}
</pre></div></div>

<p>処理の内容としては、</p>

<ul>
<li>AVCaptureDevice の formats プロパティから使用可能なフォーマットのリストを取得</li>
<li>その中から所望のfpsを満たすものを探索

<ul>
<li>同じfpsなら幅がより大きい方をとる</li>
</ul>
</li>
<li>見つかれば AVCaptureDevice の activeFormat プロパティにセットする</li>
</ul>

<p>ということを行っています。</p>

<h1>
<span id="special-thanks" class="fragment"></span><a href="#special-thanks"><i class="fa fa-link"></i></a>Special Thanks!!</h1>

<p><a href="https://twitter.com/hkato193" rel="nofollow noopener" target="_blank">@hkato193</a> さんにTwitterで諸々教えていただきました。ありがとうございました！</p>

<div class="">
<div class=""><a href="http://www.amazon.co.jp/exec/obidos/ASIN/4844335200/22301-22/ref=nosim/" rel="nofollow noopener" target="_blank"><img src="https://camo.qiitausercontent.com/0bde5aade92b59a7113a9919dc4a9281fc4d4c26/687474703a2f2f6563782e696d616765732d616d617a6f6e2e636f6d2f696d616765732f492f343168732532425068534d714c2e5f534c3136305f2e6a7067" alt="上を目指すプログラマーのためのiPhoneアプリ開発テクニック iOS 7編" data-canonical-src="http://ecx.images-amazon.com/images/I/41hs%2BPhSMqL._SL160_.jpg"></a></div>
<div class="">
<div class="">
<a href="http://www.amazon.co.jp/exec/obidos/ASIN/4844335200/22301-22/ref=nosim/" rel="nofollow noopener" target="_blank">上を目指すプログラマーのためのiPhoneアプリ開発テクニック iOS 7編</a><div class="">posted with <a href="http://www.amazlet.com/" title="amazlet" rel="nofollow noopener" target="_blank">amazlet</a> at 13.12.18</div>
</div>
<div class="">加藤 寛人 西方 夏子 藤川 宏之 鈴木 晃 高丘 知央 <br>インプレスジャパン <br>売り上げランキング: 2,641<br>
</div>
<div class=""><div class=""><a href="http://www.amazon.co.jp/exec/obidos/ASIN/4844335200/22301-22/ref=nosim/" rel="nofollow noopener" target="_blank">Amazon.co.jpで詳細を見る</a></div></div>
</div>
<div class=""></div>
</div>

<h2>
<span id="関連" class="fragment"></span><a href="#%E9%96%A2%E9%80%A3"><i class="fa fa-link"></i></a>関連</h2>

<ul>
<li><a href="http://d.hatena.ne.jp/shu223/20121125/1353877706" rel="nofollow noopener" target="_blank">iOS のオーディオ／サウンド処理について学べる書籍10冊＋α</a></li>
<li><a href="http://d.hatena.ne.jp/shu223/20121202/1354436478" rel="nofollow noopener" target="_blank">シャッター音の鳴らないカメラアプリの実装方法</a></li>
<li><a href="http://d.hatena.ne.jp/shu223/20121001/1354384097" rel="nofollow noopener" target="_blank">UIImagePickerController を使わないカメラアプリの実装方法</a></li>
<li><a href="http://d.hatena.ne.jp/shu223/20121203/1356509154" rel="nofollow noopener" target="_blank">AVFoundation 使用時のカメラ起動を高速化する</a></li>
<li><a href="http://d.hatena.ne.jp/shu223/20130221/1361394373" rel="nofollow noopener" target="_blank">ダウンロード可能な Audio Unit 関連のサンプルコード11個</a></li>
<li><a href="http://d.hatena.ne.jp/shu223/20131213/1386908558" rel="nofollow noopener" target="_blank">PerfumeのモーションキャプチャデータをiOSアプリ内で動かしてみる</a></li>
</ul>

<p>AVFoundationを使うレシピは、下記書籍にもいくつか書いたのでもしよろしければ。</p>

<p><b><a href="http://d.hatena.ne.jp/shu223/20130528/1369714635" rel="nofollow noopener" target="_blank">『iOSアプリ開発 達人のレシピ100』という本を書きました</a></b></p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>shu223さんの<br />50位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>37</kbd>
		<a target="_blank" href="https://qiita.com/shu223/items/c3f823be6801b2b85f95">カラーテーマファイルを用いてXcodeのエディタのカラーをカスタマイズする</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-02-18 17:13:17</center>
	</td>
	<td style="width:200px;">
		@shu223<br />(Freelancer 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/3180/profile-images/1473682733">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Objective-C]</b> <b>[iPhone]</b> <b>[Xcode]</b> <b>[iOS]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>Xcodeのエディタのフォントや背景のカラーは、PreferencesのFonts &amp; Colorsタブからカスタマイズすることができます。</p>

<p><a href="https://camo.qiitausercontent.com/762b9944d2e0a04a6b85d5bdcd168947576c2e31/687474703a2f2f662e636c2e6c792f6974656d732f316a3071336132473432324532633354336532692f254533253832254239254533253832254146254533253833254141254533253833254243254533253833254233254533253832254237254533253833254137254533253833253833254533253833253838253230323031332d30322d3138253230392e30322e33322e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/762b9944d2e0a04a6b85d5bdcd168947576c2e31/687474703a2f2f662e636c2e6c792f6974656d732f316a3071336132473432324532633354336532692f254533253832254239254533253832254146254533253833254141254533253833254243254533253833254233254533253832254237254533253833254137254533253833253833254533253833253838253230323031332d30322d3138253230392e30322e33322e706e67" alt="Fonts &amp; Colorsタブ" data-canonical-src="http://f.cl.ly/items/1j0q3a2G422E2c3T3e2i/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88%202013-02-18%209.02.32.png"></a></p>

<p>テーマを新規作成してひとつひとつ自分で設定する以外に、<strong>カラーテーマファイル（拡張子.dvtcolortheme）からテーマを追加</strong>することもできます。</p>

<p>カラーテーマファイルはGithubでも数多く公開されているので、自分好みのものを見つけてそこから必要に応じてカスタマイズする、というのも一つの手です。</p>

<p>ここではカラーテーマファイルの使用方法と、Githubで公開されているカラーテーマファイルをいくつかピックアップして紹介します。</p>

<h2>
<span id="カラーテーマファイルの使い方" class="fragment"></span><a href="#%E3%82%AB%E3%83%A9%E3%83%BC%E3%83%86%E3%83%BC%E3%83%9E%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AE%E4%BD%BF%E3%81%84%E6%96%B9"><i class="fa fa-link"></i></a>カラーテーマファイルの使い方</h2>

<p>以下のパスに、カラーテーマファイル（拡張子.dvtcolortheme）を置きます。（FontAndColorThemesというディレクトリがない場合は、新規作成してください）</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>~/Library/Developer/Xcode/UserData/FontAndColorThemes
</pre></div></div>

<p>その後、Xcodeを再起動します。</p>

<p>これで、PreferencesのFonts &amp; Colorsタブ内で追加したテーマが選択できるようになります。</p>

<h2>
<span id="公開されているカラーテーマファイル" class="fragment"></span><a href="#%E5%85%AC%E9%96%8B%E3%81%95%E3%82%8C%E3%81%A6%E3%81%84%E3%82%8B%E3%82%AB%E3%83%A9%E3%83%BC%E3%83%86%E3%83%BC%E3%83%9E%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB"><i class="fa fa-link"></i></a>公開されているカラーテーマファイル</h2>

<p>Githubで"dvtcolortheme"で検索すると、多くのカラーテーマファイルが見つかります。以下にその中から比較的有名なものをピックアップして紹介します。</p>

<ul>
<li><a href="https://github.com/brianmichel/solarized/tree/master/apple-xcode4-solarized" rel="nofollow noopener" target="_blank">brianmichel / solarized</a></li>
</ul>

<p>Solarizedという、エディタでの作業向けに最適化されたカラースキームを利用したテーマです。（筆者はこのリポジトリにある"Solarized - Light"を使用しています。）</p>

<ul>
<li><a href="https://github.com/jbrennan/xcode4themes" rel="nofollow noopener" target="_blank">jbrennan / xcode4themes</a></li>
</ul>

<p>執筆時点で144Starがついているリポジトリです。Solarizedに基づくテーマが2つと、ObsidianCode, Humaneというテーマが入っています。</p>

<ul>
<li><a href="https://github.com/fidgetfu/xcode-themes" rel="nofollow noopener" target="_blank">fidgetfu / xcode-themes</a></li>
</ul>

<p>Monokaiなどの、他のエディタで人気のあった配色が10種ほど納められています。</p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>shu223さんの<br />51位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>30</kbd>
		<a target="_blank" href="https://qiita.com/shu223/items/8de1dc6018735ba85063">Social.framework を利用して Twitter の DM を送信する</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-05-17 06:34:43</center>
	</td>
	<td style="width:200px;">
		@shu223<br />(Freelancer 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/3180/profile-images/1473682733">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Objective-C]</b> <b>[Twitter]</b> <b>[Xcode]</b> <b>[iOS]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>Social.framework （と Accounts.framework）を利用して <strong>Twitter の DM を送信</strong>する手順です。</p>

<h2>
<span id="1-フレームワークをプロジェクトに追加" class="fragment"></span><a href="#1-%E3%83%95%E3%83%AC%E3%83%BC%E3%83%A0%E3%83%AF%E3%83%BC%E3%82%AF%E3%82%92%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AB%E8%BF%BD%E5%8A%A0"><i class="fa fa-link"></i></a>1. フレームワークをプロジェクトに追加</h2>

<p>以下の２つを追加し、</p>

<ul>
<li>Social.framework</li>
<li>Accounts.framework</li>
</ul>

<p>DM送信を実装するクラスでヘッダをインポートしておきます。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>#import &lt;Social/Social.h&gt;
#import &lt;Accounts/Accounts.h&gt;
</pre></div></div>

<h2>
<span id="2-twitterアカウントのアクセス権を取得" class="fragment"></span><a href="#2-twitter%E3%82%A2%E3%82%AB%E3%82%A6%E3%83%B3%E3%83%88%E3%81%AE%E3%82%A2%E3%82%AF%E3%82%BB%E3%82%B9%E6%A8%A9%E3%82%92%E5%8F%96%E5%BE%97"><i class="fa fa-link"></i></a>2. Twitterアカウントのアクセス権を取得</h2>

<p>Twitterアカウントのアクセス権を取得し、ACAccountオブジェクトを取得します。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>ACAccountStore *store = [[ACAccountStore alloc] init];
ACAccountType *type = [store accountTypeWithAccountTypeIdentifier:
                              ACAccountTypeIdentifierTwitter];

[store requestAccessToAccountsWithType:type
                               options:nil
                            completion:^(BOOL granted, NSError *error) {

                                if (!granted) {

                                    NSLog(@"not granted");

                                    return;
                                }

                                NSArray *twitterAccounts = [store accountsWithAccountType:type];

                                if (!(twitterAccounts &gt; 0)) {

                                    NSLog(@"no twitter accounts");

                                    return;
                                }

                                ACAccount *account = [twitterAccounts lastObject];
                            }];
</pre></div></div>

<h2>
<span id="3-dm-送信" class="fragment"></span><a href="#3-dm-%E9%80%81%E4%BF%A1"><i class="fa fa-link"></i></a>3. DM 送信</h2>

<p>SLRequestクラスを利用して、direct_messages/new APIをたたきます。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>NSURL *url = [NSURL URLWithString:@"https://api.twitter.com/1.1/direct_messages/new.json"];
NSDictionary *parameters = @{@"text": @"テスト送信",
                             @"screen_name": @"shu223"};

SLRequest *request = [SLRequest requestForServiceType:SLServiceTypeTwitter
                                        requestMethod:SLRequestMethodPOST
                                                  URL:url
                                           parameters:parameters];

request.account = account;
[request performRequestWithHandler:^(NSData *responseData,
                                     NSHTTPURLResponse *urlResponse,
                                     NSError *error)
 {
     NSError *jsonError = nil;
     id jsonData = [NSJSONSerialization JSONObjectWithData:responseData
                                               options:0
                                                 error:&amp;jsonError];
     if (error){

         NSLog(@"error:%@", error);
     }

     if (jsonError) {

         NSLog(@"jsonerror:%@", jsonError);
     }

     dispatch_async(dispatch_get_main_queue(), ^{

         NSLog(@"jsondata:%@" , jsonData);
     });
 }];
</pre></div></div>

<p>上で使用しているパラメータについて補足すると、</p>

<ul>
<li>text

<ul>
<li>送信するテキスト</li>
<li>required</li>
</ul>
</li>
<li>screen_name

<ul>
<li>宛先ユーザーのscreen name（@のあとに続く名前）</li>
<li>option</li>
</ul>
</li>
</ul>

<p>となっています。</p>

<h2>
<span id="補足" class="fragment"></span><a href="#%E8%A3%9C%E8%B6%B3"><i class="fa fa-link"></i></a>補足</h2>

<p>iOS 6 より deprecated になりましたが、Twitter.framework の TWRequest を用いても同様のことができます。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>TWRequest *request = [[TWRequest alloc] initWithURL:url
                                         parameters:parameters
                                      requestMethod:TWRequestMethodPOST];
</pre></div></div>

<h2>
<span id="参考資料" class="fragment"></span><a href="#%E5%8F%82%E8%80%83%E8%B3%87%E6%96%99"><i class="fa fa-link"></i></a>参考資料</h2>

<p><a href="https://dev.twitter.com/docs/api/1.1/post/direct_messages/new" rel="nofollow noopener" target="_blank">POST direct_messages/new | Twitter Developers</a></p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>shu223さんの<br />52位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>28</kbd>
		<a target="_blank" href="https://qiita.com/shu223/items/38a14ad3efd260faafe0">Max/MSP/Jitterをはじめるメモ</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-12-03 16:47:50</center>
	</td>
	<td style="width:200px;">
		@shu223<br />(Freelancer 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/3180/profile-images/1473682733">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Max-MSP]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>もともと興味はあったはずなのに、いつの間にかその気持ちが薄れ早数年。急に仕事で必要になり、勉強をはじめることにしました。</p>

<p>これを書いてる現時点で、触ったことがないどころか、入手方法、いくらぐらいするのかすらわからない（まだググってもいない）、という状況です。</p>

<h2>
<span id="入手方法" class="fragment"></span><a href="#%E5%85%A5%E6%89%8B%E6%96%B9%E6%B3%95"><i class="fa fa-link"></i></a>入手方法</h2>

<h3>
<span id="amazoncojp" class="fragment"></span><a href="#amazoncojp"><i class="fa fa-link"></i></a>amazon.co.jp</h3>

<p></p><div class="">
<div class=""><a href="http://www.amazon.co.jp/exec/obidos/ASIN/B00DHXW140/22301-22/ref=nosim/" rel="nofollow noopener" target="_blank"><img src="https://camo.qiitausercontent.com/1eb7993ddc6d6b7e793a793091d784b6ae965d0e/687474703a2f2f6563782e696d616765732d616d617a6f6e2e636f6d2f696d616765732f492f333166497148636b69364c2e5f534c3136305f2e6a7067" alt="Max 6J [日本語版]" data-canonical-src="http://ecx.images-amazon.com/images/I/31fIqHcki6L._SL160_.jpg"></a></div>
<div class=""><div class="">
<a href="http://www.amazon.co.jp/exec/obidos/ASIN/B00DHXW140/22301-22/ref=nosim/" rel="nofollow noopener" target="_blank">Max 6J [日本語版]</a>

<p>¥42,000。プロ用ソフトとして高いとは思わないけど、まずはちょっとかじりたいだけなので、保留。</p>

<h3>
<span id="amazoncom" class="fragment"></span><a href="#amazoncom"><i class="fa fa-link"></i></a>amazon.com</h3>

<p>見つからず。パッケージ売りは日本だけなのかも。</p>

<h3>
<span id="cycling-74---mi7-japan" class="fragment"></span><a href="#cycling-74---mi7-japan"><i class="fa fa-link"></i></a>Cycling 74 - MI7 Japan</h3>

<p><a href="http://www.mi7.co.jp/products/cycling74/demo/" rel="nofollow noopener" target="_blank">MI7 Japan - Cycling 74 | デモ</a></p>

<p>デモ版がダウンロードできるようなので、これで。</p>

<p>デモ版の制限や、プロダクト版のライセンス価格は不明（書うことになったら調べる）。</p>

<h2>
<span id="インストール" class="fragment"></span><a href="#%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB"><i class="fa fa-link"></i></a>インストール</h2>

<p>環境はMac OS X 10.9 です。</p>

<p>ダウンロードしてきた〜.dmgから普通にインストールするだけ。</p>

<p><a href="https://camo.qiitausercontent.com/1f78bedaf3e28b4c4dcc08fdac5db4c29e9aa76e/687474703a2f2f662e636c2e6c792f6974656d732f31643371323231513342315231563133317a31722f696e7374616c6c5f72315f63312e6a7067" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/1f78bedaf3e28b4c4dcc08fdac5db4c29e9aa76e/687474703a2f2f662e636c2e6c792f6974656d732f31643371323231513342315231563133317a31722f696e7374616c6c5f72315f63312e6a7067" alt="" data-canonical-src="http://f.cl.ly/items/1d3q221Q3B1R1V131z1r/install_r1_c1.jpg"></a></p>

<h2>
<span id="hello-world" class="fragment"></span><a href="#hello-world"><i class="fa fa-link"></i></a>Hello World</h2>

<p>起動すると、デモ版として使うか、認証しろという画面。</p>

<p><a href="https://camo.qiitausercontent.com/2c92d7fd0fa1c7eb8b3bd79345236c6619f4ab03/687474703a2f2f662e636c2e6c792f6974656d732f30313336315330433145304d33773433306e32692f64656d6f2e6a7067" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/2c92d7fd0fa1c7eb8b3bd79345236c6619f4ab03/687474703a2f2f662e636c2e6c792f6974656d732f30313336315330433145304d33773433306e32692f64656d6f2e6a7067" alt="" data-canonical-src="http://f.cl.ly/items/01361S0C1E0M3w430n2i/demo.jpg"></a></p>

<p>30日もあれば十分買うかどうかの判断できるので、助かる。</p>

<p>で、Demoを選んで進むと、こういう初期画面が出てきます。</p>

<p><a href="https://camo.qiitausercontent.com/6af2daaf0f0124b033ccaa614af95f0bba0cc222/687474703a2f2f662e636c2e6c792f6974656d732f3033314f3431306b3252314c3437326a304232322f66697273742e6a7067" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/6af2daaf0f0124b033ccaa614af95f0bba0cc222/687474703a2f2f662e636c2e6c792f6974656d732f3033314f3431306b3252314c3437326a304232322f66697273742e6a7067" alt="" data-canonical-src="http://f.cl.ly/items/031O410k2R1L472j0B22/first.jpg"></a></p>

<p>とりあえず New Patcher を選び、</p>

<p><a href="https://camo.qiitausercontent.com/37b02987b14d50916b71a6c03556c20120106d3d/687474703a2f2f662e636c2e6c792f6974656d732f31433241315631363156327130663353327730452f6e657770617463682e6a7067" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/37b02987b14d50916b71a6c03556c20120106d3d/687474703a2f2f662e636c2e6c792f6974656d732f31433241315631363156327130663353327730452f6e657770617463682e6a7067" alt="" data-canonical-src="http://f.cl.ly/items/1C2A1V161V2q0f3S2w0E/newpatch.jpg"></a></p>

<p><strong>最初のHello World的な一歩がわからない</strong> のでここでググりました。</p>

<p>で、見つけた yoppa.org さんの下記記事を見つつ、</p>

<p><a href="http://yoppa.org/ssaw10/798.html" rel="nofollow noopener" target="_blank">イントロダクション、Max/MSP Jitter入門</a></p>

<p>下記のような <strong>音が出るだけ</strong> のパッチをつくりました。</p>

<p><a href="https://camo.qiitausercontent.com/2519e273b9ae727386a94e4b49fd8bb84fd5eda2/687474703a2f2f662e636c2e6c792f6974656d732f313330333231316c3079327a34333233317933392f68616c6c6f776f726c645f322e6a7067" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/2519e273b9ae727386a94e4b49fd8bb84fd5eda2/687474703a2f2f662e636c2e6c792f6974656d732f313330333231316c3079327a34333233317933392f68616c6c6f776f726c645f322e6a7067" alt="" data-canonical-src="http://f.cl.ly/items/1303211l0y2z43231y39/halloworld_2.jpg"></a></p>

<p>ビルドという概念がないらしく、「で、どうしたらいいの」となりましたが、</p>

<ul>
<li>プロジェクトをセーブ</li>
<li>左下の鍵アイコンをクリックしてロック</li>
<li>スピーカーっぽいやつをクリック</li>
</ul>

<p>したら無事音が出ました。</p>
</div></div>
</div></div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>shu223さんの<br />53位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>28</kbd>
		<a target="_blank" href="https://qiita.com/shu223/items/64d3c272e9502387d760">Mac のスクリーンショットを定期的に自動撮影する</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-03-15 18:35:57</center>
	</td>
	<td style="width:200px;">
		@shu223<br />(Freelancer 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/3180/profile-images/1473682733">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[ShellScript]</b> <b>[Mac]</b> <b>[cron]</b> <b>[lifehack]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>10分ごととかに Mac スクリーンショットを自動撮影する方法です。<strong>ライフログに、あるいはサボり防止に</strong>役立つかもしれません。</p>

<h2>
<span id="手順" class="fragment"></span><a href="#%E6%89%8B%E9%A0%86"><i class="fa fa-link"></i></a>手順</h2>

<h3>
<span id="1-シェルスクリプトの準備" class="fragment"></span><a href="#1-%E3%82%B7%E3%82%A7%E3%83%AB%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%97%E3%83%88%E3%81%AE%E6%BA%96%E5%82%99"><i class="fa fa-link"></i></a>1. シェルスクリプトの準備</h3>

<p>適当なフォルダを作成して、シェルスクリプトのファイルを生成します。（下記サンプルではホーム直下にssというフォルダを作成）</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ cd
$ mkdir ss
$ cd ss
$ touch capture.sh
</pre></div></div>

<p>生成したスクリプトファイルを編集します。（最後のパスは出力先。よしなに変えてください）</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>#!/bin/bash

/usr/sbin/screencapture -m -C -T0 -x ~/ss/capture_`date +%Y%m%d%H%M`.png
</pre></div></div>

<p>スクリプトに実行権限をつけます。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ chmod +x capture.sh
</pre></div></div>

<p>※注意：このスクリプトではファイル名に日時をつけているので、画像がどんどん溜まっていくことになります。定期的に溜まったファイルを削除するスクリプトを登録する等、<strong>HDDがいつの間にか一杯にならないような工夫</strong>をしないと実用的ではないので、ご注意ください。</p>

<h3>
<span id="2-crontab-の編集" class="fragment"></span><a href="#2-crontab-%E3%81%AE%E7%B7%A8%E9%9B%86"><i class="fa fa-link"></i></a>2. crontab の編集</h3>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ crontab -e
</pre></div></div>

<p>で、crontabの編集に入るので、</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>*/5 * * * * ~/ss/capture.sh
</pre></div></div>

<p>と書いて保存します。</p>

<p>こうすると5分ごとにスクリーンキャプチャが保存されるようになります。</p>

<p>保存間隔を10分ごとにしたい場合は、次のようにします。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>*/10 * * * * ~/ss/capture.sh
</pre></div></div>

<p>ちなみに、現在の crontab の内容を確認するには、<code>-l</code> オプションを使用します。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ crontab -l
</pre></div></div>

<p>（参考）</p>

<p><a href="http://www.server-memo.net/tips/crontab.html" rel="nofollow noopener" target="_blank">crontabの書き方</a></p>

<h2>
<span id="余談" class="fragment"></span><a href="#%E4%BD%99%E8%AB%87"><i class="fa fa-link"></i></a>余談</h2>

<p>本件で crontab を初めて使ったのですが、はじめ動作せず困りました。</p>

<p>スクリプトの1行目の</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>#!/bin/bash
</pre></div></div>

<p>を書いていなかったことと、</p>

<p><code>screencapture</code>コマンドを</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>/usr/sbin/screencapture
</pre></div></div>

<p>とせず</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>screencapture
</pre></div></div>

<p>とだけ指定していたことが原因でした。</p>

<p>どちらもスクリプトをターミナルから実行する際には問題なかったので、なかなか気付くことができず。。</p>

<p>この辺りは、環境変数の設定とか実行ユーザーとか、環境に依るところなので誰にでも当てはまる話ではないと思いますが、ご参考まで。</p>

<h2>
<span id="thanks" class="fragment"></span><a href="#thanks"><i class="fa fa-link"></i></a>Thanks</h2>

<p>こちらのリポジトリで方法を知りました。大西さんありがとうございます！</p>

<p><a href="https://github.com/024t910/yc2013" rel="nofollow noopener" target="_blank">yc2013</a></p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>shu223さんの<br />54位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>26</kbd>
		<a target="_blank" href="https://qiita.com/shu223/items/1bf9c9cc6cafc58969bb">openFrameworks for iOS ことはじめ</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-12-04 09:39:01</center>
	</td>
	<td style="width:200px;">
		@shu223<br />(Freelancer 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/3180/profile-images/1473682733">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Objective-C]</b> <b>[iPhone]</b> <b>[Xcode]</b> <b>[iOS]</b> <b>[openFrameworks]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>openFrameworks （以下oF）を iOS アプリで使用してみます。</p>

<p>とりあえず、ボタン、ラベル、ログ出力あたりができれば色々と試しやすくなる（と思ってる）ので、そこまでやります。</p>

<p>あと、oF といえばアドオン、みたいな雰囲気があるので、どこかから拾ってきたアドオンを追加する方法も。</p>

<p>（2015.12.18 追記）oF 0.9.0, Xcode 7.2, iOS 9.2 で試して更新しました。</p>

<h2>
<span id="導入v090" class="fragment"></span><a href="#%E5%B0%8E%E5%85%A5v090"><i class="fa fa-link"></i></a>導入（v0.9.0）</h2>

<ol>
<li>oF 公式サイトの <a href="http://www.openframeworks.cc/download/" rel="nofollow noopener" target="_blank">download</a> ページから iOS 用のをダウンロード</li>
<li>of_v0.9.0_ios_release.zip を解凍する</li>
<li>examples/ios/emptyExample にあるプロジェクトを開く</li>
<li>ビルド</li>
</ol>

<p>これで何も処理が書かれていない空白のアプリが実機で動作します。</p>

<h2>
<span id="新規プロジェクト作成" class="fragment"></span><a href="#%E6%96%B0%E8%A6%8F%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E4%BD%9C%E6%88%90"><i class="fa fa-link"></i></a>新規プロジェクト作成</h2>

<h3>
<span id="emptyexample-を利用" class="fragment"></span><a href="#emptyexample-%E3%82%92%E5%88%A9%E7%94%A8"><i class="fa fa-link"></i></a>emptyExample を利用</h3>

<p><a href="http://yoppa.org/iphone10/1120.html" rel="nofollow noopener" target="_blank">openFrameworks入門</a> では、emptyExample をリネームして新規プロジェクトとして使う方法が紹介されています。</p>

<p>これでもOKですが、Xcode のプロジェクト名等も直す必要があります。</p>

<h3>
<span id="projectgenerator-を利用" class="fragment"></span><a href="#projectgenerator-%E3%82%92%E5%88%A9%E7%94%A8"><i class="fa fa-link"></i></a>projectGenerator を利用</h3>

<p>コメント欄で教えていただきました。</p>

<blockquote>
<p>projectGeneratorっていうソフトウェアが付いてるので、それを使うという方法もあるです。OF_ROOT/projectGenerator/projectGenerator.appにあります。</p>
</blockquote>

<p>ちゃんと iOS 用のが、<code>projectGenerator-ios/projectGenerator.app</code> にありました。GUIに従って新規プロジェクトを作成できます。</p>

<h2>
<span id="ログ出力" class="fragment"></span><a href="#%E3%83%AD%E3%82%B0%E5%87%BA%E5%8A%9B"><i class="fa fa-link"></i></a>ログ出力</h2>

<p>C++なので普通にprintfとか、</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>printf("Hello World!\n");
</pre></div></div>

<blockquote>
<p>Hello World!</p>
</blockquote>

<p>あと <code>std::cout</code> とか。</p>

<p>iOSのプロジェクトなので、NSLogも使えました。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>NSLog(@"Hello World!");
</pre></div></div>

<blockquote>
<p>2013-12-04 10:23:23.551 emptyExample[1511:70b] Hello World!</p>
</blockquote>

<p>（printfプラス、日時がついてくる）</p>

<p><a href="http://www.openframeworks.cc/documentation/utils/ofLog.html" rel="nofollow noopener" target="_blank">ofLog</a> というクラスもあるようなのですが、それはまた別途。</p>

<h2>
<span id="ラベル文字列表示" class="fragment"></span><a href="#%E3%83%A9%E3%83%99%E3%83%AB%E6%96%87%E5%AD%97%E5%88%97%E8%A1%A8%E7%A4%BA"><i class="fa fa-link"></i></a>ラベル（文字列表示）</h2>

<h3>
<span id="bitmapフォントを描画する" class="fragment"></span><a href="#bitmap%E3%83%95%E3%82%A9%E3%83%B3%E3%83%88%E3%82%92%E6%8F%8F%E7%94%BB%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>Bitmapフォントを描画する</h3>

<p><code>ofDrawBitmapString</code> を使用して文字列をビットマップとして描画できます。第2,3引数は描画するx, y座標。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>void testApp::draw(){

    ofDrawBitmapString("Hello world!", 100, 100);
}
</pre></div></div>

<p>文字色は、 <code>ofSetColor</code> でRGBで指定します。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>void testApp::draw(){

    ofSetColor(0, 0, 0);
    ofDrawBitmapString("Hello world!", 100, 100);
}
</pre></div></div>

<h3>
<span id="truetypeフォントを描画する" class="fragment"></span><a href="#truetype%E3%83%95%E3%82%A9%E3%83%B3%E3%83%88%E3%82%92%E6%8F%8F%E7%94%BB%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>TrueTypeフォントを描画する</h3>

<p>利用したいフォントファイル（.ttf）を、プロジェクト配下の bin/data フォルダに入れておきます。</p>

<p>ヘッダでメンバ変数を宣言し、</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>ofTrueTypeFont font;
</pre></div></div>

<p>フォントを読み込みます。第２引数は <strong>フォントサイズ</strong> 。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>font.loadFont("xxxx.ttf", 30);
</pre></div></div>

<p>あとは <code>drawString</code> メソッドで描画。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>font.drawString("Hello world!", 100, 100);
</pre></div></div>

<h2>
<span id="ボタン" class="fragment"></span><a href="#%E3%83%9C%E3%82%BF%E3%83%B3"><i class="fa fa-link"></i></a>ボタン</h2>

<p>ググってみたり、入門書をパラパラみてみた感じだと、oFには標準ではボタンクラスみたいなのが用意されてないようでした。</p>

<p><code>touchDown</code> とか <code>touchUp</code> といったタッチイベントのハンドラと、あとは図形描画や文字列描画でよしなにやってくれということなのでしょう。</p>

<p><a href="https://github.com/ofTheo/ofxControlPanel" rel="nofollow noopener" target="_blank">ofxControlPanel</a> とか、GUI系のアドオンがいくつかありそうなので、また別途調べてみます。</p>

<h2>
<span id="アドオンを使用する" class="fragment"></span><a href="#%E3%82%A2%E3%83%89%E3%82%AA%E3%83%B3%E3%82%92%E4%BD%BF%E7%94%A8%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>アドオンを使用する</h2>

<ol>
<li>アドオンのフォルダごと、addons フォルダに入れる</li>
<li>アドオンをプロジェクトに追加する</li>
<li>依存アドオン（あれば）も同様にプロジェクトに追加する</li>
<li>ヘッダを <code>#include</code> する</li>
</ol>

<p>ちなみに Addon を探すには、 <a href="http://ofxaddons.com/" rel="nofollow noopener" target="_blank">ofxAddons</a> というサイトが良さそう。</p>

<h2>
<span id="その他基本事項" class="fragment"></span><a href="#%E3%81%9D%E3%81%AE%E4%BB%96%E5%9F%BA%E6%9C%AC%E4%BA%8B%E9%A0%85"><i class="fa fa-link"></i></a>その他基本事項</h2>

<ul>
<li>画面左上隅が座標原点 (0, 0) となる（UIKitと同様）</li>
<li>
<code>draw</code> ごとに画面全体が再描画される。

<ul>
<li>つまりずっと表示しておくには <code>draw</code> メソッド内で描画命令を呼び続けないといけない</li>
<li>逆に、消去命令とかはない</li>
</ul>
</li>
</ul>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>shu223さんの<br />55位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>25</kbd>
		<a target="_blank" href="https://qiita.com/shu223/items/d80e69d603a48ad7bf68">Audio Unitのコールバック関数を登録する方法３種の比較</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-02-23 22:11:04</center>
	</td>
	<td style="width:200px;">
		@shu223<br />(Freelancer 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/3180/profile-images/1473682733">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Objective-C]</b> <b>[iPhone]</b> <b>[iOS]</b> <b>[AudioUnit]</b> <b>[CoreAudio]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>Audio Unit で、コールバック関数を登録するための方法が何通りかあって、何だかややこしかったので整理してみました。</p>

<h2>
<span id="audiounitsetproperty" class="fragment"></span><a href="#audiounitsetproperty"><i class="fa fa-link"></i></a>AudioUnitSetProperty</h2>

<p>まず一番基本的なものである <code>AudioUnitSetProperty</code> から。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>AURenderCallbackStruct callbackStruct;
callbackStruct.inputProc = renderCallback;
callbackStruct.inputProcRefCon = &amp;audioDataInfo;
AudioUnitSetProperty(hogeUnit,             // 対象となるAudio Unit
                     kAudioUnitProperty_SetRenderCallback,
                     kAudioUnitScope_Input,     // スコープ
                     0,                         // バスナンバー
                     &amp;callbackStruct,           // AURenderCallBackStruct構造体へのポインタ
                     sizeof(callbackStruct)     // AURenderCallBackStruct構造体のサイズ
                     );
</pre></div></div>

<p><code>AudioUnitSetProperty</code> は Audio Unit に対して<strong>各種プロパティをセットするための関数</strong>です。ここでは {対象となるAudio Unit}{スコープ}{バスナンバー} に対して <code>kAudioUnitProperty_SetRenderCallback</code> というプロパティに <code>AURenderCallBackStruct</code> 型の値を指定しています。</p>

<p>引数は多いですが、そのぶん暗黙的な部分がなくてわかりやすいです。</p>

<h2>
<span id="augraphsetnodeinputcallback" class="fragment"></span><a href="#augraphsetnodeinputcallback"><i class="fa fa-link"></i></a>AUGraphSetNodeInputCallback</h2>

<p>こちらは AUGraph の<strong>特定のノードの入力に対して</strong>コールバック関数を指定するための関数。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>AURenderCallbackStruct callbackStruct;
callbackStruct.inputProc = renderCallback;
callbackStruct.inputProcRefCon = &amp;audioDataInfo;
AUGraphSetNodeInputCallback(processingGraph,    // 対象となるAUGraph
                            hogeNode,      // 対象となるAUNode
                            0,                  // バスナンバー
                            &amp;callbackStruct     // AURenderCallBackStruct構造体へのポインタ
                            );
</pre></div></div>

<p><strong>暗黙的にスコープは <code>kAudioUnitScope_Input</code></strong>、構造体のサイズは <code>AURenderCallBackStruct</code> のサイズなので、<code>AudioUnitSetProperty</code> と比較するとこれら２つ分の引数が省略されています。</p>

<h2>
<span id="augraphaddrendernotify" class="fragment"></span><a href="#augraphaddrendernotify"><i class="fa fa-link"></i></a>AUGraphAddRenderNotify</h2>

<p>こちらは AUGraph がレンダリングを行った際に通知を受けるコールバック関数を登録するための関数。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>AUGraphAddRenderNotify(processingGraph,
                       renderCallback,
                       (__bridge void *)(self));
</pre></div></div>

<p>これを使用した場合、<strong>AUGraph の最後</strong>、たとえば Remote IO Unit でスピーカー出力している場合は、その出力時に通知を受け、コールバックが呼ばれるようになります。</p>

<p><code>AURenderCallbackStruct</code> 構造体を介さず直接コールバック関数と、コールバック関数で参照するデータ（<code>inputProcRefCon</code> にセットしていたもの）を渡します。</p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>shu223さんの<br />56位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>25</kbd>
		<a target="_blank" href="https://qiita.com/shu223/items/f009c4cd63625ccc44a9">otoolでアプリが使っているフレームワークの一覧を取得する</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-02-18 18:34:02</center>
	</td>
	<td style="width:200px;">
		@shu223<br />(Freelancer 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/3180/profile-images/1473682733">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Objective-C]</b> <b>[iPhone]</b> <b>[Xcode]</b> <b>[iOS]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>otoolというコマンドを使用すると、iOSアプリのバイナリの様々な情報を調べることができます。</p>

<p>ここでは、アプリが使用しているフレームワークを調べる方法を紹介します。</p>

<h2>
<span id="otoolの使い方" class="fragment"></span><a href="#otool%E3%81%AE%E4%BD%BF%E3%81%84%E6%96%B9"><i class="fa fa-link"></i></a>otoolの使い方</h2>

<p>バイナリ（拡張子.app）のあるフォルダへ移動し、ターミナルから以下のように実行します。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>otool -l {アプリ名}.app/{アプリ名}
</pre></div></div>

<p>バイナリのある場所は、Xcode4を使用しているのであれば、</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>~/Library/Developer/Xcode/DerivedData
</pre></div></div>

<p>配下を辿っていく、あるいはバイナリファイル名で検索すれば見つけられます。</p>

<h2>
<span id="使用フレームワークのみを出力する" class="fragment"></span><a href="#%E4%BD%BF%E7%94%A8%E3%83%95%E3%83%AC%E3%83%BC%E3%83%A0%E3%83%AF%E3%83%BC%E3%82%AF%E3%81%AE%E3%81%BF%E3%82%92%E5%87%BA%E5%8A%9B%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>使用フレームワークのみを出力する</h2>

<p>上記コマンドでこのアプリに関する諸々の情報がコンソールに出力されるのですが、次のようにパイプを使って<code>grep</code>コマンドに渡すことで、</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>otool -l {アプリ名}.app/{アプリ名} | grep framework
</pre></div></div>

<p>「使用しているフレームワーク」だけに絞って出力させることができます。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>name /System/Library/Frameworks/AudioToolbox.framework/AudioToolbox (offset 24)
name /System/Library/Frameworks/MediaPlayer.framework/MediaPlayer (offset 24)
name /System/Library/Frameworks/QuartzCore.framework/QuartzCore (offset 24)
name /System/Library/Frameworks/MessageUI.framework/MessageUI (offset 24)
name /System/Library/Frameworks/ImageIO.framework/ImageIO (offset 24)
name /System/Library/Frameworks/CoreImage.framework/CoreImage (offset 24)
name /System/Library/Frameworks/MobileCoreServices.framework/MobileCoreServices (offset 24)
name /System/Library/Frameworks/Accelerate.framework/Accelerate (offset 24)
</pre></div></div>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>shu223さんの<br />57位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>23</kbd>
		<a target="_blank" href="https://qiita.com/shu223/items/62b56dd5f4a3022f07e9">openFrameworksとKinectを連携させる</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-12-12 12:47:22</center>
	</td>
	<td style="width:200px;">
		@shu223<br />(Freelancer 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/3180/profile-images/1473682733">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Objective-C]</b> <b>[Mac]</b> <b>[Xcode]</b> <b>[openFrameworks]</b> <b>[Kinect]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>ofxKinectを使用して openFrameworks と Kinect を連携させてみます。</p>

<h2>
<span id="まずはサンプル" class="fragment"></span><a href="#%E3%81%BE%E3%81%9A%E3%81%AF%E3%82%B5%E3%83%B3%E3%83%97%E3%83%AB"><i class="fa fa-link"></i></a>まずはサンプル</h2>

<p>kinectExampleというのを試してみました。</p>

<p><a href="https://camo.qiitausercontent.com/3b4ab3150c68910844f8b264547aff994a1d8bf8/687474703a2f2f662e636c2e6c792f6974656d732f335a3345334e32443263337a32613374315332342f6b696e6563742e6a7067" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/3b4ab3150c68910844f8b264547aff994a1d8bf8/687474703a2f2f662e636c2e6c792f6974656d732f335a3345334e32443263337a32613374315332342f6b696e6563742e6a7067" alt="" data-canonical-src="http://f.cl.ly/items/3Z3E3N2D2c3z2a3t1S24/kinect.jpg"></a></p>

<p>これがなんなのか、 <strong>というかKinectというデバイスが何をしてくれるものなのか</strong> よくわかってなかったのでググってみたところ、Kinectは三次元の深度をセンシングするデバイスで、普通のカメラも持っていて、</p>

<ul>
<li>左上：深度情報をグレースケールで表したもの</li>
<li>右上：普通のカメラ（RGB Camera）からの映像</li>
<li>左下：OpenCVを使って輪郭を検出したもの</li>
</ul>

<p>とのこと。</p>

<h2>
<span id="実装手順" class="fragment"></span><a href="#%E5%AE%9F%E8%A3%85%E6%89%8B%E9%A0%86"><i class="fa fa-link"></i></a>実装手順</h2>

<p>emptyExampleからの実装手順です。</p>

<h3>
<span id="アドオン導入" class="fragment"></span><a href="#%E3%82%A2%E3%83%89%E3%82%AA%E3%83%B3%E5%B0%8E%E5%85%A5"><i class="fa fa-link"></i></a>アドオン導入</h3>

<ol>
<li>ofxKinectをプロジェクトに追加する</li>
<li><strong>ofxKinect/libs/libfreenect/platform/windows の参照を外す</strong></li>
</ol>

<h3>
<span id="ヘッダ" class="fragment"></span><a href="#%E3%83%98%E3%83%83%E3%83%80"><i class="fa fa-link"></i></a>ヘッダ</h3>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>#include "ofxKinect.h"
</pre></div></div>

<p>ここでまででビルドが成功します。</p>

<p>（※以下随時更新します。ストックしておくと、更新通知が飛んでくるので便利です）</p>

<h3>
<span id="セットアップ" class="fragment"></span><a href="#%E3%82%BB%E3%83%83%E3%83%88%E3%82%A2%E3%83%83%E3%83%97"><i class="fa fa-link"></i></a>セットアップ</h3>

<h3>
<span id="深度情報取得" class="fragment"></span><a href="#%E6%B7%B1%E5%BA%A6%E6%83%85%E5%A0%B1%E5%8F%96%E5%BE%97"><i class="fa fa-link"></i></a>深度情報取得</h3>

<h3>
<span id="描画" class="fragment"></span><a href="#%E6%8F%8F%E7%94%BB"><i class="fa fa-link"></i></a>描画</h3>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>shu223さんの<br />58位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>22</kbd>
		<a target="_blank" href="https://qiita.com/shu223/items/16170b54070b25c67b0b">konashiをSDKなしで使う</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2014-02-04 21:15:23</center>
	</td>
	<td style="width:200px;">
		@shu223<br />(Freelancer 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/3180/profile-images/1473682733">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Objective-C]</b> <b>[iOS]</b> <b>[bluetooth]</b> <b>[BLE]</b> <b>[IoT]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>konashiは親切にもドキュメントでサービス（Service）やキャラクタリスティック（Characteristic）の仕様を公開してくれているので、</p>

<ul>
<li><a href="http://konashi.ux-xu.com/documents/" rel="nofollow noopener" target="_blank">konashi - Documents</a></li>
</ul>

<p><b>オフィシャルに提供されている iOS SDK を使わなくても、Core Bluetoothから直接接続・通信することが可能</b>です。</p>

<div class="">
<div class=""><a href="http://www.amazon.co.jp/exec/obidos/ASIN/B00FQAGWAG/22301-22/ref=nosim/" rel="nofollow noopener" target="_blank"><img src="https://camo.qiitausercontent.com/35b1cc98d2a846b70c82fc6f668926040f853c75/687474703a2f2f6563782e696d616765732d616d617a6f6e2e636f6d2f696d616765732f492f353167316165527038394c2e5f534c3136305f2e6a7067" alt="konashi" data-canonical-src="http://ecx.images-amazon.com/images/I/51g1aeRp89L._SL160_.jpg"></a></div>
<div class="">
<div class="">
<a href="http://www.amazon.co.jp/exec/obidos/ASIN/B00FQAGWAG/22301-22/ref=nosim/" rel="nofollow noopener" target="_blank">konashi</a><div class="">posted with <a href="http://www.amazlet.com/" title="amazlet" rel="nofollow noopener" target="_blank">amazlet</a> at 14.02.04</div>
</div>
<div class="">スイッチサイエンス <br>売り上げランキング: 17,884<br>
</div>
<div class=""><div class=""><a href="http://www.amazon.co.jp/exec/obidos/ASIN/B00FQAGWAG/22301-22/ref=nosim/" rel="nofollow noopener" target="_blank">Amazon.co.jpで詳細を見る</a></div></div>
</div>
<div class=""></div>
</div>

<p>konashi の SDK は Core Bluetooth の薄いラッパーなので、全然SDKを使うことによる不自由は感じないのですが、この方法を試しておくことで、<b>他のBLEデバイスも、必要な情報が公開されてさえいればSDKなしで接続できる</b>ことがわかるようになるというメリットがあるかと思います。</p>

<h1>
<span id="やり方" class="fragment"></span><a href="#%E3%82%84%E3%82%8A%E6%96%B9"><i class="fa fa-link"></i></a>やり方</h1>

<p>すごくシンプルです。まず、普通に2台のiOSデバイス間で接続・通信できるようにCore Bluetoothでつくっておいて、あとは</p>

<p><b>セントラル（iOSアプリ）からペリフェラル（konashi）を探す際に、ServiceのUUIDとして "0xFF00" を使う</b></p>

<p>だけ。</p>

<p>ただし、genuuidコマンドから生成したUUIDのように、<b>文字列からのCBUUIDオブジェクト生成</b>は</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>CBUUID *uuid = [CBUUID UUIDWithString:@"xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxxx"];
</pre></div></div>

<p>だけですが、</p>

<p>konashiのように<b>16進数のUUIDからCBUUIDオブジェクトを生成する</b>場合は、次のようにします。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>UInt16 temp = uuid16 &lt;&lt; 8;
temp |= (uuid16 &gt;&gt; 8);

NSData *data = [[NSData alloc] initWithBytes:(char *)&amp;temp length:2];
CBUUID *uuid = [CBUUID UUIDWithData:data];
</pre></div></div>

<p>あとは、 scanForPeripheralsWithServices:options: するときにこのサービスを指定するもよし、centralManager:didDiscoverPeripheral:advertisementData:RSSI: が呼ばれたときにこのサービスを提供しているかどうかを判定するもよし、です。</p>

<h1>
<span id="konashiのcharacteristic" class="fragment"></span><a href="#konashi%E3%81%AEcharacteristic"><i class="fa fa-link"></i></a>konashiのcharacteristic</h1>

<p>キャラクタリスティックはkonashiとやりとりする情報の種類ごとに定義されています。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>// PIO
#define KONASHI_PIO_SETTING_UUID                                0x3000
#define KONASHI_PIO_PULLUP_UUID                                 0x3001
#define KONASHI_PIO_OUTPUT_UUID                                 0x3002
#define KONASHI_PIO_INPUT_NOTIFICATION_UUID                     0x3003
#define KONASHI_PIO_INPUT_NOTIFICATION_READ_LEN                 1

// PWM
#define KONASHI_PWM_CONFIG_UUID                                 0x3004
#define KONASHI_PWM_PARAM_UUID                                  0x3005
#define KONASHI_PWM_DUTY_UUID                                   0x3006

// Analog
#define KONASHI_ANALOG_DRIVE_UUID                               0x3007
#define KONASHI_ANALOG_READ0_UUID                               0x3008
#define KONASHI_ANALOG_READ1_UUID                               0x3009
#define KONASHI_ANALOG_READ2_UUID                               0x300A
#define KONASHI_ANALOG_READ_LEN                                 2

// I2C
#define KONASHI_I2C_CONFIG_UUID                                 0x300B
#define KONASHI_I2C_START_STOP_UUID                             0x300C
#define KONASHI_I2C_WRITE_UUID                                  0x300D
#define KONASHI_I2C_READ_PARAM_UIUD                             0x300E
#define KONASHI_I2C_READ_UUID                                   0x300F

// UART
#define KONASHI_UART_CONFIG_UUID                                0x3010
#define KONASHI_UART_BAUDRATE_UUID                              0x3011
#define KONASHI_UART_TX_UUID                                    0x3012
#define KONASHI_UART_RX_NOTIFICATION_UUID                       0x3013
#define KONASHI_UART_RX_NOTIFICATION_READ_LEN                   1

// Hardware
#define KONASHI_HARDWARE_RESET_UUID                             0x3014
#define KONASHI_HARDWARE_LOW_BAT_NOTIFICATION_UUID              0x3015
#define KONASHI_HARDWARE_LOW_BAT_NOTIFICATION_READ_LEN          1
</pre></div></div>

<p>たとえばiOSアプリとkonashiを接続した状態でkonashiのスイッチを押すと、</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>KONASHI_PIO_INPUT_NOTIFICATION_UUID 0x3003
</pre></div></div>

<p>と定義されているキャラクタリスティックが peripheral:didUpdateValueForCharacteristic:error: で観測されます。</p>

<h1>
<span id="参考情報" class="fragment"></span><a href="#%E5%8F%82%E8%80%83%E6%83%85%E5%A0%B1"><i class="fa fa-link"></i></a>参考情報</h1>

<p>konashi iOS SDKはソースがまるっと公開されているので、直接実装する場合に参考になります。</p>

<ul>
<li><a href="https://github.com/YUKAI/konashi-ios-sdk" rel="nofollow noopener" target="_blank">YUKAI/konashi-ios-sdk</a></li>
</ul>

<p><strong>※iOSと連携するデバイスのSDKは、だいたいビルド済みの静的ライブラリしか提供されてない場合が多い</strong></p>

<p>konashiって何？という方、もしくはkonashiのiOS SDKを使った連携方法を知りたい方は下記記事をご参照ください。</p>

<ul>
<li><a href="http://gihyo.jp/dev/serial/01/futuredevice/0001" rel="nofollow noopener" target="_blank">第1回　「konashi」とiOSアプリを連携させる：iOSアプリと連携させて使えるデバイスたち｜gihyo.jp … 技術評論社</a></li>
</ul>

<p>サービスとかキャラクタリスティックって何？という方はこちらを。</p>

<ul>
<li><a href="http://d.hatena.ne.jp/shu223/20140109/1389216052" rel="nofollow noopener" target="_blank">Core Bluetoothのプロファイルについて調べたことのまとめ</a></li>
</ul>

<p>konashiは最近はAmazonでも購入できるようです。</p>

<div class="">
<div class=""><a href="http://www.amazon.co.jp/exec/obidos/ASIN/B00FQAGWAG/22301-22/ref=nosim/" rel="nofollow noopener" target="_blank"><img src="https://camo.qiitausercontent.com/35b1cc98d2a846b70c82fc6f668926040f853c75/687474703a2f2f6563782e696d616765732d616d617a6f6e2e636f6d2f696d616765732f492f353167316165527038394c2e5f534c3136305f2e6a7067" alt="konashi" data-canonical-src="http://ecx.images-amazon.com/images/I/51g1aeRp89L._SL160_.jpg"></a></div>
<div class="">
<div class="">
<a href="http://www.amazon.co.jp/exec/obidos/ASIN/B00FQAGWAG/22301-22/ref=nosim/" rel="nofollow noopener" target="_blank">konashi</a><div class="">posted with <a href="http://www.amazlet.com/" title="amazlet" rel="nofollow noopener" target="_blank">amazlet</a> at 14.02.04</div>
</div>
<div class="">スイッチサイエンス <br>売り上げランキング: 17,884<br>
</div>
<div class=""><div class=""><a href="http://www.amazon.co.jp/exec/obidos/ASIN/B00FQAGWAG/22301-22/ref=nosim/" rel="nofollow noopener" target="_blank">Amazon.co.jpで詳細を見る</a></div></div>
</div>
<div class=""></div>
</div>

<h1>
<span id="その他ble関連記事" class="fragment"></span><a href="#%E3%81%9D%E3%81%AE%E4%BB%96ble%E9%96%A2%E9%80%A3%E8%A8%98%E4%BA%8B"><i class="fa fa-link"></i></a>その他、BLE関連記事</h1>

<ul>
<li><a href="http://d.hatena.ne.jp/shu223/20140110/1389292125" rel="nofollow noopener" target="_blank">iOSのCore Bluetooth / BLEの通信速度</a></li>
<li><a href="http://d.hatena.ne.jp/shu223/20140128/1391063947" rel="nofollow noopener" target="_blank">Bluetooth 4.0 および Bluetooth Low Energy (BLE) に関する技術情報のまとめ</a></li>
<li><a href="http://d.hatena.ne.jp/shu223/20140129/1391035286" rel="nofollow noopener" target="_blank">Bluetooth Low Energy (BLE) のサービス／キャラクタリクスの構成例一覧</a></li>
<li><a href="http://d.hatena.ne.jp/shu223/20140130/1391033579" rel="nofollow noopener" target="_blank">Core Bluetooth / BLEで音声データをやりとりする</a></li>
</ul>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>shu223さんの<br />59位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>20</kbd>
		<a target="_blank" href="https://qiita.com/shu223/items/42777edd1402c7ef5407">Web コンテンツ内にネイティブ iOS アプリを埋め込めるサービス『app.io』の使い方</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-08-17 07:55:28</center>
	</td>
	<td style="width:200px;">
		@shu223<br />(Freelancer 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/3180/profile-images/1473682733">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Objective-C]</b> <b>[iPhone]</b> <b>[Xcode]</b> <b>[iOS]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>app.io は、『ブラウザ内でネイティブ iOS アプリを動かせるようにする』サービスです。</p>

<p><a href="https://camo.qiitausercontent.com/c2eda9556d4483fbcd49cd6189226d615c4d4497/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f333138302f32353532343138392d346531612d386435612d303061312d3766363862613231373261662e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/c2eda9556d4483fbcd49cd6189226d615c4d4497/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f333138302f32353532343138392d346531612d386435612d303061312d3766363862613231373261662e706e67" alt="01_top_r1_c1.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/3180/25524189-4e1a-8d5a-00a1-7f68ba2172af.png"></a></p>

<p>イメージとしては <strong>iOSシミュレータをそのままWebコンテンツに埋め込める</strong> と考えるとわかりやすいかもしれません。タップ等のインタラクションが効いて、もちろん通信もします。アプリのランディングページや、ブログの紹介記事に埋め込んだりすると良さそうです。</p>

<p>で、「導入にはさぞ複雑な手順が。。」と思いきや、実際にアプリを動作させるまでの手順はめちゃくちゃ簡単です。 <strong>ファイルを1つアップするだけ。</strong> 以下で具体的に説明します。</p>

<h2>
<span id="使い方" class="fragment"></span><a href="#%E4%BD%BF%E3%81%84%E6%96%B9"><i class="fa fa-link"></i></a>使い方</h2>

<h4>
<span id="1-アプリをビルド" class="fragment"></span><a href="#1-%E3%82%A2%E3%83%97%E3%83%AA%E3%82%92%E3%83%93%E3%83%AB%E3%83%89"><i class="fa fa-link"></i></a>1. アプリをビルド</h4>

<p>いつもの普通のビルドです。Xcode でターゲットとして <strong>「シミュレータ」を選択</strong> し、ビルドします。</p>

<h4>
<span id="2-appファイルをアップロード" class="fragment"></span><a href="#2-app%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%82%92%E3%82%A2%E3%83%83%E3%83%97%E3%83%AD%E3%83%BC%E3%83%89"><i class="fa fa-link"></i></a>2. .appファイルをアップロード</h4>

<p>"Upload Your App" から、</p>

<p><a href="https://camo.qiitausercontent.com/1e1ab07f453dd4e553db56ded2b3dba621d2804a/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f333138302f33393936613435342d336233342d326636332d653032342d6335656663373737303234372e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/1e1ab07f453dd4e553db56ded2b3dba621d2804a/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f333138302f33393936613435342d336233342d326636332d653032342d6335656663373737303234372e706e67" alt="02_howto1_.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/3180/3996a454-3b34-2f63-e024-c5efc7770247.png"></a></p>

<p>下記パスにある .app ファイルを <strong>zip で固めて</strong> アップロードします。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>~/Library/Developer/Xcode/DerivedData/{アプリ名}/Build/Products/Debug-iphonesimulator/
</pre></div></div>

<p>以上！</p>

<h2>
<span id="webコンテンツに埋め込む" class="fragment"></span><a href="#web%E3%82%B3%E3%83%B3%E3%83%86%E3%83%B3%E3%83%84%E3%81%AB%E5%9F%8B%E3%82%81%E8%BE%BC%E3%82%80"><i class="fa fa-link"></i></a>Webコンテンツに埋め込む</h2>

<p>左側のメニューにある "Embed" を選択すると、iFrame を使った埋め込みコードが生成されます。</p>

<p><a href="https://camo.qiitausercontent.com/0d88a4aa8275af5e13cc66612de30398472a7374/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f333138302f32303131653563652d653935662d663536662d383039322d6531323034613865323139342e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/0d88a4aa8275af5e13cc66612de30398472a7374/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f333138302f32303131653563652d653935662d663536662d383039322d6531323034613865323139342e706e67" alt="03_embed.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/3180/2011e5ce-e95f-f56f-8092-e1204a8e2194.png"></a></p>

<p>アプリの向きも選択できます。</p>

<p>ちなみにこんなコード。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>&lt;iframe src="https://app.io/XXXX?orientation=portrait&amp;device=iphone5" height="607px" width="291px" frameborder="0" allowtransparency="true" scrolling="no"&gt;&lt;/iframe&gt;
</pre></div></div>

<h2>
<span id="しくみ憶測" class="fragment"></span><a href="#%E3%81%97%E3%81%8F%E3%81%BF%E6%86%B6%E6%B8%AC"><i class="fa fa-link"></i></a>しくみ（憶測）</h2>

<p>実際に試してみて、</p>

<ul>
<li>アップするファイル（パッケージ）は .app だけ</li>
<li>ブラウザに表示される初期画面はアプリ固有のものではなく、タップするとロードが始まり、アプリが起動する</li>
<li>画質が低い</li>
</ul>

<p>といった挙動を鑑みるに、 <strong>.app を app.io のサーバ側にあるiOSシミュレータ上で動作させ、画面の情報を一定フレームレートでブラウザ側に送る</strong> というしくみになっていると思われます。</p>

<h2>
<span id="弱点" class="fragment"></span><a href="#%E5%BC%B1%E7%82%B9"><i class="fa fa-link"></i></a>弱点</h2>

<p>使ってみて気付いた中で最大の弱点は、</p>

<p><strong>『設定』アプリにアクセスできない</strong></p>

<p>という点です。ホームボタンを押すとアプリが終了するだけで、ホーム画面等にはアクセスできません。</p>

<p>そんなわけで、Social.framework, Accounts.framework を使用して Facebook や Twitter と連携するアプリ等、『設定』での設定が前提となるアプリには不向きです。</p>

<h2>
<span id="無料でできること" class="fragment"></span><a href="#%E7%84%A1%E6%96%99%E3%81%A7%E3%81%A7%E3%81%8D%E3%82%8B%E3%81%93%E3%81%A8"><i class="fa fa-link"></i></a>無料でできること</h2>

<p>無料ユーザーは、登録アプリは1つだけ、5000Play／月、シェアと埋め込みが可能です。</p>

<p><a href="https://camo.qiitausercontent.com/5096f434e9f8af7604b7f692870793bb9286d410/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f333138302f61613765386539352d306461372d663463342d333332352d3663663137636631366132632e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/5096f434e9f8af7604b7f692870793bb9286d410/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f333138302f61613765386539352d306461372d663463342d333332352d3663663137636631366132632e706e67" alt="04_price_.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/3180/aa7e8e95-0da7-f4c4-3325-6cf17cf16a2c.png"></a></p>

<p>ちゃんと売りたいアプリのデモとして考えると、1ヶ月に5000回しかplayしてもらえないのは少ないような、でもPVじゃなくて動画の再生回数とかの水準で考えると（※）まずはこれぐらいでも良さそうな、微妙なラインですが、とにかく試すだけなら無料で十分かと思います。</p>

<p>（※）埋め込んだページを表示しただけではアプリの起動は開始されないので、PV = play回数ではない</p>

<h2>
<span id="xcode-プラグイン" class="fragment"></span><a href="#xcode-%E3%83%97%E3%83%A9%E3%82%B0%E3%82%A4%E3%83%B3"><i class="fa fa-link"></i></a>Xcode プラグイン</h2>

<p>app.io は Xcode のプラグインも提供しています。</p>

<p><a href="https://camo.qiitausercontent.com/428af7f40f1acc1416a0e79b5cedd2cf917bfbed/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f333138302f30303831303731332d353137302d623665392d336232322d6538303435643632613038632e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/428af7f40f1acc1416a0e79b5cedd2cf917bfbed/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f333138302f30303831303731332d353137302d623665392d336232322d6538303435643632613038632e706e67" alt="05_plugin_.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/3180/00810713-5170-b6e9-3b22-e8045d62a08c.png"></a></p>

<p>.app をアップするだけ、という使い方があまりにも簡単だったのでプラグインの方は試してないのですが、 上記画像から、Xcode に app.io にアップロードするメニューが加わる、というもののようです。</p>

<p><strong>サービスを使いやすくするための補助ツールとしてオフィシャルに Xcode プラグインを提供する</strong> というのはあまり他サービスで見たことがなかったのでおもしろいと思いました。</p>

<h2>
<span id="アプリにパラメータを渡す" class="fragment"></span><a href="#%E3%82%A2%E3%83%97%E3%83%AA%E3%81%AB%E3%83%91%E3%83%A9%E3%83%A1%E3%83%BC%E3%82%BF%E3%82%92%E6%B8%A1%E3%81%99"><i class="fa fa-link"></i></a>アプリにパラメータを渡す</h2>

<p>生成したアプリのURLにパラメータを渡すことで、 <strong>ローカライズ</strong> 、 <strong>位置情報の指定</strong>  、  <strong>NSUserDefaults に値を渡す</strong> 、といったことも可能です。</p>

<p><a href="http://docs.app.io/parameters/" class="autolink" rel="nofollow noopener" target="_blank">http://docs.app.io/parameters/</a></p>

<h3>
<span id="ローカライズ" class="fragment"></span><a href="#%E3%83%AD%E3%83%BC%E3%82%AB%E3%83%A9%E3%82%A4%E3%82%BA"><i class="fa fa-link"></i></a>ローカライズ</h3>

<blockquote>
<p>The <code>language</code> parameter lets you specify a ISO-639-1 language code for your app, if it has been localized. Defaults to <code>en</code>. For more information on language codes and what they correspond to, please see this <a href="http://en.wikipedia.org/wiki/List_of_ISO_639-1_codes" rel="nofollow noopener" target="_blank">Wikipedia entry</a>.</p>

<p><strong>Options</strong>: <code>en</code>, <code>fr</code>, <code>de</code>, <code>ja</code>, <code>nl</code>, <code>it</code>, <code>es</code>, <code>pt</code>, <code>pt-PT</code>, <code>da</code>, <code>fi</code>, <code>nb</code>, <code>sv</code>, <code>ko</code>, <code>zh-Hans</code>, <code>zh-Hant</code>, <code>ru</code>, <code>pl</code>, <code>tr</code>, <code>uk</code>, <code>ar</code>, <code>hr</code>, <code>cs</code>, <code>el</code>, <code>he</code>, <code>ro</code>, <code>sk</code>, <code>th</code>, <code>id</code>, <code>ms</code>, <code>en-GB,</code> <code>ca</code>, <code>hu</code>, <code>vi</code></p>

<p><strong>Example Usage</strong>: <code>https://app.io/example?language=ja</code></p>

<p></p>
</blockquote>

<h3>
<span id="位置情報の指定" class="fragment"></span><a href="#%E4%BD%8D%E7%BD%AE%E6%83%85%E5%A0%B1%E3%81%AE%E6%8C%87%E5%AE%9A"><i class="fa fa-link"></i></a>位置情報の指定</h3>

<blockquote>
<p>The <code>location</code> parameter lets you specify the latitude and longitude provided to the app for geolocation purposes. Specify latitude and longitude in decimal format as a comma-separated string. Defaults to <code>37.7859,-122.406509</code>.</p>

<p><strong>Example Usage</strong>: <code>https://app.io/example?location=37.82,144.9832</code></p>
</blockquote>

<h3>
<span id="nsuserdefaults-に値を渡す" class="fragment"></span><a href="#nsuserdefaults-%E3%81%AB%E5%80%A4%E3%82%92%E6%B8%A1%E3%81%99"><i class="fa fa-link"></i></a>NSUserDefaults に値を渡す</h3>

<blockquote>
<p>The <code>params</code> parameter lets you specify a JSON dictionary of key/value information to be provided to the app in the form of user defaults. These values will be loaded into <code>NSUserDefaults</code> on app launch and will be available for use by calling <code>[[NSUserDefaults standardUserDefaults] objectForKey:key]</code> in your app. This is particularly useful for tracking App.io sessions with analytics libraries, or automatically logging in users and loading content. For more information on <code>NSUserDefaults</code>, see the <a href="http://developer.apple.com/library/ios/#documentation/cocoa/reference/foundation/Classes/NSUserDefaults_Class/Reference/Reference.html" rel="nofollow noopener" target="_blank">documentation</a>.</p>

<p><strong>Important</strong>: This parameter must be specified as a URI-encoded JSON string. This is commonly done using the JavaScript <code>encodeURIComponent</code> function. This <a href="http://jsfiddle.net/C9ASj/2/" rel="nofollow noopener" target="_blank">JSFiddle</a> can help you format your JSON correctly.</p>

<p><strong>Options</strong>: A URI-encoded JSON dictionary.</p>

<p><strong>Example Usage</strong>: <code>https://app.io/example?params=%7B"foo"%3A"bar"%7D</code></p>
</blockquote>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>shu223さんの<br />60位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>19</kbd>
		<a target="_blank" href="https://qiita.com/shu223/items/c1b9a3a0cbeab3961a97">PerfumeのモーションキャプチャデータをiOSアプリ内で動かす手順</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2014-02-17 15:58:52</center>
	</td>
	<td style="width:200px;">
		@shu223<br />(Freelancer 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/3180/profile-images/1473682733">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Objective-C]</b> <b>[iPhone]</b> <b>[Xcode]</b> <b>[iOS]</b> <b>[openFrameworks]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p><a href="http://www.itmedia.co.jp/news/articles/1203/30/news042.html" rel="nofollow noopener" target="_blank">約1年半前に公開</a>された、例のPerfumeのモーションキャプチャデータを iOS アプリで動かす手順です。</p>

<p>データと一緒に oF のサンプルアプリが既に公開されてるので、それをiOSで動くように改修しつつ、 <b>どんな実装になってるのかざっと把握する</b> という感じで見ていきます。</p>

<p>（完成品のスクショ）</p>

<p><a href="https://camo.qiitausercontent.com/517ba265727baa21d36bb82ba9ce7f1f08495488/687474703a2f2f662e636c2e6c792f6974656d732f3063326b3379326f304333533258316f325333462f70657266756d652e6a7067" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/517ba265727baa21d36bb82ba9ce7f1f08495488/687474703a2f2f662e636c2e6c792f6974656d732f3063326b3379326f304333533258316f325333462f70657266756d652e6a7067" data-canonical-src="http://f.cl.ly/items/0c2k3y2o0C3S2X1o2S3F/perfume.jpg"></a></p>

<h2>
<span id="モーションキャプチャデータとサンプルをダウンロード" class="fragment"></span><a href="#%E3%83%A2%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E3%82%AD%E3%83%A3%E3%83%97%E3%83%81%E3%83%A3%E3%83%87%E3%83%BC%E3%82%BF%E3%81%A8%E3%82%B5%E3%83%B3%E3%83%97%E3%83%AB%E3%82%92%E3%83%80%E3%82%A6%E3%83%B3%E3%83%AD%E3%83%BC%E3%83%89"><i class="fa fa-link"></i></a>モーションキャプチャデータとサンプルをダウンロード</h2>

<p>モーションキャプチャデータは <a href="http://perfume-global.com/visualization.html" rel="nofollow noopener" target="_blank">ここ</a> から、oFサンプルは <a href="https://github.com/perfume-dev/example-openFrameworks" rel="nofollow noopener" target="_blank">ここ</a> からダウンロードできます。</p>

<h2>
<span id="サンプルアプリのビルド" class="fragment"></span><a href="#%E3%82%B5%E3%83%B3%E3%83%97%E3%83%AB%E3%82%A2%E3%83%97%E3%83%AA%E3%81%AE%E3%83%93%E3%83%AB%E3%83%89"><i class="fa fa-link"></i></a>サンプルアプリのビルド</h2>

<p>適当なサンプルプロジェクトを開いて、Base SDKをlatestに変更したのちビルドしてみると、 <strong>'tr1/memory' file not found</strong> エラーが出る。</p>

<p>で、 [header search path] に</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>/usr/local/Cellar/boost/1.49.0/include
</pre></div></div>

<p>をrecursiveで追加してみると、さらにコアっぽいところからのエラーが大量に湧き出してくる。</p>

<p>何となくこっちに突っ込んでいくと時間を不毛に浪費してしまう気がしたので、方針変更、emptyExampleから自分でサンプルアプリを構築することにしました。</p>

<h2>
<span id="サンプルアプリをつくり直す" class="fragment"></span><a href="#%E3%82%B5%E3%83%B3%E3%83%97%E3%83%AB%E3%82%A2%E3%83%97%E3%83%AA%E3%82%92%E3%81%A4%E3%81%8F%E3%82%8A%E7%9B%B4%E3%81%99"><i class="fa fa-link"></i></a>サンプルアプリをつくり直す</h2>

<p>emptyExampleからのつくりなおす手順です。せっかくなので、iOS向けにつくります。</p>

<h3>
<span id="1-ofxbvhアドオンの導入" class="fragment"></span><a href="#1-ofxbvh%E3%82%A2%E3%83%89%E3%82%AA%E3%83%B3%E3%81%AE%E5%B0%8E%E5%85%A5"><i class="fa fa-link"></i></a>1. ofxBvhアドオンの導入</h3>

<ul>
<li>ofxBvhフォルダをaddons配下にコピーする</li>
<li>ofxBvhをプロジェクトのaddonsグループに追加する</li>
<li>ダウンロードしてきた３つのbvhファイルをプロジェクトに追加する</li>
</ul>

<h3>
<span id="2-testapph" class="fragment"></span><a href="#2-testapph"><i class="fa fa-link"></i></a>2. testApp.h</h3>

<ul>
<li>ofxBvhのヘッダをinclude</li>
</ul>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>#include "ofxBvh.h"
</pre></div></div>

<ul>
<li>メンバ変数追加</li>
</ul>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>vector&lt;ofxBvh&gt; bvh;
ofEasyCam cam;
</pre></div></div>

<h3>
<span id="3-testappmm" class="fragment"></span><a href="#3-testappmm"><i class="fa fa-link"></i></a>3. testApp.mm</h3>

<p>もとのexample-bvhからコピーします。そんなに長くないので、すぐコピーできるはず。 <strong>bvh[x].load("xxxx.bvh")のところだけ、ファイル名に合わせて変更</strong> します。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>void testApp::setup(){  

    ofSetFrameRate(60);
    ofSetVerticalSync(true);

    ofBackground(0);

    bvh.resize(3);

    // setup bvh
    bvh[0].load("aachan.bvh");
    bvh[1].load("kashiyuka.bvh");
    bvh[2].load("nocchi.bvh");

    for (int i = 0; i &lt; bvh.size(); i++)
    {
        bvh[i].play();
        bvh[i].setLoop(true);
    }
}

void testApp::update(){

    for (int i = 0; i &lt; bvh.size(); i++)
    {
        bvh[i].update();
    }
}

void testApp::draw(){

    glEnable(GL_DEPTH_TEST);

    ofEnableBlendMode(OF_BLENDMODE_ALPHA);

    cam.begin();

    for (int i = 0; i &lt; bvh.size(); i++)
    {
        bvh[i].draw();
    }

    cam.end();
}
</pre></div></div>

<h2>
<span id="完成品動画" class="fragment"></span><a href="#%E5%AE%8C%E6%88%90%E5%93%81%E5%8B%95%E7%94%BB"><i class="fa fa-link"></i></a>完成品（動画）</h2>

<p></p><p><a href="http://vimeo.com/81777832" rel="nofollow noopener" target="_blank">vimeoで見る</a></p>

<h2>
<span id="知ったこと気付いたことのメモ" class="fragment"></span><a href="#%E7%9F%A5%E3%81%A3%E3%81%9F%E3%81%93%E3%81%A8%E6%B0%97%E4%BB%98%E3%81%84%E3%81%9F%E3%81%93%E3%81%A8%E3%81%AE%E3%83%A1%E3%83%A2"><i class="fa fa-link"></i></a>知ったこと／気付いたことのメモ</h2>

<h3>
<span id="bvhファイル" class="fragment"></span><a href="#bvh%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB"><i class="fa fa-link"></i></a>BVHファイル</h3>

<p>モーションキャプチャデータのフォーマットの一種らしい。</p>

<blockquote>
<p>BVH ファイル形式とは，Biovision 社が提唱したモーションキャプチャデータファイルフォーマットです．現在，Alias Motion Builder をはじめ，3ds MAX の Character studio，Poser などの様々な商用3Dキャラクタアニメーションソフトでもサポートされています．BVH ファイルの特徴を以下にまとめます．</p>

<p>テキスト形式で記述</p>

<ul>
<li>座標系は右手系．XYZ 各軸の扱い（どの軸が鉛直方向に対応するか等）は任意．</li>
<li>関節ノードに関する情報を記述．</li>
<li>関節回転はオイラー角形式で記述．</li>
<li>回転角度の単位は Degree</li>
<li>キャラクタのスケルトン階層構造を記述するHIERARCHY部と，動作データを記述するMOTION部の2つから構成</li>
</ul>
</blockquote>

<p><a href="http://www.tmps.org/?MOCAP%A5%C7%A1%BC%A5%BF%A5%D5%A5%A1%A5%A4%A5%EB#daa83dc1" rel="nofollow noopener" target="_blank">参考記事</a></p>

<h3>
<span id="ofbvh" class="fragment"></span><a href="#ofbvh"><i class="fa fa-link"></i></a>ofBvh</h3>

<ul>
<li>loadメソッド内で呼んでいる ofToDataPath なるメソッドがとってくるパスをデバッガで追ってみると、MacOSだと ../../../data で、iOSだとバンドル直下だった</li>
<li>bvhを解釈して、再生するところまでこれでやってくれてるっぽい</li>
<li>他のアドオンやライブラリにも依存してなくて、ソースも500行程度</li>
</ul>

<h3>
<span id="ofeasycam" class="fragment"></span><a href="#ofeasycam"><i class="fa fa-link"></i></a>ofEasyCam</h3>

<p>初めて知ったのでどういうものなのか今度調べてみる。</p>

<h2>
<span id="参考にした記事" class="fragment"></span><a href="#%E5%8F%82%E8%80%83%E3%81%AB%E3%81%97%E3%81%9F%E8%A8%98%E4%BA%8B"><i class="fa fa-link"></i></a>参考にした記事</h2>

<ul>
<li><a href="http://www.atmarkit.co.jp/ait/articles/1204/03/news125.html" rel="nofollow noopener" target="_blank">PerfumeのモーションデータをiPhoneアプリにして動かしてみた</a></li>
</ul>

<h2>
<span id="関連" class="fragment"></span><a href="#%E9%96%A2%E9%80%A3"><i class="fa fa-link"></i></a>関連</h2>

<ul>
<li><a href="http://qiita.com/advent-calendar/2013/of">openFrameworksアドベントカレンダー</a></li>
</ul>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>shu223さんの<br />61位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>16</kbd>
		<a target="_blank" href="https://qiita.com/shu223/items/46fd422ad34ba2d44891">プッシュ通知のカスタム警告音で使用できるオーディオデータフォーマット</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2014-02-24 11:57:04</center>
	</td>
	<td style="width:200px;">
		@shu223<br />(Freelancer 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/3180/profile-images/1473682733">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Objective-C]</b> <b>[Xcode]</b> <b>[iOS]</b> <b>[Swift]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>Remote / Loca Push Notification で使用できる通知音（警告音）のオーディオデータフォーマットについてのメモ。</p>

<h2>
<span id="オーディオデータフォーマット" class="fragment"></span><a href="#%E3%82%AA%E3%83%BC%E3%83%87%E3%82%A3%E3%82%AA%E3%83%87%E3%83%BC%E3%82%BF%E3%83%95%E3%82%A9%E3%83%BC%E3%83%9E%E3%83%83%E3%83%88"><i class="fa fa-link"></i></a>オーディオデータフォーマット</h2>

<p>iOSのシステムサウンド機能によって再生されるため、次のいずれかのオーディオデータフォーマットでなければならない。</p>

<ul>
<li>リニアPCM</li>
<li>MA4（IMA/ADPCM）</li>
<li>µLaw</li>
<li>aLaw</li>
</ul>

<p>このオーディオデータはaiff、wav、またはcafファイルとして保存できる。</p>

<h2>
<span id="再生時間" class="fragment"></span><a href="#%E5%86%8D%E7%94%9F%E6%99%82%E9%96%93"><i class="fa fa-link"></i></a>再生時間</h2>

<ul>
<li><strong>30秒未満</strong></li>
<li>カスタムのサウンドがこの制限を超える場合、代わりにデフォルトのシステムサウンドが再生される</li>
</ul>

<h2>
<span id="情報ソース" class="fragment"></span><a href="#%E6%83%85%E5%A0%B1%E3%82%BD%E3%83%BC%E3%82%B9"><i class="fa fa-link"></i></a>情報ソース</h2>

<p><a href="https://developer.apple.com/jp/devcenter/ios/library/documentation/RemoteNotificationsPG.pdf" rel="nofollow noopener" target="_blank">Local および Push Notification プログラミングガイド</a> </p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>shu223さんの<br />62位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>15</kbd>
		<a target="_blank" href="https://qiita.com/shu223/items/b766b7f68c3c7626384e">静的アナライザによる解析を特定のファイルで無効にする</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-03-22 09:05:03</center>
	</td>
	<td style="width:200px;">
		@shu223<br />(Freelancer 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/3180/profile-images/1473682733">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Objective-C]</b> <b>[Xcode]</b> <b>[iOS]</b> <b>[clang]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>Xcodeのビルド設定で "Run Static Analyzer" を有効にしていると、ビルド時に静的アナライザが走ってコードの怪しい箇所を指摘してくれます。非常に助かりますが、サードパーティ製ライブラリを使用していてコードに手を入れたくないクラスや、既に問題がないことを確認済みの箇所等、静的解析が不要な場合もあります。</p>

<p><a href="https://camo.qiitausercontent.com/8931ef4693b0fe4b515b49136ceec5535388ec7f/687474703a2f2f662e636c2e6c792f6974656d732f3233306d303032423270316d326b325a326f30642f44697361626c65537461746963416e616c797a6572315f72315f63312e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/8931ef4693b0fe4b515b49136ceec5535388ec7f/687474703a2f2f662e636c2e6c792f6974656d732f3233306d303032423270316d326b325a326f30642f44697361626c65537461746963416e616c797a6572315f72315f63312e706e67" alt="cocos2dのクラスでwarning" data-canonical-src="http://f.cl.ly/items/230m002B2p1m2k2Z2o0d/DisableStaticAnalyzer1_r1_c1.png"></a></p>

<p>次の方法で、<strong>ファイル毎に静的アナライザを無効にする</strong>（そのファイルについてのwarningが出ないようにする）ことができます。</p>

<ol>
<li>プロジェクト設定画面のBuild Phasesタブを開く</li>
<li>静的解析を無効にしたいファイルを選択してリターンキー押下</li>
<li>コンパイラフラグを追加</li>
</ol>

<p>"-Xanalyzer -analyzer-disable-checker" というコンパイラフラグを追加します。</p>

<p><a href="https://camo.qiitausercontent.com/98b4b960d0d762ae8904837cd77e0bb685957d77/687474703a2f2f662e636c2e6c792f6974656d732f335a30323137315a3031304530753352304134322f44697361626c65537461746963416e616c797a6572322e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/98b4b960d0d762ae8904837cd77e0bb685957d77/687474703a2f2f662e636c2e6c792f6974656d732f335a30323137315a3031304530753352304134322f44697361626c65537461746963416e616c797a6572322e706e67" alt="コンパイラフラグの追加" data-canonical-src="http://f.cl.ly/items/3Z02171Z010E0u3R0A42/DisableStaticAnalyzer2.png"></a></p>

<p>複数ファイルを一括で無効にしたい場合は、まとめて選択した状態でリターンキーを押してコンパイラフラグを編集します。</p>

<h2>
<span id="参考" class="fragment"></span><a href="#%E5%8F%82%E8%80%83"><i class="fa fa-link"></i></a>参考</h2>

<ul>
<li><a href="https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/clang.1.html" rel="nofollow noopener" target="_blank">Clang Tools Documentation</a></li>
<li><a href="http://clang.llvm.org/docs/UsersManual.html#diagnostics_pragmas" rel="nofollow noopener" target="_blank">Clang Compiler User’s Manual</a></li>
</ul>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>shu223さんの<br />63位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>15</kbd>
		<a target="_blank" href="https://qiita.com/shu223/items/1414ca2bd77d49f8ac21">クラッシュイベントを受け取り Stack Trace を出力する</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2012-03-16 08:19:53</center>
	</td>
	<td style="width:200px;">
		@shu223<br />(Freelancer 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/3180/profile-images/1473682733">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Objective-C]</b> <b>[iPhone]</b> <b>[iPad]</b> <b>[iOS]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>クラッシュイベントを受け取って何かしたい場合は、 NSSetUncaughtExceptionHandler() にハンドラ関数のポインタを渡すだけ。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>NSSetUncaughtExceptionHandler(&amp;exceptionHandler);
</pre></div></div>

<p>例外発生時に実行するハンドラ関数は、こんな感じで実装します。<br>
（下記サンプルでは、スタックトレース結果をログ出力しています）</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>void exceptionHandler(NSException *exception)
{
    NSString *trace = [[exception callStackReturnAddresses] componentsJoinedByString:@"\n"];
    NSLog(@"Stack: (\n%@\n)", trace);
}
</pre></div></div>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>shu223さんの<br />64位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>14</kbd>
		<a target="_blank" href="https://qiita.com/shu223/items/b59fe53e2d308a121edd">オブジェクトが持つプロパティの型と名前のリストを取得する</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2012-02-26 13:49:44</center>
	</td>
	<td style="width:200px;">
		@shu223<br />(Freelancer 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/3180/profile-images/1473682733">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Objective-C]</b> <b>[iPhone]</b> <b>[iPad]</b> <b>[iOS]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>Objective-C のランタイムを利用して、クラス／オブジェクトが持つプロパティ情報を取得する方法です。</p>

<p>ランタイムのヘッダをインポートして、</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>#import "objc/runtime.h"
</pre></div></div>

<p>まず、objc_property_t 型のプロパティ情報から型名を取り出すメソッドを実装します。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>static const char * getPropertyType(objc_property_t property) {
    const char *attributes = property_getAttributes(property);
    char buffer[1 + strlen(attributes)];
    strcpy(buffer, attributes);
    char *state = buffer, *attribute;
    while ((attribute = strsep(&amp;state, ",")) != NULL) {
        if (attribute[0] == 'T' &amp;&amp; attribute[1] != '@') {
            return (const char *)[[NSData dataWithBytes:(attribute + 1) length:strlen(attribute) - 1] bytes];
        }        
        else if (attribute[0] == 'T' &amp;&amp; attribute[1] == '@' &amp;&amp; strlen(attribute) == 2) {
            return "id";
        }
        else if (attribute[0] == 'T' &amp;&amp; attribute[1] == '@') {
            return (const char *)[[NSData dataWithBytes:(attribute + 3) length:strlen(attribute) - 4] bytes];
        }
    }
    return "";
}
</pre></div></div>

<p>で、下記のように、キーとしてプロパティ名、値として型名を持つ NSDictionary 型でプロパティ一覧を返すメソッドを実装できます。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>- (NSDictionary *)properties {
    unsigned int outCount, i;
    objc_property_t *props = class_copyPropertyList([self class], &amp;outCount);
    NSMutableDictionary *dic = [NSMutableDictionary dictionaryWithCapacity:0];
    for(i = 0; i &lt; outCount; i++) {
        objc_property_t property = props[i];
        const char *propName = property_getName(property);
        if(propName) {
            const char *propType = getPropertyType(property);
            NSString *propertyName = [NSString stringWithCString:propName];
            NSString *propertyType = [NSString stringWithCString:propType];
            [dic setObject:propertyType forKey:propertyName];
        }
    }
    free(props);

    return dic;
}
</pre></div></div>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>shu223さんの<br />65位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>11</kbd>
		<a target="_blank" href="https://qiita.com/shu223/items/489b1b9193dc1b53308b">浮動小数点数の乱数を生成する</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2012-12-21 12:07:29</center>
	</td>
	<td style="width:200px;">
		@shu223<br />(Freelancer 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/3180/profile-images/1473682733">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Objective-C]</b> <b>[iPhone]</b> <b>[iOS]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>#define ARC4RANDOM_MAX      0x100000000
</pre></div></div>

<p>を定義しておいて、</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>float randFloat(float a, float b)
{
    return ((b-a)*((float)arc4random()/ARC4RANDOM_MAX))+a;
}
</pre></div></div>

<p>これで <code>randFloat(0.0, 6.28);</code> みたいな感じで、 a から b の範囲の浮動小数点乱数を生成できます。</p>

<p><code>arc4random()</code> の結果を <code>RAND_MAX</code> ではなく<code>ARC4RANDOM_MAX</code>で割るのがポイント。</p>
</div>
	</td>
</tr>
</table>
<br />
	</body>
</html>
