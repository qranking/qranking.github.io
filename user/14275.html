<html>
	<head><!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-110075493-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-110075493-1');
</script>
<!-- Google AdSense -->
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-6168511236629369",
    enable_page_level_ads: true
  });
</script>

		<meta charset="UTF-8" />
		<title>Qiita Ranking (tomoyamachi)</title>
		<link rel="stylesheet" type="text/css" href="../qranking.css">
	</head>
	<body>
<div class="headerContainer">
<h1>Qiitaいいね数ランキング (tomoyamachi さんの投稿分)</h1>
</div><!--class="headerContainer"-->
<p><a href="#" onclick="javascript:window.history.back(-1);return false;">[戻る]</a></p>
<p><i><img width="16" height="16" src="../thumb-up-120px.png" /></i>が同じ値の場合は投稿日時の新しいものが上位としています。</p>
<p><i><img width="16" height="16" src="../thumb-up-120px.png" /></i>がついていない記事は表示していません。</p>
<table border="1">
<tr>
	<td rowspan="3"><center>tomoyamachiさんの<br />1位</center></td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>109</kbd>
		<a target="_blank" href="https://qiita.com/tomoyamachi/items/b398f35882fb57b975ad">2017年のJavaScript開発で知っておきたい用語集/リンク集</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2017-10-31 07:54:26</center>
	</td>
	<td style="width:200px;">
		@tomoyamachi<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/14275/profile-images/1473683263">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[JavaScript]</b> <b>[初心者]</b> <b>[フロントエンド]</b> <b>[React]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>JavaScriptを本格的に学ばねばならぬときがきたので、よく知らなかった用語を調べた。<br>
基本的に大項目のリンク先は公式ページ。参考記事は詳細に別途リンクを貼る。<br>
HOTなツールを知りたいときは<a href="https://risingstars2016.js.org/" rel="nofollow noopener" target="_blank">2016 JavaScript Rising Stars</a>を見るとよさそう。</p>

<h1>
<span id="更新履歴" class="fragment"></span><a href="#%E6%9B%B4%E6%96%B0%E5%B1%A5%E6%AD%B4"><i class="fa fa-link"></i></a>更新履歴</h1>

<ul>
<li>2017/10/31 11:00 : <a href="%E3%81%9D%E3%81%AE%E4%BB%96%E3%83%A9%E3%82%A4%E3%83%96%E3%83%A9%E3%83%AA">その他ライブラリ</a>の項を追加</li>
<li>2017/10/31 12:00 : ECMAScriptの説明を大幅に修正</li>
<li>2017/10/31 23:00 : <a href="#css%E9%96%A2%E9%80%A3%E3%81%AEloader">CSS関連のLoader</a>, <a href="#%E9%96%8B%E7%99%BA%E3%81%AB%E4%BE%BF%E5%88%A9%E3%81%AA%E3%83%A9%E3%82%A4%E3%83%96%E3%83%A9%E3%83%AA">開発に便利なライブラリ</a>を追加</li>
</ul>

<h1>
<span id="基本用語" class="fragment"></span><a href="#%E5%9F%BA%E6%9C%AC%E7%94%A8%E8%AA%9E"><i class="fa fa-link"></i></a>基本用語</h1>

<h2>
<span id="nodejs" class="fragment"></span><a href="#nodejs"><i class="fa fa-link"></i></a><a href="https://nodejs.org/en/" rel="nofollow noopener" target="_blank">Node.js</a>
</h2>

<ul>
<li>ネットワークアプリケーションを作成するためのJavaScript実行環境</li>
<li>非同期型のイベント駆動</li>
</ul>

<h2>
<span id="nvm-node-version-manager" class="fragment"></span><a href="#nvm-node-version-manager"><i class="fa fa-link"></i></a><a href="https://github.com/creationix/nvm" rel="nofollow noopener" target="_blank">nvm (Node Version Manager)</a>
</h2>

<ul>
<li>Node.jsのバージョン管理システム</li>
</ul>

<h2>
<span id="v8-google-v8-javascript-engine" class="fragment"></span><a href="#v8-google-v8-javascript-engine"><i class="fa fa-link"></i></a><a href="https://developers.google.com/v8/" rel="nofollow noopener" target="_blank">V8 (Google V8 JavaScript Engine)</a>
</h2>

<ul>
<li>Googleが開発しているJavaScriptエンジン</li>
<li>C++ベースでGoogle Chromeやnode.jsに使われている</li>
</ul>

<h2>
<span id="ecmascriptes" class="fragment"></span><a href="#ecmascriptes"><i class="fa fa-link"></i></a><a href="http://www.ecmascript.org/" rel="nofollow noopener" target="_blank">ECMAScript(ES)</a>
</h2>

<ul>
<li>JavaScriptの標準言語仕様</li>
<li>最新はECMAScript® 2017(ECMA-262 8th edition) <del>ES8</del>
</li>
<li><del>バージョンは発表された西暦を使う場合と、発表ごとの連番を使う場合がある</del></li>
<li>
<del>ES2015以降はサポートしていないブラウザが多い</del> <sup id="fnref1"><a href="#fn1" rel="footnote" title="@erukiti さんのご指摘により大幅に修正">1</a></sup>
</li>
<li>ブラウザへの対応状況は<a href="http://kangax.github.io/compat-table/es6/" rel="nofollow noopener" target="_blank">ここで確認できる</a>
</li>
<li>「エクマスクリプト」と読む</li>
</ul>

<h2>
<span id="commonjs" class="fragment"></span><a href="#commonjs"><i class="fa fa-link"></i></a><a href="http://www.commonjs.org/" rel="nofollow noopener" target="_blank">CommonJS</a>
</h2>

<ul>
<li>ウェブブラウザ環境外におけるJavaScriptの各種仕様を定めることを目標としたプロジェクト - <a href="https://ja.wikipedia.org/wiki/CommonJS" rel="nofollow noopener" target="_blank">wikipedia</a>
</li>
<li>さまざまなツールの基盤になってはいるが、いまの重要度は低そう</li>
</ul>

<h2>
<span id="spasingle-page-application" class="fragment"></span><a href="#spasingle-page-application"><i class="fa fa-link"></i></a>SPA(Single-page Application)</h2>

<ul>
<li>1枚のHTML+必要なアセット(JavaScript/CSS etc)で動作する</li>
<li>ページのリロードが発生しない</li>
</ul>

<p><br></p>

<h1>
<span id="パッケージ管理" class="fragment"></span><a href="#%E3%83%91%E3%83%83%E3%82%B1%E3%83%BC%E3%82%B8%E7%AE%A1%E7%90%86"><i class="fa fa-link"></i></a>パッケージ管理</h1>

<p>参考 : <a href="https://www.webprofessional.jp/yarn-vs-npm/" rel="nofollow noopener" target="_blank">Yarn：Facebook発のパッケージマネジャーはnpmに代わるスタンダードになるか</a></p>

<h2>
<span id="npm-node-package-manager" class="fragment"></span><a href="#npm-node-package-manager"><i class="fa fa-link"></i></a><a href="https://www.npmjs.com/" rel="nofollow noopener" target="_blank">npm (Node Package Manager)</a>
</h2>

<ul>
<li>Node.jsでつくられたパッケージの管理システム</li>
<li>Node.jsをインストールすると標準でついてくる</li>
</ul>

<h2>
<span id="yarn" class="fragment"></span><a href="#yarn"><i class="fa fa-link"></i></a><a href="https://yarnpkg.com/en/" rel="nofollow noopener" target="_blank">Yarn</a>
</h2>

<ul>
<li>Facebook, Googleなどが開発したパッケージ管理システム</li>
<li>npmの課題を解決してある

<ul>
<li>lockファイルの作成</li>
<li>並行ダウンロード</li>
</ul>
</li>
</ul>

<h2>
<span id="packagejson" class="fragment"></span><a href="#packagejson"><i class="fa fa-link"></i></a>package.json</h2>

<ul>
<li>npm/Yarnで管理するパッケージリストを記載したファイル</li>
<li>同じ書式で利用可能</li>
<li>
<a href="https://docs.npmjs.com/files/package.json" rel="nofollow noopener" target="_blank">npm仕様</a>/<a href="https://yarnpkg.com/en/docs/package-json#search" rel="nofollow noopener" target="_blank">Yarn仕様</a>
</li>
</ul>

<p><br></p>

<h1>
<span id="モジュールバンドラ" class="fragment"></span><a href="#%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB%E3%83%90%E3%83%B3%E3%83%89%E3%83%A9"><i class="fa fa-link"></i></a>モジュールバンドラ</h1>

<p>参考ページ : <a href="https://www.slant.co/topics/1089/versus/%7Ewebpack_vs_browserify_vs_rollup-js" rel="nofollow noopener" target="_blank">What are the best client-side JavaScript module loaders?</a></p>

<h2>
<span id="webpack" class="fragment"></span><a href="#webpack"><i class="fa fa-link"></i></a><a href="https://webpack.js.org/" rel="nofollow noopener" target="_blank">Webpack</a>
</h2>

<ul>
<li>コード分割ができる</li>
<li>柔軟性が高い</li>
<li>最近はこちらがスタンダード</li>
</ul>

<h2>
<span id="browserify" class="fragment"></span><a href="#browserify"><i class="fa fa-link"></i></a><a href="http://browserify.org/" rel="nofollow noopener" target="_blank">Browserify</a>
</h2>

<ul>
<li>シンプルな構成</li>
<li>CommonJSモジュールをブラウザ用にコンパイルする</li>
<li>最近はこちらに対応していないモジュールも出てきている</li>
</ul>

<p><br></p>

<h1>
<span id="ライブラリフレームワーク" class="fragment"></span><a href="#%E3%83%A9%E3%82%A4%E3%83%96%E3%83%A9%E3%83%AA%E3%83%95%E3%83%AC%E3%83%BC%E3%83%A0%E3%83%AF%E3%83%BC%E3%82%AF"><i class="fa fa-link"></i></a>ライブラリ/フレームワーク</h1>

<p>参考 : <a href="https://hackernoon.com/5-best-javascript-frameworks-in-2017-7a63b3870282" rel="nofollow noopener" target="_blank">https://hackernoon.com/5-best-javascript-frameworks-in-2017-7a63b3870282</a></p>

<h2>
<span id="reactjs" class="fragment"></span><a href="#reactjs"><i class="fa fa-link"></i></a><a href="https://reactjs.org/" rel="nofollow noopener" target="_blank">React.js</a>
</h2>

<ul>
<li>Facebook製のJSライブラリ</li>
<li>大規模開発で思い入れがないなら、これを選ぶとよいと言われた</li>
<li>Reduxと併用すると、stateの管理が楽と聞いた</li>
</ul>

<h2>
<span id="vuejs" class="fragment"></span><a href="#vuejs"><i class="fa fa-link"></i></a><a href="https://jp.vuejs.org/" rel="nofollow noopener" target="_blank">Vue.js</a>
</h2>

<ul>
<li>オープンソースなJSライブラリ</li>
<li>学習コストは低く、少しづつ導入していくときに良さそう</li>
<li>大規模プロジェクトだと管理しづらくなると聞いた</li>
</ul>

<h2>
<span id="angularjs--angular旧angular2" class="fragment"></span><a href="#angularjs--angular%E6%97%A7angular2"><i class="fa fa-link"></i></a><a href="https://angular.io/" rel="nofollow noopener" target="_blank">AngularJS</a> / <a href="https://angular.io/" rel="nofollow noopener" target="_blank">Angular(旧Angular2)</a>
</h2>

<ul>
<li>Google製のJSフレームワーク</li>
<li>1も2も学習コストが高いと聞く</li>
<li>1と2は設計からして別物と聞いた</li>
</ul>

<h2>
<span id="emberjs" class="fragment"></span><a href="#emberjs"><i class="fa fa-link"></i></a><a href="https://emberjs.com/" rel="nofollow noopener" target="_blank">Ember.js</a>
</h2>

<ul>
<li>少し前に大流行したフレームワーク</li>
<li>学習コストが高いと聞いた</li>
<li>規約による制限は強いが、慣れれば使いやすいと聞いた</li>
</ul>

<p><br></p>

<h1>
<span id="コンパイラトランスパイラ" class="fragment"></span><a href="#%E3%82%B3%E3%83%B3%E3%83%91%E3%82%A4%E3%83%A9%E3%83%88%E3%83%A9%E3%83%B3%E3%82%B9%E3%83%91%E3%82%A4%E3%83%A9"><i class="fa fa-link"></i></a>コンパイラ/トランスパイラ</h1>

<h2>
<span id="babel" class="fragment"></span><a href="#babel"><i class="fa fa-link"></i></a><a href="https://babeljs.io/" rel="nofollow noopener" target="_blank">Babel</a>
</h2>

<ul>
<li>JavaScriptのコンパイラ ※以前はtranspilerだった気がする</li>
<li>まだブラウザが対応していない標準言語仕様で記載しても、動くコードを吐き出してくれる</li>
<li>そのため、ブラウザが対応してくれるようになれば、書いたコードをそのまま使えばよいだけになる</li>
</ul>

<h2>
<span id="typescript" class="fragment"></span><a href="#typescript"><i class="fa fa-link"></i></a><a href="https://www.typescriptlang.org/" rel="nofollow noopener" target="_blank">TypeScript</a>
</h2>

<ul>
<li>Microsoftが開発</li>
<li>静的型付けができる</li>
<li>JavaScriptにコンパイルできる</li>
</ul>

<h2>
<span id="coffeescript" class="fragment"></span><a href="#coffeescript"><i class="fa fa-link"></i></a><a href="http://coffeescript.org/" rel="nofollow noopener" target="_blank">CoffeeScript</a>
</h2>

<ul>
<li>JavaScript/JSXにコンパイルできる言語</li>
<li>Ruby/Pythonっぽい記法</li>
</ul>

<p><br></p>

<h1>
<span id="react関連用語" class="fragment"></span><a href="#react%E9%96%A2%E9%80%A3%E7%94%A8%E8%AA%9E"><i class="fa fa-link"></i></a>React関連用語</h1>

<h2>
<span id="redux" class="fragment"></span><a href="#redux"><i class="fa fa-link"></i></a><a href="http://redux.js.org/" rel="nofollow noopener" target="_blank">Redux</a>
</h2>

<ul>
<li>JavaScriptの状態を管理するフレームワーク</li>
<li>Fluxの考え方をベースにつくられている</li>
<li>以下の5要素で構成される

<ul>
<li>State : アプリケーションの状態</li>
<li>Store : Stateを一元管理する場所</li>
<li>Reducer : StoreにあるStateを変更し、新しいStateを返す。Actionをもとに起動する。</li>
<li>Action : Stateを変更する際に一番最初に発火する。Reducerに働きかける</li>
<li>ActionCreator : Actionを作るとき便利に呼び出しやすくするためのもの</li>
</ul>
</li>
<li>参考 : <a href="https://qiita.com/kiita312/items/49a1f03445b19cf407b7" id="reference-6bea2aaeb2f5da51e3de">Redux入門【ダイジェスト版】10分で理解するReduxの基礎</a>
</li>
</ul>

<h2>
<span id="flux" class="fragment"></span><a href="#flux"><i class="fa fa-link"></i></a><a href="https://facebook.github.io/flux/" rel="nofollow noopener" target="_blank">Flux</a>
</h2>

<ul>
<li>アプリケーションのデータ管理パターン</li>
<li>データが単一の方向に流れる</li>
</ul>

<h2>
<span id="element-react" class="fragment"></span><a href="#element-react"><i class="fa fa-link"></i></a><a href="https://reactjs.org/docs/rendering-elements.html" rel="nofollow noopener" target="_blank">Element (React)</a>
</h2>

<ul>
<li>Reactのアプリケーションを構成する最小要素</li>
<li>ReactDOMという、オブジェクトでできている</li>
</ul>

<div class="code-frame" data-lang="js"><div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">element</span> <span class="o">=</span> <span class="o">&lt;</span><span class="nx">h1</span><span class="o">&gt;</span><span class="nx">Hello</span><span class="p">,</span> <span class="nx">world</span><span class="o">&lt;</span><span class="err">/h1&gt;;</span>
</pre></div></div>

<h2>
<span id="component-react" class="fragment"></span><a href="#component-react"><i class="fa fa-link"></i></a><a href="https://reactjs.org/docs/components-and-props.html" rel="nofollow noopener" target="_blank">Component (React)</a>
</h2>

<ul>
<li>関数のようなもの</li>
<li>入力(props)に対して、画面に表示するElementを返す</li>
</ul>

<div class="code-frame" data-lang="js"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">Welcome</span><span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="o">&lt;</span><span class="nx">h1</span><span class="o">&gt;</span><span class="nx">Hello</span><span class="p">,</span> <span class="p">{</span><span class="nx">props</span><span class="p">.</span><span class="nx">name</span><span class="p">}</span><span class="o">&lt;</span><span class="err">/h1&gt;;</span>
<span class="p">}</span>
</pre></div></div>

<h2>
<span id="jsx" class="fragment"></span><a href="#jsx"><i class="fa fa-link"></i></a><a href="https://reactjs.org/docs/glossary.html#jsx" rel="nofollow noopener" target="_blank">JSX</a>
</h2>

<ul>
<li>XMLのような構文をサポートした拡張言語</li>
<li>DOMの設計を理解しやすい</li>
<li>Reactで利用する</li>
</ul>

<div class="code-frame" data-lang="js"><div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">name</span> <span class="o">=</span> <span class="s1">'Clementine'</span><span class="p">;</span>
<span class="nx">ReactDOM</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span>
  <span class="o">&lt;</span><span class="nx">h1</span> <span class="nx">className</span><span class="o">=</span><span class="s2">"hello"</span><span class="o">&gt;</span><span class="nx">My</span> <span class="nx">name</span> <span class="nx">is</span> <span class="p">{</span><span class="nx">name</span><span class="p">}</span><span class="o">!&lt;</span><span class="err">/h1&gt;,</span>
  <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'root'</span><span class="p">)</span>
<span class="p">);</span>
</pre></div></div>

<h2>
<span id="仮想domvirtual-dom" class="fragment"></span><a href="#%E4%BB%AE%E6%83%B3domvirtual-dom"><i class="fa fa-link"></i></a>仮想DOM(Virtual DOM)</h2>

<ul>
<li>実際のDOMを直接操作しない</li>
<li>操作した状態のDOM情報をオブジェクトとして持ち、実際のDOMに対し、差分のパッチを当てることでDOMを描画する</li>
<li>参考 : <a href="http://postd.cc/the-inner-workings-of-virtual-dom/" rel="nofollow noopener" target="_blank">仮想DOMの内部の動き</a>
</li>
</ul>

<h2>
<span id="ミドルウェア-redux" class="fragment"></span><a href="#%E3%83%9F%E3%83%89%E3%83%AB%E3%82%A6%E3%82%A7%E3%82%A2-redux"><i class="fa fa-link"></i></a>ミドルウェア (Redux)</h2>

<ul>
<li>Reduxの拡張ではミドルウェアの使用が推奨される</li>
</ul>

<h3>
<span id="redux-thunk" class="fragment"></span><a href="#redux-thunk"><i class="fa fa-link"></i></a><a href="https://github.com/gaearon/redux-thunk" rel="nofollow noopener" target="_blank">redux-thunk</a>
</h3>

<ul>
<li>引数としてディスパッチを渡し、Reduxに非同期処理を持ち込む</li>
<li>
<a href="http://redux.js.org/docs/api/applyMiddleware.html" rel="nofollow noopener" target="_blank">公式でも言及されている</a>ミドルウェア</li>
</ul>

<p><br></p>

<h1>
<span id="テストツール" class="fragment"></span><a href="#%E3%83%86%E3%82%B9%E3%83%88%E3%83%84%E3%83%BC%E3%83%AB"><i class="fa fa-link"></i></a>テストツール</h1>

<p>参考 : <a href="https://medium.com/powtoon-engineering/a-complete-guide-to-testing-javascript-in-2017-a217b4cd5a2a" rel="nofollow noopener" target="_blank">An Overview of JavaScript Testing in 2017<br>
</a></p>

<h2>
<span id="jest" class="fragment"></span><a href="#jest"><i class="fa fa-link"></i></a><a href="https://facebook.github.io/jest/" rel="nofollow noopener" target="_blank">Jest</a>
</h2>

<ul>
<li>Facebook製。Reactのテストはこれを使っている<a href="/Facebook" class="user-mention js-hovercard" title="Facebook" data-hovercard-target-type="user" data-hovercard-target-name="Facebook">@Facebook</a>
</li>
<li>変更した際の差分をテストするので大規模プロジェクトでも高速</li>
<li>スナップショットテストもできる</li>
</ul>

<h2>
<span id="ava" class="fragment"></span><a href="#ava"><i class="fa fa-link"></i></a><a href="https://github.com/avajs/ava" rel="nofollow noopener" target="_blank">AVA</a>
</h2>

<ul>
<li>テストを並列で実行することで高速化</li>
<li>シンプルな構成</li>
<li>スナップショットテストもできる</li>
</ul>

<h2>
<span id="jasmine" class="fragment"></span><a href="#jasmine"><i class="fa fa-link"></i></a><a href="https://jasmine.github.io/" rel="nofollow noopener" target="_blank">Jasmine</a>
</h2>

<ul>
<li>BDD(ふるまい駆動開発)</li>
<li>必要なものはあるていど揃っている</li>
</ul>

<h2>
<span id="mocha" class="fragment"></span><a href="#mocha"><i class="fa fa-link"></i></a><a href="https://mochajs.org/" rel="nofollow noopener" target="_blank">Mocha</a>
</h2>

<ul>
<li>柔軟性が高く、よく利用されるツール</li>
<li>外部のツールなどを利用するので複雑になりやすい</li>
</ul>

<h2>
<span id="enzyme" class="fragment"></span><a href="#enzyme"><i class="fa fa-link"></i></a><a href="http://airbnb.io/enzyme/" rel="nofollow noopener" target="_blank">enzyme</a>
</h2>

<ul>
<li>AirBnB製。React用のテストユーティリティライブラリ</li>
<li>テストが格段に書きやすくなる</li>
<li>他のツールと組み合わせて利用する</li>
</ul>

<h2>
<span id="flow" class="fragment"></span><a href="#flow"><i class="fa fa-link"></i></a><a href="https://flow.org/" rel="nofollow noopener" target="_blank">flow</a>
</h2>

<ul>
<li>プロジェクトに気軽に型チェックを導入できる</li>
</ul>

<p><br></p>

<h1>
<span id="css関連のloader" class="fragment"></span><a href="#css%E9%96%A2%E9%80%A3%E3%81%AEloader"><i class="fa fa-link"></i></a>CSS関連のLoader</h1>

<blockquote>
<p>「どんなものでも最終的な出力をjavascriptで実行できる形に変換する」もの。</p>
</blockquote>

<p>参考<br>
<a href="https://qiita.com/shuntksh/items/bb5cbea40a343e2e791a" id="reference-574b036eeccc21c2abd0">WebpackってCSS周りのLoaderがいっぱいあって分かりにくいので整理してみる</a><br>
<a href="https://qiita.com/inuscript/items/0574ab1ef358fecb55b9" id="reference-3fd004680ffcbb827def">なんとなくで理解しないWebpackのCSS周辺</a></p>

<h2>
<span id="css-loader" class="fragment"></span><a href="#css-loader"><i class="fa fa-link"></i></a><a href="https://github.com/webpack-contrib/css-loader" rel="nofollow noopener" target="_blank">css-loader</a>
</h2>

<ul>
<li>CSSの依存関係を解決し、JSで読み込めるようにする</li>
<li>
<code>@import</code>と<code>url()</code>で管理する</li>
</ul>

<h2>
<span id="raw-loader" class="fragment"></span><a href="#raw-loader"><i class="fa fa-link"></i></a><a href="https://qiita.com/inuscript/items/0574ab1ef358fecb55b9">raw-loader</a>
</h2>

<ul>
<li>cssをJSで読み込めるようにする</li>
<li>css-loaderのように高機能ではない。超シンプル</li>
</ul>

<h2>
<span id="style-loader" class="fragment"></span><a href="#style-loader"><i class="fa fa-link"></i></a><a href="https://github.com/webpack-contrib/style-loader" rel="nofollow noopener" target="_blank">style-loader</a>
</h2>

<ul>
<li>DOMに <code>&lt;style&gt;</code>タグを挿入し、CSSを読み込ませる</li>
<li>要するにHTMLにCSSを挿入する</li>
</ul>

<h2>
<span id="less-loader" class="fragment"></span><a href="#less-loader"><i class="fa fa-link"></i></a><a href="https://github.com/webpack-contrib/less-loader" rel="nofollow noopener" target="_blank">less-loader</a>
</h2>

<ul>
<li>
<a href="http://lesscss.org/3.x/" rel="nofollow noopener" target="_blank">Less</a>(CSSを記述するためのDSL)をCSSに変換するためのLoader</li>
<li>実際に使うときは、その上に<code>css-loader</code>, <code>style-loader</code>を載せる</li>
</ul>

<div class="code-frame" data-lang="js"><div class="highlight"><pre><span></span><span class="nx">require</span><span class="p">(</span><span class="s2">"!style!css!less!./file.less"</span><span class="p">);</span>
</pre></div></div>

<h2>
<span id="postcss-loader" class="fragment"></span><a href="#postcss-loader"><i class="fa fa-link"></i></a><a href="https://github.com/postcss/postcss-loader" rel="nofollow noopener" target="_blank">Postcss-loader</a>
</h2>

<ul>
<li>
<a href="http://postcss.org/" rel="nofollow noopener" target="_blank">PostCSS</a>(JSでつくられたCSS変換ツール)でCSSを処理するLoader</li>
</ul>

<p><br></p>

<h1>
<span id="その他ライブラリ" class="fragment"></span><a href="#%E3%81%9D%E3%81%AE%E4%BB%96%E3%83%A9%E3%82%A4%E3%83%96%E3%83%A9%E3%83%AA"><i class="fa fa-link"></i></a>その他ライブラリ</h1>

<h2>
<span id="promiseライブラリ" class="fragment"></span><a href="#promise%E3%83%A9%E3%82%A4%E3%83%96%E3%83%A9%E3%83%AA"><i class="fa fa-link"></i></a><a href="https://developers.google.com/web/fundamentals/primers/promises?hl=ja" rel="nofollow noopener" target="_blank">Promise</a>ライブラリ</h2>

<ul>
<li>非同期処理を抽象化したオブジェクトとして扱う</li>
<li>callbackでもできるが、ルールが統一されたため</li>
<li>非同期処理をキューにして管理することができる</li>
</ul>

<h3>
<span id="bluebird" class="fragment"></span><a href="#bluebird"><i class="fa fa-link"></i></a><a href="https://github.com/petkaantonov/bluebird" rel="nofollow noopener" target="_blank">Bluebird</a>
</h3>

<ul>
<li><a href="https://qiita.com/masakielastic/items/025b67d01b3501a5c3fb" id="reference-b521c20ee2964cb406e8">Bluebird で Promise を学ぶ</a></li>
</ul>

<h2>
<span id="ユーティリティライブラリ" class="fragment"></span><a href="#%E3%83%A6%E3%83%BC%E3%83%86%E3%82%A3%E3%83%AA%E3%83%86%E3%82%A3%E3%83%A9%E3%82%A4%E3%83%96%E3%83%A9%E3%83%AA"><i class="fa fa-link"></i></a>ユーティリティライブラリ</h2>

<ul>
<li>ネイティブ型を扱うライブラリ</li>
<li>ES2015以降でサポートされている記法もある</li>
<li>基本的にはどちらか一方を利用する</li>
</ul>

<h3>
<span id="underscore" class="fragment"></span><a href="#underscore"><i class="fa fa-link"></i></a><a href="http://underscorejs.org/" rel="nofollow noopener" target="_blank">Underscore</a>
</h3>

<ul>
<li>100以上の関数が定義されている(map, filter...)</li>
<li>公式ページが分かりやすい</li>
</ul>

<h3>
<span id="lodash" class="fragment"></span><a href="#lodash"><i class="fa fa-link"></i></a><a href="https://lodash.com/" rel="nofollow noopener" target="_blank">Lodash</a>
</h3>

<ul>
<li>UnderscoreからForkされたプロジェクト</li>
<li>Underscoreよりもパフォーマンスがよいらしい</li>
<li><a href="https://lodash.com/custom-builds" rel="nofollow noopener" target="_blank">カスタムビルドができる</a></li>
</ul>

<h2>
<span id="時間操作ライブラリ" class="fragment"></span><a href="#%E6%99%82%E9%96%93%E6%93%8D%E4%BD%9C%E3%83%A9%E3%82%A4%E3%83%96%E3%83%A9%E3%83%AA"><i class="fa fa-link"></i></a>時間操作ライブラリ</h2>

<h3>
<span id="momentjs" class="fragment"></span><a href="#momentjs"><i class="fa fa-link"></i></a><a href="http://momentjs.com/" rel="nofollow noopener" target="_blank">Moment.js</a>
</h3>

<ul>
<li>タイムゾーンの設定</li>
<li>フォーマットの指定</li>
<li>日時計算</li>
</ul>

<p><br></p>

<h1>
<span id="開発に便利なライブラリ" class="fragment"></span><a href="#%E9%96%8B%E7%99%BA%E3%81%AB%E4%BE%BF%E5%88%A9%E3%81%AA%E3%83%A9%E3%82%A4%E3%83%96%E3%83%A9%E3%83%AA"><i class="fa fa-link"></i></a>開発に便利なライブラリ</h1>

<h2>
<span id="npm-run-all" class="fragment"></span><a href="#npm-run-all"><i class="fa fa-link"></i></a><a href="https://www.npmjs.com/package/npm-run-all" rel="nofollow noopener" target="_blank">npm-run-all</a>
</h2>

<ul>
<li>並行でのnpmコマンド実行や、npmコマンドの単純化ができる</li>
<li>以下の3つのコマンドが用意される

<ul>
<li>
<code>run-s</code> : sequentialに実行</li>
<li>
<code>run-p</code> : parallelで実行</li>
<li>
<code>npm-run-all</code> : どちらも指定できる。デフォルトは<code>sequential</code>
</li>
</ul>
</li>
</ul>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ npm run clean &amp;&amp; npm run build:css &amp;&amp; npm run build:js &amp;&amp; npm run build:html
↓ 簡潔に実行できる
$ npm-run-all clean build:* 
</pre></div></div>

<h2>
<span id="rimraf" class="fragment"></span><a href="#rimraf"><i class="fa fa-link"></i></a><a href="https://www.npmjs.com/package/rimraf" rel="nofollow noopener" target="_blank">rimraf</a>
</h2>

<ul>
<li>
<code>rm -rf</code>を実行できる</li>
<li>
<code>npm run clean</code> で使うことが多い</li>
</ul>

<div class="code-frame" data-lang="js"><div class="highlight"><pre><span></span>  <span class="s2">"scripts"</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">"clean"</span><span class="o">:</span> <span class="s2">"rimraf targetDir"</span>
  <span class="p">}</span>
</pre></div></div>

<div class="footnotes">
<hr>
<ol>

<li id="fn1">
<p><a href="/erukiti" class="user-mention js-hovercard" title="erukiti" data-hovercard-target-type="user" data-hovercard-target-name="erukiti">@erukiti</a> さんのご指摘により大幅に修正 <a href="#fnref1">↩</a></p>
</li>

</ol>
</div>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>tomoyamachiさんの<br />2位</center></td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>22</kbd>
		<a target="_blank" href="https://qiita.com/tomoyamachi/items/6862cd8ffe220689f6c0">一からAPIサーバの開発フローを作った話〜コンテナ編</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2017-10-13 11:40:24</center>
	</td>
	<td style="width:200px;">
		@tomoyamachi<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/14275/profile-images/1473683263">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[PHP]</b> <b>[GAE]</b> <b>[api]</b> <b>[docker]</b> <b>[docker-compose]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>去年、「<a href="https://qiita.com/tomoyamachi/items/0f049c87bfdef4aa6ad9" id="reference-4771baab43af3a3c7e23">一からマイクロサービスの開発フローを作った話</a>」という記事を投稿した。<br>
今回、また新しく割と大きめのプロジェクトに関われたので、コンテナ管理で開発〜運用フローを3ヶ月でつくった。 忘れる前に、記録を残そうと考えている。</p>

<p>今回は、「サービスの構成」について。なお、前回はAWSだったが、今回はGCPを利用した。AWSに比べサービスが少ないが、CUIがわかりやすく料金も割安なことが多いので、特に不便はない。</p>

<h1>
<span id="だいたいの構成" class="fragment"></span><a href="#%E3%81%A0%E3%81%84%E3%81%9F%E3%81%84%E3%81%AE%E6%A7%8B%E6%88%90"><i class="fa fa-link"></i></a>だいたいの構成</h1>

<ul>
<li>nginx</li>
<li>php 7.1.9

<ul>
<li>OPcache, APCu, Phalcon, オレオレフレームワーク</li>
<li>NewRelic APM : パフォーマンス測定で利用</li>
<li>BlackFire : プロファイリングで利用</li>
</ul>
</li>
<li>redis, MySQL, ElasticSearch</li>
<li>Firebase RDB : <a href="https://firebase.google.com/docs/firestore/" rel="nofollow noopener" target="_blank">Firestore</a>に乗り換えたい </li>
<li>fluentd : ログを集約。本番(GAE)では勝手に作成される</li>
<li>ruby + cucumber : 自作のAPIテストライブラリを利用</li>
</ul>

<p>現在、ローカルでの開発やクローズドテストの際はdocker-composeで構築し、それ以外はGoogleAppEngine(GAE)で運用している。<br>
いずれそれぞれの比較記事とサンプルを動かすまでの記事書きたい。</p>

<h1>
<span id="開発環境の構成-ローカル開発-テスト" class="fragment"></span><a href="#%E9%96%8B%E7%99%BA%E7%92%B0%E5%A2%83%E3%81%AE%E6%A7%8B%E6%88%90-%E3%83%AD%E3%83%BC%E3%82%AB%E3%83%AB%E9%96%8B%E7%99%BA-%E3%83%86%E3%82%B9%E3%83%88"><i class="fa fa-link"></i></a>開発環境の構成 (ローカル開発, テスト)</h1>

<p><a href="https://camo.qiitausercontent.com/f1bfe130c93de84fdec4a8615f0ede354dcdc84f/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f31343237352f66663336633437342d363733662d323932372d396233632d6139653362356261616432312e6a706567" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/f1bfe130c93de84fdec4a8615f0ede354dcdc84f/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f31343237352f66663336633437342d363733662d323932372d396233632d6139653362356261616432312e6a706567" alt="docker-local-environment.jpg" title="docker-local-environment.jpg" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/14275/ff36c474-673f-2927-9b3c-a9e3b5baad21.jpeg"></a></p>

<p>ローカルでの開発時は、docker-composeを利用している。<br>
初期にdocker-composeを利用していたので、そのまま。</p>

<h2>
<span id="docker-composeについて" class="fragment"></span><a href="#docker-compose%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6"><i class="fa fa-link"></i></a>docker-composeについて</h2>

<ul>
<li>良い点

<ul>
<li>手軽に始められる

<ul>
<li>最近はDockerをインストールするだけで、docker-composeがついてくることが多い</li>
</ul>
</li>
<li>ボリュームマウントが楽にできる</li>
</ul>
</li>
<li>悪い点

<ul>
<li>スケーラブルではないので、そのまま本番では利用できない</li>
</ul>
</li>
</ul>

<p>最近GAEに環境を移したので、<a href="https://cloud.google.com/appengine/docs/standard/python/tools/using-local-server" rel="nofollow noopener" target="_blank">GAEのローカル環境で構築</a>を準備中。<br>
追記 : ローカル環境ではGAEのstandard環境しか再現できないため、php5.5のみが利用可能</p>

<h2>
<span id="補足事項" class="fragment"></span><a href="#%E8%A3%9C%E8%B6%B3%E4%BA%8B%E9%A0%85"><i class="fa fa-link"></i></a>補足事項</h2>

<h3>
<span id="開発環境" class="fragment"></span><a href="#%E9%96%8B%E7%99%BA%E7%92%B0%E5%A2%83"><i class="fa fa-link"></i></a>開発環境</h3>

<ul>
<li>ネット環境がなくても開発ができる</li>
<li>すべてのログをfluentdコンテナに集約</li>
<li>MySQL, Redis, ElasticSearchはボリュームマウントして、データを永続化</li>
</ul>

<h3>
<span id="コンテナ容量削減" class="fragment"></span><a href="#%E3%82%B3%E3%83%B3%E3%83%86%E3%83%8A%E5%AE%B9%E9%87%8F%E5%89%8A%E6%B8%9B"><i class="fa fa-link"></i></a>コンテナ容量削減</h3>

<ul>
<li>PHPプロジェクトを2つに分けた

<ul>
<li>利用に最低限必要なプロジェクト(FPM経由で動作するもの)</li>
<li>CIをしていく上で利用するものに関するプロジェクト

<ul>
<li>コードチェック、ユニットテスト etc。<a href="https://qiita.com/tomoyamachi/items/0f049c87bfdef4aa6ad9#%E9%96%8B%E7%99%BA%E3%83%95%E3%83%AD%E3%83%BC" id="reference-4771baab43af3a3c7e23">以前の開発フロー</a>とほぼ同じ</li>
<li>ローカルでのテスト以外では利用しない</li>
</ul>
</li>
</ul>
</li>
</ul>

<h3>
<span id="テスト" class="fragment"></span><a href="#%E3%83%86%E3%82%B9%E3%83%88"><i class="fa fa-link"></i></a>テスト</h3>

<ul>
<li>ユニットテスト時はCI用プロジェクトを含めて実行</li>
<li>結合テスト時(nginx経由)は、API用プロジェクトのみで実行</li>
<li>
<a href="https://qiita.com/tomoyamachi/items/0f049c87bfdef4aa6ad9">前回</a>同様、APIの結合テスト(ブラックボックステスト)をまったく別のネットワークで利用

<ul>
<li>docker-composeのnginxのポートを指定して、そこに対して接続する形</li>
</ul>
</li>
</ul>

<h2>
<span id="その他の工夫" class="fragment"></span><a href="#%E3%81%9D%E3%81%AE%E4%BB%96%E3%81%AE%E5%B7%A5%E5%A4%AB"><i class="fa fa-link"></i></a>その他の工夫</h2>

<ul>
<li>コンテナに慣れていない人は、docker-composeでの操作でも迷うので、最初に質問が多かった

<ul>
<li>スクリーンキャプチャでチュートリアル動画をつくり、みんなに配布</li>
</ul>
</li>
</ul>

<h1>
<span id="本番環境-dev-stg-prod" class="fragment"></span><a href="#%E6%9C%AC%E7%95%AA%E7%92%B0%E5%A2%83-dev-stg-prod"><i class="fa fa-link"></i></a>本番環境 (dev, stg, prod)</h1>

<p><a href="https://camo.qiitausercontent.com/d46a5d18da20d1b0fd7d4d1e23e34696f37a8c32/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f31343237352f35616163663233372d396665342d663963372d633765342d3938633737653864343838332e6a706567" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/d46a5d18da20d1b0fd7d4d1e23e34696f37a8c32/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f31343237352f35616163663233372d396665342d663963372d633765342d3938633737653864343838332e6a706567" alt="prod-environment.jpg" title="prod-environment.jpg" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/14275/5aacf237-9fe4-f9c7-c7e4-98c77e8d4883.jpeg"></a></p>

<p>先日PHP7.1が安定版になったので、現在はGAE(Google App Engine)を利用して運用している。</p>

<h2>
<span id="gaeについて" class="fragment"></span><a href="#gae%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6"><i class="fa fa-link"></i></a>GAEについて</h2>

<ul>
<li>良い点

<ul>
<li>自動でバージョン管理 / スケーリングをしてくれる</li>
<li>セキュリティなどもとにかく任せておけばいいという安心感</li>
<li>SSLが無料で、メンテナンス不要</li>
<li>Stackdriver(ログ管理サービス)との連携が楽</li>
</ul>
</li>
<li>悪い点

<ul>
<li>GCEに比べると割高になりやすい

<ul>
<li>コンピュート単位で課金されるので場合による</li>
</ul>
</li>
<li>デバッグしづらい

<ul>
<li>コンテナにログインすること自体が非推奨</li>
</ul>
</li>
<li>利用できる言語に限りがある</li>
<li>ドキュメントが古いことがあるし、ドキュメントにないこともある</li>
</ul>
</li>
</ul>

<h2>
<span id="補足事項-1" class="fragment"></span><a href="#%E8%A3%9C%E8%B6%B3%E4%BA%8B%E9%A0%85-1"><i class="fa fa-link"></i></a>補足事項</h2>

<ul>
<li>App Engine Flexibleを利用</li>
<li>PHPを利用しているが、php7.1用のphalconや、newrelicを入れる都合で、customランタイムを利用してDockerfileから構築している</li>
<li>環境ごとに定数、php.ini、Googleのプロジェクトなどが分かれるため、各設定ファイルを環境ごとに分けた

<ul>
<li>以下のようなMakefileを作成し、 <code>make deploy ENV={env} VERSION={version}</code> だけでdeployするように設定</li>
</ul>
</li>
</ul>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>prod: Dockerfile.prod
    cp -f $(PROJECT_DIR)/Dockerfile.prod $(PROJECT_DIR)/Dockerfile
stg: Dockerfile.stg
    cp -f  $(PROJECT_DIR)/Dockerfile.stg $(PROJECT_DIR)/Dockerfile
dev: Dockerfile.dev
    cp -f $(PROJECT_DIR)/Dockerfile.dev $(PROJECT_DIR)/Dockerfile

# 環境に応じたapp.yaml, Dockerfileを利用
deploy: ${ENV}
    gcloud app deploy app-${ENV}.yaml --version v${VERSION} --project project-${ENV}

</pre></div></div>

<p>もっとよい方法があるはずなので、知見を得たい…</p>

<h1>
<span id="よもやま話" class="fragment"></span><a href="#%E3%82%88%E3%82%82%E3%82%84%E3%81%BE%E8%A9%B1"><i class="fa fa-link"></i></a>よもやま話</h1>

<p>探りながらの開発だったので、かなり紆余曲折あった。<br>
徐々にコンテナとGCPに慣れたおかげもあり、どんどん環境構築にかける時間が短くなっているのが振り返ると分かる。</p>

<p>7月半ば : 最初は手軽にできるdocker-composeで環境を整える(7日)<br>
↓<br>
9月上旬 : そろそろ本番環境つくらなくては...<br>
↓<br>
Kubernetesを利用して本番環境を作成(5日)<br>
↓<br>
10月上旬 : Google App EngineでPHP7.1が正式リリース<br>
↓<br>
Google App Engineでdeployまでのフローを作成(2日)</p>

<h1>
<span id="まとめ" class="fragment"></span><a href="#%E3%81%BE%E3%81%A8%E3%82%81"><i class="fa fa-link"></i></a>まとめ</h1>

<p>開発フローとタイトルにありながら、開発フローの話にはいれていない。<br>
次回は開発フローの話に書きたい。</p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>tomoyamachiさんの<br />3位</center></td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>8</kbd>
		<a target="_blank" href="https://qiita.com/tomoyamachi/items/d64f99b9fd2acab91999">JavaScript初心者がReact+Reduxでブログのフロントエンドを作成するまで</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2017-11-04 09:35:05</center>
	</td>
	<td style="width:200px;">
		@tomoyamachi<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/14275/profile-images/1473683263">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[JavaScript]</b> <b>[React]</b> <b>[redux]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;">
<h1>
<span id="はじめに" class="fragment"></span><a href="#%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB"><i class="fa fa-link"></i></a>はじめに</h1>

<p><a href="https://qiita.com/tomoyamachi/items/b398f35882fb57b975ad" id="reference-11d16ef038c74c6c9950">JavaScriptの基礎知識</a>がだいたいわかったので、スキマ時間(4時間くらい)で簡単なブログのフロントエンドをReact+Reduxで構築した。<br>
といっても、<a href="https://www.udemy.com/react-redux/learn/v4/content" rel="nofollow noopener" target="_blank">Modern React with Redux</a>というコースのセクション9を見ながら手を動かしただけ。JavaScript初心者だが、セクション9から見始めても特に問題なかった。</p>

<h1>
<span id="ソースコード" class="fragment"></span><a href="#%E3%82%BD%E3%83%BC%E3%82%B9%E3%82%B3%E3%83%BC%E3%83%89"><i class="fa fa-link"></i></a>ソースコード</h1>

<p>実装時のメモも含めて、以下に保存してある。<br>
<a href="https://github.com/tomoyamachi/react-blog-sample" rel="nofollow noopener" target="_blank">github.com/tomoyamachi/react-blog-sample</a></p>

<h1>
<span id="できるようになったこと" class="fragment"></span><a href="#%E3%81%A7%E3%81%8D%E3%82%8B%E3%82%88%E3%81%86%E3%81%AB%E3%81%AA%E3%81%A3%E3%81%9F%E3%81%93%E3%81%A8"><i class="fa fa-link"></i></a>できるようになったこと</h1>

<ul>
<li>SPAだが、URLごとで表示するDOMを分ける</li>
<li>非同期でAPI通信を行う</li>
<li>非同期処理が完了してから、表示処理を実行する</li>
<li>送信フォームの管理(バリデーション含む)</li>
<li>ESの言語仕様がざっくりわかる</li>
<li>一人である程度のプロジェクトをつくる</li>
</ul>

<h1>
<span id="今後" class="fragment"></span><a href="#%E4%BB%8A%E5%BE%8C"><i class="fa fa-link"></i></a>今後</h1>

<p>実践でそのまま利用できそうなことが詰まっていた。作成後1時間くらいはできたコードをいじって、各コードの役割を理解した。<br>
次は、テストやコード品質の担保をしたいので、<a href="https://www.udemy.com/react-redux-tutorial/" rel="nofollow noopener" target="_blank">Advanced React and Redux</a>を見ようと思っている。</p>

<p>もし、React+Reduxを利用した中規模以上プロジェクトのソースコードが公開されてれば、かなりレベル上げができそう。<br>
軽く探しているが見当たらないので、もしあれば知りたい。</p>

<h1>
<span id="以下パッケージなどのメモ" class="fragment"></span><a href="#%E4%BB%A5%E4%B8%8B%E3%83%91%E3%83%83%E3%82%B1%E3%83%BC%E3%82%B8%E3%81%AA%E3%81%A9%E3%81%AE%E3%83%A1%E3%83%A2"><i class="fa fa-link"></i></a>以下、パッケージなどのメモ</h1>

<h2>
<span id="spaだがurlごとで表示内容を出し分けたい" class="fragment"></span><a href="#spa%E3%81%A0%E3%81%8Curl%E3%81%94%E3%81%A8%E3%81%A7%E8%A1%A8%E7%A4%BA%E5%86%85%E5%AE%B9%E3%82%92%E5%87%BA%E3%81%97%E5%88%86%E3%81%91%E3%81%9F%E3%81%84"><i class="fa fa-link"></i></a>SPAだが、URLごとで表示内容を出し分けたい</h2>

<p><a href="">react-router-dom</a> を利用。<code>Switch</code>を使わない場合、パスの正規表現に引っかかったものすべてのコンポーネントが表示される。</p>

<p>なお、parameterを取得したいときは、Componentの <code>this.props.match.params.{name}</code>の形で取得できる。</p>

<div class="code-frame" data-lang="javascript">
<div class="code-lang"><span class="bold">index.js</span></div>
<div class="highlight"><pre><span></span><span class="kr">import</span> <span class="nx">React</span> <span class="nx">from</span> <span class="s1">'react'</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">ReactDOM</span> <span class="nx">from</span> <span class="s1">'react-dom'</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">Provider</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">'react-redux'</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">createStore</span><span class="p">,</span> <span class="nx">applyMiddleware</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">'redux'</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">BrowserRouter</span><span class="p">,</span> <span class="nx">Route</span><span class="p">,</span> <span class="nx">Switch</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">'react-router-dom'</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">reducers</span> <span class="nx">from</span> <span class="s1">'./reducers'</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">promise</span> <span class="nx">from</span> <span class="s1">'redux-promise'</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">PostsIndex</span> <span class="nx">from</span> <span class="s1">'./components/posts_index'</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">PostsNew</span> <span class="nx">from</span> <span class="s1">'./components/posts_new'</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">PostsShow</span> <span class="nx">from</span> <span class="s1">'./components/posts_show'</span><span class="p">;</span>
<span class="kr">const</span> <span class="nx">createStoreWithMiddleware</span> <span class="o">=</span> <span class="nx">applyMiddleware</span><span class="p">(</span><span class="nx">promise</span><span class="p">)(</span><span class="nx">createStore</span><span class="p">);</span>

<span class="nx">ReactDOM</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span>
  <span class="o">&lt;</span><span class="nx">Provider</span> <span class="nx">store</span><span class="o">=</span><span class="p">{</span><span class="nx">createStoreWithMiddleware</span><span class="p">(</span><span class="nx">reducers</span><span class="p">)}</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nx">BrowserRouter</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">Switch</span><span class="o">&gt;</span>
          <span class="o">&lt;</span><span class="nx">Route</span> <span class="nx">path</span><span class="o">=</span><span class="s2">"/posts/new"</span> <span class="nx">component</span><span class="o">=</span><span class="p">{</span><span class="nx">PostsNew</span><span class="p">}</span> <span class="o">/&gt;</span>
          <span class="o">&lt;</span><span class="nx">Route</span> <span class="nx">path</span><span class="o">=</span><span class="s2">"/posts/:id"</span> <span class="nx">component</span><span class="o">=</span><span class="p">{</span><span class="nx">PostsShow</span><span class="p">}</span> <span class="o">/&gt;</span>
          <span class="o">&lt;</span><span class="nx">Route</span> <span class="nx">path</span><span class="o">=</span><span class="s2">"/"</span> <span class="nx">component</span><span class="o">=</span><span class="p">{</span><span class="nx">PostsIndex</span><span class="p">}</span> <span class="o">/&gt;</span>
        <span class="o">&lt;</span><span class="err">/Switch&gt;</span>
      <span class="o">&lt;</span><span class="err">/div&gt;</span>
    <span class="o">&lt;</span><span class="err">/BrowserRouter&gt;</span>
  <span class="o">&lt;</span><span class="err">/Provider&gt;</span>
  <span class="p">,</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">'.container'</span><span class="p">));</span>

</pre></div>
</div>

<h2>
<span id="api通信がしたい" class="fragment"></span><a href="#api%E9%80%9A%E4%BF%A1%E3%81%8C%E3%81%97%E3%81%9F%E3%81%84"><i class="fa fa-link"></i></a>API通信がしたい</h2>

<p><a href="https://github.com/axios/axios" rel="nofollow noopener" target="_blank">axios</a>を利用。<br>
レスポンスが返ってきてからの処理を入れる場合は、<code>axios.{HTTPmethod}().then()</code> でつなげる。エラー時の挙動は<code>.catch()</code>で管理</p>

<div class="code-frame" data-lang="javascript">
<div class="code-lang"><span class="bold">actions/index.js</span></div>
<div class="highlight"><pre><span></span><span class="kr">export</span> <span class="kd">function</span> <span class="nx">createPost</span><span class="p">(</span><span class="nx">values</span><span class="p">,</span> <span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>
    <span class="kr">const</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">axios</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="sb">`</span><span class="si">${</span><span class="nx">ROOT_URL</span><span class="si">}</span><span class="sb">/posts</span><span class="si">${</span><span class="nx">API_KEY</span><span class="si">}</span><span class="sb">`</span><span class="p">,</span> <span class="nx">values</span><span class="p">)</span>
          <span class="p">.</span><span class="nx">then</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="nx">callback</span><span class="p">())</span>
          <span class="p">.</span><span class="k">catch</span><span class="p">((</span><span class="nx">e</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">cosole</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">e</span><span class="p">));</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="nx">type</span><span class="o">:</span> <span class="nx">CREATE_POSTS</span><span class="p">,</span>
        <span class="nx">payload</span><span class="o">:</span> <span class="nx">request</span>
    <span class="p">};</span>
<span class="p">}</span>
</pre></div>
</div>

<h2>
<span id="非同期処理を管理したい" class="fragment"></span><a href="#%E9%9D%9E%E5%90%8C%E6%9C%9F%E5%87%A6%E7%90%86%E3%82%92%E7%AE%A1%E7%90%86%E3%81%97%E3%81%9F%E3%81%84"><i class="fa fa-link"></i></a>非同期処理を管理したい</h2>

<p><a href="https://github.com/acdlite/redux-promise" rel="nofollow noopener" target="_blank">redux-promise</a>を利用する。ミドルウェアに入れるだけで、利用できるようになる。非同期処理が完了してから、処理を行えるようになる。 ※細かなことは分かってない</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>const createStoreWithMiddleware = applyMiddleware(promise)(createStore);

ReactDOM.render(
  &lt;Provider store={createStoreWithMiddleware(reducers)}&gt;
...(略)
</pre></div></div>

<h2>
<span id="フォームの管理がしたい" class="fragment"></span><a href="#%E3%83%95%E3%82%A9%E3%83%BC%E3%83%A0%E3%81%AE%E7%AE%A1%E7%90%86%E3%81%8C%E3%81%97%E3%81%9F%E3%81%84"><i class="fa fa-link"></i></a>フォームの管理がしたい</h2>

<p><a href="https://redux-form.com/7.1.2/" rel="nofollow noopener" target="_blank">redux-form</a> を利用。<br>
バリデーションはreduxFormの引数に<code>validate</code> を指定すればいい。<br>
フォーム操作後にエラーを表示したい場合は、<code>meta.touched</code>で判定。</p>

<div class="code-frame" data-lang="javascript"><div class="highlight"><pre><span></span><span class="kr">import</span> <span class="nx">React</span><span class="p">,</span> <span class="p">{</span><span class="nx">Component</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">'react'</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span><span class="nx">Field</span><span class="p">,</span> <span class="nx">reduxForm</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">'redux-form'</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">connect</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">'react-redux'</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">Field</span><span class="p">,</span> <span class="nx">reduxForm</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">'redux-form'</span><span class="p">;</span>

<span class="kr">class</span> <span class="nx">PostsNew</span> <span class="kr">extends</span> <span class="nx">Component</span> <span class="p">{</span>
    <span class="nx">renderField</span><span class="p">(</span><span class="nx">field</span><span class="p">)</span> <span class="p">{</span>
        <span class="kr">const</span> <span class="p">{</span><span class="nx">meta</span><span class="o">:</span> <span class="p">{</span> <span class="nx">touched</span><span class="p">,</span> <span class="nx">error</span> <span class="p">}}</span> <span class="o">=</span> <span class="nx">field</span><span class="p">;</span>
        <span class="kr">const</span> <span class="nx">className</span> <span class="o">=</span> <span class="sb">`form-group </span><span class="si">${</span><span class="nx">touched</span> <span class="o">&amp;&amp;</span> <span class="nx">error</span> <span class="o">?</span> <span class="s1">'has-danger'</span> <span class="o">:</span> <span class="s1">''</span><span class="si">}</span><span class="sb">`</span><span class="p">;</span>

        <span class="k">return</span> <span class="p">(</span>
            <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="p">{</span><span class="nx">className</span><span class="p">}</span><span class="o">&gt;</span>
              <span class="o">&lt;</span><span class="nx">label</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">field</span><span class="p">.</span><span class="nx">label</span><span class="p">}</span><span class="o">&lt;</span><span class="err">/label&gt;</span>
              <span class="o">&lt;</span><span class="nx">input</span>
                <span class="nx">className</span><span class="o">=</span><span class="s2">"form-control"</span>
                <span class="nx">type</span><span class="o">=</span><span class="s2">"text"</span>
                <span class="p">{...</span><span class="nx">field</span><span class="p">.</span><span class="nx">input</span><span class="p">}</span>
                <span class="o">/&gt;</span>
              <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="s2">"text-help"</span><span class="o">&gt;</span>
                <span class="p">{</span><span class="nx">field</span><span class="p">.</span><span class="nx">meta</span><span class="p">.</span><span class="nx">touched</span> <span class="o">?</span> <span class="nx">field</span><span class="p">.</span><span class="nx">meta</span><span class="p">.</span><span class="nx">error</span> <span class="o">:</span> <span class="s1">''</span><span class="p">}</span>
              <span class="o">&lt;</span><span class="err">/div&gt;</span>
            <span class="o">&lt;</span><span class="err">/div&gt;</span>
        <span class="p">);</span>
    <span class="p">}</span>

    <span class="nx">onSubmit</span><span class="p">(</span><span class="nx">values</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">createPost</span><span class="p">(</span><span class="nx">values</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">history</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="s1">'/'</span><span class="p">);</span>
        <span class="p">});</span>
    <span class="p">}</span>

    <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
        <span class="kr">const</span> <span class="p">{</span> <span class="nx">handleSubmit</span> <span class="p">}</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">;</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="o">&lt;</span><span class="nx">form</span> <span class="nx">onSubmit</span><span class="o">=</span><span class="p">{</span><span class="nx">handleSubmit</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">onSubmit</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">))}</span><span class="o">&gt;</span>
              <span class="o">&lt;</span><span class="nx">Field</span>
                <span class="nx">label</span><span class="o">=</span><span class="s2">"Title"</span>
                <span class="nx">name</span><span class="o">=</span><span class="s2">"title"</span>
                <span class="nx">component</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">renderField</span><span class="p">}</span>
                <span class="o">/&gt;</span>
              <span class="o">&lt;</span><span class="nx">button</span> <span class="nx">type</span><span class="o">=</span><span class="s2">"submit"</span> <span class="nx">className</span><span class="o">=</span><span class="s2">"btn btn-primary"</span><span class="o">&gt;</span><span class="nx">Submit</span><span class="o">&lt;</span><span class="err">/button&gt;</span>
            <span class="o">&lt;</span><span class="err">/form&gt;</span>
        <span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">validate</span><span class="p">(</span><span class="nx">values</span><span class="p">)</span> <span class="p">{</span>
    <span class="kr">const</span> <span class="nx">errors</span> <span class="o">=</span> <span class="p">{};</span>
    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">values</span><span class="p">.</span><span class="nx">title</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">errors</span><span class="p">.</span><span class="nx">title</span> <span class="o">=</span> <span class="s2">"enter a title!"</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">errors</span><span class="p">;</span>
<span class="p">}</span>

<span class="kr">export</span> <span class="k">default</span> <span class="nx">reduxForm</span><span class="p">({</span>
    <span class="nx">validate</span><span class="p">,</span>
    <span class="nx">form</span><span class="o">:</span> <span class="s1">'PostsNewForm'</span>
<span class="p">})(</span>
    <span class="nx">connect</span><span class="p">(</span><span class="kc">null</span><span class="p">,{</span> <span class="nx">createPost</span> <span class="p">})(</span><span class="nx">PostsNew</span><span class="p">)</span>
<span class="p">);</span>
</pre></div></div>
</div>
	</td>
</tr>
</table>
<br />
	</body>
</html>
