<html>
	<head><!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-110075493-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-110075493-1');
</script>
<!-- Google AdSense -->
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-6168511236629369",
    enable_page_level_ads: true
  });
</script>

		<meta charset="UTF-8" />
		<title>Qiita Ranking (uasi)</title>
		<link rel="stylesheet" type="text/css" href="../qranking.css">
	</head>
	<body>
<div class="headerContainer">
<h1>Qiitaいいね数ランキング (uasi さんの投稿分)</h1>
</div><!--class="headerContainer"-->
<p><i><img width="16" height="16" src="../thumb-up-120px.png" /></i>が同じ値の場合は投稿日時の新しいものが上位としています。</p>
<p><i><img width="16" height="16" src="../thumb-up-120px.png" /></i>がついていない記事は表示していません。</p>
<table border="1">
<tr>
	<td rowspan="3"><center>uasiさんの<br />1位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>2099</kbd>
		<a target="_blank" href="https://qiita.com/uasi/items/86c3a09d17792ab62dfe">英語のコメントや issue で頻出する略語の意味 (FYI, AFAIK, ...)</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-05-18 15:21:53</center>
	</td>
	<td style="width:200px;">
		@uasi<br />(Increments 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/735/profile-images/1473681692">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Qiita]</b> <b>[Git]</b> <b>[English]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>コメント／編集リクエスト歓迎します。載っていない語があればぜひ追加してください。</p>

<table>
<thead>
<tr>
<th>略語</th>
<th>元の語</th>
<th>意味</th>
</tr>
</thead>
<tbody>
<tr>
<td>AFAICT</td>
<td>As far as I can tell</td>
<td>分かる限りでは○○</td>
</tr>
<tr>
<td>AFAIK</td>
<td>As far as I know</td>
<td>知る限りでは○○</td>
</tr>
<tr>
<td>AKA, aka, a.k.a.</td>
<td>Also known as</td>
<td>○○としても知られる</td>
</tr>
<tr>
<td>ASAP</td>
<td>As soon as possible</td>
<td>できる限り早く</td>
</tr>
<tr>
<td>BTW</td>
<td>By the way</td>
<td>ところで</td>
</tr>
<tr>
<td>c.f., cf.</td>
<td>ラテン語 confer / 英語 compare</td>
<td>○○を参照</td>
</tr>
<tr>
<td>e.g., E.g.</td>
<td>ラテン語 exempli gratia / 英語 for example</td>
<td>たとえば</td>
</tr>
<tr>
<td>ETA</td>
<td>Estimated time of arrival</td>
<td>（作業の）完了予定時刻　（用例は<a href="http://qiita.com/items/86c3a09d17792ab62dfe#comment-54f3d7872ba953941e7d">コメントを参照</a>）</td>
</tr>
<tr>
<td>FTW</td>
<td>For the win</td>
<td>〔何か良い案を挙げて〕これで決まり；これでよし</td>
</tr>
<tr>
<td>FWIW</td>
<td>For what it's worth</td>
<td>役に立つかどうかは分からないが</td>
</tr>
<tr>
<td>FYA</td>
<td>For your action</td>
<td>要対応；要返信</td>
</tr>
<tr>
<td>FYI</td>
<td>For your information</td>
<td>参考；ご参考までに</td>
</tr>
<tr>
<td>HTH</td>
<td>Happy to help</td>
<td>（用例は<a href="http://qiita.com/items/86c3a09d17792ab62dfe#comment-54f3d7872ba953941e7d">コメントを参照</a>）</td>
</tr>
<tr>
<td>i.e., I.e.</td>
<td>ラテン語 id est / 英語 that is</td>
<td>すなわち</td>
</tr>
<tr>
<td>IIRC</td>
<td>If I remember [recall] correctly</td>
<td>記憶が正しければ○○</td>
</tr>
<tr>
<td>IIUC</td>
<td>If I understand correctly</td>
<td>〔相手の発言を受けて〕私の理解が正しければ</td>
</tr>
<tr>
<td>IMO, IMHO</td>
<td>In my (humble) opinion</td>
<td>〔ていねいに〕○○だと思います</td>
</tr>
<tr>
<td>LGTM</td>
<td>Looks good to me</td>
<td>〔提案に対して〕いいと思う；問題ないと思う；〔コードレビュアーが、問題ないコードに対して〕レビュー終了；（コードの）承認</td>
</tr>
<tr>
<td>LOL, lol</td>
<td>Laugh out loud</td>
<td>〔くだけて〕www；（笑）</td>
</tr>
<tr>
<td>NA, N/A</td>
<td>Not applicable; not available</td>
<td>〔表などで、項目の組み合わせが無効な欄に記載して〕該当なし；〔表などで、まだ値がない欄に記載して〕該当値なし</td>
</tr>
<tr>
<td>NB, N.B.</td>
<td>ラテン語 nota bene / 英語 note well</td>
<td>〔通例コメントの先頭で〕特に注意せよ</td>
</tr>
<tr>
<td>NP, np</td>
<td>No problem</td>
<td>〔依頼・謝罪などに対してくだけて〕（問題ないから）気にしないで；大丈夫〔感謝に対してくだけて〕どういたしまして</td>
</tr>
<tr>
<td>OTOH</td>
<td>On the other hand</td>
<td>もう一方では、これに反して</td>
</tr>
<tr>
<td>PTAL</td>
<td>Please take another look</td>
<td>〔再レビューの要求などで〕再度ご確認ください</td>
</tr>
<tr>
<td>PR</td>
<td>Pull request</td>
<td>プルリクエスト</td>
</tr>
<tr>
<td>RFC</td>
<td>Request for comments</td>
<td>〔おもに issue のタグとして〕意見募集</td>
</tr>
<tr>
<td>ROFL, rofl</td>
<td>Rolling on the floor laughing</td>
<td>〔くだけて〕www；（笑）</td>
</tr>
<tr>
<td>RTFM</td>
<td>Read the fucking manual</td>
<td>〔乱暴に〕マニュアルを読め</td>
</tr>
<tr>
<td>TBA</td>
<td>To be advised</td>
<td>あとで連絡する</td>
</tr>
<tr>
<td>TBA</td>
<td>To be announced</td>
<td>あとで発表する</td>
</tr>
<tr>
<td>TBD</td>
<td>To be determined</td>
<td>あとで決める</td>
</tr>
<tr>
<td>TLDR, tldr, TL;DR, tl;dr, TL/DR, tl/dr</td>
<td>Too long, didn't read</td>
<td>長すぎるので読んでいない；（長い文を読みたくない人向けの）要約</td>
</tr>
<tr>
<td>UTSL</td>
<td>Use the source, Luke</td>
<td>〔くだけて〕ソースを読め（スター・ウォーズのセリフとかけた言葉遊び）</td>
</tr>
<tr>
<td>w/</td>
<td>with</td>
<td>（with の省略形）</td>
</tr>
<tr>
<td>w/o</td>
<td>without</td>
<td>（without の省略形）</td>
</tr>
<tr>
<td>WIP</td>
<td>Work in progress</td>
<td>作業中</td>
</tr>
<tr>
<td>WTF, wtf</td>
<td>What the fuck</td>
<td>〔想定外の事・ものにくだけて〕なんてこった；どうすりゃいいんだ；マジかよ</td>
</tr>
<tr>
<td>XD</td>
<td>顔文字：90度右に回すと、目をつぶって大きく口を開けた笑顔に見える</td>
<td>〔くだけたコメントで〕(≧▽≦)</td>
</tr>
</tbody>
</table>

<h1>
<span id="おまけ" class="fragment"></span><a href="#%E3%81%8A%E3%81%BE%E3%81%91"><i class="fa fa-link"></i></a>おまけ</h1>

<p>ソフトウェアのバージョン：</p>

<table>
<thead>
<tr>
<th>略語</th>
<th>元の語</th>
<th>意味</th>
</tr>
</thead>
<tbody>
<tr>
<td>GA</td>
<td>General availability</td>
<td>一般向け提供；正式リリース版</td>
</tr>
<tr>
<td>GM</td>
<td>Golden master</td>
<td>（CD プレスの）原盤；正式リリース版</td>
</tr>
<tr>
<td>RC</td>
<td>Release candidate</td>
<td>リリース候補版</td>
</tr>
<tr>
<td>RTM</td>
<td>Ready to manufacturing</td>
<td>量産可能；正式リリース版</td>
</tr>
</tbody>
</table>

<p>慣用表現：</p>

<table>
<thead>
<tr>
<th>語</th>
<th>直訳</th>
<th>意味</th>
</tr>
</thead>
<tbody>
<tr>
<td>Bikeshed, Bikeshedding</td>
<td>自転車置き場</td>
<td>重要でない議論に時間を取られること（家のペンキを塗り終える前に自転車置き場を何色で塗るか揉めることから）</td>
</tr>
<tr>
<td>Yak shaving</td>
<td>ヤクの毛刈り</td>
<td>ある大きな問題を解決するために、 一見無関係な小さい問題をいくつも片付けること。転じて、大きな問題を解決するつもりが、一見関係しているように見えて実は無用な小さい問題に気を取られること（長く固いヤクの毛を刈ってウールにするには多くの下準備が必要なことから）</td>
</tr>
</tbody>
</table>

<p>略語関連サイト：</p>

<ul>
<li><a href="http://www.abbreviations.com/category/COMPUTING" rel="nofollow noopener" target="_blank">Abbreviations.com - Computing Abbreviations</a></li>
<li><a href="http://www.acronymfinder.com" rel="nofollow noopener" target="_blank">Acronym Finder</a></li>
</ul>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>uasiさんの<br />2位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>903</kbd>
		<a target="_blank" href="https://qiita.com/uasi/items/80660f9aa20afaf671f3">Objective-C のプロパティ属性のガイドライン</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-05-07 16:50:41</center>
	</td>
	<td style="width:200px;">
		@uasi<br />(Increments 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/735/profile-images/1473681692">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Objective-C]</b> <b>[Mac]</b> <b>[Xcode]</b> <b>[iOS]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>Objective-C のプロパティの属性を指定するとき従うべきガイドラインをまとめた。</p>

<h2>
<span id="できる限り-nonatomic-を指定する" class="fragment"></span><a href="#%E3%81%A7%E3%81%8D%E3%82%8B%E9%99%90%E3%82%8A-nonatomic-%E3%82%92%E6%8C%87%E5%AE%9A%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>できる限り <code>nonatomic</code> を指定する</h2>

<p><code>atomic</code> にしてもパフォーマンスが悪化するだけでほとんどメリットがない（参考：<a href="http://stackoverflow.com/questions/588866/atomic-vs-nonatomic-properties" rel="nofollow noopener" target="_blank">StackOverflow - Atomic vs nonatomic properties</a>）。</p>

<div class="code-frame" data-lang="objc"><div class="highlight"><pre><span></span><span class="k">@property</span> <span class="p">(</span><span class="k">nonatomic</span><span class="p">)</span> <span class="kt">id</span> <span class="n">value</span><span class="p">;</span>
</pre></div></div>

<p><code>nonatomic</code> と <code>atomic</code> の使い分けの指針は次のとおり：</p>

<blockquote>
<ul>
<li>参照型: メモリアドレスのみの書き込みなので、常にnonatomicでよい</li>
<li>プリミティブ型:

<ul>
<li>int, BOOL等ワンステップでの書き込みが可能: 常にnonatomicでよい</li>
<li>単一のスレッドからしかアクセスされない: 設計に気をつけつつnonatomic推奨</li>
<li>複数のスレッドからのアクセスがあり、long,構造体などサイズの大きい値: atomic推奨</li>
</ul>
</li>
</ul>
</blockquote>

<p>(<a href="#comment-bcdf4e94f134605184e8">thx to</a> <a href="/takasek" class="user-mention js-hovercard" title="takasek" data-hovercard-target-type="user" data-hovercard-target-name="takasek">@takasek</a>)</p>

<p>複数のスレッドから同時に読み書きが行われる可能性があるプロパティには <code>atomic</code> を指定する。 <code>atomic</code> を指定することで getter と setter が排他的に実行されるようになり、値の書き込みに複数のメモリ操作命令が必要な型（構造体など）が中間状態で読み出されることがなくなる。</p>

<p><code>atomic</code> を指定してもスレッドセーフになるとは限らない点に注意すること。たとえば、 <code>obj.atomicInt++</code> を複数スレッドで同時に実行すると、実行した回数より値が小さくなることがある（参考：<a href="http://ameblo.jp/tomotaken/entry-10818354164.html" rel="nofollow noopener" target="_blank">Objective-Cでatomicな宣言プロパティがatomicであるとは限らない話｜スマホとアドテク開発記</a>）。</p>

<p>スレッドセーフ性を保証したいときは、 <code>atomic</code> よりも <code>@synchronized</code> や <code>NSLock</code> などの排他制御のほうが適切なこともあるので、よく検討すること。</p>

<h2>
<span id="strong-と-assign-は省略してもよい" class="fragment"></span><a href="#strong-%E3%81%A8-assign-%E3%81%AF%E7%9C%81%E7%95%A5%E3%81%97%E3%81%A6%E3%82%82%E3%82%88%E3%81%84"><i class="fa fa-link"></i></a><code>strong</code> と <code>assign</code> は省略してもよい</h2>

<p>オブジェクト型のプロパティは <code>strong</code> が、それ以外の型のプロパティは <code>assign</code> がデフォルトであるため、省略することができる。 <code>weak</code> や <code>copy</code> のプロパティと桁をそろえるために、あるいは既存のコードとスタイルを一致させるために、明示してもよい。</p>

<p>注：Xcode 4.2.xまでは、オブジェクト型プロパティの <code>strong</code> の省略は認められない。</p>

<div class="code-frame" data-lang="objc"><div class="highlight"><pre><span></span><span class="c1">// 省略</span>
<span class="k">@property</span> <span class="p">(</span><span class="k">nonatomic</span><span class="p">)</span> <span class="kt">id</span> <span class="n">object</span><span class="p">;</span>
<span class="k">@property</span> <span class="p">(</span><span class="k">nonatomic</span><span class="p">)</span> <span class="n">NSInteger</span> <span class="n">primitiveValue</span><span class="p">;</span>

<span class="c1">// または明示</span>
<span class="k">@property</span> <span class="p">(</span><span class="k">nonatomic</span><span class="p">,</span> <span class="k">strong</span><span class="p">)</span> <span class="kt">id</span> <span class="n">object</span><span class="p">;</span>
<span class="k">@property</span> <span class="p">(</span><span class="k">nonatomic</span><span class="p">,</span> <span class="k">assign</span><span class="p">)</span> <span class="n">NSInteger</span> <span class="n">primitiveValue</span><span class="p">;</span>
</pre></div></div>

<h2>
<span id="outlet-には基本的に-weak-を指定する" class="fragment"></span><a href="#outlet-%E3%81%AB%E3%81%AF%E5%9F%BA%E6%9C%AC%E7%9A%84%E3%81%AB-weak-%E3%82%92%E6%8C%87%E5%AE%9A%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>Outlet には基本的に <code>weak</code> を指定する</h2>

<p>Outlet が参照するオブジェクトは、大抵は何らかのビューのサブビューである。サブビューはそのスーパービューによって保持されるので、 outlet は <code>weak</code>で構わない。 <code>weak</code> にすることで意図しない循環参照を予防できる。ただし、次のようなオブジェクトを参照する outlet は <code>strong</code> にしなければならない：</p>

<ul>
<li>Nib のトップレベルオブジェクト（ウィンドウ、他のビューに属さないビュー、 <code>NSObjectController</code> などビュー以外のオブジェクト）</li>
<li>サブビューのうち、 <code>-removeFromSuperview</code> を呼ぶなどして一時的にビュー階層から取り除かれる可能性があるもの</li>
</ul>

<p>（参考：<a href="https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/LoadingResources/CocoaNibs/CocoaNibs.html#//apple_ref/doc/uid/10000051i-CH4-SW6" rel="nofollow noopener" target="_blank">Managing the Lifetimes of Objects from Nib Files</a>、<a href="http://blog.natsuapps.com/2011/11/ios5-arc-weakproperty-for-outle.html" rel="nofollow noopener" target="_blank">[iOS5] ARC : Outletにはweakプロパティを使おう</a>）</p>

<div class="code-frame" data-lang="objc"><div class="highlight"><pre><span></span><span class="k">@property</span> <span class="p">(</span><span class="k">nonatomic</span><span class="p">,</span> <span class="k">weak</span><span class="p">)</span> <span class="kt">IBOutlet</span> <span class="n">NSView</span> <span class="o">*</span><span class="n">view</span><span class="p">;</span>
<span class="k">@property</span> <span class="p">(</span><span class="k">nonatomic</span><span class="p">,</span> <span class="k">strong</span><span class="p">)</span> <span class="kt">IBOutlet</span> <span class="n">NSWindow</span> <span class="o">*</span><span class="n">window</span><span class="p">;</span>
<span class="k">@property</span> <span class="p">(</span><span class="k">nonatomic</span><span class="p">,</span> <span class="k">strong</span><span class="p">)</span> <span class="kt">IBOutlet</span> <span class="n">NSView</span> <span class="o">*</span><span class="n">removableView</span><span class="p">;</span>
</pre></div></div>

<h2>
<span id="デリゲートプロパティには-weak-を指定する" class="fragment"></span><a href="#%E3%83%87%E3%83%AA%E3%82%B2%E3%83%BC%E3%83%88%E3%83%97%E3%83%AD%E3%83%91%E3%83%86%E3%82%A3%E3%81%AB%E3%81%AF-weak-%E3%82%92%E6%8C%87%E5%AE%9A%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>デリゲートプロパティには <code>weak</code> を指定する</h2>

<p>あるオブジェクトをそのオブジェクト自身のデリゲートにするような状況では循環参照が発生するため、デリゲートプロパティを <code>strong</code> にするとオブジェクトが解放されなくなる。特別な事情がなければデリゲートプロパティは <code>weak</code> にすべきである。</p>

<p>Cocoa のデリゲートプロパティは、 <code>NSURLConnection</code> や <code>CAAnimation</code> などの例外を除き <code>weak</code> か <code>unsafe_unretained</code> になっている。</p>

<div class="code-frame" data-lang="objc"><div class="highlight"><pre><span></span><span class="k">@property</span> <span class="p">(</span><span class="k">nonatomic</span><span class="p">,</span> <span class="k">weak</span><span class="p">)</span> <span class="kt">id</span> <span class="n">delegate</span><span class="p">;</span>
</pre></div></div>

<h2>
<span id="weak-参照してはいけないクラスに注意する" class="fragment"></span><a href="#weak-%E5%8F%82%E7%85%A7%E3%81%97%E3%81%A6%E3%81%AF%E3%81%84%E3%81%91%E3%81%AA%E3%81%84%E3%82%AF%E3%83%A9%E3%82%B9%E3%81%AB%E6%B3%A8%E6%84%8F%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a><code>weak</code> 参照してはいけないクラスに注意する</h2>

<p>OS X では、 UI に関係するクラスのうちのいくつかが <code>weak</code> 参照に対応していない（参考：<a href="http://qiita.com/uasi/items/ee71a476ec3ef9c3c10d" id="reference-6092b60e866b12c62f09"><br>
weak 参照してはいけない Cocoa のクラス一覧</a>）。これらのクラスを弱参照したい場合は <code>unsafe_unretained</code> 参照を使うこと。</p>

<h2>
<span id="mutable-なサブクラスがある型には-copy-を指定する" class="fragment"></span><a href="#mutable-%E3%81%AA%E3%82%B5%E3%83%96%E3%82%AF%E3%83%A9%E3%82%B9%E3%81%8C%E3%81%82%E3%82%8B%E5%9E%8B%E3%81%AB%E3%81%AF-copy-%E3%82%92%E6%8C%87%E5%AE%9A%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>Mutable なサブクラスがある型には <code>copy</code> を指定する</h2>

<p><code>NSString</code> 型などの、対応する <code>NSMutable...</code> 型があるプロパティには <code>copy</code> を指定する。Mutable なオブジェクトの <code>copy</code> メソッドは immutable なオブジェクトを返すため、プロパティにセットされる値が immutable であることを保証できる。</p>

<p>Immutable オブジェクトの <code>copy</code> メソッドは、オブジェクトをコピーせずインスタンス自身を返すため、パフォーマンスが悪化することはない。</p>

<div class="code-frame" data-lang="objc"><div class="highlight"><pre><span></span><span class="k">@property</span> <span class="p">(</span><span class="k">nonatomic</span><span class="p">,</span> <span class="k">copy</span><span class="p">)</span> <span class="bp">NSString</span> <span class="o">*</span><span class="n">string</span><span class="p">;</span>
</pre></div></div>

<h2>
<span id="readonly-と対応するプロパティには-readwrite-を明示する" class="fragment"></span><a href="#readonly-%E3%81%A8%E5%AF%BE%E5%BF%9C%E3%81%99%E3%82%8B%E3%83%97%E3%83%AD%E3%83%91%E3%83%86%E3%82%A3%E3%81%AB%E3%81%AF-readwrite-%E3%82%92%E6%98%8E%E7%A4%BA%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a><code>readonly</code> と対応するプロパティには <code>readwrite</code> を明示する</h2>

<p>あるプロパティをクラス外部からは <code>readonly</code> にする場合、クラス内での定義には <code>readwrite</code> を明示する：</p>

<div class="code-frame" data-lang="objc"><div class="highlight"><pre><span></span><span class="cm">/*** Foo.h ***/</span>
<span class="k">@interface</span> <span class="nc">Foo</span>
<span class="k">@property</span> <span class="p">(</span><span class="k">nonatomic</span><span class="p">,</span> <span class="k">readonly</span><span class="p">)</span> <span class="kt">id</span> <span class="n">value</span><span class="p">;</span>
<span class="k">@end</span>

<span class="cm">/*** Foo.m ***/</span>
<span class="k">@interface</span> <span class="nc">Foo</span> <span class="p">()</span>
<span class="k">@property</span> <span class="p">(</span><span class="k">nonatomic</span><span class="p">,</span> <span class="k">readwrite</span><span class="p">)</span> <span class="kt">id</span> <span class="n">value</span><span class="p">;</span>
<span class="k">@end</span>
</pre></div></div>

<p><code>readwrite</code> はデフォルトであり省略可能だが、クラス外に <code>readonly</code> で公開するプロパティだけ <code>readwrite</code> を明示するルールにすると分かりやすい。</p>

<h2>
<span id="あるプロパティをヘッダと実装の両方に書くときはオーナーシップ属性を一致させる" class="fragment"></span><a href="#%E3%81%82%E3%82%8B%E3%83%97%E3%83%AD%E3%83%91%E3%83%86%E3%82%A3%E3%82%92%E3%83%98%E3%83%83%E3%83%80%E3%81%A8%E5%AE%9F%E8%A3%85%E3%81%AE%E4%B8%A1%E6%96%B9%E3%81%AB%E6%9B%B8%E3%81%8F%E3%81%A8%E3%81%8D%E3%81%AF%E3%82%AA%E3%83%BC%E3%83%8A%E3%83%BC%E3%82%B7%E3%83%83%E3%83%97%E5%B1%9E%E6%80%A7%E3%82%92%E4%B8%80%E8%87%B4%E3%81%95%E3%81%9B%E3%82%8B"><i class="fa fa-link"></i></a>あるプロパティをヘッダと実装の両方に書くときはオーナーシップ属性を一致させる</h2>

<p>下の例のようにオーナーシップ属性が一致していないと、 "ARC forbids synthesizing a property of an Objective-C object with unspecified ownership or storage attribute" とエラーが出る。</p>

<div class="code-frame" data-lang="objc"><div class="highlight"><pre><span></span><span class="c1">// 誤った指定の例</span>

<span class="cm">/*** Foo.h ***/</span>
<span class="k">@interface</span> <span class="nc">Foo</span>
<span class="k">@property</span> <span class="p">(</span><span class="k">nonatomic</span><span class="p">,</span> <span class="k">readonly</span><span class="p">)</span> <span class="kt">id</span> <span class="n">value</span><span class="p">;</span> <span class="c1">// 暗黙的に `strong` を指定</span>
<span class="k">@end</span>

<span class="cm">/*** Foo.m ***/</span>
<span class="k">@interface</span> <span class="nc">Foo</span> <span class="p">()</span>
<span class="k">@property</span> <span class="p">(</span><span class="k">nonatomic</span><span class="p">,</span> <span class="k">copy</span><span class="p">,</span> <span class="k">readwrite</span><span class="p">)</span> <span class="kt">id</span> <span class="n">value</span><span class="p">;</span> <span class="c1">// `copy` を指定</span>
<span class="k">@end</span>
</pre></div></div>

<h2>
<span id="ブロック型のプロパティには-copy-を指定する" class="fragment"></span><a href="#%E3%83%96%E3%83%AD%E3%83%83%E3%82%AF%E5%9E%8B%E3%81%AE%E3%83%97%E3%83%AD%E3%83%91%E3%83%86%E3%82%A3%E3%81%AB%E3%81%AF-copy-%E3%82%92%E6%8C%87%E5%AE%9A%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>ブロック型のプロパティには <code>copy</code> を指定する</h2>

<p>関数本体の中に記述されたブロックリテラルの記憶領域はスタックに確保される。ブロックオブジェクトをプロパティにセットするためには、 <code>copy</code> メソッドを呼んで記憶領域がヒープに確保されたブロックを作らなければならない。</p>

<div class="code-frame" data-lang="objc"><div class="highlight"><pre><span></span><span class="k">typedef</span> <span class="nf">void</span> <span class="p">(</span><span class="o">^</span><span class="n">MyCallback</span><span class="p">)(</span><span class="kt">void</span><span class="p">);</span>
<span class="k">@property</span> <span class="p">(</span><span class="k">nonatomic</span><span class="p">,</span> <span class="k">copy</span><span class="p">)</span> <span class="n">MyCallback</span> <span class="n">callback</span><span class="p">;</span>
</pre></div></div>

<p>ブロック型のプロパティにオーナーシップ属性を指定しないと、暗黙的な <code>strong</code> にはならず、  "ARC forbids synthesizing a property of an Objective-C object with unspecified ownership or storage attribute" とエラーが出る。明示的に <code>strong</code> を指定しても警告は出ないが、そうすべきではない。</p>

<h2>
<span id="bool-型のプロパティには-is-で始まる名前の-getter-を指定する" class="fragment"></span><a href="#bool-%E5%9E%8B%E3%81%AE%E3%83%97%E3%83%AD%E3%83%91%E3%83%86%E3%82%A3%E3%81%AB%E3%81%AF-is-%E3%81%A7%E5%A7%8B%E3%81%BE%E3%82%8B%E5%90%8D%E5%89%8D%E3%81%AE-getter-%E3%82%92%E6%8C%87%E5%AE%9A%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>BOOL 型のプロパティには is で始まる名前の getter を指定する</h2>

<p>getter をメソッドとして呼び出すときは名前が is で始まるほうが自然。</p>

<div class="code-frame" data-lang="objc"><div class="highlight"><pre><span></span><span class="k">@property</span> <span class="p">(</span><span class="k">readonly</span><span class="p">,</span> <span class="k">getter</span><span class="o">=</span><span class="n">isBlue</span><span class="p">)</span> <span class="kt">BOOL</span> <span class="n">blue</span><span class="p">;</span>
</pre></div></div>

<div class="code-frame" data-lang="objc"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="p">(</span><span class="n">color</span><span class="p">.</span><span class="n">blue</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>
<span class="k">if</span> <span class="p">(</span><span class="n">color</span><span class="p">.</span><span class="n">isBlue</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>
<span class="k">if</span> <span class="p">([</span><span class="n">color</span> <span class="n">isBlue</span><span class="p">])</span> <span class="p">{</span> <span class="p">}</span>
</pre></div></div>

<p>（参考：<a href="https://developer.apple.com/library/ios/releasenotes/ObjectiveC/ModernizationObjC/AdoptingModernObjective-C/AdoptingModernObjective-C.html#//apple_ref/doc/uid/TP40014150-CH1-SW4" rel="nofollow noopener" target="_blank">Adopting Modern Objective-C</a>）</p>

<h1>
<span id="まとめ" class="fragment"></span><a href="#%E3%81%BE%E3%81%A8%E3%82%81"><i class="fa fa-link"></i></a>まとめ</h1>

<div class="code-frame" data-lang="objc"><div class="highlight"><pre><span></span><span class="cm">/*** Foo.h ***/</span>

<span class="k">@interface</span> <span class="nc">Foo</span>

<span class="c1">// strong や assign は省略可</span>
<span class="k">@property</span> <span class="p">(</span><span class="k">nonatomic</span><span class="p">)</span> <span class="kt">id</span> <span class="n">object</span><span class="p">;</span>
<span class="k">@property</span> <span class="p">(</span><span class="k">nonatomic</span><span class="p">)</span> <span class="n">NSInteger</span> <span class="n">primitiveValue</span><span class="p">;</span>

<span class="c1">// Outlet は weak にする（トップレベルオブジェクトは strong）</span>
<span class="k">@property</span> <span class="p">(</span><span class="k">nonatomic</span><span class="p">,</span> <span class="k">weak</span><span class="p">)</span> <span class="kt">IBOutlet</span> <span class="n">NSView</span> <span class="o">*</span><span class="n">view</span><span class="p">;</span>
<span class="k">@property</span> <span class="p">(</span><span class="k">nonatomic</span><span class="p">,</span> <span class="k">strong</span><span class="p">)</span> <span class="kt">IBOutlet</span> <span class="n">NSWindow</span> <span class="o">*</span><span class="n">window</span><span class="p">;</span>

<span class="c1">// Delegate は weak にする</span>
<span class="k">@property</span> <span class="p">(</span><span class="k">nonatomic</span><span class="p">,</span> <span class="k">weak</span><span class="p">)</span> <span class="kt">id</span> <span class="n">delegate</span><span class="p">;</span>

<span class="c1">// Mutable なサブクラスがある型は copy にする</span>
<span class="k">@property</span> <span class="p">(</span><span class="k">nonatomic</span><span class="p">,</span> <span class="k">copy</span><span class="p">)</span> <span class="bp">NSString</span> <span class="o">*</span><span class="n">possiblyMutable</span><span class="p">;</span>

<span class="c1">// 後述</span>
<span class="k">@property</span> <span class="p">(</span><span class="k">nonatomic</span><span class="p">,</span> <span class="k">readonly</span><span class="p">)</span> <span class="kt">id</span> <span class="n">internallyWritable</span><span class="p">;</span>
<span class="k">@property</span> <span class="p">(</span><span class="k">nonatomic</span><span class="p">,</span> <span class="k">copy</span><span class="p">,</span> <span class="k">readonly</span><span class="p">)</span> <span class="kt">id</span> <span class="n">internallyWritableByCopy</span><span class="p">;</span>

<span class="c1">// ブロック型は copy にする</span>
<span class="k">typedef</span> <span class="nf">void</span> <span class="p">(</span><span class="o">^</span><span class="n">MyCallback</span><span class="p">)(</span><span class="kt">void</span><span class="p">);</span>
<span class="k">@property</span> <span class="p">(</span><span class="k">nonatomic</span><span class="p">,</span> <span class="k">copy</span><span class="p">)</span> <span class="n">MyCallback</span> <span class="n">callback</span><span class="p">;</span>

<span class="c1">// BOOL 型の getter 名は is で始める</span>
<span class="k">@property</span> <span class="p">(</span><span class="k">nonatomic</span><span class="p">,</span> <span class="k">getter</span><span class="o">=</span><span class="n">isBlue</span><span class="p">)</span> <span class="kt">BOOL</span> <span class="n">blue</span><span class="p">;</span>

<span class="k">@end</span>

<span class="cm">/*** Foo.m ***/</span>

<span class="k">@interface</span> <span class="nc">Foo</span> <span class="p">()</span>

<span class="c1">// 外部から readonly にするプロパティには readwrite を明示する</span>
<span class="k">@property</span> <span class="p">(</span><span class="k">nonatomic</span><span class="p">,</span> <span class="k">readwrite</span><span class="p">)</span> <span class="kt">id</span> <span class="n">internallyWritable</span><span class="p">;</span>
<span class="k">@property</span> <span class="p">(</span><span class="k">nonatomic</span><span class="p">,</span> <span class="k">copy</span><span class="p">,</span> <span class="k">readwrite</span><span class="p">)</span> <span class="kt">id</span> <span class="n">internallyWritableByCopy</span><span class="p">;</span>

<span class="k">@end</span>

</pre></div></div>

<h1>
<span id="属性の順序について" class="fragment"></span><a href="#%E5%B1%9E%E6%80%A7%E3%81%AE%E9%A0%86%E5%BA%8F%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6"><i class="fa fa-link"></i></a>属性の順序について</h1>

<p>属性を並べる順番は任意だが、既存のコードにプロパティを追加するなら周りのスタイルに合わせるべきである。新規に書く場合、筆者は以下の順番を推奨する：</p>

<div class="code-frame" data-lang="objc"><div class="highlight"><pre><span></span><span class="k">@property</span> <span class="p">(</span><span class="k">nonatomic</span><span class="p">,</span> <span class="k">strong</span><span class="p">,</span> <span class="k">readonly</span><span class="p">,</span> <span class="k">getter</span><span class="o">=</span><span class="n">foo</span><span class="p">,</span> <span class="k">setter</span><span class="o">=</span><span class="nl">setFoo</span><span class="p">:)</span> <span class="kt">id</span> <span class="n">foo</span><span class="p">;</span>
</pre></div></div>

<p><code>nonatomic</code> はほぼ常に指定されるので、 <code>@property (nonatomic</code> までを定型文としてとらえる。 <code>strong</code> や <code>weak</code> も（デフォルト値を省略しないなら）常に必要なので2番目に書く。 <code>getter</code> と <code>setter</code> は最後に指定する。仮にその後に属性を書くと、 getter/setter 名が長い場合に目で追いづらくなるだろう。</p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>uasiさんの<br />3位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>805</kbd>
		<a target="_blank" href="https://qiita.com/uasi/items/c4288dd835a65eb9d709">Zsh 入門者のための超速設定ガイド</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2014-02-02 14:00:14</center>
	</td>
	<td style="width:200px;">
		@uasi<br />(Increments 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/735/profile-images/1473681692">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Zsh]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;">
<h1>
<span id="はじめに" class="fragment"></span><a href="#%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB"><i class="fa fa-link"></i></a>はじめに</h1>

<p>このガイドでは、はじめて Zsh を使う人や Zsh の便利な使い方を知らない人に向けて、いくつかの便利な設定と操作方法を紹介します。また、 Zsh についての疑問を素早く解決できるよう、マニュアルの調べ方や他のドキュメントへのリンクも盛り込んであります。</p>

<p>このガイドでカバーしきれていない設定や分かりやすいドキュメントをご存知でしたら、ぜひ編集リクエストやコメントでお知らせください。</p>

<h1>
<span id="設定ファイル" class="fragment"></span><a href="#%E8%A8%AD%E5%AE%9A%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB"><i class="fa fa-link"></i></a>設定ファイル</h1>

<p>ここでは主に普段のキー入力数を大幅に減らせるような設定を紹介します。</p>

<h2>
<span id="zshrc" class="fragment"></span><a href="#zshrc"><i class="fa fa-link"></i></a>.zshrc</h2>

<p><code>~/.zshrc</code> は Zsh のインタラクティブシェル（ユーザーがコマンドを入力する画面）が起動した際に読み込まれる設定ファイルです。 Zsh スクリプトを実行したり、 <code>zsh -c 'command...'</code> でコマンドを実行したりしたときには読み込まれません。このファイルには主に Zsh の操作に関する設定を記述します。</p>

<div class="code-frame" data-lang="bash">
<div class="code-lang"><span class="bold">.zshrc</span></div>
<div class="highlight"><pre><span></span><span class="c1"># Emacs ライクな操作を有効にする（文字入力中に Ctrl-F,B でカーソル移動など）</span>
<span class="c1"># Vi ライクな操作が好みであれば `bindkey -v` とする</span>
bindkey -e

<span class="c1"># 自動補完を有効にする</span>
<span class="c1"># コマンドの引数やパス名を途中まで入力して &lt;Tab&gt; を押すといい感じに補完してくれる</span>
<span class="c1"># 例： `cd path/to/&lt;Tab&gt;`, `ls -&lt;Tab&gt;`</span>
autoload -U compinit<span class="p">;</span> compinit

<span class="c1"># 入力したコマンドが存在せず、かつディレクトリ名と一致するなら、ディレクトリに cd する</span>
<span class="c1"># 例： /usr/bin と入力すると /usr/bin ディレクトリに移動</span>
setopt auto_cd

<span class="c1"># ↑を設定すると、 .. とだけ入力したら1つ上のディレクトリに移動できるので……</span>
<span class="c1"># 2つ上、3つ上にも移動できるようにする</span>
<span class="nb">alias</span> ...<span class="o">=</span><span class="s1">'cd ../..'</span>
<span class="nb">alias</span> ....<span class="o">=</span><span class="s1">'cd ../../..'</span>

<span class="c1"># "~hoge" が特定のパス名に展開されるようにする（ブックマークのようなもの）</span>
<span class="c1"># 例： cd ~hoge と入力すると /long/path/to/hogehoge ディレクトリに移動</span>
<span class="nb">hash</span> -d <span class="nv">hoge</span><span class="o">=</span>/long/path/to/hogehoge

<span class="c1"># cd した先のディレクトリをディレクトリスタックに追加する</span>
<span class="c1"># ディレクトリスタックとは今までに行ったディレクトリの履歴のこと</span>
<span class="c1"># `cd +&lt;Tab&gt;` でディレクトリの履歴が表示され、そこに移動できる</span>
setopt auto_pushd

<span class="c1"># pushd したとき、ディレクトリがすでにスタックに含まれていればスタックに追加しない</span>
setopt pushd_ignore_dups

<span class="c1"># 拡張 glob を有効にする</span>
<span class="c1"># glob とはパス名にマッチするワイルドカードパターンのこと</span>
<span class="c1"># （たとえば `mv hoge.* ~/dir` における "*"）</span>
<span class="c1"># 拡張 glob を有効にすると # ~ ^ もパターンとして扱われる</span>
<span class="c1"># どういう意味を持つかは `man zshexpn` の FILENAME GENERATION を参照</span>
setopt extended_glob

<span class="c1"># 入力したコマンドがすでにコマンド履歴に含まれる場合、履歴から古いほうのコマンドを削除する</span>
<span class="c1"># コマンド履歴とは今まで入力したコマンドの一覧のことで、上下キーでたどれる</span>
setopt hist_ignore_all_dups

<span class="c1"># コマンドがスペースで始まる場合、コマンド履歴に追加しない</span>
<span class="c1"># 例： &lt;Space&gt;echo hello と入力</span>
setopt hist_ignore_space

<span class="c1"># &lt;Tab&gt; でパス名の補完候補を表示したあと、</span>
<span class="c1"># 続けて &lt;Tab&gt; を押すと候補からパス名を選択できるようになる</span>
<span class="c1"># 候補を選ぶには &lt;Tab&gt; か Ctrl-N,B,F,P</span>
zstyle <span class="s1">':completion:*:default'</span> menu <span class="k">select</span><span class="o">=</span><span class="m">1</span>

<span class="c1"># 単語の一部として扱われる文字のセットを指定する</span>
<span class="c1"># ここではデフォルトのセットから / を抜いたものとする</span>
<span class="c1"># こうすると、 Ctrl-W でカーソル前の1単語を削除したとき、 / までで削除が止まる</span>
<span class="nv">WORDCHARS</span><span class="o">=</span><span class="s1">'*?_-.[]~=&amp;;!#$%^(){}&lt;&gt;'</span>
</pre></div>
</div>

<p>→<a href="http://qiita.com/uasi/items/c4288dd835a65eb9d709#1-5">その他のオプションの調べ方</a></p>

<h2>
<span id="zshenv" class="fragment"></span><a href="#zshenv"><i class="fa fa-link"></i></a>.zshenv</h2>

<p><code>~/.zshenv</code> は Zsh が起動した際に必ず読み込まれる設定ファイルです。ここには主に環境変数などの、操作に関係のない設定を記述します。</p>

<div class="code-frame" data-lang="bash">
<div class="code-lang"><span class="bold">.zshenv</span></div>
<div class="highlight"><pre><span></span><span class="c1"># PATH の設定（お好みで）</span>
<span class="nb">export</span> <span class="nv">PATH</span><span class="o">=</span><span class="s2">"/usr/local/bin:</span><span class="nv">$PATH</span><span class="s2">"</span>

<span class="c1"># PATH の内容と同期している配列変数 path も使える</span>
<span class="nv">path</span><span class="o">=(</span>
    ~/bin
    <span class="nv">$path</span>
<span class="o">)</span>

<span class="c1"># もし .zshenv を複数のマシンで共有していて、</span>
<span class="c1"># あるマシンには存在するが別のマシンには存在しないパスを PATH に追加したいなら、</span>
<span class="c1"># パスの後ろに (N-/) をつけるとよい</span>
<span class="c1"># こうすると、パスの場所にディレクトリが存在しない場合、パスが空文字列に置換される</span>
<span class="c1"># 詳細は `man zshexpn` の Glob Qualifiers を参照</span>
<span class="nv">path</span><span class="o">=(</span>
    /machine1/only/bin<span class="o">(</span>N-/<span class="o">)</span>
    <span class="nv">$path</span>
<span class="o">)</span>
</pre></div>
</div>

<h1>
<span id="よく使うキー操作emacs-キーバインドの場合" class="fragment"></span><a href="#%E3%82%88%E3%81%8F%E4%BD%BF%E3%81%86%E3%82%AD%E3%83%BC%E6%93%8D%E4%BD%9Cemacs-%E3%82%AD%E3%83%BC%E3%83%90%E3%82%A4%E3%83%B3%E3%83%89%E3%81%AE%E5%A0%B4%E5%90%88"><i class="fa fa-link"></i></a>よく使うキー操作（Emacs キーバインドの場合）</h1>

<table>
<thead>
<tr>
<th>キー</th>
<th>意味</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>カーソル操作</strong></td>
<td></td>
</tr>
<tr>
<td>Ctrl-F</td>
<td>カーソルを1文字進める</td>
</tr>
<tr>
<td>Ctrl-B</td>
<td>カーソルを1文字戻す</td>
</tr>
<tr>
<td>Ctrl-A</td>
<td>カーソルを行頭に移動</td>
</tr>
<tr>
<td>Ctrl-E</td>
<td>カーソルを行末に移動</td>
</tr>
<tr>
<td><strong>文字削除</strong></td>
<td></td>
</tr>
<tr>
<td>Ctrl-W</td>
<td>1単語削除</td>
</tr>
<tr>
<td>Ctrl-K</td>
<td>カーソルから行末まで削除</td>
</tr>
<tr>
<td>Ctrl-Y</td>
<td>直前に削除した文字列を貼り付け</td>
</tr>
<tr>
<td><strong>コマンド履歴</strong></td>
<td></td>
</tr>
<tr>
<td>Ctrl-P</td>
<td>履歴を1つ戻る</td>
</tr>
<tr>
<td>Ctrl-N</td>
<td>履歴を1つ進める</td>
</tr>
<tr>
<td>Ctrl-R</td>
<td>履歴を新しい順に検索（検索中に Ctrl-R/Ctrl-S を押すと1つ古い/新しい候補を表示）</td>
</tr>
<tr>
<td>Ctrl-G（履歴表示中）</td>
<td>履歴表示をキャンセル</td>
</tr>
<tr>
<td><strong>その他</strong></td>
<td></td>
</tr>
<tr>
<td>Esc を押して Q</td>
<td>現在入力中のコマンドをスタックに退避してプロンプトを空にする（何か別のコマンドを実行すると、退避したコマンドがスタックから取り出される）。コマンド入力中に別のコマンドを実行したくなったとき便利</td>
</tr>
</tbody>
</table>

<h2>
<span id="その他のキーバインドの調べ方" class="fragment"></span><a href="#%E3%81%9D%E3%81%AE%E4%BB%96%E3%81%AE%E3%82%AD%E3%83%BC%E3%83%90%E3%82%A4%E3%83%B3%E3%83%89%E3%81%AE%E8%AA%BF%E3%81%B9%E6%96%B9"><i class="fa fa-link"></i></a>その他のキーバインドの調べ方</h2>

<p>キーに割り当てられているアクションの一覧は <code>bindkey -L</code> で表示できます：</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>% bindkey -L
bindkey "^@" set-mark-command
bindkey "^A" beginning-of-line
bindkey "^B" backward-char
...
</pre></div></div>

<p>"^@" は Ctrl-@ を表し、続く set-mark-command はそのキーを押すと実行されるアクションの名前です。 Zsh ではアクションを定義する実体（組み込み関数または任意のユーザー定義の関数）のことをウィジェットと呼びます。ウィジェットの説明を読むには <code>man zshzle</code> の中をウィジェットの名前で検索します。</p>

<h1>
<span id="便利なコマンドや記法" class="fragment"></span><a href="#%E4%BE%BF%E5%88%A9%E3%81%AA%E3%82%B3%E3%83%9E%E3%83%B3%E3%83%89%E3%82%84%E8%A8%98%E6%B3%95"><i class="fa fa-link"></i></a>便利なコマンドや記法</h1>

<ul>
<li>
<a href="http://qiita.com/usamik26/items/fcb720ba646e5b0b4684" id="reference-cbb597e2fc76bc6e3d0e">Zsh - zmvコマンドで複数ファイルの一括リネーム - Qiita [キータ]</a>：<code>zmv *.hoge *.fuga</code> で拡張子を一括で付け替えたりできる</li>
<li>
<a href="http://qiita.com/mollifier/items/1c4a4930a89aa75e5ced" id="reference-4b47c9227ba17b99a750">zsh で find を使わずに簡単にファイルを絞り込む - Qiita [キータ]</a>：<code>echo *(/)</code> でディレクトリにだけマッチするなど</li>
</ul>

<p>Zsh Advent Calendar にはたくさんの tips が集められています。</p>

<ul>
<li><a href="http://qiita.com/advent-calendar/2013/zsh">zsh Advent Calendar 2013 - Qiita [キータ]</a></li>
<li><a href="http://qiita.com/advent-calendar/2012/zsh">zsh Advent Calendar 2012 - Qiita [キータ]</a></li>
</ul>

<h1>
<span id="マニュアルの調べ方" class="fragment"></span><a href="#%E3%83%9E%E3%83%8B%E3%83%A5%E3%82%A2%E3%83%AB%E3%81%AE%E8%AA%BF%E3%81%B9%E6%96%B9"><i class="fa fa-link"></i></a>マニュアルの調べ方</h1>

<table>
<thead>
<tr>
<th>マニュアル</th>
<th>内容</th>
</tr>
</thead>
<tbody>
<tr>
<td>man zsh</td>
<td>zsh のマニュアルの一覧と zsh の概要</td>
</tr>
<tr>
<td>man zshmisc</td>
<td>スクリプトの構文、リダイレクトやパイプの書き方、特殊関数の一覧、などなど</td>
</tr>
<tr>
<td>man zshexpn</td>
<td>glob や変数展開の記法</td>
</tr>
<tr>
<td>man zshparam</td>
<td>特殊変数の一覧や変数の添字展開の記法</td>
</tr>
<tr>
<td>man zshoptions</td>
<td>setopt でセットできるオプションの一覧</td>
</tr>
<tr>
<td>man zshbuiltins</td>
<td>ビルトインコマンドの一覧</td>
</tr>
</tbody>
</table>

<p>上級者向けのマニュアルは省略してあります。すべてのマニュアルを見るには <code>man zsh</code> を参照してください。<a href="http://zsh.sourceforge.net/Doc/Release/zsh_toc.html" rel="nofollow noopener" target="_blank">オンラインでマニュアルを読むこともできます</a>。</p>

<p>検索しづらい記号については以下のページが参考になります。</p>

<ul>
<li><a href="http://qiita.com/mollifier/items/26a9ddcb7470f539e575" id="reference-81bd0b6307f14dad95a4">zsh の分かりにくい記号、用語のまとめ - Qiita [キータ]</a></li>
<li><a href="http://qiita.com/mollifier/items/14bbea7503910300b3ba" id="reference-3c643b3813875f975e86">zsh の分からない用語を man から素早く探す - Qiita [キータ]</a></li>
</ul>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>uasiさんの<br />4位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>673</kbd>
		<a target="_blank" href="https://qiita.com/uasi/items/61dc9df0013c5c65822e">Objective-C のコードレビューチェックリスト</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-05-30 00:51:04</center>
	</td>
	<td style="width:200px;">
		@uasi<br />(Increments 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/735/profile-images/1473681692">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Objective-C]</b> <b>[Mac]</b> <b>[Xcode]</b> <b>[iOS]</b> <b>[Cocoa]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;">
<h1>
<span id="はじめに" class="fragment"></span><a href="#%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB"><i class="fa fa-link"></i></a>はじめに</h1>

<p>本稿は Juri Pakaste 氏による <a href="https://bitbucket.org/juri/cocoareviewchecklist" rel="nofollow noopener" target="_blank">Cocoa review checklist</a> (commit <a href="https://bitbucket.org/juri/cocoareviewchecklist/src/fff5703c96ed7676d44e5935ed070c62134e4d97" rel="nofollow noopener" target="_blank">fff5703</a>)の翻訳です。他人の Objective-C のコードをレビューするとき注意する点、また普段のコーディングで心がけるべき点についてまとめられています。</p>

<p>なお、原文のタイトルは Cocoa review checklist となっていますが、内容が Cocoa に限らない範囲のトピックをカバーしているため、本稿のタイトルは「Objective-C の〜」としました。</p>

<p>誤訳の指摘や例の補足を歓迎します。</p>

<h1>
<span id="コードレビューチェックリスト" class="fragment"></span><a href="#%E3%82%B3%E3%83%BC%E3%83%89%E3%83%AC%E3%83%93%E3%83%A5%E3%83%BC%E3%83%81%E3%82%A7%E3%83%83%E3%82%AF%E3%83%AA%E3%82%B9%E3%83%88"><i class="fa fa-link"></i></a>コードレビューチェックリスト</h1>

<h2>
<span id="コードの見た目とコード以外の問題" class="fragment"></span><a href="#%E3%82%B3%E3%83%BC%E3%83%89%E3%81%AE%E8%A6%8B%E3%81%9F%E7%9B%AE%E3%81%A8%E3%82%B3%E3%83%BC%E3%83%89%E4%BB%A5%E5%A4%96%E3%81%AE%E5%95%8F%E9%A1%8C"><i class="fa fa-link"></i></a>コードの見た目とコード以外の問題</h2>

<h3>
<span id="不要な-import-や-class-宣言を消す" class="fragment"></span><a href="#%E4%B8%8D%E8%A6%81%E3%81%AA-import-%E3%82%84-class-%E5%AE%A3%E8%A8%80%E3%82%92%E6%B6%88%E3%81%99"><i class="fa fa-link"></i></a>不要な <code>#import</code> や <code>@class</code> 宣言を消す</h3>

<h3>
<span id="import-をソートする" class="fragment"></span><a href="#import-%E3%82%92%E3%82%BD%E3%83%BC%E3%83%88%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a><code>#import</code> をソートする</h3>

<p><code>.m</code> ファイルの中では、対応する <code>.h</code> ファイルの <code>#import</code> を最初の行に書く。空行をはさんで、ソートされた他の <code>#import</code> を書く。</p>

<h3>
<span id="xcode-のグループをソートする" class="fragment"></span><a href="#xcode-%E3%81%AE%E3%82%B0%E3%83%AB%E3%83%BC%E3%83%97%E3%82%92%E3%82%BD%E3%83%BC%E3%83%88%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>Xcode のグループをソートする</h3>

<p>Xcode のプロジェクトツリーをソートされた状態に保つ。</p>

<h3>
<span id="メソッドをうまく並べる" class="fragment"></span><a href="#%E3%83%A1%E3%82%BD%E3%83%83%E3%83%89%E3%82%92%E3%81%86%E3%81%BE%E3%81%8F%E4%B8%A6%E3%81%B9%E3%82%8B"><i class="fa fa-link"></i></a>メソッドをうまく並べる</h3>

<p>メソッドを合理的に並べる。<code>#pragma mark</code> でメソッドをグルーピングする。</p>

<p>訳注： <code>#pragma mark MarkName</code> ディレクティブを記述すると、 Xcode のメソッド一覧に <code>MarkName</code> が表示される。 <code>#pragma mark -</code> でメソッド一覧に分割線を挿入できる。</p>

<h3>
<span id="コンパイラ警告をなくす" class="fragment"></span><a href="#%E3%82%B3%E3%83%B3%E3%83%91%E3%82%A4%E3%83%A9%E8%AD%A6%E5%91%8A%E3%82%92%E3%81%AA%E3%81%8F%E3%81%99"><i class="fa fa-link"></i></a>コンパイラ警告をなくす</h3>

<p><code>-Werror</code> （少なくともリリースビルドでは）と他の警告フラグを有効にする。</p>

<h3>
<span id="静的解析の警告をなくす" class="fragment"></span><a href="#%E9%9D%99%E7%9A%84%E8%A7%A3%E6%9E%90%E3%81%AE%E8%AD%A6%E5%91%8A%E3%82%92%E3%81%AA%E3%81%8F%E3%81%99"><i class="fa fa-link"></i></a>静的解析の警告をなくす</h3>

<h3>
<span id="標準のスタイルに合わせてコードをフォーマットする" class="fragment"></span><a href="#%E6%A8%99%E6%BA%96%E3%81%AE%E3%82%B9%E3%82%BF%E3%82%A4%E3%83%AB%E3%81%AB%E5%90%88%E3%82%8F%E3%81%9B%E3%81%A6%E3%82%B3%E3%83%BC%E3%83%89%E3%82%92%E3%83%95%E3%82%A9%E3%83%BC%E3%83%9E%E3%83%83%E3%83%88%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>標準のスタイルに合わせてコードをフォーマットする</h3>

<p>プロジェクト内で一貫したコーディングスタイルを定め、それに従う。 <a href="http://clang.llvm.org/docs/ClangFormat.html" rel="nofollow noopener" target="_blank">clang-format</a> や <a href="http://uncrustify.sourceforge.net" rel="nofollow noopener" target="_blank">Uncrustify</a> などのフォーマッタを使うことにしたなら、レビュー前にそれが実行されているか確かめる。</p>

<h3>
<span id="スペルと文法" class="fragment"></span><a href="#%E3%82%B9%E3%83%9A%E3%83%AB%E3%81%A8%E6%96%87%E6%B3%95"><i class="fa fa-link"></i></a>スペルと文法</h3>

<p>文法の委細にこだわる必要はないが、明らかな誤字や文法の誤りは残さないようにする。</p>

<h3>
<span id="xcconfig-を使うならプロジェクトのビルド設定を変更しない" class="fragment"></span><a href="#xcconfig-%E3%82%92%E4%BD%BF%E3%81%86%E3%81%AA%E3%82%89%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AE%E3%83%93%E3%83%AB%E3%83%89%E8%A8%AD%E5%AE%9A%E3%82%92%E5%A4%89%E6%9B%B4%E3%81%97%E3%81%AA%E3%81%84"><i class="fa fa-link"></i></a>xcconfig を使うならプロジェクトのビルド設定を変更しない</h3>

<p>訳注：ビルド設定は、プロジェクト内に記述するほか、 xcconfig という外部ファイルにも書くことができる。 xcconfig を使うことにしたなら、ビルド設定は一貫してそちらに記述する。</p>

<h3>
<span id="画像は正しいサイズで最適化もかける" class="fragment"></span><a href="#%E7%94%BB%E5%83%8F%E3%81%AF%E6%AD%A3%E3%81%97%E3%81%84%E3%82%B5%E3%82%A4%E3%82%BA%E3%81%A7%E6%9C%80%E9%81%A9%E5%8C%96%E3%82%82%E3%81%8B%E3%81%91%E3%82%8B"><i class="fa fa-link"></i></a>画像は正しいサイズで、最適化もかける</h3>

<p><a href="http://imageoptim.com" rel="nofollow noopener" target="_blank">ImageOptim</a> などの画像最適化ツールを使う。画像が最適化されているかどうかレビュアーが判別できないときは、画像を追加した人に確認する。または、問題が起きる可能性もあるが、最適化ツールを自分で走らせてみる。</p>

<h3>
<span id="すべての画像に等倍と2倍の解像度のバージョンを用意する" class="fragment"></span><a href="#%E3%81%99%E3%81%B9%E3%81%A6%E3%81%AE%E7%94%BB%E5%83%8F%E3%81%AB%E7%AD%89%E5%80%8D%E3%81%A82%E5%80%8D%E3%81%AE%E8%A7%A3%E5%83%8F%E5%BA%A6%E3%81%AE%E3%83%90%E3%83%BC%E3%82%B8%E3%83%A7%E3%83%B3%E3%82%92%E7%94%A8%E6%84%8F%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>すべての画像に等倍と2倍の解像度のバージョンを用意する</h3>

<p>2倍のバージョンは縦横のサイズが正しく元の2倍になるようにする。</p>

<h2>
<span id="テスト" class="fragment"></span><a href="#%E3%83%86%E3%82%B9%E3%83%88"><i class="fa fa-link"></i></a>テスト</h2>

<h3>
<span id="失敗するテストがないようにする" class="fragment"></span><a href="#%E5%A4%B1%E6%95%97%E3%81%99%E3%82%8B%E3%83%86%E3%82%B9%E3%83%88%E3%81%8C%E3%81%AA%E3%81%84%E3%82%88%E3%81%86%E3%81%AB%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>失敗するテストがないようにする</h3>

<h3>
<span id="ビジネスロジックのユニットテスト" class="fragment"></span><a href="#%E3%83%93%E3%82%B8%E3%83%8D%E3%82%B9%E3%83%AD%E3%82%B8%E3%83%83%E3%82%AF%E3%81%AE%E3%83%A6%E3%83%8B%E3%83%83%E3%83%88%E3%83%86%E3%82%B9%E3%83%88"><i class="fa fa-link"></i></a>ビジネスロジックのユニットテスト</h3>

<p>プロジェクトにユニットテストを採用しているなら、少なくとも UI や IO に関係しない新規のコードにはテストが必要。</p>

<h3>
<span id="機能テスト" class="fragment"></span><a href="#%E6%A9%9F%E8%83%BD%E3%83%86%E3%82%B9%E3%83%88"><i class="fa fa-link"></i></a>機能テスト</h3>

<p>プロジェクトに <a href="https://github.com/joshaber/KIF" rel="nofollow noopener" target="_blank">KIF</a> などの機能テストを採用しているなら、 UI に関係する新規のコードにはテストが必要。</p>

<h2>
<span id="ドキュメンテーションとライセンス" class="fragment"></span><a href="#%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%86%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E3%81%A8%E3%83%A9%E3%82%A4%E3%82%BB%E3%83%B3%E3%82%B9"><i class="fa fa-link"></i></a>ドキュメンテーションとライセンス</h2>

<h3>
<span id="すべてのドキュメンテーションを現状のコードに一致させる" class="fragment"></span><a href="#%E3%81%99%E3%81%B9%E3%81%A6%E3%81%AE%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%86%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E3%82%92%E7%8F%BE%E7%8A%B6%E3%81%AE%E3%82%B3%E3%83%BC%E3%83%89%E3%81%AB%E4%B8%80%E8%87%B4%E3%81%95%E3%81%9B%E3%82%8B"><i class="fa fa-link"></i></a>すべてのドキュメンテーションを現状のコードに一致させる</h3>

<h3>
<span id="現状で依存しているライブラリのライセンスをソフトウェアライセンス表示画面に反映する" class="fragment"></span><a href="#%E7%8F%BE%E7%8A%B6%E3%81%A7%E4%BE%9D%E5%AD%98%E3%81%97%E3%81%A6%E3%81%84%E3%82%8B%E3%83%A9%E3%82%A4%E3%83%96%E3%83%A9%E3%83%AA%E3%81%AE%E3%83%A9%E3%82%A4%E3%82%BB%E3%83%B3%E3%82%B9%E3%82%92%E3%82%BD%E3%83%95%E3%83%88%E3%82%A6%E3%82%A7%E3%82%A2%E3%83%A9%E3%82%A4%E3%82%BB%E3%83%B3%E3%82%B9%E8%A1%A8%E7%A4%BA%E7%94%BB%E9%9D%A2%E3%81%AB%E5%8F%8D%E6%98%A0%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>現状で依存しているライブラリのライセンスを、ソフトウェアライセンス表示画面に反映する</h3>

<h3>
<span id="changelog-を更新する" class="fragment"></span><a href="#changelog-%E3%82%92%E6%9B%B4%E6%96%B0%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>Changelog を更新する</h3>

<p>変更点を Changelog ファイルに記録しているなら、バージョン管理システムのすべてのフィーチャーブランチで、そのブランチでの変更点を Changelog ファイルに残す。</p>

<h2>
<span id="cocoa-コーディング" class="fragment"></span><a href="#cocoa-%E3%82%B3%E3%83%BC%E3%83%87%E3%82%A3%E3%83%B3%E3%82%B0"><i class="fa fa-link"></i></a>Cocoa コーディング</h2>

<h3>
<span id="apple-の命名規約に従う" class="fragment"></span><a href="#apple-%E3%81%AE%E5%91%BD%E5%90%8D%E8%A6%8F%E7%B4%84%E3%81%AB%E5%BE%93%E3%81%86"><i class="fa fa-link"></i></a>Apple の命名規約に従う</h3>

<p>変数やメソッドの命名は Apple の <a href="https://developer.apple.com/library/mac/documentation/cocoa/conceptual/codingguidelines/CodingGuidelines.html#//apple_ref/doc/uid/10000146-SW1" rel="nofollow noopener" target="_blank">Coding Guidelines for Cocoa</a> に従うべきである。</p>

<h3>
<span id="メソッドの間接呼び出しデリゲートや通知は読みやすく" class="fragment"></span><a href="#%E3%83%A1%E3%82%BD%E3%83%83%E3%83%89%E3%81%AE%E9%96%93%E6%8E%A5%E5%91%BC%E3%81%B3%E5%87%BA%E3%81%97%E3%83%87%E3%83%AA%E3%82%B2%E3%83%BC%E3%83%88%E3%82%84%E9%80%9A%E7%9F%A5%E3%81%AF%E8%AA%AD%E3%81%BF%E3%82%84%E3%81%99%E3%81%8F"><i class="fa fa-link"></i></a>メソッドの間接呼び出し（デリゲートや通知）は読みやすく</h3>

<p>Cocoa にはメソッドを間接的に呼び出す手段がいくつかある。読みやすさの順に並べると：</p>

<ol>
<li>直接メソッドを呼ぶ</li>
<li>デリゲート</li>
<li><code>NSNotificationCenter</code></li>
<li>レスポンダチェイン</li>
<li>KVO</li>
<li>Cocoa バインディング</li>
</ol>

<p>リストの上にあるものほど読みやすいので、下のものより優先して使う。ただしメソッド間の結びつきを強くしすぎないこと。また一貫性に気を配る。</p>

<h3>
<span id="スレッドよりもキューを使う" class="fragment"></span><a href="#%E3%82%B9%E3%83%AC%E3%83%83%E3%83%89%E3%82%88%E3%82%8A%E3%82%82%E3%82%AD%E3%83%A5%E3%83%BC%E3%82%92%E4%BD%BF%E3%81%86"><i class="fa fa-link"></i></a>スレッドよりもキューを使う</h3>

<p>フレームワークがシングルスレッドからのアクセスを要求しているのでなければ、GCD や  <code>NSOperationQueue</code> を使う。</p>

<h3>
<span id="通知を送受信するスレッドにポリシーを設ける" class="fragment"></span><a href="#%E9%80%9A%E7%9F%A5%E3%82%92%E9%80%81%E5%8F%97%E4%BF%A1%E3%81%99%E3%82%8B%E3%82%B9%E3%83%AC%E3%83%83%E3%83%89%E3%81%AB%E3%83%9D%E3%83%AA%E3%82%B7%E3%83%BC%E3%82%92%E8%A8%AD%E3%81%91%E3%82%8B"><i class="fa fa-link"></i></a>通知を送受信するスレッドにポリシーを設ける</h3>

<p><code>NSNotificationCenter</code> はスレッド1つにつき1インスタンス作る。 <code>-defaultCenter</code> はメインスレッドからのみ使う。正しいスレッドで通知することを送信側の責任とする。</p>

<h3>
<span id="オブザーバを正しく登録登録解除する" class="fragment"></span><a href="#%E3%82%AA%E3%83%96%E3%82%B6%E3%83%BC%E3%83%90%E3%82%92%E6%AD%A3%E3%81%97%E3%81%8F%E7%99%BB%E9%8C%B2%E7%99%BB%E9%8C%B2%E8%A7%A3%E9%99%A4%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>オブザーバを正しく登録・登録解除する</h3>

<p>通知や KVO のオブザーバは必要に応じて登録し、不要になったら登録を解除する。とくに <code>-dealloc</code> の中で解除を忘れない。</p>

<h3>
<span id="イベントハンドラとロジックを分離する" class="fragment"></span><a href="#%E3%82%A4%E3%83%99%E3%83%B3%E3%83%88%E3%83%8F%E3%83%B3%E3%83%89%E3%83%A9%E3%81%A8%E3%83%AD%E3%82%B8%E3%83%83%E3%82%AF%E3%82%92%E5%88%86%E9%9B%A2%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>イベントハンドラとロジックを分離する</h3>

<p>通知のハンドラメソッドやアクションメソッドに複雑なロジックを書かない。</p>

<h3>
<span id="絶対にメインスレッドをブロックしない" class="fragment"></span><a href="#%E7%B5%B6%E5%AF%BE%E3%81%AB%E3%83%A1%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%AC%E3%83%83%E3%83%89%E3%82%92%E3%83%96%E3%83%AD%E3%83%83%E3%82%AF%E3%81%97%E3%81%AA%E3%81%84"><i class="fa fa-link"></i></a>絶対にメインスレッドをブロックしない</h3>

<p>ディスク IO やネットワーク IO 、複雑な計算処理がメインスレッドをブロックしないようにする。</p>

<h3>
<span id="nsstringfromenum--nsstringfromstruct-を使う" class="fragment"></span><a href="#nsstringfromenum--nsstringfromstruct-%E3%82%92%E4%BD%BF%E3%81%86"><i class="fa fa-link"></i></a>NSStringFromEnum / NSStringFromStruct を使う</h3>

<p>（未訳、<a href="http://www.juripakaste.fi/blog/nsstringify.html" rel="nofollow noopener" target="_blank">これ</a>のことか）</p>

<h3>
<span id="-description-メソッドを書く" class="fragment"></span><a href="#-description-%E3%83%A1%E3%82%BD%E3%83%83%E3%83%89%E3%82%92%E6%9B%B8%E3%81%8F"><i class="fa fa-link"></i></a><code>-description</code> メソッドを書く</h3>

<p>すべてのクラスは、デバッグに役立つ情報を <code>-description</code> メソッドで返すようにする。</p>

<h3>
<span id="オブジェクトの生成は最小限にし不要になったらすぐ解放する" class="fragment"></span><a href="#%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AE%E7%94%9F%E6%88%90%E3%81%AF%E6%9C%80%E5%B0%8F%E9%99%90%E3%81%AB%E3%81%97%E4%B8%8D%E8%A6%81%E3%81%AB%E3%81%AA%E3%81%A3%E3%81%9F%E3%82%89%E3%81%99%E3%81%90%E8%A7%A3%E6%94%BE%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>オブジェクトの生成は最小限にし、不要になったらすぐ解放する</h3>

<p>ループの中で一時オブジェクトを生成しているなら、それが本当に必要か考慮する。 <code>@autoreleasepool</code> に追加できないか検討する。</p>

<h3>
<span id="int-より-enum--enum-より-ns_enum" class="fragment"></span><a href="#int-%E3%82%88%E3%82%8A-enum--enum-%E3%82%88%E3%82%8A-ns_enum"><i class="fa fa-link"></i></a><code>int</code> より <code>enum</code> 、 <code>enum</code> より <code>NS_ENUM</code>
</h3>

<p>関連する整数値を列挙するなら、 <code>int</code> や <code>enum</code> より <code>NS_ENUM</code> マクロを使う。</p>

<p>訳注：例：</p>

<div class="code-frame" data-lang="objc"><div class="highlight"><pre><span></span><span class="k">typedef</span> <span class="nf">NS_ENUM</span><span class="p">(</span><span class="n">NSInteger</span><span class="p">,</span> <span class="n">MyEnum</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">MyEnumA</span><span class="p">,</span>
    <span class="n">MyEnumB</span><span class="p">,</span>
    <span class="n">MyEnumOther</span><span class="p">,</span>
<span class="p">};</span>

<span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">foo</span> <span class="p">{</span>
    <span class="n">MyEnum</span> <span class="n">myEnum</span> <span class="o">=</span> <span class="n">MyEnumA</span><span class="p">;</span>
<span class="p">}</span>
</pre></div></div>

<p>訳注： <code>NS_ENUM</code> で定義された列挙型の変数を <code>switch</code> 文で分岐すると、 <code>case</code> 節がすべての値を網羅しているかコンパイラがチェックしてくれる。</p>

<p>訳注：ビットマスクの定義には <code>int</code> より <code>NS_OPTIONS</code> を使うとよい：</p>

<div class="code-frame" data-lang="objc"><div class="highlight"><pre><span></span><span class="k">typedef</span> <span class="nf">NS_OPTIONS</span><span class="p">(</span><span class="n">NSInteger</span><span class="p">,</span> <span class="n">MyFlag</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">MyFlagNone</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">MyFlagA</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">MyFlagB</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="p">,</span>
<span class="p">};</span>
</pre></div></div>

<h3>
<span id="cocoa-の命名規約に従う" class="fragment"></span><a href="#cocoa-%E3%81%AE%E5%91%BD%E5%90%8D%E8%A6%8F%E7%B4%84%E3%81%AB%E5%BE%93%E3%81%86"><i class="fa fa-link"></i></a>Cocoa の命名規約に従う</h3>

<p>（未訳）</p>

<h3>
<span id="nonnull-属性" class="fragment"></span><a href="#nonnull-%E5%B1%9E%E6%80%A7"><i class="fa fa-link"></i></a><code>nonnull</code> 属性</h3>

<p><code>NULL</code> でないポインタを受け取る関数には <code>__attribute__((nonnull))</code> 属性をつける。</p>

<p>訳注：例：</p>

<div class="code-frame" data-lang="objc"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">foo</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">p</span><span class="p">)</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">nonnull</span><span class="p">))</span> <span class="p">{</span>
<span class="p">}</span>
</pre></div></div>

<h3>
<span id="objc_requires_super-属性" class="fragment"></span><a href="#objc_requires_super-%E5%B1%9E%E6%80%A7"><i class="fa fa-link"></i></a><code>objc_requires_super</code> 属性</h3>

<p>オーバーライドされたとき子クラスのメソッドから呼び出されなければならないメソッドには  <code>__attribute__((objc_requires_super))</code> 属性をつける。訳注：最近の SDK では <code>NS_REQUIRES_SUPER</code> も使える。</p>

<p>訳注：例：</p>

<div class="code-frame" data-lang="objc"><div class="highlight"><pre><span></span><span class="cm">/*** 親クラス内 ***/</span>
<span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">foo:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">arg</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">objc_requires_super</span><span class="p">))</span> <span class="p">{</span>
    <span class="err">…</span>
<span class="p">}</span>
<span class="c1">// または</span>
<span class="o">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nl">foo</span><span class="p">:(</span><span class="kt">id</span><span class="p">)</span><span class="n">arg</span> <span class="n">NS_REQUIRES_SUPER</span> <span class="p">{</span>
    <span class="err">…</span>
<span class="p">}</span>

<span class="cm">/*** 子クラス内 ***/</span>
<span class="o">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nl">foo</span><span class="p">:(</span><span class="kt">id</span><span class="p">)</span><span class="n">arg</span> <span class="p">{</span>
    <span class="p">[</span><span class="nb">super</span> <span class="n">foo</span><span class="p">];</span> <span class="c1">// これを呼ばないと警告が出る</span>
<span class="p">}</span>
</pre></div></div>

<h3>
<span id="pure-と-const" class="fragment"></span><a href="#pure-%E3%81%A8-const"><i class="fa fa-link"></i></a><code>pure</code> と <code>const</code>
</h3>

<p>グローバルな状態を変更しない関数には <code>__attribute__((pure))</code> 属性をつける。グローバルな状態を参照することもない関数には <code>__attribute__((const))</code> 属性をつける。</p>

<p>訳注： <code>__pure</code> と <code>__const</code> も使える。</p>

<h3>
<span id="国際化" class="fragment"></span><a href="#%E5%9B%BD%E9%9A%9B%E5%8C%96"><i class="fa fa-link"></i></a>国際化</h3>

<p>ユーザーに向けて表示される文字列は <code>NSLocalizedString</code> などの仕組みで国際化する。対応する文字列を strings ファイルに追加する。</p>

<h3>
<span id="シングルトンには-dispatch_once" class="fragment"></span><a href="#%E3%82%B7%E3%83%B3%E3%82%B0%E3%83%AB%E3%83%88%E3%83%B3%E3%81%AB%E3%81%AF-dispatch_once"><i class="fa fa-link"></i></a>シングルトンには dispatch_once()</h3>

<p>シングルトンは本当に必要なときだけ使う。その場合、 <code>dispatch_once()</code> で初期化を1回だけ実行する。</p>

<h3>
<span id="frame-と-bounds" class="fragment"></span><a href="#frame-%E3%81%A8-bounds"><i class="fa fa-link"></i></a>frame と bounds</h3>

<p>frame プロパティと bounds プロパティの違いを意識し、使い分ける。訳注：<a href="http://adotout.sakura.ne.jp/?p=525" rel="nofollow noopener" target="_blank">frameとboundsの違い</a>などを参照のこと。</p>

<h2>
<span id="コード全体の品質" class="fragment"></span><a href="#%E3%82%B3%E3%83%BC%E3%83%89%E5%85%A8%E4%BD%93%E3%81%AE%E5%93%81%E8%B3%AA"><i class="fa fa-link"></i></a>コード全体の品質</h2>

<h3>
<span id="クラスの役割はシンプルに同じコードは一箇所に" class="fragment"></span><a href="#%E3%82%AF%E3%83%A9%E3%82%B9%E3%81%AE%E5%BD%B9%E5%89%B2%E3%81%AF%E3%82%B7%E3%83%B3%E3%83%97%E3%83%AB%E3%81%AB%E5%90%8C%E3%81%98%E3%82%B3%E3%83%BC%E3%83%89%E3%81%AF%E4%B8%80%E7%AE%87%E6%89%80%E3%81%AB"><i class="fa fa-link"></i></a>クラスの役割はシンプルに、同じコードは一箇所に</h3>

<p>クラスの責任を明確に定義する。分割すべきクラスはそうする。類似したコードが複数の場所に散らばっているなら、一箇所にまとめることを考える。</p>

<h3>
<span id="よい名前をつける" class="fragment"></span><a href="#%E3%82%88%E3%81%84%E5%90%8D%E5%89%8D%E3%82%92%E3%81%A4%E3%81%91%E3%82%8B"><i class="fa fa-link"></i></a>よい名前をつける</h3>

<p>命名は合理的に。</p>

<h3>
<span id="どこにでもアサーションを使う" class="fragment"></span><a href="#%E3%81%A9%E3%81%93%E3%81%AB%E3%81%A7%E3%82%82%E3%82%A2%E3%82%B5%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E3%82%92%E4%BD%BF%E3%81%86"><i class="fa fa-link"></i></a>どこにでもアサーションを使う</h3>

<p>通知のハンドラメソッドは、期待するスレッドで実行されているかアサーションする。</p>

<p><code>nil</code> にすべきでないものは、 <code>nil</code> でないことをアサーションする。他の値についても同様。</p>

<h3>
<span id="共有された状態は最小限に交換可能に" class="fragment"></span><a href="#%E5%85%B1%E6%9C%89%E3%81%95%E3%82%8C%E3%81%9F%E7%8A%B6%E6%85%8B%E3%81%AF%E6%9C%80%E5%B0%8F%E9%99%90%E3%81%AB%E4%BA%A4%E6%8F%9B%E5%8F%AF%E8%83%BD%E3%81%AB"><i class="fa fa-link"></i></a>共有された状態は最小限に、交換可能に</h3>

<p>共有された状態は必要なもののみにする。ミュータブルであるべきか検討する。シングルトンよりも依存性注入を使う。</p>

<h3>
<span id="まず関数次にクラスメソッド最後にインスタンスメソッド" class="fragment"></span><a href="#%E3%81%BE%E3%81%9A%E9%96%A2%E6%95%B0%E6%AC%A1%E3%81%AB%E3%82%AF%E3%83%A9%E3%82%B9%E3%83%A1%E3%82%BD%E3%83%83%E3%83%89%E6%9C%80%E5%BE%8C%E3%81%AB%E3%82%A4%E3%83%B3%E3%82%B9%E3%82%BF%E3%83%B3%E3%82%B9%E3%83%A1%E3%82%BD%E3%83%83%E3%83%89"><i class="fa fa-link"></i></a>まず関数、次にクラスメソッド、最後にインスタンスメソッド</h3>

<p>ロジックはなるべく関数で実装する。そのほうが読みやすい。インスタンス変数にアクセスするほどではないが、クラス名を名前空間として使い一箇所にまとめたいロジックは、クラスメソッドで実装する。</p>

<h3>
<span id="関数で複雑なオブジェクトを操作しない" class="fragment"></span><a href="#%E9%96%A2%E6%95%B0%E3%81%A7%E8%A4%87%E9%9B%91%E3%81%AA%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%82%92%E6%93%8D%E4%BD%9C%E3%81%97%E3%81%AA%E3%81%84"><i class="fa fa-link"></i></a>関数で複雑なオブジェクトを操作しない</h3>

<p>巨大なビジネスオブジェクトを関数の引数にしない。</p>

<h3>
<span id="できれば簡潔にどんなときでも理解しやすく" class="fragment"></span><a href="#%E3%81%A7%E3%81%8D%E3%82%8C%E3%81%B0%E7%B0%A1%E6%BD%94%E3%81%AB%E3%81%A9%E3%82%93%E3%81%AA%E3%81%A8%E3%81%8D%E3%81%A7%E3%82%82%E7%90%86%E8%A7%A3%E3%81%97%E3%82%84%E3%81%99%E3%81%8F"><i class="fa fa-link"></i></a>できれば簡潔に、どんなときでも理解しやすく</h3>

<p>簡潔さは重要だが、理解しやすさはそれに増して大事。どこに線を引くか決めて、それを守る。</p>

<h3>
<span id="短いが読みやすいメソッドと関数" class="fragment"></span><a href="#%E7%9F%AD%E3%81%84%E3%81%8C%E8%AA%AD%E3%81%BF%E3%82%84%E3%81%99%E3%81%84%E3%83%A1%E3%82%BD%E3%83%83%E3%83%89%E3%81%A8%E9%96%A2%E6%95%B0"><i class="fa fa-link"></i></a>短いが読みやすいメソッドと関数</h3>

<p>メソッドと関数は短いほうがよいが、読みやすさと率直さを犠牲にしてはならない。</p>

<h3>
<span id="必要ならコメントを書く" class="fragment"></span><a href="#%E5%BF%85%E8%A6%81%E3%81%AA%E3%82%89%E3%82%B3%E3%83%A1%E3%83%B3%E3%83%88%E3%82%92%E6%9B%B8%E3%81%8F"><i class="fa fa-link"></i></a>必要ならコメントを書く</h3>

<p>パブリックなクラス、メソッド、関数には、それが何をするか明らかに分かるのでなければ、解説をつける。込み入った内部ロジックにもコメントを書く。</p>

<h3>
<span id="不要なデバッグ出力は消す" class="fragment"></span><a href="#%E4%B8%8D%E8%A6%81%E3%81%AA%E3%83%87%E3%83%90%E3%83%83%E3%82%B0%E5%87%BA%E5%8A%9B%E3%81%AF%E6%B6%88%E3%81%99"><i class="fa fa-link"></i></a>不要なデバッグ出力は消す</h3>

<p>不要になった <code>NSLog</code> は残さない。必要なデバッグ出力は、それが意味するところを分かるようにする。</p>

<h3>
<span id="よいエラーロギング" class="fragment"></span><a href="#%E3%82%88%E3%81%84%E3%82%A8%E3%83%A9%E3%83%BC%E3%83%AD%E3%82%AE%E3%83%B3%E3%82%B0"><i class="fa fa-link"></i></a>よいエラーロギング</h3>

<p>エラーログには、どこでエラーが起き、何が問題だったのかを含めること。エラーログは簡潔かつ正確で役に立つようにする。</p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>uasiさんの<br />5位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>447</kbd>
		<a target="_blank" href="https://qiita.com/uasi/items/77d41698630fef012f82">Git で複数のリポジトリをまとめたり、逆に切り出したりする</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2012-05-17 19:45:21</center>
	</td>
	<td style="width:200px;">
		@uasi<br />(Increments 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/735/profile-images/1473681692">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Git]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;">
<h2>
<span id="repo1-と-repo2-をまとめる" class="fragment"></span><a href="#repo1-%E3%81%A8-repo2-%E3%82%92%E3%81%BE%E3%81%A8%E3%82%81%E3%82%8B"><i class="fa fa-link"></i></a>~/repo1 と ~/repo2 をまとめる</h2>

<p>2つのリポジトリをまとめて1つのリポジトリにしたいとき。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>cd ~/repo1
git remote add repo2 ~/repo2
git fetch repo2

git merge repo2/master
</pre></div></div>

<h2>
<span id="repo1subdir-に-repo2-を入れる" class="fragment"></span><a href="#repo1subdir-%E3%81%AB-repo2-%E3%82%92%E5%85%A5%E3%82%8C%E3%82%8B"><i class="fa fa-link"></i></a>~/repo1/subdir に ~/repo2 を入れる</h2>

<p>あるリポジトリのサブディレクトリに別のリポジトリの中身を入れたいとき。たとえば、あるリポジトリのサブディレクトリを切り出して別のリポジトリとして管理しているものを、元のリポジトリに合流させたいとき。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>cd ~/repo1
git remote add repo2 ~/repo2
git fetch repo2

# サブディレクトリの内容に repo2 の内容をマージする
# （repo2 と内容が似ているサブディレクトリを自動で判別）
git merge -s subtree repo2/master

# ↑でうまくいかないときにはパスを指定する↓
git merge -X subtree=subdir repo2/master

# そもそも ~/repo1/subdir が存在しないときには↓
git read-tree --prefix=subdir/ repo2/master
git checkout -- .
</pre></div></div>

<h2>
<span id="repo1dir1-と-repo1dir2-をマージする" class="fragment"></span><a href="#repo1dir1-%E3%81%A8-repo1dir2-%E3%82%92%E3%83%9E%E3%83%BC%E3%82%B8%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>~/repo1/dir1 と ~/repo1/dir2 をマージする</h2>

<p>（タイトルからは外れるが）同一リポジトリ内の2つのサブディレクトリをマージしたいとき：<a href="http://qiita.com/uasi/items/545665066619d8cb8dbe" class="autolink" id="reference-fde4356412230ae7eee0">http://qiita.com/uasi/items/545665066619d8cb8dbe</a></p>

<h2>
<span id="repo1subdir-を-repo2-として切り出す" class="fragment"></span><a href="#repo1subdir-%E3%82%92-repo2-%E3%81%A8%E3%81%97%E3%81%A6%E5%88%87%E3%82%8A%E5%87%BA%E3%81%99"><i class="fa fa-link"></i></a>~/repo1/subdir を ~/repo2 として切り出す</h2>

<p>あるリポジトリのサブディレクトリを別のリポジトリとして管理したいとき。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>git clone ~/repo1 ~/repo2
cd ~/repo2
git filter-branch --subdirectory-filter subdir HEAD
</pre></div></div>

<p>余談：ここで <code>git clone</code> の代わりに <code>git-new-workdir</code> を使ってはいけない（<a href="http://qiita.com/uasi/items/77d41698630fef012f82#comment-441deaa42dc8087ca414">コメント参照</a>）</p>

<p>参考にしたページ：</p>

<ul>
<li><a href="http://d.hatena.ne.jp/gnarl/20120111/1326270674" rel="nofollow noopener" target="_blank">git、複数のリポジトリをまとめる - &lt;s&gt;gnarl,&lt;/s&gt;技術メモ”’&lt;marquee&gt;&lt;textarea&gt;￥</a></li>
<li><a href="http://akio0911.net/archives/3421" rel="nofollow noopener" target="_blank">gitリポジトリのサブディレクトリを別のリポジトリとして抽出する方法 – 拡張現実ライフ</a></li>
</ul>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>uasiさんの<br />6位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>311</kbd>
		<a target="_blank" href="https://qiita.com/uasi/items/c7845f61a2f681db7ce2">めちゃくちゃにコンフリクトしたファイルを一歩一歩マージする方法</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-08-23 18:14:40</center>
	</td>
	<td style="width:200px;">
		@uasi<br />(Increments 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/735/profile-images/1473681692">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Git]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>あるファイルに大量のコンフリクトが発生し解決が面倒なとき、パッチを使ってファイルに1コミットずつ変更を適用する方法を示す。この方法のメリットは：</p>

<ul>
<li>ファイルへの変更を1コミットずつ適用・コンフリクト解決することができる</li>
<li>それぞれのコミットを適用する前に、コミットをパッチファイルの形で編集できる</li>
<li>注目するファイル以外への変更をいったん無視し、そのファイルに関係する変更に集中できる</li>
</ul>

<p>の3点である。複数コミットの変更が混ざった大量のコンフリクトマーカーを手作業で消すような状況に陥ったとき、この方法を使えばいくぶんかは楽にマージ作業を進められる。</p>

<h1>
<span id="概要" class="fragment"></span><a href="#%E6%A6%82%E8%A6%81"><i class="fa fa-link"></i></a>概要</h1>

<p>マージ中に特定のファイルに大量のコンフリクトが起きたら、マージを中止する。一時作業用ブランチを作り、そのファイルに1コミットずつパッチを当てて編集する。パッチを当て終わったらマージをやり直し、コンフリクト解決作業中に、コンフリクトしたファイルを一時作業用ブランチからチェックアウトしたファイルで置き換える。</p>

<h1>
<span id="やりかた" class="fragment"></span><a href="#%E3%82%84%E3%82%8A%E3%81%8B%E3%81%9F"><i class="fa fa-link"></i></a>やりかた</h1>

<p>次のようにマージを実行したとき、 Foo.h, Foo.m に多くのコンフリクトが発生したとする。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ git checkout master
$ git merge dev
# Foo.h, Foo.m に大量のコンフリクトが発生
# 他のファイルには比較的簡単なコンフリクトが発生
</pre></div></div>

<p>まず merge を中止する。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ git merge --abort
</pre></div></div>

<p>現在のブランチから新しい作業用ブランチを切り、そのブランチに移る。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ git checkout -b work
</pre></div></div>

<p>取り込もうとしているブランチから Foo.h, Foo.m に関係するコミットだけをパッチファイルに書き出す。 （補足：以下のコマンドで、 <code>..dev</code> は「<code>dev</code> から到達可能だが <code>HEAD</code> から到達可能でないコミット」、言い換えれば「両者が分岐した以降、 <code>dev</code> にのみ含まれるコミット」を表す。 <code>--histogram</code> は diff アルゴリズムを histogram diff に切り替える。場合によるが、デフォルトのアルゴリズムより読みやすいパッチを生成する）</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ git format-patch --histogram ..dev -- Foo.h Foo.m
0001-Edit-Foo.patch
0002-Another-change-to-Foo.patch
</pre></div></div>

<p>必要なら適用する前にパッチを手作業で編集する。ここで不要な変更を取り除くなどしておく。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ vim *.patch
</pre></div></div>

<p><code>git apply -3</code> でパッチを順に適用する。1つ前のステップでパッチの行数が変わるような編集を行ったなら、<code>git apply</code> に <code>--recount</code> オプションを与える。作業用ブランチは後で削除するのでコミットメッセージは適当でよい。（補足： <code>git apply</code> に <code>-3</code> オプションを与えると 3-way merge を実行する。 <code>--recount</code> オプションを与えると、パッチに含まれる行数のヒントを無視する）</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ git apply -3 0001-Edit-Foo.patch
# コンフリクトを解決
$ git commit -m "Tmp 1"

$ git apply -3 --recount 0002-Another-change-to-Foo.patch
# コンフリクトを解決
$ git commit -m "Tmp 2"
</pre></div></div>

<p>すべてのパッチを適用した時点で、作業用ブランチ内の Foo.h, Foo.m は必要な変更をすべて取り込んだ状態になる。</p>

<p>パッチファイルを削除してから、先ほど中止したマージをやり直す。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ rm *.patch
$ git checkout master
$ git merge dev
# ここではまだ Foo.h, Foo.m にコンフリクトが発生する
</pre></div></div>

<p>作業用ブランチからコンフリクト解決済みの Foo.h, Foo.m をチェックアウトする。チェックアウトしたら作業用ブランチは削除してよい。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ git checkout work -- Foo.h Foo.m
$ git add Foo.h Foo.m
$ git branch -D work
</pre></div></div>

<p>適宜その他のコンフリクトを解決し、マージを完了する。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span># コンフリクトを解決
$ git add -u
$ git commit
</pre></div></div>

<h1>
<span id="tips" class="fragment"></span><a href="#tips"><i class="fa fa-link"></i></a>Tips</h1>

<p>上では「現在のブランチから作業用ブランチを切り、その上に取り込もうとしているブランチの変更を適用」するとしたが、変更の量によっては「取り込もうとしているブランチから作業用ブランチを切り、その上に現在のブランチの変更を適用」してもよい。注目するファイルに対して変更量が多い・変更の内容が複雑なブランチをベースに作業用ブランチを作ると、取り込むべきパッチの量が減り、作業が楽になる。</p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>uasiさんの<br />7位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>212</kbd>
		<a target="_blank" href="https://qiita.com/uasi/items/a340bb487ec07caac799">リポジトリごとに user.name や user.email の設定を強制する</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-08-29 03:04:48</center>
	</td>
	<td style="width:200px;">
		@uasi<br />(Increments 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/735/profile-images/1473681692">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Git]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>社内やオープンソースのプロジェクトに並行して参加していると、gitconfig の <code>user.name</code> や <code>user.email</code> をリポジトリごとに切り替えたくなることがある。リポジトリを作るたびに <code>git config user.name "My Name"</code> すればいいのだが、 <code>user.name</code> が存在しないか空文字列だと環境変数 <code>NAME</code> の値を暗黙的に使う仕様になっているため、設定をうっかり忘れてしまうとなかなか気づけない。名前やメールアドレスを間違えたまま何度もコミットしてしまうと修正が厄介である。</p>

<h2>
<span id="git-28以上" class="fragment"></span><a href="#git-28%E4%BB%A5%E4%B8%8A"><i class="fa fa-link"></i></a>Git 2.8以上</h2>

<p>最近の Git で設定忘れを未然に防ぐには <code>git config --global user.useConfigOnly true</code> を実行する。これを設定するとユーザー情報について環境変数を暗黙に参照することがなくなる。グローバルな gitconfig で <code>user.name</code> と <code>user.email</code> を設定してあるなら削除しておく。こうすることで、各リポジトリ単位で <code>user.name</code> と <code>user.email</code> を設定することを強制できる。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ git config --global user.useConfigOnly true
$ git config --global --unset user.name
$ git config --global --unset user.email

$ cd /path/to/my_repo
$ git config user.name "My Name"
$ git config user.email "me@example.com"
</pre></div></div>

<h2>
<span id="git-27以下" class="fragment"></span><a href="#git-27%E4%BB%A5%E4%B8%8B"><i class="fa fa-link"></i></a>Git 2.7以下</h2>

<p>以前の Git では <code>pre-commit</code> フックで設定の値を検証することになる。 <code>pre-commit</code> フックは <code>git commit</code> の直前に実行され、終了ステータスが非ゼロであれば <code>git commit</code> は中止される。</p>

<div class="code-frame" data-lang="bash">
<div class="code-lang"><span class="bold">pre-commit</span></div>
<div class="highlight"><pre><span></span><span class="ch">#!/bin/sh</span>

<span class="k">if</span> <span class="o">[</span> -z <span class="s2">"`git config --local user.name`"</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
    <span class="nb">echo</span> <span class="s2">"fatal: user.name is not set locally"</span>
    <span class="nb">exit</span> <span class="m">1</span>
<span class="k">fi</span>
<span class="k">if</span> <span class="o">[</span> -z <span class="s2">"`git config --local user.email`"</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
    <span class="nb">echo</span> <span class="s2">"fatal: user.email is not set locally"</span>
    <span class="nb">exit</span> <span class="m">1</span>
<span class="k">fi</span>

</pre></div>
</div>

<p>フックスクリプトを実行可能にし、 $my_repo/.git/hooks ディレクトリに配置する。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ chmod a+x pre-commit
$ mv pre-commit $my_repo/.git/hooks
</pre></div></div>

<p>これで、 $my_repo リポジトリにおいて <code>user.name</code> と <code>user.email</code> が設定されていなければ <code>git commit</code> が失敗するようになった。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ git commit -m "Add some files"
fatal: user.name is not set locally

$ git config user.name  "My Name"
$ git config user.email me@example.com

$ git commit  -m "Add some files"
[master deadbeef] Add some files
...
</pre></div></div>

<p><code>pre-commit</code> フックスクリプトをテンプレートに入れれば、新たに <code>git init</code> か <code>git clone</code> したリポジトリにはフックスクリプトがコピーされるようになる（参考：<a href="http://qiita.com/quattro_4/items/59fdf8b9aa9ef48ecbdf" id="reference-2001f40da1b85079d4f0">gitのhooksを管理する(自分用テンプレートを使う)</a>）。</p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>uasiさんの<br />8位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>179</kbd>
		<a target="_blank" href="https://qiita.com/uasi/items/fd93314cba7d41e53499">weakify/strongify マクロを使うと weak self パターンが簡単に書ける</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-10-15 11:21:46</center>
	</td>
	<td style="width:200px;">
		@uasi<br />(Increments 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/735/profile-images/1473681692">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Objective-C]</b> <b>[Mac]</b> <b>[iOS]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>ブロックの外で定義された変数をブロック内で使うとき、その変数はブロック内に <code>strong</code> 参照でキャプチャされる。場合によってはこれが循環参照を引き起こすことがある：</p>

<div class="code-frame" data-lang="objc"><div class="highlight"><pre><span></span><span class="c1">// self が block を strong 参照→ block が self をキャプチャ（strong 参照）</span>
<span class="nb">self</span><span class="p">.</span><span class="n">aStrongProperty</span> <span class="o">=</span> <span class="o">^</span><span class="p">{</span>
    <span class="n">NSLog</span><span class="p">(</span><span class="s">@"self = %@"</span><span class="p">,</span> <span class="nb">self</span><span class="p">);</span>
<span class="p">};</span>
</pre></div></div>

<p>これを回避するには、問題となる変数の <code>weak</code> 参照をブロックに渡すことになる：</p>

<div class="code-frame" data-lang="objc"><div class="highlight"><pre><span></span><span class="k">__weak</span> <span class="nf">typeof</span><span class="p">(</span><span class="nb">self</span><span class="p">)</span> <span class="n">wself</span> <span class="o">=</span> <span class="nb">self</span><span class="p">;</span>
<span class="c1">// __weak TheClass *wself = self; // If Xcode &lt; 4.4</span>

<span class="nb">self</span><span class="p">.</span><span class="n">aStrongProperty</span> <span class="o">=</span> <span class="o">^</span><span class="p">{</span>
    <span class="n">NSLog</span><span class="p">(</span><span class="s">@"self = %@"</span><span class="p">,</span> <span class="n">wself</span><span class="p">);</span>
<span class="p">};</span>
</pre></div></div>

<p><a href="https://github.com/jspahrsummers/libextobjc" rel="nofollow noopener" target="_blank">libextobjc</a> はこのパターンを簡単にする <a href="https://github.com/jspahrsummers/libextobjc/blob/master/extobjc/EXTScope.h" rel="nofollow noopener" target="_blank">weakify/strongify マクロ</a>を提供している。ブロックの外で、 <code>weak</code> 参照にしたい変数を引数に <code>@weakify()</code> を呼び、ブロックの中で先ほどの変数を引数に <code>@strongify()</code> を呼べばよい：</p>

<div class="code-frame" data-lang="objc"><div class="highlight"><pre><span></span><span class="cp">#import &lt;libextobjc/EXTScope.h&gt;</span>

<span class="p">...</span>

<span class="o">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">weakSelfPattern</span> <span class="p">{</span>
    <span class="p">@</span><span class="n">weakify</span><span class="p">(</span><span class="nb">self</span><span class="p">);</span>
    <span class="nb">self</span><span class="p">.</span><span class="n">aStrongProperty</span> <span class="o">=</span> <span class="o">^</span><span class="p">{</span>
        <span class="p">@</span><span class="n">strongify</span><span class="p">(</span><span class="nb">self</span><span class="p">);</span>
        <span class="n">NSLog</span><span class="p">(</span><span class="s">@"self = %@"</span><span class="p">,</span> <span class="nb">self</span><span class="p">);</span>
    <span class="p">};</span>
<span class="p">}</span>
</pre></div></div>

<p>マクロの引数には <code>@weakify(var1, var2, var3)</code> のように複数の変数を渡せる。また <code>unsafe_unretained</code> 参照を作る <code>@unsafeify()</code> マクロも用意されている。</p>

<p><code>wself = self</code> パターンと異なり、同名の変数をそのまま使えるので、ブロック内で <code>wself</code> の代わりに <code>self</code> を使ってしまうミスは起こりえない。</p>

<p>蛇足：マクロ名が <code>@</code> で始まっているが、これは Objective-C の組み込みのディレクティブではない。マクロ定義の先頭に空の autoreleasepool 文を置くことでディレクティブのような見た目のマクロを作るテクニックを使っている：</p>

<div class="code-frame" data-lang="objc"><div class="highlight"><pre><span></span><span class="cp">#define strongify(...) \</span>
<span class="cp">    autoreleasepool {} \</span>
<span class="cp">    《マクロ本体》</span>

<span class="c1">// `@strongify()` が `@autoreleasepool {} 《マクロ本体》` に展開される</span>
</pre></div></div>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>uasiさんの<br />9位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>170</kbd>
		<a target="_blank" href="https://qiita.com/uasi/items/79aecac40f1b2a5f929b">Xcode のスキームでビルド設定を切り替える</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2012-08-08 00:33:55</center>
	</td>
	<td style="width:200px;">
		@uasi<br />(Increments 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/735/profile-images/1473681692">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Mac]</b> <b>[AdventCalendar]</b> <b>[Xcode]</b> <b>[iOS]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>アプリのビルド設定をいくつか用意して簡単に切り替えたい、という状況がときどきあります。たとえば、開発用サーバに接続するデバッグアプリと本番サーバに接続するデバッグアプリを使い分けたい場合です。</p>

<p>そんなときは Xcode のスキームを使うと便利です。今回は Sample.app を作成し、普通のデバッグビルドに加えて、コンパイル時に <code>MY_DEBUG</code> マクロが定義されるデバッグビルドを実行できるようにしてみます。</p>

<h2>
<span id="1-プロジェクトのコンフィグを作る" class="fragment"></span><a href="#1-%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AE%E3%82%B3%E3%83%B3%E3%83%95%E3%82%A3%E3%82%B0%E3%82%92%E4%BD%9C%E3%82%8B"><i class="fa fa-link"></i></a>1. プロジェクトのコンフィグを作る</h2>

<p>コンフィグは、ビルドに関する様々な設定（ターゲット OS や使用するコンパイラ、リンカオプションなど）をまとめたものです。既存のデバッグ用コンフィグを複製して新しいコンフィグを用意してみましょう。</p>

<p>Project Navigator （Xcode の左ペインのファイルツリー）からプロジェクトを選択します。 Info タブを開くとプロジェクトの情報が表示されます。 Configurations の "Debug" を複製して名前を "Debug (MY_DEBUG)" とします。</p>

<p><a href="https://bitbucket.org/uasi/img/raw/master/xcode-scheme/xcode-1.png" rel="nofollow noopener" target="_blank"><img src="https://camo.qiitausercontent.com/500b0ba5ea9c628b6638dd55c7511966d9958d0d/68747470733a2f2f6269746275636b65742e6f72672f756173692f696d672f7261772f6d61737465722f78636f64652d736368656d652f78636f64652d312e706e67" alt="Xcode" data-canonical-src="https://bitbucket.org/uasi/img/raw/master/xcode-scheme/xcode-1.png"></a></p>

<h2>
<span id="2-ビルド設定にマクロの定義を追加する" class="fragment"></span><a href="#2-%E3%83%93%E3%83%AB%E3%83%89%E8%A8%AD%E5%AE%9A%E3%81%AB%E3%83%9E%E3%82%AF%E3%83%AD%E3%81%AE%E5%AE%9A%E7%BE%A9%E3%82%92%E8%BF%BD%E5%8A%A0%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>2. ビルド設定にマクロの定義を追加する</h2>

<p>Build Settings タブを開き、 Preprocessor Macros の設定を探します。先ほど作った "Debug (MY_DEBUG)" に <code>MY_DEBUG</code> マクロを追加します。</p>

<p><a href="https://bitbucket.org/uasi/img/raw/master/xcode-scheme/xcode-2.png" rel="nofollow noopener" target="_blank"><img src="https://camo.qiitausercontent.com/db9fc0a815827c265d527de03543d59b924d4f91/68747470733a2f2f6269746275636b65742e6f72672f756173692f696d672f7261772f6d61737465722f78636f64652d736368656d652f78636f64652d322e706e67" alt="Xcode" data-canonical-src="https://bitbucket.org/uasi/img/raw/master/xcode-scheme/xcode-2.png"></a></p>

<h2>
<span id="3-新しいスキームを作りビルド設定を変える" class="fragment"></span><a href="#3-%E6%96%B0%E3%81%97%E3%81%84%E3%82%B9%E3%82%AD%E3%83%BC%E3%83%A0%E3%82%92%E4%BD%9C%E3%82%8A%E3%83%93%E3%83%AB%E3%83%89%E8%A8%AD%E5%AE%9A%E3%82%92%E5%A4%89%E3%81%88%E3%82%8B"><i class="fa fa-link"></i></a>3. 新しいスキームを作りビルド設定を変える</h2>

<p>新しいスキームを作り、デバッグビルドに "Debug (MY_DEBUG)" コンフィグを使うように設定してみましょう。</p>

<p>ツールバーの Scheme ボタンをクリックして New Scheme... を選びます。名前を "Sample (MY_DEBUG)" とします（補足：スキーム名にカンマなどを含めるとビルドに失敗することがあります。カッコ以外の記号は使わないほうが無難です）。</p>

<p>Scheme ボタンから Edit Scheme… を選び、 "Sample (MY_DEBUG)" を編集します。左のリストから Run Sample.app を選び、 Info タブの Build Configuration を "Debug (MY_DEBUG)" に変更します。</p>

<p><a href="https://bitbucket.org/uasi/img/raw/master/xcode-scheme/xcode-3.png" rel="nofollow noopener" target="_blank"><img src="https://camo.qiitausercontent.com/261dafb87a74e2258822c6444753b842e00ba4da/68747470733a2f2f6269746275636b65742e6f72672f756173692f696d672f7261772f6d61737465722f78636f64652d736368656d652f78636f64652d332e706e67" alt="Xcode" data-canonical-src="https://bitbucket.org/uasi/img/raw/master/xcode-scheme/xcode-3.png"></a></p>

<h2>
<span id="4-スキームを共有する" class="fragment"></span><a href="#4-%E3%82%B9%E3%82%AD%E3%83%BC%E3%83%A0%E3%82%92%E5%85%B1%E6%9C%89%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>4. スキームを共有する</h2>

<p>Scheme ボタンから Manage Schemes… を選び、共有したいスキームの Shared チェックボックスをオンにします。チェックボックスがオンのスキームはファイルに書き出され、他の開発者と共有できるようになります。ファイルは <code>Sample.xcodeproj/xcshareddata/xcschemes/${スキーム名}.xcscheme</code> にあるので、バージョン管理システムに追加しておきましょう。</p>

<p><a href="https://bitbucket.org/uasi/img/raw/master/xcode-scheme/xcode-4.png" rel="nofollow noopener" target="_blank"><img src="https://camo.qiitausercontent.com/ac107ffa9e09b9ad846914a84c24ec60cc7ff1c5/68747470733a2f2f6269746275636b65742e6f72672f756173692f696d672f7261772f6d61737465722f78636f64652d736368656d652f78636f64652d342e706e67" alt="Xcode" data-canonical-src="https://bitbucket.org/uasi/img/raw/master/xcode-scheme/xcode-4.png"></a></p>

<h2>
<span id="5-できあがり" class="fragment"></span><a href="#5-%E3%81%A7%E3%81%8D%E3%81%82%E3%81%8C%E3%82%8A"><i class="fa fa-link"></i></a>5. できあがり</h2>

<p>Scheme ボタンから "Sample" か "Sample (MY_DEBUG)" を選ぶと <code>MY_DEBUG</code> マクロの有無が切り替わります。</p>

<p>コンフィグを変えるだけでなく、デバッガを使い分けたりビルドの前処理スクリプトを走らせたりと、色々なスキームを作ってみると便利かもしれません。</p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>uasiさんの<br />10位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>125</kbd>
		<a target="_blank" href="https://qiita.com/uasi/items/905376f02ff029fb23f8">どこでも使える git diff と git apply</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2012-06-28 18:05:20</center>
	</td>
	<td style="width:200px;">
		@uasi<br />(Increments 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/735/profile-images/1473681692">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Git]</b> <b>[AdventCalendar]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p><a href="http://qiita.com/advent-calendar/git">Git Advent Calendar / Jun.</a> 28日目の記事です。27日目は<a href="http://qiita.com/items/94d62f3678e9abcac82a">つるはしで過去を発掘する</a>でした。</p>

<h2>
<span id="git-リポジトリの外で-git-diff--git-apply" class="fragment"></span><a href="#git-%E3%83%AA%E3%83%9D%E3%82%B8%E3%83%88%E3%83%AA%E3%81%AE%E5%A4%96%E3%81%A7-git-diff--git-apply"><i class="fa fa-link"></i></a>Git リポジトリの外で git diff / git apply</h2>

<p>あまり知られていないことですが、 <code>git diff</code> と <code>git apply</code> は Git リポジトリの外でも使えます。普通の <code>diff</code> ではできない、バイナリファイルを含む2つのディレクトリの差分を取りたいときなどに重宝します。ちょっと試してみましょう。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>
$ mkdir dir1 dir2
$ echo foo &gt; dir1/text
$ echo FOO &gt; dir2/text
$ dd if=/dev/random of=dir1/binary bs=128 count=1
$ dd if=/dev/random of=dir2/binary bs=128 count=1

</pre></div></div>

<p>テキストファイルとバイナリファイルが入ったディレクトリを2つ作りました。普通の <code>diff</code> ではバイナリファイルの差分を取ることはできません。</p>

<p><code>diff -u dir1 dir2</code></p>

<div class="code-frame" data-lang="diff"><div class="highlight"><pre><span></span>
Binary files dir1/binary and dir2/binary differ
<span class="gh">diff -u dir1/text dir2/text</span>
<span class="gd">--- dir1/text   2012-06-28 16:48:32.000000000 +0900</span>
<span class="gi">+++ dir2/text   2012-06-28 16:48:32.000000000 +0900</span>
<span class="gu">@@ -1 +1 @@</span>
<span class="gd">-foo</span>
<span class="gi">+FOO</span>


</pre></div></div>

<p>一方 <code>git diff --binary</code> を使うとバイナリを含むパッチが得られます。</p>

<p><code>git diff --binary dir1 dir2</code></p>

<div class="code-frame" data-lang="diff"><div class="highlight"><pre><span></span>
<span class="gh">diff --git a/dir1/binary b/dir2/binary</span>
<span class="gh">index ce195bd3098cc3b7d9ea45170ae98463d131b3fd..00bbd22890c313431de290904e113305ce99fcab 100644</span>
GIT binary patch
literal 128
zcmV-`0Du1;k;Pa0+FuT5!&gt;8TMElMN9Z%UuV(Tp}ptw)JgHb%ThC}#@j)Zg{X4(Yeg
zfX+xCRLKBQKgWDS#D)-z(mJ@gT8~;}Z92E(d}&lt;vQnpTw)nl?Q%1;W-Hx;2^6xj!Ef
i%}&lt;GnpBm$~xF&gt;{|;42RdCI?2*JSg#nOx8E2B9vaYi#yZ+

literal 128
zcmV-`0Du20VOk!F$T*e~S4k_&amp;Yxd-&gt;rZ+!pu9lyoZIANBsyQkVLw$$bmPV%?s!+3Z
zj+TZ0Zo#oxfc8Q;@cJ9WFkrKwbXtAZUnnJp4CR=73c}zSDZ-yYRl8vKd&amp;M5Dy#gCJ
ib#HN7*JJ}YBj;`sg?r+$yBS;CFfHAu4B@J0&gt;lBK%$37nb

<span class="gh">diff --git a/dir1/text b/dir2/text</span>
<span class="gh">index 257cc56..bc56c4d 100644</span>
<span class="gd">--- a/dir1/text</span>
<span class="gi">+++ b/dir2/text</span>
<span class="gu">@@ -1 +1 @@</span>
<span class="gd">-foo</span>
<span class="gi">+FOO</span>

</pre></div></div>

<p>このパッチは <code>git apply</code> で適用できます。もう <code>diff</code> と <code>patch</code> には戻れませんね。</p>

<h2>
<span id="git-リポジトリの中で-git-diff--git-apply" class="fragment"></span><a href="#git-%E3%83%AA%E3%83%9D%E3%82%B8%E3%83%88%E3%83%AA%E3%81%AE%E4%B8%AD%E3%81%A7-git-diff--git-apply"><i class="fa fa-link"></i></a>Git リポジトリの中で git diff / git apply</h2>

<p>さて、 <strong>Git リポジトリの中</strong>にあるファイルやディレクトリの差分を取るには少し工夫が必要です。 <code>git diff --binary HEAD:dir1 HEAD:dir2</code> のようにコミットを明示するか、  <code>git diff</code> に <code>--no-index</code> オプションをつけてインデックスを無視します。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>
### Git リポジトリの外では普通に差分が取れる
$ git diff --binary dir1 dir2
diff --git a/dir1/binary b/dir2/binary
# （略）

### リポジトリを作ると——
$ git init .; git add .; git commit -m "commit"

### 差分が取れない
$ git diff --binary dir1 dir2
# （何も出力されない）

### コミットを明示すればいい
$ git diff --binary HEAD:dir1 HEAD:dir2
diff --git a/dir1/binary b/dir2/binary
# （略）

### --no-index を使ってもいい
$ git diff --no-index --binary dir1 dir2
diff --git a/dir1/binary b/dir2/binary
# （略）

</pre></div></div>

<p>また、こうして作ったパッチを Git リポジトリの中で適用するには、 <code>git --git-dir= apply ...</code> とします。<code>git</code> と <code>apply</code> の間にオプションを書くことに注意してください（ <code>apply</code> の後ではありません）。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>### Git リポジトリの中で dir1 と dir2 の差分を取って、
### dir1 に適用したい
$ git diff --no-index --binary dir1 dir2 &gt; patch
$ cd dir1

### 元々の text の中身は "foo"
$ cat text
foo

### 普通に git apply してもパッチは当たらない
$ git apply -p2 ../patch
$ cat text
foo

### --git-dir= をつけるとパッチが当たる
$ git --git-dir= apply -p2 ../patch
$ cat text
FOO

</pre></div></div>

<p><code>git --git-dir= apply</code> は、パッチに含まれるコミット情報を無視することができて便利です。たとえば、無関係な2つの Git リポジトリの一方でパッチを作り、もう一方に適用することができます。また、 <code>git format-patch</code> で作ったパッチを、コミットを作らずに適用したいときにも使えます。</p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>uasiさんの<br />11位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>73</kbd>
		<a target="_blank" href="https://qiita.com/uasi/items/ee71a476ec3ef9c3c10d">weak 参照してはいけない Cocoa のクラス一覧</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-05-24 11:30:02</center>
	</td>
	<td style="width:200px;">
		@uasi<br />(Increments 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/735/profile-images/1473681692">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Objective-C]</b> <b>[MacOSX]</b> <b>[Cocoa]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p><a href="https://developer.apple.com/library/mac/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html" rel="nofollow noopener" target="_blank">Transitioning to ARC Release Notes</a> によれば、 OS X 10.8 において以下のクラスが weak 参照に対応していない：</p>

<ul>
<li><code>NSATSTypesetter</code></li>
<li><code>NSColorSpace</code></li>
<li><code>NSFont</code></li>
<li><code>NSMenuView</code></li>
<li><code>NSParagraphStyle</code></li>
<li><code>NSSimpleHorizontalTypesetter</code></li>
<li><code>NSTextView</code></li>
</ul>

<p>OS X 10.7 では、上記に加えてこれらのクラスも weak 参照してはならない：</p>

<ul>
<li><code>NSFontManager</code></li>
<li><code>NSFontPanel</code></li>
<li><code>NSImage</code></li>
<li><code>NSTableCellView</code></li>
<li><code>NSViewController</code></li>
<li><code>NSWindow</code></li>
<li><code>NSWindowController</code></li>
<li>AV Foundation のすべてのクラス</li>
</ul>

<p>weak 参照した場合 "cannot form weak reference to instance (&lt;address&gt;) of class &lt;ClassName&gt;" とランタイムエラーが発生する。</p>

<p>これらのクラスを弱参照したい場合は、変数を <code>__unsafe_unretained</code> で修飾するか、プロパティ属性を <code>unsafe_unretained</code> （または <code>assign</code>）にすること。参照はゼロ化されないことに注意。</p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>uasiさんの<br />12位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>48</kbd>
		<a target="_blank" href="https://qiita.com/uasi/items/a20ea86fa11484ccd1db">コンフリクトした xib ファイルを上手にマージする</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-06-10 18:09:19</center>
	</td>
	<td style="width:200px;">
		@uasi<br />(Increments 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/735/profile-images/1473681692">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Objective-C]</b> <b>[Mac]</b> <b>[Git]</b> <b>[Xcode]</b> <b>[iOS]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>本稿では、 Git でブランチをマージした際にコンフリクトした xib ファイルの衝突解決手順を解説する。</p>

<p><strong>追記：</strong> Xcode 5 から導入された新しい xib フォーマットではコンフリクトが起こりにくくなっている。また、コンフリクトした場合に手作業で xib ファイルを編集することも、以前のフォーマットと比べれば容易になっている。本稿では以前のフォーマットを使っていることを前提に話を進める。</p>

<h1>
<span id="ステップ0コンフリクトの解決をあきらめる" class="fragment"></span><a href="#%E3%82%B9%E3%83%86%E3%83%83%E3%83%970%E3%82%B3%E3%83%B3%E3%83%95%E3%83%AA%E3%82%AF%E3%83%88%E3%81%AE%E8%A7%A3%E6%B1%BA%E3%82%92%E3%81%82%E3%81%8D%E3%82%89%E3%82%81%E3%82%8B"><i class="fa fa-link"></i></a>ステップ0：コンフリクトの解決をあきらめる</h1>

<p>Xib ファイルをテキストエディタで編集してコンフリクトを解決しようなどと考えてはいけない（変更がごく小規模な場合を除く）。コンフリクトした xib ファイルは捨てて素直に作り直すのがよい。ただし、記憶を頼りに変更を再現する必要はない。 Xib ファイルの要素は <strong>コピー&amp;ペーストできる</strong> ので、変更点の移植は比較的簡単にできる。</p>

<h1>
<span id="ステップ1ベースにする-xib-ファイルをチェックアウトする" class="fragment"></span><a href="#%E3%82%B9%E3%83%86%E3%83%83%E3%83%971%E3%83%99%E3%83%BC%E3%82%B9%E3%81%AB%E3%81%99%E3%82%8B-xib-%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%82%92%E3%83%81%E3%82%A7%E3%83%83%E3%82%AF%E3%82%A2%E3%82%A6%E3%83%88%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>ステップ1：ベースにする xib ファイルをチェックアウトする</h1>

<p>以下、 <code>base</code> ブランチに <code>other</code> ブランチをマージし、 <code>Foo.xib</code> がコンフリクトしたと想定する：</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>git checkout base
git merge --no-ff other
# Foo.xib がコンフリクト
</pre></div></div>

<p>まずはどちらかのブランチから <code>Foo.xib</code> をチェックアウトする。ここでチェックアウトしたファイルをベースにして他方のファイルの変更を取り込むため、共通の祖先から見て <strong>変更量が多いほう</strong> を選ぶとよい：</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>git checkout base -- Foo.xib
# または
git checkout other -- Foo.xib
</pre></div></div>

<h1>
<span id="ステップ2他方の-xib-ファイルをプロジェクトに追加する" class="fragment"></span><a href="#%E3%82%B9%E3%83%86%E3%83%83%E3%83%972%E4%BB%96%E6%96%B9%E3%81%AE-xib-%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%82%92%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AB%E8%BF%BD%E5%8A%A0%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>ステップ2：他方の xib ファイルをプロジェクトに追加する</h1>

<p>他方のブランチから xib ファイルを <code>Foo_.xib</code> に書き出す：</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span># ステップ1で base をベースにしたなら
git show other:Foo.xib &gt; Foo_.xib

# other をベースにしたなら
git show base:Foo.xib &gt; Foo_.xib
</pre></div></div>

<p>そして <code>Foo_.xib</code> をプロジェクトに追加する。</p>

<h1>
<span id="ステップ3ベースとなる-xib-ファイルに他方の要素を取り込む" class="fragment"></span><a href="#%E3%82%B9%E3%83%86%E3%83%83%E3%83%973%E3%83%99%E3%83%BC%E3%82%B9%E3%81%A8%E3%81%AA%E3%82%8B-xib-%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AB%E4%BB%96%E6%96%B9%E3%81%AE%E8%A6%81%E7%B4%A0%E3%82%92%E5%8F%96%E3%82%8A%E8%BE%BC%E3%82%80"><i class="fa fa-link"></i></a>ステップ3：ベースとなる xib ファイルに他方の要素を取り込む</h1>

<p><code>Foo_.xib</code> を開き、取り込みたい <code>Foo_.xib</code> の要素を選択してコピーする。 <code>Foo.xib</code> を開き、コピーした要素をペーストする。</p>

<p><a href="https://camo.qiitausercontent.com/218dba80e02eb5e2089481193b409d623939d6c6/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3733352f61303332313033392d386337382d666438632d336436382d3033376236323734316564612e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/218dba80e02eb5e2089481193b409d623939d6c6/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3733352f61303332313033392d386337382d666438632d336436382d3033376236323734316564612e706e67" alt="step3.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/735/a0321039-8c78-fd8c-3d68-037b62741eda.png"></a></p>

<p>コピー&amp;ペーストでは Identifier や Tag、 Editable といった属性もコピーされる。ただし、アウトレットと Cocoa Binding の設定は <strong>コピーされない</strong> ので、コピー後に改めて設定する。また、要素の Object ID も変化していることに注意。</p>

<p>要素のコピーと設定を終えたら <code>Foo_.xib</code> をプロジェクトから削除する。</p>

<h1>
<span id="ステップ4オプション-strings-ファイルを編集する" class="fragment"></span><a href="#%E3%82%B9%E3%83%86%E3%83%83%E3%83%974%E3%82%AA%E3%83%97%E3%82%B7%E3%83%A7%E3%83%B3-strings-%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%82%92%E7%B7%A8%E9%9B%86%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>ステップ4（オプション）： strings ファイルを編集する</h1>

<p>ローカライズに使う strings ファイルが存在する場合、コピー後の要素に合わせて Object ID を書き換える：</p>

<div class="code-frame" data-lang="C">
<div class="code-lang"><span class="bold">Foo.strings</span></div>
<div class="highlight"><pre><span></span><span class="cm">/* Class = "NSButtonCell"; title = "Button"; ObjectID = "42"; */</span> <span class="c1">// ←ここと</span>
<span class="s">"42.title"</span> <span class="o">=</span> <span class="s">"ボタン"</span><span class="p">;</span>                                            <span class="c1">// ←ここの ID</span>
</pre></div>
</div>

<h1>
<span id="ステップ5オプション-ibtool-で-xib-をローカライズする" class="fragment"></span><a href="#%E3%82%B9%E3%83%86%E3%83%83%E3%83%975%E3%82%AA%E3%83%97%E3%82%B7%E3%83%A7%E3%83%B3-ibtool-%E3%81%A7-xib-%E3%82%92%E3%83%AD%E3%83%BC%E3%82%AB%E3%83%A9%E3%82%A4%E3%82%BA%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>ステップ5（オプション）： ibtool で xib をローカライズする</h1>

<p><a href="http://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/ibtool.1.html" rel="nofollow noopener" target="_blank">ibtool コマンド</a>で差分ローカライズを実践しているなら、コンフリクトした2つの xib ファイルの <strong>共通の祖先</strong> を差分のベースにするとよい。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>git show `git merge-base base other`:Foo.xib &gt; Foo_common_ancestor.xib
ibtool --localize-incremental \
       --previous-file    Foo_common_ancestor.xib \
       --incremental-file Foo_localized.xib \
       --strings-file     Foo.strings \
       --write            Foo_localized.xib \
       Foo.xib
rm Foo_common_ancestor.xib
</pre></div></div>

<h1>
<span id="git-tips" class="fragment"></span><a href="#git-tips"><i class="fa fa-link"></i></a>Git Tips</h1>

<p>マージ中の2つのブランチの、元々チェックアウトされていたほうは <code>HEAD</code> で参照できる。他方（<code>git merge</code> の引数にしたほう）は <code>MERGE_HEAD</code> になる。つまりステップ1とステップ2は次のようにも実行できる：</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>git checkout HEAD -- Foo.xib
git show MERGE_HEAD:Foo.xib &gt; Foo_.xib
</pre></div></div>

<p>また、 <code>git checkout</code> には <code>--ours</code> と <code>--theirs</code> オプションもある：</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span># 同じ
git checkout HEAD -- Foo.xib
git checkout --ours -- Foo.xib

# 同じ
git checkout MERGE_HEAD -- Foo.xib
git checkout --theirs -- Foo.xib
</pre></div></div>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>uasiさんの<br />13位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>48</kbd>
		<a target="_blank" href="https://qiita.com/uasi/items/251f4e66ceb95c043b3d">Markdown でバッククオートを含むインラインコードを書くには</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-05-14 16:39:05</center>
	</td>
	<td style="width:200px;">
		@uasi<br />(Increments 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/735/profile-images/1473681692">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Qiita]</b> <b>[Markdown]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>インラインコードに含まれるバッククオートのうち、もっとも長く連続するもの<strong>よりも多い連続バッククオート</strong>でコードを囲む。</p>

<div class="code-frame" data-lang="markdown"><div class="highlight"><pre><span></span>
`` ` （←バッククオートひとつ） ``
``` `` （←バッククオートふたつ）```


</pre></div></div>

<p>↓</p>

<p><code>` （←バッククオートひとつ）</code><br>
<code>`` （←バッククオートふたつ）</code></p>

<p>インラインコードの先頭か末尾にバッククオートがある場合は、コードを囲むバッククオートと区別するためにスペースを入れる（レンダリング結果にスペースは含まれない）。</p>

<h2>
<span id="仕様の細かい話" class="fragment"></span><a href="#%E4%BB%95%E6%A7%98%E3%81%AE%E7%B4%B0%E3%81%8B%E3%81%84%E8%A9%B1"><i class="fa fa-link"></i></a>仕様の細かい話</h2>

<p><a href="http://daringfireball.net/projects/markdown/syntax#code" rel="nofollow noopener" target="_blank">オリジナルの Markdown の仕様</a>は、連続バッククオートでバッククオートを囲めると述べているだけで、個数の対応関係には言及していない。</p>

<p><a href="http://daringfireball.net/projects/markdown/dingus" rel="nofollow noopener" target="_blank">オリジナルの実装（Markdown.pl 1.0.2b7）</a>で試してみると、囲まれる連続バッククオートと異なる個数であれば、いくつの連続バッククオートで囲ってもよいようだ。たとえば2連続バッククオートを1個ずつのバッククオートで囲むことができる：</p>

<div class="code-frame" data-lang="text">
<div class="code-lang"><span class="bold">using-Markdown.pl</span></div>
<div class="highlight"><pre><span></span>Markdown: ` `` `
↓
HTML: &lt;code&gt;``&lt;/code&gt;
</pre></div>
</div>

<p>しかしこの文字列は、 Markdown 実装によっては「<code>` `</code>」を2つ並べたものと扱われてしまう：</p>

<div class="code-frame" data-lang="text">
<div class="code-lang"><span class="bold">using-sundown</span></div>
<div class="highlight"><pre><span></span>Markdown: ` `` `
↓
HTML: &lt;code&gt; &lt;/code&gt;&lt;code&gt; &lt;/code&gt;
</pre></div>
</div>

<p>この記事ではどちらの実装でも動くように、より多いバッククオートで囲むべきであるとした。</p>

<p>なお、 <a href="http://spec.commonmark.org/0.17/#example-253" rel="nofollow noopener" target="_blank">CommonMark の仕様（バージョン0.17）</a>は、オリジナルの実装の挙動に沿うようにバッククオートの個数を明文化している。</p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>uasiさんの<br />14位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>47</kbd>
		<a target="_blank" href="https://qiita.com/uasi/items/6ebcce530d9530293fec">もっと怠惰に Git を使うシェルの設定でもっとラクをする、あるいは賢い st の話。そしておまけ。</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2012-06-22 15:04:12</center>
	</td>
	<td style="width:200px;">
		@uasi<br />(Increments 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/735/profile-images/1473681692">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Git]</b> <b>[AdventCalendar]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p><a href="http://qiita.com/advent-calendar/git">Git Advent Calendar / Jun.</a> 22日目の記事です。21日目は<a href="http://qiita.com/items/f60c391b5dbf569a1d12">git最強のオプション filter-branch</a>でした。</p>

<h2>
<span id="gst-には怠惰さが足りない" class="fragment"></span><a href="#gst-%E3%81%AB%E3%81%AF%E6%80%A0%E6%83%B0%E3%81%95%E3%81%8C%E8%B6%B3%E3%82%8A%E3%81%AA%E3%81%84"><i class="fa fa-link"></i></a>gst には怠惰さが足りない</h2>

<p>さて、12日目に<a href="http://qiita.com/items/1f01aa09ccf148542f21">怠惰にgitを使うためのシェル活用術、またはgst一族</a>という記事がありました。これ、僕に言わせればまだ怠惰さが足りません。 <code>alias gst='git status'</code> などを設定すると便利という内容なのですが、 <code>gst</code> は長い。3文字です。g を取って <code>st</code> でいいじゃん。 <code>gb</code> も g を取って <code>b</code> でいいじゃん。</p>

<p>こう反論する向きもあるかもしれません。「自分は Mercurial や Subversion も使っていて <code>alias hst='hg status'; alias sst='svn status'</code> と設定している。区別と統一性のために g が必要なのだ。てゆーか短いエイリアスってヤじゃね」</p>

<p>でもやっぱり <code>gst</code> は長い。3文字です。カレントリディレクトリが Git リポジトリなのか Mercurial リポジトリなのかは明らかですから、人間様がプレフィクスをつけて <code>gst</code> やら <code>hst</code> やら使い分けなくても、コマンドの側が空気を読んでくれないものでしょうか。</p>

<p>たとえば、こんな <code>st</code> コマンドを想像してみてください。Git リポジトリの中で <code>st</code> と叩けば <code>git status</code> になり、 Mercurial リポジトリの中で <code>st</code> すれば <code>hg status</code> になる。 Subversion リポジトリの中での <code>st</code> は当然 <code>svn status</code> を実行する。コンピュータと言えどそれくらいの融通は利いてくれてもいいと思いませんか。</p>

<p>思いませんか、と自分の MacBook に語り掛けてみてもヨシきたお前さんの言うとおりにしてやらあと袖まくりしてくれるわけではないので、てやんでいべらぼうめとか言いながら自分で Zsh スクリプトを書きました。</p>

<p><a href="https://github.com/uasi/zsh-context-sensitive-alias" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/uasi/zsh-context-sensitive-alias</a></p>

<p>この csa.zsh を使うと上述の賢い <code>st</code> が実現できます。</p>

<h2>
<span id="賢い-st-の使い方" class="fragment"></span><a href="#%E8%B3%A2%E3%81%84-st-%E3%81%AE%E4%BD%BF%E3%81%84%E6%96%B9"><i class="fa fa-link"></i></a>賢い st の使い方</h2>

<p>賢い <code>st</code> はこんな具合に賢いです。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>
# Git リポジトリに cd すると st == git status になる
$ cd ~/git-repo
$ st
## master
?? hoge

# 引数も普通に渡せる
$ st --ignored
## master
!! .DS_Store
?? hoge

# Mercurial リポジトリに cd すると st == hg status になる
$ cd ~/hg-repo
$ st
? fuga

# リポジトリでないディレクトリでは st は未定義
$ cd ~/not-a-repo
$ st
zsh: command not found: st

</pre></div></div>

<p>.zshrc の設定はだいたいこんな感じです。</p>

<div class="code-frame" data-lang="bash">
<div class="code-lang"><span class="bold">.zshrc</span></div>
<div class="highlight"><pre><span></span>
<span class="c1"># csa.zsh を読み込む</span>
<span class="nb">source</span> csa.zsh

<span class="c1"># 初期化する</span>
<span class="c1"># （csa_init 以降 alias コマンドが正しく動かなくなるので、</span>
<span class="c1"># これ以下の設定は .zshrc の終わりあたりに書くとよい）</span>
csa_init

<span class="c1"># エイリアスを定義する</span>
<span class="c1"># csalias &lt;ctx&gt; &lt;alias&gt; &lt;cmd&gt;</span>
<span class="c1">#     ctx  : コンテキストを表す任意の文字列</span>
<span class="c1">#     alias: エイリアス名</span>
<span class="c1">#     cmd  : エイリアスに割り当てるコマンド</span>
csalias ctx_git st <span class="s1">'git status -sb'</span>
csalias ctx_hg  st <span class="s1">'hg  status'</span>
csalias ctx_svn st <span class="s1">'svn status'</span>

<span class="c1"># ディレクトリを移動したときコンテキストが設定されるようにする</span>
<span class="c1"># （chpwd という名前の関数は、 cd したとき必ず呼ばれる）</span>
<span class="k">function</span> chpwd<span class="o">()</span> <span class="o">{</span>
    <span class="c1"># カレントディレクトリがどの種類のリポジトリか判別し、</span>
    <span class="c1"># それに合わせてコンテキストを選ぶ</span>
    <span class="nb">local</span> -a ctx
    <span class="k">if</span> <span class="o">[[</span> -n <span class="sb">`</span>git rev-parse --is-inside-work-tree <span class="m">2</span>&gt; /dev/null<span class="sb">`</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
        <span class="nv">ctx</span><span class="o">+=</span>ctx_git
    <span class="k">elif</span> <span class="o">[[</span> -n <span class="sb">`</span>hg root <span class="m">2</span>&gt; /dev/null<span class="sb">`</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
        <span class="nv">ctx</span><span class="o">+=</span>ctx_hg
    <span class="k">elif</span> <span class="o">[[</span> -d .svn <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
        <span class="nv">ctx</span><span class="o">+=</span>ctx_svn
    <span class="k">fi</span>

    <span class="c1"># コンテキストを設定する</span>
    <span class="c1"># csa_set_context [&lt;ctx&gt; [&lt;ctx&gt; …]]</span>
    <span class="c1">#     ctx: コンテキストを表す任意の文字列</span>
    csa_set_context <span class="nv">$ctx</span>
<span class="o">}</span>

</pre></div>
</div>

<p>これで <code>st</code> の2文字さえ覚えればどのリポジトリでもステータスを表示できるようになりました。 <code>gst</code> と <code>hst</code> と <code>sst</code> の計9文字を使い分けていたのに比べると、覚えるべき文字数を78%も削減できたことになります。</p>

<p>僕は他にも以下のような設定をしています。1文字エイリアスこそ怠惰の極みです。</p>

<div class="code-frame" data-lang="bash">
<div class="code-lang"><span class="bold">.zshrc</span></div>
<div class="highlight"><pre><span></span>
csalias ctx_git b <span class="s1">'git branch'</span>
csalias ctx_git c <span class="s1">'git commit'</span>
csalias ctx_git d <span class="s1">'git diff'</span>
csalias ctx_git l <span class="s1">'git log --decorate'</span>
csalias ctx_git m <span class="s1">'git merge --no-ff'</span>
<span class="c1"># hg と svn の設定は略</span>

</pre></div>
</div>

<h2>
<span id="まだまだ怠惰さが足りない" class="fragment"></span><a href="#%E3%81%BE%E3%81%A0%E3%81%BE%E3%81%A0%E6%80%A0%E6%83%B0%E3%81%95%E3%81%8C%E8%B6%B3%E3%82%8A%E3%81%AA%E3%81%84"><i class="fa fa-link"></i></a>まだまだ怠惰さが足りない？</h2>

<p>と、作るには作ってみましたが、他に活用できる場面を思いつきません。怠惰さが足りないのかもしれません。<a href="http://qiita.com/items/54af83acdc232ee0f975">以前書いた記事</a>を焼き直してこの記事を仕立てる程度の怠惰さでは不足なのでしょうか。</p>

<p>僕よりも怠惰な皆さんはこのスクリプトのうまい活用法をきっと見つけてくれるものと信じています。あるいは怠惰道を極め、念じるだけで <code>st</code> できる手段を編み出してください。以上です。</p>

<h2>
<span id="追伸" class="fragment"></span><a href="#%E8%BF%BD%E4%BC%B8"><i class="fa fa-link"></i></a>追伸</h2>

<p>ほとんど宣伝だし使い回しだし Git の話もしてないと書き上げてから気づいたので、適当に便利そうな小ネタをおまけしてお茶を濁すことにします。</p>

<h3>
<span id="insteadof" class="fragment"></span><a href="#insteadof"><i class="fa fa-link"></i></a>insteadOf</h3>

<p>.gitconfig に</p>

<div class="code-frame" data-lang="ini">
<div class="code-lang"><span class="bold">.gitconfig</span></div>
<div class="highlight"><pre><span></span>
<span class="k">[url "git@github.com:USERNAME/"]</span>
    <span class="na">insteadof</span> <span class="o">=</span> <span class="s">gh:</span>

</pre></div>
</div>

<p>こう書いておくと <code>gh:repo</code> で GitHub にある自分の <code>repo</code> リポジトリにアクセスできます。 <code>git clone gh:repo</code> とか <code>git push gh:repo master</code> とか。便利ですね。</p>

<h3>
<span id="pushinsteadof" class="fragment"></span><a href="#pushinsteadof"><i class="fa fa-link"></i></a>pushInsteadOf</h3>

<p>GitHub にあるリポジトリには様々なプロトコルでアクセスできます：</p>

<ul>
<li><code>https://github.com/USERNAME/repo.git</code></li>
<li><code>git://github.com/USERNAME/repo.git</code></li>
<li><code>git@github.com:USERNAME/repo.git</code></li>
</ul>

<p>上の2つはリードオンリーなため、 push するとエラーが表示されます。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>
$ git push origin master  # (origin == git://github.com/USERNAME/repo.git)
fatal: remote error: 
  You can't push to git://github.com/USERNAME/repo.git
  Use git@github.com:USERNAME/repo.git

</pre></div></div>

<p>コミット権限のないリポジトリをリードオンリーな URL から clone したけれど、後からやっぱりコミッタになった、というときは origin の URL を設定し直さなければならず不便ですね。</p>

<p>ところが pushInsteadOf を使うと push 先の URL を書き換えることができます。</p>

<div class="code-frame" data-lang="ini">
<div class="code-lang"><span class="bold">.gitconfig</span></div>
<div class="highlight"><pre><span></span>
<span class="k">[url "git@github.com:"]</span>
    <span class="na">pushinsteadof</span> <span class="o">=</span> <span class="s">"https://github.com/"</span>
<span class="s">    pushinsteadof = "git://github.com/"</span>

</pre></div>
</div>

<p>こう設定しておくだけで、 <code>git://github.com/...</code> への push が <code>git@github.com:...</code> への push に置き換わります。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>
$ git push origin master  # (origin == git://github.com/USERNAME/repo.git)
Everything up-to-date

</pre></div></div>

<p>便利ですね。</p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>uasiさんの<br />15位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>44</kbd>
		<a target="_blank" href="https://qiita.com/uasi/items/3e454d67a03fc66a56a7">英語では「0オリジン」「1オリジン」とは（あまり）言わない</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-08-24 12:53:01</center>
	</td>
	<td style="width:200px;">
		@uasi<br />(Increments 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/735/profile-images/1473681692">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[English]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>配列の添字が0または1から始まることを日本では「0オリジン」「1オリジン」と言う<del>が、どうやらこれは和製英語らしい</del>。一般的に英語ではそれぞれ <a href="http://en.wikipedia.org/wiki/Zero-based_numbering" rel="nofollow noopener" target="_blank">zero-based, one-based</a> と言う。</p>

<p>「添字が0から始まるインデックス方式」は "<a href="http://www.allwords.com/word-zero+based+indexing.html" rel="nofollow noopener" target="_blank">zero-based indexing</a>"、「1から始まる添字を使った文字列アクセス」は "<a href="http://msdn.microsoft.com/en-us/library/ms233801.aspx" rel="nofollow noopener" target="_blank">one-based string access</a>" となる。</p>

<p>追記：zero-origin も使われているようだ。</p>

<ul>
<li><a href="https://www.google.co.jp/search?q=%22zero-based+index%22" rel="nofollow noopener" target="_blank">zero-based index の検索結果、約170万件</a></li>
<li><a href="https://www.google.co.jp/search?q=%22zero-origin+index%22" rel="nofollow noopener" target="_blank">zero-origin index の検索結果、約3万件</a></li>
</ul>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>uasiさんの<br />16位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>39</kbd>
		<a target="_blank" href="https://qiita.com/uasi/items/996b24185dffb003105a">Mac でファイル名に使えない文字</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-02-17 23:19:45</center>
	</td>
	<td style="width:200px;">
		@uasi<br />(Increments 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/735/profile-images/1473681692">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Objective-C]</b> <b>[Mac]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>Mac でファイル名に使えない文字はたったひとつだけ、 <code>/</code> である。そんなはずはないぞ、と思う人もいるかもしれない。たとえば、 web ページのリンクを保存するとファイル名にスラッシュが入っていることがある：</p>

<p><a href="https://camo.qiitausercontent.com/d6c74abe3070e38eddd3e5105b69bd97d519c0f6/68747470733a2f2f6269746275636b65742e6f72672f756173692f702f7261772f6d61737465722f31312f313130616165386361663939363437313661633864656362323536366466396565313434343638662e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/d6c74abe3070e38eddd3e5105b69bd97d519c0f6/68747470733a2f2f6269746275636b65742e6f72672f756173692f702f7261772f6d61737465722f31312f313130616165386361663939363437313661633864656362323536366466396565313434343638662e706e67" alt="" data-canonical-src="https://bitbucket.org/uasi/p/raw/master/11/110aae8caf9964716ac8decb2566df9ee144468f.png"></a></p>

<p>実は、このファイル名を <code>ls</code> コマンドなどで表示すると <code>http-::</code>… となっていることがわかる。ファイル名に含まれる<strong>コロンは Finder からはスラッシュに見える</strong>のである（<code>touch foo:bar.txt; open .</code> などと実行して確かめてみてほしい）。では Finder からファイル名にコロンを入力すればどうなるかというと、そのようなファイル名では保存できないようになっている。</p>

<p>この理由は、 OS X 以前の Mac OS ではコロンがパスの区切り文字として使われていたことによる。古い Mac ではスラッシュに特別な意味がなかったのでファイル名に含めることができたが、 Unix ベースとなった OS X ではスラッシュがパスの区切り文字になったため、ファイル名にスラッシュを使えなくなってしまった。そこで、表示上の互換性を取るために、 OS X では特別な意味がなくなったコロンをスラッシュの代用文字としたのである。</p>

<p>Cocoa や CoreFoundation のメソッド/関数でファイルにデータを書き込む場合、ファイル名にスラッシュを含めないようにすることと、コロンは Finder からスラッシュに見えることに気をつける必要がある。</p>

<p><strong>補足：</strong>より正確にいうと、ファイルシステムのレイヤーでは依然<strong>コロンがパス区切り文字</strong>として使われている。ファイルシステムにおけるコロンは Unix レイヤーではスラッシュに（そしてスラッシュはコロンに）変換される。変換の図式を以下に示す：</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>Layer       | Path
=====================================================
Finder      | path folder -&gt; to folder -&gt; foo/bar.txt
------------+----------------------------------------
Unix        | /path/to/foo:bar.txt
------------+----------------------------------------
Filesystem  | :path:to:foo/bar.txt
</pre></div></div>

<p>参考にしたページ：<a href="http://www.macgeekery.com/gspot/2006-09/when_a_colons_a_slash_and_a_slashs_a_colon" rel="nofollow noopener" target="_blank">When a Colon's a Slash and a Slash's a Colon</a></p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>uasiさんの<br />17位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>37</kbd>
		<a target="_blank" href="https://qiita.com/uasi/items/f06c6fe7c04b593ec6a3">Homebrew でバージョンを指定してインストールするコマンド作った</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2012-06-25 16:39:14</center>
	</td>
	<td style="width:200px;">
		@uasi<br />(Increments 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/735/profile-images/1473681692">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Mac]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p><a href="http://qiita.com/items/f8f647e757842f08b9ec">homebrewでバージョンを指定してインストールする</a>が便利だったのでコマンドにしてみました。</p>

<div class="code-frame" data-lang="bash">
<div class="code-lang"><span class="bold">homebrew-install-version</span></div>
<div class="highlight"><pre><span></span>
<span class="c1">#!/usr/bin/env zsh</span>

<span class="k">if</span> <span class="o">[[</span> <span class="nv">$#</span> -lt <span class="m">2</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
    print -P <span class="s2">"%UUsage%u: brew install-version [install options] FORMULA VERSION"</span>
    <span class="nb">exit</span> <span class="m">1</span>
<span class="k">fi</span>

<span class="nv">formula</span><span class="o">=</span>
<span class="nv">version</span><span class="o">=</span>
<span class="nv">install_opts</span><span class="o">=()</span>
<span class="nv">versions_opts</span><span class="o">=()</span>
<span class="k">for</span> arg in <span class="nv">$*</span><span class="p">;</span> <span class="k">do</span>
    <span class="k">if</span> <span class="o">[[</span> <span class="nv">$arg</span> <span class="o">=</span>~ <span class="s1">'^--'</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
        <span class="nv">install_opts</span><span class="o">+=</span><span class="nv">$arg</span>
        <span class="o">[[</span> <span class="nv">$arg</span> <span class="o">==</span> --devel <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nv">versions_opts</span><span class="o">+=</span><span class="nv">$arg</span>
        <span class="k">continue</span>
    <span class="k">fi</span>
    <span class="k">if</span> <span class="o">[[</span> -z <span class="nv">$formula</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
        <span class="nv">formula</span><span class="o">=</span><span class="nv">$arg</span>
        <span class="k">continue</span>
    <span class="k">fi</span>
    <span class="nv">version</span><span class="o">=</span><span class="nv">$arg</span>
<span class="k">done</span>

<span class="nv">versions</span><span class="o">=</span><span class="sb">`</span>brew versions <span class="nv">$versions_opts</span> <span class="nv">$formula</span><span class="sb">`</span>
<span class="k">if</span> <span class="o">[[</span> <span class="nv">$?</span> -ne <span class="m">0</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
    print -P <span class="s2">"%F{red}%UError%u%f: No available formula for </span><span class="nv">$formula</span><span class="s2">"</span>
    <span class="nb">exit</span> <span class="m">1</span>
<span class="k">fi</span>

<span class="nv">object</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="nv">$versions</span> <span class="p">|</span> awk <span class="s1">'$1=="'</span><span class="nv">$version</span><span class="s1">'" {print $4":"$5}'</span><span class="k">)</span>
<span class="nv">object</span><span class="o">=</span><span class="si">${</span><span class="nv">object</span><span class="p">/:</span><span class="sb">`</span>brew --prefix<span class="sb">`</span><span class="se">\/</span><span class="p">/:</span><span class="si">}</span>
<span class="k">if</span> <span class="o">[[</span> -z <span class="nv">$object</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
    print -P <span class="s2">"%F{red}%UError%u%f: No available formula for </span><span class="nv">$formula</span><span class="s2"> version </span><span class="nv">$version</span><span class="s2">"</span>
    <span class="nb">exit</span> <span class="m">1</span>
<span class="k">fi</span>

<span class="nv">formula_cache</span><span class="o">=</span><span class="s2">"`brew --cache`/Formula/</span><span class="nv">$formula</span><span class="s2">.rb"</span>
git --git-dir<span class="o">=</span><span class="s2">"`brew --repository`/.git"</span> show <span class="nv">$object</span> &gt; <span class="nv">$formula_cache</span>
<span class="k">if</span> <span class="o">[[</span> <span class="nv">$?</span> -eq <span class="m">0</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
    brew install <span class="nv">$install_opts</span> <span class="nv">$formula_cache</span>
<span class="k">fi</span>

</pre></div>
</div>

<p>ダウンロードしてパスの通ったディレクトリに置き、ファイル名を<code>brew-install-version</code>として <code>chmod +x</code> してください。</p>

<p><code>brew install-version FORMULA VERSION</code> で特定のバージョンのソフトウェアをインストールします。有効なバージョンは <code>brew versions FORMULA</code> で確認できます。</p>

<p>インストールしたバージョンが <code>brew upgrade</code> でアップグレードされないよう固定するには <code>brew pin FORMULA</code> とします。</p>

<p>gist はこちら： <a href="https://gist.github.com/2987161" class="autolink" rel="nofollow noopener" target="_blank">https://gist.github.com/2987161</a></p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>uasiさんの<br />18位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>36</kbd>
		<a target="_blank" href="https://qiita.com/uasi/items/82b7708d5da213ba7c31">変数展開時の単語分割（word split）をマスターする</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-02-01 19:27:13</center>
	</td>
	<td style="width:200px;">
		@uasi<br />(Increments 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/735/profile-images/1473681692">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[ShellScript]</b> <b>[Bash]</b> <b>[Zsh]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>シェルスクリプトは、スペース区切りの文字列が代入された変数を展開するとき、文字列をスペースの位置で分割して複数の文字列のように扱う。この挙動は Bash （をはじめとする Bourne shell 系のシェル）と Zsh とで異なってくる。</p>

<h1>
<span id="普通の変数について" class="fragment"></span><a href="#%E6%99%AE%E9%80%9A%E3%81%AE%E5%A4%89%E6%95%B0%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6"><i class="fa fa-link"></i></a>普通の変数について</h1>

<p>Bash では、展開する変数をクォートしなければ単語分割が起きる。クォートすれば単語分割は起きず、スペースを含む1つの文字列として展開される。 Zsh では、変数をクォートするかしないかにかかわらず単語分割は起きない。ただし、 <code>SH_WORD_SPLIT</code> オプションをオンにすると Bash 準拠の挙動に変わる（デフォルトでオフ）。以下に単語分割の例を示す：</p>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span><span class="c1">### 下準備</span>

<span class="c1"># 第1引数を echo する関数</span>
<span class="k">function</span> echo_first <span class="o">{</span>
    <span class="nb">echo</span> <span class="nv">$1</span>
<span class="o">}</span>

<span class="c1"># スペース区切りの文字列を含む変数</span>
<span class="nv">var</span><span class="o">=</span><span class="s2">"a b c"</span>



<span class="c1">### Bash の場合</span>

echo_first  <span class="nv">$var</span>  <span class="c1"># =&gt; a</span>
echo_first <span class="s2">"</span><span class="nv">$var</span><span class="s2">"</span> <span class="c1"># =&gt; a b c</span>

<span class="k">for</span> v in <span class="nv">$var</span><span class="p">;</span> <span class="k">do</span>
    <span class="nb">echo</span> <span class="nv">$v</span>
<span class="k">done</span>
<span class="c1"># =&gt; a</span>
<span class="c1"># =&gt; b</span>
<span class="c1"># =&gt; c</span>

<span class="k">for</span> v in <span class="s2">"</span><span class="nv">$var</span><span class="s2">"</span><span class="p">;</span> <span class="k">do</span>
    <span class="nb">echo</span> <span class="nv">$v</span>
<span class="k">done</span>
<span class="c1"># =&gt; a b c</span>



<span class="c1">### Zsh （SH_WORD_SPLIT がオフ）の場合</span>

echo_first  <span class="nv">$var</span>  <span class="c1"># =&gt; a b c</span>
echo_first <span class="s2">"</span><span class="nv">$var</span><span class="s2">"</span> <span class="c1"># =&gt; a b c</span>

<span class="k">for</span> v in <span class="nv">$var</span><span class="p">;</span> <span class="k">do</span>
    <span class="nb">echo</span> <span class="nv">$v</span>
<span class="k">done</span>
<span class="c1"># =&gt; a b c</span>

<span class="k">for</span> v in <span class="s2">"</span><span class="nv">$var</span><span class="s2">"</span><span class="p">;</span> <span class="k">do</span>
    <span class="nb">echo</span> <span class="nv">$v</span>
<span class="k">done</span>
<span class="c1"># =&gt; a b c</span>
</pre></div></div>

<p>Zsh で変数を強制的に単語分割するには <code>${=var}</code> のように書く。記法の詳細ついては <a href="http://linux.die.net/man/1/zshexpn" rel="nofollow noopener" target="_blank"><code>man zshexpn</code></a> の "Parameter Expansion" を参照のこと。</p>

<h1>
<span id="特殊変数--と--について" class="fragment"></span><a href="#%E7%89%B9%E6%AE%8A%E5%A4%89%E6%95%B0--%E3%81%A8--%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6"><i class="fa fa-link"></i></a>特殊変数 <code>$*</code> と <code>$@</code> について</h1>

<p>シェルスクリプトへのコマンドライン引数を格納する特殊変数 <code>$*</code> と <code>$@</code> は、それ自体がクォートされている場合の単語分割の挙動が異なる。 <code>"$*"</code> は、単語分割が起きずに1つの文字列として展開される。 <code>"$@"</code> は、引数に <strong>クォートされていないスペース</strong> が含まれる場合、そこで単語分割が起きる。</p>

<p><code>$*</code> または <code>$@</code> がクォートされていない場合、 Bash はスペースの位置で単語分割する。 Zsh はクォートされていないスペースの位置で単語分割する。</p>

<p>以下に例を示す：</p>

<div class="code-frame" data-lang="bash">
<div class="code-lang"><span class="bold">wordsplit.sh</span></div>
<div class="highlight"><pre><span></span><span class="c1">### クォートされたスペースを含む引数を与えて実行してみる</span>

bash wordsplit.sh <span class="s2">"a b"</span> c
zsh  wordsplit.sh <span class="s2">"a b"</span> c



<span class="c1">### Bash の場合</span>

<span class="c1"># $*: スペースで分割</span>
<span class="k">for</span> v in <span class="nv">$*</span><span class="p">;</span> <span class="k">do</span>
    <span class="nb">echo</span> <span class="nv">$v</span>
<span class="k">done</span>
<span class="c1"># =&gt; a</span>
<span class="c1"># =&gt; b</span>
<span class="c1"># =&gt; c</span>

<span class="c1"># "$*": 分割なし</span>
<span class="k">for</span> v in <span class="s2">"</span><span class="nv">$*</span><span class="s2">"</span><span class="p">;</span> <span class="k">do</span>
    <span class="nb">echo</span> <span class="nv">$v</span>
<span class="k">done</span>
<span class="c1"># =&gt; a b c</span>

<span class="c1"># $@: スペースで分割</span>
<span class="k">for</span> v in <span class="nv">$@</span><span class="p">;</span> <span class="k">do</span>
    <span class="nb">echo</span> <span class="nv">$v</span>
<span class="k">done</span>
<span class="c1"># =&gt; a</span>
<span class="c1"># =&gt; b</span>
<span class="c1"># =&gt; c</span>

<span class="c1"># "$@": クォートされていないスペースで分割</span>
<span class="k">for</span> v in <span class="s2">"</span><span class="nv">$@</span><span class="s2">"</span><span class="p">;</span> <span class="k">do</span>
    <span class="nb">echo</span> <span class="nv">$v</span>
<span class="k">done</span>
<span class="c1"># =&gt; a b</span>
<span class="c1"># =&gt; c</span>



<span class="c1">### Zsh （SH_WORD_SPLIT がオフ）の場合</span>

<span class="c1"># $*: クォートされていないスペースで分割</span>
<span class="k">for</span> v in <span class="nv">$*</span><span class="p">;</span> <span class="k">do</span>
    <span class="nb">echo</span> <span class="nv">$v</span>
<span class="k">done</span>
<span class="c1"># =&gt; a b</span>
<span class="c1"># =&gt; c</span>

<span class="c1"># "$*": 分割なし</span>
<span class="k">for</span> v in <span class="s2">"</span><span class="nv">$*</span><span class="s2">"</span><span class="p">;</span> <span class="k">do</span>
    <span class="nb">echo</span> <span class="nv">$v</span>
<span class="k">done</span>
<span class="c1"># =&gt; a b c</span>

<span class="c1"># $@: クォートされていないスペースで分割</span>
<span class="k">for</span> v in <span class="nv">$@</span><span class="p">;</span> <span class="k">do</span>
    <span class="nb">echo</span> <span class="nv">$v</span>
<span class="k">done</span>
<span class="c1"># =&gt; a b c</span>

<span class="c1"># "$@": クォートされていないスペースで分割</span>
<span class="k">for</span> v in <span class="s2">"</span><span class="nv">$@</span><span class="s2">"</span><span class="p">;</span> <span class="k">do</span>
    <span class="nb">echo</span> <span class="nv">$v</span>
<span class="k">done</span>
<span class="c1"># =&gt; a b</span>
<span class="c1"># =&gt; c</span>
</pre></div>
</div>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>uasiさんの<br />19位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>33</kbd>
		<a target="_blank" href="https://qiita.com/uasi/items/e7c4374d25ba2056a7b7">Mac で ruby-1.9.3-p385 がビルドできない問題を素早く解決する</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-02-12 17:04:11</center>
	</td>
	<td style="width:200px;">
		@uasi<br />(Increments 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/735/profile-images/1473681692">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Ruby]</b> <b>[Mac]</b> <b>[Xcode]</b> <b>[rvm]</b> <b>[rbenv]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>Mountain Lion あたりだと ruby-1.9.3-p385 のビルド時に以下のようなエラーが出る：</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>BUILD FAILED
（略）
Last 10 log lines:
compiling regenc.c
compiling regerror.c
compiling regexec.c
compiling regparse.c
regparse.c:582:15: error: implicit conversion loses integer precision: 'st_index_t' (aka 'unsigned long') to 'int' [-Werror,-Wshorten-64-to-32]
    return t-&gt;num_entries;
    ~~~~~~ ~~~^~~~~~~~~~~
1 error generated.
make: *** [regparse.o] Error 1
</pre></div></div>

<p>整数の精度を落とすような暗黙的型変換の警告（<code>-Wshorten-64-to-32</code>）と、警告をエラーにするオプション（<code>-Werror</code>）によってビルドが失敗している。</p>

<p>これを解決するには <code>brew install apple-gcc42</code> して <code>CC=/usr/local/bin/gcc-4.2</code> すればいいという情報が<a href="http://act2012bl.wordpress.com/2013/02/10/rbenv%e3%81%a7ruby%e3%81%ae%e3%83%90%e3%83%bc%e3%82%b8%e3%83%a7%e3%83%b3%e5%88%87%e3%82%8a%e6%9b%bf%e3%81%88%e3%81%8c%e3%81%86%e3%81%be%e3%81%8f%e3%81%a7%e3%81%8d%e3%81%aa%e3%81%84mac/" rel="nofollow noopener" target="_blank">色々</a>と<a href="http://tesiri.hatenablog.com/entry/2013/02/11/homebrew%E3%81%A7ruby%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB%E6%99%82%E3%81%AB%E3%82%A8%E3%83%A9%E3%83%BC" rel="nofollow noopener" target="_blank">見つかる</a>が、そんなことをしなくても警告を無視するだけでビルドは通る：</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>export CFLAGS=-Wno-error=shorten-64-to-32
# プリインストールの readline と OpenSSL は壊れているため、別途 Homebrew などでインストールしたものを使う
export CONFIGURE_OPTS="--with-openssl-dir=/path/to/dir --with-readline-dir=/path/to/dir"

rvm install ruby-1.9.3-p385
# or
rbenv install 1.9.3-p385
</pre></div></div>

<p>apple-gcc42 を使えば出ないはずの警告を無視することについて不安があるかもしれないが、 apple-gcc42 は警告のチェックが甘いだけである。</p>

<p><strong>補足：</strong><a href="http://qiita.com/items/12457815d5cee3723b97">homebrew で入れた openssl を使って Ruby をコンパイルすると SSL 利用時に証明書エラーが発生する場合の対応</a></p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>uasiさんの<br />20位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>30</kbd>
		<a target="_blank" href="https://qiita.com/uasi/items/920a8e575f89b2e1edb2">プロトコルのメソッドにデフォルト実装を与える</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-03-08 18:07:02</center>
	</td>
	<td style="width:200px;">
		@uasi<br />(Increments 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/735/profile-images/1473681692">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Objective-C]</b> <b>[Mac]</b> <b>[iOS]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p><code>@required</code> だが定型的な処理を行うようなメソッドをプロトコルで定義すると、それを実装するクラスにコピペの嵐が発生しがちである：</p>

<div class="code-frame" data-lang="objc"><div class="highlight"><pre><span></span><span class="c1">// Assume FooProtocol has `@required -(void)fooMethod`.</span>

<span class="k">@implementation</span> <span class="nc">FooableA</span> <span class="c1">// conforms to FooProtocol.</span>

<span class="c1">// Do something.</span>
<span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">fooMethod</span> <span class="p">{</span>
    <span class="p">[</span><span class="n">NSApp</span><span class="p">.</span><span class="n">delegate</span> <span class="n">doSomething</span><span class="p">];</span>
<span class="p">}</span>

<span class="k">@end</span>

<span class="k">@implementation</span> <span class="nc">FooableB</span> <span class="c1">// also conforms to FooProtocol.</span>

<span class="c1">// Do the same thing as FooableA#fooMethod. What a copy/paste hell.</span>
<span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">fooMethod</span> <span class="p">{</span>
    <span class="p">[</span><span class="n">NSApp</span><span class="p">.</span><span class="n">delegate</span> <span class="n">doSomething</span><span class="p">];</span>
<span class="p">}</span>

<span class="k">@end</span>

</pre></div></div>

<p><a href="https://github.com/jspahrsummers/libextobjc" rel="nofollow noopener" target="_blank">libextobjc</a> ライブラリが提供する <a href="https://github.com/jspahrsummers/libextobjc/blob/master/extobjc/EXTConcreteProtocol.h" rel="nofollow noopener" target="_blank">EXTConcreteProtocol</a> を使うと、プロトコルのメソッドにデフォルトの実装を与えることができる：</p>

<div class="code-frame" data-lang="objc">
<div class="code-lang"><span class="bold">FooProtocol.h</span></div>
<div class="highlight"><pre><span></span><span class="cp">#import &lt;libextobjc/EXTConcreteProtocol.h&gt;</span>

<span class="k">@protocol</span> <span class="nc">FooProtocol</span>

<span class="p">@</span><span class="n">concrete</span>
<span class="o">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">fooMethod</span><span class="p">;</span>

<span class="k">@end</span>
</pre></div>
</div>

<div class="code-frame" data-lang="objc">
<div class="code-lang"><span class="bold">FooProtocol.m</span></div>
<div class="highlight"><pre><span></span><span class="cp">#import "FooProtocol.h"</span>

<span class="p">@</span><span class="n">concreteprotocol</span><span class="p">(</span><span class="n">FooProtocol</span><span class="p">)</span>

<span class="c1">// Default implementation for -(void)fooMethod.</span>
<span class="o">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">fooMethod</span> <span class="p">{</span>
    <span class="p">[</span><span class="n">NSApp</span><span class="p">.</span><span class="n">delegate</span> <span class="n">doSomething</span><span class="p">];</span>
<span class="p">}</span>

<span class="k">@end</span>
</pre></div>
</div>

<div class="code-frame" data-lang="objc">
<div class="code-lang"><span class="bold">FooableA.h</span></div>
<div class="highlight"><pre><span></span><span class="cp">#import "FooProtocol.h"</span>

<span class="k">@interface</span> <span class="nc">FooableA</span> : <span class="bp">NSObject</span> <span class="o">&lt;</span><span class="n">FooProtocol</span><span class="o">&gt;</span>
<span class="k">@end</span>

<span class="c1">// Now an instance of FooableA can respond to fooMethod.</span>
</pre></div>
</div>

<p>定義のしかたは見てのとおりで、デフォルト実装を与えたいメソッドを <code>@concrete</code> でマークする。メソッドの実装は <code>@concreteprotocol(ProtocolName) ... @end</code> の中に書く。</p>

<p>このプロトコルに適合したクラスはデフォルト実装のメソッドを使えるようになる。クラス内でデフォルトと同名のメソッドを定義すると、そちらが優先される。</p>

<p><strong>注意：</strong>デフォルト実装の中では <code>super</code> にアクセスしてはならない。</p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>uasiさんの<br />21位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>24</kbd>
		<a target="_blank" href="https://qiita.com/uasi/items/d18443625465593f231c">最近の買ってよかった Mac アプリ</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2012-09-03 01:20:09</center>
	</td>
	<td style="width:200px;">
		@uasi<br />(Increments 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/735/profile-images/1473681692">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Mac]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>シェアウェアに金を出し惜しみして代わりのフリーソフトを探すよりサッと金払って快適さを得たほうがいいなーというのが最近の気づき。</p>

<h2>
<span id="dash" class="fragment"></span><a href="#dash"><i class="fa fa-link"></i></a><a href="http://itunes.apple.com/jp/app/dash-docs-snippets/id458034879?mt=12" rel="nofollow noopener" target="_blank">Dash</a>
</h2>

<p><a href="http://itunes.apple.com/jp/app/dash-docs-snippets/id458034879?mt=12" rel="nofollow noopener" target="_blank"><img src="https://camo.qiitausercontent.com/36d51c5afc56396cee89e422c5f232d671ba3fde/68747470733a2f2f6269746275636b65742e6f72672f756173692f702f7261772f6d61737465722f63342f633438393265363937393536666538663561626363386561626662323931616336393266633331312e706e67" alt="Dash" data-canonical-src="https://bitbucket.org/uasi/p/raw/master/c4/c4892e697956fe8f5abcc8eabfb291ac692fc311.png"></a></p>

<p>ヘルプドキュメントビューア。1700円（現在セール価格850円、制限つきフリー版もあり）。</p>

<p>Xcode のヘルプがバージョンアップにつれて改悪されていく（検索がとにかく遅い、 OS X のプロジェクトからヘルプを開いても iOS の API ドキュメントが開く）ため代替として購入。検索が速くて快適。</p>

<p>Objective-C のドキュメント以外にも PHP や JavaScript など多種のドキュメントを閲覧できる。さらにスニペットライブラリ機能もあり、 OS の任意のテキストフィールドでスニペットが展開できるようになる（下図）。スニペット機能だけを切り出した安価な別アプリ <a href="http://itunes.apple.com/jp/app/dashexpander/id458867049?mt=12" rel="nofollow noopener" target="_blank">DashExpander</a> もある。</p>

<p><a href="https://camo.qiitausercontent.com/93184129175d335112ef6a2717d80b762bd175ce/68747470733a2f2f6269746275636b65742e6f72672f756173692f702f7261772f6d61737465722f34352f343539663432313666326662663235313263313339373462663137393636383962656135313932352e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/93184129175d335112ef6a2717d80b762bd175ce/68747470733a2f2f6269746275636b65742e6f72672f756173692f702f7261772f6d61737465722f34352f343539663432313666326662663235313263313339373462663137393636383962656135313932352e706e67" alt="Dash スニペット" data-canonical-src="https://bitbucket.org/uasi/p/raw/master/45/459f4216f2fbf2512c13974bf1796689bea51925.png"></a></p>

<h2>
<span id="taskpaper" class="fragment"></span><a href="#taskpaper"><i class="fa fa-link"></i></a><a href="http://itunes.apple.com/jp/app/taskpaper/id424281111?mt=12" rel="nofollow noopener" target="_blank">TaskPaper</a>
</h2>

<p><a href="http://itunes.apple.com/jp/app/taskpaper/id424281111?mt=12" rel="nofollow noopener" target="_blank"><img src="https://camo.qiitausercontent.com/205e722757729d344e03bd3f5fedd4f6fa7a7bb9/68747470733a2f2f6269746275636b65742e6f72672f756173692f702f7261772f6d61737465722f38302f383064363766323634366561386435326337613732666364353331626132376166656464333165652e706e67" alt="TaskPaper" data-canonical-src="https://bitbucket.org/uasi/p/raw/master/80/80d67f2646ea8d52c7a72fcd531ba27afedd31ee.png"></a></p>

<p>シンプルな  to-do リスト。2200円。</p>

<p>To-do 管理に特化したシンプルなアウトラインエディタと言ったほうが実体に近い。テキストエディタでプレーンテキストを編集するような感覚でリストを管理する。バレットをクリックして項目をチェック済みにしたり、項目をドラッグして並べ替えたりと、ただのエディタにはできない機能もある。</p>

<p>TaskPaper は、アイディアを思うままに書き連ねる1次バッファとして使っている。量が溜まったら分割・整理し改めて別のタスク管理ツールに記録する。</p>

<h2>
<span id="due" class="fragment"></span><a href="#due"><i class="fa fa-link"></i></a><a href="http://itunes.apple.com/jp/app/due/id524373870?mt=12" rel="nofollow noopener" target="_blank">Due</a>
</h2>

<p><a href="http://itunes.apple.com/jp/app/due/id524373870?mt=12" rel="nofollow noopener" target="_blank"><img src="https://camo.qiitausercontent.com/fb1e35a1adc5a22e931ed2221f19776a58f95c92/68747470733a2f2f6269746275636b65742e6f72672f756173692f702f7261772f6d61737465722f63372f633730373439383366313131326635653235616161333161313338333863333266313765643762372e706e67" alt="Due" data-canonical-src="https://bitbucket.org/uasi/p/raw/master/c7/c7074983f1112f5e25aaa31a13838c32f17ed7b7.png"></a></p>

<p>ツールバーに常駐するリマインダー。800円。</p>

<p>項目に含まれる日時から自動で期日をセットしてくれるため、ピッカーで日付を選ぶ手間がない。「○○さんと会う 9/13 17:00」や「××に行く tomorrow」など。日本語に対応していないのがマイナス。</p>

<h2>
<span id="pomodorable" class="fragment"></span><a href="#pomodorable"><i class="fa fa-link"></i></a><a href="http://itunes.apple.com/jp/app/pomodorable/id503406673?mt=12" rel="nofollow noopener" target="_blank">Pomodorable</a>
</h2>

<p><a href="http://itunes.apple.com/jp/app/pomodorable/id503406673?mt=12" rel="nofollow noopener" target="_blank"><img src="https://camo.qiitausercontent.com/48341a93a87d5f87198f0a2b9c8619982a662f4d/68747470733a2f2f6269746275636b65742e6f72672f756173692f702f7261772f6d61737465722f30652f306566663661356539613838646461383730336139346239616566613432386536653838663238632e706e67" alt="Pomodorable" data-canonical-src="https://bitbucket.org/uasi/p/raw/master/0e/0eff6a5e9a88dda8703a94b9aefa428e6e88f28c.png"></a></p>

<p>ツールバーに常駐する pomodoro タイマー。900円（現在セール価格450円）。</p>

<p>青いトマトが徐々に熟していくアニメーションタイマーが小気味良い。</p>

<h2>
<span id="他に気になるアプリ" class="fragment"></span><a href="#%E4%BB%96%E3%81%AB%E6%B0%97%E3%81%AB%E3%81%AA%E3%82%8B%E3%82%A2%E3%83%97%E3%83%AA"><i class="fa fa-link"></i></a>他に気になるアプリ</h2>

<ul>
<li>
<a href="http://itunes.apple.com/jp/app/things/id407951449?mt=12" rel="nofollow noopener" target="_blank">Things</a>。高機能なタスク管理ツール。4300円。</li>
<li>
<a href="http://itunes.apple.com/jp/app/1password/id443987910?mt=12" rel="nofollow noopener" target="_blank">1Password</a>。パスワードマネージャ。4300円。</li>
</ul>

<p>他に便利なアプリがあればコメントで教えていただけるとありがたいです。</p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>uasiさんの<br />22位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>21</kbd>
		<a target="_blank" href="https://qiita.com/uasi/items/c7020f38aa09a32419e4">Mountain Lion+Homebrew な環境で rmagick がインストールできない問題を解決する</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-01-24 17:15:33</center>
	</td>
	<td style="width:200px;">
		@uasi<br />(Increments 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/735/profile-images/1473681692">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Ruby]</b> <b>[Mac]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p><strong>追記：</strong>ビルドスクリプトにパッチを当てたバージョンの rmagick を使う方法もある→<a href="http://qiita.com/items/6ea0a284a2fb91ac740f">rmagick を最近の環境でもインストール出来るようにする方法</a></p>

<p>この記事で想定するバージョン：</p>

<ul>
<li>imagemagick: 6.8.0-10</li>
<li>rmagick: 2.13.1</li>
</ul>

<p>参考にしたページ： <a href="http://stackoverflow.com/a/14097234/454997" class="autolink" rel="nofollow noopener" target="_blank">http://stackoverflow.com/a/14097234/454997</a></p>

<p>Homebrew で imagemagick をインストールし、 <code>gem install rmagick</code> すると以下のエラーが出る。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>
Building native extensions.  This could take a while...
ERROR:  Error installing rmagick:
        ERROR: Failed to build gem native extension.

        /Users/uasi/.rbenv/versions/1.9.3-p194-perf/bin/ruby extconf.rb
checking for Ruby version &gt;= 1.8.5... yes
（中略）
checking for wand/MagickWand.h... yes
checking for InitializeMagick() in -lMagickCore... no
checking for InitializeMagick() in -lMagick... no
checking for InitializeMagick() in -lMagick++... no
Can't install RMagick 2.13.1. Can't find the ImageMagick library or one of the dependent libraries. Check the mkmf.log file for more detailed information.

</pre></div></div>

<p>この問題を解決するには、 rmagick が期待するファイル名になるように imagemagick ライブラリのシンボリックリンクを作ってやればよい：</p>

<div class="code-frame" data-lang="sh"><div class="highlight"><pre><span></span>
<span class="c1"># imagemagick のライブラリディレクトリに移動</span>
<span class="nb">cd</span> /usr/local/Cellar/imagemagick/6.8.0-10/lib

<span class="c1"># ライブラリのファイル名からバージョンを除いたシンボリックリンクを作る</span>
ln -s libMagick++-Q16.7.dylib   libMagick++.dylib
ln -s libMagickCore-Q16.7.dylib libMagickCore.dylib
ln -s libMagickWand-Q16.7.dylib libMagickWand.dylib

<span class="c1"># ライブラリを配置し直す</span>
brew unlink imagemagick
brew link imagemagick

</pre></div></div>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>uasiさんの<br />23位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>20</kbd>
		<a target="_blank" href="https://qiita.com/uasi/items/13f1b84dd99046fdf7c1">NSPredicate で BOOL 型プロパティをテストするときの落とし穴</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2014-03-25 18:42:17</center>
	</td>
	<td style="width:200px;">
		@uasi<br />(Increments 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/735/profile-images/1473681692">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Objective-C]</b> <b>[Mac]</b> <b>[iOS]</b> <b>[CoreData]</b> <b>[Cocoa]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>ある NSManagedObject のサブクラスが BOOL 型のプロパティ <code>aBoolProperty</code> を持つとする。このプロパティが偽であるかどうかをテストするとき、以下のような NSPredicate を書きたくなるかもしれない：</p>

<div class="code-frame" data-lang="objc"><div class="highlight"><pre><span></span><span class="n">anObject</span><span class="p">.</span><span class="n">aBoolProperty</span> <span class="o">=</span> <span class="nb">NO</span><span class="p">;</span>
<span class="bp">NSPredicate</span> <span class="o">*</span><span class="n">isNO</span> <span class="o">=</span> <span class="p">[</span><span class="bp">NSPredicate</span> <span class="nl">predicateWithFormat</span><span class="p">:</span><span class="s">@"aBoolProperty == NO"</span><span class="p">];</span>
<span class="p">[</span><span class="n">isNO</span> <span class="nl">evaluateWithObject</span><span class="p">:</span><span class="n">anObject</span><span class="p">];</span> <span class="c1">// =&gt; YES</span>
</pre></div></div>

<p>（注： predicate には比較演算子が必要なので <code>@"!aBoolProperty"</code> とは書けない）</p>

<p>厳密に <code>NO</code> と比較したいならこれで構わないが、 <code>aBoolProperty</code> が <strong>偽だが NO と一致しない</strong> 場合もあることに気をつけよう。</p>

<p>Core Data が内部的に扱う <code>aBoolProperty</code> の値は <code>@YES</code> または <code>@NO</code> <strong>または <code>nil</code></strong> である。これは BOOL 型の getter メソッドを介してアクセスする限り問題にならないが、内部値を直接扱う predicate では <code>nil != @NO</code> であることに注意しなければならない。</p>

<div class="code-frame" data-lang="objc"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">anObject</span> <span class="nl">setPrimitiveValue</span><span class="p">:</span><span class="nb">nil</span> <span class="nl">forKey</span><span class="p">:</span><span class="s">@"aBoolProperty"</span><span class="p">];</span>

<span class="c1">// getter は内部値が nil なら偽を返す</span>
<span class="n">NSAssert</span><span class="p">(</span><span class="o">!</span><span class="n">anObject</span><span class="p">.</span><span class="n">aBoolProperty</span><span class="p">,</span> <span class="s">@""</span><span class="p">);</span>

<span class="c1">// predicate では nil は NO と一致しない</span>
<span class="bp">NSPredicate</span> <span class="o">*</span><span class="n">isNO</span> <span class="o">=</span> <span class="p">[</span><span class="bp">NSPredicate</span> <span class="nl">predicateWithFormat</span><span class="p">:</span><span class="s">@"aBoolProperty == NO"</span><span class="p">];</span>
<span class="p">[</span><span class="n">isNO</span> <span class="nl">evaluateWithObject</span><span class="p">:</span><span class="n">anObject</span><span class="p">];</span> <span class="c1">// =&gt; *NO*</span>
</pre></div></div>

<p>これが望み通りの挙動でないなら、 <code>NO</code> と一致するかどうかではなく <code>YES</code> でないことをテストすればよい：</p>

<div class="code-frame" data-lang="objc"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">anObject</span> <span class="nl">setPrimitiveValue</span><span class="p">:</span><span class="nb">nil</span> <span class="nl">forKey</span><span class="p">:</span><span class="s">@"aBoolProperty"</span><span class="p">];</span>
<span class="bp">NSPredicate</span> <span class="o">*</span><span class="n">isNO</span> <span class="o">=</span> <span class="p">[</span><span class="bp">NSPredicate</span> <span class="nl">predicateWithFormat</span><span class="p">:</span><span class="s">@"aBoolProperty != YES"</span><span class="p">];</span>
<span class="p">[</span><span class="n">isNO</span> <span class="nl">evaluateWithObject</span><span class="p">:</span><span class="n">anObject</span><span class="p">];</span> <span class="c1">// =&gt; YES</span>
</pre></div></div>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>uasiさんの<br />24位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>19</kbd>
		<a target="_blank" href="https://qiita.com/uasi/items/f7bdf16a343c7264c8a5">NSURL で file URL にパラメータを付加する</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-09-18 19:59:11</center>
	</td>
	<td style="width:200px;">
		@uasi<br />(Increments 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/735/profile-images/1473681692">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Objective-C]</b> <b>[Mac]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p><code>+[NSURL fileURLWithPath:]</code> は、 <code>+[NSURL URLWithString:]</code> と違って path に含まれる URL 特殊文字をエスケープする（<code>?</code>→<code>%3F</code>など）。またそれが返す NSURL オブジェクトは <code>-isFileURL</code> が真になっていて、 <code>-URLByAppendingPathComponent:</code> などの引数も同様にエスケープする。File URL にパラメータ文字列（例：<code>?key=value</code>）を含めるには、次ように <code>+[NSURL URLWithString:relativeToURL:]</code> を使う：</p>

<div class="code-frame" data-lang="objc">
<div class="code-lang"><span class="bold">FileURLWithParam.m</span></div>
<div class="highlight"><pre><span></span><span class="c1">// こうする</span>
<span class="bp">NSURL</span> <span class="o">*</span><span class="n">fileURL</span> <span class="o">=</span> <span class="p">[</span><span class="bp">NSURL</span> <span class="nl">fileURLWithPath</span><span class="p">:</span><span class="n">path</span><span class="p">];</span>
<span class="bp">NSURL</span> <span class="o">*</span><span class="n">URLWithParam</span> <span class="o">=</span> <span class="p">[</span><span class="bp">NSURL</span> <span class="nl">URLWithString</span><span class="p">:</span><span class="s">@"?key=value"</span> <span class="nl">relativeToURL</span><span class="p">:</span><span class="n">fileURL</span><span class="p">];</span>

<span class="c1">// これはだめ</span>
<span class="c1">// path に `?` や `#` が含まれている場合、それらはエスケープされるべきだが、</span>
<span class="c1">// +[NSURL URLWithString:] はエスケープしてくれない</span>
<span class="bp">NSURL</span> <span class="o">*</span><span class="n">URLWithParam</span> <span class="o">=</span> <span class="p">[</span><span class="bp">NSURL</span> <span class="nl">URLWithString</span><span class="p">:[</span><span class="n">path</span> <span class="nl">stringByAppendingString</span><span class="p">:</span><span class="s">@"?key=value"</span><span class="p">]];</span>

<span class="c1">// これもだめ</span>
<span class="c1">// `?key=value` の `?` までエスケープされる</span>
<span class="bp">NSURL</span> <span class="o">*</span><span class="n">URLWithParam</span> <span class="o">=</span> <span class="p">[</span><span class="bp">NSURL</span> <span class="nl">fileURLWithPath</span><span class="p">:[</span><span class="n">path</span> <span class="nl">stringByAppendingString</span><span class="p">:</span><span class="s">@"?key=value"</span><span class="p">]];</span>
</pre></div>
</div>

<p>正確には、この手順で得られる <code>URLWithParam</code> は file URL ではなくなる（<code>-isFileURL</code> が偽になる）ので気をつけること。</p>

<p>また、 <code>-URLWithString:relativeToURL:</code> の string 引数内の URL 特殊文字は一切エスケープされないので、必要ならあらかじめエスケープすること。</p>

<h1>
<span id="蛇足なぜこうしたかったか" class="fragment"></span><a href="#%E8%9B%87%E8%B6%B3%E3%81%AA%E3%81%9C%E3%81%93%E3%81%86%E3%81%97%E3%81%9F%E3%81%8B%E3%81%A3%E3%81%9F%E3%81%8B"><i class="fa fa-link"></i></a>蛇足：なぜこうしたかったか</h1>

<p>WebView で HTML を表示するとき、ローカルの JS や CSS を <em>キャッシュを回避して</em> 参照したかったから。</p>

<p>WebView に表示する HTML からは <code>file://</code> スキームでローカルファイルを参照できるが、キャッシュがあるためファイルを書き換えて WebView をリロードしても古い内容が読み込まれてしまう。キャッシュをクリアしてもいいが、リモートから取得した画像などのキャッシュはできれば保持しておきたい。</p>

<p>そこで、ローカルファイルの URL のパラメータにタイムスタンプを追加し、キャッシュが効かないようにしたという次第。</p>

<div class="code-frame" data-lang="objc"><div class="highlight"><pre><span></span><span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">reloadWebView</span> <span class="p">{</span>
  <span class="c1">// ローカルの CSS の URL にタイムスタンプを追加</span>
  <span class="bp">NSURL</span> <span class="o">*</span><span class="n">cssURL</span> <span class="o">=</span> <span class="p">[</span><span class="bp">NSURL</span> <span class="nl">fileURLWithPath</span><span class="p">:</span><span class="s">@"/path/to/local.css"</span><span class="p">];</span>
  <span class="bp">NSString</span> <span class="o">*</span><span class="n">timestamp</span> <span class="o">=</span> <span class="p">[</span><span class="bp">NSString</span> <span class="nl">stringWithFormat</span><span class="p">:</span><span class="s">@"?timestamp=%lf"</span><span class="p">,</span> <span class="p">[[</span><span class="bp">NSDate</span> <span class="n">date</span><span class="p">]</span> <span class="n">timeIntervalSince1970</span><span class="p">]];</span>
  <span class="n">cssURL</span> <span class="o">=</span> <span class="p">[</span><span class="bp">NSURL</span> <span class="nl">URLWithString</span><span class="p">:</span><span class="n">timestamp</span> <span class="nl">relativeToURL</span><span class="p">:</span><span class="n">cssURL</span><span class="p">];</span>

  <span class="c1">// WebView に HTML を表示</span>
  <span class="bp">NSString</span> <span class="o">*</span><span class="n">HTMLFormat</span> <span class="o">=</span> <span class="p">(</span>
    <span class="s">@"&lt;html&gt;&lt;head&gt;&lt;link type='text/stylesheet' href='%@'&gt;&lt;/head&gt;"</span>
    <span class="s">@"&lt;body&gt;%@&lt;/body&gt;&lt;/html&gt;"</span>
  <span class="p">);</span>
  <span class="bp">NSString</span> <span class="o">*</span><span class="n">HTML</span> <span class="o">=</span> <span class="p">[</span><span class="bp">NSString</span> <span class="nl">stringWithFormat</span><span class="p">:</span><span class="n">contentFormat</span><span class="p">,</span> <span class="p">[</span><span class="n">cssURL</span> <span class="n">absoluteString</span><span class="p">],</span> <span class="nb">self</span><span class="p">.</span><span class="n">content</span><span class="p">];</span>
  <span class="p">[</span><span class="nb">self</span><span class="p">.</span><span class="n">webView</span><span class="p">.</span><span class="n">mainFrame</span> <span class="nl">loadHTMLString</span><span class="p">:</span><span class="n">HTML</span> <span class="nl">baseURL</span><span class="p">:</span><span class="nb">self</span><span class="p">.</span><span class="n">baseURL</span><span class="p">];</span>
<span class="p">}</span>
</pre></div></div>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>uasiさんの<br />25位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>17</kbd>
		<a target="_blank" href="https://qiita.com/uasi/items/a77573f76acb233f5bd9">ObjC でグローバルな定数を避けるべきかの議論ログ</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2014-03-18 00:09:42</center>
	</td>
	<td style="width:200px;">
		@uasi<br />(Increments 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/735/profile-images/1473681692">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Objective-C]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p><strong>注1：以下 bikeshedding です</strong></p>

<p><strong>注2：<i>グローバル定数を避ける必要はない</i>と結論が出ています（<a href="http://qiita.com/uasi/items/a77573f76acb233f5bd9#comment-07af2989bc25b17b3b28">下記コメントを参照</a>）</strong></p>

<p>Objective-C でよく使われる <code>XXMyClassHogeConstant</code> 式のグローバルな定数を避けるべきか否かについて、別の記事のコメント欄で <a href="/oden@github" class="user-mention js-hovercard" title="oden@github" data-hovercard-target-type="user" data-hovercard-target-name="oden@github">@oden@github</a> と筆者 <a href="/uasi" class="user-mention js-hovercard" title="uasi" data-hovercard-target-type="user" data-hovercard-target-name="uasi">@uasi</a> とで議論がありました。記事の本題と外れたために削除したそれらのコメントを、記録のために再掲します。 <a href="/oden@github" class="user-mention js-hovercard" title="oden@github" data-hovercard-target-type="user" data-hovercard-target-name="oden@github">@oden@github</a> のコメントは通知メールから引用しました。ただし文中の第三者への @ は <code>@...</code> に置き換えました。また、 <a href="/uasi" class="user-mention js-hovercard" title="uasi" data-hovercard-target-type="user" data-hovercard-target-name="uasi">@uasi</a> のコメントはログが残っていないため、元のコメントの大意を箇条書きにしました。</p>

<hr>

<p><a href="/oden@github" class="user-mention js-hovercard" title="oden@github" data-hovercard-target-type="user" data-hovercard-target-name="oden@github">@oden@github</a> </p>

<blockquote>
<p>（引用注：元記事の、グローバル変数の定義方法を説明した箇所について）このバージョンでは、定数の説明でグローバル変数を利用しています。<br>
これは絶対に行ってはならないバッドノウハウのひとつです。</p>
</blockquote>

<hr>

<p><a href="/uasi" class="user-mention js-hovercard" title="uasi" data-hovercard-target-type="user" data-hovercard-target-name="uasi">@uasi</a> </p>

<ul>
<li>グローバル変数を避けるべき理由は？</li>
</ul>

<hr>

<p><a href="/oden@github" class="user-mention js-hovercard" title="oden@github" data-hovercard-target-type="user" data-hovercard-target-name="oden@github">@oden@github</a> </p>

<blockquote>
<p>@uasi グローバル変数を避けるべき理由であれば「グローバル変数」で検索すると見つかります。<br>
<a href="https://www.google.com/#q=%E3%82%B0%E3%83%AD%E3%83%BC%E3%83%90%E3%83%AB%E5%A4%89%E6%95%B0" class="autolink" rel="nofollow noopener" target="_blank">https://www.google.com/#q=グローバル変数</a></p>

<p>グローバル変数を定数に用いることを避けるべき理由は、カプセル化のアンチパターンである点です。</p>

<p>@... 確かに、グローバル変数は、gotoと同様に有用であるケースも存在します。<br>
ご指摘通り「グローバル変数を用いるか否か」という問題は、<br>
「オブジェクト指向を用いるか否か」という設計の問題です。</p>

<p>JavaやObjective-Cとは無関係のリクエストを送信したことをお詫び申し上げます。<br>
リクエストは撤回させて頂きたいと思います。</p>
</blockquote>

<hr>

<p><a href="/uasi" class="user-mention js-hovercard" title="uasi" data-hovercard-target-type="user" data-hovercard-target-name="uasi">@uasi</a> </p>

<ul>
<li>グローバル変数の読み書きはカプセル化を破るが、定数として使うなら問題ないのでは？</li>
</ul>

<hr>

<p><a href="/oden@github" class="user-mention js-hovercard" title="oden@github" data-hovercard-target-type="user" data-hovercard-target-name="oden@github">@oden@github</a></p>

<blockquote>
<p>@uasi えっと、よく勘違いされることなのですが、カプセル化とは情報や振る舞いを隠蔽することだけでなく、公開する情報や振る舞いをオブジェクトにまとめることも含まれます。<br>
ここでのアンチパターンという指摘は、定数としての情報が、どのクラスに紐付いているのかが明示的になっていない、という点にあります。</p>

<p>こちらも設計の問題になるので、オブジェクト指向を用いない方にとっては意味のない指摘になりますが、<br>
static finalフィールドとグローバル定数は、全く異なる概念のオブジェクトです。</p>

<p>前者は継承や多態性によって同一のデータ構造で異なる値の表現等が実現できますが、<br>
これも設計の問題なので継承を用いないコードを書くなら気にする必要はありません。</p>

<p>ただし、オブジェクト指向でコードを書くなら、こちらの表現の方が妥当ではないか、<br>
と考えて編集リクエストを送信致しました。</p>

<p>多く使われていることが正しいという指摘も理解できますが、個人的には多くの要望から実装されたgoto文を採用したPHPや、C言語ではグローバルスコープにおける<em>から始まる全ての名前が予約されているにも関わらず、プロパティと紐付くインスタンス変数の名前にデフォルトで</em>を付けるObjCの挙動には眉を顰めます。</p>

<p>言語的に許されていますし、問題もないかもしれませんが、みんなやってるからと言って、欠点を知りながらそれを勧めるのはどうかと思います。<br>
ただまあこれは設計どころか最早好き嫌いの問題なので、流石にリクエストは控えたいと思います。</p>
</blockquote>

<hr>

<p><a href="/uasi" class="user-mention js-hovercard" title="uasi" data-hovercard-target-type="user" data-hovercard-target-name="uasi">@uasi</a> </p>

<ul>
<li>Objective-C では既存の C API との兼ね合いがあるため、厳密なカプセル化よりグローバル定数のほうが実用的ではないか</li>
<li>慣習的な命名方法に従えば、定数がどのクラスに属するか見た目上ははっきりする</li>
<li>UI 関係のクラスなどは継承より移譲を多用しているので、その設計者は継承による振る舞いの変更を重視しなかったのではないか</li>
<li>個人的には、 Java 流のオブジェクト指向を遵守するより Objective-C の流儀に従ったほうが、既存フレームワークとの思想の食い違いがなくて楽</li>
</ul>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>uasiさんの<br />26位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>17</kbd>
		<a target="_blank" href="https://qiita.com/uasi/items/f19a120e012c0c75d856">直前のコミットを取り消して新しいブランチにコミットし直すのに便利なエイリアス</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-10-11 12:27:17</center>
	</td>
	<td style="width:200px;">
		@uasi<br />(Increments 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/735/profile-images/1473681692">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Git]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>「直前のコミットの取り消し」「取り消したコミットのやり直し」に相当するコマンドをすぐ忘れるので <code>uncommit</code> と <code>recommit</code> というエイリアスを作ってある。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>[alias]
    co = checkout
    uncommit = reset HEAD^
    recommit = commit -c ORIG_HEAD
</pre></div></div>

<p>直前のコミットを取り消して、現在のブランチから新しいブランチを切り、直前に取り消したコミットメッセージを再利用して改めてコミットするにはこうする：</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>git uncommit         # コミットを取り消す。変更はワーキングツリーに残る
git co -b new-branch # ブランチを作る
git add .            # 変更をインデックスに追加
git recommit         # 取り消したコミットメッセージを再利用してコミット
</pre></div></div>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>uasiさんの<br />27位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>15</kbd>
		<a target="_blank" href="https://qiita.com/uasi/items/88b22aa4a2fa7c8a29f7">実行中の Unicorn のバージョンを見るには</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2014-01-22 16:34:06</center>
	</td>
	<td style="width:200px;">
		@uasi<br />(Increments 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/735/profile-images/1473681692">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Ruby]</b> <b>[unicorn]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p><strong>TL;DR:</strong> <code>lsof -p</code> で Unicorn プロセスが開いているファイルを一覧して、 gem のディレクトリのバージョン番号を探せばいい。</p>

<hr>

<p>まず Unicorn のプロセスを探す。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ ps aux | grep unicorn
user            41323   0.0  0.0  2442000    628 s000  S+    4:26PM   0:00.00 grep unicorn
user            40631   0.0  0.6  2542788  46724   ??  S     4:14PM   0:00.14 unicorn worker[1] -c uni -D    
user            40630   0.0  0.6  2541764  46404   ??  S     4:14PM   0:00.15 unicorn worker[0] -c uni -D    
user            40629   0.0  0.1  2540740   5336   ??  S     4:14PM   0:00.01 unicorn master -c uni -D
</pre></div></div>

<p><code>lsof -p</code> を使って、バージョン番号を知りたい Unicorn プロセスが開いているファイルの一覧を表示する。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ lsof -p 40631
COMMAND   PID USER   FD   TYPE             DEVICE  SIZE/OFF     NODE NAME
ruby    40631 user  cwd    DIR                1,1       612 51962934 /Users/user
ruby    40631 user  txt    REG                1,1   2217260 83107071 /Users/user/.rbenv/versions/2.0.0-p353/bin/ruby
...
</pre></div></div>

<p>長いので <code>grep gems/unicorn-</code> をかける。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ lsof -p 40631 | grep gems/unicorn-
ruby    40631 user  txt    REG                1,1     42848 84416806 /Users/user/vendor/bundle/ruby/2.0.0/gems/unicorn-4.8.0/lib/unicorn_http.bundle
</pre></div></div>

<p>ディレクトリに含まれるバージョン番号から、この Unicorn プロセスのバージョンが4.8.0であると分かる。</p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>uasiさんの<br />28位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>15</kbd>
		<a target="_blank" href="https://qiita.com/uasi/items/90dcdee104a47c41a5cc">Rails 3 のヘルパーメソッドをビュー以外から使う</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2012-10-03 10:57:53</center>
	</td>
	<td style="width:200px;">
		@uasi<br />(Increments 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/735/profile-images/1473681692">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Ruby]</b> <b>[Rails]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>モデルでは <code>ApplicationController.helpers.some_helper()</code>。コントローラなら <code>self.class.helpers.some_helper()</code> でもよい。</p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>uasiさんの<br />29位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>14</kbd>
		<a target="_blank" href="https://qiita.com/uasi/items/f78a9dfae1f4650c62e6">NSURL と bookmark と Sandbox の関係</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-06-13 16:49:40</center>
	</td>
	<td style="width:200px;">
		@uasi<br />(Increments 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/735/profile-images/1473681692">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Objective-C]</b> <b>[Mac]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;">
<h1>
<span id="bookmark-とは" class="fragment"></span><a href="#bookmark-%E3%81%A8%E3%81%AF"><i class="fa fa-link"></i></a>Bookmark とは</h1>

<p>Snow Leopard から、 <code>NSURL</code> に bookmark という機能が加わった。 Bookmark はあるファイルシステムリソース（つまりファイルやフォルダ）を指している <code>NSURL</code> から生成できる。 Bookmark は<strong>参照しているリソースが移動しても有効</strong>であり、 bookmark から移動先の <code>NSURL</code> を取得することができる。</p>

<div class="code-frame" data-lang="objc"><div class="highlight"><pre><span></span><span class="c1">// NSURL からbookmark を生成</span>
<span class="p">-</span> <span class="p">(</span><span class="bp">NSData</span> <span class="o">*</span><span class="p">)</span><span class="nf">bookmarkDataWithOptions:</span><span class="p">(</span><span class="n">NSURLBookmarkCreationOptions</span><span class="p">)</span><span class="nv">options</span> <span class="nf">includingResourceValuesForKeys:</span><span class="p">(</span><span class="bp">NSArray</span> <span class="o">*</span><span class="p">)</span><span class="nv">keys</span> <span class="nf">relativeToURL:</span><span class="p">(</span><span class="bp">NSURL</span> <span class="o">*</span><span class="p">)</span><span class="nv">relativeURL</span> <span class="nf">error:</span><span class="p">(</span><span class="bp">NSError</span> <span class="o">**</span><span class="p">)</span><span class="nv">error</span><span class="p">;</span>

<span class="c1">// Bookmark を解決して NSURL を取得</span>
<span class="p">+</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">URLByResolvingBookmarkData:</span><span class="p">(</span><span class="bp">NSData</span> <span class="o">*</span><span class="p">)</span><span class="nv">bookmarkData</span> <span class="nf">options:</span><span class="p">(</span><span class="n">NSURLBookmarkResolutionOptions</span><span class="p">)</span><span class="nv">options</span> <span class="nf">relativeToURL:</span><span class="p">(</span><span class="bp">NSURL</span> <span class="o">*</span><span class="p">)</span><span class="nv">relativeURL</span> <span class="nf">bookmarkDataIsStale:</span><span class="p">(</span><span class="kt">BOOL</span> <span class="o">*</span><span class="p">)</span><span class="nv">isStale</span> <span class="nf">error:</span><span class="p">(</span><span class="bp">NSError</span> <span class="o">**</span><span class="p">)</span><span class="nv">error</span><span class="p">;</span>
</pre></div></div>

<h1>
<span id="security-scoped-bookmark" class="fragment"></span><a href="#security-scoped-bookmark"><i class="fa fa-link"></i></a>Security-scoped bookmark</h1>

<p>Sandbox が有効な環境では、ユーザーが Open Panel などで与えた URL は Sandbox 内から読み書き可能になるが、アプリケーションを終了すると読み書きの権限は失われる。だがそのような URL から生成した bookmark はアクセス権限の情報を保持するので、これを保存しておくことで、アプリケーションを次に起動したときに読み書き可能な URL を取得できる。アクセス権限の情報を持つ bookmark を security-scoped bookmark といい、そこから生成された URL は security-scoped URL と呼ばれる。 Security-scoped URL が指すリソースに Sandbox 内からアクセスするには、アクセスする前に <code>-startAccessingSecurityScopedResource</code> を呼び、アクセスを終えたら必ず <code>stopAccessingSecurityScopedResource</code> を呼ぶ：</p>

<div class="code-frame" data-lang="objc"><div class="highlight"><pre><span></span><span class="bp">NSURL</span> <span class="o">*</span><span class="n">URL</span> <span class="o">=</span> <span class="o">&lt;</span><span class="err">#</span><span class="n">Resolve</span> <span class="n">bookmark</span><span class="err">#</span><span class="o">&gt;</span><span class="p">;</span>
<span class="p">[</span><span class="n">URL</span> <span class="n">startAccessingSecurityScopedResource</span><span class="p">];</span>
<span class="bp">NSString</span> <span class="o">*</span><span class="n">contents</span> <span class="o">=</span> <span class="p">[</span><span class="bp">NSString</span> <span class="nl">stringWithContentsOfURL</span><span class="p">:</span><span class="n">URL</span><span class="p">];</span>
<span class="p">[</span><span class="n">URL</span> <span class="n">stopAccessingSecurityScopedResource</span><span class="p">];</span>
</pre></div></div>

<h1>
<span id="app-scoped-bookmark-と-document-scoped-bookmark" class="fragment"></span><a href="#app-scoped-bookmark-%E3%81%A8-document-scoped-bookmark"><i class="fa fa-link"></i></a>App-scoped bookmark と document-scoped bookmark</h1>

<p>ある Sandbox 化アプリケーションから見てリソースが読み書き可能であるという情報を記録した bookmark は app-scoped bookmark と呼ばれる。</p>

<p>対して、ある<strong>ドキュメント</strong>から見てリソースが読み書き可能であるという情報を記録した bookmark は document-scoped bookmark と呼ばれる。この種の bookmark は、複数の外部リソースへの参照を持つファイルを作るときに有効である。</p>

<p>外部の画像ファイルへの参照を埋め込んだリッチテキスト文書を考えてみよう。あるワープロソフトAは、リッチテキスト文書ファイルの中に画像ファイルへの document-scoped bookmark を記録する。別のワープロソフトBは、リッチテキスト文書ファイルを開き、画像への document-scoped bookmark を解決することで、画像ファイルの読み書き権限も得ることができる。</p>

<p>Document-scoped bookmark を生成するには、<code>-bookmarkDataWithOptions:includingResourceValuesForKeys:relativeToURL:error:</code> の <code>relativeToURL</code> に基準となるドキュメントの URL を指定する。</p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>uasiさんの<br />30位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>14</kbd>
		<a target="_blank" href="https://qiita.com/uasi/items/559949a709ea1c5e346f">NSPasteboard の変更を監視する</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2012-08-10 14:23:41</center>
	</td>
	<td style="width:200px;">
		@uasi<br />(Increments 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/735/profile-images/1473681692">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Objective-C]</b> <b>[Mac]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>ペーストボードの内容に変更があると <code>NSPasteboard#changeCount</code> がインクリメントされる。 KVO での監視はできないようなので素直にタイマーでポーリングをかければいい。</p>

<div class="code-frame" data-lang="objc"><div class="highlight"><pre><span></span>
<span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">beginObservingPasteboard</span>
<span class="p">{</span>
    <span class="nb">self</span><span class="p">.</span><span class="n">changeCount</span> <span class="o">=</span> <span class="p">[[</span><span class="n">NSPasteboard</span> <span class="n">generalPasteboard</span><span class="p">]</span> <span class="n">changeCount</span><span class="p">];</span>
    <span class="p">[</span><span class="bp">NSTimer</span> <span class="nl">scheduledTimerWithTimeInterval</span><span class="p">:</span><span class="mi">1</span>
                                     <span class="nl">target</span><span class="p">:</span><span class="nb">self</span>
                                   <span class="nl">selector</span><span class="p">:</span><span class="k">@selector</span><span class="p">(</span><span class="nl">observePasteboard</span><span class="p">:)</span>
                                   <span class="nl">userInfo</span><span class="p">:</span><span class="nb">nil</span>
                                    <span class="nl">repeats</span><span class="p">:</span><span class="nb">YES</span><span class="p">];</span>
<span class="p">}</span>

<span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">observePasteboard:</span><span class="p">(</span><span class="bp">NSTimer</span> <span class="o">*</span><span class="p">)</span><span class="nv">timer</span>
<span class="p">{</span>
    <span class="n">NSPasteboard</span> <span class="o">*</span><span class="n">pboard</span> <span class="o">=</span> <span class="p">[</span><span class="n">NSPasteboard</span> <span class="n">generalPasteboard</span><span class="p">];</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">pboard</span><span class="p">.</span><span class="n">changeCount</span> <span class="o">&gt;</span> <span class="nb">self</span><span class="p">.</span><span class="n">changeCount</span><span class="p">)</span> <span class="p">{</span>
        <span class="p">[</span><span class="nb">self</span> <span class="nl">pasteboardChanged</span><span class="p">:</span><span class="n">pboard</span><span class="p">];</span>
    <span class="p">}</span>
    <span class="nb">self</span><span class="p">.</span><span class="n">changeCount</span> <span class="o">=</span> <span class="n">pboard</span><span class="p">.</span><span class="n">changeCount</span><span class="p">;</span>
<span class="p">}</span>

<span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">pasteboardChanged:</span><span class="p">(</span><span class="n">NSPasteboard</span> <span class="o">*</span><span class="p">)</span><span class="nv">pboard</span>
<span class="p">{</span>
    <span class="c1">// Do something with pboard</span>
<span class="p">}</span>

</pre></div></div>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>uasiさんの<br />31位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>14</kbd>
		<a target="_blank" href="https://qiita.com/uasi/items/00a7b53f1cbaf75b0c7c">Objective-C で二項演算子 ?: を使う</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2012-08-10 10:04:09</center>
	</td>
	<td style="width:200px;">
		@uasi<br />(Increments 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/735/profile-images/1473681692">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Objective-C]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>GCC や LLVM の C コンパイラには三項演算子 <code>?:</code> を独自に拡張した <strong>二項</strong> 演算子 <code>?:</code> がある。 <code>x ?: y</code> のように使い、 <code>x ? x : y</code> とほぼ同様に動作する（ただし前者は <code>x</code> を1回しか評価しないので、 <code>x</code> に副作用がある場合は動作が異なる）。</p>

<div class="code-frame" data-lang="objc"><div class="highlight"><pre><span></span><span class="mi">42</span> <span class="o">?:</span> <span class="mi">0</span><span class="p">;</span> <span class="c1">// =&gt; 42</span>
<span class="mi">0</span> <span class="o">?:</span> <span class="mi">42</span><span class="p">;</span> <span class="c1">// =&gt; 42</span>
<span class="mi">0</span> <span class="o">?:</span> <span class="mi">0</span> <span class="o">?:</span> <span class="mi">42</span><span class="p">;</span> <span class="c1">// =&gt; 42</span>
</pre></div></div>

<p>失敗すると <code>nil</code> を返すメソッドのフォールバック処理が簡単に書ける。</p>

<div class="code-frame" data-lang="objc"><div class="highlight"><pre><span></span><span class="bp">NSString</span> <span class="o">*</span><span class="n">str</span> <span class="o">=</span> <span class="p">[</span><span class="n">obj</span> <span class="n">parsedString</span><span class="p">]</span> <span class="o">?:</span> <span class="n">defaultStr</span><span class="p">;</span>
</pre></div></div>

<p>Objective-C で開発する限り LLVM からは離れないのだから積極的に使っている。</p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>uasiさんの<br />32位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>13</kbd>
		<a target="_blank" href="https://qiita.com/uasi/items/546600ca60c1b131012c">Objective-C でマウスカーソルの位置を猛烈にクリックするサンプル</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-09-16 13:15:06</center>
	</td>
	<td style="width:200px;">
		@uasi<br />(Increments 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/735/profile-images/1473681692">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Objective-C]</b> <b>[Mac]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><div class="code-frame" data-lang="objc">
<div class="code-lang"><span class="bold">CookieClicker.m</span></div>
<div class="highlight"><pre><span></span>
<span class="k">@interface</span> <span class="nc">CookieClicker</span>
<span class="k">@property</span> <span class="p">(</span><span class="k">nonatomic</span><span class="p">)</span> <span class="bp">NSTimer</span> <span class="o">*</span><span class="n">timer</span><span class="p">;</span> <span class="c1">// 一定間隔でクリックイベントを発行するタイマー</span>
<span class="k">@property</span> <span class="p">(</span><span class="k">nonatomic</span><span class="p">)</span> <span class="kt">id</span> <span class="n">eventMonitor</span><span class="p">;</span> <span class="c1">// Esc キー押下イベントを監視するモニター</span>
<span class="k">@end</span>

<span class="k">@implementation</span> <span class="nc">CookieClicker</span>

<span class="c1">// マウスカーソルの位置を1秒間に50クリックする</span>
<span class="p">-</span> <span class="p">(</span><span class="kt">IBAction</span><span class="p">)</span><span class="nf">bakeMoreCookies:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">sender</span>
<span class="p">{</span>
  <span class="c1">// タイマーが稼働中なら何もしない</span>
  <span class="k">if</span> <span class="p">(</span><span class="nb">self</span><span class="p">.</span><span class="n">timer</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>

  <span class="c1">// Esc キーの監視を開始する：押されたらタイマーを止める</span>
  <span class="nb">self</span><span class="p">.</span><span class="n">eventMonitor</span> <span class="o">=</span> <span class="p">[</span><span class="bp">NSEvent</span> <span class="nl">addGlobalMonitorForEventsMatchingMask</span><span class="p">:</span><span class="n">NSKeyDownMask</span> <span class="nl">handler</span><span class="p">:</span><span class="o">^</span><span class="p">(</span><span class="bp">NSEvent</span> <span class="o">*</span><span class="n">event</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">event</span><span class="p">.</span><span class="n">keyCode</span> <span class="o">==</span> <span class="mi">53</span> <span class="cm">/* Esc */</span><span class="p">)</span> <span class="p">{</span>
      <span class="p">[</span><span class="nb">self</span> <span class="n">ceaseFire</span><span class="p">];</span>
    <span class="p">}</span>
  <span class="p">}];</span>

  <span class="c1">// 0.02秒ごとに tick: メソッドを呼ぶタイマーを稼動させる</span>
  <span class="nb">self</span><span class="p">.</span><span class="n">timer</span> <span class="o">=</span> <span class="p">[</span><span class="bp">NSTimer</span> <span class="nl">scheduledTimerWithTimeInterval</span><span class="p">:</span><span class="mf">0.02</span> <span class="nl">target</span><span class="p">:</span><span class="nb">self</span> <span class="nl">selector</span><span class="p">:</span><span class="k">@selector</span><span class="p">(</span><span class="nl">tick</span><span class="p">:)</span> <span class="nl">userInfo</span><span class="p">:</span><span class="nb">nil</span> <span class="nl">repeats</span><span class="p">:</span><span class="nb">YES</span><span class="p">];</span>
<span class="p">}</span>

<span class="c1">// カーソルの位置をクリックする</span>
<span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">tick:</span><span class="p">(</span><span class="bp">NSTimer</span> <span class="o">*</span><span class="p">)</span><span class="nv">timer</span>
<span class="p">{</span>
  <span class="c1">// 空のイベントオブジェクトを作って現在のマウスカーソルの位置を取得する</span>
  <span class="n">CGEventRef</span> <span class="n">event</span> <span class="o">=</span> <span class="n">CGEventCreate</span><span class="p">(</span><span class="nb">NULL</span><span class="p">);</span>
  <span class="bp">CGPoint</span> <span class="n">location</span> <span class="o">=</span> <span class="n">CGEventGetLocation</span><span class="p">(</span><span class="n">event</span><span class="p">);</span>
  <span class="n">CFRelease</span><span class="p">(</span><span class="n">event</span><span class="p">);</span>

  <span class="c1">// マウス左ボタンのダウンイベントとアップイベントを発行する</span>
  <span class="n">CGEventRef</span> <span class="n">mouseDown</span> <span class="o">=</span> <span class="n">CGEventCreateMouseEvent</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span> <span class="n">kCGEventLeftMouseDown</span><span class="p">,</span> <span class="n">location</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
  <span class="n">CGEventRef</span> <span class="n">mouseUp</span> <span class="o">=</span> <span class="n">CGEventCreateMouseEvent</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span> <span class="n">kCGEventLeftMouseUp</span><span class="p">,</span> <span class="n">location</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
  <span class="n">CGEventPost</span><span class="p">(</span><span class="n">kCGHIDEventTap</span><span class="p">,</span> <span class="n">mouseDown</span><span class="p">);</span>
  <span class="n">CGEventPost</span><span class="p">(</span><span class="n">kCGHIDEventTap</span><span class="p">,</span> <span class="n">mouseUp</span><span class="p">);</span>
  <span class="n">CFRelease</span><span class="p">(</span><span class="n">mouseDown</span><span class="p">);</span>
  <span class="n">CFRelease</span><span class="p">(</span><span class="n">mouseUp</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// クリックを中止する</span>
<span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">ceaseFire</span>
<span class="p">{</span>
  <span class="c1">// タイマーを止める</span>
  <span class="p">[</span><span class="nb">self</span><span class="p">.</span><span class="n">timer</span> <span class="n">invalidate</span><span class="p">];</span>
  <span class="nb">self</span><span class="p">.</span><span class="n">timer</span> <span class="o">=</span> <span class="nb">nil</span><span class="p">;</span>

  <span class="c1">// Esc キーの監視を止める</span>
  <span class="p">[</span><span class="bp">NSEvent</span> <span class="nl">removeMonitor</span><span class="p">:</span><span class="nb">self</span><span class="p">.</span><span class="n">eventMonitor</span><span class="p">];</span>
  <span class="nb">self</span><span class="p">.</span><span class="n">eventMonitor</span> <span class="o">=</span> <span class="nb">nil</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">@end</span>
</pre></div>
</div>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>uasiさんの<br />33位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>13</kbd>
		<a target="_blank" href="https://qiita.com/uasi/items/1319c23b68263d65e9c1">weak を unsafe_unretained に書き換える際の注意点</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-02-07 19:11:52</center>
	</td>
	<td style="width:200px;">
		@uasi<br />(Increments 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/735/profile-images/1473681692">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Objective-C]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>ARC-enabled なライブラリを Snow Leopard に対応させるために、 weak 修飾子を unsafe_unretained 修飾子に書き換たいことがまれにある。基本的には単純に書き換えるだけでいいが、注意すべき点が2つある：</p>

<ol>
<li>
<code>unsafe_unretained</code> プロパティが参照するオブジェクトが解放されたらプロパティに <code>nil</code> をセットする</li>
<li>
<code>__unsafe_unretained</code> 変数が参照するオブジェクトを使う前に強参照を作る</li>
</ol>

<h1>
<span id="1-プロパティについて" class="fragment"></span><a href="#1-%E3%83%97%E3%83%AD%E3%83%91%E3%83%86%E3%82%A3%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6"><i class="fa fa-link"></i></a>1. プロパティについて</h1>

<p><code>weak</code> プロパティはオブジェクトが解放されると同時に <code>nil</code> がセットされるが、 <code>unsafe_unretained</code> プロパティは無効な領域を参照し続ける：</p>

<div class="code-frame" data-lang="objc"><div class="highlight"><pre><span></span><span class="k">@property</span><span class="p">(</span><span class="k">weak</span><span class="p">)</span> <span class="kt">id</span> <span class="n">weakProp</span><span class="p">;</span>
<span class="k">@property</span><span class="p">(</span><span class="k">unsafe_unretained</span><span class="p">)</span> <span class="kt">id</span> <span class="n">unsafeUnretainedProp</span><span class="p">;</span>

<span class="c1">// ...</span>

<span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">propExample</span> <span class="p">{</span>
    <span class="kt">id</span> <span class="n">obj</span> <span class="o">=</span> <span class="p">[[</span><span class="bp">NSObject</span> <span class="n">alloc</span><span class="p">]</span> <span class="n">init</span><span class="p">];</span>

    <span class="nb">self</span><span class="p">.</span><span class="n">weakProp</span> <span class="o">=</span> <span class="n">obj</span><span class="p">;</span>
    <span class="nb">self</span><span class="p">.</span><span class="n">unsafeUnretainedProp</span> <span class="o">=</span> <span class="n">obj</span><span class="p">;</span>

    <span class="n">obj</span> <span class="o">=</span> <span class="nb">nil</span><span class="p">;</span> <span class="c1">// ここでオブジェクトが解放される</span>

    <span class="c1">// ここでは self.weakProp == nil</span>
    <span class="c1">// ここでは self.unsafeUnretainedProp == 無効なアドレス</span>
<span class="p">}</span>
</pre></div></div>

<p><code>weak</code> プロパティを <code>unsafe_unretained</code> プロパティに書き換えた場合、参照しているオブジェクトが解放されたタイミングで <code>nil</code> をセットしてやる必要がある。</p>

<p>上に掲載した例は同一スコープ内でオブジェクトを作ってすぐ解放する単純なコードなので解放タイミングが掴みやすいが、実際の参照関係はより複雑になる場合がほとんどである：</p>

<div class="code-frame" data-lang="objc"><div class="highlight"><pre><span></span><span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">complexRefExample</span> <span class="p">{</span>
    <span class="nb">self</span><span class="p">.</span><span class="n">unsafeUnretainedProp</span> <span class="o">=</span> <span class="p">[</span><span class="nb">self</span><span class="p">.</span><span class="n">mutableDict</span> <span class="nl">objectForKey</span><span class="p">:</span><span class="s">@"obj"</span><span class="p">];</span>

    <span class="p">[</span><span class="nb">self</span><span class="p">.</span><span class="n">mutableDict</span> <span class="nl">removeObjectForKey</span><span class="p">:</span><span class="s">@"obj"</span><span class="p">];</span>

    <span class="c1">// ここで、</span>
    <span class="c1">// 強参照していたのが self.mutableDict だけなら：</span>
    <span class="c1">//     self.unsafeUnretainedProp == 無効なアドレス</span>
    <span class="c1">// 他のオブジェクトがまだ強参照しているなら：</span>
    <span class="c1">//     self.unsafeUnretainedProp == オブジェクトの有効なアドレス</span>
<span class="p">}</span>
</pre></div></div>

<p>オブジェクトが解放されるタイミングが予測できない場合、メモリリークする可能性と引き換えに <code>strong</code> プロパティを使う手もある。</p>

<h1>
<span id="2-変数について" class="fragment"></span><a href="#2-%E5%A4%89%E6%95%B0%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6"><i class="fa fa-link"></i></a>2. 変数について</h1>

<p><code>__weak</code> 変数も <code>weak</code> プロパティと同様に、参照するオブジェクトが解放されると同時に <code>nil</code> がセットされる：</p>

<div class="code-frame" data-lang="objc"><div class="highlight"><pre><span></span><span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">varExample1</span> <span class="p">{</span>

    <span class="kt">id</span> <span class="n">obj</span> <span class="o">=</span> <span class="p">[[</span><span class="bp">NSObject</span> <span class="n">alloc</span><span class="p">]</span> <span class="n">init</span><span class="p">];</span>

    <span class="k">__weak</span> <span class="kt">id</span> <span class="n">weakVar</span> <span class="o">=</span> <span class="n">obj</span><span class="p">;</span>
    <span class="n">__unsafe_unretained</span> <span class="kt">id</span> <span class="n">unsafeUnretainedVar</span> <span class="o">=</span> <span class="n">obj</span><span class="p">;</span>

    <span class="n">obj</span> <span class="o">=</span> <span class="nb">nil</span><span class="p">;</span> <span class="c1">// ここでオブジェクトが解放される</span>

    <span class="c1">// ここでは weakVar == nil</span>
    <span class="c1">// ここでは unsafeUnretainedVar == 無効なアドレス</span>
<span class="p">}</span>
</pre></div></div>

<p><code>__weak</code> 変数を <code>__unsafe_unretained</code> 変数に書き換えた場合、手動で <code>nil</code> をセットする代わりに、強参照を作ってオブジェクトを解放させないようにするのが手軽である：</p>

<div class="code-frame" data-lang="objc"><div class="highlight"><pre><span></span><span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">varExample2</span> <span class="p">{</span>
    <span class="p">{</span>
        <span class="kt">id</span> <span class="n">obj</span> <span class="o">=</span> <span class="p">[[</span><span class="bp">NSObject</span> <span class="n">alloc</span><span class="p">]</span> <span class="n">init</span><span class="p">];</span>

        <span class="n">__unsafe_unretained</span> <span class="kt">id</span> <span class="n">unsafeUnretainedVar</span> <span class="o">=</span> <span class="n">obj</span><span class="p">;</span>
        <span class="kt">id</span> <span class="n">var</span> <span class="o">=</span> <span class="n">unsafeUnretainedVar</span><span class="p">;</span>

        <span class="n">obj</span> <span class="o">=</span> <span class="nb">nil</span><span class="p">;</span> <span class="c1">// まだ var が参照しているのでオブジェクトは解放されない</span>

        <span class="c1">// ここでは unsafeUnretainedVar == obj</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div></div>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>uasiさんの<br />34位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>12</kbd>
		<a target="_blank" href="https://qiita.com/uasi/items/9da8d791eabea1691c1b">SSH 越しに tmux を開いたときステータスの色を変える</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2012-06-29 01:03:53</center>
	</td>
	<td style="width:200px;">
		@uasi<br />(Increments 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/735/profile-images/1473681692">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[tmux]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>SSH で接続した先で tmux を起動したらステータスの色を変えるようにしてみた。</p>

<div class="code-frame" data-lang="config">
<div class="code-lang"><span class="bold">.tmux.conf</span></div>
<div class="highlight"><pre><span></span>
# cat &lt;&lt;__DATA__ &gt;/dev/null

# （無関係の設定項目は省略……）

# __DATA__
#
# function set_color {
#     if [ -z "$SSH_CONNECTION" ]; then
#         tmux set -t: status-bg                colour64
#         tmux set -t: pane-active-border-fg    colour64
#         tmux set -t: pane-border-fg           colour238
#         tmux set -t: window-status-current-bg colour106
#     else
#         tmux set -t: status-bg                colour30
#         tmux set -t: pane-active-border-fg    colour30
#         tmux set -t: pane-border-fg           colour238
#         tmux set -t: window-status-current-bg colour37
#     fi
# }
#
# function on_login {
#     # NOTE:
#     # Redirecting output of tmux to somewhere,
#     # such as "tmux ls &gt; /dev/null", will never return on some system!
#     # You can use "| true" instead of "&gt; /dev/null" to discard output.
#     set_color | true
# }
#
# $1

</pre></div>
</div>

<div class="code-frame" data-lang="bash">
<div class="code-lang"><span class="bold">.zshrc</span></div>
<div class="highlight"><pre><span></span>
<span class="k">if</span> <span class="o">[[</span> -n <span class="s2">"</span><span class="nv">$TMUX</span><span class="s2">"</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
         cut -c3- ~/.tmux.conf <span class="p">|</span> sh -s on_login
<span class="k">fi</span>

</pre></div>
</div>

<p><a href="http://d.hatena.ne.jp/uasi/20111117/1321464551" rel="nofollow noopener" target="_blank">.tmux.conf にシェルスクリプトを埋め込んで実行する技</a>を使っている。 .zshrc にベタ書きしてもいいのだが、 tmux に関する設定は .tmux.conf にまとめておきたいのでこうした。</p>

<p><a href="http://d.pr/i/LDn2" rel="nofollow noopener" target="_blank">ローカルの tmux のステータスは緑に、リモートの tmux のステータスは水色になる</a>。</p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>uasiさんの<br />35位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>12</kbd>
		<a target="_blank" href="https://qiita.com/uasi/items/545665066619d8cb8dbe">Git でリポジトリ内のサブディレクトリ同士をマージする</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2012-04-27 04:02:28</center>
	</td>
	<td style="width:200px;">
		@uasi<br />(Increments 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/735/profile-images/1473681692">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Git]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>git-svn で標準レイアウトではない Subversion リポジトリを管理しているとき、サブディレクトリ同士をマージしたくなることがあるのでメモしておく。</p>

<p>簡単に言えば、「2つのサブディレクトリ a と b をマージ」するためには、「『サブディレクトリ a の中身を b の中身で置き換えたブランチ』を作って元々のブランチとマージ」すればよい。</p>

<p>リポジトリに以下のディレクトリがあるとする。ディレクトリの中には適当にいくつかファイルがあると考える。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$REPO/hoge_a/
$REPO/hoge_b/
</pre></div></div>

<p>hoge_b/ は、ある時点で hoge_a/ からコピーして作られたとする。その後 hoge_a/ に変更 A が、 hoge_b/ には別の変更 B が加えられてそれぞれコミットされた。この hoge_a/ に hoge_b/ をマージしたい。どうすればいいか？</p>

<p>このようなときは、歴史を遡って、 hoge_a/ に変更 A ではなく変更 B を加えたブランチを作ればいい。そうすれば「hoge_a/ に変更 A を加えたブランチ」と「hoge_a/ に変更 B を加えたブランチ」のマージに持ち込める。</p>

<p>1. まず hoge_b/ が作られたコミットを探してチェックアウトする。この時点では hoge_a/ と hoge_b/ の中身は同じ。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>git checkout -b hoge_a+B ${hoge_b が作られたコミット}
</pre></div></div>

<p>2. master の hoge_b/ の中身を hoge_a+B の hoge_a/ にコピーしてコミットする。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span># インデックスの hoge_a/ を消す
git rm -r --cached hoge_a/
# インデックスの hoge_a/ に master の hoge_b/ の中身を読み込む
# つまり、 hoge_a/ に変更 B を適用する
git read-tree --prefix=hoge_a/ master:hoge_b
# インデックスだけが更新された状態なので、インデックスをワーキングツリーにチェックアウトする
git checkout .
# コミット
git commit
</pre></div></div>

<p>これで hoge_a/ に変更 B を加えたブランチが作れた。あとは普通にマージすればいい。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>git checkout master
git merge --squash hoge_a+B
</pre></div></div>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>uasiさんの<br />36位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>12</kbd>
		<a target="_blank" href="https://qiita.com/uasi/items/6bd7e408638f512317b1">Arch Linux と Zsh で $PATH の設定にハマることがある</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2011-11-23 00:47:35</center>
	</td>
	<td style="width:200px;">
		@uasi<br />(Increments 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/735/profile-images/1473681692">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Zsh]</b> <b>[Linux]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>Arch Linux では /etc/profile が ~/.zshenv の<strong>後に</strong>読み込まれるうえ、中で PATH=hogehoge しているために ~/.zshenv でセットした $PATH が上書きされてしまう。</p>

<p>回避策は3つ：</p>

<ol>
<li>/etc/profile を書き換える</li>
<li>.zprofile などの /etc/profile の後に読み込まれるファイルでパスを設定する</li>
<li>.zprofile などで <code>source ~/.zshenv</code> する</li>
</ol>

<p>2か3の場合、自分でパスを設定した後 <code>typeset -U path</code> して $PATH 内の重複する要素を消すとよい。</p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>uasiさんの<br />37位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>11</kbd>
		<a target="_blank" href="https://qiita.com/uasi/items/6cdf4070798f29fc15b9">すべてのアプリケーションのパス一覧を取得する</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-02-19 00:23:04</center>
	</td>
	<td style="width:200px;">
		@uasi<br />(Increments 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/735/profile-images/1473681692">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Objective-C]</b> <b>[Mac]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>Core Services の undocumented な関数 <code>_LSCopyAllApplicationURLs</code> を使うと、すべてのアプリケーションのパスを取得できる。</p>

<div class="code-frame" data-lang="objc"><div class="highlight"><pre><span></span><span class="c1">// ヘッダではプロトタイプ宣言されていないので自前で宣言する</span>
<span class="kt">void</span> <span class="nf">_LSCopyAllApplicationURLs</span><span class="p">(</span><span class="n">CFArrayRef</span> <span class="o">*</span><span class="n">appURLs</span><span class="p">);</span>

<span class="p">-</span> <span class="p">(</span><span class="bp">NSArray</span> <span class="o">*</span><span class="p">)</span><span class="nf">allApplicationURLs</span> <span class="p">{</span>
    <span class="n">CFArrayRef</span> <span class="n">appURLs</span><span class="p">;</span>
    <span class="n">_LSCopyAllApplicationURLs</span><span class="p">(</span><span class="o">&amp;</span><span class="n">appURLs</span><span class="p">);</span>
    <span class="k">return</span> <span class="n">CFBridgingRelease</span><span class="p">(</span><span class="n">appURLs</span><span class="p">);</span>
<span class="p">}</span>
</pre></div></div>

<p><em>すべての</em> アプリケーションとは、 <code>/Applications</code> ほかいくつかのシステム標準アプリケーションフォルダに入っているアプリケーションすべてという意味。それ以外のフォルダに入っているアプリケーションは対象にならない。</p>

<p>この関数はシステムにキャッシュされたパスを返すので、アプリケーションフォルダを走査するコードより高速に動作する。</p>

<p>参考にしたページ： <a href="http://cocoadev.com/wiki/AllApplications" rel="nofollow noopener" target="_blank">AllApplications - CocoaDev</a></p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>uasiさんの<br />38位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>11</kbd>
		<a target="_blank" href="https://qiita.com/uasi/items/2a496e5b58c4ac1dd564">Podfile でローカルディレクトリにある podspec を指定する</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-02-05 12:56:06</center>
	</td>
	<td style="width:200px;">
		@uasi<br />(Increments 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/735/profile-images/1473681692">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Mac]</b> <b>[Xcode]</b> <b>[CocoaPods]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>あるライブラリのオレオレ podspec を書いたがなんらかの理由で公開できない、または公開が面倒な場合は、 podspec をローカルに置いて Podfile から参照することができる：</p>

<div class="code-frame" data-lang="ruby"><div class="highlight"><pre><span></span><span class="c1">### ディレクトリ構成の例</span>
<span class="c1"># FooProject/</span>
<span class="c1"># Podfile</span>
<span class="c1"># Specs/</span>
<span class="c1">#   BarLib/</span>
<span class="c1">#     0.0.1/</span>
<span class="c1">#       BarLib.podspec</span>
<span class="c1"># Source Files...</span>

<span class="c1">### Podfile</span>
<span class="n">pod</span> <span class="s1">'BarLib'</span><span class="p">,</span> <span class="ss">podspec</span><span class="p">:</span> <span class="s1">'Specs/BarLib/0.0.1/BarLib.podspec'</span>
</pre></div></div>

<p><code>pod</code> メソッドの <code>:podspec</code> オプションに、ローカルの podspec のパス（絶対パスまたは Podfile からの相対パス）を指定すればいい。上記のディレクトリ構成は CocoaPods の標準に従っているが、このとおりでなくても構わない。</p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>uasiさんの<br />39位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>11</kbd>
		<a target="_blank" href="https://qiita.com/uasi/items/bc2a72e24879078a4e2e">OS X のバージョン番号を取得する</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2012-10-30 14:51:46</center>
	</td>
	<td style="width:200px;">
		@uasi<br />(Increments 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/735/profile-images/1473681692">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Objective-C]</b> <b>[Mac]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p><a href="http://cocoadev.com/wiki/DeterminingOSVersion" class="autolink" rel="nofollow noopener" target="_blank">http://cocoadev.com/wiki/DeterminingOSVersion</a> によれば、 OS X のバージョンを取得する正しい方法は <code>/System/Library/CoreServices/SystemVersion.plist</code> の <code>ProductVersion</code> キーを参照することらしい。</p>

<div class="code-frame" data-lang="objc"><div class="highlight"><pre><span></span><span class="bp">NSDictionary</span> <span class="o">*</span><span class="n">dict</span> <span class="o">=</span> <span class="p">[</span><span class="bp">NSDictionary</span> <span class="nl">dictionaryWithContentsOfFile</span><span class="p">:</span><span class="s">@"/System/Library/CoreServices/SystemVersion.plist"</span><span class="p">];</span>
<span class="bp">NSString</span> <span class="o">*</span><span class="n">version</span> <span class="o">=</span> <span class="p">[</span><span class="n">dict</span> <span class="nl">objectForKey</span><span class="p">:</span><span class="s">@"ProductVersion"</span><span class="p">];</span>
<span class="c1">// version == "10.8.2"</span>
</pre></div></div>

<p><code>Gestalt()</code> で取得することもできるが、この関数は10.8から非推奨になった。</p>

<div class="code-frame" data-lang="objc"><div class="highlight"><pre><span></span> <span class="kt">SInt32</span> <span class="n">major</span><span class="p">,</span> <span class="n">minor</span><span class="p">,</span> <span class="n">bugFix</span><span class="p">;</span>
 <span class="n">Gestalt</span><span class="p">(</span><span class="n">gestaltSystemVersionMajor</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">major</span><span class="p">);</span>
 <span class="n">Gestalt</span><span class="p">(</span><span class="n">gestaltSystemVersionMinor</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">minor</span><span class="p">);</span>
 <span class="n">Gestalt</span><span class="p">(</span><span class="n">gestaltSystemVersionBugFix</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">bugFix</span><span class="p">);</span>
<span class="c1">// major  == 10</span>
<span class="c1">// minor  == 8</span>
<span class="c1">// bugFix == 2</span>
</pre></div></div>

<p>Human readable な文字列が欲しければ <code>-[NSProcessInfo operatingSystemVersionString]</code> が使える。</p>

<div class="code-frame" data-lang="objc"><div class="highlight"><pre><span></span><span class="bp">NSString</span> <span class="o">*</span><span class="n">version</span> <span class="o">=</span> <span class="p">[[</span><span class="bp">NSProcessInfo</span> <span class="n">processInfo</span><span class="p">]</span> <span class="n">operatingSystemVersionString</span><span class="p">];</span>
<span class="c1">// version == "Version 10.8.2 (Build 12C60)"</span>
</pre></div></div>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>uasiさんの<br />40位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>10</kbd>
		<a target="_blank" href="https://qiita.com/uasi/items/4cb10adfaf1df4738231">スコープを抜けるタイミングで Core Foundation オブジェクトを解放するマクロ</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-03-26 00:39:35</center>
	</td>
	<td style="width:200px;">
		@uasi<br />(Increments 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/735/profile-images/1473681692">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Objective-C]</b> <b>[Mac]</b> <b>[iOS]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>を、さっき思いついた。 Create と Release を並べて書けるようになるので解放し忘れがなくなる。</p>

<div class="code-frame" data-lang="objc"><div class="highlight"><pre><span></span><span class="cp">#define CFReleaseOnLeavingScope(cfRefVarName) \</span>
<span class="cp">id __attribute__((unused)) CFReleaseOnLeavingScope_var_ ## cfRefVarName = \</span>
<span class="cp">CFBridgingRelease(cfRefVarName);</span>

<span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">manualRelease</span> <span class="p">{</span>
    <span class="n">CGContextRef</span> <span class="n">context</span> <span class="o">=</span> <span class="n">CGBitmapContextCreate</span><span class="p">(...);</span>
    <span class="p">...</span>
    <span class="n">CGContextDrawSomething</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="p">...);</span>
    <span class="p">....</span>
    <span class="n">CGContextRelease</span><span class="p">(</span><span class="n">context</span><span class="p">);</span> <span class="c1">// 書き忘れたりうっかり消したりしそう</span>
<span class="p">}</span>

<span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">releaseOnLeavingScope</span> <span class="p">{</span>
    <span class="n">CGContextRef</span> <span class="n">context</span> <span class="o">=</span> <span class="n">CGBitmapContextCreate</span><span class="p">(...);</span>
    <span class="n">CFReleaseOnLeavingScope</span><span class="p">(</span><span class="n">context</span><span class="p">);</span> <span class="c1">// Create 直後に書けばいいので忘れない</span>
    <span class="p">...</span>
    <span class="n">CGContextDrawSomething</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="p">...);</span>
    <span class="p">...</span>
<span class="p">}</span>
</pre></div></div>

<p><code>CFBridgingRelease()</code> で参照カウント管理を ARC に任せている。</p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>uasiさんの<br />41位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>10</kbd>
		<a target="_blank" href="https://qiita.com/uasi/items/55d0b44632ed0b46d838">GitHub か BitBucket に画像を保存して Qiita に貼る</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2012-08-08 02:08:59</center>
	</td>
	<td style="width:200px;">
		@uasi<br />(Increments 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/735/profile-images/1473681692">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Qiita]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>適当なリポジトリを作って画像を入れ push するだけ。 GitHub なら <code>https://raw.github.com/USER/REPO/master/PATH/TO/IMAGE.jpg</code> 、 BitBucket なら <code>https://bitbucket.org/USER/REPO/raw/master/PATH/TO/IMAGE.jpg</code> が画像の URL。</p>

<p>Qiita に貼るには <code>![Alt text](URL)</code> 記法。画像から画像ファイルにリンクを張るなら <code>[ ![Alt title](URL) ](URL)</code> とする。ややこしい。</p>

<h2>
<span id="追記" class="fragment"></span><a href="#%E8%BF%BD%E8%A8%98"><i class="fa fa-link"></i></a>追記</h2>

<p>拙作 <a href="http://d.hatena.ne.jp/uasi/20120825/1345892743" rel="nofollow noopener" target="_blank">Gyazit</a> を使うとスクリーンショットを撮った後の commit &amp; push から URL のコピーまで自動化できる。任意の画像を Gyazit のアイコンにドラッグ＆ドロップしてもよい。</p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>uasiさんの<br />42位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>9</kbd>
		<a target="_blank" href="https://qiita.com/uasi/items/3f2340e89423145ccc51">ActiveAdmin で /admin/login に before_filter をかける</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2012-08-20 19:46:00</center>
	</td>
	<td style="width:200px;">
		@uasi<br />(Increments 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/735/profile-images/1473681692">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Ruby]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>ActiveAdmin の初期化ファイルでは <code>config.before_filter</code> で before_filter をセットできる。</p>

<div class="code-frame" data-lang="ruby">
<div class="code-lang"><span class="bold">config/initializers/active_admin.rb</span></div>
<div class="highlight"><pre><span></span><span class="no">ActiveAdmin</span><span class="o">.</span><span class="n">setup</span> <span class="k">do</span> <span class="o">|</span><span class="n">config</span><span class="o">|</span>
  <span class="o">...</span>
  <span class="n">config</span><span class="o">.</span><span class="n">before_filter</span> <span class="ss">:some_filter</span>
  <span class="o">...</span>
<span class="k">end</span>
</pre></div>
</div>

<p>ただしこのフィルタはリソースにしか効かない。つまり <code>/admin/dogs/index</code> や <code>/admin/cats/show</code> にアクセスしたときはフィルタがかかるが、 <code>/admin/login</code> や <code>/admin/logout</code>にアクセスしたときはかからない。</p>

<p><code>/admin/login</code> にフィルタをかけるには以下のようにする。</p>

<div class="code-frame" data-lang="ruby">
<div class="code-lang"><span class="bold">config/initializers/active_admin.rb</span></div>
<div class="highlight"><pre><span></span><span class="no">ActiveAdmin</span><span class="o">.</span><span class="n">setup</span> <span class="k">do</span> <span class="o">|</span><span class="n">config</span><span class="o">|</span>
  <span class="o">...</span>
  <span class="no">ActiveAdmin</span><span class="o">::</span><span class="no">Devise</span><span class="o">::</span><span class="no">SessionsController</span><span class="o">.</span><span class="n">before_filter</span> <span class="ss">:some_filter</span>
  <span class="o">...</span>
<span class="k">end</span>
</pre></div>
</div>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>uasiさんの<br />43位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>8</kbd>
		<a target="_blank" href="https://qiita.com/uasi/items/ab36e4eb8b9672b0255d">View-based table view の delegate の awakeFromNib が複数回呼ばれる問題</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-04-21 22:56:31</center>
	</td>
	<td style="width:200px;">
		@uasi<br />(Increments 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/735/profile-images/1473681692">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Objective-C]</b> <b>[Mac]</b> <b>[Cocoa]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>View-based なテーブルビューを扱う場合、テーブルビューの delegate の <code>awakeFromNib</code> が複数回呼ばれるかもしれないことに注意。</p>

<p>典型的な状況は次のとおり。ある NIB が、 view-based なテーブルビューと、そのセルとなるビューを含んでいる。 <code>NSTableView</code> の <code>delegate</code> アウトレットに xib 内のあるオブジェクトが接続されている。さらに、セルビューをインスタンス化するとき、 owner に同じオブジェクトを指定している：</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>MyWindow.xib
  |
  |`-- NSTableView
  |     |    `-- MyTableCellView
  |     |              |
  |     | [delegate]   | [owner]
  |     |              |
  |     v              v
   `-- MyTableViewDelegate (may be File's Owner)

</pre></div></div>

<div class="code-frame" data-lang="objc"><div class="highlight"><pre><span></span><span class="k">@implementation</span> <span class="nc">MyTableViewDelegate</span>

<span class="p">-</span> <span class="p">(</span><span class="n">NSView</span> <span class="o">*</span><span class="p">)</span><span class="nf">tableView:</span><span class="p">(</span><span class="n">NSTableView</span> <span class="o">*</span><span class="p">)</span><span class="nv">tableView</span>
   <span class="nf">viewForTableColumn:</span><span class="p">(</span><span class="n">NSTableColumn</span> <span class="o">*</span><span class="p">)</span><span class="nv">tableColumn</span>
                  <span class="nf">row:</span><span class="p">(</span><span class="n">NSInteger</span><span class="p">)</span><span class="nv">row</span> <span class="p">{</span>
    <span class="c1">// owner に self を指定して MyTableCellView を作成している</span>
    <span class="n">MyTableCellView</span> <span class="o">*</span><span class="n">view</span> <span class="o">=</span> <span class="p">[</span><span class="n">tableView</span> <span class="nl">makeViewWithIdentifier</span><span class="p">:</span><span class="s">@"..."</span>
                                                        <span class="nl">owner</span><span class="p">:</span><span class="nb">self</span><span class="p">];</span>
    <span class="p">...</span>
<span class="p">}</span>
</pre></div></div>

<p>以上の状況では、 NIB がロードされたときに加えて、 <code>MyTableCellView</code> <strong>が NIB からインスタンス化されたときにも</strong>  <code>MyTableViewDelegate</code> の <code>awakeFromNib</code> が呼ばれる。</p>

<p>これは、標準のビューをセルビューにしたい場合（つまり、標準のビューのサブクラスを作って <code>awakeFromNib</code> を実装する手間をかけたくない場合）に、 owner がセルビューを初期化してやるための機構である。</p>

<p>よって、 owner の <code>awakeFromNib</code> は複数回呼ばれても構わないようにする必要がある。この機構が不要なら、セルビューを作るとき <code>makeViewWithIdentifer:owner:</code> の owner に <code>nil</code> を渡せばよい。</p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>uasiさんの<br />44位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>8</kbd>
		<a target="_blank" href="https://qiita.com/uasi/items/bf0b6b38a16d6304c818">CoffeeScript で断固として三項演算子を書きたい</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2012-12-02 13:41:18</center>
	</td>
	<td style="width:200px;">
		@uasi<br />(Increments 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/735/profile-images/1473681692">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[JavaScript]</b> <b>[CoffeeScript]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p><code>(if A then B else C)</code> も <code>A &amp;&amp; B || C</code> も嫌だ、何としても三項演算子を使いたいんだ、というときは <code>`A ? B : C`</code> と書けばよい。</p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>uasiさんの<br />45位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>7</kbd>
		<a target="_blank" href="https://qiita.com/uasi/items/1321325bc983c5ed971a">Perl 6 の関数は sub だけじゃない</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2012-12-02 23:54:55</center>
	</td>
	<td style="width:200px;">
		@uasi<br />(Increments 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/735/profile-images/1473681692">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[AdventCalendar]</b> <b>[Perl6]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>sub と言えば Perl、 Perl と言えば sub ですが、 Perl 6 の関数定義には sub 以外にも色々あり、それぞれに役割が異なっています。1つ1つ見ていきましょう。</p>

<h1>
<span id="sub" class="fragment"></span><a href="#sub"><i class="fa fa-link"></i></a>sub</h1>

<p><code>sub</code> は Perl 5 の sub と同じく、モジュールレベルの関数を定義します。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>sub foobar { say 'ok' }
foobar; # =&gt; ok
</pre></div></div>

<h2>
<span id="my-sub-our-sub" class="fragment"></span><a href="#my-sub-our-sub"><i class="fa fa-link"></i></a>my sub, our sub</h2>

<p>単に <code>sub</code> と書くと <code>my sub</code> の省略だと見なされます。 <code>my sub</code> で定義した関数はモジュールの外からは見えません。関数をモジュール外から呼び出せるようにするには明示的に <code>our sub</code> で定義します。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>module Foo {
    sub bar { say 'ok' }
    my sub my_bar { say 'ok' }
    our sub our_bar { say 'ok' }
}

Foo::bar; # =&gt; error: Could not find symbol '&amp;bar'
Foo::my_bar; # =&gt; error: Could not find symbol '&amp;my_bar'
Foo::our_bar; # =&gt; ok
</pre></div></div>

<h2>
<span id="multi-sub" class="fragment"></span><a href="#multi-sub"><i class="fa fa-link"></i></a>multi sub</h2>

<p><code>multi sub</code> はマルチディスパッチに対応した関数を定義します。マルチディスパッチは C++ や Java でいうオーバーロードを動的に実現する機構で、引数の型や値によって関数を呼び分けることができます。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>multi sub foo(Int $int) { say 'int' }
multi sub foo(Str $str) { say 'str' }

foo(42); # =&gt; int
foo('the answer'); # =&gt; str
</pre></div></div>

<h2>
<span id="proto-sub" class="fragment"></span><a href="#proto-sub"><i class="fa fa-link"></i></a>proto sub</h2>

<p><code>proto sub</code> は <code>multi sub</code> で多重定義した同名の関数に共通する性質を定義します。たとえば関数本体が実行される前にコードを差し込むことができます。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>multi sub foo(Int $int) { say 'int' }
multi sub foo(Str $str) { say 'str' }
proto sub foo(|) { print 'I haz '; {*} } # `{*}` は適切な multi sub の本体に置き換わる

foo(42); # =&gt; I haz int
foo('the answer'); # =&gt; I haz str
</pre></div></div>

<h2>
<span id="anon-sub" class="fragment"></span><a href="#anon-sub"><i class="fa fa-link"></i></a>anon sub</h2>

<p><code>anon sub {}</code> 式は匿名関数オブジェクトを作ることができます。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>my $f = anon sub foo { say 'foo' };
$f(); # =&gt; foo
</pre></div></div>

<p><code>sub {}</code> 式で作れる<strong>無名</strong>関数オブジェクトと違い、<strong>匿名</strong>関数オブジェクトには名前がついています（ややこしいですね）。関数オブジェクトに名前をつけておくとエラーが起きたときバックトレースに関数名が表示されます。デバッグの助けになるでしょう。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>(anon sub foo { die 'ouch!' })(); # =&gt; error: ouch! in sub foo at /path/to/script:1
#                                                      ^^^^^^^ 匿名：名前あり
(sub { die 'ouch!' })(); # =&gt; error: ouch! in sub  at /path/to/script:1
#                                             ^^^^ 無名：名前なし
</pre></div></div>

<p>なお <code>sub {}</code> 式で名前つき関数オブジェクトを作ると関数定義もされてしまうので注意が必要です。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>(sub foo { say 'foo' })(); #=&gt; foo
foo; # =&gt; foo
</pre></div></div>

<h1>
<span id="method" class="fragment"></span><a href="#method"><i class="fa fa-link"></i></a>method</h1>

<p><code>method</code> はその名のとおりメソッドを定義します。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>class Klass {
    method meth { say 'ok' }
}
Klass.meth; # =&gt; ok
</pre></div></div>

<p>Perl 6 にはクラスメソッドとインスタンスメソッドの違いはありません。クラスメソッドとして呼び出した場合は <code>self</code> がクラスオブジェクトになります。クラスオブジェクトは未定義値扱いなので、 <code>self.defined</code> の真偽を見ればクラスメソッドとして呼ばれたかどうかが分かります。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>class Klass {
    method meth {
        if self.defined { say 'called as instance method' }
        else { say 'called as class method' }
    }
}

Klass.new.meth; # =&gt; called as instance method
Klass.meth; # =&gt; called as class method
</pre></div></div>

<p><code>self</code> が未定義値であるかどうかでマルチディスパッチすることもできます。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>class Klass {
    multi method meth(Mu:D:) { say 'called as instance method' }
    multi method meth(Mu:U:) { say 'called as class method' }
}

Klass.new.meth; # =&gt; called as instance method
Klass.meth; # =&gt; called as class method
</pre></div></div>

<h2>
<span id="method--private-method" class="fragment"></span><a href="#method--private-method"><i class="fa fa-link"></i></a>method ! (private method)</h2>

<p>プライベートメソッドを定義するにはメソッド名の前に <code>!</code> をつけます。プライベートメソッドを呼び出すには <code>.</code> ではなく <code>!</code> を使って <code>self!meth()</code> のようにします。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>class Klass {
    method pub { say 'pub and ' ~ self!priv }
    method !priv { 'priv' }
}

Klass.pub; # =&gt; pub and priv
Klass.priv; # =&gt; error: No such method 'priv' for invocant of type 'Klass'
</pre></div></div>

<h2>
<span id="submethod" class="fragment"></span><a href="#submethod"><i class="fa fa-link"></i></a>submethod</h2>

<p><code>submethod</code> は継承されないメソッドを定義します。必ずオーバーライドしなければならないメソッドを定義するときなどに使います。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>class Base {
    method meth { say 'meth and' ~ self.submeth }
    method submeth { 'submeth' }
}

class DerivedWithSubmeth is Base {
    submethod submeth { 'another submeth' }
}

class DerivedWithoutSubmeth is Base {}

Base.new.meth; # =&gt; meth and submeth
DerivedWithSubmeth.meth; # =&gt; meth and another submeth
DerivedWithoutSubmeth.meth; # =&gt; error: No such method 'submeth' for ...
</pre></div></div>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>uasiさんの<br />46位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>6</kbd>
		<a target="_blank" href="https://qiita.com/uasi/items/ea89f53495cff76758d7">NSTextView にドラッグ＆ドロップしたときのキャレットの位置を取得する</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2014-02-13 16:55:10</center>
	</td>
	<td style="width:200px;">
		@uasi<br />(Increments 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/735/profile-images/1473681692">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Objective-C]</b> <b>[Cocoa]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p><code>NSTextView</code> のキャレットの位置は通常 <code>[aTextView selectedRange].location</code> で取得できる。キャレットの位置は幅0の選択範囲と同義だからである。</p>

<p>しかし、 <em>テキストを選択した状態で</em> <code>NSTextView</code> の上で何かをドラッグしたとき表示されるキャレットの位置はこの方法では取得できない。この場合、 <code>NSDraggingInfo</code> からマウスカーソルの位置を取得し、キャレットの位置に変換すればよい：</p>

<div class="code-frame" data-lang="objc"><div class="highlight"><pre><span></span><span class="p">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">performDragOperation:</span><span class="p">(</span><span class="kt">id</span> <span class="o">&lt;</span><span class="n">NSDraggingInfo</span><span class="o">&gt;</span><span class="p">)</span><span class="nv">sender</span> <span class="p">{</span>
    <span class="n">NSPoint</span> <span class="n">dropPoint</span> <span class="o">=</span> <span class="p">[</span><span class="nb">self</span> <span class="nl">convertPoint</span><span class="p">:[</span><span class="n">sender</span> <span class="n">draggingLocation</span><span class="p">]</span> <span class="nl">fromView</span><span class="p">:</span><span class="nb">nil</span><span class="p">];</span>
    <span class="n">NSUInteger</span> <span class="n">caretLocation</span> <span class="o">=</span> <span class="p">[</span><span class="nb">self</span> <span class="nl">characterIndexForInsertionAtPoint</span><span class="p">:</span><span class="n">dropPoint</span><span class="p">];</span>
<span class="p">}</span>
</pre></div></div>

<p>参考：<a href="http://stackoverflow.com/questions/13658424/set-the-cursor-to-a-pointing-hand-over-a-text-view" rel="nofollow noopener" target="_blank">nstextview - Set the cursor to a pointing hand over a text view - Stack Overflow</a></p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>uasiさんの<br />47位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>6</kbd>
		<a target="_blank" href="https://qiita.com/uasi/items/4b05b7d3e6384badca4f">スーパークラスのメソッドを上書きして返り値の型を狭め、キャストを不要にする</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-07-19 16:18:42</center>
	</td>
	<td style="width:200px;">
		@uasi<br />(Increments 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/735/profile-images/1473681692">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Objective-C]</b> <b>[Mac]</b> <b>[iOS]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>あるメソッドの返り値の型が事前に分かっている型よりも“広い”ために、わざわざキャストをしなければならないことがある。</p>

<p>たとえば、<code>-[NSDocumentController sharedDocumentController]</code> メソッドは、通常 <code>NSDocumentController</code> 型のオブジェクトを返すにもかかわらず、返り値の型が <code>id</code> になっている。また、 <code>NSWindowController</code> の自前のサブクラスにおいて、 <code>NSWindow</code> のサブクラスを扱うことが分かっているのに、 <code>-window</code> メソッドの返り値の型が <code>NSWindow</code> のままになっているということもあるだろう。これらのメソッドの返り値を扱うにはダウンキャストが必要になり、煩わしい：</p>

<div class="code-frame" data-lang="objc"><div class="highlight"><pre><span></span><span class="p">[(</span><span class="n">NSDocumentController</span> <span class="o">*</span><span class="p">)[</span><span class="n">NSDocumentController</span> <span class="n">sharedDocumentController</span><span class="p">]</span> <span class="nl">newDocument</span><span class="p">:</span><span class="nb">self</span><span class="p">];</span>

<span class="p">[[(</span><span class="n">MyWindow</span> <span class="o">*</span><span class="p">)[</span><span class="n">myWindowController</span> <span class="n">window</span><span class="p">]</span> <span class="n">myWindowMethod</span><span class="p">];</span>
</pre></div></div>

<p>このような場合、サブクラスで同名のメソッドを宣言することで返り値の型を狭めることができる（実装は不要）：</p>

<div class="code-frame" data-lang="objc"><div class="highlight"><pre><span></span><span class="k">@interface</span> <span class="nc">MyDocumentController</span> : <span class="nc">NSDocumentController</span>

<span class="c1">// + (id)sharedDocumentController から返り値の型を狭める</span>
<span class="p">+</span> <span class="p">(</span><span class="kt">instancetype</span><span class="p">)</span><span class="nf">sharedDocumentController</span><span class="p">;</span>

<span class="k">@end</span>

<span class="k">@interface</span> <span class="nc">MyWindowController</span> : <span class="nc">NSWindowController</span>

<span class="c1">// - (NSWindow *)window から返り値の型を狭める</span>
<span class="p">-</span> <span class="p">(</span><span class="n">MyWindow</span> <span class="o">*</span><span class="p">)</span><span class="nf">window</span><span class="p">;</span>

<span class="k">@end</span>
</pre></div></div>

<p>型を狭めることでダウンキャストが不要になる：</p>

<div class="code-frame" data-lang="objc"><div class="highlight"><pre><span></span><span class="p">[[</span><span class="n">MyDocumentController</span> <span class="n">sharedDocumentController</span><span class="p">]</span> <span class="nl">newDocument</span><span class="p">:</span><span class="nb">self</span><span class="p">];</span>

<span class="p">[[</span><span class="n">myWindowController</span> <span class="n">window</span><span class="p">]</span> <span class="n">myWindowMethod</span><span class="p">];</span>
</pre></div></div>

<p>このように、サブクラスはスーパークラスから継承したメソッドの返り値や引数の型を変えることができる。ただし変更後の型は変更前の型のサブクラスでなければならない。</p>

<p>なお、既存のクラスにカテゴリを追加してメソッドの型を変えようとしても効果はない：</p>

<div class="code-frame" data-lang="objc"><div class="highlight"><pre><span></span><span class="k">@interface</span> <span class="nc">NSApplication</span> <span class="nl">(TypeNarrowing)</span>

<span class="c1">// - (id&lt;NSApplicationDelegate)delegate から返り値の型を狭めようとしても…</span>
<span class="p">-</span> <span class="p">(</span><span class="n">MyAppDelegate</span> <span class="o">*</span><span class="p">)</span><span class="nf">delegate</span><span class="p">;</span>

<span class="k">@end</span>

<span class="p">...</span>

<span class="o">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">foo</span> <span class="p">{</span>
  <span class="c1">// 返り値の型は id&lt;NSApplicationDelegate&gt; のまま</span>
  <span class="p">[[</span><span class="n">NSApplication</span> <span class="n">sharedApplication</span><span class="p">]</span> <span class="n">delegate</span><span class="p">];</span>
<span class="p">}</span>
</pre></div></div>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>uasiさんの<br />48位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>6</kbd>
		<a target="_blank" href="https://qiita.com/uasi/items/1848b1abd352675c35a1">OS X 10.8 で NSUserDefaults を空にするには</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-05-28 12:01:40</center>
	</td>
	<td style="width:200px;">
		@uasi<br />(Increments 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/735/profile-images/1473681692">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Objective-C]</b> <b>[MacOSX]</b> <b>[Cocoa]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>OS X 10.8 にはバグがあるらしく、 <code>NSUserDefaults</code> の <code>removePersistentDomainForName:</code> を呼んでも defaults が削除されない。また、 <code>setPersistentDomain:forName</code> で空の辞書をセットしても何も起こらない：</p>

<div class="code-frame" data-lang="objc"><div class="highlight"><pre><span></span><span class="c1">// これはダメ</span>
<span class="p">[[</span><span class="bp">NSUserDefaults</span> <span class="n">standardUserDefaults</span><span class="p">]</span> <span class="nl">removePersistentDomainForName</span><span class="p">:[</span><span class="bp">NSBundle</span> <span class="n">mainBundle</span><span class="p">].</span><span class="n">bundleIdentifier</span><span class="p">];</span>
<span class="c1">// これもダメ</span>
<span class="p">[[</span><span class="bp">NSUserDefaults</span> <span class="n">standardUserDefaults</span><span class="p">]</span> <span class="nl">setPersistentDomain</span><span class="p">:</span><span class="l">@{}</span> <span class="nl">forName</span><span class="p">:[</span><span class="bp">NSBundle</span> <span class="n">mainBundle</span><span class="p">].</span><span class="n">bundleIdentifier</span><span class="p">];</span>
</pre></div></div>

<p>唯一の手段は、空でない適当な辞書を defaults にセットし、値を取り除く方法である：</p>

<div class="code-frame" data-lang="objc"><div class="highlight"><pre><span></span><span class="c1">// これが正解</span>
<span class="p">[[</span><span class="bp">NSUserDefaults</span> <span class="n">standardUserDefaults</span><span class="p">]</span> <span class="nl">setPersistentDomain</span><span class="p">:</span><span class="l">@{</span><span class="s">@""</span><span class="o">:</span> <span class="s">@""</span><span class="l">}</span> <span class="nl">forName</span><span class="p">:[</span><span class="bp">NSBundle</span> <span class="n">mainBundle</span><span class="p">].</span><span class="n">bundleIdentifier</span><span class="p">];</span>
<span class="p">[[</span><span class="bp">NSUserDefaults</span> <span class="n">standardUserDefaults</span><span class="p">]</span> <span class="nl">removeObjectForKey</span><span class="p">:</span><span class="s">@""</span><span class="p">];</span>
</pre></div></div>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>uasiさんの<br />49位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>6</kbd>
		<a target="_blank" href="https://qiita.com/uasi/items/fa18f2111830d594610a">quickrun.vim でテストを実行する</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2012-07-21 17:45:29</center>
	</td>
	<td style="width:200px;">
		@uasi<br />(Increments 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/735/profile-images/1473681692">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Vim]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p><code>&lt;Leader&gt;r</code> でファイルを実行する設定はそのままに、 <code>&lt;Leader&gt;t</code> ではテストを実行できるようにしてみた。</p>

<div class="code-frame" data-lang="vim">
<div class="code-lang"><span class="bold">~/.vim/after/plugin/quickrun.vim</span></div>
<div class="highlight"><pre><span></span><span class="c">" キーマップの設定</span>
<span class="nb">nnoremap</span> <span class="p">&lt;</span>buffer<span class="p">&gt;</span> <span class="p">&lt;</span><span class="k">silent</span><span class="p">&gt;</span> <span class="p">&lt;</span>Leader<span class="p">&gt;</span><span class="k">t</span> :<span class="p">&lt;</span>C<span class="p">-</span><span class="k">u</span><span class="p">&gt;</span>QuickRun <span class="p">-</span><span class="k">mode</span> <span class="k">n</span> <span class="p">-</span>type test:<span class="p">&lt;</span>C<span class="p">-</span><span class="k">r</span><span class="p">&gt;=</span>&amp;<span class="k">filetype</span><span class="p">&lt;</span>CR<span class="p">&gt;&lt;</span>CR<span class="p">&gt;</span>

<span class="c">" テスト用の設定変数</span>
<span class="c">" データ構造は g:quickrun_config と同じ</span>
<span class="k">let</span> s:quickrun_test_config <span class="p">=</span> {}

<span class="c">" D言語の設定例</span>
<span class="k">let</span> d_type <span class="p">=</span> copy<span class="p">(</span><span class="k">g</span>:quickrun#default_config[<span class="s1">'d'</span>][<span class="s1">'type'</span>]<span class="p">)</span>
<span class="k">if</span> d_type <span class="p">!=</span> <span class="s1">''</span>
    <span class="k">let</span> s:quickrun_test_config[d_type] <span class="p">=</span> copy<span class="p">(</span><span class="k">g</span>:quickrun#default_config[d_type]<span class="p">)</span>
    <span class="k">let</span> s:quickrun_test_config[d_type][<span class="s1">'cmdopt'</span>] <span class="p">=</span> <span class="s1">'-unittest'</span>
<span class="k">endif</span>

<span class="c">" Rustの設定例</span>
<span class="k">let</span> s:quickrun_test_config[<span class="s1">'rust'</span>] <span class="p">=</span> copy<span class="p">(</span><span class="k">g</span>:quickrun#default_config[<span class="s1">'rust'</span>]<span class="p">)</span>
<span class="k">let</span> s:quickrun_test_config[<span class="s1">'rust'</span>][<span class="s1">'cmdopt'</span>] <span class="p">=</span> <span class="s1">'--test'</span>

<span class="c">" テスト用の設定を g:quickrun_config に追加</span>
<span class="k">for</span> <span class="k">k</span> <span class="k">in</span> keys<span class="p">(</span>s:quickrun_test_config<span class="p">)</span>
    <span class="k">let</span> <span class="k">g</span>:quickrun_config[<span class="s1">'test:'</span> . <span class="k">k</span>] <span class="p">=</span> s:quickrun_test_config[<span class="k">k</span>]
<span class="k">endfor</span>

</pre></div>
</div>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>uasiさんの<br />50位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>5</kbd>
		<a target="_blank" href="https://qiita.com/uasi/items/d2e68bbe51457fd74307">-[NSTask completionHandler] はメインスレッドで実行されない</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-09-09 18:55:36</center>
	</td>
	<td style="width:200px;">
		@uasi<br />(Increments 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/735/profile-images/1473681692">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Objective-C]</b> <b>[Mac]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p><code>-[NSTask completionHandler]</code> にセットしたブロックはメインでないスレッドで実行される。必要に応じてメインスレッドにディスパッチするとよい。</p>

<div class="code-frame" data-lang="objc"><div class="highlight"><pre><span></span><span class="n">task</span><span class="p">.</span><span class="n">terminationHandler</span> <span class="o">=</span> <span class="o">^</span><span class="p">(</span><span class="n">NSTask</span> <span class="o">*</span><span class="n">task</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">dispatch_async</span><span class="p">(</span><span class="n">dispatch_get_main_queue</span><span class="p">(),</span> <span class="o">^</span><span class="p">{</span>
        <span class="n">doSomething</span><span class="p">();</span>
    <span class="p">});</span>
<span class="p">};</span>
</pre></div></div>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>uasiさんの<br />51位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>5</kbd>
		<a target="_blank" href="https://qiita.com/uasi/items/67603bac7af1c515e7d9">Xcode 用の超お手軽パッケージングスクリプト作った</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2012-08-10 16:32:29</center>
	</td>
	<td style="width:200px;">
		@uasi<br />(Increments 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/735/profile-images/1473681692">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Mac]</b> <b>[Xcode]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>App Store に出さない野良アプリの配布は、 .app を zip で固めて GitHub に置いてご自由にダウンロードしてください、で済ませたい。</p>

<p>済ませたいので <code>releasebuild</code> スクリプトを作った。Xcode プロジェクトのルートディレクトリ直下にスクリプトを置いて <code>./releasebuild</code> か <code>./releasebuild clean build</code> を実行するだけ。コマンド一発でビルドから zip 化まで行う。あとはコミットしてプッシュすればいい。</p>

<div class="code-frame" data-lang="sh">
<div class="code-lang"><span class="bold">releasebuild</span></div>
<div class="highlight"><pre><span></span>
<span class="c1">#!/bin/sh</span>

<span class="nb">set</span> -e
<span class="nb">set</span> -x

<span class="c1"># Build</span>
xcodebuild <span class="nv">$*</span>

<span class="c1"># Package</span>
<span class="nv">name</span><span class="o">=</span><span class="sb">`</span>xcodebuild -showBuildSettings <span class="p">|</span> perl -nE <span class="s1">'say $1 if /^ +FULL_PRODUCT_NAME = (.+)$/;'</span><span class="sb">`</span>
<span class="nv">pdir</span><span class="o">=</span><span class="s2">"</span><span class="nv">$PWD</span><span class="s2">/Products"</span>
mkdir -p <span class="s2">"</span><span class="nv">$pdir</span><span class="s2">"</span>
<span class="o">(</span><span class="nb">cd</span> build/Release<span class="p">;</span> zip -r <span class="s2">"</span><span class="nv">$pdir</span><span class="s2">/</span><span class="nv">$name</span><span class="s2">.zip"</span> <span class="s2">"</span><span class="nv">$name</span><span class="s2">"</span><span class="o">)</span>

</pre></div>
</div>

<p>zip への直リンクは <code>https://raw.github.com/$USER/$REPO/master/$PROJECT/Products/$APP.zip</code> これ。サクッと開発してサクッと配布しましょう。</p>

<p><strong>注意：</strong> 頻繁に更新するようなアプリは素直に GitHub の Downloads セクションにアップロードすべき。 <a href="https://help.github.com/articles/what-is-my-disk-quota" rel="nofollow noopener" target="_blank">GitHub のヘルプ</a>にもそう書かれている。</p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>uasiさんの<br />52位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>5</kbd>
		<a target="_blank" href="https://qiita.com/uasi/items/89e9dd2e53ec205e4bed">$PATH をリセットする</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2012-08-01 15:06:12</center>
	</td>
	<td style="width:200px;">
		@uasi<br />(Increments 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/735/profile-images/1473681692">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Zsh]</b> <b>[Mac]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><div class="code-frame" data-lang="sh"><div class="highlight"><pre><span></span><span class="nb">exec</span> <span class="sb">`</span><span class="nv">PATH</span><span class="o">=</span> /usr/libexec/path_helper -s<span class="sb">`</span>
<span class="nb">source</span> ~/.zshenv
</pre></div></div>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>uasiさんの<br />53位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>5</kbd>
		<a target="_blank" href="https://qiita.com/uasi/items/557425579e40b5251e8b">シェルスクリプトでデバッグマクロっぽいものを実現する</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2012-04-13 12:46:56</center>
	</td>
	<td style="width:200px;">
		@uasi<br />(Increments 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/735/profile-images/1473681692">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[ShellScript]</b> <b>[Zsh]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>コメントにデバッグ用のコードを書いておき、必要なときに文字列置換でコメントアウトする感じ。</p>

<div class="code-frame" data-lang="sh"><div class="highlight"><pre><span></span><span class="c1"># foo.sh</span>

<span class="c1"># デバッグプリント関数</span>
<span class="c1">#DEBUG function warn { echo "debug: $*" }</span>
<span class="c1"># または赤文字のデバッグプリント関数 （Zsh 限定）</span>
<span class="c1">#DEBUG function warn { print -P "%F{red}debug: $*%f" }</span>

<span class="c1"># デバッグモードで実行する部分</span>
<span class="c1">#DEBUG warn "HELLO"</span>
<span class="c1">#DEBUG warn "WORLD"</span>

<span class="c1"># デバッグモードでは実行しない部分</span>
<span class="c1">#DEBUG : &lt;&lt;'EOT'</span>
<span class="nb">echo</span> <span class="s2">"hello"</span>
<span class="nb">echo</span> <span class="s2">"world"</span>
<span class="c1">#DEBUG EOT</span>
</pre></div></div>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span># 普通に実行
$ sh foo.sh
hello
world

# デバッグモードで実行
$ sed 's/#DEBUG //' foo.sh | sh -s
debug: HELLO
debug: WORLD

# デバッグモードで source （Zsh 限定）
$ source =(sed 's/#DEBUG //' foo.sh)
debug: HELLO
debug: WORLD
</pre></div></div>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>uasiさんの<br />54位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>5</kbd>
		<a target="_blank" href="https://qiita.com/uasi/items/bf3c2ad535da35de556d">git リポジトリを置いておくためのユーザを作る</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2011-11-24 10:30:20</center>
	</td>
	<td style="width:200px;">
		@uasi<br />(Increments 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/735/profile-images/1473681692">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Zsh]</b> <b>[Linux]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>sudo groupadd -r git
sudo useradd -r -g git -m -d /home/git -s /bin/sh git
add-your-public-key-to /home/git/.ssh/authorized_keys

# Login via SSH as the user "git" has no password and cannot login as usual
ssh git@localhost
git init --bare --shared repo.git
exit

cd ~/path/to/repo
git push git@localhost:repo.git master
</pre></div></div>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>uasiさんの<br />55位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>3</kbd>
		<a target="_blank" href="https://qiita.com/uasi/items/54af83acdc232ee0f975">文脈に応じて内容が変わるエイリアス</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2012-04-13 02:15:55</center>
	</td>
	<td style="width:200px;">
		@uasi<br />(Increments 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/735/profile-images/1473681692">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Zsh]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>Git リポジトリの中で <code>st</code> したら <code>git status</code> になり、 Mercurial リポジトリの中で <code>st</code> したら <code>hg status</code> になる。そういうエイリアスを定義できるスクリプトを書いた。</p>

<ul>
<li>スクリプト：<a href="https://github.com/uasi/zsh-context-sensitive-alias/blob/master/csa.zsh" rel="nofollow noopener" target="_blank">csa.zsh</a>
</li>
<li>説明：<a href="https://github.com/uasi/zsh-context-sensitive-alias/blob/master/README.markdown" rel="nofollow noopener" target="_blank">README.markdown</a>
</li>
<li>コピペで使える設定ファイル：<a href="https://github.com/uasi/zsh-context-sensitive-alias/blob/master/sample-zshrc.zsh" rel="nofollow noopener" target="_blank">sample-zshrc.zsh</a>
</li>
</ul>

<p>こんな感じで使える：</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ csalias ctx_git st 'git status'
$ csalias ctx_hg st 'hg status'

$ cd git-repo
$ st
# On branch master
nothing to commit (working directory clean)

$ cd hg-repo
$ st
? readme.txt

$ cd not-a-repo
$ st
zsh: command not found: st
</pre></div></div>

<p><a href="http://d.hatena.ne.jp/uasi/20120413/1334248799" rel="nofollow noopener" target="_blank">ブログにも同じこと書いたぞ</a>。</p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>uasiさんの<br />56位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>3</kbd>
		<a target="_blank" href="https://qiita.com/uasi/items/93846fb0a671c0f1cc05">最後にサスペンドしたジョブに Ctrl-Z で復帰する</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2011-11-15 16:41:49</center>
	</td>
	<td style="width:200px;">
		@uasi<br />(Increments 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/735/profile-images/1473681692">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Zsh]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span><span class="k">function</span> run-fglast <span class="o">{</span>
    zle push-input
    <span class="nv">BUFFER</span><span class="o">=</span><span class="s2">"fg %"</span>
    zle accept-line
<span class="o">}</span>

zle -N run-fglast
bindkey <span class="s2">"^z"</span> run-fglast
</pre></div></div>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>uasiさんの<br />57位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>2</kbd>
		<a target="_blank" href="https://qiita.com/uasi/items/cb5c8a3cba6912fe840c">Binding を設定したメニューアイテムに対して validateMenuItem: が呼ばれない</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2014-03-25 16:47:28</center>
	</td>
	<td style="width:200px;">
		@uasi<br />(Increments 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/735/profile-images/1473681692">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Objective-C]</b> <b>[Mac]</b> <b>[Cocoa]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>Cocoa のメニューには NSMenuItemValidation プロトコルというメニュー項目の有効・無効を動的に切り替えられる機構がある。ある <code>NSMenuItem</code> の <code>target</code> に設定されたオブジェクトが <code>-(BOOL)validateMenuItem:(NSMenuItem *)</code> を実装しているとき、このメニューアイテムが表示される直前に、メニューアイテム自身を引数としてこのメソッドが呼ばれる。メソッドが真を返せばメニューアイテムが有効になり、偽を返せば無効になる。</p>

<p>ところが、 Interface Builder でメニューアイテムに binding を設定すると <code>-validateMenuItem:</code> が呼ばれなくなるようだ。そのようなメニューアイテムの有効・無効を切り替えるには binding またはコードで <code>enabled</code> プロパティを操作すればよい。ただし、そのメニューアイテムを含むメニューの <code>autoenablesItems</code> が真ならば、メニューアイテムの <code>enabled</code> にセットした値が上書きされるかもしれないことに注意。</p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>uasiさんの<br />58位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>2</kbd>
		<a target="_blank" href="https://qiita.com/uasi/items/7427113b01d78a2d56fc">nil にセレクタを送ると nil を返す</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2012-09-04 22:49:21</center>
	</td>
	<td style="width:200px;">
		@uasi<br />(Increments 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/735/profile-images/1473681692">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Objective-C]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>忘れがち。</p>

<div class="code-frame" data-lang="objc"><div class="highlight"><pre><span></span><span class="kt">id</span> <span class="n">obj</span> <span class="o">=</span> <span class="nb">nil</span><span class="p">;</span>
<span class="p">[</span><span class="n">obj</span> <span class="n">init</span><span class="p">];</span> <span class="c1">// =&gt; nil</span>
<span class="p">[</span><span class="n">obj</span> <span class="n">nonexistent</span><span class="p">];</span> <span class="c1">// =&gt; nil ("no method found" warning)</span>
<span class="n">obj</span><span class="p">.</span><span class="n">init</span><span class="p">;</span> <span class="c1">// =&gt; nil</span>
<span class="n">obj</span><span class="p">.</span><span class="n">nonexistent</span><span class="p">;</span> <span class="c1">// (compile error)</span>
</pre></div></div>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>uasiさんの<br />59位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>1</kbd>
		<a target="_blank" href="https://qiita.com/uasi/items/b726450bc516cd344e1b">そんなところにセミコロン入ってもいいんだ</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-02-18 15:27:42</center>
	</td>
	<td style="width:200px;">
		@uasi<br />(Increments 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/735/profile-images/1473681692">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Objective-C]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><div class="code-frame" data-lang="objc"><div class="highlight"><pre><span></span><span class="k">@implementation</span> <span class="nc">SomeClass</span>

<span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">someMethod</span><span class="p">;</span> <span class="c1">// ←ここ</span>
<span class="p">{</span>
<span class="p">}</span>

<span class="k">@end</span>
</pre></div></div>

<p>これでもちゃんとコンパイルが通る。</p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>uasiさんの<br />60位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>1</kbd>
		<a target="_blank" href="https://qiita.com/uasi/items/94f3cc759a8d19f04471">JSON の構文の正当性をチェックする</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2012-10-31 15:56:24</center>
	</td>
	<td style="width:200px;">
		@uasi<br />(Increments 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/735/profile-images/1473681692">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[ShellScript]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>パッケージマネージャで <a href="http://lloyd.github.com/yajl/" rel="nofollow noopener" target="_blank">yajl</a> をインストールすると <code>json_verify</code> コマンドがついてくる。このコマンドは標準入力に渡された JSON テキストの構文が正しいかどうかチェックする。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>&gt; echo "[1, 2, 3]" | json_verify
JSON is valid

&gt; echo "[1, 2 3]" | json_verify
parse error: after array element, I expect ',' or ']'
                                        [1, 2 3] 
                     (right here) ------^
JSON is invalid
</pre></div></div>

<p>ただし <code>json_vefify</code> は JSON テキストのトップレベルに object または array 以外の値があっても valid と判定する点に注意されたい（ <a href="http://www.rfc-editor.org/rfc/rfc4627.txt" rel="nofollow noopener" target="_blank">JSON の仕様 （RFC4627）</a>は、トップレベルの値が object または array でなくてはならないと定めている）。<strong>2015年10月追記：</strong> <a href="https://tools.ietf.org/html/rfc7159" rel="nofollow noopener" target="_blank">新しい JSON の仕様（RFC7159）</a>はトップレベルに任意の値を許すようになった。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>&gt; echo '"string"' | json_verify
JSON is valid

&gt; echo 42 | json_verify
JSON is valid
</pre></div></div>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>uasiさんの<br />61位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>1</kbd>
		<a target="_blank" href="https://qiita.com/uasi/items/501b8f73616dea291a9c">Mac で hw.machine を取ると CPU アーキテクチャが返ってくる</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2012-10-24 18:56:44</center>
	</td>
	<td style="width:200px;">
		@uasi<br />(Increments 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/735/profile-images/1473681692">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Mac]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>iPhone の機種名称を取得する方法として <code>sysctlbyname("hw.machine", ...)</code> の値を見るというものがあった（参考：<a href="http://cocoadays.blogspot.jp/2010/08/blog-post_30.html" rel="nofollow noopener" target="_blank">Cocoaの日々: 機種名称を取得する</a>／現在では API が提供されている）。</p>

<p>これを Mac で取得したらモデル名でも取れるかと思ったが <code>x86_64</code> としか返ってこなかった。</p>

<div class="code-frame" data-lang="c"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;stdlib.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;sys/sysctl.h&gt;</span><span class="cp"></span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="n">argv</span><span class="p">[])</span> <span class="p">{</span>
    <span class="kt">size_t</span> <span class="n">size</span><span class="p">;</span>
    <span class="n">sysctlbyname</span><span class="p">(</span><span class="s">"hw.machine"</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">size</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>

    <span class="kt">char</span> <span class="o">*</span><span class="n">answer</span> <span class="o">=</span> <span class="n">malloc</span><span class="p">(</span><span class="n">size</span><span class="p">);</span>
    <span class="n">sysctlbyname</span><span class="p">(</span><span class="s">"hw.machine"</span><span class="p">,</span> <span class="n">answer</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">size</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>

    <span class="n">printf</span><span class="p">(</span><span class="s">"answer = %s</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">answer</span><span class="p">);</span>
    <span class="n">free</span><span class="p">(</span><span class="n">answer</span><span class="p">);</span>

    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div></div>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>uasiさんの<br />62位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>1</kbd>
		<a target="_blank" href="https://qiita.com/uasi/items/3e745972bd72e9fbc2c3">末尾行を取り出す</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2012-09-12 12:36:24</center>
	</td>
	<td style="width:200px;">
		@uasi<br />(Increments 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/735/profile-images/1473681692">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Ruby]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p><a href="http://qiita.com/items/1443c8250687aba0ce69">先頭行を取り出す</a>にインスパイアされた。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>string = "abc\ndef\nghi"
tail = string[/.*\Z/] # =&gt; "ghi"

string = "abc\ndef\nghi\n"
tail = string[/.*\Z/] # =&gt; "ghi"

string = "abc\ndef\n\n"
tail = string[/.*\Z/] # =&gt; ""
</pre></div></div>

<p>改行コードが <code>\r\n</code> の場合、 <code>\r</code> は取り出した文字列に残る。 <code>String#strip</code> すればよし。</p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>uasiさんの<br />63位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>1</kbd>
		<a target="_blank" href="https://qiita.com/uasi/items/ba2ee2a6dae3b26ff85e">Perl 6 で逆ポ</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2012-08-30 04:32:52</center>
	</td>
	<td style="width:200px;">
		@uasi<br />(Increments 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/735/profile-images/1473681692">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Perl]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p><a href="http://qiita.com/items/da7960c9ac1a15882ce2" class="autolink">http://qiita.com/items/da7960c9ac1a15882ce2</a> に触発されて Perl 6 で逆ポーランド記法の計算機を書いた。オーソドックスに grammar を使っている。</p>

<div class="code-frame" data-lang="perl"><div class="highlight"><pre><span></span><span class="k">use</span> <span class="n">v6</span><span class="p">;</span>

<span class="n">grammar</span> <span class="n">RPN</span> <span class="p">{</span>
   <span class="n">rule</span> <span class="n">TOP</span> <span class="p">{</span> <span class="o">^</span> <span class="p">[</span> <span class="sr">&lt;num&gt;</span> <span class="o">|</span> <span class="sr">&lt;op&gt;</span> <span class="p">]</span><span class="o">+</span> <span class="nv">$</span> <span class="err">}</span>
   <span class="nv">token</span> <span class="n">num</span> <span class="p">{</span> <span class="sr">&lt;[\d.]&gt;</span><span class="o">+</span> <span class="p">}</span>
   <span class="n">token</span> <span class="n">op</span> <span class="p">{</span> <span class="o">&lt;</span> <span class="o">+</span> <span class="o">-</span> <span class="o">*</span> <span class="o">/</span> <span class="o">&gt;</span> <span class="p">}</span>
<span class="p">}</span>

<span class="k">sub </span><span class="nf">rpn</span><span class="p">($rpn) {</span>
    <span class="n">RPN</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="nv">$rpn</span><span class="p">,</span> <span class="n">actions</span> <span class="o">=&gt;</span> <span class="n">class</span> <span class="p">{</span>
        <span class="k">my</span> <span class="nv">@s</span><span class="p">;</span>
        <span class="n">method</span> <span class="n">TOP</span><span class="p">(</span><span class="vg">$/</span><span class="p">)</span> <span class="p">{</span> <span class="n">make</span> <span class="nv">@s</span><span class="o">.</span><span class="nb">pop</span> <span class="p">}</span>
        <span class="n">method</span> <span class="n">num</span><span class="p">(</span><span class="vg">$/</span><span class="p">)</span> <span class="p">{</span> <span class="nv">@s</span><span class="o">.</span><span class="nb">push</span><span class="p">:</span> <span class="o">+</span><span class="vg">$/</span> <span class="p">}</span>
        <span class="n">method</span> <span class="n">op</span><span class="p">(</span><span class="vg">$/</span><span class="p">)</span> <span class="p">{</span> <span class="nv">@s</span><span class="o">.</span><span class="nb">push</span><span class="p">:</span> <span class="o">+&amp;::</span><span class="p">(</span><span class="s">"infix:&lt;$/&gt;"</span><span class="p">)(</span><span class="o">|</span><span class="p">[</span><span class="nv">@s</span><span class="o">.</span><span class="nb">pop</span><span class="p">,</span> <span class="nv">@s</span><span class="o">.</span><span class="nb">pop</span><span class="p">]</span><span class="o">.</span><span class="nb">reverse</span><span class="p">)</span> <span class="p">}</span>
    <span class="p">})</span><span class="o">.</span><span class="n">ast</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">my</span> <span class="nv">$s</span> <span class="o">=</span> <span class="s">"</span>
<span class="s">1 -&gt; 1</span>
<span class="s">1 2 + -&gt; 3</span>
<span class="s">3 1 - -&gt; 2</span>
<span class="s">10 2 / -&gt; 5</span>
<span class="s">2 5 8 + + -&gt; 15</span>
<span class="s">2 5 8 + * -&gt; 26</span>
<span class="s">2 5 8 * + -&gt; 42</span>
<span class="s">1 2 + 3 4 + * -&gt; 21</span>
<span class="s">2 3 * 4 5 * + -&gt; 26</span>
<span class="s">"</span><span class="p">;</span>

<span class="k">for</span> <span class="nv">$s</span><span class="o">.</span><span class="n">trim</span><span class="o">.</span><span class="n">lines</span> <span class="p">{</span>
    <span class="nv">$_</span> <span class="o">~~</span> <span class="sr">/(.+) ' -&gt; ' (.+)/</span><span class="p">;</span>
    <span class="k">my</span> <span class="nv">$r</span> <span class="o">=</span> <span class="n">rpn</span><span class="p">(</span><span class="o">~</span><span class="nv">$0</span><span class="p">);</span>
    <span class="n">say</span> <span class="p">(</span><span class="nv">$r</span> <span class="o">==</span> <span class="nv">$1</span> <span class="p">??</span> <span class="s">'ok'</span> <span class="o">!!</span> <span class="s">'fail'</span><span class="p">)</span> <span class="o">~</span> <span class="s">": $0 -&gt; $r"</span><span class="p">;</span>
<span class="p">}</span>

</pre></div></div>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>uasiさんの<br />64位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>1</kbd>
		<a target="_blank" href="https://qiita.com/uasi/items/6ef55aa1a55a2171de24">コマンドラインで pastebin にプレーンテキストを投稿/取得</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2011-11-25 15:19:15</center>
	</td>
	<td style="width:200px;">
		@uasi<br />(Increments 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/735/profile-images/1473681692">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Bash]</b> <b>[Zsh]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p><a href="http://sprunge.us/" class="autolink" rel="nofollow noopener" target="_blank">http://sprunge.us/</a> を使うと便利。</p>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><span></span><span class="k">function</span> netcopy <span class="o">{</span>
    curl -F <span class="s1">'sprunge=&lt;-'</span> http://sprunge.us/
<span class="o">}</span>

<span class="k">function</span> netpaste <span class="o">{</span>
    curl http://sprunge.us/<span class="nv">$1</span>
<span class="o">}</span>
</pre></div></div>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>here$ netcopy &lt; hoge.rb
http://sprunge.us/xxx

here$ ssh there
there$ netpaste xxx &gt; hoge.rb
</pre></div></div>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>uasiさんの<br />65位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>1</kbd>
		<a target="_blank" href="https://qiita.com/uasi/items/c55864e54b6ff5bdda95">どのディストリビューションか知るには</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2011-11-23 00:49:17</center>
	</td>
	<td style="width:200px;">
		@uasi<br />(Increments 所属)<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/735/profile-images/1473681692">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Linux]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>/etc/*-release を見る。</p>
</div>
	</td>
</tr>
</table>
<br />
	</body>
</html>
