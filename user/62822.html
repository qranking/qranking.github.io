<html>
	<head><!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-110075493-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-110075493-1');
</script>
<!-- Google AdSense -->
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-6168511236629369",
    enable_page_level_ads: true
  });
</script>

		<meta charset="UTF-8" />
		<title>Qiita Ranking (okamu_)</title>
		<link rel="stylesheet" type="text/css" href="../qranking.css">
	</head>
	<body>
<div class="headerContainer">
<h1>Qiitaいいね数ランキング (okamu_ さんの投稿分)</h1>
</div><!--class="headerContainer"-->
<p><a href="#" onclick="javascript:window.history.back(-1);return false;">[戻る]</a></p>
<p><i><img width="16" height="16" src="../thumb-up-120px.png" /></i>が同じ値の場合は投稿日時の新しいものが上位としています。</p>
<p><i><img width="16" height="16" src="../thumb-up-120px.png" /></i>がついていない記事は表示していません。</p>
<table border="1">
<tr>
	<td rowspan="3"><center>okamu_さんの<br />1位</center></td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>245</kbd>
		<a target="_blank" href="https://qiita.com/okamu_/items/d52a6900311ad9073628">(翻訳)【GitHub公式】Gitコマンドチートシート</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2017-10-25 08:36:10</center>
	</td>
	<td style="width:200px;">
		@okamu_<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/62822/profile-images/1491391263">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Git]</b> <b>[GitHub]</b> <b>[翻訳]</b> <b>[新人プログラマ応援]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>githubが公式にgitコマンドのチートシートというのを出していたので、それを日本語に翻訳しました。</p>

<p><a href="https://camo.qiitausercontent.com/0850e8916c4fb2393681eef1757ed618221b513e/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f35383839623036372d316261662d623235382d626638302d3534656231656565313935332e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/0850e8916c4fb2393681eef1757ed618221b513e/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f35383839623036372d316261662d623235382d626638302d3534656231656565313935332e706e67" alt="image.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/62822/5889b067-1baf-b258-bf80-54eb1eee1953.png"></a></p>

<p>gitとはオープンソースの分散バージョン管理システムで、ラップトップやデスクトップ上での活動を促進します。<br>
このチートシートは簡単なGitのコマンドラインを参照できるようになっています。</p>

<h2>
<span id="gitをインストールする" class="fragment"></span><a href="#git%E3%82%92%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>GITをインストールする</h2>

<p>GitHubは、最も一般的なリポジトリアクション用のグラフィカルユーザーインターフェイスを含むデスクトップクライアントと、高度なシナリオ用のGitコマンドラインエディションが用意されています。</p>

<h3>
<span id="github-for-windows" class="fragment"></span><a href="#github-for-windows"><i class="fa fa-link"></i></a>GitHub for Windows</h3>

<p><a href="https://windows.github.com" class="autolink" rel="nofollow noopener" target="_blank">https://windows.github.com</a> </p>

<h3>
<span id="mac用github" class="fragment"></span><a href="#mac%E7%94%A8github"><i class="fa fa-link"></i></a>Mac用GitHub</h3>

<p><a href="https://mac.github.com" class="autolink" rel="nofollow noopener" target="_blank">https://mac.github.com</a></p>

<p>Linux用GitディストリビューションPOSIXシステムは公式のGit SCM webサイトで利用可能です</p>

<p>Git for All Platforms<br>
<a href="http://git-scm.com" class="autolink" rel="nofollow noopener" target="_blank">http://git-scm.com</a></p>

<h2>
<span id="gitの初期設定" class="fragment"></span><a href="#git%E3%81%AE%E5%88%9D%E6%9C%9F%E8%A8%AD%E5%AE%9A"><i class="fa fa-link"></i></a>gitの初期設定</h2>

<p>ローカルリポジトリのユーザ情報を設定します</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ git config　--global user.name "[name]"
コミットトランザクションに付ける名前を設定します。

$ git config --global user.email "[email address]"
コミットトランザクションに添付したい電子メールを設定します。

$ git config --global color.ui auto
コマンドライン出力の時にいい感じで色付けします。
</pre></div></div>

<h2>
<span id="リポジトリを作る" class="fragment"></span><a href="#%E3%83%AA%E3%83%9D%E3%82%B8%E3%83%88%E3%83%AA%E3%82%92%E4%BD%9C%E3%82%8B"><i class="fa fa-link"></i></a>リポジトリを作る</h2>

<p>新しいリポジトリを作成するか、既存のURLからリポジトリを取得します。 </p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ git init "[project-name]"
指定された名前を持つ新しいローカルリポジトリを作成する

$ git clone "[url]"
projectとそのバージョン履歴全体をダウンロードする
</pre></div></div>

<h2>
<span id="コミットを作成する" class="fragment"></span><a href="#%E3%82%B3%E3%83%9F%E3%83%83%E3%83%88%E3%82%92%E4%BD%9C%E6%88%90%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>コミットを作成する</h2>

<p>編集内容を確認してコミットします。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ git status
コミットするすべての新規または変更されたファイルを一覧表示する

$ git diff
まだステージングされていないファイルの違いを表示する

$ git add "[file]"
バージョン管理のためにファイルをスナップショットする(ステージにあげる)

$ git diff --staged 
ステージとの差分を表示する

$ git reset "[file]"
ファイルをアンステージしますが、内容は保存します

$ git commit -m "[コミットメッセージ]"
ステージに上がっているファイルをコミットメッセージとともに記録します
</pre></div></div>

<h2>
<span id="ブランチ操作" class="fragment"></span><a href="#%E3%83%96%E3%83%A9%E3%83%B3%E3%83%81%E6%93%8D%E4%BD%9C"><i class="fa fa-link"></i></a>ブランチ操作</h2>

<p>一連のコミットをブランチとして切り分ける事ができます</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ git branch "[branch-name]"
新しいブランチを作成する

$ git checkout "[branch-name]"
指定されたブランチに切り替えて作業ディレクトリを更新する 

$ git merge "[branch]"
指定されたブランチを結合し、作業ディレクトリを更新します。

$ git branch -d "[branch-name]"
指定されたブランチを削除します。

</pre></div></div>

<h2>
<span id="ファイルのリファクタリング" class="fragment"></span><a href="#%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AE%E3%83%AA%E3%83%95%E3%82%A1%E3%82%AF%E3%82%BF%E3%83%AA%E3%83%B3%E3%82%B0"><i class="fa fa-link"></i></a>ファイルのリファクタリング</h2>

<p>バージョン管理されたファイルの再配置と削除</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ git rm "[file]"
作業ディレクトリからファイルを削除し、削除をステージングします

$ git rm --cached "[file]"
バージョン管理からファイルを削除しますが、ファイルをローカルに保存します

$ git mv "[file-original]" "[file-renamed]"
ファイル名を変更し、コミットの準備をします
</pre></div></div>

<h2>
<span id="トラッキング" class="fragment"></span><a href="#%E3%83%88%E3%83%A9%E3%83%83%E3%82%AD%E3%83%B3%E3%82%B0"><i class="fa fa-link"></i></a>トラッキング</h2>

<p>一時ファイルとパスを除外する</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>.gitignoreで指定されたパターンに一致するファイルはgit管理しないようになります

*.log
build/
temp-*

$ git ls-files --other --ignored --exclude-standard
このプロジェクトのすべてで、無視されたファイルを一覧を表示します
</pre></div></div>

<h2>
<span id="一時的に作業ファイルを保存する" class="fragment"></span><a href="#%E4%B8%80%E6%99%82%E7%9A%84%E3%81%AB%E4%BD%9C%E6%A5%AD%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%82%92%E4%BF%9D%E5%AD%98%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>一時的に作業ファイルを保存する</h2>

<p>不完全な変更を保存したり復元できます</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ git stash
変更されたすべてのファイルを一時的に保存する

$ git stash pop
最新の一時保存したファイルを復元する

$ git stash list 
一時保存したすべてのファイル一覧を表示する

$ git stash drop
最後に一時保存したファイルを削除する
</pre></div></div>

<h2>
<span id="gitの履歴" class="fragment"></span><a href="#git%E3%81%AE%E5%B1%A5%E6%AD%B4"><i class="fa fa-link"></i></a>gitの履歴</h2>

<p>プロジェクトファイルの履歴を確認します</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ git log
現在のgitの履歴を一覧表示する

$ git log --follow "[file]"
ファイルのバージョン履歴をリネームも含めて表示する



$ git diff "[first-branch]...[second-branch]"
2つのブランチ間の差分を表示します

$ git show "[commit id]"
指定されたコミットのメタデータとコンテンツの変更を出力します。
</pre></div></div>

<h2>
<span id="やり直し" class="fragment"></span><a href="#%E3%82%84%E3%82%8A%E7%9B%B4%E3%81%97"><i class="fa fa-link"></i></a>やり直し</h2>

<p>間違ったcommit履歴へ戻る</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span># git reset "[commit id]" 
[commit]の後にすべてのコミットを元に戻し、ローカルに変更を保存します

# git reset --hard "[commit id]"
すべての履歴と変更を破棄します
</pre></div></div>

<h2>
<span id="変更をリモートリポジトリと同期する" class="fragment"></span><a href="#%E5%A4%89%E6%9B%B4%E3%82%92%E3%83%AA%E3%83%A2%E3%83%BC%E3%83%88%E3%83%AA%E3%83%9D%E3%82%B8%E3%83%88%E3%83%AA%E3%81%A8%E5%90%8C%E6%9C%9F%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>変更をリモートリポジトリと同期する</h2>

<p>変更をリモートリポジトリから取得したり、リモートにあげたりする</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ git fetch "[origin]"
リモートリポジトリからすべての履歴をダウンロードする

$ git merge "[origin]"/"[branch]"
リモートリポジトリのブランチを現在のローカルブランチに結合する

$ git push "[origin]" "[branch]"
ブランチをすべてアップロードするローカルブランチはGitHubにコミットする

$ git pull
リモートリポジトリの履歴をダウンロードし、変更を組み込む
</pre></div></div>

<h2>
<span id="githubトレーニング" class="fragment"></span><a href="#github%E3%83%88%E3%83%AC%E3%83%BC%E3%83%8B%E3%83%B3%E3%82%B0"><i class="fa fa-link"></i></a>GitHubトレーニング</h2>

<p>GitHubとGitを使用する方法の詳細を学ぶトレーニングチームにメールを送信するか、イベントスケジュールとプライベートクラスの可用性を学ぶためにWebサイトを訪れてください</p>

<p>mail: <a href="mailto:training@github.com" class="autolink">training@github.com</a><br>
web:  training.github.com</p>

<h2>
<span id="まとめ" class="fragment"></span><a href="#%E3%81%BE%E3%81%A8%E3%82%81"><i class="fa fa-link"></i></a>まとめ</h2>

<p>初めて翻訳系の記事を書きました。<br>
これだけの量で結構時間がかかってしまいました。</p>

<p>個人的に知らなかったのが <code>git ls-files --other --ignored --exclude-standard</code> ぐらいでした！</p>

<p>今後の勉強の為にもまた翻訳系チャレンジします</p>

<h2>
<span id="参考先" class="fragment"></span><a href="#%E5%8F%82%E8%80%83%E5%85%88"><i class="fa fa-link"></i></a>参考先</h2>

<ul>
<li><a href="https://services.github.com/on-demand/downloads/github-git-cheat-sheet.pdf" rel="nofollow noopener" target="_blank">github-git-cheat-sheet</a></li>
</ul>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>okamu_さんの<br />2位</center></td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>54</kbd>
		<a target="_blank" href="https://qiita.com/okamu_/items/d9ee9cdc1b5005a0cf1c">vim使ってるのにvimium使わないなんてもったいない！</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2017-10-26 08:38:27</center>
	</td>
	<td style="width:200px;">
		@okamu_<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/62822/profile-images/1491391263">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Vim]</b> <b>[Mac]</b> <b>[iTerm2]</b> <b>[便利]</b> <b>[1000チャレンジ]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;">
<h2>
<span id="vimiumとは" class="fragment"></span><a href="#vimium%E3%81%A8%E3%81%AF"><i class="fa fa-link"></i></a>vimiumとは</h2>

<p><a href="https://github.com/philc/vimium" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/philc/vimium</a></p>

<p>vimキーバインドでGoogle Chromeやfirefoxを使えるようにできるプラグインです<br>
カスタムすれば、<strong>マウス操作なし</strong>でウェブブラウジングする事が可能です！</p>

<h2>
<span id="vimiumができること" class="fragment"></span><a href="#vimium%E3%81%8C%E3%81%A7%E3%81%8D%E3%82%8B%E3%81%93%E3%81%A8"><i class="fa fa-link"></i></a>vimiumができること</h2>

<h3>
<span id="jとkで上下スクロール" class="fragment"></span><a href="#j%E3%81%A8k%E3%81%A7%E4%B8%8A%E4%B8%8B%E3%82%B9%E3%82%AF%E3%83%AD%E3%83%BC%E3%83%AB"><i class="fa fa-link"></i></a><strong>j</strong>と<strong>k</strong>で上下スクロール</h3>

<p><a href="https://camo.qiitausercontent.com/79ebc003cf78fa3563d80cfb7ca01db608a4d80e/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f35666233616361612d623266372d666562622d643335332d3334643866623862646461652e676966" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/79ebc003cf78fa3563d80cfb7ca01db608a4d80e/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f35666233616361612d623266372d666562622d643335332d3334643866623862646461652e676966" alt="jkjkjk720.gif" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/62822/5fb3acaa-b2f7-febb-d353-34d8fb8bddae.gif"></a></p>

<h3>
<span id="fやiでリンクを表示して遷移する" class="fragment"></span><a href="#f%E3%82%84i%E3%81%A7%E3%83%AA%E3%83%B3%E3%82%AF%E3%82%92%E8%A1%A8%E7%A4%BA%E3%81%97%E3%81%A6%E9%81%B7%E7%A7%BB%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a><strong>f</strong>や<strong>i</strong>でリンクを表示して遷移する</h3>

<p><a href="https://camo.qiitausercontent.com/6cc62ca1bfe69f09e54ffc13cc1cc1f337daafe3/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f38343634666633342d633135322d613731382d343365362d3137643739333734393564612e676966" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/6cc62ca1bfe69f09e54ffc13cc1cc1f337daafe3/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f38343634666633342d633135322d613731382d343365362d3137643739333734393564612e676966" alt="link720.gif" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/62822/8464ff34-c152-a718-43e6-17d7937495da.gif"></a></p>

<h3>
<span id="できる事一覧基本" class="fragment"></span><a href="#%E3%81%A7%E3%81%8D%E3%82%8B%E4%BA%8B%E4%B8%80%E8%A6%A7%E5%9F%BA%E6%9C%AC"><i class="fa fa-link"></i></a>できる事一覧(基本)</h3>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>?       使い方を説明してくれる
h       左へスクロール
j       下へスクロール
k       上へスクロール
l       右へスクロール
gg      一番上へスクロール
G       一眼下へスクロール
d       半ページ下へスクロール
u       半ページ上へスクロール
f       現在のタブでリンクを開く
F       新しいタブでリンクを開く
r       更新
gs      view sourceを表示
yy      URLをコピーする
yf      リンク作のURLをコピーする
...その他いろいろ
</pre></div></div>

<h2>
<span id="カスタムするとさらに便利に" class="fragment"></span><a href="#%E3%82%AB%E3%82%B9%E3%82%BF%E3%83%A0%E3%81%99%E3%82%8B%E3%81%A8%E3%81%95%E3%82%89%E3%81%AB%E4%BE%BF%E5%88%A9%E3%81%AB"><i class="fa fa-link"></i></a>カスタムするとさらに便利に！！</h2>

<h3>
<span id="l右スクロールとh左スクロールはいらないので戻ると進むに書き換える" class="fragment"></span><a href="#l%E5%8F%B3%E3%82%B9%E3%82%AF%E3%83%AD%E3%83%BC%E3%83%AB%E3%81%A8h%E5%B7%A6%E3%82%B9%E3%82%AF%E3%83%AD%E3%83%BC%E3%83%AB%E3%81%AF%E3%81%84%E3%82%89%E3%81%AA%E3%81%84%E3%81%AE%E3%81%A7%E6%88%BB%E3%82%8B%E3%81%A8%E9%80%B2%E3%82%80%E3%81%AB%E6%9B%B8%E3%81%8D%E6%8F%9B%E3%81%88%E3%82%8B"><i class="fa fa-link"></i></a><code>l</code>右スクロールと<code>h</code>左スクロールはいらないので、戻ると進むに書き換える</h3>

<p>- chromeの右上にvimiumボタンのoptionsをクリックする</p>

<p><a href="https://camo.qiitausercontent.com/4bbbd86ea2710c64999927afa7f1edef0f922173/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f64626465353636372d393437372d393933652d363337652d6230613339373335633066642e706e67" target="_blank" rel="nofollow noopener"><img width="512" alt="スクリーンショット 2017-10-25 21.52.34.png" src="https://camo.qiitausercontent.com/4bbbd86ea2710c64999927afa7f1edef0f922173/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f64626465353636372d393437372d393933652d363337652d6230613339373335633066642e706e67" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/62822/dbde5667-9477-993e-637e-b0a39735c0fd.png"></a></p>

<ul>
<li>custom key mappingsへカスタムしたい内容を入力する</li>
<li>ペーストするとこんな感じになります。</li>
</ul>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span># 戻る
map h goBack
# 進む
map l goForward

# その他おすすめオプションもどうぞ
map H previousTab
map L nextTab
map i LinkHints.activateMode
map I LinkHints.activateModeToOpenInNewTab
</pre></div></div>

<p><a href="https://camo.qiitausercontent.com/01126bd1ddee1d05f48bf6ab99c183cb2b707c18/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f31313837646338302d373833652d633834342d646336332d3862623032653366343739352e706e67" target="_blank" rel="nofollow noopener"><img width="996" alt="スクリーンショット 2017-10-25 21.41.53.png" src="https://camo.qiitausercontent.com/01126bd1ddee1d05f48bf6ab99c183cb2b707c18/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f31313837646338302d373833652d633834342d646336332d3862623032653366343739352e706e67" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/62822/1187dc80-783e-c844-dc63-8bb02e3f4795.png"></a></p>

<ul>
<li>最後に<code>save</code>を押すと反映されます！！</li>
</ul>

<h3>
<span id="戻ると進む" class="fragment"></span><a href="#%E6%88%BB%E3%82%8B%E3%81%A8%E9%80%B2%E3%82%80"><i class="fa fa-link"></i></a>戻ると進む</h3>

<p><a href="https://camo.qiitausercontent.com/38d18423e4152d637607e4f948acc413b8b25a72/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f63343737633464312d666138332d343430332d366136622d6532396539623035346333342e676966" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/38d18423e4152d637607e4f948acc413b8b25a72/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f63343737633464312d666138332d343430332d366136622d6532396539623035346333342e676966" alt="backback720.gif" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/62822/c477c4d1-fa83-4403-6a6b-e29e9b054c34.gif"></a></p>

<p>これだけでもめっちゃ便利です！！！</p>

<h2>
<span id="インストール方法" class="fragment"></span><a href="#%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB%E6%96%B9%E6%B3%95"><i class="fa fa-link"></i></a>インストール方法</h2>

<ul>
<li>ここからchrome拡張をインストールします</li>
<li><a href="https://chrome.google.com/webstore/detail/vimium/dbepggeogbaibhgnhhndojpepiihcmeb" class="autolink" rel="nofollow noopener" target="_blank">https://chrome.google.com/webstore/detail/vimium/dbepggeogbaibhgnhhndojpepiihcmeb</a></li>
</ul>

<h2>
<span id="まとめ" class="fragment"></span><a href="#%E3%81%BE%E3%81%A8%E3%82%81"><i class="fa fa-link"></i></a>まとめ</h2>

<ul>
<li>今の私には欠かせないChrome拡張です！！</li>
<li>firefoxのもありますが、動きが少々鈍い？のでchromeでの使用がおすすめです！！</li>
</ul>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>okamu_さんの<br />3位</center></td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>47</kbd>
		<a target="_blank" href="https://qiita.com/okamu_/items/a5086d2d5ba405f35acb">iTerm2のHotkeyを使わないなんてもったいない！！</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2017-10-03 07:59:10</center>
	</td>
	<td style="width:200px;">
		@okamu_<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/62822/profile-images/1491391263">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Mac]</b> <b>[iTerm2]</b> <b>[ショートカット]</b> <b>[仕事効率化]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;">
<h1>
<span id="iterm2のhotkeyを使わないなんてもったいない" class="fragment"></span><a href="#iterm2%E3%81%AEhotkey%E3%82%92%E4%BD%BF%E3%82%8F%E3%81%AA%E3%81%84%E3%81%AA%E3%82%93%E3%81%A6%E3%82%82%E3%81%A3%E3%81%9F%E3%81%84%E3%81%AA%E3%81%84"><i class="fa fa-link"></i></a>iTerm2のHotkeyを使わないなんてもったいない！！</h1>

<p>iTerm2を使っている人は結構多いと思うのですが、意外とHotkeyを使っている人が少ない気がしたので、書いておきます。</p>

<p><a href="https://camo.qiitausercontent.com/f10c1f0e046e3bf31e1d0c92754c2ac3b46dc153/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f34626166353764632d666337662d386134312d366232612d6162636139313033333565352e676966" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/f10c1f0e046e3bf31e1d0c92754c2ac3b46dc153/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f34626166353764632d666337662d386134312d366232612d6162636139313033333565352e676966" alt="iterm.gif" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/62822/4baf57dc-fc7f-8a41-6b2a-abca910335e5.gif"></a></p>

<h2>
<span id="hotkeyを設定するメリット" class="fragment"></span><a href="#hotkey%E3%82%92%E8%A8%AD%E5%AE%9A%E3%81%99%E3%82%8B%E3%83%A1%E3%83%AA%E3%83%83%E3%83%88"><i class="fa fa-link"></i></a>HotKeyを設定するメリット</h2>

<ul>
<li><strong>早い</strong></li>
</ul>

<p>Hotkeyの設定をすると、複数のデスクトップを開いていてもこのように上からターミナルが降りてきてすぐにコマンドが叩けるようになります。</p>

<ul>
<li><strong>写経が楽</strong></li>
</ul>

<p>若干透明度を設定しておくことで、ターミナル越しにブラウザを見ながらコマンドを打つこともできて大変便利です。コピーペーストする際の無駄なトラックパッド操作が省けます</p>

<ul>
<li><strong>かっこいい</strong></li>
</ul>

<p>にょろーん！っといきなり黒い画面が降ってくると、親戚一同の前ではあなたはヒーローになります。</p>

<h2>
<span id="設定方法" class="fragment"></span><a href="#%E8%A8%AD%E5%AE%9A%E6%96%B9%E6%B3%95"><i class="fa fa-link"></i></a>設定方法</h2>

<h3>
<span id="hotkeyを有効にする" class="fragment"></span><a href="#hotkey%E3%82%92%E6%9C%89%E5%8A%B9%E3%81%AB%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>Hotkeyを有効にする</h3>

<ul>
<li>iTerm2の設定に、 <code>keys</code> -&gt; <code>Create a Dedicated Hotkey Window...</code> というのがあるのでそれを押します。</li>
</ul>

<p><a href="https://camo.qiitausercontent.com/59468fcc65c75fbc510889d9a84df194b6e41abc/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f34633438626437342d343531312d383034302d623932332d3736616461633930396538352e706e67" target="_blank" rel="nofollow noopener"><img width="956" alt="Screen Shot 2017-10-03 at 0.23.27.png" src="https://camo.qiitausercontent.com/59468fcc65c75fbc510889d9a84df194b6e41abc/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f34633438626437342d343531312d383034302d623932332d3736616461633930396538352e706e67" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/62822/4c48bd74-4511-8040-b923-76adac909e85.png"></a></p>

<ul>
<li>ここでHotkeyを設定するわけですが、<strong>私のおすすめは <code>Double-Tap Key</code> をControlにすることです</strong>

<ul>
<li>これにより、Controlを２回押すとどこでも画面が舞い降りてきます。(また、英字キーボードであればCaps lockをControlに変えているので左手小指の運動で一発です。)</li>
<li>もちろん好きなKeyを設定してもかまいません。その時はHotkeyで設定してください。</li>
</ul>
</li>
</ul>

<p><a href="https://camo.qiitausercontent.com/4e66b8de821dbbdbdd03fffb14ec57bfcee50b52/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f31323434333863362d323566392d343566342d393736332d3039376334363739316566652e706e67" target="_blank" rel="nofollow noopener"><img width="575" alt="Screen Shot 2017-10-03 at 0.24.23.png" src="https://camo.qiitausercontent.com/4e66b8de821dbbdbdd03fffb14ec57bfcee50b52/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f31323434333863362d323566392d343566342d393736332d3039376334363739316566652e706e67" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/62822/124438c6-25f9-45f4-9763-097c46791efe.png"></a></p>

<h3>
<span id="default-windowで開かないようにする" class="fragment"></span><a href="#default-window%E3%81%A7%E9%96%8B%E3%81%8B%E3%81%AA%E3%81%84%E3%82%88%E3%81%86%E3%81%AB%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>Default windowで開かないようにする</h3>

<ul>
<li>Hotkeyの設定をしてもやもやすることが、デフォルトのウインドウとHotkeyのウインドウが混在してしまう問題です。</li>
<li>この事態を避けるため、<code>Only Restore Hotkey Window</code> に変えます。そうすることで、Hotkeyのみでウインドウが起動するようになります。</li>
</ul>

<p><a href="https://camo.qiitausercontent.com/7cb31c401ca64d35a994b2e0b54edf6230bfdfcd/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f66376461386434652d396438392d326634332d633639392d6430343562333564656633642e706e67" target="_blank" rel="nofollow noopener"><img width="799" alt="Screen Shot 2017-10-03 at 0.23.14.png" src="https://camo.qiitausercontent.com/7cb31c401ca64d35a994b2e0b54edf6230bfdfcd/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f66376461386434652d396438392d326634332d633639392d6430343562333564656633642e706e67" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/62822/f7da8d4e-9d89-2f43-c699-d045b35def3d.png"></a></p>

<h3>
<span id="透明度と幅" class="fragment"></span><a href="#%E9%80%8F%E6%98%8E%E5%BA%A6%E3%81%A8%E5%B9%85"><i class="fa fa-link"></i></a>透明度と幅</h3>

<ul>
<li>profilesタブに Hotkey Windowが追加されていると思いますが、そこのWindowの設定で透明度やStyleを設定することをおすすめします。</li>
</ul>

<p><a href="https://camo.qiitausercontent.com/47223c89ac4e5851ba6a99f7ca6d1bfdff59bf6e/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f32616430336330632d616461372d653163332d666263362d6330323863386261613038362e706e67" target="_blank" rel="nofollow noopener"><img width="920" alt="Screen Shot 2017-10-03 at 0.24.44.png" src="https://camo.qiitausercontent.com/47223c89ac4e5851ba6a99f7ca6d1bfdff59bf6e/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f32616430336330632d616461372d653163332d666263362d6330323863386261613038362e706e67" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/62822/2ad03c0c-ada7-e1c3-fbc6-c028c8baa086.png"></a></p>

<h2>
<span id="設定するとこうなる" class="fragment"></span><a href="#%E8%A8%AD%E5%AE%9A%E3%81%99%E3%82%8B%E3%81%A8%E3%81%93%E3%81%86%E3%81%AA%E3%82%8B"><i class="fa fa-link"></i></a>設定するとこうなる</h2>

<ul>
<li>Control + Control でターミナルが降ってきます。</li>
</ul>

<p><a href="https://camo.qiitausercontent.com/f10c1f0e046e3bf31e1d0c92754c2ac3b46dc153/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f34626166353764632d666337662d386134312d366232612d6162636139313033333565352e676966" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/f10c1f0e046e3bf31e1d0c92754c2ac3b46dc153/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f34626166353764632d666337662d386134312d366232612d6162636139313033333565352e676966" alt="iterm.gif" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/62822/4baf57dc-fc7f-8a41-6b2a-abca910335e5.gif"></a></p>

<h2>
<span id="まとめ" class="fragment"></span><a href="#%E3%81%BE%E3%81%A8%E3%82%81"><i class="fa fa-link"></i></a>まとめ</h2>

<ul>
<li>なんとまあ、ターミナルへの入力が5000兆円早くなったではありませんか！！</li>
<li>その他おすすめの設定などあれば書いていこうと思いますので今日はこのへんでお疲れ様でした。</li>
</ul>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>okamu_さんの<br />4位</center></td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>45</kbd>
		<a target="_blank" href="https://qiita.com/okamu_/items/7f193783300a71e62370">iPhone7でもiPhoneXを感じられるアプリつくった</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2017-10-27 09:39:50</center>
	</td>
	<td style="width:200px;">
		@okamu_<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/62822/profile-images/1491391263">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Xcode]</b> <b>[iOS]</b> <b>[iPhoneX]</b> <b>[1000チャレンジ]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;">
<h2>
<span id="今日はiphonexの予約日ですね" class="fragment"></span><a href="#%E4%BB%8A%E6%97%A5%E3%81%AFiphonex%E3%81%AE%E4%BA%88%E7%B4%84%E6%97%A5%E3%81%A7%E3%81%99%E3%81%AD"><i class="fa fa-link"></i></a>今日はiPhoneXの予約日ですね</h2>

<ul>
<li>いかがお過ごしでしょうか</li>
<li>予約しようとしている人、iPhone8で十分だ！などいろいろあるかと思います</li>
</ul>

<p><a href="https://camo.qiitausercontent.com/c8499df3844cefa28cd46a9a58667bc0a246e5e7/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f39616464613939372d656365642d333638382d653834372d6664353730393636313134352e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/c8499df3844cefa28cd46a9a58667bc0a246e5e7/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f39616464613939372d656365642d333638382d653834372d6664353730393636313134352e706e67" alt="68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f34313637386638302d313739392d653334632d623163352d6661646535356131396236612e706e67.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/62822/9adda997-eced-3688-e847-fd5709661145.png"></a></p>

<h3>
<span id="私はiphonexがほしい" class="fragment"></span><a href="#%E7%A7%81%E3%81%AFiphonex%E3%81%8C%E3%81%BB%E3%81%97%E3%81%84"><i class="fa fa-link"></i></a><strong>！！！！！私はiPhoneXがほしい！！！！！！</strong>
</h3>

<ul>
<li>もうまてません！！</li>
</ul>

<h2>
<span id="というわけで誰でもiphonexを感じられるアプリを作りました" class="fragment"></span><a href="#%E3%81%A8%E3%81%84%E3%81%86%E3%82%8F%E3%81%91%E3%81%A7%E8%AA%B0%E3%81%A7%E3%82%82iphonex%E3%82%92%E6%84%9F%E3%81%98%E3%82%89%E3%82%8C%E3%82%8B%E3%82%A2%E3%83%97%E3%83%AA%E3%82%92%E4%BD%9C%E3%82%8A%E3%81%BE%E3%81%97%E3%81%9F"><i class="fa fa-link"></i></a>というわけで、誰でもiPhoneXを感じられるアプリを作りました</h2>

<p><a href="https://camo.qiitausercontent.com/f6cf6e06074aee41b0b6d604128308c77d792b88/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f63623562336438622d303536622d383930622d643865362d6630303266656162383865342e676966" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/f6cf6e06074aee41b0b6d604128308c77d792b88/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f63623562336438622d303536622d383930622d643865362d6630303266656162383865342e676966" alt="iponX_a.gif" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/62822/cb5b3d8b-056b-890b-d8e6-f002feab88e4.gif"></a></p>

<h2>
<span id="こだわり" class="fragment"></span><a href="#%E3%81%93%E3%81%A0%E3%82%8F%E3%82%8A"><i class="fa fa-link"></i></a>こだわり</h2>

<ul>
<li>edgeを極限まで追求</li>
<li>全体で丸角を採用</li>
<li>無意味なホームバー</li>
<li>時計と電池残量の表示</li>
<li>アプリアイコンの追求</li>
<li>などなど</li>
</ul>

<h2>
<span id="githubにあります" class="fragment"></span><a href="#github%E3%81%AB%E3%81%82%E3%82%8A%E3%81%BE%E3%81%99"><i class="fa fa-link"></i></a>githubにあります</h2>

<ul>
<li><a href="https://github.com/okamuroshogo/iponX" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/okamuroshogo/iponX</a></li>
</ul>

<h2>
<span id="まとめ" class="fragment"></span><a href="#%E3%81%BE%E3%81%A8%E3%82%81"><i class="fa fa-link"></i></a>まとめ</h2>

<ul>
<li>やっぱりiPhoneX欲しいので、本日の16時01分に予約してきます(๑╹ω╹๑ )</li>
</ul>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>okamu_さんの<br />5位</center></td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>25</kbd>
		<a target="_blank" href="https://qiita.com/okamu_/items/8d85f2461acfdfdfed6a">twitter広告の威力とそのパワーをQiitaで検証</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2017-10-23 20:45:54</center>
	</td>
	<td style="width:200px;">
		@okamu_<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/62822/profile-images/1491391263">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Qiita]</b> <b>[Twitter]</b> <b>[GoogleAnalytics]</b> <b>[analytics]</b> <b>[広告]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>各種SNS（twtter,facebook,googleAd）の広告の効果を確かめ、Qiita記事にいいねがどれだけつくのかを検証します。</p>

<h2>
<span id="経緯" class="fragment"></span><a href="#%E7%B5%8C%E7%B7%AF"><i class="fa fa-link"></i></a><strong>経緯</strong>
</h2>

<h3>
<span id="qiitaにいいねがあるひとって-かっこいい" class="fragment"></span><a href="#qiita%E3%81%AB%E3%81%84%E3%81%84%E3%81%AD%E3%81%8C%E3%81%82%E3%82%8B%E3%81%B2%E3%81%A8%E3%81%A3%E3%81%A6-%E3%81%8B%E3%81%A3%E3%81%93%E3%81%84%E3%81%84"><i class="fa fa-link"></i></a><strong>Qiitaにいいねがあるひとって かっこいい!!</strong>
</h3>

<p>fnobi さん（2568いいね）<br>
<a href="https://camo.qiitausercontent.com/5c54730c20a2449a3c32adad6a6410651ac59b87/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f31363836333433372d343036352d363562642d656261342d3234373339623239356562642e706e67" target="_blank" rel="nofollow noopener"><img width="200" alt="スクリーンショット 2017-10-21 10.03.32.png" src="https://camo.qiitausercontent.com/5c54730c20a2449a3c32adad6a6410651ac59b87/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f31363836333433372d343036352d363562642d656261342d3234373339623239356562642e706e67" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/62822/16863437-4065-65bd-eba4-24739b295ebd.png"></a></p>

<p>mono0926　さん　（14722いいね）<br>
<a href="https://camo.qiitausercontent.com/3fbe9bdf09a9166f3ebd0ea234ea6ef92ed46a71/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f39613839663465362d306663652d346332352d626262302d3230333365383031313532392e706e67" target="_blank" rel="nofollow noopener"><img width="200" alt="スクリーンショット 2017-10-21 10.04.01.png" src="https://camo.qiitausercontent.com/3fbe9bdf09a9166f3ebd0ea234ea6ef92ed46a71/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f39613839663465362d306663652d346332352d626262302d3230333365383031313532392e706e67" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/62822/9a89f4e6-0fce-4c25-bbb0-2033e8011529.png"></a></p>

<p>zembutsu さん　（7386いいね）<br>
<a href="https://camo.qiitausercontent.com/a5fe611890b564fae4fe0a7371b603d6c2e4a583/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f34633139623739652d663236612d363665612d313431642d3635626564353563663163312e706e67" target="_blank" rel="nofollow noopener"><img width="200" alt="スクリーンショット 2017-10-21 10.05.46.png" src="https://camo.qiitausercontent.com/a5fe611890b564fae4fe0a7371b603d6c2e4a583/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f34633139623739652d663236612d363665612d313431642d3635626564353563663163312e706e67" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/62822/4c19b79e-f26a-66ea-141d-65bed55cf1c1.png"></a></p>

<p>完全に私の妄想ですが、<br>
<strong>1000オーバーのいいねを持っている人は、どういうわけかかっこよくみえるし、凄腕エンジニアっぽい</strong></p>

<p>アウトプットの習慣が身についているからこそ<br>
凄腕エンジニアなのでしょう！！（きっと）</p>

<h3>
<span id="そこで2週間前から私も毎日qiita記事を書くことにしました" class="fragment"></span><a href="#%E3%81%9D%E3%81%93%E3%81%A72%E9%80%B1%E9%96%93%E5%89%8D%E3%81%8B%E3%82%89%E7%A7%81%E3%82%82%E6%AF%8E%E6%97%A5qiita%E8%A8%98%E4%BA%8B%E3%82%92%E6%9B%B8%E3%81%8F%E3%81%93%E3%81%A8%E3%81%AB%E3%81%97%E3%81%BE%E3%81%97%E3%81%9F"><i class="fa fa-link"></i></a><strong>そこで2週間前から、私も毎日Qiita記事を書くことにしました！！</strong>
</h3>

<ul>
<li>これで凄腕エンジニアの仲間入りヤァぁぁぁぁぁぁあああああああ!!!!!</li>
</ul>

<h3>
<span id="これまでのtitle抜粋" class="fragment"></span><a href="#%E3%81%93%E3%82%8C%E3%81%BE%E3%81%A7%E3%81%AEtitle%E6%8A%9C%E7%B2%8B"><i class="fa fa-link"></i></a>これまでのtitle(抜粋)</h3>

<ul>
<li>(0いいね)<a href="https://qiita.com/okamu_/items/4ce91f45522f7fd0948f" id="reference-f60d8ca9c3bb89dec53c">【swift】この里帆ちゃんは jpeg か png かそれとも〇〇？？</a>
</li>
<li>(3いいね)<a href="https://qiita.com/okamu_/items/4a541b2b5aba81f8653a" id="reference-bff2890f731ef6760aad">【swift】tableViewに何もなければ、吉岡里帆ちゃんが出現する</a>
</li>
<li>(6いいね)<a href="https://qiita.com/okamu_/items/d370c69906b9c7aa225e" id="reference-aaf9dd42be4e16d8d6af">【mac】VPN設定せずにVPNしたかのようにする</a>
</li>
<li>(3いいね)<a href="https://qiita.com/okamu_/items/2967726eef27420e6c63" id="reference-8d3a53eed7c69a4b3775">serverless frameworkを使って本格的なAPIサーバーを構築（テストコード編）</a>
</li>
<li>(7いいね)<a href="https://qiita.com/okamu_/items/085cfc5999db801020ff" id="reference-1478971409bacbbb31c6">【Swift】 画像を３種類も書き出したくないでござる</a>
</li>
<li>(2いいね)<a href="https://qiita.com/okamu_/items/ee3186c7ac6e673deb18" id="reference-eae0d558db5d6d6dd589">Rails5でActionCableを使うときはSocketIOで接続できない!!</a>
</li>
<li>(15いいね)<a href="https://qiita.com/okamu_/items/63fb3908f08ff4f75aa2" id="reference-7f4eea0c032fbc6d6bce">【超厳選】Chromeに大量のタブを生成してしまう人向けの設定ランキングTop5</a>
</li>
</ul>

<h3>
<span id="非常にしょっぱい" class="fragment"></span><a href="#%E9%9D%9E%E5%B8%B8%E3%81%AB%E3%81%97%E3%82%87%E3%81%A3%E3%81%B1%E3%81%84"><i class="fa fa-link"></i></a>非常にしょっぱい</h3>

<h4>
<span id="" class="fragment"></span><a href="#"><i class="fa fa-link"></i></a>😭😭😭😭😭😭😭😭</h4>

<ul>
<li>２週間毎日投稿したのですが、あまりいいねがもらえないのです!!</li>
<li>しかしながら、画期的な方法を思いつきました！！！

<ul>
<li><strong>お金のちからに頼る！！ ＋ ついでに広告の効果を検証してまう！！</strong></li>
</ul>
</li>
</ul>

<h2>
<span id="ということでqiita記事に広告を打って効果を比較しつついいね増やします" class="fragment"></span><a href="#%E3%81%A8%E3%81%84%E3%81%86%E3%81%93%E3%81%A8%E3%81%A7qiita%E8%A8%98%E4%BA%8B%E3%81%AB%E5%BA%83%E5%91%8A%E3%82%92%E6%89%93%E3%81%A3%E3%81%A6%E5%8A%B9%E6%9E%9C%E3%82%92%E6%AF%94%E8%BC%83%E3%81%97%E3%81%A4%E3%81%A4%E3%81%84%E3%81%84%E3%81%AD%E5%A2%97%E3%82%84%E3%81%97%E3%81%BE%E3%81%99"><i class="fa fa-link"></i></a>ということで、Qiita記事に広告を打って効果を比較しつつ、いいね増やします！！</h2>

<ul>
<li>
<strong>twitter</strong> &lt;- この記事はtwitterで広告をしている記事です</li>
<li><a href="https://qiita.com/okamu_/items/563f44149dbe027a1cd8" id="reference-f94dbae7ee3a0ee7205b">Facebook</a></li>
<li><a href="https://qiita.com/okamu_/items/34c023b367abfa9db0d8" id="reference-917856b082d277b57aeb">GoogleAdwors</a></li>
</ul>

<p>広告をそれぞれのQiita記事で出しどんなユーザーがどこからどれだけ流入したかを比べようと思います。</p>

<h2>
<span id="計測方法" class="fragment"></span><a href="#%E8%A8%88%E6%B8%AC%E6%96%B9%E6%B3%95"><i class="fa fa-link"></i></a><strong>計測方法</strong>
</h2>

<ul>
<li>ほぼ同じ記事を３つ用意し、それぞれ広告を打つ（twitter,Facebook,googleAd）</li>
<li>googleAlyticsで集計する</li>
<li>計測は、2週間（2017/11/6まで）実施</li>
<li>それぞれ1万円（合計3万円）の広告を打つ</li>
</ul>

<h4>
<span id="計測する項目" class="fragment"></span><a href="#%E8%A8%88%E6%B8%AC%E3%81%99%E3%82%8B%E9%A0%85%E7%9B%AE"><i class="fa fa-link"></i></a>計測する項目</h4>

<ul>
<li>それぞれの流入でどこが多かったのか解析する</li>
<li>いいねを多くつけてくれる記事はどれだったか結果を待つ</li>
</ul>

<h3>
<span id="現状" class="fragment"></span><a href="#%E7%8F%BE%E7%8A%B6"><i class="fa fa-link"></i></a>現状</h3>

<ul>
<li>検索が一番多く、ソーシャルからの流入は少ない</li>
<li>Facebook, twitterともの少しだけ流入している</li>
</ul>

<p><a href="https://camo.qiitausercontent.com/537922f1cd429179296ed1c4290f07763f1c7bf3/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f34353738653335652d613438622d323938652d346438392d6534353230363430393633662e706e67" target="_blank" rel="nofollow noopener"><img width="1265" alt="スクリーンショット 2017-10-23 20.25.04.png" src="https://camo.qiitausercontent.com/537922f1cd429179296ed1c4290f07763f1c7bf3/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f34353738653335652d613438622d323938652d346438392d6534353230363430393633662e706e67" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/62822/4578e35e-a48b-298e-4d89-e4520640963f.png"></a></p>

<p><a href="https://camo.qiitausercontent.com/39fe88ecc17d314b97804c45a2795f7394a88d40/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f35326435356533322d393636612d383636652d316435612d6439646637623964316664662e706e67" target="_blank" rel="nofollow noopener"><img width="963" alt="スクリーンショット 2017-10-23 20.27.53.png" src="https://camo.qiitausercontent.com/39fe88ecc17d314b97804c45a2795f7394a88d40/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f35326435356533322d393636612d383636652d316435612d6439646637623964316664662e706e67" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/62822/52d55e32-966a-866e-1d5a-d9df7b9d1fdf.png"></a></p>

<h2>
<span id="計測結果追記します" class="fragment"></span><a href="#%E8%A8%88%E6%B8%AC%E7%B5%90%E6%9E%9C%E8%BF%BD%E8%A8%98%E3%81%97%E3%81%BE%E3%81%99"><i class="fa fa-link"></i></a><strong>計測結果（追記します）</strong>
</h2>

<p>広告の導入結果はこの記事で追記しようとおもいます</p>

<h3>
<span id="流入元" class="fragment"></span><a href="#%E6%B5%81%E5%85%A5%E5%85%83"><i class="fa fa-link"></i></a>流入元</h3>

<ul>
<li>twitter

<ul>
<li>???</li>
</ul>
</li>
<li>Facebook

<ul>
<li>???</li>
</ul>
</li>
<li>google

<ul>
<li>???</li>
</ul>
</li>
</ul>

<h3>
<span id="ユーザー数" class="fragment"></span><a href="#%E3%83%A6%E3%83%BC%E3%82%B6%E3%83%BC%E6%95%B0"><i class="fa fa-link"></i></a>ユーザー数</h3>

<ul>
<li>twitter

<ul>
<li>???</li>
</ul>
</li>
<li>Facebook

<ul>
<li>???</li>
</ul>
</li>
<li>google

<ul>
<li>???</li>
</ul>
</li>
</ul>

<h3>
<span id="いいね総数" class="fragment"></span><a href="#%E3%81%84%E3%81%84%E3%81%AD%E7%B7%8F%E6%95%B0"><i class="fa fa-link"></i></a>いいね総数</h3>

<ul>
<li>twitter

<ul>
<li>???</li>
</ul>
</li>
<li>Facebook

<ul>
<li>???</li>
</ul>
</li>
<li>google

<ul>
<li>???</li>
</ul>
</li>
</ul>

<h3>
<span id="その他" class="fragment"></span><a href="#%E3%81%9D%E3%81%AE%E4%BB%96"><i class="fa fa-link"></i></a>その他</h3>

<ul>
<li>twitter

<ul>
<li>???</li>
</ul>
</li>
<li>Facebook

<ul>
<li>???</li>
</ul>
</li>
<li>google

<ul>
<li>???</li>
</ul>
</li>
</ul>

<h1>
<span id="広告導入方法の紹介" class="fragment"></span><a href="#%E5%BA%83%E5%91%8A%E5%B0%8E%E5%85%A5%E6%96%B9%E6%B3%95%E3%81%AE%E7%B4%B9%E4%BB%8B"><i class="fa fa-link"></i></a><strong>広告導入方法の紹介</strong>
</h1>

<h2>
<span id="twitter" class="fragment"></span><a href="#twitter"><i class="fa fa-link"></i></a><strong>twitter</strong>
</h2>

<p>1.<a href="https://business.twitter.com/ja.html" rel="nofollow noopener" target="_blank">広告のページ</a>にアクセスする<br>
<a href="https://camo.qiitausercontent.com/79926190fa0280f1af63ef361abc7c0f0ffafa70/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f39333436373436662d396530392d616136642d336563652d6135366631333736343534302e706e67" target="_blank" rel="nofollow noopener"><img width="1598" alt="スクリーンショット 2017-10-23 18.40.38.png" src="https://camo.qiitausercontent.com/79926190fa0280f1af63ef361abc7c0f0ffafa70/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f39333436373436662d396530392d616136642d336563652d6135366631333736343534302e706e67" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/62822/9346746f-9e09-aa6d-3ece-a56f13764540.png"></a></p>

<p>2.広告の種類を選びます</p>

<ul>
<li>今回は、「webサイトのコンバージョン」を選びます</li>
</ul>

<p><a href="https://camo.qiitausercontent.com/9ce7a89331c36d3f3a3acc59e642d3a935ad576b/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f65386439633536642d313231322d386635392d353561632d6132303566333339636261662e706e67" target="_blank" rel="nofollow noopener"><img width="1117" alt="スクリーンショット 2017-10-23 18.40.55.png" src="https://camo.qiitausercontent.com/9ce7a89331c36d3f3a3acc59e642d3a935ad576b/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f65386439633536642d313231322d386635392d353561632d6132303566333339636261662e706e67" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/62822/e8d9c56d-1212-8f59-55ac-a205f339cbaf.png"></a></p>

<p>3.日別と月別の予算などを入力して次へ進みます<br>
<a href="https://camo.qiitausercontent.com/8f5878cd70375cc59c8b0ee48a03c9af958d50aa/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f39393736303431392d386437372d383561652d663564342d3337363132313733623335322e706e67" target="_blank" rel="nofollow noopener"><img width="713" alt="スクリーンショット 2017-10-23 19.28.30.png" src="https://camo.qiitausercontent.com/8f5878cd70375cc59c8b0ee48a03c9af958d50aa/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f39393736303431392d386437372d383561652d663564342d3337363132313733623335322e706e67" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/62822/99760419-8d77-85ae-f5d4-37612173b352.png"></a></p>

<p>3.広告したいツイートを選び、クレジットの登録で完了！</p>

<p>4.これでtwitter広告は出品できます！！！</p>

<p>管理画面はこんな感じ<br>
<a href="https://camo.qiitausercontent.com/10ffcc48c438b150338554b9fcbc36d581222b42/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f37623066643065642d343534312d333965352d343835372d3139613061666131336432312e706e67" target="_blank" rel="nofollow noopener"><img width="1598" alt="スクリーンショット 2017-10-23 20.55.34.png" src="https://camo.qiitausercontent.com/10ffcc48c438b150338554b9fcbc36d581222b42/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f37623066643065642d343534312d333965352d343835372d3139613061666131336432312e706e67" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/62822/7b0fd0ed-4541-39e5-4857-19a0afa13d21.png"></a></p>

<h2>
<span id="まとめ" class="fragment"></span><a href="#%E3%81%BE%E3%81%A8%E3%82%81"><i class="fa fa-link"></i></a><strong>まとめ</strong>
</h2>

<ul>
<li>web広告がどれだけ効果があるかわかりませんが、結果を待つとします。</li>
<li>予想ではtwitterからたくさんくるのではないかと思いますがどうなることやら！！</li>
</ul>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>okamu_さんの<br />6位</center></td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>25</kbd>
		<a target="_blank" href="https://qiita.com/okamu_/items/e246887cb6f2621ad40a">serverless frameworkを使って本格的なAPIサーバーを構築（魅力編）</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2017-09-21 09:16:25</center>
	</td>
	<td style="width:200px;">
		@okamu_<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/62822/profile-images/1491391263">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Rails]</b> <b>[Node.js]</b> <b>[AWS]</b> <b>[Express]</b> <b>[serverless]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;">
<h1>
<span id="serverless-frameworkを使って本格的なapiサーバーを構築魅力編" class="fragment"></span><a href="#serverless-framework%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%A6%E6%9C%AC%E6%A0%BC%E7%9A%84%E3%81%AAapi%E3%82%B5%E3%83%BC%E3%83%90%E3%83%BC%E3%82%92%E6%A7%8B%E7%AF%89%E9%AD%85%E5%8A%9B%E7%B7%A8"><i class="fa fa-link"></i></a>serverless frameworkを使って本格的なAPIサーバーを構築（魅力編）</h1>

<p>最近、推しメンの　serverless framework の記事の第１弾です。<br>
保守メンテが楽になりつつも、実戦で速攻で構築ができます。</p>

<h2>
<span id="目次" class="fragment"></span><a href="#%E7%9B%AE%E6%AC%A1"><i class="fa fa-link"></i></a>目次</h2>

<ul>
<li><strong><a href="https://qiita.com/okamu_/items/e246887cb6f2621ad40a">serverless frameworkを使って本格的なAPIサーバーを構築（魅力編）</a>←　今ここ</strong></li>
<li><a href="https://qiita.com/okamu_/items/0f1055e5c91ed99ebec6" id="reference-7dd89a0f2758bd441a19">serverless frameworkを使って本格的なAPIサーバーを構築（ハンズオン編）</a></li>
<li><a href="https://qiita.com/okamu_/items/c19e2a682afe41a47eb1" id="reference-4a12d127709d3c0ccda3">serverless frameworkを使って本格的なAPIサーバーを構築（Express編）</a></li>
<li><a href="https://qiita.com/okamu_/items/2967726eef27420e6c63" id="reference-326c7bc93dd9dd130bb9">serverless frameworkを使って本格的なAPIサーバーを構築（テストコード編）</a></li>
</ul>

<p><a href="https://camo.qiitausercontent.com/bca2e1899d6b398e26100843fc99a100b8766da7/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f65396666613034342d636461662d633032342d326462612d6236373034303761623164642e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/bca2e1899d6b398e26100843fc99a100b8766da7/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f65396666613034342d636461662d633032342d326462612d6236373034303761623164642e706e67" alt="framework_repo.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/62822/e9ffa044-cdaf-c024-2dba-b670407ab1dd.png"></a></p>

<p>こんにちは！某会社のインフラエンジニアをしておりますが、最近は <strong>サーバーレス</strong> という言葉が流行ってますね。<br>
今回は、serverless frameworkで 「 <strong>lambda + APIGateway + DynamoDB</strong> 」　の構成でいくつかサービスを作ったので、利点などをまとめていけたらと思います。</p>

<h2>
<span id="サーバーレスとserverless-framework" class="fragment"></span><a href="#%E3%82%B5%E3%83%BC%E3%83%90%E3%83%BC%E3%83%AC%E3%82%B9%E3%81%A8serverless-framework"><i class="fa fa-link"></i></a><strong>サーバーレスとserverless framework</strong>
</h2>

<h3>
<span id="まずサーバーレスとは" class="fragment"></span><a href="#%E3%81%BE%E3%81%9A%E3%82%B5%E3%83%BC%E3%83%90%E3%83%BC%E3%83%AC%E3%82%B9%E3%81%A8%E3%81%AF"><i class="fa fa-link"></i></a>まずサーバーレスとは</h3>

<h4>
<span id="サーバーの管理が不要になる" class="fragment"></span><a href="#%E3%82%B5%E3%83%BC%E3%83%90%E3%83%BC%E3%81%AE%E7%AE%A1%E7%90%86%E3%81%8C%E4%B8%8D%E8%A6%81%E3%81%AB%E3%81%AA%E3%82%8B"><i class="fa fa-link"></i></a><strong>サーバーの管理が不要になる</strong>
</h4>

<ul>
<li>サーバーレスアーキテクチャでは、管理するサーバーがないため、サーバー管理から開放され、その分管理コストがかからなくなります。物理的なサーバーの管理はクラウド事業者に一任できるので、故障やパッチ適用の心配をする必要はありません。</li>
</ul>

<p>また、一般にコード実行サービスは高い可用性を持っているため、オンプレミスサーバーよりも障害耐性が高くなるでしょう。</p>

<h4>
<span id="アプリ開発において便利" class="fragment"></span><a href="#%E3%82%A2%E3%83%97%E3%83%AA%E9%96%8B%E7%99%BA%E3%81%AB%E3%81%8A%E3%81%84%E3%81%A6%E4%BE%BF%E5%88%A9"><i class="fa fa-link"></i></a><strong>アプリ開発において便利</strong>
</h4>

<ul>
<li>APIサーバーとして、ハッカソン用に作ったアプリの運用など、ほとんどアクセスがないようなAPIサーバーをずっと放置しておくのは大変お金がかかります。</li>
</ul>

<h4>
<span id="従来の冗長化構成に比べ安価" class="fragment"></span><a href="#%E5%BE%93%E6%9D%A5%E3%81%AE%E5%86%97%E9%95%B7%E5%8C%96%E6%A7%8B%E6%88%90%E3%81%AB%E6%AF%94%E3%81%B9%E5%AE%89%E4%BE%A1"><i class="fa fa-link"></i></a><strong>従来の冗長化構成に比べ安価</strong>
</h4>

<ul>
<li>EC2 + RDS環境を構築したときに、ある程度の規模であれば安価に済ますことができます。</li>
</ul>

<h4>
<span id="サーバーの脆弱性を突いた攻撃が効かない" class="fragment"></span><a href="#%E3%82%B5%E3%83%BC%E3%83%90%E3%83%BC%E3%81%AE%E8%84%86%E5%BC%B1%E6%80%A7%E3%82%92%E7%AA%81%E3%81%84%E3%81%9F%E6%94%BB%E6%92%83%E3%81%8C%E5%8A%B9%E3%81%8B%E3%81%AA%E3%81%84"><i class="fa fa-link"></i></a><strong>サーバーの脆弱性を突いた攻撃が効かない</strong>
</h4>

<ul>
<li><p>セキュリティ被害の多くはサーバーOSやミドルウェアの脆弱性を突いた攻撃ですが、公開ネットワーク上にサーバーが無いので、一般的なサーバーの脆弱性を突く攻撃が効きません。</p></li>
<li><p>Amazonのプラットフォームに脆弱性が無いとは言えませんが、プラットフォーム仕様が公開されていないので脆弱性を探すことが難しく、一般的なサーバーOSより脆弱性被害の可能性は少ないと考えられます。</p></li>
</ul>

<h4>
<span id="サーバーが落ちることがない" class="fragment"></span><a href="#%E3%82%B5%E3%83%BC%E3%83%90%E3%83%BC%E3%81%8C%E8%90%BD%E3%81%A1%E3%82%8B%E3%81%93%E3%81%A8%E3%81%8C%E3%81%AA%E3%81%84"><i class="fa fa-link"></i></a><strong>サーバーが落ちることがない</strong>
</h4>

<ul>
<li><p>サーバーが無いのでサーバーダウンの概念がありません。</p></li>
<li><p>厳密にはAmazonがダウンすれば共倒れしますが、どのプラットフォームもサービス本体がダウンすれば同じことが言えるので、世界的インフラのAWSと、自社サーバーや一般企業のレンタルサーバーのどちらを信用するか、という話になります。</p></li>
</ul>

<h4>
<span id="放置できる" class="fragment"></span><a href="#%E6%94%BE%E7%BD%AE%E3%81%A7%E3%81%8D%E3%82%8B"><i class="fa fa-link"></i></a><strong>放置できる</strong>
</h4>

<ul>
<li>セキュリティパッチや、サーバー自体の管理が発生しないためある程度放置できます。</li>
</ul>

<h4>
<span id="インフラエンジニアがいなくてもスケールする" class="fragment"></span><a href="#%E3%82%A4%E3%83%B3%E3%83%95%E3%83%A9%E3%82%A8%E3%83%B3%E3%82%B8%E3%83%8B%E3%82%A2%E3%81%8C%E3%81%84%E3%81%AA%E3%81%8F%E3%81%A6%E3%82%82%E3%82%B9%E3%82%B1%E3%83%BC%E3%83%AB%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a><strong>インフラエンジニアがいなくてもスケールする</strong>
</h4>

<ul>
<li>lambdaは最大で3000も同時に実行できます。</li>
<li>dynamodbは、キャパシティユニットとオートスケールの設定がかんたんにできます。</li>
<li>S3で静的コンテンツを配信したとしても障害確率はかなり低いです。</li>
</ul>

<h4>
<span id="とにかく安い" class="fragment"></span><a href="#%E3%81%A8%E3%81%AB%E3%81%8B%E3%81%8F%E5%AE%89%E3%81%84"><i class="fa fa-link"></i></a><strong>とにかく安い！</strong>
</h4>

<ul>
<li><p>サーバーは初期導入コストが高く、必要になるサーバースペックも事前に見積もっておかなければいけません。物理障害時のパーツ交換費用なども必要です。<br>
クラウドサーバーにしても、起動している時間は料金がかかるため、閑散時などは100%コストを活用できているとはいえません。</p></li>
<li><p>一方、コード実行サービスであれば、実際にコードを実行した時間に応じて課金されるため、ムダなコストが発生しません。初期導入コストもかからないため、システムの規模に合わせて柔軟にスケールできます。</p></li>
</ul>

<h4>
<span id="保守メンテが楽" class="fragment"></span><a href="#%E4%BF%9D%E5%AE%88%E3%83%A1%E3%83%B3%E3%83%86%E3%81%8C%E6%A5%BD"><i class="fa fa-link"></i></a><strong>保守メンテが楽</strong>
</h4>

<ul>
<li>セキュリテイパッチやサーバー管理などのメンテが不要になります。</li>
</ul>

<h2>
<span id="apigatewaydynamodblambda手動構築の苦悩" class="fragment"></span><a href="#apigatewaydynamodblambda%E6%89%8B%E5%8B%95%E6%A7%8B%E7%AF%89%E3%81%AE%E8%8B%A6%E6%82%A9"><i class="fa fa-link"></i></a><strong>APIGateway+DynamoDB+Lambda手動構築の苦悩</strong>
</h2>

<p><a href="https://camo.qiitausercontent.com/23e92ab80860c994db5360c901e76387657bdea5/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f36653838373761392d353030612d616366322d303662662d3263646138613839333434342e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/23e92ab80860c994db5360c901e76387657bdea5/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f36653838373761392d353030612d616366322d303662662d3263646138613839333434342e706e67" alt="image.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/62822/6e8877a9-500a-acf2-06bf-2cda8a893444.png"></a></p>

<ul>
<li>serverless framework を使わずに「lambda + APIGateway + DynamoDB」を構築しようとすると、ほぼボタン操作で設定しないといけないです。</li>
<li>どのステージをデプロイするのか、設定した項目・手順を忘れた。もとに戻したい、引き継ぎを行いたいなどいろいろなケースが考えられます</li>
</ul>

<h3>
<span id="再現性がない" class="fragment"></span><a href="#%E5%86%8D%E7%8F%BE%E6%80%A7%E3%81%8C%E3%81%AA%E3%81%84"><i class="fa fa-link"></i></a>再現性がない</h3>

<ul>
<li>これに尽きると思います。</li>
<li>基本的にAPIGatewayの設定などはボタン操作です。もちろんgit管理などできない。
ステージの作成、レスポンスコード、methodの作成など操作を間違えても元に戻すことが難しくなり、実装コスト、人件費、考えるだけで大変なことが多すぎます。（大変だった。）</li>
</ul>

<h3>
<span id="よって保守性メンテ引き継ぎが難しくなっていました" class="fragment"></span><a href="#%E3%82%88%E3%81%A3%E3%81%A6%E4%BF%9D%E5%AE%88%E6%80%A7%E3%83%A1%E3%83%B3%E3%83%86%E5%BC%95%E3%81%8D%E7%B6%99%E3%81%8E%E3%81%8C%E9%9B%A3%E3%81%97%E3%81%8F%E3%81%AA%E3%81%A3%E3%81%A6%E3%81%84%E3%81%BE%E3%81%97%E3%81%9F"><i class="fa fa-link"></i></a>よって保守性・メンテ・引き継ぎが難しくなっていました。</h3>

<h2>
<span id="そこでserverless-frameworkの出番です" class="fragment"></span><a href="#%E3%81%9D%E3%81%93%E3%81%A7serverless-framework%E3%81%AE%E5%87%BA%E7%95%AA%E3%81%A7%E3%81%99"><i class="fa fa-link"></i></a>そこでserverless frameworkの出番です!!</h2>

<p><a href="https://camo.qiitausercontent.com/de642b1fe34f81b41e5654b38cceda7b1571509e/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f64366463353338382d363135662d363536352d633964662d6439653737346363373331352e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/de642b1fe34f81b41e5654b38cceda7b1571509e/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f64366463353338382d363135662d363536352d633964662d6439653737346363373331352e706e67" alt="image.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/62822/d6dc5388-615f-6565-c9df-d9e774cc7315.png"></a></p>

<ul>
<li><strong>基本的にAWSコンソールでのボタン操作は不要！！</strong></li>
<li>
<strong>serverless.ymlですべて管理・設定ができる =&gt; 設定をgit管理できる</strong>

<ul>
<li><strong>aws cloudformationの形式と似ているため、最悪それを真似できます（cloudformationよりかんたん！）</strong></li>
</ul>
</li>
<li><strong>コマンド１発でデプロイとロールバックが可能</strong></li>
<li><strong>公式リポジトリにサンプルが沢山！！（こまりません）</strong></li>
<li><strong>プラグインもたくさん（ぶっちゃけ使わなくても高機能！！）</strong></li>
<li><strong>Expressと組み合わせると、超便利！！！！！（後日記事を書きます）</strong></li>
</ul>

<h3>
<span id="注意点など" class="fragment"></span><a href="#%E6%B3%A8%E6%84%8F%E7%82%B9%E3%81%AA%E3%81%A9"><i class="fa fa-link"></i></a>注意点など</h3>

<ul>
<li>iamのadmin権限が必要です。</li>
<li>Cloudfrontは設定できません。</li>
</ul>

<h2>
<span id="次回" class="fragment"></span><a href="#%E6%AC%A1%E5%9B%9E"><i class="fa fa-link"></i></a>次回</h2>

<ul>
<li><a href="https://qiita.com/okamu_/items/0f1055e5c91ed99ebec6">serverless frameworkを使って本格的なAPIサーバーを構築（ハンズオン編）</a></li>
</ul>

<h2>
<span id="参考記事" class="fragment"></span><a href="#%E5%8F%82%E8%80%83%E8%A8%98%E4%BA%8B"><i class="fa fa-link"></i></a>参考記事</h2>

<ul>
<li><a href="https://cloudadvisor.jp/blog/aws-serverless-process" class="autolink" rel="nofollow noopener" target="_blank">https://cloudadvisor.jp/blog/aws-serverless-process</a></li>
</ul>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>okamu_さんの<br />7位</center></td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>15</kbd>
		<a target="_blank" href="https://qiita.com/okamu_/items/63fb3908f08ff4f75aa2">【超厳選】Chromeに大量のタブを生成してしまう人向けの設定ランキングTop5</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2017-10-10 08:23:04</center>
	</td>
	<td style="width:200px;">
		@okamu_<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/62822/profile-images/1491391263">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Chrome]</b> <b>[tips]</b> <b>[エンジニア]</b> <b>[新人プログラマ応援]</b> <b>[1000チャレンジ]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;">
<h1>
<span id="超厳選chromeに大量のタブを生成してしまう人向けの設定ランキングtop5" class="fragment"></span><a href="#%E8%B6%85%E5%8E%B3%E9%81%B8chrome%E3%81%AB%E5%A4%A7%E9%87%8F%E3%81%AE%E3%82%BF%E3%83%96%E3%82%92%E7%94%9F%E6%88%90%E3%81%97%E3%81%A6%E3%81%97%E3%81%BE%E3%81%86%E4%BA%BA%E5%90%91%E3%81%91%E3%81%AE%E8%A8%AD%E5%AE%9A%E3%83%A9%E3%83%B3%E3%82%AD%E3%83%B3%E3%82%B0top5"><i class="fa fa-link"></i></a>【超厳選】Chromeに大量のタブを生成してしまう人向けの設定ランキングTop5</h1>

<p>エンジニアたるもの、googleさんでバシバシ検索することは当たり前かと思いますが、知らないうちにタブが大量に発生してしまい、ファビコンすらも出てこなくなる経験はあるでしょう。</p>

<p>そこで、今回はそんな <code>Chromeに大量のタブを生成してしまう人向け</code> に、おすすめのchromeの設定をランキングで発表したいと思います。</p>

<p><a href="https://camo.qiitausercontent.com/6d79056a664997d6ef0c023816a516669bc40821/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f65313438303430622d343434612d633237652d326430312d6432306266313536313966622e706e67" target="_blank" rel="nofollow noopener"><img width="1660" alt="Screen Shot 2017-10-10 at 1.05.36.png" src="https://camo.qiitausercontent.com/6d79056a664997d6ef0c023816a516669bc40821/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f65313438303430622d343434612d633237652d326430312d6432306266313536313966622e706e67" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/62822/e148040b-444a-c27e-2d01-d20bf15619fb.png"></a></p>

<h2>
<span id="第1位-cmdqの前にアラートを出す" class="fragment"></span><a href="#%E7%AC%AC1%E4%BD%8D-cmdq%E3%81%AE%E5%89%8D%E3%81%AB%E3%82%A2%E3%83%A9%E3%83%BC%E3%83%88%E3%82%92%E5%87%BA%E3%81%99"><i class="fa fa-link"></i></a>第1位 cmd+Qの前にアラートを出す</h2>

<p><a href="https://camo.qiitausercontent.com/b85ad1cf82081e1543067cf097707fdf274142b4/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f62653064663165312d343364322d373662332d656566362d3532666234333864393036622e706e67" target="_blank" rel="nofollow noopener"><img width="1700" alt="Screen Shot 2017-10-10 at 1.08.30.png" src="https://camo.qiitausercontent.com/b85ad1cf82081e1543067cf097707fdf274142b4/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f62653064663165312d343364322d373662332d656566362d3532666234333864393036622e706e67" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/62822/be0df1e1-43d2-76b3-eef6-52fb438d906b.png"></a></p>

<p>タブを大量に開いていて、よく起こるのが cmd+Wでタブを消すつもりが間違ってcmd+Qを押してしまいChromeがkillされてしまうケースです。<br>
さらに、大量のタブを閉じるためPCがフリーズしてしまい、作業すら止まる場合があります。</p>

<p>この設定をしていると、間違えてcmd+Qを押してももう一度押さないと消えないため、間違って消すことがなくなります！！</p>

<p><a href="https://camo.qiitausercontent.com/4f05974ce562cef26acb14d32696fd34f6a81446/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f37633430643037392d336261642d663164632d393131632d3431323031396332303565322e706e67" target="_blank" rel="nofollow noopener"><img width="331" alt="Screen Shot 2017-10-10 at 1.12.29.png" src="https://camo.qiitausercontent.com/4f05974ce562cef26acb14d32696fd34f6a81446/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f37633430643037392d336261642d663164632d393131632d3431323031396332303565322e706e67" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/62822/7c40d079-3bad-f1dc-911c-412019c205e2.png"></a></p>

<p>ここにチェックを入れてあげると、警告が出るようになるのでぜひ設定しておきましょう！！</p>

<h2>
<span id="第2位-使用していないタブを停止してくれるthe-great-suspender" class="fragment"></span><a href="#%E7%AC%AC2%E4%BD%8D-%E4%BD%BF%E7%94%A8%E3%81%97%E3%81%A6%E3%81%84%E3%81%AA%E3%81%84%E3%82%BF%E3%83%96%E3%82%92%E5%81%9C%E6%AD%A2%E3%81%97%E3%81%A6%E3%81%8F%E3%82%8C%E3%82%8Bthe-great-suspender"><i class="fa fa-link"></i></a>第2位 使用していないタブを停止してくれる「The Great Suspender」</h2>

<p><a href="https://camo.qiitausercontent.com/39abe7f3f9f48b96a28ef494938893a02731e62a/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f66646435303662632d336262312d353932662d306135322d6164346330336530356464372e706e67" target="_blank" rel="nofollow noopener"><img width="978" alt="Screen Shot 2017-10-10 at 1.17.43.png" src="https://camo.qiitausercontent.com/39abe7f3f9f48b96a28ef494938893a02731e62a/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f66646435303662632d336262312d353932662d306135322d6164346330336530356464372e706e67" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/62822/fdd506bc-3bb1-592f-0a52-ad4c03e05dd7.png"></a></p>

<p>これは拡張機能ですがこれを使うことで使用していないタブを停止（スリープ）状態にすることができます。<br>
タブが停止するまでの時間はオプションで設定可能で、最短で20秒から選ぶことができます。</p>

<p>また、他にも固定タブは停止しないとかタブにフォーカスしたら停止解除するといったオプションも用意されており、「Whitelist」という項目を使えば特定のページを開いている時は停止しないといった設定も可能です。</p>

<ul>
<li><a href="http://bamka.info/greatsuspender" rel="nofollow noopener" target="_blank">設定方法の詳細</a></li>
</ul>

<h2>
<span id="第3位-開いていたタブを全て一つのタブにまとめるone-tab" class="fragment"></span><a href="#%E7%AC%AC3%E4%BD%8D-%E9%96%8B%E3%81%84%E3%81%A6%E3%81%84%E3%81%9F%E3%82%BF%E3%83%96%E3%82%92%E5%85%A8%E3%81%A6%E4%B8%80%E3%81%A4%E3%81%AE%E3%82%BF%E3%83%96%E3%81%AB%E3%81%BE%E3%81%A8%E3%82%81%E3%82%8Bone-tab"><i class="fa fa-link"></i></a>第3位 開いていたタブを全て一つのタブにまとめる「One Tab」</h2>

<p><a href="https://camo.qiitausercontent.com/46a40515aa01d740eda22d251bc86c68192d4459/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f38646239373963622d393462632d623565352d313737652d3437356630623963393838622e706e67" target="_blank" rel="nofollow noopener"><img width="988" alt="Screen Shot 2017-10-10 at 1.22.01.png" src="https://camo.qiitausercontent.com/46a40515aa01d740eda22d251bc86c68192d4459/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f38646239373963622d393462632d623565352d313737652d3437356630623963393838622e706e67" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/62822/8db979cb-94bc-b5e5-177e-475f0b9c988b.png"></a></p>

<p>クリックするだけで、開いていたタブを全て一つのタブにまとめられるのが「One Tab」の魅力。<br>
これにより最大で95％のメモリ消費を減らすことができるそうです。</p>

<p>一つにまとまったタブはサブタイトルとともに一覧になっているので、まとめたからとはいえ、参照するのも簡単に行えます。</p>

<h2>
<span id="第4位-どこでも翻訳-translate-anywhere" class="fragment"></span><a href="#%E7%AC%AC4%E4%BD%8D-%E3%81%A9%E3%81%93%E3%81%A7%E3%82%82%E7%BF%BB%E8%A8%B3-translate-anywhere"><i class="fa fa-link"></i></a>第4位 どこでも翻訳 Translate Anywhere</h2>

<p><a href="https://camo.qiitausercontent.com/3c6a34ecfd4f5c0946ec2cbb11c85fc86194b2cf/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f37396138356363622d666562622d373064302d376536392d3463393833313633373932362e706e67" target="_blank" rel="nofollow noopener"><img width="981" alt="Screen Shot 2017-10-10 at 1.30.23.png" src="https://camo.qiitausercontent.com/3c6a34ecfd4f5c0946ec2cbb11c85fc86194b2cf/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f37396138356363622d666562622d373064302d376536392d3463393833313633373932362e706e67" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/62822/79a85ccb-febb-70d0-7e69-4c9831637926.png"></a></p>

<p>英語ページ全体ではなく、一部分だけを日本語に翻訳できるツールです。<br>
別のタブを開いて翻訳にに行って、また違うページでの翻訳を新しいタブで...っとなる前に、<br>
翻訳したいテキストを選択し、右クリックで［文章を翻訳する］をクリックすれば、そのすぐ下に日本語訳が表示されます。</p>

<h3>
<span id="第5位キャッシュを一瞬で削除できる-clear-cache" class="fragment"></span><a href="#%E7%AC%AC5%E4%BD%8D%E3%82%AD%E3%83%A3%E3%83%83%E3%82%B7%E3%83%A5%E3%82%92%E4%B8%80%E7%9E%AC%E3%81%A7%E5%89%8A%E9%99%A4%E3%81%A7%E3%81%8D%E3%82%8B-clear-cache"><i class="fa fa-link"></i></a>第5位　キャッシュを一瞬で削除できる Clear Cache</h3>

<p><a href="https://camo.qiitausercontent.com/6116ac43c6b0c5701949fa7020f6934ca9339d41/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f37306563396363332d326435302d663362632d323739342d3132336439366338333966622e706e67" target="_blank" rel="nofollow noopener"><img width="643" alt="Screen Shot 2017-10-10 at 1.32.08.png" src="https://camo.qiitausercontent.com/6116ac43c6b0c5701949fa7020f6934ca9339d41/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f37306563396363332d326435302d663362632d323739342d3132336439366338333966622e706e67" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/62822/70ec9cc3-2d50-f3bc-2794-123d96c839fb.png"></a></p>

<p>1クリックで簡単にキャッシュを削除してくれます。「CSSが反映されない」ときに便利。拡張機能をいれなくても検証モードを開いて削除ができるのですが、1クリックで実行できるのは便利です</p>

<h3>
<span id="番外編人気者になれるchrome拡張" class="fragment"></span><a href="#%E7%95%AA%E5%A4%96%E7%B7%A8%E4%BA%BA%E6%B0%97%E8%80%85%E3%81%AB%E3%81%AA%E3%82%8C%E3%82%8Bchrome%E6%8B%A1%E5%BC%B5"><i class="fa fa-link"></i></a>番外編　人気者になれるChrome拡張</h3>

<p>あるとき適当に拡張期を探しているとこのような拡張を見つけました<br>
その名も、「webcockroach」</p>

<p>リンクはこれです。<br>
<a href="https://chrome.google.com/webstore/detail/webcockroach/amifealhlhbmakepjknjchoilpcbndng" class="autolink" rel="nofollow noopener" target="_blank">https://chrome.google.com/webstore/detail/webcockroach/amifealhlhbmakepjknjchoilpcbndng</a></p>

<p>どうやら、リロードするたびに画面の左上からGが画面を這い回りますが、一瞬で通り過ぎますｗ<br>
ドラッグするとつかめるようですｗ</p>

<p>会社で導入したのですが、「えっ？さっきの何？」とMTG中でも会話が盛り上がり本題に進まなくなるデメリットがありますが、一躍有名人です。</p>

<h2>
<span id="その他便利なchrome拡張まとめ記事" class="fragment"></span><a href="#%E3%81%9D%E3%81%AE%E4%BB%96%E4%BE%BF%E5%88%A9%E3%81%AAchrome%E6%8B%A1%E5%BC%B5%E3%81%BE%E3%81%A8%E3%82%81%E8%A8%98%E4%BA%8B"><i class="fa fa-link"></i></a>その他便利なChrome拡張まとめ記事</h2>

<ul>
<li>おすすめ具合などを参考にさせていただきました。ありがとうございます！</li>
<li><a href="https://saruwakakun.com/it/web/chrome-extensions" rel="nofollow noopener" target="_blank">【2017年版】これは便利！おすすめのChrome拡張機能30選</a></li>
<li><a href="https://www.nxworld.net/services-resource/8-google-chrome-tab-manager-extensions.html" rel="nofollow noopener" target="_blank">Chromeユーザー向け：タブを沢山開くタイプの人に便利な拡張機能 8</a></li>
</ul>

<h2>
<span id="まとめ" class="fragment"></span><a href="#%E3%81%BE%E3%81%A8%E3%82%81"><i class="fa fa-link"></i></a>まとめ</h2>

<ul>
<li>タブは開きすぎないようにしましょう！！！！</li>
</ul>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>okamu_さんの<br />8位</center></td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>15</kbd>
		<a target="_blank" href="https://qiita.com/okamu_/items/c19e2a682afe41a47eb1">serverless frameworkを使って本格的なAPIサーバーを構築（Express編）</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2017-09-28 08:26:00</center>
	</td>
	<td style="width:200px;">
		@okamu_<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/62822/profile-images/1491391263">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[AWS]</b> <b>[api]</b> <b>[nodejs]</b> <b>[lambda]</b> <b>[serverless]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;">
<h1>
<span id="serverless-frameworkを使って本格的なapiサーバーを構築express編" class="fragment"></span><a href="#serverless-framework%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%A6%E6%9C%AC%E6%A0%BC%E7%9A%84%E3%81%AAapi%E3%82%B5%E3%83%BC%E3%83%90%E3%83%BC%E3%82%92%E6%A7%8B%E7%AF%89express%E7%B7%A8"><i class="fa fa-link"></i></a>serverless frameworkを使って本格的なAPIサーバーを構築（Express編）</h1>

<p>最近、推しメンの　serverless framework の記事の第３弾です。<br>
保守メンテが楽になりつつも、実戦で速攻で構築ができます。</p>

<h2>
<span id="目次" class="fragment"></span><a href="#%E7%9B%AE%E6%AC%A1"><i class="fa fa-link"></i></a>目次</h2>

<ul>
<li><a href="https://qiita.com/okamu_/items/e246887cb6f2621ad40a" id="reference-a846aeaaf00f308c943f">serverless frameworkを使って本格的なAPIサーバーを構築（魅力編）</a></li>
<li><a href="https://qiita.com/okamu_/items/0f1055e5c91ed99ebec6" id="reference-4020dc31de05c3dad950">serverless frameworkを使って本格的なAPIサーバーを構築（ハンズオン編）</a></li>
<li><strong><a href="https://qiita.com/okamu_/items/c19e2a682afe41a47eb1">serverless frameworkを使って本格的なAPIサーバーを構築（Express編）</a>←　今ここ</strong></li>
<li><a href="https://qiita.com/okamu_/items/2967726eef27420e6c63" id="reference-c183d375f85632d55a35">serverless frameworkを使って本格的なAPIサーバーを構築（テストコード編）</a></li>
</ul>

<p><a href="https://camo.qiitausercontent.com/bca2e1899d6b398e26100843fc99a100b8766da7/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f65396666613034342d636461662d633032342d326462612d6236373034303761623164642e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/bca2e1899d6b398e26100843fc99a100b8766da7/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f65396666613034342d636461662d633032342d326462612d6236373034303761623164642e706e67" alt="framework_repo.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/62822/e9ffa044-cdaf-c024-2dba-b670407ab1dd.png"></a></p>

<p>前回まで、serverless frameworkのハンズオンの記事まで書きました。<br>
今回は、serverless frameworkで 「 <strong>lambda + APIGateway + DynamoDB</strong> 」　の構成ですが、<strong>Express</strong>を導入しローカルで実行できるようにします。</p>

<h2>
<span id="この記事でできるようになること" class="fragment"></span><a href="#%E3%81%93%E3%81%AE%E8%A8%98%E4%BA%8B%E3%81%A7%E3%81%A7%E3%81%8D%E3%82%8B%E3%82%88%E3%81%86%E3%81%AB%E3%81%AA%E3%82%8B%E3%81%93%E3%81%A8"><i class="fa fa-link"></i></a>この記事でできるようになること</h2>

<ul>
<li><strong>Lambda上でExpressを動かす</strong></li>
<li><strong>ローカルでAPIを試す環境を構築する</strong></li>
</ul>

<h2>
<span id="expressを使う旨味" class="fragment"></span><a href="#express%E3%82%92%E4%BD%BF%E3%81%86%E6%97%A8%E5%91%B3"><i class="fa fa-link"></i></a>Expressを使う旨味</h2>

<ul>
<li>サーバレスでサービス全体を作るのはしんどい</li>
<li><strong>ローカルで開発＋テストできるようになる</strong></li>
<li>Expressは、RubyのSinatraのようなシンプルなMVCフレームワークなので<strong>とっつきやすい</strong>
</li>
<li><strong>packege.jsonをfunctionごとに用意しなくて良くなる!!</strong></li>
</ul>

<h2>
<span id="前準備" class="fragment"></span><a href="#%E5%89%8D%E6%BA%96%E5%82%99"><i class="fa fa-link"></i></a>前準備</h2>

<ul>
<li>expressを<strong>install</strong>しておく</li>
<li>Lambda上でExpressを動かすツールとして、「<a href="https://github.com/awslabs/aws-serverless-express" rel="nofollow noopener" target="_blank">aws-serverless-express</a>(公式)」と「<a href="https://github.com/toduq/express-on-serverless" rel="nofollow noopener" target="_blank">express-on-serverless</a>」というものがあります。本来公式のものを使うべきですが、今回はexpress-on-serverlessを使用しました。</li>
</ul>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ yarn add express
$ yarn add express-on-serverless
</pre></div></div>

<h2>
<span id="まずは単純にjsonを返してみるexpress" class="fragment"></span><a href="#%E3%81%BE%E3%81%9A%E3%81%AF%E5%8D%98%E7%B4%94%E3%81%ABjson%E3%82%92%E8%BF%94%E3%81%97%E3%81%A6%E3%81%BF%E3%82%8Bexpress"><i class="fa fa-link"></i></a>まずは、単純にJSONを返してみる(Express)</h2>

<ul>
<li>serverless.ymlを編集します

<ul>
<li>/配下をAnyですべてExpressに渡します</li>
</ul>
</li>
</ul>

<div class="code-frame" data-lang="yaml">
<div class="code-lang"><span class="bold">serverless.yml</span></div>
<div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">functions</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">app</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">handler</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">functions/api/api.handler</span>
    <span class="l l-Scalar l-Scalar-Plain">events</span><span class="p p-Indicator">:</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">http</span><span class="p p-Indicator">:</span>
          <span class="l l-Scalar l-Scalar-Plain">path</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">/{proxy+}</span>
          <span class="l l-Scalar l-Scalar-Plain">method</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">any</span>
          <span class="l l-Scalar l-Scalar-Plain">cors</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">${self:custom.cors_enabled.${opt:stage, self:provider.stage}}</span>
</pre></div>
</div>

<ul>
<li>api.jsでは、<code>/hello</code> がきたらJSONを返すようにしておきます。</li>
</ul>

<div class="code-frame" data-lang="javascript">
<div class="code-lang"><span class="bold">functions/api/api.js</span></div>
<div class="highlight"><pre><span></span><span class="s1">'use strict'</span><span class="p">;</span>

<span class="kr">const</span> <span class="nx">express</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'express'</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">express</span><span class="p">();</span>
<span class="kr">const</span> <span class="nx">bodyParser</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'body-parser'</span><span class="p">);</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">bodyParser</span><span class="p">.</span><span class="nx">urlencoded</span><span class="p">({</span>
  <span class="nx">extended</span><span class="o">:</span> <span class="kc">true</span>
<span class="p">}));</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">bodyParser</span><span class="p">.</span><span class="nx">json</span><span class="p">());</span>

<span class="kr">const</span> <span class="nx">response</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">statusCode</span><span class="o">:</span> <span class="mi">200</span><span class="p">,</span>
  <span class="nx">body</span><span class="o">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
    <span class="nx">message</span><span class="o">:</span> <span class="s1">'Go Serverless v1.0! Your function executed successfully!'</span>
  <span class="p">}),</span>
<span class="p">};</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">"/hello"</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">){</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">(</span><span class="nx">response</span><span class="p">);</span>
<span class="p">});</span>
<span class="nx">exports</span><span class="p">.</span><span class="nx">handler</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'express-on-serverless'</span><span class="p">)(</span><span class="nx">app</span><span class="p">);</span>
</pre></div>
</div>

<h2>
<span id="ローカルで動かしてみる" class="fragment"></span><a href="#%E3%83%AD%E3%83%BC%E3%82%AB%E3%83%AB%E3%81%A7%E5%8B%95%E3%81%8B%E3%81%97%E3%81%A6%E3%81%BF%E3%82%8B"><i class="fa fa-link"></i></a>ローカルで動かしてみる</h2>

<ul>
<li>先ほどの、シンプルなアプリケーションをローカルで動かして見ましょう</li>
<li>functions/api/api.jsに以下を追記してください。</li>
</ul>

<div class="code-frame" data-lang="javascript">
<div class="code-lang"><span class="bold">functions/api/api.js</span></div>
<div class="highlight"><pre><span></span><span class="c1">// 追記する</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">NODE_ENV</span> <span class="o">===</span> <span class="s1">'dev'</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">app</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="mi">3000</span><span class="p">,</span>  <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"Node.js is listening to PORT: 3000"</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">}</span>
</pre></div>
</div>

<p>そしてサーバーを起動します <code>$ node functions/api/api.js</code></p>

<p>すると、<a href="http://localhost:3000/hello" rel="nofollow noopener" target="_blank">http://localhost:3000/hello</a> で先ほどのAPIにアクセスすることができます！！</p>

<ul>
<li>これで、<strong>deploy</strong>しても、前回と同じようなAPIを作ることができます！！</li>
</ul>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ sls deploy -v -s dev
</pre></div></div>

<p>デプロイが成功し、APIにアクセスすると<br>
前回Expressを使わずに作ったAPIと同じレスポンスになると思いますが、ローカルで開発できるようになったので、<strong>開発スピードは5000兆倍</strong>になります！！</p>

<h2>
<span id="まとめ" class="fragment"></span><a href="#%E3%81%BE%E3%81%A8%E3%82%81"><i class="fa fa-link"></i></a>まとめ</h2>

<ul>
<li>serverlessにExpressを乗せて使うと、開発スピードが5000兆倍になりました！！</li>
<li>今まで通り、serverlessの旨味を生かしたイベントのフックでの発動＋APIの構築ができるようになり利益ありありです。</li>
</ul>

<h2>
<span id="次回" class="fragment"></span><a href="#%E6%AC%A1%E5%9B%9E"><i class="fa fa-link"></i></a>次回</h2>

<ul>
<li>serverless frameworkを使って本格的なAPIサーバーを構築（テストコード編）です！！</li>
</ul>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>okamu_さんの<br />9位</center></td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>12</kbd>
		<a target="_blank" href="https://qiita.com/okamu_/items/0f1055e5c91ed99ebec6">serverless frameworkを使って本格的なAPIサーバーを構築（ハンズオン編）</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2017-09-25 00:04:02</center>
	</td>
	<td style="width:200px;">
		@okamu_<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/62822/profile-images/1491391263">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Node.js]</b> <b>[AWS]</b> <b>[Express]</b> <b>[lambda]</b> <b>[serverless]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;">
<h1>
<span id="serverless-frameworkを使って本格的なapiサーバーを構築ハンズオン編" class="fragment"></span><a href="#serverless-framework%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%A6%E6%9C%AC%E6%A0%BC%E7%9A%84%E3%81%AAapi%E3%82%B5%E3%83%BC%E3%83%90%E3%83%BC%E3%82%92%E6%A7%8B%E7%AF%89%E3%83%8F%E3%83%B3%E3%82%BA%E3%82%AA%E3%83%B3%E7%B7%A8"><i class="fa fa-link"></i></a>serverless frameworkを使って本格的なAPIサーバーを構築（ハンズオン編）</h1>

<p>最近、推しメンの　serverless framework の記事の第２弾です。<br>
保守メンテが楽になりつつも、実戦で速攻で構築ができます。</p>

<h2>
<span id="目次" class="fragment"></span><a href="#%E7%9B%AE%E6%AC%A1"><i class="fa fa-link"></i></a>目次</h2>

<ul>
<li><a href="https://qiita.com/okamu_/items/e246887cb6f2621ad40a" id="reference-df7e3d1183f9630cdba2">serverless frameworkを使って本格的なAPIサーバーを構築（魅力編）</a></li>
<li><strong><a href="https://qiita.com/okamu_/items/0f1055e5c91ed99ebec6">serverless frameworkを使って本格的なAPIサーバーを構築（ハンズオン編）</a>←　今ここ</strong></li>
<li><a href="https://qiita.com/okamu_/items/c19e2a682afe41a47eb1" id="reference-aad6a8a06d2f0934d8b5">serverless frameworkを使って本格的なAPIサーバーを構築（Express編）</a></li>
<li><a href="https://qiita.com/okamu_/items/2967726eef27420e6c63" id="reference-c87d890cfcd7e894b477">serverless frameworkを使って本格的なAPIサーバーを構築（テストコード編）</a></li>
</ul>

<p><a href="https://camo.qiitausercontent.com/bca2e1899d6b398e26100843fc99a100b8766da7/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f65396666613034342d636461662d633032342d326462612d6236373034303761623164642e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/bca2e1899d6b398e26100843fc99a100b8766da7/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f65396666613034342d636461662d633032342d326462612d6236373034303761623164642e706e67" alt="framework_repo.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/62822/e9ffa044-cdaf-c024-2dba-b670407ab1dd.png"></a></p>

<p>前回、serverless frameworkの魅力の記事を書きました。<br>
今回は、serverless frameworkで 「 <strong>lambda + APIGateway + DynamoDB</strong> 」　の構成で簡単なサンプルアプリを作成します。</p>

<h2>
<span id="この記事でできるようになること" class="fragment"></span><a href="#%E3%81%93%E3%81%AE%E8%A8%98%E4%BA%8B%E3%81%A7%E3%81%A7%E3%81%8D%E3%82%8B%E3%82%88%E3%81%86%E3%81%AB%E3%81%AA%E3%82%8B%E3%81%93%E3%81%A8"><i class="fa fa-link"></i></a>この記事でできるようになること</h2>

<ul>
<li>
<strong>REST FULL</strong>なAPIを構築する</li>
<li>
<strong>DynamoDB</strong>と連携できる</li>
<li>
<strong>スケージューリング</strong>で実行する</li>
<li>
<strong>DynamoStream</strong>が使えるようになる</li>
</ul>

<h2>
<span id="前準備" class="fragment"></span><a href="#%E5%89%8D%E6%BA%96%E5%82%99"><i class="fa fa-link"></i></a>前準備</h2>

<ul>
<li>serverlessを<strong>install</strong>しておく</li>
</ul>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ npm install -g serverless
</pre></div></div>

<ul>
<li>プロジェクトを<strong>生成</strong>する</li>
</ul>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ serverless create --template aws-nodejs --path my-service
</pre></div></div>

<p>すると、以下のファイルが出来ているはずです。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ ls
serverless.yml
handler.js
</pre></div></div>

<p>また、サービス用のテンプレートですが、以下の言語用のテンプレートが用意されています。</p>

<h4>
<span id="使える言語" class="fragment"></span><a href="#%E4%BD%BF%E3%81%88%E3%82%8B%E8%A8%80%E8%AA%9E"><i class="fa fa-link"></i></a>使える言語</h4>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>aws-nodejs
aws-python
aws-java-maven
aws-java-gradle
aws-scala-sbt
</pre></div></div>

<h2>
<span id="まずは単純にjsonを返してみる" class="fragment"></span><a href="#%E3%81%BE%E3%81%9A%E3%81%AF%E5%8D%98%E7%B4%94%E3%81%ABjson%E3%82%92%E8%BF%94%E3%81%97%E3%81%A6%E3%81%BF%E3%82%8B"><i class="fa fa-link"></i></a>まずは、単純にJSONを返してみる</h2>

<ul>
<li>最初はHelloWorld!をJSONで返すAPIで表示してみます。</li>
<li>
<code>serverless create</code> をした時点でhandler.jsはこのようになっているので、messageを <code>hello world</code> など適当に変えれば良いです。</li>
</ul>

<div class="code-frame" data-lang="javascript">
<div class="code-lang"><span class="bold">handler.js</span></div>
<div class="highlight"><pre><span></span><span class="s1">'use strict'</span><span class="p">;</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span><span class="p">.</span><span class="nx">hello</span> <span class="o">=</span> <span class="p">(</span><span class="nx">event</span><span class="p">,</span> <span class="nx">context</span><span class="p">,</span> <span class="nx">callback</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kr">const</span> <span class="nx">response</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">statusCode</span><span class="o">:</span> <span class="mi">200</span><span class="p">,</span>
    <span class="nx">body</span><span class="o">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
      <span class="nx">message</span><span class="o">:</span> <span class="s1">'Go Serverless v1.0! Your function executed successfully!'</span><span class="p">,</span>
      <span class="nx">input</span><span class="o">:</span> <span class="nx">event</span><span class="p">,</span>
    <span class="p">}),</span>
  <span class="p">};</span>

  <span class="nx">callback</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="nx">response</span><span class="p">);</span>

  <span class="c1">// Use this code if you don't use the http event with the LAMBDA-PROXY integration</span>
  <span class="c1">// callback(null, { message: 'Go Serverless v1.0! Your function executed successfully!', event });</span>
<span class="p">};</span>

</pre></div>
</div>

<ul>
<li>最初のserverless.ymlを少し編集します

<ul>
<li>regionがdefaultでは <code>us-east-1</code> なので <code>ap-northeast-1</code> にする</li>
<li>getでアクセスできるように eventsを追加する</li>
</ul>
</li>
</ul>

<div class="code-frame" data-lang="yaml">
<div class="code-lang"><span class="bold">serverless.yml</span></div>
<div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">service</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">my-service</span>

<span class="l l-Scalar l-Scalar-Plain">provider</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">aws</span>
  <span class="l l-Scalar l-Scalar-Plain">runtime</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">nodejs6.10</span>

  <span class="l l-Scalar l-Scalar-Plain">stage</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">dev</span>
  <span class="l l-Scalar l-Scalar-Plain">region</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">ap-northeast-1</span>

<span class="l l-Scalar l-Scalar-Plain">functions</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">hello</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">handler</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">handler.hello</span>
    <span class="l l-Scalar l-Scalar-Plain">events</span><span class="p p-Indicator">:</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">http</span><span class="p p-Indicator">:</span>
          <span class="l l-Scalar l-Scalar-Plain">path</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">hello</span>
          <span class="l l-Scalar l-Scalar-Plain">method</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">get</span>
</pre></div>
</div>

<ul>
<li>これでOKです！！　さっそく、<strong>deploy</strong>してみましょう！！！！！！</li>
</ul>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ sls deploy -v -s dev
</pre></div></div>

<ul>
<li>
<code>-v</code> は進捗を表示</li>
<li>
<code>-s</code> はステージの名前を指示します（defaultはdev）</li>
<li>APIGatewayでは、プロジェクトからステージごとにデプロイしていましたが、serverlessではステージごとにプロジェクトが作られます。</li>
</ul>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>Serverless: Stack update finished...
Service Information
service: XXXXXXXX
stage: dev
region: ap-northeast-1
api keys:
  None
endpoints:
  GET - https://XXXXXXXX.ap-northeast-1.amazonaws.com/dev/hello
functions:
  hello: XXXXXXXX
Stack Outputs

Serverless: Removing old service versions...
</pre></div></div>

<p>デプロイが成功すると、 APIGateWayには設定済みのプロジェクトと、<code>endpoints</code> を教えてくれるのでそこにアクセスしてみてhelloとJSONが表示されればOKです！！！</p>

<p><a href="https://camo.qiitausercontent.com/e4033c4c8ad5011bfadf02c5a92eecac06c06ba5/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f37626264663066342d626638332d613631382d343933622d6631663461616538643063392e706e67" target="_blank" rel="nofollow noopener"><img width="1356" alt="スクリーンショット 2017-09-23 15.28.55.png" src="https://camo.qiitausercontent.com/e4033c4c8ad5011bfadf02c5a92eecac06c06ba5/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f37626264663066342d626638332d613631382d343933622d6631663461616538643063392e706e67" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/62822/7bbdf0f4-bf83-a618-493b-f1f4aae8d0c9.png"></a></p>

<p><a href="https://camo.qiitausercontent.com/e467db6d80b49bbfb973f14b7788f7217ff91d81/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f36613534333937352d366233392d313833302d626163622d6434626138666562333236342e706e67" target="_blank" rel="nofollow noopener"><img width="764" alt="スクリーンショット 2017-09-23 15.28.38.png" src="https://camo.qiitausercontent.com/e467db6d80b49bbfb973f14b7788f7217ff91d81/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f36613534333937352d366233392d313833302d626163622d6434626138666562333236342e706e67" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/62822/6a543975-6b39-1830-bacb-d4ba8feb3264.png"></a></p>

<p>このように、GETでアクセスをするとさっき作成したJSONを返していることがわかります。<br>
完璧だー 🍙🍙🍙</p>

<h2>
<span id="rest-apiを作ってみる" class="fragment"></span><a href="#rest-api%E3%82%92%E4%BD%9C%E3%81%A3%E3%81%A6%E3%81%BF%E3%82%8B"><i class="fa fa-link"></i></a>REST APIを作ってみる</h2>

<ul>
<li><p>次は、<strong>DynamoDBと連携</strong> して、get post put deleteを実装してみます。</p></li>
<li><p>serverless.ymlを編集します</p></li>
<li><p>REST APIのサンプルは、<a href="https://github.com/serverless/examples/tree/master/aws-node-rest-api-with-dynamodb" rel="nofollow noopener" target="_blank">aws-node-rest-api-with-dynamodb</a>にあります。</p></li>
</ul>

<h3>
<span id="serverlessyml" class="fragment"></span><a href="#serverlessyml"><i class="fa fa-link"></i></a>serverless.yml</h3>

<div class="code-frame" data-lang="yaml">
<div class="code-lang"><span class="bold">serverless.yml</span></div>
<div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">service</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">serverless-rest-api-with-dynamodb</span>

<span class="l l-Scalar l-Scalar-Plain">frameworkVersion</span><span class="p p-Indicator">:</span> <span class="s">"&gt;=1.1.0</span><span class="nv"> </span><span class="s">&lt;2.0.0"</span>

<span class="l l-Scalar l-Scalar-Plain">provider</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">aws</span>
  <span class="l l-Scalar l-Scalar-Plain">runtime</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">nodejs4.3</span>
  <span class="l l-Scalar l-Scalar-Plain">environment</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">DYNAMODB_TABLE</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">${self:service}-${opt:stage, self:provider.stage}</span>
  <span class="l l-Scalar l-Scalar-Plain">iamRoleStatements</span><span class="p p-Indicator">:</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">Effect</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">Allow</span>
      <span class="l l-Scalar l-Scalar-Plain">Action</span><span class="p p-Indicator">:</span>
        <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">dynamodb:Query</span>
        <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">dynamodb:Scan</span>
        <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">dynamodb:GetItem</span>
        <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">dynamodb:PutItem</span>
        <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">dynamodb:UpdateItem</span>
        <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">dynamodb:DeleteItem</span>
      <span class="l l-Scalar l-Scalar-Plain">Resource</span><span class="p p-Indicator">:</span> <span class="s">"arn:aws:dynamodb:${opt:region,</span><span class="nv"> </span><span class="s">self:provider.region}:*:table/${self:provider.environment.DYNAMODB_TABLE}"</span>

<span class="l l-Scalar l-Scalar-Plain">functions</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">create</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">handler</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">todos/create.create</span>
    <span class="l l-Scalar l-Scalar-Plain">events</span><span class="p p-Indicator">:</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">http</span><span class="p p-Indicator">:</span>
          <span class="l l-Scalar l-Scalar-Plain">path</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">todos</span>
          <span class="l l-Scalar l-Scalar-Plain">method</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">post</span>
          <span class="l l-Scalar l-Scalar-Plain">cors</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>

  <span class="l l-Scalar l-Scalar-Plain">list</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">handler</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">todos/list.list</span>
    <span class="l l-Scalar l-Scalar-Plain">events</span><span class="p p-Indicator">:</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">http</span><span class="p p-Indicator">:</span>
          <span class="l l-Scalar l-Scalar-Plain">path</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">todos</span>
          <span class="l l-Scalar l-Scalar-Plain">method</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">get</span>
          <span class="l l-Scalar l-Scalar-Plain">cors</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>

  <span class="l l-Scalar l-Scalar-Plain">get</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">handler</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">todos/get.get</span>
    <span class="l l-Scalar l-Scalar-Plain">events</span><span class="p p-Indicator">:</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">http</span><span class="p p-Indicator">:</span>
          <span class="l l-Scalar l-Scalar-Plain">path</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">todos/{id}</span>
          <span class="l l-Scalar l-Scalar-Plain">method</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">get</span>
          <span class="l l-Scalar l-Scalar-Plain">cors</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>

  <span class="l l-Scalar l-Scalar-Plain">update</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">handler</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">todos/update.update</span>
    <span class="l l-Scalar l-Scalar-Plain">events</span><span class="p p-Indicator">:</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">http</span><span class="p p-Indicator">:</span>
          <span class="l l-Scalar l-Scalar-Plain">path</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">todos/{id}</span>
          <span class="l l-Scalar l-Scalar-Plain">method</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">put</span>
          <span class="l l-Scalar l-Scalar-Plain">cors</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>

  <span class="l l-Scalar l-Scalar-Plain">delete</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">handler</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">todos/delete.delete</span>
    <span class="l l-Scalar l-Scalar-Plain">events</span><span class="p p-Indicator">:</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">http</span><span class="p p-Indicator">:</span>
          <span class="l l-Scalar l-Scalar-Plain">path</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">todos/{id}</span>
          <span class="l l-Scalar l-Scalar-Plain">method</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">delete</span>
          <span class="l l-Scalar l-Scalar-Plain">cors</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>

<span class="l l-Scalar l-Scalar-Plain">resources</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">Resources</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">TodosDynamoDbTable</span><span class="p p-Indicator">:</span>
      <span class="l l-Scalar l-Scalar-Plain">Type</span><span class="p p-Indicator">:</span> <span class="s">'AWS::DynamoDB::Table'</span>
      <span class="l l-Scalar l-Scalar-Plain">DeletionPolicy</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">Retain</span>
      <span class="l l-Scalar l-Scalar-Plain">Properties</span><span class="p p-Indicator">:</span>
        <span class="l l-Scalar l-Scalar-Plain">AttributeDefinitions</span><span class="p p-Indicator">:</span>
          <span class="p p-Indicator">-</span>
            <span class="l l-Scalar l-Scalar-Plain">AttributeName</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">id</span>
            <span class="l l-Scalar l-Scalar-Plain">AttributeType</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">S</span>
        <span class="l l-Scalar l-Scalar-Plain">KeySchema</span><span class="p p-Indicator">:</span>
          <span class="p p-Indicator">-</span>
            <span class="l l-Scalar l-Scalar-Plain">AttributeName</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">id</span>
            <span class="l l-Scalar l-Scalar-Plain">KeyType</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">HASH</span>
        <span class="l l-Scalar l-Scalar-Plain">ProvisionedThroughput</span><span class="p p-Indicator">:</span>
          <span class="l l-Scalar l-Scalar-Plain">ReadCapacityUnits</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">1</span>
          <span class="l l-Scalar l-Scalar-Plain">WriteCapacityUnits</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">1</span>
        <span class="l l-Scalar l-Scalar-Plain">TableName</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">${self:provider.environment.DYNAMODB_TABLE}</span>
</pre></div>
</div>

<ul>
<li>serverless.ymlのポイント

<ul>
<li>environmentで、どのLambdaからでも <code>DYNAMODB_TABLE</code> を参照することができます。</li>
<li>todosというフォルダの中に create.js get.js list.js delete.js update.jsを置いておきます。</li>
<li>resourcesでDynamoDBを生成しています。</li>
</ul>
</li>
</ul>

<p>次に、それぞれのLambda関数を作成します</p>

<h3>
<span id="createjs" class="fragment"></span><a href="#createjs"><i class="fa fa-link"></i></a>create.js</h3>

<div class="code-frame" data-lang="javascript">
<div class="code-lang"><span class="bold">todos/create.js</span></div>
<div class="highlight"><pre><span></span><span class="s1">'use strict'</span><span class="p">;</span>

<span class="kr">const</span> <span class="nx">uuid</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'uuid'</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">AWS</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'aws-sdk'</span><span class="p">);</span> <span class="c1">// eslint-disable-line import/no-extraneous-dependencies</span>

<span class="kr">const</span> <span class="nx">dynamoDb</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">AWS</span><span class="p">.</span><span class="nx">DynamoDB</span><span class="p">.</span><span class="nx">DocumentClient</span><span class="p">();</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span><span class="p">.</span><span class="nx">create</span> <span class="o">=</span> <span class="p">(</span><span class="nx">event</span><span class="p">,</span> <span class="nx">context</span><span class="p">,</span> <span class="nx">callback</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kr">const</span> <span class="nx">timestamp</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">().</span><span class="nx">getTime</span><span class="p">();</span>
  <span class="kr">const</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">body</span><span class="p">);</span>
  <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">data</span><span class="p">.</span><span class="nx">text</span> <span class="o">!==</span> <span class="s1">'string'</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s1">'Validation Failed'</span><span class="p">);</span>
    <span class="nx">callback</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="p">{</span>
      <span class="nx">statusCode</span><span class="o">:</span> <span class="mi">400</span><span class="p">,</span>
      <span class="nx">headers</span><span class="o">:</span> <span class="p">{</span> <span class="s1">'Content-Type'</span><span class="o">:</span> <span class="s1">'text/plain'</span> <span class="p">},</span>
      <span class="nx">body</span><span class="o">:</span> <span class="s1">'Couldn\'t create the todo item.'</span><span class="p">,</span>
    <span class="p">});</span>
    <span class="k">return</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="kr">const</span> <span class="nx">params</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">TableName</span><span class="o">:</span> <span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">DYNAMODB_TABLE</span><span class="p">,</span>
    <span class="nx">Item</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">id</span><span class="o">:</span> <span class="nx">uuid</span><span class="p">.</span><span class="nx">v1</span><span class="p">(),</span>
      <span class="nx">text</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">text</span><span class="p">,</span>
      <span class="nx">checked</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
      <span class="nx">createdAt</span><span class="o">:</span> <span class="nx">timestamp</span><span class="p">,</span>
      <span class="nx">updatedAt</span><span class="o">:</span> <span class="nx">timestamp</span><span class="p">,</span>
    <span class="p">},</span>
  <span class="p">};</span>

  <span class="c1">// write the todo to the database</span>
  <span class="nx">dynamoDb</span><span class="p">.</span><span class="nx">put</span><span class="p">(</span><span class="nx">params</span><span class="p">,</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// handle potential errors</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
      <span class="nx">callback</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="p">{</span>
        <span class="nx">statusCode</span><span class="o">:</span> <span class="nx">error</span><span class="p">.</span><span class="nx">statusCode</span> <span class="o">||</span> <span class="mi">501</span><span class="p">,</span>
        <span class="nx">headers</span><span class="o">:</span> <span class="p">{</span> <span class="s1">'Content-Type'</span><span class="o">:</span> <span class="s1">'text/plain'</span> <span class="p">},</span>
        <span class="nx">body</span><span class="o">:</span> <span class="s1">'Couldn\'t create the todo item.'</span><span class="p">,</span>
      <span class="p">});</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">// create a response</span>
    <span class="kr">const</span> <span class="nx">response</span> <span class="o">=</span> <span class="p">{</span>
      <span class="nx">statusCode</span><span class="o">:</span> <span class="mi">200</span><span class="p">,</span>
      <span class="nx">body</span><span class="o">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">params</span><span class="p">.</span><span class="nx">Item</span><span class="p">),</span>
    <span class="p">};</span>
    <span class="nx">callback</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="nx">response</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">};</span>
</pre></div>
</div>

<h3>
<span id="deletejs" class="fragment"></span><a href="#deletejs"><i class="fa fa-link"></i></a>delete.js</h3>

<div class="code-frame" data-lang="javascript">
<div class="code-lang"><span class="bold">todos/delete.js</span></div>
<div class="highlight"><pre><span></span><span class="s1">'use strict'</span><span class="p">;</span>

<span class="kr">const</span> <span class="nx">AWS</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'aws-sdk'</span><span class="p">);</span> <span class="c1">// eslint-disable-line import/no-extraneous-dependencies</span>

<span class="kr">const</span> <span class="nx">dynamoDb</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">AWS</span><span class="p">.</span><span class="nx">DynamoDB</span><span class="p">.</span><span class="nx">DocumentClient</span><span class="p">();</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span><span class="p">.</span><span class="k">delete</span> <span class="o">=</span> <span class="p">(</span><span class="nx">event</span><span class="p">,</span> <span class="nx">context</span><span class="p">,</span> <span class="nx">callback</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kr">const</span> <span class="nx">params</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">TableName</span><span class="o">:</span> <span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">DYNAMODB_TABLE</span><span class="p">,</span>
    <span class="nx">Key</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">id</span><span class="o">:</span> <span class="nx">event</span><span class="p">.</span><span class="nx">pathParameters</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span>
    <span class="p">},</span>
  <span class="p">};</span>

  <span class="c1">// delete the todo from the database</span>
  <span class="nx">dynamoDb</span><span class="p">.</span><span class="k">delete</span><span class="p">(</span><span class="nx">params</span><span class="p">,</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// handle potential errors</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
      <span class="nx">callback</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="p">{</span>
        <span class="nx">statusCode</span><span class="o">:</span> <span class="nx">error</span><span class="p">.</span><span class="nx">statusCode</span> <span class="o">||</span> <span class="mi">501</span><span class="p">,</span>
        <span class="nx">headers</span><span class="o">:</span> <span class="p">{</span> <span class="s1">'Content-Type'</span><span class="o">:</span> <span class="s1">'text/plain'</span> <span class="p">},</span>
        <span class="nx">body</span><span class="o">:</span> <span class="s1">'Couldn\'t remove the todo item.'</span><span class="p">,</span>
      <span class="p">});</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">// create a response</span>
    <span class="kr">const</span> <span class="nx">response</span> <span class="o">=</span> <span class="p">{</span>
      <span class="nx">statusCode</span><span class="o">:</span> <span class="mi">200</span><span class="p">,</span>
      <span class="nx">body</span><span class="o">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({}),</span>
    <span class="p">};</span>
    <span class="nx">callback</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="nx">response</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">};</span>
</pre></div>
</div>

<h3>
<span id="getjs" class="fragment"></span><a href="#getjs"><i class="fa fa-link"></i></a>get.js</h3>

<div class="code-frame" data-lang="javascript">
<div class="code-lang"><span class="bold">todos/get.js</span></div>
<div class="highlight"><pre><span></span><span class="s1">'use strict'</span><span class="p">;</span>

<span class="kr">const</span> <span class="nx">AWS</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'aws-sdk'</span><span class="p">);</span> <span class="c1">// eslint-disable-line import/no-extraneous-dependencies</span>

<span class="kr">const</span> <span class="nx">dynamoDb</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">AWS</span><span class="p">.</span><span class="nx">DynamoDB</span><span class="p">.</span><span class="nx">DocumentClient</span><span class="p">();</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span><span class="p">.</span><span class="nx">get</span> <span class="o">=</span> <span class="p">(</span><span class="nx">event</span><span class="p">,</span> <span class="nx">context</span><span class="p">,</span> <span class="nx">callback</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kr">const</span> <span class="nx">params</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">TableName</span><span class="o">:</span> <span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">DYNAMODB_TABLE</span><span class="p">,</span>
    <span class="nx">Key</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">id</span><span class="o">:</span> <span class="nx">event</span><span class="p">.</span><span class="nx">pathParameters</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span>
    <span class="p">},</span>
  <span class="p">};</span>

  <span class="c1">// fetch todo from the database</span>
  <span class="nx">dynamoDb</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">params</span><span class="p">,</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">result</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// handle potential errors</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
      <span class="nx">callback</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="p">{</span>
        <span class="nx">statusCode</span><span class="o">:</span> <span class="nx">error</span><span class="p">.</span><span class="nx">statusCode</span> <span class="o">||</span> <span class="mi">501</span><span class="p">,</span>
        <span class="nx">headers</span><span class="o">:</span> <span class="p">{</span> <span class="s1">'Content-Type'</span><span class="o">:</span> <span class="s1">'text/plain'</span> <span class="p">},</span>
        <span class="nx">body</span><span class="o">:</span> <span class="s1">'Couldn\'t fetch the todo item.'</span><span class="p">,</span>
      <span class="p">});</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">// create a response</span>
    <span class="kr">const</span> <span class="nx">response</span> <span class="o">=</span> <span class="p">{</span>
      <span class="nx">statusCode</span><span class="o">:</span> <span class="mi">200</span><span class="p">,</span>
      <span class="nx">body</span><span class="o">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">Item</span><span class="p">),</span>
    <span class="p">};</span>
    <span class="nx">callback</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="nx">response</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">};</span>
</pre></div>
</div>

<h3>
<span id="listjs" class="fragment"></span><a href="#listjs"><i class="fa fa-link"></i></a>list.js</h3>

<div class="code-frame" data-lang="javascript">
<div class="code-lang"><span class="bold">todos/list.js</span></div>
<div class="highlight"><pre><span></span><span class="s1">'use strict'</span><span class="p">;</span>

<span class="kr">const</span> <span class="nx">AWS</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'aws-sdk'</span><span class="p">);</span> <span class="c1">// eslint-disable-line import/no-extraneous-dependencies</span>

<span class="kr">const</span> <span class="nx">dynamoDb</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">AWS</span><span class="p">.</span><span class="nx">DynamoDB</span><span class="p">.</span><span class="nx">DocumentClient</span><span class="p">();</span>
<span class="kr">const</span> <span class="nx">params</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">TableName</span><span class="o">:</span> <span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">DYNAMODB_TABLE</span><span class="p">,</span>
<span class="p">};</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span><span class="p">.</span><span class="nx">list</span> <span class="o">=</span> <span class="p">(</span><span class="nx">event</span><span class="p">,</span> <span class="nx">context</span><span class="p">,</span> <span class="nx">callback</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">// fetch all todos from the database</span>
  <span class="nx">dynamoDb</span><span class="p">.</span><span class="nx">scan</span><span class="p">(</span><span class="nx">params</span><span class="p">,</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">result</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// handle potential errors</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
      <span class="nx">callback</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="p">{</span>
        <span class="nx">statusCode</span><span class="o">:</span> <span class="nx">error</span><span class="p">.</span><span class="nx">statusCode</span> <span class="o">||</span> <span class="mi">501</span><span class="p">,</span>
        <span class="nx">headers</span><span class="o">:</span> <span class="p">{</span> <span class="s1">'Content-Type'</span><span class="o">:</span> <span class="s1">'text/plain'</span> <span class="p">},</span>
        <span class="nx">body</span><span class="o">:</span> <span class="s1">'Couldn\'t fetch the todos.'</span><span class="p">,</span>
      <span class="p">});</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">// create a response</span>
    <span class="kr">const</span> <span class="nx">response</span> <span class="o">=</span> <span class="p">{</span>
      <span class="nx">statusCode</span><span class="o">:</span> <span class="mi">200</span><span class="p">,</span>
      <span class="nx">body</span><span class="o">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">Items</span><span class="p">),</span>
    <span class="p">};</span>
    <span class="nx">callback</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="nx">response</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">};</span>
</pre></div>
</div>

<h3>
<span id="updatejs" class="fragment"></span><a href="#updatejs"><i class="fa fa-link"></i></a>update.js</h3>

<div class="code-frame" data-lang="javascript">
<div class="code-lang"><span class="bold">todos/update.js</span></div>
<div class="highlight"><pre><span></span><span class="s1">'use strict'</span><span class="p">;</span>

<span class="kr">const</span> <span class="nx">AWS</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'aws-sdk'</span><span class="p">);</span> <span class="c1">// eslint-disable-line import/no-extraneous-dependencies</span>

<span class="kr">const</span> <span class="nx">dynamoDb</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">AWS</span><span class="p">.</span><span class="nx">DynamoDB</span><span class="p">.</span><span class="nx">DocumentClient</span><span class="p">();</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span><span class="p">.</span><span class="nx">update</span> <span class="o">=</span> <span class="p">(</span><span class="nx">event</span><span class="p">,</span> <span class="nx">context</span><span class="p">,</span> <span class="nx">callback</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kr">const</span> <span class="nx">timestamp</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">().</span><span class="nx">getTime</span><span class="p">();</span>
  <span class="kr">const</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">body</span><span class="p">);</span>

  <span class="c1">// validation</span>
  <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">data</span><span class="p">.</span><span class="nx">text</span> <span class="o">!==</span> <span class="s1">'string'</span> <span class="o">||</span> <span class="k">typeof</span> <span class="nx">data</span><span class="p">.</span><span class="nx">checked</span> <span class="o">!==</span> <span class="s1">'boolean'</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s1">'Validation Failed'</span><span class="p">);</span>
    <span class="nx">callback</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="p">{</span>
      <span class="nx">statusCode</span><span class="o">:</span> <span class="mi">400</span><span class="p">,</span>
      <span class="nx">headers</span><span class="o">:</span> <span class="p">{</span> <span class="s1">'Content-Type'</span><span class="o">:</span> <span class="s1">'text/plain'</span> <span class="p">},</span>
      <span class="nx">body</span><span class="o">:</span> <span class="s1">'Couldn\'t update the todo item.'</span><span class="p">,</span>
    <span class="p">});</span>
    <span class="k">return</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="kr">const</span> <span class="nx">params</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">TableName</span><span class="o">:</span> <span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">DYNAMODB_TABLE</span><span class="p">,</span>
    <span class="nx">Key</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">id</span><span class="o">:</span> <span class="nx">event</span><span class="p">.</span><span class="nx">pathParameters</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="nx">ExpressionAttributeNames</span><span class="o">:</span> <span class="p">{</span>
      <span class="s1">'#todo_text'</span><span class="o">:</span> <span class="s1">'text'</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="nx">ExpressionAttributeValues</span><span class="o">:</span> <span class="p">{</span>
      <span class="s1">':text'</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">text</span><span class="p">,</span>
      <span class="s1">':checked'</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">checked</span><span class="p">,</span>
      <span class="s1">':updatedAt'</span><span class="o">:</span> <span class="nx">timestamp</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="nx">UpdateExpression</span><span class="o">:</span> <span class="s1">'SET #todo_text = :text, checked = :checked, updatedAt = :updatedAt'</span><span class="p">,</span>
    <span class="nx">ReturnValues</span><span class="o">:</span> <span class="s1">'ALL_NEW'</span><span class="p">,</span>
  <span class="p">};</span>

  <span class="c1">// update the todo in the database</span>
  <span class="nx">dynamoDb</span><span class="p">.</span><span class="nx">update</span><span class="p">(</span><span class="nx">params</span><span class="p">,</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">result</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// handle potential errors</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
      <span class="nx">callback</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="p">{</span>
        <span class="nx">statusCode</span><span class="o">:</span> <span class="nx">error</span><span class="p">.</span><span class="nx">statusCode</span> <span class="o">||</span> <span class="mi">501</span><span class="p">,</span>
        <span class="nx">headers</span><span class="o">:</span> <span class="p">{</span> <span class="s1">'Content-Type'</span><span class="o">:</span> <span class="s1">'text/plain'</span> <span class="p">},</span>
        <span class="nx">body</span><span class="o">:</span> <span class="s1">'Couldn\'t fetch the todo item.'</span><span class="p">,</span>
      <span class="p">});</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">// create a response</span>
    <span class="kr">const</span> <span class="nx">response</span> <span class="o">=</span> <span class="p">{</span>
      <span class="nx">statusCode</span><span class="o">:</span> <span class="mi">200</span><span class="p">,</span>
      <span class="nx">body</span><span class="o">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">Attributes</span><span class="p">),</span>
    <span class="p">};</span>
    <span class="nx">callback</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="nx">response</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">};</span>
</pre></div>
</div>

<p>これもデプロイをしてみてください！！</p>

<p>postmanなどで GET POST PUT DELETE すると確認ができるはずです。</p>

<h2>
<span id="スケジュールを設定して定期実行してみる" class="fragment"></span><a href="#%E3%82%B9%E3%82%B1%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB%E3%82%92%E8%A8%AD%E5%AE%9A%E3%81%97%E3%81%A6%E5%AE%9A%E6%9C%9F%E5%AE%9F%E8%A1%8C%E3%81%97%E3%81%A6%E3%81%BF%E3%82%8B"><i class="fa fa-link"></i></a>スケジュールを設定して定期実行してみる</h2>

<ul>
<li><p>Lambdaの定期実行の形式をserverless.ymlにそのまま記述することもできます。</p></li>
<li><p><a href="http://docs.aws.amazon.com/ja_jp/lambda/latest/dg/tutorial-scheduled-events-schedule-expressions.html" rel="nofollow noopener" target="_blank">scheduled-events-schedule-expressions</a></p></li>
</ul>

<div class="code-frame" data-lang="yaml">
<div class="code-lang"><span class="bold">serverless.yml</span></div>
<div class="highlight"><pre><span></span>  <span class="l l-Scalar l-Scalar-Plain">hoge</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">handler</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">functions/aggregate/index.handler</span>
    <span class="l l-Scalar l-Scalar-Plain">events</span><span class="p p-Indicator">:</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">schedule</span><span class="p p-Indicator">:</span>
          <span class="l l-Scalar l-Scalar-Plain">rate</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">cron(0 1 * * ? *)</span>

</pre></div>
</div>

<div class="code-frame" data-lang="yaml">
<div class="code-lang"><span class="bold">serverless.yml</span></div>
<div class="highlight"><pre><span></span>  <span class="l l-Scalar l-Scalar-Plain">hoge</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">handler</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">functions/aggregate/index.handler</span>
    <span class="l l-Scalar l-Scalar-Plain">events</span><span class="p p-Indicator">:</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">schedule</span><span class="p p-Indicator">:</span>
          <span class="l l-Scalar l-Scalar-Plain">rate</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">rate(5 minutes)</span>
</pre></div>
</div>

<h2>
<span id="dynamostreamを使ってputされたときに何か実行してみる" class="fragment"></span><a href="#dynamostream%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%A6put%E3%81%95%E3%82%8C%E3%81%9F%E3%81%A8%E3%81%8D%E3%81%AB%E4%BD%95%E3%81%8B%E5%AE%9F%E8%A1%8C%E3%81%97%E3%81%A6%E3%81%BF%E3%82%8B"><i class="fa fa-link"></i></a>DynamoStreamを使ってputされたときに何か実行してみる</h2>

<ul>
<li><p>DynamoStreamとは、DynamoDBにputやupdateがあった場合に、そのイベントをトリガーにLambdaでまた処理させることができます。</p></li>
<li><p>DynamoのResourcesに<code>StreamViewType</code> を追加</p></li>
</ul>

<div class="code-frame" data-lang="yaml">
<div class="code-lang"><span class="bold">serverless.yml</span></div>
<div class="highlight"><pre><span></span>    <span class="l l-Scalar l-Scalar-Plain">HogeDynamoDbTable</span><span class="p p-Indicator">:</span>
      <span class="l l-Scalar l-Scalar-Plain">Type</span><span class="p p-Indicator">:</span> <span class="s">'AWS::DynamoDB::Table'</span>
      <span class="l l-Scalar l-Scalar-Plain">DeletionPolicy</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">Retain</span>
      <span class="l l-Scalar l-Scalar-Plain">Properties</span><span class="p p-Indicator">:</span>
        <span class="l l-Scalar l-Scalar-Plain">AttributeDefinitions</span><span class="p p-Indicator">:</span>
          <span class="p p-Indicator">-</span>
            <span class="l l-Scalar l-Scalar-Plain">AttributeName</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">column</span>
            <span class="l l-Scalar l-Scalar-Plain">AttributeType</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">S</span>
        <span class="l l-Scalar l-Scalar-Plain">KeySchema</span><span class="p p-Indicator">:</span>
          <span class="p p-Indicator">-</span>
            <span class="l l-Scalar l-Scalar-Plain">AttributeName</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">column</span>
            <span class="l l-Scalar l-Scalar-Plain">KeyType</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">HASH</span>

        <span class="l l-Scalar l-Scalar-Plain">ProvisionedThroughput</span><span class="p p-Indicator">:</span>
          <span class="l l-Scalar l-Scalar-Plain">ReadCapacityUnits</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">1</span>
          <span class="l l-Scalar l-Scalar-Plain">WriteCapacityUnits</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">1</span>
        <span class="l l-Scalar l-Scalar-Plain">TableName</span><span class="p p-Indicator">:</span> <span class="s">"hoge-${self:provider.stage}"</span>
        <span class="l l-Scalar l-Scalar-Plain">StreamSpecification</span><span class="p p-Indicator">:</span>
          <span class="l l-Scalar l-Scalar-Plain">StreamViewType</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">KEYS_ONLY</span>
</pre></div>
</div>

<p>そして、Streamでどの関数が呼ばれるかを指定します<br>
以下のようにすると、二つのDynamoDBに変更がある場合に１つのLambda関数が呼ばれます。</p>

<div class="code-frame" data-lang="yaml">
<div class="code-lang"><span class="bold">serverless.yml</span></div>
<div class="highlight"><pre><span></span>  <span class="l l-Scalar l-Scalar-Plain">hoge</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">handler</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">functions/hoge/index.handler</span>
    <span class="l l-Scalar l-Scalar-Plain">events</span><span class="p p-Indicator">:</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">stream</span><span class="p p-Indicator">:</span>
          <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">dynamodb</span>
          <span class="l l-Scalar l-Scalar-Plain">arn</span><span class="p p-Indicator">:</span>
            <span class="l l-Scalar l-Scalar-Plain">Fn::GetAtt</span><span class="p p-Indicator">:</span>
              <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">HogeDynamoDbTable</span>
              <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">StreamArn</span>
          <span class="l l-Scalar l-Scalar-Plain">batchSize</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">1</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">stream</span><span class="p p-Indicator">:</span>
          <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">dynamodb</span>
          <span class="l l-Scalar l-Scalar-Plain">arn</span><span class="p p-Indicator">:</span>
            <span class="l l-Scalar l-Scalar-Plain">Fn::GetAtt</span><span class="p p-Indicator">:</span>
              <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">HogeDynamoDbTable2</span>
              <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">StreamArn</span>
          <span class="l l-Scalar l-Scalar-Plain">batchSize</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">1</span>
</pre></div>
</div>

<p>batchSizeは１度にどれだけ項目がほしいか設定できます。</p>

<p>ちなみに、StreamViewTypeには</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>KEYS_ONLY =&gt; HASHキーのみ関数で取得できる
NEW_IMAGE =&gt; 　新しいものだけ取得できます
OLD_IMAGE =&gt; 古いものだけ取得できます
NEW_AND_OLD_IMAGES =&gt; 新旧のデータが取得できます
</pre></div></div>

<p>があります。</p>

<h2>
<span id="その他できること" class="fragment"></span><a href="#%E3%81%9D%E3%81%AE%E4%BB%96%E3%81%A7%E3%81%8D%E3%82%8B%E3%81%93%E3%81%A8"><i class="fa fa-link"></i></a>その他できること</h2>

<ul>
<li>serverlessで、SNS IoT S3 Kinesisのイベントなどをトリガーとして発動させることができます。</li>
<li><a href="https://serverless.com/framework/docs/providers/aws/events/" class="autolink" rel="nofollow noopener" target="_blank">https://serverless.com/framework/docs/providers/aws/events/</a></li>
</ul>

<h2>
<span id="まとめ" class="fragment"></span><a href="#%E3%81%BE%E3%81%A8%E3%82%81"><i class="fa fa-link"></i></a>まとめ</h2>

<ul>
<li>serverlessを使うとかんたんにAPIが作成できました！！</li>
<li>イベントの作成やオプションもまったく困らないと思います。</li>
<li>サンプルやプラグインが豊富で、ベストプラクティスには迷いません！</li>
</ul>

<h2>
<span id="余談" class="fragment"></span><a href="#%E4%BD%99%E8%AB%87"><i class="fa fa-link"></i></a>余談</h2>

<ul>
<li>前回serverlessの魅了の紹介で、serverlessを使わないほうがいいときはないのかという質問を受けました。</li>
</ul>

<h4>
<span id="serverlessを使わないほうがいいとき" class="fragment"></span><a href="#serverless%E3%82%92%E4%BD%BF%E3%82%8F%E3%81%AA%E3%81%84%E3%81%BB%E3%81%86%E3%81%8C%E3%81%84%E3%81%84%E3%81%A8%E3%81%8D"><i class="fa fa-link"></i></a>serverlessを使わないほうがいいとき</h4>

<ul>
<li>複雑なクエリを要するアプリを作るとき

<ul>
<li>複雑なクエリを要するアプリを作るときは、DynamoDBでも設計を入念に行えばいいかと思いますが、whereなどのクエリが使えないので注意が必要です</li>
<li>MySQLクライアントもLambdaで使用することができますが、若干使いにくいようです。</li>
</ul>
</li>
<li>Dynamoに書き込む容量が大きいとき

<ul>
<li>DynamoDBはとても安いですが、書き込み読み込みのキャパシティが多くなると料金が結構高くなりますので注意が必要です。</li>
<li><a href="https://www.slideshare.net/AmazonWebServicesJapan/20150805-aws-blackbeltdynamodb" class="autolink" rel="nofollow noopener" target="_blank">https://www.slideshare.net/AmazonWebServicesJapan/20150805-aws-blackbeltdynamodb</a></li>
<li><a href="https://qiita.com/YU81/items/e1e336990ed8cfb938d9" class="autolink" id="reference-bddfa07db2b0bdd7674c">https://qiita.com/YU81/items/e1e336990ed8cfb938d9</a></li>
</ul>
</li>
</ul>

<h2>
<span id="次回" class="fragment"></span><a href="#%E6%AC%A1%E5%9B%9E"><i class="fa fa-link"></i></a>次回</h2>

<ul>
<li><a href="https://qiita.com/okamu_/items/c19e2a682afe41a47eb1">serverless frameworkを使って本格的なAPIサーバーを構築（Express編）です！！</a></li>
</ul>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>okamu_さんの<br />10位</center></td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>10</kbd>
		<a target="_blank" href="https://qiita.com/okamu_/items/a664118489a790faed31">HighSierraにしたら、はい死んだ</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2017-10-28 11:01:15</center>
	</td>
	<td style="width:200px;">
		@okamu_<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/62822/profile-images/1491391263">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[MacOSX]</b> <b>[HighSierra]</b> <b>[1000チャレンジ]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>HighSierraにバージョンをあげて１ヶ月で、OSがインストールされていませんと言われました。<br>
そこからの復旧作業など、人柱の役目としてまとめます。</p>

<p>時は、2017年10月24日 明朝 7:11頃<br>
macoOS could not be installed on your computer</p>

<p><a href="https://camo.qiitausercontent.com/ce03bd1beeea1a43a455d417777259717cba0ee1/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f36626634343962392d313930342d373335302d323434302d6662633734343934383032342e6a706567" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/ce03bd1beeea1a43a455d417777259717cba0ee1/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f36626634343962392d313930342d373335302d323434302d6662633734343934383032342e6a706567" alt="IMG_9111.JPG" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/62822/6bf449b9-1904-7350-2440-fbc744948024.jpeg"></a></p>

<h2>
<span id="highsierraとは" class="fragment"></span><a href="#highsierra%E3%81%A8%E3%81%AF"><i class="fa fa-link"></i></a>HighSierraとは</h2>

<p>macOS High Sierra（マックオーエス ハイ シエラ）は、アップルが開発したMacintosh向けのオペレーティングシステム(OS)。macOSシリーズの14番目のバージョンである。バージョンナンバーは10.13。macOS Sierraの後継バージョンとして、2017年6月5日（ ...</p>

<h2>
<span id="死ぬまでの兆候" class="fragment"></span><a href="#%E6%AD%BB%E3%81%AC%E3%81%BE%E3%81%A7%E3%81%AE%E5%85%86%E5%80%99"><i class="fa fa-link"></i></a>死ぬまでの兆候</h2>

<ul>
<li>HighSierraが公開された直後からinstall</li>
<li>docker for mac をbrewでinstall</li>
<li>毎日いつのまにかdockerが落ちている、再インストールを求められ毎回再インストールしつつ・・・放置</li>
<li>気がついたらdockerが落ちるかつ、いつのまにかosが落ちている事が多々あったが・・・放置</li>
</ul>

<h2>
<span id="死んだ日2017年10月24日" class="fragment"></span><a href="#%E6%AD%BB%E3%82%93%E3%81%A0%E6%97%A52017%E5%B9%B410%E6%9C%8824%E6%97%A5"><i class="fa fa-link"></i></a>死んだ日　2017年10月24日</h2>

<ul>
<li>7:06頃　macを起動する。。。いつもより時間がかかるなぁぁぁぁぁあああアアアアアアッ</li>
<li>7:08頃　普通に再起動しても同じ</li>
<li>7:08頃　普通に再起動しても同じ</li>
<li>7:09頃　普通に再起動しても同じ</li>
<li>7:09頃　普通に再起動しても同じ</li>
<li>7:10頃　普通に再起動しても同じ</li>
<li>7:10頃　普通に再起動しても同じ</li>
<li>7:11頃　エラー文より死亡確認</li>
<li>7:15頃　SMCリセットを試みるも失敗...</li>
<li>7:16頃　NVRAMのリセット失敗...</li>
</ul>

<p>そもそも、ドゥーンっていわない</p>

<h2>
<span id="１日放置してみる2017年10月25日" class="fragment"></span><a href="#%EF%BC%91%E6%97%A5%E6%94%BE%E7%BD%AE%E3%81%97%E3%81%A6%E3%81%BF%E3%82%8B2017%E5%B9%B410%E6%9C%8825%E6%97%A5"><i class="fa fa-link"></i></a>１日放置してみる　2017年10月25日</h2>

<ul>
<li>22:41頃　相変わらず同じ</li>
<li>22:52頃　cmd + R で起動し「ディスクユーティリティ」を起動し、"first aid"をする</li>
<li>22:54頃　普通に再起動しても同じ</li>
<li>23:11頃 諦めて寝る</li>
</ul>

<h2>
<span id="2日目長引きそうな予感2017年10月26日" class="fragment"></span><a href="#2%E6%97%A5%E7%9B%AE%E9%95%B7%E5%BC%95%E3%81%8D%E3%81%9D%E3%81%86%E3%81%AA%E4%BA%88%E6%84%9F2017%E5%B9%B410%E6%9C%8826%E6%97%A5"><i class="fa fa-link"></i></a>2日目(長引きそうな予感)　2017年10月26日</h2>

<ul>
<li>osの上書きができるらしい（データは死なずに上書きインストールで助かるかも）</li>
<li>cmd + R で起動し　「osを再インストール」　をする</li>
<li><strong>これがなんとうまくいく！！！！！！！！</strong></li>
</ul>

<h2>
<span id="2017年10月26日--951頃生存確認" class="fragment"></span><a href="#2017%E5%B9%B410%E6%9C%8826%E6%97%A5--951%E9%A0%83%E7%94%9F%E5%AD%98%E7%A2%BA%E8%AA%8D"><i class="fa fa-link"></i></a>2017年10月26日  9:51頃　生存確認！！</h2>

<ul>
<li>データも全て復元された</li>
<li>すぐさまタイムマシンでバックアップをとる</li>
</ul>

<h2>
<span id="1028日現在" class="fragment"></span><a href="#1028%E6%97%A5%E7%8F%BE%E5%9C%A8"><i class="fa fa-link"></i></a>10/28日現在</h2>

<ul>
<li>同じ現象はおきていないが、起きる可能性はあるので今後も様子をみます。</li>
</ul>

<h2>
<span id="まとめ" class="fragment"></span><a href="#%E3%81%BE%E3%81%A8%E3%82%81"><i class="fa fa-link"></i></a>まとめ</h2>

<ul>
<li>助かった！！</li>
<li>あの絶望的な画面で、諦めていましたが、よく生き返ってくれました！！！</li>
</ul>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>okamu_さんの<br />11位</center></td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>8</kbd>
		<a target="_blank" href="https://qiita.com/okamu_/items/085cfc5999db801020ff">【Swift】 画像を３種類も書き出したくないでござる</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2017-09-29 09:05:56</center>
	</td>
	<td style="width:200px;">
		@okamu_<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/62822/profile-images/1491391263">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Xcode]</b> <b>[iOS]</b> <b>[開発環境]</b> <b>[Swift]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;">
<h1>
<span id="swift-画像を３種類も書き出したくないでござる" class="fragment"></span><a href="#swift-%E7%94%BB%E5%83%8F%E3%82%92%EF%BC%93%E7%A8%AE%E9%A1%9E%E3%82%82%E6%9B%B8%E3%81%8D%E5%87%BA%E3%81%97%E3%81%9F%E3%81%8F%E3%81%AA%E3%81%84%E3%81%A7%E3%81%94%E3%81%96%E3%82%8B"><i class="fa fa-link"></i></a>Swift 画像を３種類も書き出したくないでござる</h1>

<p><a href="https://camo.qiitausercontent.com/9a426073e23a81a7a0a7b92a40b0e11afd71ecbc/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f62383637373736332d326461372d353036302d333432382d3534613630626363343462342e6a706567" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/9a426073e23a81a7a0a7b92a40b0e11afd71ecbc/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f62383637373736332d326461372d353036302d333432382d3534613630626363343462342e6a706567" alt="gozaru.jpg" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/62822/b8677763-2da7-5060-3428-54a60bcc44b4.jpeg"></a></p>

<h2>
<span id="この記事でできるようになること" class="fragment"></span><a href="#%E3%81%93%E3%81%AE%E8%A8%98%E4%BA%8B%E3%81%A7%E3%81%A7%E3%81%8D%E3%82%8B%E3%82%88%E3%81%86%E3%81%AB%E3%81%AA%E3%82%8B%E3%81%93%E3%81%A8"><i class="fa fa-link"></i></a>この記事でできるようになること</h2>

<ul>
<li>xcodeでのiOSアプリ開発において、画像をx1 x2 x3 の３種類書き出さなくてよくなります。</li>
<li><strong>PDFを使うことで改善できます</strong></li>
</ul>

<h2>
<span id="ios開発をしていて困るのが画像の書き出し" class="fragment"></span><a href="#ios%E9%96%8B%E7%99%BA%E3%82%92%E3%81%97%E3%81%A6%E3%81%84%E3%81%A6%E5%9B%B0%E3%82%8B%E3%81%AE%E3%81%8C%E7%94%BB%E5%83%8F%E3%81%AE%E6%9B%B8%E3%81%8D%E5%87%BA%E3%81%97"><i class="fa fa-link"></i></a>iOS開発をしていて困るのが、画像の書き出し</h2>

<ul>
<li><strong>x1</strong></li>
<li>
<strong>x2 retina</strong> </li>
<li><strong>x3 ipad</strong></li>
</ul>

<p>これらを瞬時に用意しないといけません。<br>
<a href="https://camo.qiitausercontent.com/7a30d332f415b2bba34ce8637696173d63c04696/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f62626533356265302d366564302d636163652d323434662d3631303938393232636230322e6a706567" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/7a30d332f415b2bba34ce8637696173d63c04696/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f62626533356265302d366564302d636163652d323434662d3631303938393232636230322e6a706567" alt="download.jpg" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/62822/bbe35be0-6ed0-cace-244f-61098922cb02.jpeg"></a></p>

<p><strong>めんどう！！</strong></p>

<h2>
<span id="そういえばxcodeはベクターも対応しているじゃないか" class="fragment"></span><a href="#%E3%81%9D%E3%81%86%E3%81%84%E3%81%88%E3%81%B0xcode%E3%81%AF%E3%83%99%E3%82%AF%E3%82%BF%E3%83%BC%E3%82%82%E5%AF%BE%E5%BF%9C%E3%81%97%E3%81%A6%E3%81%84%E3%82%8B%E3%81%98%E3%82%83%E3%81%AA%E3%81%84%E3%81%8B"><i class="fa fa-link"></i></a><strong>そういえばxcodeはベクターも対応しているじゃないか！！</strong>
</h2>

<ul>
<li>ということで、画像はpdfをimage.xcassetsに入れてみましょう！</li>
</ul>

<h3>
<span id="１まずはpdfを生成" class="fragment"></span><a href="#%EF%BC%91%E3%81%BE%E3%81%9A%E3%81%AFpdf%E3%82%92%E7%94%9F%E6%88%90"><i class="fa fa-link"></i></a>１、まずはPDFを生成</h3>

<h3>
<span id="２pdfをassetxcassetsに入れる" class="fragment"></span><a href="#%EF%BC%92pdf%E3%82%92assetxcassets%E3%81%AB%E5%85%A5%E3%82%8C%E3%82%8B"><i class="fa fa-link"></i></a>２、PDFをasset.xcassetsに入れる</h3>

<p><a href="https://camo.qiitausercontent.com/61cd2a1cedb47e578bd3a43b2f4304dda360e9be/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f64663361313832652d366232612d306539352d313830372d3934643865373338333661322e706e67" target="_blank" rel="nofollow noopener"><img width="1029" alt="スクリーンショット 2017-09-28 23.09.56.png" src="https://camo.qiitausercontent.com/61cd2a1cedb47e578bd3a43b2f4304dda360e9be/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f64663361313832652d366232612d306539352d313830372d3934643865373338333661322e706e67" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/62822/df3a182e-6b2a-0e95-1807-94d8e73836a2.png"></a></p>

<p>すると、まあこんな感じになります</p>

<h3>
<span id="３single-scaleにする" class="fragment"></span><a href="#%EF%BC%93single-scale%E3%81%AB%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>３、single scaleにする</h3>

<p><a href="https://camo.qiitausercontent.com/0dacddff836fbc90382829518f01ecc10cc84d29/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f61396131646534662d396132352d643262342d386638392d6463356565393935316139342e706e67" target="_blank" rel="nofollow noopener"><img width="1060" alt="スクリーンショット 2017-09-28 23.12.01.png" src="https://camo.qiitausercontent.com/0dacddff836fbc90382829518f01ecc10cc84d29/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f61396131646534662d396132352d643262342d386638392d6463356565393935316139342e706e67" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/62822/a9a1de4f-9a25-d2b4-8f89-dc5ee9951a94.png"></a></p>

<p>ベクターがぞうなので、single scaleにしちゃいます</p>

<h3>
<span id="おわり" class="fragment"></span><a href="#%E3%81%8A%E3%82%8F%E3%82%8A"><i class="fa fa-link"></i></a>おわり！！</h3>

<ul>
<li>あとは、<code>UIImage(named: "shot_ling")</code> でも</li>
<li>storyboardからでも普通に呼び出すことができます！！</li>
</ul>

<h2>
<span id="まとめ" class="fragment"></span><a href="#%E3%81%BE%E3%81%A8%E3%82%81"><i class="fa fa-link"></i></a>まとめ</h2>

<ul>
<li>開発の時間が 1/3 になり、5000兆円の利益アップができました！！</li>
<li>デザイナーにも優しいですね！！</li>
</ul>

<p><a href="https://camo.qiitausercontent.com/92ab3b6d8baa46d77fb55aecdab8b0227b5f6325/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f61666639646664622d366538322d313432612d643863612d3265326666613136613761622e6a706567" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/92ab3b6d8baa46d77fb55aecdab8b0227b5f6325/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f61666639646664622d366538322d313432612d643863612d3265326666613136613761622e6a706567" alt="download-1.jpg" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/62822/aff9dfdb-6e82-142a-d8ca-2e2ffa16a7ab.jpeg"></a></p>

<p>ありがとうございました。</p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>okamu_さんの<br />12位</center></td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>7</kbd>
		<a target="_blank" href="https://qiita.com/okamu_/items/2b8b30a76f2aa814ba14">Docker (ファイル/CPU/メモリ/プロセス) のリソースを制限する方法まとめ</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2017-10-29 08:48:21</center>
	</td>
	<td style="width:200px;">
		@okamu_<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/62822/profile-images/1491391263">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[CPU]</b> <b>[メモリ]</b> <b>[プロセス]</b> <b>[docker]</b> <b>[1000チャレンジ]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>Dockerコンテナの実行時にunlimitを使用してリソースの制限をすることができます。</p>

<p><a href="https://camo.qiitausercontent.com/6196ac75443f2cd955c6d2db84a41ed10386b5eb/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f33343436353834322d663036662d386564392d393938652d6631663030376238633061622e6a706567" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/6196ac75443f2cd955c6d2db84a41ed10386b5eb/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f33343436353834322d663036662d386564392d393938652d6631663030376238633061622e6a706567" alt="images.jpg" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/62822/34465842-f06f-8ed9-998e-f1f007b8c0ab.jpeg"></a></p>

<h2>
<span id="目次" class="fragment"></span><a href="#%E7%9B%AE%E6%AC%A1"><i class="fa fa-link"></i></a>目次</h2>

<ul>
<li>ファイルサイズ制限</li>
<li>CPUコア制限</li>
<li>CPU時間制限</li>
<li>CPU相対量の指定</li>
<li>メモリの使用量制限</li>
<li>プロセス数の制限</li>
</ul>

<h2>
<span id="ファイルサイズ制限" class="fragment"></span><a href="#%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%82%B5%E3%82%A4%E3%82%BA%E5%88%B6%E9%99%90"><i class="fa fa-link"></i></a><strong>ファイルサイズ制限</strong>
</h2>

<p>1MBで制限します<br>
これによって1MBより大きいファイルを作成することができなくなります。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ docker run --unlimit fsize=1000000:1000000 ubuntu
</pre></div></div>

<h2>
<span id="cpuコア制限" class="fragment"></span><a href="#cpu%E3%82%B3%E3%82%A2%E5%88%B6%E9%99%90"><i class="fa fa-link"></i></a><strong>CPUコア制限</strong>
</h2>

<p>使用するCPUをCPU0番のみに制限します<br>
CPU番号はtopコマンドで知ることができます。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ docker run --cpuset-cpus=0 ubuntu
</pre></div></div>

<h2>
<span id="cpu時間制限" class="fragment"></span><a href="#cpu%E6%99%82%E9%96%93%E5%88%B6%E9%99%90"><i class="fa fa-link"></i></a><strong>CPU時間制限</strong>
</h2>

<p>--cpu-periodで指定した秒数（μs）に、--cpu-quotaで指定した秒数（μs）のCPU時間が割り当てられその量を超えたCPUを利用できなくなります。<br>
この場合は、CPU使用率が50%になります</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ docker run --cpu-period=50000 --cpu-quota=25000 ubuntu
</pre></div></div>

<h2>
<span id="cpu相対量の指定" class="fragment"></span><a href="#cpu%E7%9B%B8%E5%AF%BE%E9%87%8F%E3%81%AE%E6%8C%87%E5%AE%9A"><i class="fa fa-link"></i></a><strong>CPU相対量の指定</strong>
</h2>

<p>複数のコンテナを実行した時に、--cpu-shareの比率によって使用するCPUの割当が決まります<br>
この場合は、centosの50%のCPUがubuntuに与えられます。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ docker run --cpu-share=512 ubuntu
</pre></div></div>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ docker run --cpu-share=1024 centos
</pre></div></div>

<h2>
<span id="メモリの使用量制限" class="fragment"></span><a href="#%E3%83%A1%E3%83%A2%E3%83%AA%E3%81%AE%E4%BD%BF%E7%94%A8%E9%87%8F%E5%88%B6%E9%99%90"><i class="fa fa-link"></i></a><strong>メモリの使用量制限</strong>
</h2>

<p>物理メモリの制限とスワップメモリの制限ができます<br>
この場合は、メモリを50MBに、スワップメモリを150MBに制限しています。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ docker run --memory=50m --memory-swap=150m ubuntu
</pre></div></div>

<h2>
<span id="プロセス数の制限" class="fragment"></span><a href="#%E3%83%97%E3%83%AD%E3%82%BB%E3%82%B9%E6%95%B0%E3%81%AE%E5%88%B6%E9%99%90"><i class="fa fa-link"></i></a><strong>プロセス数の制限</strong>
</h2>

<p>この制限をしておくことで、fork爆弾対策にもなります<br>
この場合は、プロセス数を20に制限しています。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ docker run --pids-limit 20 ubuntu
</pre></div></div>

<p>カーネルバージョンの制限などのため、<code>--pids-linit</code>が利用できない場合、unlimitによる制限で代用することもできます。<br>
この場合、プロセス数を3に制限しています。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ docker run --unlimit nproc=3:3 ubuntu
</pre></div></div>

<h2>
<span id="まとめ" class="fragment"></span><a href="#%E3%81%BE%E3%81%A8%E3%82%81"><i class="fa fa-link"></i></a>まとめ</h2>

<ul>
<li>リソースの制限などは、普段しませんが不意に役に立ちそうなのでまとめました。</li>
<li>お役に立てればと思います。</li>
</ul>

<h2>
<span id="参考" class="fragment"></span><a href="#%E5%8F%82%E8%80%83"><i class="fa fa-link"></i></a>参考</h2>

<ul>
<li>Docker実践活用ガイド</li>
</ul>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>okamu_さんの<br />13位</center></td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>7</kbd>
		<a target="_blank" href="https://qiita.com/okamu_/items/d370c69906b9c7aa225e">【mac】VPN設定せずにVPNしたかのようにする</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2017-10-04 08:36:40</center>
	</td>
	<td style="width:200px;">
		@okamu_<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/62822/profile-images/1491391263">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Mac]</b> <b>[SSH]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;">
<h1>
<span id="macvpn設定せずにvpnしたかのようにする" class="fragment"></span><a href="#macvpn%E8%A8%AD%E5%AE%9A%E3%81%9B%E3%81%9A%E3%81%ABvpn%E3%81%97%E3%81%9F%E3%81%8B%E3%81%AE%E3%82%88%E3%81%86%E3%81%AB%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>【mac】VPN設定せずにVPNしたかのようにする</h1>

<p><a href="https://camo.qiitausercontent.com/b9b3256a6264550bad26c506323d21469aaf9251/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f65666661633039302d306435652d366636312d373661392d3531656134326364333331382e6a706567" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/b9b3256a6264550bad26c506323d21469aaf9251/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f65666661633039302d306435652d366636312d373661392d3531656134326364333331382e6a706567" alt="vpn-3-433x300.jpg" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/62822/effac090-0d5e-6f61-76a9-51ea42cd3318.jpeg"></a></p>

<h2>
<span id="この記事でできるようになること" class="fragment"></span><a href="#%E3%81%93%E3%81%AE%E8%A8%98%E4%BA%8B%E3%81%A7%E3%81%A7%E3%81%8D%E3%82%8B%E3%82%88%E3%81%86%E3%81%AB%E3%81%AA%E3%82%8B%E3%81%93%E3%81%A8"><i class="fa fa-link"></i></a>この記事でできるようになること</h2>

<ul>
<li>まるでVPNのしているかのように、特定LAN内のブラウジングが可能になります。</li>
<li>例えば、学内のみしかアクセスできないページを閲覧する（履修登録とか！！）</li>
</ul>

<h2>
<span id="条件" class="fragment"></span><a href="#%E6%9D%A1%E4%BB%B6"><i class="fa fa-link"></i></a>条件</h2>

<ul>
<li>特定LAN内のサーバーにSSHできる必要があります。</li>
</ul>

<h2>
<span id="概念" class="fragment"></span><a href="#%E6%A6%82%E5%BF%B5"><i class="fa fa-link"></i></a>概念</h2>

<ul>
<li>Dynamic Forward＋SOCKS プロキシを使います。</li>
</ul>

<p><a href="https://camo.qiitausercontent.com/bfdfc5402b5782f1ae26d57cd4d935717e562be9/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f37313062616461662d366262642d393731352d376434622d3165393866356532363766352e6a706567" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/bfdfc5402b5782f1ae26d57cd4d935717e562be9/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f37313062616461662d366262642d393731352d376434622d3165393866356532363766352e6a706567" alt="dynamicportforwarding.jpg" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/62822/710badaf-6bbd-9715-7d4b-1e98f5e267f5.jpeg"></a></p>

<h2>
<span id="設定方法" class="fragment"></span><a href="#%E8%A8%AD%E5%AE%9A%E6%96%B9%E6%B3%95"><i class="fa fa-link"></i></a>設定方法</h2>

<h3>
<span id="sshの確認" class="fragment"></span><a href="#ssh%E3%81%AE%E7%A2%BA%E8%AA%8D"><i class="fa fa-link"></i></a>sshの確認</h3>

<ul>
<li>まず、ターゲットとするLAN内のサーバーにSSHできるか試し <code>.ssh/config</code> を作成します</li>
<li>そしてDynamicForwardの設定を追記します</li>
</ul>

<div class="code-frame" data-lang="text">
<div class="code-lang"><span class="bold">~/.ssh/config</span></div>
<div class="highlight"><pre><span></span>Host terget-lan
  HostName aaa.bbb.com
  IdentityFile id_rrrssssaaa
  User oreoreoreore
  DynamicForward {任意のポート番号 100080など}　#&lt;- この設定を追加

</pre></div>
</div>

<h3>
<span id="ネットワークの追加" class="fragment"></span><a href="#%E3%83%8D%E3%83%83%E3%83%88%E3%83%AF%E3%83%BC%E3%82%AF%E3%81%AE%E8%BF%BD%E5%8A%A0"><i class="fa fa-link"></i></a>ネットワークの追加</h3>

<ul>
<li>🍎のシステム環境設定から「ネットワークの設定」を選びます。</li>
<li>edit locationsを押します</li>
<li>適当にvpn-testとしました</li>
<li><strong>ネットワークを追加しておけば、設定をミスってもその設定ごとやり直せるのでおすすめです。</strong></li>
</ul>

<p><a href="https://camo.qiitausercontent.com/3dff79e7ad8b0c025a8cc66b79f8d198dda82288/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f35323731663364622d346230642d626336362d666230302d6435386433356265386266362e706e67" target="_blank" rel="nofollow noopener"><img width="667" alt="Screen Shot 2017-10-03 at 8.24.45.png" src="https://camo.qiitausercontent.com/3dff79e7ad8b0c025a8cc66b79f8d198dda82288/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f35323731663364622d346230642d626336362d666230302d6435386433356265386266362e706e67" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/62822/5271f3db-4b0d-bc66-fb00-d58d35be8bf6.png"></a></p>

<h3>
<span id="advanced詳細設定" class="fragment"></span><a href="#advanced%E8%A9%B3%E7%B4%B0%E8%A8%AD%E5%AE%9A"><i class="fa fa-link"></i></a>Advanced(詳細設定)</h3>

<ul>
<li>そのまま、Advanced(詳細設定)を押します</li>
<li>SOCKS Proxyにチェックを入れます</li>
<li>SOCKS Proxy Serverに <code>localhost</code> : <code>{任意のポート番号}</code>　を入力します</li>
</ul>

<p><a href="https://camo.qiitausercontent.com/b27070aafa3e3e3ed68397b8032dda565bc42c61/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f63366364343531642d386533392d393933382d643038382d6535323261636230333839612e706e67" target="_blank" rel="nofollow noopener"><img width="665" alt="Screen Shot 2017-10-03 at 8.29.00.png" src="https://camo.qiitausercontent.com/b27070aafa3e3e3ed68397b8032dda565bc42c61/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f63366364343531642d386533392d393933382d643038382d6535323261636230333839612e706e67" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/62822/c6cd451d-8e39-9938-d088-e522acb0389a.png"></a></p>

<h3>
<span id="適用する" class="fragment"></span><a href="#%E9%81%A9%E7%94%A8%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>適用する</h3>

<ul>
<li>okを押して詳細設定を抜けます。</li>
<li>この時、ネットワークがvpn-testが選択されていることを確認して適用を押しましょう。</li>
</ul>

<p><a href="https://camo.qiitausercontent.com/640c2bc437dbbdbea5a53e36d74fc4968ad0fa45/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f33393464376365342d633637652d366334662d336233302d6638616261613132363666652e706e67" target="_blank" rel="nofollow noopener"><img width="669" alt="Screen Shot 2017-10-03 at 8.31.48.png" src="https://camo.qiitausercontent.com/640c2bc437dbbdbea5a53e36d74fc4968ad0fa45/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f33393464376365342d633637652d366334662d336233302d6638616261613132363666652e706e67" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/62822/394d7ce4-c67e-6c4f-3b30-f8abaa1266fe.png"></a></p>

<h3>
<span id="sshしてみる" class="fragment"></span><a href="#ssh%E3%81%97%E3%81%A6%E3%81%BF%E3%82%8B"><i class="fa fa-link"></i></a>sshしてみる</h3>

<ul>
<li>
<code>ssh terget-lan</code> として特定LAN内しかアクセスできないページにアクセスしてみましょう！！</li>
</ul>

<h2>
<span id="注意点" class="fragment"></span><a href="#%E6%B3%A8%E6%84%8F%E7%82%B9"><i class="fa fa-link"></i></a>注意点</h2>

<ul>
<li>ssh先のサーバーを通してすべて通信するようになるので、sshが切れるとどこにもアクセスできなくなります。焦らずsshし直すか、locationを自動に変更しましょう(´・ω・`)</li>
</ul>

<h2>
<span id="locationの切り替え" class="fragment"></span><a href="#location%E3%81%AE%E5%88%87%E3%82%8A%E6%9B%BF%E3%81%88"><i class="fa fa-link"></i></a>locationの切り替え</h2>

<ul>
<li>🍎のlocationのところからすぐに切り替えれるようなボタンが出現しているので、そちらを使うと便利です。</li>
</ul>

<p><a href="https://camo.qiitausercontent.com/13c8cd11a21bb486050fb3f72960fb446ce8637e/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f30623033643037382d666364322d653738662d383038612d3033633566356263326366302e706e67" target="_blank" rel="nofollow noopener"><img width="450" alt="Screen Shot 2017-10-03 at 8.44.23.png" src="https://camo.qiitausercontent.com/13c8cd11a21bb486050fb3f72960fb446ce8637e/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f30623033643037382d666364322d653738662d383038612d3033633566356263326366302e706e67" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/62822/0b03d078-fcd2-e78f-808a-03c5f5bc2cf0.png"></a></p>

<h2>
<span id="まとめ" class="fragment"></span><a href="#%E3%81%BE%E3%81%A8%E3%82%81"><i class="fa fa-link"></i></a>まとめ</h2>

<ul>
<li>VPN申請はめんどくさいです。</li>
<li>これ以外と役に立ちますのでおすすめです</li>
</ul>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>okamu_さんの<br />14位</center></td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>6</kbd>
		<a target="_blank" href="https://qiita.com/okamu_/items/541ac96a1380b26d95c8">Railsで定期実行したいスクリプトを書く</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2017-09-22 09:29:00</center>
	</td>
	<td style="width:200px;">
		@okamu_<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/62822/profile-images/1491391263">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Ruby]</b> <b>[Rails]</b> <b>[Twitter]</b> <b>[whenever]</b> <b>[1000チャレンジ]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;">
<h1>
<span id="railsで定期実行したいスクリプトを書く" class="fragment"></span><a href="#rails%E3%81%A7%E5%AE%9A%E6%9C%9F%E5%AE%9F%E8%A1%8C%E3%81%97%E3%81%9F%E3%81%84%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%97%E3%83%88%E3%82%92%E6%9B%B8%E3%81%8F"><i class="fa fa-link"></i></a>Railsで定期実行したいスクリプトを書く</h1>

<ul>
<li>Ruby on Railsで定期的に実行したいスクリプトなどを書くときのメモです。</li>
<li>
<strong>ハマりやすいところもある</strong> ので、全ての手順を記しておきます。</li>
</ul>

<p><a href="https://camo.qiitausercontent.com/528bc4a995894be2a8d5db7a48b36b70a2b9f606/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f66386437343837322d663339322d393061342d613135362d3032383239383934353630652e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/528bc4a995894be2a8d5db7a48b36b70a2b9f606/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f66386437343837322d663339322d393061342d613135362d3032383239383934353630652e706e67" alt="download.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/62822/f8d74872-f392-90a4-a156-02829894560e.png"></a></p>

<h2>
<span id="lib以下にスクリプトを記述" class="fragment"></span><a href="#lib%E4%BB%A5%E4%B8%8B%E3%81%AB%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%97%E3%83%88%E3%82%92%E8%A8%98%E8%BF%B0"><i class="fa fa-link"></i></a>lib以下にスクリプトを記述</h2>

<ul>
<li>twitterからタグのついたtweetを取得するスクリプトを取得する例</li>
</ul>

<div class="code-frame" data-lang="ruby">
<div class="code-lang"><span class="bold">lib/sns/tw.rb</span></div>
<div class="highlight"><pre><span></span><span class="k">module</span> <span class="nn">Sns::Tw</span> <span class="kp">extend</span> <span class="nb">self</span>
  <span class="k">def</span> <span class="nf">batch</span>
    <span class="vi">@client</span> <span class="o">=</span> <span class="n">config</span>
    <span class="n">tags</span> <span class="o">=</span> <span class="no">Settings</span><span class="o">.</span><span class="n">batch</span><span class="o">.</span><span class="n">hashtags</span>

    <span class="n">latest_tweet</span> <span class="o">=</span> <span class="no">Sns</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="ss">sns_type_id</span><span class="p">:</span> <span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">order</span><span class="p">(</span><span class="ss">post_date</span><span class="p">:</span> <span class="ss">:desc</span><span class="p">)</span><span class="o">.</span><span class="n">first</span>
    <span class="n">latest_id</span> <span class="o">=</span> <span class="n">latest_tweet</span><span class="o">.</span><span class="n">nil?</span> <span class="p">?</span> <span class="kp">nil</span> <span class="p">:</span> <span class="n">latest_tweet</span><span class="o">.</span><span class="n">post_id</span>

    <span class="n">tags</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span> <span class="n">tag</span> <span class="o">|</span>
      <span class="n">search</span><span class="p">(</span><span class="n">tag</span><span class="p">,</span> <span class="n">latest_id</span><span class="p">)</span>
    <span class="k">end</span>
  <span class="k">end</span>

  <span class="kp">private</span>

  <span class="k">def</span> <span class="nf">search</span><span class="p">(</span><span class="n">tag</span><span class="p">,</span> <span class="n">latest_id</span><span class="p">)</span>
    <span class="c1"># 最初であれば10件だけ取っておく</span>
    <span class="n">tweets</span> <span class="o">=</span> <span class="k">if</span> <span class="n">latest_id</span><span class="o">.</span><span class="n">nil?</span> 
               <span class="vi">@client</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s2">"#</span><span class="si">#{</span><span class="n">tag</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span> <span class="ss">locale</span><span class="p">:</span> <span class="s1">'ja'</span><span class="p">,</span> <span class="ss">exclude</span><span class="p">:</span> <span class="s1">'retweets'</span><span class="p">,</span> <span class="ss">result_type</span><span class="p">:</span> <span class="s1">'recent'</span><span class="p">,</span> <span class="ss">since_id</span><span class="p">:</span> <span class="n">latest_id</span><span class="p">)</span><span class="o">.</span><span class="n">collect</span><span class="o">.</span><span class="n">take</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
             <span class="k">else</span>
               <span class="vi">@client</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s2">"#</span><span class="si">#{</span><span class="n">tag</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span> <span class="ss">locale</span><span class="p">:</span> <span class="s1">'ja'</span><span class="p">,</span> <span class="ss">exclude</span><span class="p">:</span> <span class="s1">'retweets'</span><span class="p">,</span> <span class="ss">result_type</span><span class="p">:</span> <span class="s1">'recent'</span><span class="p">,</span> <span class="ss">since_id</span><span class="p">:</span> <span class="n">latest_id</span><span class="p">)</span><span class="o">.</span><span class="n">collect</span>
             <span class="k">end</span>
    <span class="n">tweets</span><span class="o">.</span><span class="n">each_with_index</span> <span class="k">do</span> <span class="o">|</span> <span class="n">tweet</span><span class="p">,</span> <span class="n">idx</span> <span class="o">|</span> 
      <span class="nb">p</span> <span class="n">idx</span>
      <span class="n">tweet</span><span class="o">.</span><span class="n">media</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span> <span class="n">media</span> <span class="o">|</span>
        <span class="n">tw</span> <span class="o">=</span> <span class="no">Sns</span><span class="o">.</span><span class="n">find_or_create_by</span><span class="p">(</span><span class="ss">sns_type_id</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="ss">post_id</span><span class="p">:</span> <span class="n">tweet</span><span class="o">.</span><span class="n">id</span><span class="o">.</span><span class="n">to_s</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span> <span class="n">sns</span> <span class="o">|</span>
          <span class="n">sns</span><span class="o">.</span><span class="n">remote_image_url</span> <span class="o">=</span> <span class="n">media</span><span class="o">.</span><span class="n">media_url</span><span class="o">.</span><span class="n">to_s</span>
          <span class="n">sns</span><span class="o">.</span><span class="n">post_url</span> <span class="o">=</span> <span class="n">tweet</span><span class="o">.</span><span class="n">url</span><span class="o">.</span><span class="n">to_s</span>
          <span class="n">sns</span><span class="o">.</span><span class="n">post_date</span> <span class="o">=</span> <span class="n">tweet</span><span class="o">.</span><span class="n">created_at</span>
        <span class="k">end</span>
      <span class="k">end</span>
    <span class="k">end</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">config</span>
    <span class="no">Twitter</span><span class="o">::</span><span class="no">REST</span><span class="o">::</span><span class="no">Client</span><span class="o">.</span><span class="n">new</span> <span class="k">do</span> <span class="o">|</span><span class="n">config</span><span class="o">|</span>
      <span class="n">config</span><span class="o">.</span><span class="n">consumer_key</span>     <span class="o">=</span> <span class="no">ENV</span><span class="o">[</span><span class="s1">'TWITTER_CONSUMER_KEY'</span><span class="o">]</span>
      <span class="n">config</span><span class="o">.</span><span class="n">consumer_secret</span>  <span class="o">=</span> <span class="no">ENV</span><span class="o">[</span><span class="s1">'TWITTER_CONSUMER_SECRET'</span><span class="o">]</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>

</pre></div>
</div>

<h2>
<span id="autoload_pathsに追加" class="fragment"></span><a href="#autoload_paths%E3%81%AB%E8%BF%BD%E5%8A%A0"><i class="fa fa-link"></i></a>autoload_pathsに追加</h2>

<ul>
<li><strong>この設定をしないと地味にハマります！！ご注意を！！！</strong></li>
</ul>

<div class="code-frame" data-lang="ruby">
<div class="code-lang"><span class="bold">config/application.rb</span></div>
<div class="highlight"><pre><span></span><span class="n">config</span><span class="o">.</span><span class="n">autoload_paths</span> <span class="o">+=</span> <span class="sx">%W(</span><span class="si">#{</span><span class="n">config</span><span class="o">.</span><span class="n">root</span><span class="si">}</span><span class="sx">/lib)</span>

<span class="c1"># 特にここ！！Rails5から productionでも呼び出せるように設定しないといけない</span>
<span class="n">config</span><span class="o">.</span><span class="n">enable_dependency_loading</span> <span class="o">=</span> <span class="kp">true</span> 
</pre></div>
</div>

<ul>
<li><a href="https://qiita.com/okamu_/items/1c004172176a348ecdc8" id="reference-47e152537830577fc8a3">Rails5 のproduction環境で lib/ 以下が読み込まれない問題</a></li>
</ul>

<h2>
<span id="taskを作成" class="fragment"></span><a href="#task%E3%82%92%E4%BD%9C%E6%88%90"><i class="fa fa-link"></i></a>taskを作成</h2>

<ul>
<li>コマンドでgenerateする</li>
</ul>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ bundle exec rails g task sns
</pre></div></div>

<ul>
<li>rakeファイルを編集する</li>
</ul>

<div class="code-frame" data-lang="ruby">
<div class="code-lang"><span class="bold">lib/task/sns.rake</span></div>
<div class="highlight"><pre><span></span><span class="n">namespace</span> <span class="ss">:sns</span> <span class="k">do</span>
  <span class="n">desc</span> <span class="s2">"twitterのハッシュタグから画像を保存するタスク"</span>
  <span class="n">task</span> <span class="ss">twitter</span><span class="p">:</span> <span class="ss">:environment</span> <span class="k">do</span>
    <span class="no">Sns</span><span class="o">::</span><span class="no">Tw</span><span class="o">.</span><span class="n">batch</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</div>

<ul>
<li>taskが動くか確認をする</li>
</ul>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span># 一覧を表示
$ bundle exec rails -T
</pre></div></div>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span># 試しに実行する
$ bundle exec rails sns:twitter
</pre></div></div>

<h2>
<span id="定期実行する設定" class="fragment"></span><a href="#%E5%AE%9A%E6%9C%9F%E5%AE%9F%E8%A1%8C%E3%81%99%E3%82%8B%E8%A8%AD%E5%AE%9A"><i class="fa fa-link"></i></a>定期実行する設定</h2>

<ul>
<li>cronをいい感じに使えるgem <code>whenever</code>　を使います。</li>
</ul>

<div class="code-frame" data-lang="Gemfile"><div class="highlight"><pre><span></span>gem 'whenever'
</pre></div></div>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ bunde install --path vendor/bundle
</pre></div></div>

<ul>
<li>設定ファイルを作成</li>
</ul>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ bundle exec wheneverize . 
    [add] writing `./config/schedule.rb'
    [done] wheneverized! 
</pre></div></div>

<ul>
<li>config/schedule.rb に設定を記述します。</li>
</ul>

<div class="code-frame" data-lang="ruby">
<div class="code-lang"><span class="bold">config/schedule.rb</span></div>
<div class="highlight"><pre><span></span>
<span class="n">set</span> <span class="ss">:output</span><span class="p">,</span> <span class="s1">'log/crontab.log'</span>
<span class="no">ENV</span><span class="o">[</span><span class="s1">'RAILS_ENV'</span><span class="o">]</span> <span class="o">||=</span> <span class="s1">'development'</span>
<span class="n">set</span> <span class="ss">:environment</span><span class="p">,</span> <span class="no">ENV</span><span class="o">[</span><span class="s1">'RAILS_ENV'</span><span class="o">]</span>

<span class="n">every</span> <span class="mi">30</span><span class="o">.</span><span class="n">minutes</span> <span class="k">do</span>
   <span class="n">rake</span> <span class="s2">"sns:twitter"</span>
 <span class="k">end</span>

</pre></div>
</div>

<h3>
<span id="cronに反映する際のコマンド" class="fragment"></span><a href="#cron%E3%81%AB%E5%8F%8D%E6%98%A0%E3%81%99%E3%82%8B%E9%9A%9B%E3%81%AE%E3%82%B3%E3%83%9E%E3%83%B3%E3%83%89"><i class="fa fa-link"></i></a>cronに反映する際のコマンド</h3>

<ul>
<li>設定の確認</li>
</ul>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ bundle exec whenever 
$ bundle exec crontab -e
</pre></div></div>

<ul>
<li>cronにデータを反映</li>
</ul>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ bundle exec whenever --update-crontab 
</pre></div></div>

<ul>
<li>cronからデータを削除</li>
</ul>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ bundle exec whenever --clear-crontab
</pre></div></div>

<h3>
<span id="capistranoでwhenever" class="fragment"></span><a href="#capistrano%E3%81%A7whenever"><i class="fa fa-link"></i></a>CapistranoでWhenever</h3>

<ul>
<li>デプロイ時に、本番環境にもcronの値をセットしたい時は、Capistranoの設定ファイルに下記を追記します。</li>
</ul>

<div class="code-frame" data-lang="ruby">
<div class="code-lang"><span class="bold">config/deploy.rb</span></div>
<div class="highlight"><pre><span></span><span class="n">set</span> <span class="ss">:whenever_command</span><span class="p">,</span> <span class="s2">"bundle exec whenever"</span>
<span class="nb">require</span> <span class="s2">"whenever/capistrano"</span>
</pre></div>
</div>

<p>これで cap deploy を行なえば、デプロイ先のcrontabに値が反映されます。</p>

<h2>
<span id="まとめ" class="fragment"></span><a href="#%E3%81%BE%E3%81%A8%E3%82%81"><i class="fa fa-link"></i></a>まとめ</h2>

<ul>
<li>lib/task　に直接かきたくない</li>
<li>lib以下にスクリプトを置かない派の人もいる</li>
<li>crontabはwheneverに任せると楽チン</li>
</ul>

<h2>
<span id="参考記事" class="fragment"></span><a href="#%E5%8F%82%E8%80%83%E8%A8%98%E4%BA%8B"><i class="fa fa-link"></i></a>参考記事</h2>

<ul>
<li><a href="https://qiita.com/yumiyon/items/388fbb84450f49a6ab0d" class="autolink" id="reference-4f08acd34e65e6969f26">https://qiita.com/yumiyon/items/388fbb84450f49a6ab0d</a></li>
<li>ありがとうございました！</li>
</ul>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>okamu_さんの<br />15位</center></td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>6</kbd>
		<a target="_blank" href="https://qiita.com/okamu_/items/beefea3c3d94207e1fbc">[swift] Storyboardのsegue idを「かんたん・きれい・色あせない」方法で管理する</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2017-09-19 08:59:39</center>
	</td>
	<td style="width:200px;">
		@okamu_<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/62822/profile-images/1491391263">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Xcode]</b> <b>[iOS]</b> <b>[Storyboard]</b> <b>[Swift]</b> <b>[Swift3.0]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;">
<h1>
<span id="storyboardのsegue-idをかんたんきれい色あせない方法で管理する" class="fragment"></span><a href="#storyboard%E3%81%AEsegue-id%E3%82%92%E3%81%8B%E3%82%93%E3%81%9F%E3%82%93%E3%81%8D%E3%82%8C%E3%81%84%E8%89%B2%E3%81%82%E3%81%9B%E3%81%AA%E3%81%84%E6%96%B9%E6%B3%95%E3%81%A7%E7%AE%A1%E7%90%86%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>Storyboardのsegue idを「かんたん・きれい・色あせない」方法で管理する</h1>

<h2>
<span id="概要" class="fragment"></span><a href="#%E6%A6%82%E8%A6%81"><i class="fa fa-link"></i></a>概要</h2>

<ul>
<li>Storyboardを使っているとsegueのidを文字列で指定すると思うのですが、ソースでも同じidじゃないといけません。</li>
<li>増えると面倒なのでまとめていると思いますが、enumが便利なのでそっちでまとめています。</li>
</ul>

<h2>
<span id="実際のコード" class="fragment"></span><a href="#%E5%AE%9F%E9%9A%9B%E3%81%AE%E3%82%B3%E3%83%BC%E3%83%89"><i class="fa fa-link"></i></a>実際のコード</h2>

<ul>
<li>SegueHandlerType.swift　と　Config.swift　を適当な場所においておきます。</li>
</ul>

<div class="code-frame" data-lang="swift">
<div class="code-lang"><span class="bold">Utility/SegueHandlerType.swift</span></div>
<div class="highlight"><pre><span></span><span class="kd">protocol</span> <span class="nc">SegueType</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nv">rawValue</span><span class="p">:</span> <span class="nb">String</span> <span class="p">{</span> <span class="kr">get</span> <span class="p">}</span>
<span class="p">}</span>

<span class="kd">extension</span> <span class="bp">UIViewController</span> <span class="p">{</span>
    <span class="cm">/**</span>
<span class="cm">     performSegue for segue</span>
<span class="cm">     - Parameters:</span>
<span class="cm">     - segue: Segue</span>
<span class="cm">     - sender: AnyObject</span>
<span class="cm">     */</span>
    <span class="kd">func</span> <span class="nf">performSegue</span><span class="p">(</span><span class="n">segue</span><span class="p">:</span> <span class="n">Segue</span><span class="p">,</span> <span class="n">sender</span><span class="p">:</span> <span class="nb">AnyObject</span><span class="p">?)</span> <span class="p">{</span>
        <span class="n">performSegue</span><span class="p">(</span><span class="n">withIdentifier</span><span class="p">:</span> <span class="n">segue</span><span class="p">.</span><span class="n">rawValue</span><span class="p">,</span> <span class="n">sender</span><span class="p">:</span> <span class="n">sender</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>

</pre></div>
</div>

<ul>
<li>
<code>toCamera</code> などをStoryboardのsegueに書いておきつつここでまとめる</li>
</ul>

<div class="code-frame" data-lang="swift">
<div class="code-lang"><span class="bold">Config/Config.swift</span></div>
<div class="highlight"><pre><span></span><span class="kd">enum</span> <span class="nc">Segue</span><span class="p">:</span> <span class="nb">String</span><span class="p">,</span> <span class="n">SegueType</span> <span class="p">{</span>
    <span class="k">case</span> <span class="n">toCamera</span>
    <span class="k">case</span> <span class="n">toPhotos</span>
    <span class="k">case</span> <span class="n">toTutorial</span>
    <span class="k">case</span> <span class="n">toDetail</span>
<span class="p">}</span>

</pre></div>
</div>

<ul>
<li>Controllerから呼び出す</li>
</ul>

<div class="code-frame" data-lang="swift">
<div class="code-lang"><span class="bold">Controllers/Hoge/Hoge.swift</span></div>
<div class="highlight"><pre><span></span><span class="kd">private</span> <span class="kd">func</span> <span class="nf">firstExplain</span><span class="p">()</span> <span class="p">{</span>
    <span class="kc">self</span><span class="p">.</span><span class="n">performSegue</span><span class="p">(</span><span class="n">segue</span><span class="p">:</span> <span class="p">.</span><span class="n">toTutorial</span><span class="p">,</span> <span class="n">sender</span><span class="p">:</span> <span class="kc">nil</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>
</div>

<h2>
<span id="まとめ" class="fragment"></span><a href="#%E3%81%BE%E3%81%A8%E3%82%81"><i class="fa fa-link"></i></a>まとめ</h2>

<ul>
<li>
<strong>かんたん・きれい・色あせない</strong> 方法で管理できるようになりました。</li>
<li>その他にもぐぐるといろいろな方法が出てきます。</li>
<li>もっと難しい方法もあるみたいですが、私の理解を超えているのでこれで許してください。</li>
</ul>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>okamu_さんの<br />16位</center></td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>5</kbd>
		<a target="_blank" href="https://qiita.com/okamu_/items/4a541b2b5aba81f8653a">【swift】tableViewに何もなければ、吉岡里帆ちゃんが出現する</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2017-10-05 08:07:02</center>
	</td>
	<td style="width:200px;">
		@okamu_<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/62822/profile-images/1491391263">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[デザインパターン]</b> <b>[Swift]</b> <b>[1000チャレンジ]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;">
<h1>
<span id="swifttableviewに何もなければ吉岡里帆ちゃんが出現する" class="fragment"></span><a href="#swifttableview%E3%81%AB%E4%BD%95%E3%82%82%E3%81%AA%E3%81%91%E3%82%8C%E3%81%B0%E5%90%89%E5%B2%A1%E9%87%8C%E5%B8%86%E3%81%A1%E3%82%83%E3%82%93%E3%81%8C%E5%87%BA%E7%8F%BE%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>【swift】tableViewに何もなければ、吉岡里帆ちゃんが出現する</h1>

<ul>
<li>今回は、UITabaleViewやUICollectionViewに表示する要素が0であれば、<a href="https://matome.naver.jp/odai/2149290466326227901" rel="nofollow noopener" target="_blank">吉岡里帆さん</a> が出現するようにします。</li>
<li>アプリ作りのときに毎回お世話になっているライブラリで <a href="https://github.com/dzenbot/DZNEmptyDataSet" rel="nofollow noopener" target="_blank">dzenbot/DZNEmptyDataSet</a> という、UITabaleViewやUICollectionViewに表示する要素が何もなければ任意の画像や文字を設定してくれます。</li>
</ul>

<h3>
<span id="完成形はこんな感じです要素が０のとき" class="fragment"></span><a href="#%E5%AE%8C%E6%88%90%E5%BD%A2%E3%81%AF%E3%81%93%E3%82%93%E3%81%AA%E6%84%9F%E3%81%98%E3%81%A7%E3%81%99%E8%A6%81%E7%B4%A0%E3%81%8C%EF%BC%90%E3%81%AE%E3%81%A8%E3%81%8D"><i class="fa fa-link"></i></a>完成形はこんな感じです(要素が０のとき)</h3>

<h2>
<span id="" class="fragment"></span><a href="#"><i class="fa fa-link"></i></a><a href="https://camo.qiitausercontent.com/d3d8509f3560682d650c66588e7d9f95fddc4d2c/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f31643531666661622d316539662d643934342d323763302d6139313863653438636361662e706e67" target="_blank" rel="nofollow noopener"><img width="414" alt="Simulator Screen Shot - iPhone 8 Plus - 2017-10-04 at 22.39.52.png" src="https://camo.qiitausercontent.com/d3d8509f3560682d650c66588e7d9f95fddc4d2c/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f31643531666661622d316539662d643934342d323763302d6139313863653438636361662e706e67" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/62822/1d51ffab-1e9f-d944-27c0-a918ce48ccaf.png"></a>
</h2>

<h3>
<span id="要素があれば普通にインデックスを表示します" class="fragment"></span><a href="#%E8%A6%81%E7%B4%A0%E3%81%8C%E3%81%82%E3%82%8C%E3%81%B0%E6%99%AE%E9%80%9A%E3%81%AB%E3%82%A4%E3%83%B3%E3%83%87%E3%83%83%E3%82%AF%E3%82%B9%E3%82%92%E8%A1%A8%E7%A4%BA%E3%81%97%E3%81%BE%E3%81%99"><i class="fa fa-link"></i></a>要素があれば普通にインデックスを表示します</h3>

<h2>
<span id="-1" class="fragment"></span><a href="#-1"><i class="fa fa-link"></i></a><a href="https://camo.qiitausercontent.com/0a1ae9343dfc3bce556e58f45ffbfee215277b8f/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f38623039663262302d343566322d656634302d643237332d3339623632376439356533302e706e67" target="_blank" rel="nofollow noopener"><img width="414" alt="Simulator Screen Shot - iPhone 8 Plus - 2017-10-04 at 22.41.58.png" src="https://camo.qiitausercontent.com/0a1ae9343dfc3bce556e58f45ffbfee215277b8f/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f38623039663262302d343566322d656634302d643237332d3339623632376439356533302e706e67" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/62822/8b09f2b0-45f2-ef40-d273-39b627d95e30.png"></a>
</h2>

<h2>
<span id="実装してみる" class="fragment"></span><a href="#%E5%AE%9F%E8%A3%85%E3%81%97%E3%81%A6%E3%81%BF%E3%82%8B"><i class="fa fa-link"></i></a>実装してみる</h2>

<h3>
<span id="cocoapodかcarthageでdzenbotdznemptydatasetを入れる" class="fragment"></span><a href="#cocoapod%E3%81%8Bcarthage%E3%81%A7dzenbotdznemptydataset%E3%82%92%E5%85%A5%E3%82%8C%E3%82%8B"><i class="fa fa-link"></i></a>cocoapodかcarthageで<a href="https://github.com/dzenbot/DZNEmptyDataSet" rel="nofollow noopener" target="_blank">dzenbot/DZNEmptyDataSet</a>を入れる</h3>

<h4>
<span id="cocoapod" class="fragment"></span><a href="#cocoapod"><i class="fa fa-link"></i></a>cocoapod</h4>

<div class="code-frame" data-lang="Podfile"><div class="highlight"><pre><span></span>  pod 'DZNEmptyDataSet'
</pre></div></div>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ pod install
</pre></div></div>

<h4>
<span id="carthage" class="fragment"></span><a href="#carthage"><i class="fa fa-link"></i></a>carthage</h4>

<div class="code-frame" data-lang="Cartfile"><div class="highlight"><pre><span></span>github "dzenbot/DZNEmptyDataSet"
</pre></div></div>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ carthage update --platform iOS
</pre></div></div>

<h3>
<span id="ソースコードはこれだけ" class="fragment"></span><a href="#%E3%82%BD%E3%83%BC%E3%82%B9%E3%82%B3%E3%83%BC%E3%83%89%E3%81%AF%E3%81%93%E3%82%8C%E3%81%A0%E3%81%91"><i class="fa fa-link"></i></a>ソースコードはこれだけ</h3>

<ul>
<li>画像は<code>riho1</code>で<code>Assets.xcassets</code> に入れてあります。</li>
<li>
<code>numberOfRowsInSection</code>を0にすると吉岡里帆ちゃんが出現するはずです。</li>
<li>ポイントとして今回delegateの設定は、Storyboardだけで行います。</li>
</ul>

<div class="code-frame" data-lang="swift">
<div class="code-lang"><span class="bold">viewController.swift</span></div>
<div class="highlight"><pre><span></span><span class="kd">import</span> <span class="nc">UIKit</span>
<span class="kd">import</span> <span class="nc">DZNEmptyDataSet</span>

<span class="kd">class</span> <span class="nc">ViewController</span><span class="p">:</span> <span class="bp">UIViewController</span> <span class="p">{</span>
    <span class="kr">override</span> <span class="kd">func</span> <span class="nf">viewDidLoad</span><span class="p">()</span> <span class="p">{</span>
        <span class="kc">super</span><span class="p">.</span><span class="n">viewDidLoad</span><span class="p">()</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kd">extension</span> <span class="nc">ViewController</span><span class="p">:</span> <span class="bp">UITableViewDataSource</span><span class="p">,</span> <span class="bp">UITableViewDelegate</span> <span class="p">{</span>
    <span class="kd">func</span> <span class="nf">tableView</span><span class="p">(</span><span class="kc">_</span> <span class="n">tableView</span><span class="p">:</span> <span class="bp">UITableView</span><span class="p">,</span> <span class="n">cellForRowAt</span> <span class="n">indexPath</span><span class="p">:</span> <span class="n">IndexPath</span><span class="p">)</span> <span class="p">-&gt;</span> <span class="bp">UITableViewCell</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="nv">cell</span> <span class="p">=</span> <span class="n">tableView</span><span class="p">.</span><span class="n">dequeueReusableCell</span><span class="p">(</span><span class="n">withIdentifier</span><span class="p">:</span> <span class="s">"cell"</span><span class="p">,</span> <span class="k">for</span><span class="p">:</span> <span class="n">indexPath</span><span class="p">)</span>
        <span class="n">cell</span><span class="p">.</span><span class="n">textLabel</span><span class="p">?.</span><span class="n">text</span> <span class="p">=</span> <span class="s">"</span><span class="si">\(</span><span class="n">indexPath</span><span class="p">.</span><span class="n">row</span><span class="si">)</span><span class="s">"</span>
        <span class="k">return</span> <span class="n">cell</span>
    <span class="p">}</span>

    <span class="kd">func</span> <span class="nf">tableView</span><span class="p">(</span><span class="kc">_</span> <span class="n">tableView</span><span class="p">:</span> <span class="bp">UITableView</span><span class="p">,</span> <span class="n">numberOfRowsInSection</span> <span class="n">section</span><span class="p">:</span> <span class="nb">Int</span><span class="p">)</span> <span class="p">-&gt;</span> <span class="nb">Int</span> <span class="p">{</span>
        <span class="k">return</span> <span class="mi">10</span> <span class="c1">// &lt;= ここを0にしたときに、吉岡里帆ちゃんが出現すれば成功</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kd">extension</span> <span class="nc">ViewController</span><span class="p">:</span> <span class="n">DZNEmptyDataSetSource</span><span class="p">,</span> <span class="n">DZNEmptyDataSetDelegate</span> <span class="p">{</span>
    <span class="kd">func</span> <span class="nf">image</span><span class="p">(</span><span class="n">forEmptyDataSet</span> <span class="n">scrollView</span><span class="p">:</span> <span class="bp">UIScrollView</span><span class="p">!)</span> <span class="p">-&gt;</span> <span class="bp">UIImage</span><span class="p">!</span> <span class="p">{</span>
        <span class="k">return</span> <span class="bp">UIImage</span><span class="p">(</span><span class="n">named</span><span class="p">:</span> <span class="s">"riho1"</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>

<h3>
<span id="storyboardの設定" class="fragment"></span><a href="#storyboard%E3%81%AE%E8%A8%AD%E5%AE%9A"><i class="fa fa-link"></i></a>Storyboardの設定</h3>

<h4>
<span id="uitableviewとdznemptydatasetのdelegateをstoryboardで設定する---ポイント" class="fragment"></span><a href="#uitableview%E3%81%A8dznemptydataset%E3%81%AEdelegate%E3%82%92storyboard%E3%81%A7%E8%A8%AD%E5%AE%9A%E3%81%99%E3%82%8B---%E3%83%9D%E3%82%A4%E3%83%B3%E3%83%88"><i class="fa fa-link"></i></a>UITableViewとDZNEmptyDataSetの<strong>delegateをStoryboardで設定する &lt;- ポイント！！</strong>
</h4>

<ul>
<li>
<p>referencing Outlets に </p>

<ul>
<li>
<code>UITableViewDataSource</code> </li>
<li>
<code>UITableViewDelagate</code> </li>
<li>
<code>DZNEmptyDataSetSource</code> </li>
<li>
<code>DZNEmptyDataSetDelegate</code> が設定されています。</li>
</ul>
</li>
<li><p>このとき、viewControllerに<code>DZNEmptyDataSet</code> がimportされていることと、Storyboardに<code>viewController</code>がcustom classに設定されていれば、設定できます。</p></li>
<li><p>下図のように、tableViewをControllを押しながらViewControllerのところで離すと、delegateの設定ができます。ソースコードの中でいちいち <code>????.delegate = self</code> としなくて良くなります。</p></li>
</ul>

<p><a href="https://camo.qiitausercontent.com/13c19b3ad810c9312e105e0d0dd85d3f39983332/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f63633761643634662d623933312d616433312d373631372d6661303961333736306566332e706e67" target="_blank" rel="nofollow noopener"><img width="428" alt="Screen Shot 2017-10-04 at 22.53.48.png" src="https://camo.qiitausercontent.com/13c19b3ad810c9312e105e0d0dd85d3f39983332/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f63633761643634662d623933312d616433312d373631372d6661303961333736306566332e706e67" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/62822/cc7ad64f-b931-ad31-7617-fa09a3760ef3.png"></a></p>

<hr>

<h2>
<span id="-2" class="fragment"></span><a href="#-2"><i class="fa fa-link"></i></a><a href="https://camo.qiitausercontent.com/2893ea7710c00e4ac51cb8f68f630928be69d7fe/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f39616339623363652d623664372d373434312d633962612d6365336232313934303963352e706e67" target="_blank" rel="nofollow noopener"><img width="722" alt="Screen Shot 2017-10-04 at 22.36.56.png" src="https://camo.qiitausercontent.com/2893ea7710c00e4ac51cb8f68f630928be69d7fe/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f39616339623363652d623664372d373434312d633962612d6365336232313934303963352e706e67" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/62822/9ac9b3ce-b6d7-7441-c9ba-ce3b219409c5.png"></a>
</h2>

<h2>
<span id="完成形はこちら" class="fragment"></span><a href="#%E5%AE%8C%E6%88%90%E5%BD%A2%E3%81%AF%E3%81%93%E3%81%A1%E3%82%89"><i class="fa fa-link"></i></a>完成形はこちら</h2>

<p><a href="https://camo.qiitausercontent.com/a6e5a6705c123858916f828f8d1102b90c693f14/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f37653034333464302d396437642d326534612d666233362d3733653831333530336666622e676966" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/a6e5a6705c123858916f828f8d1102b90c693f14/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f37653034333464302d396437642d326534612d666233362d3733653831333530336666622e676966" alt="yosidariho_full.gif" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/62822/7e0434d0-9d7d-2e4a-fb36-73e813503ffb.gif"></a></p>

<h2>
<span id="まとめ" class="fragment"></span><a href="#%E3%81%BE%E3%81%A8%E3%82%81"><i class="fa fa-link"></i></a>まとめ</h2>

<ul>
<li>DZNEmptyDataSetを使えば、tableViewやcolelctionView scrollViewに何もないときに画像やテキストをかんたんに表示することができます。</li>
<li>おすすめです！</li>
</ul>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>okamu_さんの<br />17位</center></td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>4</kbd>
		<a target="_blank" href="https://qiita.com/okamu_/items/34c023b367abfa9db0d8">googleAd広告の威力とそのパワーをQiitaで検証</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2017-10-23 20:46:32</center>
	</td>
	<td style="width:200px;">
		@okamu_<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/62822/profile-images/1491391263">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Qiita]</b> <b>[GoogleAnalytics]</b> <b>[analytics]</b> <b>[広告]</b> <b>[GoogleAdwords]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>各種SNS（twtter,facebook,googleAd）の広告の効果を確かめ、Qiita記事にいいねがどれだけつくのかを検証します。</p>

<h2>
<span id="経緯" class="fragment"></span><a href="#%E7%B5%8C%E7%B7%AF"><i class="fa fa-link"></i></a><strong>経緯</strong>
</h2>

<h3>
<span id="qiitaにいいねがあるひとって-かっこいい" class="fragment"></span><a href="#qiita%E3%81%AB%E3%81%84%E3%81%84%E3%81%AD%E3%81%8C%E3%81%82%E3%82%8B%E3%81%B2%E3%81%A8%E3%81%A3%E3%81%A6-%E3%81%8B%E3%81%A3%E3%81%93%E3%81%84%E3%81%84"><i class="fa fa-link"></i></a><strong>Qiitaにいいねがあるひとって かっこいい!!</strong>
</h3>

<p>fnobi さん（2568いいね）<br>
<a href="https://camo.qiitausercontent.com/5c54730c20a2449a3c32adad6a6410651ac59b87/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f31363836333433372d343036352d363562642d656261342d3234373339623239356562642e706e67" target="_blank" rel="nofollow noopener"><img width="200" alt="スクリーンショット 2017-10-21 10.03.32.png" src="https://camo.qiitausercontent.com/5c54730c20a2449a3c32adad6a6410651ac59b87/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f31363836333433372d343036352d363562642d656261342d3234373339623239356562642e706e67" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/62822/16863437-4065-65bd-eba4-24739b295ebd.png"></a></p>

<p>mono0926　さん　（14722いいね）<br>
<a href="https://camo.qiitausercontent.com/3fbe9bdf09a9166f3ebd0ea234ea6ef92ed46a71/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f39613839663465362d306663652d346332352d626262302d3230333365383031313532392e706e67" target="_blank" rel="nofollow noopener"><img width="200" alt="スクリーンショット 2017-10-21 10.04.01.png" src="https://camo.qiitausercontent.com/3fbe9bdf09a9166f3ebd0ea234ea6ef92ed46a71/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f39613839663465362d306663652d346332352d626262302d3230333365383031313532392e706e67" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/62822/9a89f4e6-0fce-4c25-bbb0-2033e8011529.png"></a></p>

<p>zembutsu さん　（7386いいね）<br>
<a href="https://camo.qiitausercontent.com/a5fe611890b564fae4fe0a7371b603d6c2e4a583/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f34633139623739652d663236612d363665612d313431642d3635626564353563663163312e706e67" target="_blank" rel="nofollow noopener"><img width="200" alt="スクリーンショット 2017-10-21 10.05.46.png" src="https://camo.qiitausercontent.com/a5fe611890b564fae4fe0a7371b603d6c2e4a583/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f34633139623739652d663236612d363665612d313431642d3635626564353563663163312e706e67" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/62822/4c19b79e-f26a-66ea-141d-65bed55cf1c1.png"></a></p>

<p>完全に私の妄想ですが、<br>
<strong>1000オーバーのいいねを持っている人は、どういうわけかかっこよくみえるし、凄腕エンジニアっぽい</strong></p>

<p>アウトプットの習慣が身についているからこそ<br>
凄腕エンジニアなのでしょう！！（きっと）</p>

<h3>
<span id="そこで2週間前から私も毎日qiita記事を書くことにしました" class="fragment"></span><a href="#%E3%81%9D%E3%81%93%E3%81%A72%E9%80%B1%E9%96%93%E5%89%8D%E3%81%8B%E3%82%89%E7%A7%81%E3%82%82%E6%AF%8E%E6%97%A5qiita%E8%A8%98%E4%BA%8B%E3%82%92%E6%9B%B8%E3%81%8F%E3%81%93%E3%81%A8%E3%81%AB%E3%81%97%E3%81%BE%E3%81%97%E3%81%9F"><i class="fa fa-link"></i></a><strong>そこで2週間前から、私も毎日Qiita記事を書くことにしました！！</strong>
</h3>

<ul>
<li>これで凄腕エンジニアの仲間入りヤァぁぁぁぁぁぁあああああああ!!!!!</li>
</ul>

<h3>
<span id="これまでのtitle抜粋" class="fragment"></span><a href="#%E3%81%93%E3%82%8C%E3%81%BE%E3%81%A7%E3%81%AEtitle%E6%8A%9C%E7%B2%8B"><i class="fa fa-link"></i></a>これまでのtitle(抜粋)</h3>

<ul>
<li>(0いいね)<a href="https://qiita.com/okamu_/items/4ce91f45522f7fd0948f" id="reference-3ab74746cf608491bd91">【swift】この里帆ちゃんは jpeg か png かそれとも〇〇？？</a>
</li>
<li>(3いいね)<a href="https://qiita.com/okamu_/items/4a541b2b5aba81f8653a" id="reference-1eeca8ad51aa4961abdc">【swift】tableViewに何もなければ、吉岡里帆ちゃんが出現する</a>
</li>
<li>(6いいね)<a href="https://qiita.com/okamu_/items/d370c69906b9c7aa225e" id="reference-ccc4bb05114d489506d6">【mac】VPN設定せずにVPNしたかのようにする</a>
</li>
<li>(3いいね)<a href="https://qiita.com/okamu_/items/2967726eef27420e6c63" id="reference-22bfac6f88cea6483f17">serverless frameworkを使って本格的なAPIサーバーを構築（テストコード編）</a>
</li>
<li>(7いいね)<a href="https://qiita.com/okamu_/items/085cfc5999db801020ff" id="reference-df40a022096730264425">【Swift】 画像を３種類も書き出したくないでござる</a>
</li>
<li>(2いいね)<a href="https://qiita.com/okamu_/items/ee3186c7ac6e673deb18" id="reference-9a7042ce65d3f8486b2b">Rails5でActionCableを使うときはSocketIOで接続できない!!</a>
</li>
<li>(15いいね)<a href="https://qiita.com/okamu_/items/63fb3908f08ff4f75aa2" id="reference-1326455d0e959a181b49">【超厳選】Chromeに大量のタブを生成してしまう人向けの設定ランキングTop5</a>
</li>
</ul>

<h3>
<span id="非常にしょっぱい" class="fragment"></span><a href="#%E9%9D%9E%E5%B8%B8%E3%81%AB%E3%81%97%E3%82%87%E3%81%A3%E3%81%B1%E3%81%84"><i class="fa fa-link"></i></a>非常にしょっぱい</h3>

<h4>
<span id="" class="fragment"></span><a href="#"><i class="fa fa-link"></i></a>😭😭😭😭😭😭😭😭</h4>

<ul>
<li>２週間毎日投稿したのですが、あまりいいねがもらえないのです!!</li>
<li>しかしながら、画期的な方法を思いつきました！！！

<ul>
<li><strong>お金のちからに頼る！！ ＋ ついでに広告の効果を検証してまう！！</strong></li>
</ul>
</li>
</ul>

<h2>
<span id="ということでqiita記事に広告を打って効果を比較しつついいね増やします" class="fragment"></span><a href="#%E3%81%A8%E3%81%84%E3%81%86%E3%81%93%E3%81%A8%E3%81%A7qiita%E8%A8%98%E4%BA%8B%E3%81%AB%E5%BA%83%E5%91%8A%E3%82%92%E6%89%93%E3%81%A3%E3%81%A6%E5%8A%B9%E6%9E%9C%E3%82%92%E6%AF%94%E8%BC%83%E3%81%97%E3%81%A4%E3%81%A4%E3%81%84%E3%81%84%E3%81%AD%E5%A2%97%E3%82%84%E3%81%97%E3%81%BE%E3%81%99"><i class="fa fa-link"></i></a>ということで、Qiita記事に広告を打って効果を比較しつつ、いいね増やします！！</h2>

<ul>
<li><a href="https://qiita.com/okamu_/items/8d85f2461acfdfdfed6a" id="reference-12f44f07590a144e737d">Twitter</a></li>
<li><a href="https://qiita.com/okamu_/items/563f44149dbe027a1cd8" id="reference-5c4e418a421ea87a1f6c">Facebook</a></li>
<li>
<strong>google adwars</strong> &lt;- この記事はgoogleAdで広告をしている記事です</li>
</ul>

<p>広告をそれぞれのQiita記事で出しどんなユーザーがどこからどれだけ流入したかを比べようと思います。</p>

<h2>
<span id="計測方法" class="fragment"></span><a href="#%E8%A8%88%E6%B8%AC%E6%96%B9%E6%B3%95"><i class="fa fa-link"></i></a><strong>計測方法</strong>
</h2>

<ul>
<li>ほぼ同じ記事を３つ用意し、それぞれ広告を打つ（twitter,Facebook,googleAd）</li>
<li>googleAlyticsで集計する</li>
<li>計測は、2週間（2017/11/6まで）実施</li>
<li>それぞれ1万円（合計3万円）の広告を打つ</li>
</ul>

<h4>
<span id="計測する項目" class="fragment"></span><a href="#%E8%A8%88%E6%B8%AC%E3%81%99%E3%82%8B%E9%A0%85%E7%9B%AE"><i class="fa fa-link"></i></a>計測する項目</h4>

<ul>
<li>それぞれの流入でどこが多かったのか解析する</li>
<li>いいねを多くつけてくれる記事はどれだったか結果を待つ</li>
</ul>

<h3>
<span id="現状" class="fragment"></span><a href="#%E7%8F%BE%E7%8A%B6"><i class="fa fa-link"></i></a>現状</h3>

<ul>
<li>検索が一番多く、ソーシャルからの流入は少ない</li>
<li>Facebook, twitterともの少しだけ流入している</li>
</ul>

<p><a href="https://camo.qiitausercontent.com/537922f1cd429179296ed1c4290f07763f1c7bf3/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f34353738653335652d613438622d323938652d346438392d6534353230363430393633662e706e67" target="_blank" rel="nofollow noopener"><img width="1265" alt="スクリーンショット 2017-10-23 20.25.04.png" src="https://camo.qiitausercontent.com/537922f1cd429179296ed1c4290f07763f1c7bf3/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f34353738653335652d613438622d323938652d346438392d6534353230363430393633662e706e67" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/62822/4578e35e-a48b-298e-4d89-e4520640963f.png"></a></p>

<p><a href="https://camo.qiitausercontent.com/39fe88ecc17d314b97804c45a2795f7394a88d40/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f35326435356533322d393636612d383636652d316435612d6439646637623964316664662e706e67" target="_blank" rel="nofollow noopener"><img width="963" alt="スクリーンショット 2017-10-23 20.27.53.png" src="https://camo.qiitausercontent.com/39fe88ecc17d314b97804c45a2795f7394a88d40/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f35326435356533322d393636612d383636652d316435612d6439646637623964316664662e706e67" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/62822/52d55e32-966a-866e-1d5a-d9df7b9d1fdf.png"></a></p>

<h2>
<span id="計測結果追記します" class="fragment"></span><a href="#%E8%A8%88%E6%B8%AC%E7%B5%90%E6%9E%9C%E8%BF%BD%E8%A8%98%E3%81%97%E3%81%BE%E3%81%99"><i class="fa fa-link"></i></a><strong>計測結果（追記します）</strong>
</h2>

<p>広告の導入結果はこの記事で追記しようとおもいます</p>

<h3>
<span id="流入元" class="fragment"></span><a href="#%E6%B5%81%E5%85%A5%E5%85%83"><i class="fa fa-link"></i></a>流入元</h3>

<ul>
<li>twitter

<ul>
<li>???</li>
</ul>
</li>
<li>Facebook

<ul>
<li>???</li>
</ul>
</li>
<li>google

<ul>
<li>???</li>
</ul>
</li>
</ul>

<h3>
<span id="ユーザー数" class="fragment"></span><a href="#%E3%83%A6%E3%83%BC%E3%82%B6%E3%83%BC%E6%95%B0"><i class="fa fa-link"></i></a>ユーザー数</h3>

<ul>
<li>twitter

<ul>
<li>???</li>
</ul>
</li>
<li>Facebook

<ul>
<li>???</li>
</ul>
</li>
<li>google

<ul>
<li>???</li>
</ul>
</li>
</ul>

<h3>
<span id="いいね総数" class="fragment"></span><a href="#%E3%81%84%E3%81%84%E3%81%AD%E7%B7%8F%E6%95%B0"><i class="fa fa-link"></i></a>いいね総数</h3>

<ul>
<li>twitter

<ul>
<li>???</li>
</ul>
</li>
<li>Facebook

<ul>
<li>???</li>
</ul>
</li>
<li>google

<ul>
<li>???</li>
</ul>
</li>
</ul>

<h3>
<span id="その他" class="fragment"></span><a href="#%E3%81%9D%E3%81%AE%E4%BB%96"><i class="fa fa-link"></i></a>その他</h3>

<ul>
<li>twitter

<ul>
<li>???</li>
</ul>
</li>
<li>Facebook

<ul>
<li>???</li>
</ul>
</li>
<li>google

<ul>
<li>???</li>
</ul>
</li>
</ul>

<h1>
<span id="広告導入方法の紹介" class="fragment"></span><a href="#%E5%BA%83%E5%91%8A%E5%B0%8E%E5%85%A5%E6%96%B9%E6%B3%95%E3%81%AE%E7%B4%B9%E4%BB%8B"><i class="fa fa-link"></i></a><strong>広告導入方法の紹介</strong>
</h1>

<h2>
<span id="googleadwors" class="fragment"></span><a href="#googleadwors"><i class="fa fa-link"></i></a><strong>googleAdwors</strong>
</h2>

<p>1.welcomeページへアクセスする</p>

<p><a href="https://adwords.google.com/um/Welcome/Home?a=1&amp;authuser=0#oa" class="autolink" rel="nofollow noopener" target="_blank">https://adwords.google.com/um/Welcome/Home?a=1&amp;authuser=0#oa</a></p>

<p>2.アドレスとページを入力して次へ</p>

<p><a href="https://camo.qiitausercontent.com/b53201054ee6c5438d100595a619f3b77e7c3d9e/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f30303732326135372d306336342d316135622d323861342d3238646334336539333232352e706e67" target="_blank" rel="nofollow noopener"><img width="991" alt="スクリーンショット 2017-10-21 11.01.19.png" src="https://camo.qiitausercontent.com/b53201054ee6c5438d100595a619f3b77e7c3d9e/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f30303732326135372d306336342d316135622d323861342d3238646334336539333232352e706e67" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/62822/00722a57-0c64-1a5b-28a4-28dc43e93225.png"></a></p>

<p>3.予算やキーワードを指定して次へ</p>

<p><a href="https://camo.qiitausercontent.com/9a86fa89a396ae65ad8efc6da0845f32917f75b9/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f38623665353835372d613138332d663635662d303165652d6436313539653463616366652e706e67" target="_blank" rel="nofollow noopener"><img width="675" alt="スクリーンショット 2017-10-21 11.03.05.png" src="https://camo.qiitausercontent.com/9a86fa89a396ae65ad8efc6da0845f32917f75b9/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f38623665353835372d613138332d663635662d303165652d6436313539653463616366652e706e67" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/62822/8b6e5857-a183-f65f-01ee-d6159e4cacfe.png"></a></p>

<p>4.宣伝したいURLと検索キーワードを入力して次へ</p>

<p><a href="https://camo.qiitausercontent.com/fcf4110a0d2dd685b8d57d10d0d0969727a9b4f6/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f61303764306364662d393765392d313163372d313034312d6266383039636533373637632e706e67" target="_blank" rel="nofollow noopener"><img width="1091" alt="スクリーンショット 2017-10-23 20.05.05.png" src="https://camo.qiitausercontent.com/fcf4110a0d2dd685b8d57d10d0d0969727a9b4f6/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f61303764306364662d393765392d313163372d313034312d6266383039636533373637632e706e67" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/62822/a07d0cdf-97e9-11c7-1041-bf809ce3767c.png"></a></p>

<p>5.お支払いの登録をして完了！！</p>

<p><a href="https://camo.qiitausercontent.com/11735978394738a407ffdd2a57420ff8419f3726/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f31383136663264612d613662632d346262322d336531632d3365346634653932346338342e706e67" target="_blank" rel="nofollow noopener"><img width="1545" alt="スクリーンショット 2017-10-23 21.10.32.png" src="https://camo.qiitausercontent.com/11735978394738a407ffdd2a57420ff8419f3726/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f31383136663264612d613662632d346262322d336531632d3365346634653932346338342e706e67" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/62822/1816f2da-a6bc-4bb2-3e1c-3e4f4e924c84.png"></a></p>

<h2>
<span id="まとめ" class="fragment"></span><a href="#%E3%81%BE%E3%81%A8%E3%82%81"><i class="fa fa-link"></i></a><strong>まとめ</strong>
</h2>

<ul>
<li>web広告がどれだけ効果があるかわかりませんが、結果を待つとします。</li>
<li>予想ではtwitterからたくさんくるのではないかと思いますがどうなることやら！！</li>
</ul>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>okamu_さんの<br />18位</center></td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>3</kbd>
		<a target="_blank" href="https://qiita.com/okamu_/items/c051156e44c4fbd65234">【超入門】負荷分散をAWSのロードバランサーを使ってやってみよう</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2017-10-31 09:39:29</center>
	</td>
	<td style="width:200px;">
		@okamu_<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/62822/profile-images/1491391263">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[AWS]</b> <b>[入門]</b> <b>[サーバー]</b> <b>[新人プログラマ応援]</b> <b>[1000チャレンジ]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;">
<h1>
<span id="awsのロードバランサーを使って負荷分散をする初級編" class="fragment"></span><a href="#aws%E3%81%AE%E3%83%AD%E3%83%BC%E3%83%89%E3%83%90%E3%83%A9%E3%83%B3%E3%82%B5%E3%83%BC%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%A6%E8%B2%A0%E8%8D%B7%E5%88%86%E6%95%A3%E3%82%92%E3%81%99%E3%82%8B%E5%88%9D%E7%B4%9A%E7%B7%A8"><i class="fa fa-link"></i></a>AWSのロードバランサーを使って負荷分散をする(初級編)</h1>

<p>この記事は、AWSのELBを使ったことがないけど、ロードバランサー？負荷分散！？という方向けの記事です。</p>

<h2>
<span id="ロードバランサーの役割" class="fragment"></span><a href="#%E3%83%AD%E3%83%BC%E3%83%89%E3%83%90%E3%83%A9%E3%83%B3%E3%82%B5%E3%83%BC%E3%81%AE%E5%BD%B9%E5%89%B2"><i class="fa fa-link"></i></a>ロードバランサーの役割</h2>

<p>大きく分けて二つの機能があります。<br>
１、複数台webサーバーを複数台用意し、負荷を分散させることができます。<br>
２、メンテナンスや障害時には切り離しを行うことができます。</p>

<p><a href="https://camo.qiitausercontent.com/6275ce05cfd65fa26bb5a27433800fbd38e1267d/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f61333732656566342d383437382d656663392d636431302d6237656165653630633834342e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/6275ce05cfd65fa26bb5a27433800fbd38e1267d/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f61333732656566342d383437382d656663392d636431302d6237656165653630633834342e706e67" alt="image.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/62822/a372eef4-8478-efc9-cd10-b7eaee60c844.png"></a></p>

<h2>
<span id="awsのロードバランサーの種類" class="fragment"></span><a href="#aws%E3%81%AE%E3%83%AD%E3%83%BC%E3%83%89%E3%83%90%E3%83%A9%E3%83%B3%E3%82%B5%E3%83%BC%E3%81%AE%E7%A8%AE%E9%A1%9E"><i class="fa fa-link"></i></a>AWSのロードバランサーの種類</h2>

<ul>
<li>ELB (Classic Load Balancer)

<ul>
<li>ALBより前からあった設定が基本的にしやすいロードバランサー</li>
</ul>
</li>
<li>ALB (Application Load Balancer)

<ul>
<li>パスベースルーティング機能など豊富になったようなもの</li>
</ul>
</li>
<li>NLB (Network Load Balancer)

<ul>
<li>長時間接続やリージョン内とリージョンを跨いだフェイルオーバーが可能になり、さらに進化したみたいな感じ</li>
</ul>
</li>
</ul>

<h2>
<span id="早速利用してみる" class="fragment"></span><a href="#%E6%97%A9%E9%80%9F%E5%88%A9%E7%94%A8%E3%81%97%E3%81%A6%E3%81%BF%E3%82%8B"><i class="fa fa-link"></i></a>早速利用してみる</h2>

<ul>
<li>今回は概念としてわかりやすく、設定しやすいELBを使って見ましょう！</li>
</ul>

<h3>
<span id="ec2インスタンスを複数用意する" class="fragment"></span><a href="#ec2%E3%82%A4%E3%83%B3%E3%82%B9%E3%82%BF%E3%83%B3%E3%82%B9%E3%82%92%E8%A4%87%E6%95%B0%E7%94%A8%E6%84%8F%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>EC2インスタンスを複数用意する</h3>

<ul>
<li>同じアプリケーションサーバーを複数用意します。この時おすすめなのは、現段階で動いているインスタンスのイメージ（AMI）
を作成し、そのAMIから新しいインスタンスを起動するとほぼ同じアプリケーションサーバーを立てることができます。</li>
<li>このへんの記事がわかりやすいかと思います

<ul>
<li>
<a href="https://qiita.com/murachi1208/items/8be3cd006d31f1f81ee4" id="reference-2498119217c0cab93191">Amazon Web Services(AWS) のEC2でインスタンスをコピーする方法
</a> </li>
</ul>
</li>
</ul>

<h3>
<span id="ロードバランサーを作成する" class="fragment"></span><a href="#%E3%83%AD%E3%83%BC%E3%83%89%E3%83%90%E3%83%A9%E3%83%B3%E3%82%B5%E3%83%BC%E3%82%92%E4%BD%9C%E6%88%90%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>ロードバランサーを作成する</h3>

<p>インスタンスを複数起動しましたら、さっそくELBを作成しましょう</p>

<ul>
<li>ec2の画面からロードバランサーを選びます</li>
</ul>

<p><a href="https://camo.qiitausercontent.com/46c69273347825a86c6f270867121ea08e332415/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f36623239323432352d396561372d626437352d613063302d3064316162643837316533362e706e67" target="_blank" rel="nofollow noopener"><img width="100" alt="スクリーンショット 2017-10-30 21.20.36.png" src="https://camo.qiitausercontent.com/46c69273347825a86c6f270867121ea08e332415/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f36623239323432352d396561372d626437352d613063302d3064316162643837316533362e706e67" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/62822/6b292425-9ea7-bd75-a0c0-0d1abd871e36.png"></a></p>

<ul>
<li>
<strong>ロードバランサーの作成</strong>を押して、ELBを選びます</li>
</ul>

<p><a href="https://camo.qiitausercontent.com/eac3abcb86b8fa261849a3ce63afa127f635e2c6/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f32303061346138302d303163652d336533382d633933652d6164623965376663636333652e706e67" target="_blank" rel="nofollow noopener"><img width="1000" alt="スクリーンショット 2017-10-30 21.28.20.png" src="https://camo.qiitausercontent.com/eac3abcb86b8fa261849a3ce63afa127f635e2c6/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f32303061346138302d303163652d336533382d633933652d6164623965376663636333652e706e67" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/62822/200a4a80-01ce-3e38-c93e-adb9e7fccc3e.png"></a></p>

<ul>
<li><p>ロードバランサーの名前とプロトコルを選択して次へ進みます。<br>
<a href="https://camo.qiitausercontent.com/4bfb0ab3fc6e150d7d905bcf1286560efb56e61f/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f30313266323138352d353837342d623661322d383437312d3130316435356134376132622e706e67" target="_blank" rel="nofollow noopener"><img width="1580" alt="スクリーンショット 2017-10-30 21.44.35.png" src="https://camo.qiitausercontent.com/4bfb0ab3fc6e150d7d905bcf1286560efb56e61f/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f30313266323138352d353837342d623661322d383437312d3130316435356134376132622e706e67" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/62822/012f2185-5874-b6a2-8471-101d55a47a2b.png"></a></p></li>
<li><p>セキュリティグループの設定を行って次へ進みます。</p></li>
</ul>

<p><a href="https://camo.qiitausercontent.com/9d118205dba7fa25202f27186c5a09d6dd261666/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f37313036396636372d336365642d313639612d356264322d3836333263323439373730332e706e67" target="_blank" rel="nofollow noopener"><img width="1521" alt="スクリーンショット 2017-10-30 21.44.59.png" src="https://camo.qiitausercontent.com/9d118205dba7fa25202f27186c5a09d6dd261666/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f37313036396636372d336365642d313639612d356264322d3836333263323439373730332e706e67" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/62822/71069f67-3ced-169a-5bd2-8632c2497703.png"></a></p>

<h3>
<span id="ヘルスチェックの設定をする" class="fragment"></span><a href="#%E3%83%98%E3%83%AB%E3%82%B9%E3%83%81%E3%82%A7%E3%83%83%E3%82%AF%E3%81%AE%E8%A8%AD%E5%AE%9A%E3%82%92%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>ヘルスチェックの設定をする</h3>

<ul>
<li>ヘルスチェックというのは、サーバーが生きているか確認してくれる機能のことで、生きているか確認できるパスを指定します。</li>
<li><p>静的サイトであれば/index.htmlでもいいと思いますが、動的サイトなどはDBに負荷がかかるかもしれないので、チェック用のパスを設定するのが良いと思います。</p></li>
<li><p>高度な設定では、間隔や何回成功・失敗で正常とするか非正常とするかの設定ができます。</p></li>
</ul>

<p><a href="https://camo.qiitausercontent.com/0e79aae572e187b996f9ea5df9f3a7bf24177fc9/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f64366437353233622d343961392d646466652d623230622d3832343831323736363533352e706e67" target="_blank" rel="nofollow noopener"><img width="440" alt="スクリーンショット 2017-10-30 21.45.17.png" src="https://camo.qiitausercontent.com/0e79aae572e187b996f9ea5df9f3a7bf24177fc9/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f64366437353233622d343961392d646466652d623230622d3832343831323736363533352e706e67" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/62822/d6d7523b-49a9-ddfe-b20b-824812766535.png"></a></p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>ハマりポイント！！

突然サーバーが見えなくなったしエラーも返さない！！
っとなる場合がありますが、おおよそはアプリケーションエラーでヘルスチェックに失敗して自動的に非正常ステータスとなりELBがルーティングを切っている状態になります。
突然サーバーが見えなくなったしエラーも返さない場合は、再起動するのではなくELBを疑って見ましょう！！
</pre></div></div>

<h3>
<span id="その他設定" class="fragment"></span><a href="#%E3%81%9D%E3%81%AE%E4%BB%96%E8%A8%AD%E5%AE%9A"><i class="fa fa-link"></i></a>その他設定</h3>

<ul>
<li>
<p>instanceの設定</p>

<ul>
<li>ここで先ほど複数作成したEC2インスタンスを登録します。</li>
</ul>
</li>
<li>
<p>tagの設定をする</p>

<ul>
<li>nameに対して適当なLBの名前を入れておきましょう。いつか役に立つ時がきます。
<a href="https://camo.qiitausercontent.com/18fea40ae5d61675b72b2bc456613bc88c548c85/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f37646366333434632d353963362d326432662d613437332d3237313132663237336164382e706e67" target="_blank" rel="nofollow noopener"><img width="1294" alt="スクリーンショット 2017-10-30 21.45.47.png" src="https://camo.qiitausercontent.com/18fea40ae5d61675b72b2bc456613bc88c548c85/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f37646366333434632d353963362d326432662d613437332d3237313132663237336164382e706e67" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/62822/7dcf344c-59c6-2d2f-a473-27112f273ad8.png"></a>
</li>
</ul>
</li>
<li><p>確認して作成しましょう！！</p></li>
<li><p>ロードバランサーが１つ追加されているとおもいます！！</p></li>
</ul>

<h2>
<span id="動作確認する" class="fragment"></span><a href="#%E5%8B%95%E4%BD%9C%E7%A2%BA%E8%AA%8D%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>動作確認する</h2>

<ul>
<li>作成後しばらくは、<code>unhealthy</code>（非正常）の状態になっていますが、ヘルスチェックが通り<code>active</code>(正常)になるとELBのAレコードでサイトが閲覧できるようになります。</li>
</ul>

<h3>
<span id="ロードバランシングされているか確認する" class="fragment"></span><a href="#%E3%83%AD%E3%83%BC%E3%83%89%E3%83%90%E3%83%A9%E3%83%B3%E3%82%B7%E3%83%B3%E3%82%B0%E3%81%95%E3%82%8C%E3%81%A6%E3%81%84%E3%82%8B%E3%81%8B%E7%A2%BA%E8%AA%8D%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>ロードバランシングされているか確認する</h3>

<ul>
<li>この作業は大事です、できていると思いきやできてない場合がありますので確認は行いましょう</li>
</ul>

<ol>
<li>それぞれ全てのEC2インスタンスにSSHする、nginxのaccess.logなどを<code>tailf</code>するなどして待機します。</li>
<li>先ほどのELBのAレコードでアクセスし、アクセスからバランシングされているかを確認する</li>
</ol>

<p>この確認作業を行ったら、EC2インスタンスは８０番ポートは開ける必要がないですので、EC2のセキュリティグループで閉じておきます。また、ELBからのアクセスを許可するようにするため、ELBにつけているセキュリティグループのIDを設定すると良いでしょう。</p>

<h2>
<span id="おまけ" class="fragment"></span><a href="#%E3%81%8A%E3%81%BE%E3%81%91"><i class="fa fa-link"></i></a>おまけ</h2>

<p>1台であってもEC2インスタンスの前には ELB を置きましょう</p>

<p>EC2 インスタンスのパブリック IP に CNAME を向けて公開するのはあまりよくないです。<br>
ElasticIPを設定していなければ、システムリブートのメンテナンスの時に、IPが変わってしまうのでDNSも変更しないといけなくなります。<br>
ELB を置いておけば無停止でサーバを入れ替えることができるので、ロードバランサ機能が不要でも使うことがおすすめです。</p>

<h2>
<span id="参考記事" class="fragment"></span><a href="#%E5%8F%82%E8%80%83%E8%A8%98%E4%BA%8B"><i class="fa fa-link"></i></a>参考記事</h2>

<ul>
<li><a href="https://www.tetrabit.jp/option/loadbalancer/" class="autolink" rel="nofollow noopener" target="_blank">https://www.tetrabit.jp/option/loadbalancer/</a></li>
<li><a href="https://blog.manabusakai.com/2014/09/ec2-design-pattern/" class="autolink" rel="nofollow noopener" target="_blank">https://blog.manabusakai.com/2014/09/ec2-design-pattern/</a></li>
</ul>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>okamu_さんの<br />19位</center></td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>3</kbd>
		<a target="_blank" href="https://qiita.com/okamu_/items/563f44149dbe027a1cd8">Facebook広告の威力とそのパワーをQiitaで検証</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2017-10-23 20:46:16</center>
	</td>
	<td style="width:200px;">
		@okamu_<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/62822/profile-images/1491391263">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Qiita]</b> <b>[Facebook]</b> <b>[GoogleAnalytics]</b> <b>[analytics]</b> <b>[広告]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>各種SNS（twtter,facebook,googleAd）の広告の効果を確かめ、Qiita記事にいいねがどれだけつくのかを検証します。</p>

<h2>
<span id="経緯" class="fragment"></span><a href="#%E7%B5%8C%E7%B7%AF"><i class="fa fa-link"></i></a><strong>経緯</strong>
</h2>

<h3>
<span id="qiitaにいいねがあるひとって-かっこいい" class="fragment"></span><a href="#qiita%E3%81%AB%E3%81%84%E3%81%84%E3%81%AD%E3%81%8C%E3%81%82%E3%82%8B%E3%81%B2%E3%81%A8%E3%81%A3%E3%81%A6-%E3%81%8B%E3%81%A3%E3%81%93%E3%81%84%E3%81%84"><i class="fa fa-link"></i></a><strong>Qiitaにいいねがあるひとって かっこいい!!</strong>
</h3>

<p>fnobi さん（2568いいね）<br>
<a href="https://camo.qiitausercontent.com/5c54730c20a2449a3c32adad6a6410651ac59b87/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f31363836333433372d343036352d363562642d656261342d3234373339623239356562642e706e67" target="_blank" rel="nofollow noopener"><img width="200" alt="スクリーンショット 2017-10-21 10.03.32.png" src="https://camo.qiitausercontent.com/5c54730c20a2449a3c32adad6a6410651ac59b87/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f31363836333433372d343036352d363562642d656261342d3234373339623239356562642e706e67" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/62822/16863437-4065-65bd-eba4-24739b295ebd.png"></a></p>

<p>mono0926　さん　（14722いいね）<br>
<a href="https://camo.qiitausercontent.com/3fbe9bdf09a9166f3ebd0ea234ea6ef92ed46a71/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f39613839663465362d306663652d346332352d626262302d3230333365383031313532392e706e67" target="_blank" rel="nofollow noopener"><img width="200" alt="スクリーンショット 2017-10-21 10.04.01.png" src="https://camo.qiitausercontent.com/3fbe9bdf09a9166f3ebd0ea234ea6ef92ed46a71/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f39613839663465362d306663652d346332352d626262302d3230333365383031313532392e706e67" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/62822/9a89f4e6-0fce-4c25-bbb0-2033e8011529.png"></a></p>

<p>zembutsu さん　（7386いいね）<br>
<a href="https://camo.qiitausercontent.com/a5fe611890b564fae4fe0a7371b603d6c2e4a583/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f34633139623739652d663236612d363665612d313431642d3635626564353563663163312e706e67" target="_blank" rel="nofollow noopener"><img width="200" alt="スクリーンショット 2017-10-21 10.05.46.png" src="https://camo.qiitausercontent.com/a5fe611890b564fae4fe0a7371b603d6c2e4a583/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f34633139623739652d663236612d363665612d313431642d3635626564353563663163312e706e67" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/62822/4c19b79e-f26a-66ea-141d-65bed55cf1c1.png"></a></p>

<p>完全に私の妄想ですが、<br>
<strong>1000オーバーのいいねを持っている人は、どういうわけかかっこよくみえるし、凄腕エンジニアっぽい</strong></p>

<p>アウトプットの習慣が身についているからこそ<br>
凄腕エンジニアなのでしょう！！（きっと）</p>

<h3>
<span id="そこで2週間前から私も毎日qiita記事を書くことにしました" class="fragment"></span><a href="#%E3%81%9D%E3%81%93%E3%81%A72%E9%80%B1%E9%96%93%E5%89%8D%E3%81%8B%E3%82%89%E7%A7%81%E3%82%82%E6%AF%8E%E6%97%A5qiita%E8%A8%98%E4%BA%8B%E3%82%92%E6%9B%B8%E3%81%8F%E3%81%93%E3%81%A8%E3%81%AB%E3%81%97%E3%81%BE%E3%81%97%E3%81%9F"><i class="fa fa-link"></i></a><strong>そこで2週間前から、私も毎日Qiita記事を書くことにしました！！</strong>
</h3>

<ul>
<li>これで凄腕エンジニアの仲間入りヤァぁぁぁぁぁぁあああああああ!!!!!</li>
</ul>

<h3>
<span id="これまでのtitle抜粋" class="fragment"></span><a href="#%E3%81%93%E3%82%8C%E3%81%BE%E3%81%A7%E3%81%AEtitle%E6%8A%9C%E7%B2%8B"><i class="fa fa-link"></i></a>これまでのtitle(抜粋)</h3>

<ul>
<li>(0いいね)<a href="https://qiita.com/okamu_/items/4ce91f45522f7fd0948f" id="reference-0242c3b9325c234c4ebf">【swift】この里帆ちゃんは jpeg か png かそれとも〇〇？？</a>
</li>
<li>(3いいね)<a href="https://qiita.com/okamu_/items/4a541b2b5aba81f8653a" id="reference-88111ac4882d861a119b">【swift】tableViewに何もなければ、吉岡里帆ちゃんが出現する</a>
</li>
<li>(6いいね)<a href="https://qiita.com/okamu_/items/d370c69906b9c7aa225e" id="reference-828262dc5ee48c84636e">【mac】VPN設定せずにVPNしたかのようにする</a>
</li>
<li>(3いいね)<a href="https://qiita.com/okamu_/items/2967726eef27420e6c63" id="reference-4831f623a6e7ab9daea3">serverless frameworkを使って本格的なAPIサーバーを構築（テストコード編）</a>
</li>
<li>(7いいね)<a href="https://qiita.com/okamu_/items/085cfc5999db801020ff" id="reference-ba1f44a4e7a2523814ac">【Swift】 画像を３種類も書き出したくないでござる</a>
</li>
<li>(2いいね)<a href="https://qiita.com/okamu_/items/ee3186c7ac6e673deb18" id="reference-bc2114b4b9b895a65978">Rails5でActionCableを使うときはSocketIOで接続できない!!</a>
</li>
<li>(15いいね)<a href="https://qiita.com/okamu_/items/63fb3908f08ff4f75aa2" id="reference-6d324f2b46029f65b62d">【超厳選】Chromeに大量のタブを生成してしまう人向けの設定ランキングTop5</a>
</li>
</ul>

<h3>
<span id="非常にしょっぱい" class="fragment"></span><a href="#%E9%9D%9E%E5%B8%B8%E3%81%AB%E3%81%97%E3%82%87%E3%81%A3%E3%81%B1%E3%81%84"><i class="fa fa-link"></i></a>非常にしょっぱい</h3>

<h4>
<span id="" class="fragment"></span><a href="#"><i class="fa fa-link"></i></a>😭😭😭😭😭😭😭😭</h4>

<ul>
<li>２週間毎日投稿したのですが、あまりいいねがもらえないのです!!</li>
<li>しかしながら、画期的な方法を思いつきました！！！

<ul>
<li><strong>お金のちからに頼る！！ ＋ ついでに広告の効果を検証してまう！！</strong></li>
</ul>
</li>
</ul>

<h2>
<span id="ということでqiita記事に広告を打って効果を比較しつついいね増やします" class="fragment"></span><a href="#%E3%81%A8%E3%81%84%E3%81%86%E3%81%93%E3%81%A8%E3%81%A7qiita%E8%A8%98%E4%BA%8B%E3%81%AB%E5%BA%83%E5%91%8A%E3%82%92%E6%89%93%E3%81%A3%E3%81%A6%E5%8A%B9%E6%9E%9C%E3%82%92%E6%AF%94%E8%BC%83%E3%81%97%E3%81%A4%E3%81%A4%E3%81%84%E3%81%84%E3%81%AD%E5%A2%97%E3%82%84%E3%81%97%E3%81%BE%E3%81%99"><i class="fa fa-link"></i></a>ということで、Qiita記事に広告を打って効果を比較しつつ、いいね増やします！！</h2>

<ul>
<li><a href="https://qiita.com/okamu_/items/8d85f2461acfdfdfed6a" id="reference-e140a3aa78ae2b13a07f">Twitter</a></li>
<li>
<strong>Facebook</strong> &lt;- この記事はFacebookで広告をしている記事です</li>
<li><a href="https://qiita.com/okamu_/items/34c023b367abfa9db0d8" id="reference-c7a1ce039ad105ed1846">GoogleAdwors</a></li>
</ul>

<p>広告をそれぞれのQiita記事で出しどんなユーザーがどこからどれだけ流入したかを比べようと思います。</p>

<h2>
<span id="計測方法" class="fragment"></span><a href="#%E8%A8%88%E6%B8%AC%E6%96%B9%E6%B3%95"><i class="fa fa-link"></i></a><strong>計測方法</strong>
</h2>

<ul>
<li>ほぼ同じ記事を３つ用意し、それぞれ広告を打つ（twitter,Facebook,googleAd）</li>
<li>googleAlyticsで集計する</li>
<li>計測は、2週間（2017/11/6まで）実施</li>
<li>それぞれ1万円（合計3万円）の広告を打つ</li>
</ul>

<h4>
<span id="計測する項目" class="fragment"></span><a href="#%E8%A8%88%E6%B8%AC%E3%81%99%E3%82%8B%E9%A0%85%E7%9B%AE"><i class="fa fa-link"></i></a>計測する項目</h4>

<ul>
<li>それぞれの流入でどこが多かったのか解析する</li>
<li>いいねを多くつけてくれる記事はどれだったか結果を待つ</li>
</ul>

<h3>
<span id="現状" class="fragment"></span><a href="#%E7%8F%BE%E7%8A%B6"><i class="fa fa-link"></i></a>現状</h3>

<ul>
<li>検索が一番多く、ソーシャルからの流入は少ない</li>
<li>Facebook, twitterともの少しだけ流入している</li>
</ul>

<p><a href="https://camo.qiitausercontent.com/537922f1cd429179296ed1c4290f07763f1c7bf3/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f34353738653335652d613438622d323938652d346438392d6534353230363430393633662e706e67" target="_blank" rel="nofollow noopener"><img width="1265" alt="スクリーンショット 2017-10-23 20.25.04.png" src="https://camo.qiitausercontent.com/537922f1cd429179296ed1c4290f07763f1c7bf3/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f34353738653335652d613438622d323938652d346438392d6534353230363430393633662e706e67" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/62822/4578e35e-a48b-298e-4d89-e4520640963f.png"></a></p>

<p><a href="https://camo.qiitausercontent.com/39fe88ecc17d314b97804c45a2795f7394a88d40/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f35326435356533322d393636612d383636652d316435612d6439646637623964316664662e706e67" target="_blank" rel="nofollow noopener"><img width="963" alt="スクリーンショット 2017-10-23 20.27.53.png" src="https://camo.qiitausercontent.com/39fe88ecc17d314b97804c45a2795f7394a88d40/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f35326435356533322d393636612d383636652d316435612d6439646637623964316664662e706e67" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/62822/52d55e32-966a-866e-1d5a-d9df7b9d1fdf.png"></a></p>

<h2>
<span id="計測結果追記します" class="fragment"></span><a href="#%E8%A8%88%E6%B8%AC%E7%B5%90%E6%9E%9C%E8%BF%BD%E8%A8%98%E3%81%97%E3%81%BE%E3%81%99"><i class="fa fa-link"></i></a><strong>計測結果（追記します）</strong>
</h2>

<p>広告の導入結果はこの記事で追記しようとおもいます</p>

<h3>
<span id="流入元" class="fragment"></span><a href="#%E6%B5%81%E5%85%A5%E5%85%83"><i class="fa fa-link"></i></a>流入元</h3>

<ul>
<li>twitter

<ul>
<li>???</li>
</ul>
</li>
<li>Facebook

<ul>
<li>???</li>
</ul>
</li>
<li>google

<ul>
<li>???</li>
</ul>
</li>
</ul>

<h3>
<span id="ユーザー数" class="fragment"></span><a href="#%E3%83%A6%E3%83%BC%E3%82%B6%E3%83%BC%E6%95%B0"><i class="fa fa-link"></i></a>ユーザー数</h3>

<ul>
<li>twitter

<ul>
<li>???</li>
</ul>
</li>
<li>Facebook

<ul>
<li>???</li>
</ul>
</li>
<li>google

<ul>
<li>???</li>
</ul>
</li>
</ul>

<h3>
<span id="いいね総数" class="fragment"></span><a href="#%E3%81%84%E3%81%84%E3%81%AD%E7%B7%8F%E6%95%B0"><i class="fa fa-link"></i></a>いいね総数</h3>

<ul>
<li>twitter

<ul>
<li>???</li>
</ul>
</li>
<li>Facebook

<ul>
<li>???</li>
</ul>
</li>
<li>google

<ul>
<li>???</li>
</ul>
</li>
</ul>

<h3>
<span id="その他" class="fragment"></span><a href="#%E3%81%9D%E3%81%AE%E4%BB%96"><i class="fa fa-link"></i></a>その他</h3>

<ul>
<li>twitter

<ul>
<li>???</li>
</ul>
</li>
<li>Facebook

<ul>
<li>???</li>
</ul>
</li>
<li>google

<ul>
<li>???</li>
</ul>
</li>
</ul>

<h1>
<span id="広告導入方法の紹介" class="fragment"></span><a href="#%E5%BA%83%E5%91%8A%E5%B0%8E%E5%85%A5%E6%96%B9%E6%B3%95%E3%81%AE%E7%B4%B9%E4%BB%8B"><i class="fa fa-link"></i></a><strong>広告導入方法の紹介</strong>
</h1>

<h2>
<span id="facebook" class="fragment"></span><a href="#facebook"><i class="fa fa-link"></i></a><strong>Facebook</strong>
</h2>

<p>1.<a href="https://www.facebook.com/ads/manager/creation/creation/" rel="nofollow noopener" target="_blank">Facebookの広告を作る</a>ボタンをおして広告ページへ行く</p>

<p><a href="https://camo.qiitausercontent.com/f11221885d43d250c0d442dccb779c51ab9b4734/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f61386437356530352d336331352d356535332d386234382d6135373664323937326163302e706e67" target="_blank" rel="nofollow noopener"><img width="233" alt="スクリーンショット 2017-10-23 20.10.27.png" src="https://camo.qiitausercontent.com/f11221885d43d250c0d442dccb779c51ab9b4734/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f61386437356530352d336331352d356535332d386234382d6135373664323937326163302e706e67" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/62822/a8d75e05-3c15-5e53-8b48-a576d2972ac0.png"></a></p>

<p>2.キャンペーンの目的を入力します<br>
- 今回の場合は「トラフィック」にしました</p>

<p><a href="https://camo.qiitausercontent.com/4851d17274dac4cf72ee05320b980c22ca59a4d6/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f39376566363735322d383431392d333965362d636337342d3938666362633534656135362e706e67" target="_blank" rel="nofollow noopener"><img width="1126" alt="スクリーンショット 2017-10-23 19.55.56.png" src="https://camo.qiitausercontent.com/4851d17274dac4cf72ee05320b980c22ca59a4d6/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f39376566363735322d383431392d333965362d636337342d3938666362633534656135362e706e67" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/62822/97ef6752-8419-39e6-cc74-98fcbc54ea56.png"></a></p>

<p>3.通貨や時間を選びます</p>

<p><a href="https://camo.qiitausercontent.com/bb15a720685ec4e3f8989965a9f00e43d524061d/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f35633030623330362d666131352d653432362d616134642d3730643837323363386137302e706e67" target="_blank" rel="nofollow noopener"><img width="1003" alt="スクリーンショット 2017-10-23 19.56.12.png" src="https://camo.qiitausercontent.com/bb15a720685ec4e3f8989965a9f00e43d524061d/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f35633030623330362d666131352d653432362d616134642d3730643837323363386137302e706e67" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/62822/5c00b306-fa15-e426-aa4d-70d8723c8a70.png"></a></p>

<p>4.トラフィックは今回webサイトを選択し、ターゲットとなる地域や年齢、性別などを細かく選んで行きます。</p>

<p><a href="https://camo.qiitausercontent.com/be0c0d609a33bf5d282a1c5f95845ecbe83797ae/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f61646131376438322d336539312d363361612d373732322d3036303035386166616431392e706e67" target="_blank" rel="nofollow noopener"><img width="961" alt="スクリーンショット 2017-10-23 19.56.41.png" src="https://camo.qiitausercontent.com/be0c0d609a33bf5d282a1c5f95845ecbe83797ae/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f61646131376438322d336539312d363361612d373732322d3036303035386166616431392e706e67" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/62822/ada17d82-3e91-63aa-7722-060058afad19.png"></a></p>

<p>5.広告の形式を選択します<br>
<a href="https://camo.qiitausercontent.com/c0b44019054fca9d9ba222afc0fd940f73450b5a/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f61623531633939392d303837372d373538632d363133342d3737316531376236383439362e706e67" target="_blank" rel="nofollow noopener"><img width="956" alt="スクリーンショット 2017-10-23 19.59.32.png" src="https://camo.qiitausercontent.com/c0b44019054fca9d9ba222afc0fd940f73450b5a/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f61623531633939392d303837372d373538632d363133342d3737316531376236383439362e706e67" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/62822/ab51c999-0877-758c-6134-771e17b68496.png"></a></p>

<p>6.ウェブサイトのURLを登録し、見出しのタイトルも記入して次へ行きます</p>

<p><a href="https://camo.qiitausercontent.com/e7fbd6771770e494f71b1aab7965f90c402a53b8/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f37363338623834342d633332302d393837652d326466392d3465393465663761383937612e706e67" target="_blank" rel="nofollow noopener"><img width="960" alt="スクリーンショット 2017-10-23 19.59.37.png" src="https://camo.qiitausercontent.com/e7fbd6771770e494f71b1aab7965f90c402a53b8/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f37363338623834342d633332302d393837652d326466392d3465393465663761383937612e706e67" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/62822/7638b844-c320-987e-2df9-4e94ef7a897a.png"></a></p>

<p>7.支払いの設定をするとok!!<br>
管理画面<br>
<a href="https://camo.qiitausercontent.com/7a503a57d25d264a52e70c72b9008e7323721473/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f31343534643036652d353366362d623535392d333932392d3736643965333933633238362e706e67" target="_blank" rel="nofollow noopener"><img width="1590" alt="スクリーンショット 2017-10-23 20.59.43.png" src="https://camo.qiitausercontent.com/7a503a57d25d264a52e70c72b9008e7323721473/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f31343534643036652d353366362d623535392d333932392d3736643965333933633238362e706e67" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/62822/1454d06e-53f6-b559-3929-76d9e393c286.png"></a></p>

<h2>
<span id="まとめ" class="fragment"></span><a href="#%E3%81%BE%E3%81%A8%E3%82%81"><i class="fa fa-link"></i></a><strong>まとめ</strong>
</h2>

<ul>
<li>web広告がどれだけ効果があるかわかりませんが、結果を待つとします。</li>
<li>予想ではtwitterからたくさんくるのではないかと思いますがどうなることやら！！</li>
</ul>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>okamu_さんの<br />20位</center></td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>3</kbd>
		<a target="_blank" href="https://qiita.com/okamu_/items/2967726eef27420e6c63">serverless frameworkを使って本格的なAPIサーバーを構築（テストコード編）</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2017-10-02 07:52:51</center>
	</td>
	<td style="width:200px;">
		@okamu_<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/62822/profile-images/1491391263">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[test]</b> <b>[AWS]</b> <b>[Express]</b> <b>[テスト]</b> <b>[serverless]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;">
<h1>
<span id="serverless-frameworkを使って本格的なapiサーバーを構築テストコード編" class="fragment"></span><a href="#serverless-framework%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%A6%E6%9C%AC%E6%A0%BC%E7%9A%84%E3%81%AAapi%E3%82%B5%E3%83%BC%E3%83%90%E3%83%BC%E3%82%92%E6%A7%8B%E7%AF%89%E3%83%86%E3%82%B9%E3%83%88%E3%82%B3%E3%83%BC%E3%83%89%E7%B7%A8"><i class="fa fa-link"></i></a>serverless frameworkを使って本格的なAPIサーバーを構築（テストコード編）</h1>

<p>LambdaやDynamoDB、APIGatewayなどの構成をコマンド１つですぐにデプロイしてくれる便利ツールの記事の第４弾です。<br>
保守メンテが楽になりつつも、実戦で速攻で構築ができます！！<br>
<del>MVC編</del> -&gt; テストコード編　に変更になりました。</p>

<h2>
<span id="目次" class="fragment"></span><a href="#%E7%9B%AE%E6%AC%A1"><i class="fa fa-link"></i></a>目次</h2>

<ul>
<li><a href="https://qiita.com/okamu_/items/e246887cb6f2621ad40a" id="reference-94081576b5eb081ab224">serverless frameworkを使って本格的なAPIサーバーを構築（魅力編）</a></li>
<li><a href="https://qiita.com/okamu_/items/0f1055e5c91ed99ebec6" id="reference-e8bb7772c0cfb0094569">serverless frameworkを使って本格的なAPIサーバーを構築（ハンズオン編）</a></li>
<li><a href="https://qiita.com/okamu_/items/c19e2a682afe41a47eb1" id="reference-3a14f2e81b07dd810d33">serverless frameworkを使って本格的なAPIサーバーを構築（Express編）</a></li>
<li><strong><a href="https://qiita.com/okamu_/items/2967726eef27420e6c63">serverless frameworkを使って本格的なAPIサーバーを構築（テストコード編）</a>←　今ここ</strong></li>
</ul>

<p><a href="https://camo.qiitausercontent.com/bca2e1899d6b398e26100843fc99a100b8766da7/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f65396666613034342d636461662d633032342d326462612d6236373034303761623164642e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/bca2e1899d6b398e26100843fc99a100b8766da7/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f65396666613034342d636461662d633032342d326462612d6236373034303761623164642e706e67" alt="framework_repo.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/62822/e9ffa044-cdaf-c024-2dba-b670407ab1dd.png"></a></p>

<p>前回まで、serverless frameworkを使い、AWS Lambda上でExpress動かす記事まで書きました。<br>
今回は、serverless frameworkで 「 <strong>lambda + APIGateway + DynamoDB</strong> 」　の構成で、<strong>Express</strong>を動かしテストできる構成にします。</p>

<h2>
<span id="この記事でできるようになること" class="fragment"></span><a href="#%E3%81%93%E3%81%AE%E8%A8%98%E4%BA%8B%E3%81%A7%E3%81%A7%E3%81%8D%E3%82%8B%E3%82%88%E3%81%86%E3%81%AB%E3%81%AA%E3%82%8B%E3%81%93%E3%81%A8"><i class="fa fa-link"></i></a>この記事でできるようになること</h2>

<ul>
<li>どこでも実行できる<strong>テストを書く</strong>

<ul>
<li><strong>DynamoDBのテストをStabを使って実現する</strong></li>
</ul>
</li>
</ul>

<h2>
<span id="dynamodb-stabを使う" class="fragment"></span><a href="#dynamodb-stab%E3%82%92%E4%BD%BF%E3%81%86"><i class="fa fa-link"></i></a>DynamoDB stabを使う</h2>

<ul>
<li>ローカルでテストを行う場合に毎回AWSリソースにアクセスさせる必要はないため、スタブ化してダミーの値を返しつつ、どういう値で呼ばれたか、テスト内で監視を行うことができる。

<ul>
<li>ローカルやテストコードの実行、外部テスト（CircleCIなどのCIツール）で便利です。</li>
</ul>
</li>
</ul>

<h2>
<span id="前準備" class="fragment"></span><a href="#%E5%89%8D%E6%BA%96%E5%82%99"><i class="fa fa-link"></i></a>前準備</h2>

<ul>
<li>テスト用のnpm moduleをinstallしておきます。</li>
</ul>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>chai lambda-tester mocha sinon aws-sdk-mock supertest
</pre></div></div>

<h2>
<span id="構築する" class="fragment"></span><a href="#%E6%A7%8B%E7%AF%89%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>構築する</h2>

<ul>
<li>ディレクトリ構成はこんな感じになりました。</li>
</ul>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ tree
├── functions
│   ├── api
│   │   ├── api.js
│   └── routes
│       ├── hoge.js
│       └── fuga.js
├── models
│   ├── hoge-users.js
│   └── huga-users.js
├── serverless.yml
├── tests
│   ├── functions
│   │   ├── hoge-test.js
│   │   └── huga-test.js
│   ├── lib
│   │   └── dynamo-stub.js
│   └── models
│       ├── hoge-users-test.js
│       └── fuga-users-test.js

</pre></div></div>

<h3>
<span id="stub化する" class="fragment"></span><a href="#stub%E5%8C%96%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>stub化する</h3>

<ul>
<li>以下のようにすることで、dynamodbのgetやputなどはstub化されます。</li>
</ul>

<div class="code-frame" data-lang="javascript">
<div class="code-lang"><span class="bold">tests/lib/dynamo-stub.js</span></div>
<div class="highlight"><pre><span></span><span class="s1">'use strict'</span>

<span class="kr">const</span> <span class="nx">aws</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'aws-sdk-mock'</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">path</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'path'</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">chai</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'chai'</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">should</span> <span class="o">=</span> <span class="nx">chai</span><span class="p">.</span><span class="nx">should</span><span class="p">();</span>
<span class="nx">aws</span><span class="p">.</span><span class="nx">setSDK</span><span class="p">(</span><span class="nx">path</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="s1">'node_modules/aws-sdk'</span><span class="p">));</span>
<span class="nx">process</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">'unhandledRejection'</span><span class="p">,</span> <span class="nx">console</span><span class="p">.</span><span class="nx">dir</span><span class="p">);</span>

<span class="kd">function</span> <span class="nx">create</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">aws</span><span class="p">.</span><span class="nx">mock</span><span class="p">(</span><span class="s1">'DynamoDB.DocumentClient'</span><span class="p">,</span> <span class="s1">'put'</span><span class="p">,</span> <span class="p">(</span><span class="nx">params</span><span class="p">,</span> <span class="nx">callback</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">callback</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="s1">'successfully put item in database'</span><span class="p">);</span>
  <span class="p">});</span>

  <span class="nx">aws</span><span class="p">.</span><span class="nx">mock</span><span class="p">(</span><span class="s1">'DynamoDB.DocumentClient'</span><span class="p">,</span> <span class="s1">'get'</span><span class="p">,</span> <span class="p">(</span><span class="nx">params</span><span class="p">,</span> <span class="nx">callback</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">callback</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="p">{</span> <span class="nx">Item</span><span class="o">:</span> <span class="p">{</span> <span class="nx">request_token</span><span class="o">:</span> <span class="s1">'UTPZgZTuL4cqYIjxvQFHFTdfuaIONLrp'</span> <span class="p">,</span> <span class="nx">request_secret</span><span class="o">:</span> <span class="s1">'5RGcFAAAAAAA1x1BAAABXd68Yr0'</span><span class="p">}</span> <span class="p">});</span>
  <span class="p">});</span>

  <span class="nx">aws</span><span class="p">.</span><span class="nx">mock</span><span class="p">(</span><span class="s1">'DynamoDB'</span><span class="p">,</span> <span class="s1">'describeTable'</span><span class="p">,</span> <span class="p">(</span><span class="nx">params</span><span class="p">,</span> <span class="nx">callback</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kr">const</span> <span class="nx">desc</span> <span class="o">=</span> <span class="p">{</span>
      <span class="nx">Table</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">AttributeDefinitions</span><span class="o">:</span> <span class="p">[</span> <span class="p">[</span><span class="nb">Object</span><span class="p">]</span> <span class="p">],</span>
        <span class="nx">TableName</span><span class="o">:</span> <span class="nx">params</span><span class="p">.</span><span class="nx">TableName</span><span class="p">,</span>
        <span class="nx">ProvisionedThroughput</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">NumberOfDecreasesToday</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
          <span class="nx">ReadCapacityUnits</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
          <span class="nx">WriteCapacityUnits</span><span class="o">:</span> <span class="mi">1</span>
        <span class="p">},</span>
        <span class="nx">TableSizeBytes</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="nx">ItemCount</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="nx">TableArn</span><span class="o">:</span> <span class="s1">'arn:aws:dynamodb:ap-northeast-1:12345678:table/aaaa'</span>
      <span class="p">}</span>
    <span class="p">};</span>
    <span class="nx">callback</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="nx">desc</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">}</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">create</span>
<span class="p">};</span>
</pre></div>
</div>

<h3>
<span id="apijs" class="fragment"></span><a href="#apijs"><i class="fa fa-link"></i></a>api.js</h3>

<ul>
<li>api.jsはいつもと変わりなくroutesにあるfunctionを、APIのPathに合わせて読んであげます。</li>
<li>この場合は、<code>api/v1/</code>に対して2つのfunctionが呼ばれるようになっています。</li>
</ul>

<div class="code-frame" data-lang="javascript">
<div class="code-lang"><span class="bold">functions/api/api.js</span></div>
<div class="highlight"><pre><span></span><span class="s1">'use strict'</span><span class="p">;</span>

<span class="kr">const</span> <span class="nx">express</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'express'</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">express</span><span class="p">();</span>
<span class="kr">const</span> <span class="nx">bodyParser</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'body-parser'</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">hoge</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'../routes/hoge'</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">fuga</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'../routes/fuga'</span><span class="p">);</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">bodyParser</span><span class="p">.</span><span class="nx">urlencoded</span><span class="p">({</span>
  <span class="nx">extended</span><span class="o">:</span> <span class="kc">true</span>
<span class="p">}));</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">bodyParser</span><span class="p">.</span><span class="nx">json</span><span class="p">());</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="s1">'/api/v1'</span><span class="p">,</span> <span class="nx">hoge</span><span class="p">);</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="s1">'/api/v1'</span><span class="p">,</span> <span class="nx">fuga</span><span class="p">);</span>

<span class="nx">exports</span><span class="p">.</span><span class="nx">handler</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'express-on-serverless'</span><span class="p">)(</span><span class="nx">app</span><span class="p">);</span>

<span class="k">if</span> <span class="p">(</span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">NODE_ENV</span> <span class="o">===</span> <span class="s1">'test'</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">app</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>

<h3>
<span id="function" class="fragment"></span><a href="#function"><i class="fa fa-link"></i></a>function</h3>

<ul>
<li>コントローラーに当たるfunctionは任意のPathがきたら実行されるようにしておきます</li>
<li>この場合は、<code>api/v1/hoge</code>に該当するAPIがきた場合に実行されます。</li>
<li>戻り値はjsonなので、特にViewは作っていませんので、ここで返します。</li>
</ul>

<div class="code-frame" data-lang="javascript">
<div class="code-lang"><span class="bold">functions/routes/hoge.js</span></div>
<div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">express</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'express'</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">HogeUsers</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'../../models/hoge-users'</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">router</span> <span class="o">=</span> <span class="nx">express</span><span class="p">.</span><span class="nx">Router</span><span class="p">();</span>

<span class="nx">router</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s1">'/hoge'</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">let</span> <span class="nx">user</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">HogeUsers</span><span class="p">();</span>
  <span class="nx">user</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">req</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">hash</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">hash</span><span class="p">.</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="nx">hash</span><span class="p">.</span><span class="nx">code</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span>
          <span class="nx">message</span><span class="o">:</span> <span class="nx">hash</span><span class="p">.</span><span class="nx">message</span>
        <span class="p">});</span>
      <span class="p">}</span>
      <span class="k">else</span> <span class="p">{</span>
        <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">({</span>
          <span class="nx">message</span><span class="o">:</span> <span class="nx">hash</span><span class="p">.</span><span class="nx">message</span>
        <span class="p">});</span>
      <span class="p">}</span>
    <span class="p">})</span>
    <span class="p">.</span><span class="k">catch</span><span class="p">((</span><span class="nx">err</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s1">'Internal Server Error'</span><span class="p">);</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
      <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">500</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span>
        <span class="nx">message</span><span class="o">:</span> <span class="s1">'Internal Server Error'</span>
      <span class="p">});</span>
    <span class="p">});</span>
<span class="p">});</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">router</span><span class="p">;</span>
</pre></div>
</div>

<h3>
<span id="モデル" class="fragment"></span><a href="#%E3%83%A2%E3%83%87%E3%83%AB"><i class="fa fa-link"></i></a>モデル</h3>

<ul>
<li>Modelでは、DynamoDBをconstructorで自分で持っておき、データに対する操作を一任します。</li>
<li>またバリデーションなどのチェックも行います。</li>
</ul>

<div class="code-frame" data-lang="javascript">
<div class="code-lang"><span class="bold">models/hoge-users.js</span></div>
<div class="highlight"><pre><span></span><span class="s1">'use strict'</span><span class="p">;</span>

<span class="kr">const</span> <span class="nx">aws</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'aws-sdk'</span><span class="p">);</span>

<span class="kr">class</span> <span class="nx">HogeUsers</span> <span class="p">{</span>
  <span class="nx">constructor</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">tableName</span> <span class="o">=</span> <span class="sb">`hoge-users-</span><span class="si">${</span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">STAGE</span><span class="si">}</span><span class="sb">`</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">dynamo</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">aws</span><span class="p">.</span><span class="nx">DynamoDB</span><span class="p">.</span><span class="nx">DocumentClient</span><span class="p">();</span>
  <span class="p">}</span>

  <span class="nx">create</span><span class="p">(</span><span class="nx">userParams</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nb">Promise</span><span class="p">((</span><span class="nx">resolve</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>

      <span class="kd">let</span> <span class="nx">permittedParams</span> <span class="o">=</span> <span class="cm">/* いろいろチェックする(省略) */</span>

      <span class="kr">const</span> <span class="nx">params</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">TableName</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">tableName</span><span class="p">,</span>
        <span class="nx">Item</span><span class="o">:</span> <span class="nx">permittedParams</span><span class="p">,</span>
        <span class="nx">ConditionExpression</span><span class="o">:</span> <span class="s1">'attribute_not_exists(xxxxxx)'</span>
      <span class="p">};</span>

      <span class="k">this</span><span class="p">.</span><span class="nx">dynamo</span><span class="p">.</span><span class="nx">put</span><span class="p">(</span><span class="nx">params</span><span class="p">,</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s1">'dynamodb put error'</span><span class="p">);</span>
          <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">err</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
          <span class="nx">resolve</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_throw</span><span class="p">(</span><span class="nx">err</span><span class="p">));</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
          <span class="nx">resolve</span><span class="p">({</span>
            <span class="nx">error</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
            <span class="nx">message</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
            <span class="nx">code</span><span class="o">:</span> <span class="mi">200</span>
          <span class="p">});</span>
        <span class="p">}</span>
      <span class="p">});</span>
    <span class="p">});</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">HogeUsers</span><span class="p">;</span>
</pre></div>
</div>

<h3>
<span id="functionのテスト" class="fragment"></span><a href="#function%E3%81%AE%E3%83%86%E3%82%B9%E3%83%88"><i class="fa fa-link"></i></a>functionのテスト</h3>

<ul>
<li>ここでは、/api/v1/hogeに対してのテストを書きます。</li>
<li>この場合は、400が帰ってくることをテストします。</li>
</ul>

<div class="code-frame" data-lang="javascript">
<div class="code-lang"><span class="bold">tests/functions/hoge-test.js</span></div>
<div class="highlight"><pre><span></span><span class="s1">'use strict'</span><span class="p">;</span>

<span class="kr">const</span> <span class="nx">LambdaTester</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'lambda-tester'</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">api</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'../../functions/api/api'</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'supertest'</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">dynamoStub</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'../lib/dynamo-stub'</span><span class="p">);</span>

<span class="nx">describe</span><span class="p">(</span><span class="s1">'functions hoge Tests'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">timeout</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
  <span class="nx">beforeEach</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">dynamoStub</span><span class="p">.</span><span class="nx">create</span><span class="p">();</span>
  <span class="p">});</span>

  <span class="c1">// /api/v1/hoge</span>
  <span class="nx">it</span><span class="p">(</span><span class="s1">'hoge fail post test'</span><span class="p">,</span> <span class="p">(</span><span class="nx">done</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">request</span><span class="p">(</span><span class="nx">api</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s1">'/api/v1/hoge'</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">send</span><span class="p">({</span><span class="nx">deviceType</span><span class="o">:</span> <span class="s1">'ios'</span><span class="p">})</span>
      <span class="p">.</span><span class="nx">expect</span><span class="p">(</span><span class="mi">400</span><span class="p">,</span> <span class="nx">done</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">});</span>

</pre></div>
</div>

<h2>
<span id="モデルのテスト" class="fragment"></span><a href="#%E3%83%A2%E3%83%87%E3%83%AB%E3%81%AE%E3%83%86%E3%82%B9%E3%83%88"><i class="fa fa-link"></i></a>モデルのテスト</h2>

<ul>
<li>モデルのテストでは、モデルクラスのテストを書きます。</li>
<li>この場合は、バリデーションがうまくいっているか検証をしています（省略）</li>
</ul>

<div class="code-frame" data-lang="javascript">
<div class="code-lang"><span class="bold">tests/models/hoge-users-test.js</span></div>
<div class="highlight"><pre><span></span><span class="s1">'use strict'</span><span class="p">;</span>

<span class="kr">const</span> <span class="nx">enc</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'../../lib/encrypt'</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">stub</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'../lib/dynamo-stub'</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">hogeUsers</span><span class="p">;</span>
<span class="kr">const</span> <span class="nx">HogeUsers</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'../../models/hoge-users'</span><span class="p">);</span>

<span class="nx">describe</span><span class="p">(</span><span class="s1">'hoge users Tests'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">timeout</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
  <span class="nx">beforeEach</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">stub</span><span class="p">.</span><span class="nx">create</span><span class="p">();</span>
    <span class="nx">hogeUsers</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">HogeUsers</span><span class="p">();</span>
  <span class="p">});</span>


  <span class="nx">it</span><span class="p">(</span><span class="s1">'hoge users validate HOGE'</span><span class="p">,</span> <span class="p">(</span><span class="nx">done</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="cm">/* いろいろチェックする(省略) &lt;- のテストとか */</span>
    <span class="nx">done</span><span class="p">();</span>
  <span class="p">});</span>


</pre></div>
</div>

<h2>
<span id="テストを実行する" class="fragment"></span><a href="#%E3%83%86%E3%82%B9%E3%83%88%E3%82%92%E5%AE%9F%E8%A1%8C%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>テストを実行する</h2>

<ul>
<li>最後に、package.jsonにテストを走らせるスクリプトを記述します。</li>
</ul>

<div class="code-frame" data-lang="json">
<div class="code-lang"><span class="bold">package.json</span></div>
<div class="highlight"><pre><span></span><span class="s2">"scripts"</span><span class="err">:</span> <span class="p">{</span>
    <span class="nt">"test"</span><span class="p">:</span> <span class="s2">"export NODE_PATH=`npm root -g` &amp;&amp; NODE_ENV=test mocha -t 100000 tests/**/*-test.js"</span>
  <span class="p">}</span>
</pre></div>
</div>

<ul>
<li>実行してみましょう</li>
</ul>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>$ yarn test
</pre></div></div>

<ul>
<li>テストが成功するとこんな感じになるはずです。</li>
</ul>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>
  hoge users Tests
    ✓ hoge name
    ✓ hoge users describeTable
    ✓ hoge users xxxxx HOGE
    ✓ hoge users xxxxx HOGE
    ✓ hoge users XXXXX check yyyy
    ✓ hoge users validate HOGE
    ✓ hoge users validate check yyyy

  fuga users Tests
    ✓ fuga name
    ✓ fuga users XXXXXX
    ✓ fuga users yyyy
    ✓ fuga users validate


  27 passing (1s)

✨  Done in 4.19s.
</pre></div></div>

<h2>
<span id="まとめ" class="fragment"></span><a href="#%E3%81%BE%E3%81%A8%E3%82%81"><i class="fa fa-link"></i></a>まとめ</h2>

<ul>
<li>aws-mockを使い、DynamoDBのstub化ができました。</li>
<li>modelクラスにDynamoDBを持つことで、functionのコード量が減りました。</li>
</ul>

<h2>
<span id="さいごに" class="fragment"></span><a href="#%E3%81%95%E3%81%84%E3%81%94%E3%81%AB"><i class="fa fa-link"></i></a>さいごに</h2>

<ul>
<li>serverless frameworkの記事とても楽しかったです。</li>
<li>また便利なのがあれば紹介したいと思います。</li>
</ul>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>okamu_さんの<br />21位</center></td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>3</kbd>
		<a target="_blank" href="https://qiita.com/okamu_/items/ffd90805e92af4031346">業務でawsを使っていたらCloudTrailを設定しよう</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2017-09-19 08:58:57</center>
	</td>
	<td style="width:200px;">
		@okamu_<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/62822/profile-images/1491391263">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[AWS]</b> <b>[S3]</b> <b>[log]</b> <b>[AmazonLinux]</b> <b>[運用]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;">
<h1>
<span id="awsを使っていたらcloudtrailを設定しよう" class="fragment"></span><a href="#aws%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%A6%E3%81%84%E3%81%9F%E3%82%89cloudtrail%E3%82%92%E8%A8%AD%E5%AE%9A%E3%81%97%E3%82%88%E3%81%86"><i class="fa fa-link"></i></a>awsを使っていたらCloudTrailを設定しよう</h1>

<h2>
<span id="cloudtrailとは" class="fragment"></span><a href="#cloudtrail%E3%81%A8%E3%81%AF"><i class="fa fa-link"></i></a>CloudTrailとは</h2>

<ul>
<li>AWS アカウントのガバナンス、コンプライアンス、運用監査、リスク監査を可能にするサービスです。（公式）</li>
</ul>

<p><a href="https://camo.qiitausercontent.com/15fe221dddba57d64c7ac7f1dd3a6f7239f59000/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f64633837663665372d323936342d316263302d373562362d6465313937336537313532342e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/15fe221dddba57d64c7ac7f1dd3a6f7239f59000/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f64633837663665372d323936342d316263302d373562362d6465313937336537313532342e706e67" alt="CloudTrail-01-HeaderPic-v2-small.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/62822/dc87f6e7-2964-1bc0-75b6-de1973e71524.png"></a></p>

<h3>
<span id="できること" class="fragment"></span><a href="#%E3%81%A7%E3%81%8D%E3%82%8B%E3%81%93%E3%81%A8"><i class="fa fa-link"></i></a>できること</h3>

<ul>
<li><strong>アカウントアクティビティをログに記録し、継続的に監視し、保持できます。</strong></li>
<li>SDK やコマンドラインツール、その他の AWS のサービスを使用して実行されるアクションなど、AWS アカウントアクティビティのイベント履歴を把握できます。</li>
<li>このイベント履歴により、セキュリティ分析、リソース変更の追跡、トラブルシューティングをより簡単に実行できるようになります。</li>
</ul>

<h2>
<span id="メリット" class="fragment"></span><a href="#%E3%83%A1%E3%83%AA%E3%83%83%E3%83%88"><i class="fa fa-link"></i></a>メリット</h2>

<h3>
<span id="コンプライアンスの簡素化" class="fragment"></span><a href="#%E3%82%B3%E3%83%B3%E3%83%97%E3%83%A9%E3%82%A4%E3%82%A2%E3%83%B3%E3%82%B9%E3%81%AE%E7%B0%A1%E7%B4%A0%E5%8C%96"><i class="fa fa-link"></i></a><strong>コンプライアンスの簡素化</strong>
</h3>

<ul>
<li>アカウント内で行われた操作のイベントログが自動的に記録および保存されるため、<strong>コンプライアンス監査を簡素化</strong>できます。</li>
<li>Amazon CloudWatch Logs との統合により、ログデータを検索したり、コンプライアンス違反のイベントを特定したり、インシデントの調査と監査者の要求に対する応答を迅速化したりできます。 </li>
</ul>

<h3>
<span id="ユーザーとリソースのアクティビティの可視化" class="fragment"></span><a href="#%E3%83%A6%E3%83%BC%E3%82%B6%E3%83%BC%E3%81%A8%E3%83%AA%E3%82%BD%E3%83%BC%E3%82%B9%E3%81%AE%E3%82%A2%E3%82%AF%E3%83%86%E3%82%A3%E3%83%93%E3%83%86%E3%82%A3%E3%81%AE%E5%8F%AF%E8%A6%96%E5%8C%96"><i class="fa fa-link"></i></a><strong>ユーザーとリソースのアクティビティの可視化</strong>
</h3>

<ul>
<li>AWS マネジメントコンソールでの操作と AWS API コールを記録することにより、ユーザーおよびリソースのアクティビティを把握しやすくなります。</li>
<li><strong>AWS を呼び出したユーザーとアカウント、呼び出し元 IP アドレス、および呼び出し日時を特定できます。</strong></li>
</ul>

<h3>
<span id="セキュリティのオートメーション" class="fragment"></span><a href="#%E3%82%BB%E3%82%AD%E3%83%A5%E3%83%AA%E3%83%86%E3%82%A3%E3%81%AE%E3%82%AA%E3%83%BC%E3%83%88%E3%83%A1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3"><i class="fa fa-link"></i></a><strong>セキュリティのオートメーション</strong>
</h3>

<ul>
<li>セキュリティの脆弱性を引き起こす可能性のあるイベントが検出されたときに実行されるワークフローを定義できます。</li>
<li>
<strong>例えば、</strong> Amazon S3 バケットを公開する API コールが CloudTrail によってログに記録されたときに特定のポリシーをそのバケットに追加する、というワークフローを作成できます。</li>
</ul>

<h2>
<span id="利用してみる" class="fragment"></span><a href="#%E5%88%A9%E7%94%A8%E3%81%97%E3%81%A6%E3%81%BF%E3%82%8B"><i class="fa fa-link"></i></a>利用してみる</h2>

<ul>
<li>CloudTrailにアクセスするとすでにログが記録されているのがわかります</li>
<li>誰が何時に何の操作をしたのかがわかります</li>
</ul>

<p><a href="https://camo.qiitausercontent.com/b7bb01b87495ce829c35ae06fd7415a5588396f2/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f38373934643634662d316235322d316138612d363262352d3363313162373562623761372e706e67" target="_blank" rel="nofollow noopener"><img width="1065" alt="Screen Shot 2017-09-16 at 21.28.41.png" src="https://camo.qiitausercontent.com/b7bb01b87495ce829c35ae06fd7415a5588396f2/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f38373934643634662d316235322d316138612d363262352d3363313162373562623761372e706e67" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/62822/8794d64f-1b52-1a8a-62b5-3c11b75bb7a7.png"></a></p>

<ul>
<li>すべてのイベントを表示してみると</li>
</ul>

<p><a href="https://camo.qiitausercontent.com/8818a780fb423d0df701d38c1ef02daf59a19f64/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f63333231633434652d373336312d356430662d623833392d3538396662613366623738662e706e67" target="_blank" rel="nofollow noopener"><img width="1005" alt="Screen Shot 2017-09-16 at 21.28.56.png" src="https://camo.qiitausercontent.com/8818a780fb423d0df701d38c1ef02daf59a19f64/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f63333231633434652d373336312d356430662d623833392d3538396662613366623738662e706e67" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/62822/c321c44e-7361-5d0f-b839-589fba3fb78f.png"></a></p>

<ul>
<li>７日以上のログを保存する場合や、アラートを飛ばしたいときは「証跡情報を作成」します</li>
</ul>

<p><a href="https://camo.qiitausercontent.com/a3a198af594bc467d28772a4e30456ee6448de4e/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f64616264303933302d303962652d616438322d333464382d3931306365336238316635332e706e67" target="_blank" rel="nofollow noopener"><img width="1116" alt="Screen Shot 2017-09-16 at 21.29.17.png" src="https://camo.qiitausercontent.com/a3a198af594bc467d28772a4e30456ee6448de4e/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f64616264303933302d303962652d616438322d333464382d3931306365336238316635332e706e67" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/62822/dabd0930-09be-ad82-34d8-910ce3b81f53.png"></a></p>

<ul>
<li>s3バケットなどを細かく設定できます！！！！！！</li>
</ul>

<h2>
<span id="料金" class="fragment"></span><a href="#%E6%96%99%E9%87%91"><i class="fa fa-link"></i></a>料金</h2>

<ul>
<li><p>WS CloudTrail を使用すると、サポートされたサービスの作成、変更、削除のオペレーションに関する過去 7 日間分のアカウントアクティビティの表示とダウンロードを無料で実行できます。</p></li>
<li><p>証跡情報を作成する際に AWS CloudTrail からの課金は発生しません。CloudTrail の証跡を作成すると、Amazon S3 バケットに 2 種類のイベントを送信できるようになります。</p></li>
<li><p>詳しくは公式の<a href="https://aws.amazon.com/jp/cloudtrail/pricing/" rel="nofollow noopener" target="_blank">料金表</a>へ</p></li>
</ul>

<h2>
<span id="サポートされているサービス" class="fragment"></span><a href="#%E3%82%B5%E3%83%9D%E3%83%BC%E3%83%88%E3%81%95%E3%82%8C%E3%81%A6%E3%81%84%E3%82%8B%E3%82%B5%E3%83%BC%E3%83%93%E3%82%B9"><i class="fa fa-link"></i></a>サポートされているサービス</h2>

<h4>
<span id="ほとんどサポートされていますね" class="fragment"></span><a href="#%E3%81%BB%E3%81%A8%E3%82%93%E3%81%A9%E3%82%B5%E3%83%9D%E3%83%BC%E3%83%88%E3%81%95%E3%82%8C%E3%81%A6%E3%81%84%E3%81%BE%E3%81%99%E3%81%AD"><i class="fa fa-link"></i></a>ほとんどサポートされていますね</h4>

<ul>
<li>AWS Marketplace</li>
<li>Amazon Athena</li>
<li>Amazon CloudSearch</li>
<li>Amazon EMR</li>
<li>AWS Data Pipeline</li>
<li>Amazon Kinesis Firehose</li>
<li>Amazon Kinesis Streams</li>
<li>Amazon QuickSight</li>
<li>Amazon API Gateway</li>
<li>Amazon Elastic Transcoder</li>
<li>Amazon Elasticsearch Service</li>
<li>Amazon Simple Workflow Service</li>
<li>AWS Step Functions</li>
<li>Amazon Machine Learning</li>
<li>Amazon Polly</li>
<li>Amazon WorkDocs</li>
<li>アプリケーションの Auto Scaling</li>
<li>Auto Scaling</li>
<li>Amazon EC2 Container Registry</li>
<li>Amazon EC2 Container Service</li>
<li>AWS Elastic Beanstalk</li>
<li>Amazon Elastic Compute Cloud</li>
<li>Elastic Load Balancing</li>
<li>AWS Lambda</li>
<li>Amazon Lightsail</li>
<li>Amazon DynamoDB</li>
<li>Amazon ElastiCache</li>
<li>Amazon Redshift</li>
<li>Amazon Relational Database Service</li>
<li>Amazon WorkSpaces</li>
<li>AWS CodeBuild</li>
<li>AWS CodeCommit</li>
<li>AWS CodeDeploy</li>
<li>AWS CodePipeline</li>
<li>AWS CodeStar</li>
<li>Amazon GameLift</li>
<li>AWS IoT</li>
<li>AWS Application Discovery Service</li>
<li>AWS CloudFormation</li>
<li>AWS CloudTrail</li>
<li>Amazon CloudWatch</li>
<li>Amazon CloudWatch Events</li>
<li>Amazon CloudWatch Logs</li>
<li>AWS Config</li>
<li>AWS マネージドサービス</li>
<li>AWS OpsWorks</li>
<li>AWS OpsWorks for Chef Automate</li>
<li>AWS Organizations</li>
<li>AWS Service Catalog</li>
<li>Amazon Simple Email Service</li>
<li>Amazon Simple Notification Service</li>
<li>Amazon Simple Queue Service</li>
<li>AWS Database Migration Service</li>
<li>AWS Server Migration Service</li>
<li>Amazon Cognito</li>
<li>AWS Device Farm</li>
<li>Amazon CloudFront</li>
<li>AWS Direct Connect</li>
<li>Amazon Route 53</li>
<li>Amazon Virtual Private Cloud</li>
<li>AWS Certificate Manager</li>
<li>Amazon Cloud Directory</li>
<li>AWS CloudHSM</li>
<li>AWS Directory Service</li>
<li>AWS Identity and Access Management</li>
<li>Amazon Inspector</li>
<li>AWS Key Management Service</li>
<li>AWS Security Token Service</li>
<li>AWS WAF</li>
<li>Amazon Elastic Block Store</li>
<li>Amazon Elastic File System</li>
<li>Amazon Glacier</li>
<li>Amazon Simple Storage Service</li>
<li>AWS Storage Gateway</li>
<li>AWS Personal Health Dashboard</li>
<li>AWS サポート</li>
</ul>

<h2>
<span id="サポートされていないもの" class="fragment"></span><a href="#%E3%82%B5%E3%83%9D%E3%83%BC%E3%83%88%E3%81%95%E3%82%8C%E3%81%A6%E3%81%84%E3%81%AA%E3%81%84%E3%82%82%E3%81%AE"><i class="fa fa-link"></i></a>サポートされていないもの</h2>

<h4>
<span id="サポートされていないものもありますので注意が必要です" class="fragment"></span><a href="#%E3%82%B5%E3%83%9D%E3%83%BC%E3%83%88%E3%81%95%E3%82%8C%E3%81%A6%E3%81%84%E3%81%AA%E3%81%84%E3%82%82%E3%81%AE%E3%82%82%E3%81%82%E3%82%8A%E3%81%BE%E3%81%99%E3%81%AE%E3%81%A7%E6%B3%A8%E6%84%8F%E3%81%8C%E5%BF%85%E8%A6%81%E3%81%A7%E3%81%99"><i class="fa fa-link"></i></a>サポートされていないものもありますので注意が必要です。</h4>

<p>Amazon AppStream<br>
Amazon AppStream 2.0<br>
Amazon Connect<br>
Amazon Lex<br>
Amazon Mobile Analytics<br>
Amazon Pinpoint<br>
Amazon Rekognition<br>
Amazon WorkMail<br>
AWS Batch<br>
AWS Greengrass<br>
AWS Shield<br>
AWS Snowball<br>
AWS X-Ray<br>
Amazon Chime<br>
Amazon WorkSpaces Application Manager<br>
AWS Artifact<br>
AWS Mobile Hub<br>
AWS Snowball Edge<br>
AWS Snowmobile<br>
AWS Trusted Advisor</p>

<h2>
<span id="便利なリンク先" class="fragment"></span><a href="#%E4%BE%BF%E5%88%A9%E3%81%AA%E3%83%AA%E3%83%B3%E3%82%AF%E5%85%88"><i class="fa fa-link"></i></a>便利なリンク先</h2>

<h4>
<span id="こちらいろいろやっていらっしゃる方がいます" class="fragment"></span><a href="#%E3%81%93%E3%81%A1%E3%82%89%E3%81%84%E3%82%8D%E3%81%84%E3%82%8D%E3%82%84%E3%81%A3%E3%81%A6%E3%81%84%E3%82%89%E3%81%A3%E3%81%97%E3%82%83%E3%82%8B%E6%96%B9%E3%81%8C%E3%81%84%E3%81%BE%E3%81%99"><i class="fa fa-link"></i></a>こちらいろいろやっていらっしゃる方がいます</h4>

<ul>
<li><a href="http://blog.serverworks.co.jp/tech/2013/11/14/cloudtrail/" rel="nofollow noopener" target="_blank">AWSの操作履歴を記録するCloudTrailを試してみた</a></li>
<li><a href="http://dev.classmethod.jp/cloud/aws/cloudtrail2tsv-excel-script/" rel="nofollow noopener" target="_blank">EC2インスタンスを消したのは誰？AWS CloudTrailを使って犯人を捜せ！</a></li>
<li><a href="http://dev.classmethod.jp/cloud/aws/aws-cloudtrail-cloudwatch-logs-badip/" rel="nofollow noopener" target="_blank">AWS管理コンソールの不正ログインをCloudTrail と CloudWatch Logsで検知する</a></li>
<li><a href="http://dev.classmethod.jp/cloud/aws/cloudtrail-console-login-event/" rel="nofollow noopener" target="_blank">CloudTrailが記録するConsoleLoginイベントについて</a></li>
</ul>

<h2>
<span id="まとめ" class="fragment"></span><a href="#%E3%81%BE%E3%81%A8%E3%82%81"><i class="fa fa-link"></i></a>まとめ</h2>

<ul>
<li>これでアカウントのガバナンス、コンプライアンス、運用監査、リスク監査を可能になりました。</li>
<li>案外かんたんなので、設定触ってみることをおすすめします！</li>
</ul>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>okamu_さんの<br />22位</center></td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>2</kbd>
		<a target="_blank" href="https://qiita.com/okamu_/items/11672f37bad8bbfeb4c2">【Swift】コピペでできる！SDKを使わずにSNS(Twitter/Facebook/Line/Mail)でシェアさせる方法まとめ</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2017-10-30 08:32:15</center>
	</td>
	<td style="width:200px;">
		@okamu_<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/62822/profile-images/1491391263">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Facebook]</b> <b>[Twitter]</b> <b>[mail]</b> <b>[Line]</b> <b>[Swift]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>今回は、facebookやtwitter、LineのSDKを使わない &amp;&amp; UIActivity（共有ボタン）を使わないで、Twitter・Facebook・Line・Mailでシェアできるような場面を想定します。</p>

<p>ライブラリのインストールがないのでコピペでできます。<br>
しかしながら、普段はUIActivityを使っているかと思いますが...笑</p>

<h2>
<span id="完成形" class="fragment"></span><a href="#%E5%AE%8C%E6%88%90%E5%BD%A2"><i class="fa fa-link"></i></a>完成形</h2>

<ul>
<li>line

<ul>
<li>urlスキームでLINEアプリの遷移しますが、複数ユーザーにノートとメッセージに投稿することができます。</li>
<li>シェアしたいURLとOGP画像がmessageにpostされます（みにくいですが...）</li>
</ul>
</li>
</ul>

<p><a href="https://camo.qiitausercontent.com/7e6b3bf821a635293dc1c57ea867d63231bb6464/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f36363933303435662d396533652d313664362d303562652d6133663062323764316230362e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/7e6b3bf821a635293dc1c57ea867d63231bb6464/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f36363933303435662d396533652d313664362d303562652d6133663062323764316230362e706e67" alt="IMG_9119.PNG" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/62822/6693045f-9e3e-16d6-05be-a3f0b27d1b06.png"></a></p>

<ul>
<li>twitter

<ul>
<li>actionsheetがアプリ上で開きそのまま投稿できます</li>
</ul>
</li>
</ul>

<p><a href="https://camo.qiitausercontent.com/2b61b47c7fa8de003720a75d234f478814942b64/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f31393032313466302d363833322d633863352d633462662d3164386630326164303230392e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/2b61b47c7fa8de003720a75d234f478814942b64/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f31393032313466302d363833322d633863352d633462662d3164386630326164303230392e706e67" alt="IMG_9116.PNG" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/62822/190214f0-6832-c8c5-c4bf-1d8f02ad0209.png"></a></p>

<ul>
<li>facebook

<ul>
<li>twitterと同様にactionsheetがアプリ上で開きそのまま投稿できます </li>
</ul>
</li>
</ul>

<p><a href="https://camo.qiitausercontent.com/7f75b79a3ea8ba35a119126b9b1eaa0cbd075f97/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f65386636346566642d386565662d303461652d373732652d3363353062663238636465352e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/7f75b79a3ea8ba35a119126b9b1eaa0cbd075f97/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f65386636346566642d386565662d303461652d373732652d3363353062663238636465352e706e67" alt="IMG_9117.PNG" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/62822/e8f64efd-8eef-04ae-772e-3c50bf28cde5.png"></a></p>

<ul>
<li>mail

<ul>
<li>URLスキームでメールアプリに遷移し特定のユーザーにメールを送信することができます。</li>
</ul>
</li>
</ul>

<p><a href="https://camo.qiitausercontent.com/4b80a0fb9447ed6fdfd93f43c4859a10982549d5/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f32373731643237662d333134362d636334632d393862632d3835316661373865383534622e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/4b80a0fb9447ed6fdfd93f43c4859a10982549d5/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f32373731643237662d333134362d636334632d393862632d3835316661373865383534622e706e67" alt="IMG_9118.PNG" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/62822/2771d27f-3146-cc4c-98bc-851fa78e854b.png"></a></p>

<h2>
<span id="uiactivityはこれ" class="fragment"></span><a href="#uiactivity%E3%81%AF%E3%81%93%E3%82%8C"><i class="fa fa-link"></i></a>UIActivityはこれ</h2>

<ul>
<li>今回はこれは使いません。</li>
</ul>

<p><a href="https://camo.qiitausercontent.com/0903b61cd020bce87ef26b9798f6435de28f3e9b/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f35306638373465622d393762642d646432342d363631642d6565616331623465626139622e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/0903b61cd020bce87ef26b9798f6435de28f3e9b/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f35306638373465622d393762642d646432342d363631642d6565616331623465626139622e706e67" alt="68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f343930302f64326333623935662d373963632d643861662d376164642d3439623238633962656234632e706e67.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/62822/50f874eb-97bd-dd24-661d-eeac1b4eba9b.png"></a></p>

<h2>
<span id="socialをインポートする" class="fragment"></span><a href="#social%E3%82%92%E3%82%A4%E3%83%B3%E3%83%9D%E3%83%BC%E3%83%88%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>Socialをインポートする</h2>

<div class="code-frame" data-lang="swift"><div class="highlight"><pre><span></span><span class="kd">import</span> <span class="nc">UIKit</span>
<span class="kd">import</span> <span class="nc">Social</span>
</pre></div></div>

<h2>
<span id="snsを列挙しておく" class="fragment"></span><a href="#sns%E3%82%92%E5%88%97%E6%8C%99%E3%81%97%E3%81%A6%E3%81%8A%E3%81%8F"><i class="fa fa-link"></i></a>SNSを列挙しておく</h2>

<div class="code-frame" data-lang="swift"><div class="highlight"><pre><span></span><span class="kd">enum</span> <span class="nc">SNS</span><span class="p">:</span> <span class="nb">Int</span> <span class="p">{</span>
    <span class="k">case</span> <span class="n">line</span> <span class="p">=</span> <span class="mi">1</span>
    <span class="k">case</span> <span class="n">twitter</span> <span class="p">=</span> <span class="mi">2</span>
    <span class="k">case</span> <span class="n">facebook</span> <span class="p">=</span> <span class="mi">3</span>
    <span class="k">case</span> <span class="n">mail</span> <span class="p">=</span> <span class="mi">4</span>
<span class="p">}</span>
</pre></div></div>

<h2>
<span id="シェアさせる" class="fragment"></span><a href="#%E3%82%B7%E3%82%A7%E3%82%A2%E3%81%95%E3%81%9B%E3%82%8B"><i class="fa fa-link"></i></a>シェアさせる</h2>

<ul>
<li>lineとmailは、URLスキームです</li>
<li>twitterとfacebookはSocialの<code>SLComposeViewController</code>を使用しています。</li>
</ul>

<div class="code-frame" data-lang="swift"><div class="highlight"><pre><span></span>    <span class="kd">private</span> <span class="kd">func</span> <span class="nf">openURL</span><span class="p">(</span><span class="n">url</span><span class="p">:</span> <span class="n">URL</span><span class="p">?)</span> <span class="p">{</span>
        <span class="k">guard</span> <span class="kd">let</span> <span class="nv">url</span> <span class="p">=</span> <span class="n">url</span> <span class="k">else</span> <span class="p">{</span> <span class="k">return</span> <span class="p">}</span>
        <span class="k">if</span> <span class="bp">UIApplication</span><span class="p">.</span><span class="n">shared</span><span class="p">.</span><span class="n">canOpenURL</span><span class="p">(</span><span class="n">url</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="cp">#available</span><span class="p">(</span><span class="cp">iOS</span> <span class="mf">10.0</span><span class="p">,</span> <span class="o">*</span><span class="p">)</span> <span class="p">{</span>
                <span class="bp">UIApplication</span><span class="p">.</span><span class="n">shared</span><span class="p">.</span><span class="n">open</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">options</span><span class="p">:</span> <span class="p">[:],</span> <span class="n">completionHandler</span><span class="p">:</span> <span class="kc">nil</span><span class="p">)</span>
                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="bp">UIApplication</span><span class="p">.</span><span class="n">shared</span><span class="p">.</span><span class="n">openURL</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="kd">private</span> <span class="kd">func</span> <span class="nf">shareSNS</span><span class="p">(</span><span class="n">sns</span><span class="p">:</span> <span class="n">SNS</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="nv">shareURL</span> <span class="p">=</span> <span class="s">"https://hogehogehogeho.com"</span>
        <span class="k">switch</span> <span class="n">sns</span> <span class="p">{</span>
        <span class="k">case</span> <span class="p">.</span><span class="n">facebook</span><span class="p">:</span>
            <span class="k">guard</span> <span class="kd">let</span> <span class="nv">composeViewController</span><span class="p">:</span> <span class="bp">SLComposeViewController</span> <span class="p">=</span> <span class="bp">SLComposeViewController</span><span class="p">(</span><span class="n">forServiceType</span><span class="p">:</span> <span class="n">SLServiceTypeFacebook</span><span class="p">)</span> <span class="k">else</span> <span class="p">{</span> <span class="k">return</span> <span class="p">}</span>
            <span class="n">composeViewController</span><span class="p">.</span><span class="n">setInitialText</span><span class="p">(</span><span class="n">shareURL</span><span class="p">)</span>
            <span class="kc">self</span><span class="p">.</span><span class="n">present</span><span class="p">(</span><span class="n">composeViewController</span><span class="p">,</span> <span class="n">animated</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="n">completion</span><span class="p">:</span> <span class="kc">nil</span><span class="p">)</span>
        <span class="k">case</span> <span class="p">.</span><span class="n">line</span><span class="p">:</span>
            <span class="k">guard</span> <span class="kd">let</span> <span class="nv">scheme</span><span class="p">:</span> <span class="nb">String</span> <span class="p">=</span> <span class="s">"line://msg/text/</span><span class="si">\(</span><span class="n">shareURL</span><span class="si">)</span><span class="s">"</span><span class="p">.</span><span class="n">addingPercentEncoding</span><span class="p">(</span><span class="n">withAllowedCharacters</span><span class="p">:</span> <span class="p">.</span><span class="n">urlQueryAllowed</span><span class="p">)</span> <span class="k">else</span> <span class="p">{</span> <span class="k">return</span> <span class="p">}</span>
            <span class="kc">self</span><span class="p">.</span><span class="n">openURL</span><span class="p">(</span><span class="n">url</span><span class="p">:</span> <span class="n">URL</span><span class="p">(</span><span class="n">string</span><span class="p">:</span> <span class="n">scheme</span><span class="p">))</span>
        <span class="k">case</span> <span class="p">.</span><span class="n">mail</span><span class="p">:</span>
            <span class="k">guard</span> <span class="kd">let</span> <span class="nv">string</span> <span class="p">=</span> <span class="s">"mailto:test@test.com?body=</span><span class="si">\(</span><span class="n">shareURL</span><span class="si">)</span><span class="s">"</span><span class="p">.</span><span class="n">addingPercentEncoding</span><span class="p">(</span><span class="n">withAllowedCharacters</span><span class="p">:</span> <span class="n">CharacterSet</span><span class="p">.</span><span class="n">urlQueryAllowed</span><span class="p">)</span> <span class="k">else</span> <span class="p">{</span> <span class="k">return</span> <span class="p">}</span>
            <span class="kc">self</span><span class="p">.</span><span class="n">openURL</span><span class="p">(</span><span class="n">url</span><span class="p">:</span> <span class="n">URL</span><span class="p">(</span><span class="n">string</span><span class="p">:</span> <span class="n">string</span><span class="p">))</span>
        <span class="k">case</span> <span class="p">.</span><span class="n">twitter</span><span class="p">:</span>
            <span class="k">guard</span> <span class="kd">let</span> <span class="nv">vc</span> <span class="p">=</span> <span class="bp">SLComposeViewController</span><span class="p">(</span><span class="n">forServiceType</span><span class="p">:</span><span class="n">SLServiceTypeTwitter</span><span class="p">)</span> <span class="k">else</span> <span class="p">{</span> <span class="k">return</span> <span class="p">}</span>
            <span class="n">vc</span><span class="p">.</span><span class="n">setInitialText</span><span class="p">(</span><span class="n">shareURL</span><span class="p">)</span>
            <span class="kc">self</span><span class="p">.</span><span class="n">present</span><span class="p">(</span><span class="n">vc</span><span class="p">,</span> <span class="n">animated</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="n">completion</span><span class="p">:</span> <span class="kc">nil</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span>
</pre></div></div>

<h2>
<span id="まとめ" class="fragment"></span><a href="#%E3%81%BE%E3%81%A8%E3%82%81"><i class="fa fa-link"></i></a>まとめ</h2>

<ul>
<li>少し強引な方法かもしれませんが、目的とした<code>UIActivityViewController</code>を使わずにシェアをすることができました</li>
</ul>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>okamu_さんの<br />23位</center></td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>2</kbd>
		<a target="_blank" href="https://qiita.com/okamu_/items/38ea2bbd2eefae32ff88">【swift】TwitterのようなSplash画面を実装する</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2017-09-27 09:24:46</center>
	</td>
	<td style="width:200px;">
		@okamu_<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/62822/profile-images/1491391263">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[animation]</b> <b>[Swift]</b> <b>[1000チャレンジ]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;">
<h1>
<span id="swifttwitterのようなsplash画面を実装する" class="fragment"></span><a href="#swifttwitter%E3%81%AE%E3%82%88%E3%81%86%E3%81%AAsplash%E7%94%BB%E9%9D%A2%E3%82%92%E5%AE%9F%E8%A3%85%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>【swift】TwitterのようなSplash画面を実装する</h1>

<h2>
<span id="この記事でできるようになること" class="fragment"></span><a href="#%E3%81%93%E3%81%AE%E8%A8%98%E4%BA%8B%E3%81%A7%E3%81%A7%E3%81%8D%E3%82%8B%E3%82%88%E3%81%86%E3%81%AB%E3%81%AA%E3%82%8B%E3%81%93%E3%81%A8"><i class="fa fa-link"></i></a>この記事でできるようになること</h2>

<ul>
<li>Twitterのような<strong>一瞬縮小して、拡大しながらTopページに遷移</strong>
するような、Splash画面を作ることができます。</li>
</ul>

<p><a href="https://camo.qiitausercontent.com/a3f789ee16e0e7ec491a34a4f1ca6f25dfef1e82/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f63326635353762332d656436302d343466662d393965612d6334373935636631636165632e676966" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/a3f789ee16e0e7ec491a34a4f1ca6f25dfef1e82/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f63326635353762332d656436302d343466662d393965612d6334373935636631636165632e676966" alt="kyutech-splash (2).gif" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/62822/c2f557b3-ed60-44ff-99ea-c4795cf1caec.gif"></a></p>

<h2>
<span id="実装する" class="fragment"></span><a href="#%E5%AE%9F%E8%A3%85%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>実装する</h2>

<ul>
<li>私は、splash画面で１度APIを叩いてから、このsplashアニメーションを呼んでいます。</li>
<li>CGAffineTransformで一旦0.8に縮小してから、10倍に拡大しながらalphaも0にします。</li>
<li>ロゴの文字は縮小はかけていません。</li>
<li>ごく普通なanimationを利用しています。</li>
</ul>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>        UIView.animate(withDuration: 0.3,
                       delay: 1.0,
                       options:　.curveEaseOut,
                       animations: { () in
                        self.logoImageView.transform = CGAffineTransform(scaleX: 0.9, y: 0.9)
        }, completion: { (Bool) in
            self.performSegue(withIdentifier: "main", sender: nil)

        })
        UIView.animate(withDuration: 0.5,
                       delay: 1.3,
                       options:　.curveEaseOut,
                       animations: { () in
                        self.textImageView.transform    = CGAffineTransform(scaleX: 10.0, y: 10.0)
                        self.logoTextImageView.alpha    = 0
                        self.logoImageView.alpha        = 0
        }, completion: { (Bool) in
            self.logoTextImageView.isHidden     = true
            self.logoImageView.isHidden     = true
        })
</pre></div></div>

<h2>
<span id="まとめ" class="fragment"></span><a href="#%E3%81%BE%E3%81%A8%E3%82%81"><i class="fa fa-link"></i></a>まとめ</h2>

<ul>
<li>TwitterのようなSplash画面を実装することができました。</li>
<li>細かくみるとtwitterはロゴの中からTopページが見えるような仕様になっているので、完全には再現できていません。</li>
</ul>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>okamu_さんの<br />24位</center></td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>2</kbd>
		<a target="_blank" href="https://qiita.com/okamu_/items/ee3186c7ac6e673deb18">Rails5でActionCableを使うときはSocketIOで接続できない!!</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2017-09-26 09:09:59</center>
	</td>
	<td style="width:200px;">
		@okamu_<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/62822/profile-images/1491391263">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Rails]</b> <b>[iOS]</b> <b>[websocket]</b> <b>[Swift]</b> <b>[undefinedチャレンジ]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;">
<h1>
<span id="rails5でactioncableを使うときはsocketioで接続できない" class="fragment"></span><a href="#rails5%E3%81%A7actioncable%E3%82%92%E4%BD%BF%E3%81%86%E3%81%A8%E3%81%8D%E3%81%AFsocketio%E3%81%A7%E6%8E%A5%E7%B6%9A%E3%81%A7%E3%81%8D%E3%81%AA%E3%81%84"><i class="fa fa-link"></i></a>Rails5でActionCableを使うときはSocketIOで接続できない!!</h1>

<p><a href="https://camo.qiitausercontent.com/d63ead5451410da703c94cafaaa3b838daf59e8d/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f38376235613266632d316363322d613861332d666639662d3761346236373438396261322e6a706567" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/d63ead5451410da703c94cafaaa3b838daf59e8d/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f38376235613266632d316363322d613861332d666639662d3761346236373438396261322e6a706567" alt="download.jpg" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/62822/87b5a2fc-1cc2-a8a3-ff9f-7a4b67489ba2.jpeg"></a></p>

<p>以前、ActionCableとswift3でwebSocketでチャットアプリを作ったのですが、そのときに</p>

<p>ActionCableが、<strong>faye系</strong>だったことを知らなかったのが１番ハマりました。<br>
ちゃんと、fayeで接続するとうまくいきました。<br>
SocketIO Clientで検証しても繋がらなかったです。</p>

<h2>
<span id="websocketの種類" class="fragment"></span><a href="#websocket%E3%81%AE%E7%A8%AE%E9%A1%9E"><i class="fa fa-link"></i></a>WebSocketの種類</h2>

<ul>
<li>Socket.IO</li>
<li>Engine.IO</li>
<li>Faye</li>
<li>Primus</li>
<li>WAMP</li>
</ul>

<p>このへんの種類があるそうなのでご注意ください。</p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>okamu_さんの<br />25位</center></td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>1</kbd>
		<a target="_blank" href="https://qiita.com/okamu_/items/91d34ef5408ea2837249">【便利機能】x-codeでStoryboardでのアウトラインの表示</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2017-11-20 22:33:22</center>
	</td>
	<td style="width:200px;">
		@okamu_<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/62822/profile-images/1491391263">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Xcode]</b> <b>[iOS]</b> <b>[Storyboard]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;">
<h2>
<span id="illustratorの場合" class="fragment"></span><a href="#illustrator%E3%81%AE%E5%A0%B4%E5%90%88"><i class="fa fa-link"></i></a>Illustratorの場合</h2>

<p>AdobeのIllustratorなどでは、中心を合わせたりズレがないか確認するために、「Ctrl + Y（アウトライン・プレビュー表示切り替え）」というのもがあります。</p>

<p><a href="https://camo.qiitausercontent.com/ae275014bd1f3b174bbfa8f5da576a3ab7fbdd54/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f39343063373331612d383139632d663938662d366436612d6561653865353538646536652e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/ae275014bd1f3b174bbfa8f5da576a3ab7fbdd54/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f39343063373331612d383139632d663938662d366436612d6561653865353538646536652e706e67" alt="image.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/62822/940c731a-819c-f98f-6d6a-eae8e558de6e.png"></a></p>

<h2>
<span id="xcodeでもそれしたい" class="fragment"></span><a href="#xcode%E3%81%A7%E3%82%82%E3%81%9D%E3%82%8C%E3%81%97%E3%81%9F%E3%81%84"><i class="fa fa-link"></i></a>XCodeでもそれしたい</h2>

<p>xcodeでもそれしたいと思っていましたが、それっぽいものがありました。<br>
viewが重なっているのか、ずれているのかがわかりそうです。</p>

<p><a href="https://camo.qiitausercontent.com/8f542bb511eb7ee78f41b6f9513706cbb0b1e5f3/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f61343561356133392d323862352d306362332d643731652d3832653965663732653665372e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/8f542bb511eb7ee78f41b6f9513706cbb0b1e5f3/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f61343561356133392d323862352d306362332d643731652d3832653965663732653665372e706e67" alt="Pasted image at 2017_11_20 10_08 PM.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/62822/a45a5a39-28b5-0cb3-d71e-82e9ef72e6e7.png"></a></p>

<h2>
<span id="設定方法" class="fragment"></span><a href="#%E8%A8%AD%E5%AE%9A%E6%96%B9%E6%B3%95"><i class="fa fa-link"></i></a>設定方法</h2>

<ul>
<li>EditorのCanvasの「Show Layout Rectangles」にチェックを入れると表示されるようになります。</li>
</ul>

<p><a href="https://camo.qiitausercontent.com/3e76df37a4f068e89538b0b8efbd0b3957c6d387/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f61336339323962352d656565312d653237622d316135302d3531303465626139386661392e706e67" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/3e76df37a4f068e89538b0b8efbd0b3957c6d387/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f61336339323962352d656565312d653237622d316135302d3531303465626139386661392e706e67" alt="Pasted image at 2017_11_20 10_04 PM.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/62822/a3c929b5-eee1-e27b-1a50-5104eba98fa9.png"></a></p>

<h2>
<span id="最後に" class="fragment"></span><a href="#%E6%9C%80%E5%BE%8C%E3%81%AB"><i class="fa fa-link"></i></a>最後に</h2>

<ul>
<li>View多いとごちゃごちゃしそうですね！！！＼(^o^)／</li>
</ul>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>okamu_さんの<br />26位</center></td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>1</kbd>
		<a target="_blank" href="https://qiita.com/okamu_/items/4ce91f45522f7fd0948f">【swift】この里帆ちゃんは jpeg か png かそれとも〇〇？？</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2017-10-06 09:28:26</center>
	</td>
	<td style="width:200px;">
		@okamu_<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/62822/profile-images/1491391263">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[デザインパターン]</b> <b>[Swift]</b> <b>[1000チャレンジ]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;">
<h1>
<span id="swiftこの吉岡里帆ちゃんは-jpeg-か-png-かそれとも〇〇" class="fragment"></span><a href="#swift%E3%81%93%E3%81%AE%E5%90%89%E5%B2%A1%E9%87%8C%E5%B8%86%E3%81%A1%E3%82%83%E3%82%93%E3%81%AF-jpeg-%E3%81%8B-png-%E3%81%8B%E3%81%9D%E3%82%8C%E3%81%A8%E3%82%82%E3%80%87%E3%80%87"><i class="fa fa-link"></i></a>【swift】この吉岡里帆ちゃんは jpeg か png かそれとも〇〇？？</h1>

<ul>
<li>ついカメラロールに保存してしまう <a href="https://matome.naver.jp/odai/2149290466326227901" rel="nofollow noopener" target="_blank">吉岡里帆さん</a>ですが、その画像をalamofireなどでPOSTするときに、imageTypeを指定しないといけません。</li>
<li>そこで今回、<strong>画像が jpeg　なのか pngなのかそれとも〇〇なのかを判定するextension</strong>をメモとして残します。</li>
</ul>

<h2>
<span id="私の里帆ちゃんベストコレクション" class="fragment"></span><a href="#%E7%A7%81%E3%81%AE%E9%87%8C%E5%B8%86%E3%81%A1%E3%82%83%E3%82%93%E3%83%99%E3%82%B9%E3%83%88%E3%82%B3%E3%83%AC%E3%82%AF%E3%82%B7%E3%83%A7%E3%83%B3"><i class="fa fa-link"></i></a>私の里帆ちゃんベスト・コレクション</h2>

<p><a href="https://camo.qiitausercontent.com/be760fa9679bc70c1216c6de0e2454e804e3117f/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f65633065323761612d356137642d636634352d383333322d6331663364353361303133612e706e67" target="_blank" rel="nofollow noopener"><img width="414" alt="Simulator Screen Shot - iPhone 6s Plus - 2017-10-05 at 20.43.47.png" src="https://camo.qiitausercontent.com/be760fa9679bc70c1216c6de0e2454e804e3117f/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f65633065323761612d356137642d636634352d383333322d6331663364353361303133612e706e67" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/62822/ec0e27aa-5a7d-cf45-8332-c1f3d53a013a.png"></a></p>

<h2>
<span id="実装する" class="fragment"></span><a href="#%E5%AE%9F%E8%A3%85%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>実装する</h2>

<h3>
<span id="urlextensionを作成" class="fragment"></span><a href="#urlextension%E3%82%92%E4%BD%9C%E6%88%90"><i class="fa fa-link"></i></a>URLExtensionを作成</h3>

<ul>
<li>まず、URLExtensionを作成しつつ、enumで拡張子を列挙しておきます</li>
</ul>

<div class="code-frame" data-lang="swift">
<div class="code-lang"><span class="bold">URLExtension.swift</span></div>
<div class="highlight"><pre><span></span><span class="kd">enum</span> <span class="nc">ImageType</span><span class="p">:</span> <span class="nb">String</span> <span class="p">{</span>
    <span class="k">case</span> <span class="n">png</span> <span class="p">=</span> <span class="s">"png"</span>
    <span class="k">case</span> <span class="n">gif</span> <span class="p">=</span> <span class="s">"gif"</span>
    <span class="k">case</span> <span class="n">jpg</span> <span class="p">=</span> <span class="s">"jpeg"</span>
    <span class="k">case</span> <span class="n">bmp</span> <span class="p">=</span> <span class="s">"bmp"</span>
<span class="p">}</span>

<span class="kd">extension</span> <span class="nc">URL</span> <span class="p">{</span>
    <span class="kd">func</span> <span class="nf">imageTypeForExtention</span><span class="p">()</span> <span class="p">-&gt;</span> <span class="n">ImageType</span><span class="p">?</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="nv">ext</span> <span class="p">=</span> <span class="kc">self</span><span class="p">.</span><span class="n">pathExtension</span><span class="p">.</span><span class="n">lowercased</span><span class="p">()</span>
        <span class="k">switch</span> <span class="n">ext</span> <span class="p">{</span>
        <span class="k">case</span> <span class="s">"jpg"</span> <span class="p">,</span> <span class="s">"jpeg"</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">.</span><span class="n">jpg</span>
        <span class="k">case</span> <span class="s">"png"</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">.</span><span class="n">png</span>
        <span class="k">case</span> <span class="s">"gif"</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">.</span><span class="n">gif</span>
        <span class="k">case</span> <span class="s">"bmp"</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">.</span><span class="n">bmp</span>
        <span class="k">default</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">nil</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>

<h3>
<span id="uiimagepickercontrollerで吉岡里帆ちゃん画像を取り出す" class="fragment"></span><a href="#uiimagepickercontroller%E3%81%A7%E5%90%89%E5%B2%A1%E9%87%8C%E5%B8%86%E3%81%A1%E3%82%83%E3%82%93%E7%94%BB%E5%83%8F%E3%82%92%E5%8F%96%E3%82%8A%E5%87%BA%E3%81%99"><i class="fa fa-link"></i></a>UIImagePickerControllerで吉岡里帆ちゃん(画像)を取り出す</h3>

<ul>
<li>
<code>info[UIImagePickerControllerReferenceURL]</code> で画像のURLがわかりますのでそのURLをつかって<code>.pathExtension.lowercased()</code> で判定しています。</li>
<li>UIImagePickerControllerのカメラで撮影した場合は、jpegですのでそのままjpegを使って下さい。</li>
</ul>

<div class="code-frame" data-lang="swift">
<div class="code-lang"><span class="bold">ViewController.swift</span></div>
<div class="highlight"><pre><span></span>    <span class="cm">/*</span>
<span class="cm">     * 吉岡里帆ちゃんベスト・コレクション一覧（フォトライブラリ）から選ぶ</span>
<span class="cm">     */</span>
    <span class="kd">private</span> <span class="kd">func</span> <span class="nf">showPickeView</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">if</span> <span class="bp">UIImagePickerController</span><span class="p">.</span><span class="n">isSourceTypeAvailable</span><span class="p">(</span><span class="n">UIImagePickerControllerSourceType</span><span class="p">.</span><span class="n">photoLibrary</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">let</span> <span class="nv">picker</span> <span class="p">=</span> <span class="bp">UIImagePickerController</span><span class="p">()</span>
            <span class="n">picker</span><span class="p">.</span><span class="n">modalPresentationStyle</span> <span class="p">=</span> <span class="n">UIModalPresentationStyle</span><span class="p">.</span><span class="n">popover</span>
            <span class="n">picker</span><span class="p">.</span><span class="n">delegate</span> <span class="p">=</span> <span class="kc">self</span>
            <span class="n">picker</span><span class="p">.</span><span class="n">sourceType</span> <span class="p">=</span> <span class="n">UIImagePickerControllerSourceType</span><span class="p">.</span><span class="n">photoLibrary</span>
            <span class="kc">self</span><span class="p">.</span><span class="n">present</span><span class="p">(</span><span class="n">picker</span><span class="p">,</span> <span class="n">animated</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="n">completion</span><span class="p">:</span> <span class="kc">nil</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="cm">/*</span>
<span class="cm">     * 吉岡里帆ちゃんが選ばれたときに呼ばれる</span>
<span class="cm">     */</span>
    <span class="kd">func</span> <span class="nf">imagePickerController</span><span class="p">(</span><span class="kc">_</span> <span class="n">picker</span><span class="p">:</span> <span class="bp">UIImagePickerController</span><span class="p">,</span> <span class="n">didFinishPickingMediaWithInfo</span> <span class="n">info</span><span class="p">:</span> <span class="p">[</span><span class="nb">String</span> <span class="p">:</span> <span class="nb">Any</span><span class="p">])</span> <span class="p">{</span>
        <span class="k">guard</span> <span class="kd">let</span> <span class="nv">pickedImage</span> <span class="p">=</span> <span class="n">info</span><span class="p">[</span><span class="n">UIImagePickerControllerOriginalImage</span><span class="p">]</span> <span class="k">as</span><span class="p">?</span> <span class="bp">UIImage</span> <span class="k">else</span> <span class="p">{</span> <span class="k">return</span> <span class="p">}</span>
        <span class="kd">var</span> <span class="nv">imageType</span><span class="p">:</span> <span class="n">ImageType</span> <span class="p">=</span> <span class="p">.</span><span class="n">jpg</span>
        <span class="c1">// カメラのときはURLがないのでjpgを渡す</span>
        <span class="k">if</span> <span class="kd">let</span> <span class="nv">imageURL</span> <span class="p">=</span> <span class="n">info</span><span class="p">[</span><span class="n">UIImagePickerControllerReferenceURL</span><span class="p">]</span> <span class="k">as</span><span class="p">?</span> <span class="n">URL</span> <span class="p">{</span>
            <span class="n">imageType</span> <span class="p">=</span> <span class="n">imageURL</span><span class="p">.</span><span class="n">imageTypeForExtention</span><span class="p">()</span> <span class="p">??</span> <span class="p">.</span><span class="n">jpg</span>
        <span class="p">}</span>
        <span class="bp">print</span><span class="p">(</span><span class="n">imageType</span><span class="p">.</span><span class="n">rawValue</span><span class="p">)</span>
        <span class="c1">//適当に画像と拡張子を渡しておくとか</span>
        <span class="c1">//PhotoViewModel.sharedInstance.photo.value = (pickedImage, imageType)</span>
        <span class="c1">// 閉じてから画面遷移しとくとか</span>
        <span class="c1">//picker.dismiss(animated: true) {</span>
          <span class="c1">//  self.performSegue(segue: .toGenerate, sender: nil)</span>
        <span class="c1">//}</span>
    <span class="p">}</span>

    <span class="cm">/*</span>
<span class="cm">     * カメラを起動する（吉岡里帆ちゃんじゃない）</span>
<span class="cm">     */</span>
    <span class="kd">private</span> <span class="kd">func</span> <span class="nf">showCameraView</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">if</span> <span class="bp">UIImagePickerController</span><span class="p">.</span><span class="n">isSourceTypeAvailable</span><span class="p">(</span><span class="n">UIImagePickerControllerSourceType</span><span class="p">.</span><span class="n">camera</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">let</span> <span class="nv">picker</span> <span class="p">=</span> <span class="bp">UIImagePickerController</span><span class="p">()</span>
            <span class="n">picker</span><span class="p">.</span><span class="n">modalPresentationStyle</span> <span class="p">=</span> <span class="n">UIModalPresentationStyle</span><span class="p">.</span><span class="n">fullScreen</span>
            <span class="n">picker</span><span class="p">.</span><span class="n">delegate</span> <span class="p">=</span> <span class="kc">self</span> <span class="c1">// UINavigationControllerDelegate と　UIImagePickerControllerDelegateを実装する</span>
            <span class="n">picker</span><span class="p">.</span><span class="n">sourceType</span> <span class="p">=</span> <span class="n">UIImagePickerControllerSourceType</span><span class="p">.</span><span class="n">camera</span>
            <span class="kc">self</span><span class="p">.</span><span class="n">present</span><span class="p">(</span><span class="n">picker</span><span class="p">,</span> <span class="n">animated</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="n">completion</span><span class="p">:</span> <span class="kc">nil</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>

<h2>
<span id="デモ" class="fragment"></span><a href="#%E3%83%87%E3%83%A2"><i class="fa fa-link"></i></a>デモ</h2>

<p><a href="https://camo.qiitausercontent.com/6921cd16fae963672bb8f4c8ed75638a8d87846a/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f61353865306638662d383439342d393064362d653465662d6437366165383565346237642e676966" target="_blank" rel="nofollow noopener"><img src="https://camo.qiitausercontent.com/6921cd16fae963672bb8f4c8ed75638a8d87846a/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f61353865306638662d383439342d393064362d653465662d6437366165383565346237642e676966" alt="yosidariho_collection480.gif" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/62822/a58e0f8f-8494-90d6-e4ef-d76ae85e4b7d.gif"></a></p>

<h2>
<span id="まとめ" class="fragment"></span><a href="#%E3%81%BE%E3%81%A8%E3%82%81"><i class="fa fa-link"></i></a>まとめ</h2>

<ul>
<li>URLのExtensionで <code>imageTypeForExtention()</code> で拡張子を取得することができました！！</li>
</ul>

<h2>
<span id="関連記事" class="fragment"></span><a href="#%E9%96%A2%E9%80%A3%E8%A8%98%E4%BA%8B"><i class="fa fa-link"></i></a>関連記事</h2>

<ul>
<li>
<a href="https://qiita.com/okamu_/items/4a541b2b5aba81f8653a" id="reference-73fc53fce43556e56ab7">【swift】tableViewに何もなければ、吉岡里帆ちゃんが出現する</a> &lt;- こちらもあわせてどうぞ</li>
</ul>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>okamu_さんの<br />27位</center></td>
	<td colspan="4">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>1</kbd>
		<a target="_blank" href="https://qiita.com/okamu_/items/2f38b517e2c6d97fbc56">XCodeでproduction/staging/developをTargetで切り替えて、APIも切り替える。</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2017-09-20 09:27:50</center>
	</td>
	<td style="width:200px;">
		@okamu_<br><img width="80" height="80" src="https://qiita-image-store.s3.amazonaws.com/0/62822/profile-images/1491391263">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Xcode]</b> <b>[Swift]</b> <b>[1000チャレンジ]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;">
<h1>
<span id="xcodeでproductionstagingdevelopをtargetで切り替える" class="fragment"></span><a href="#xcode%E3%81%A7productionstagingdevelop%E3%82%92target%E3%81%A7%E5%88%87%E3%82%8A%E6%9B%BF%E3%81%88%E3%82%8B"><i class="fa fa-link"></i></a>XCodeでproduction/staging/developをTargetで切り替える</h1>

<ul>
<li>別に新機能でも何でもないですが、知らない人の参考になればと思い書きました。</li>
<li>これよりもっといい方法があれば教えていただければと思います。</li>
</ul>

<h2>
<span id="やりたいこと" class="fragment"></span><a href="#%E3%82%84%E3%82%8A%E3%81%9F%E3%81%84%E3%81%93%E3%81%A8"><i class="fa fa-link"></i></a>やりたいこと</h2>

<ul>
<li>ソース内にフラグを持たさずに、TargetでAPIなどを切り替える　＝＞　git管理してても差分なし!!!!!!!!!</li>
</ul>

<h2>
<span id="新たにtargetを作成する" class="fragment"></span><a href="#%E6%96%B0%E3%81%9F%E3%81%ABtarget%E3%82%92%E4%BD%9C%E6%88%90%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>新たにTargetを作成する</h2>

<ul>
<li>既存のTargetを右クリックし、Deplicateを押します。</li>
</ul>

<p><a href="https://camo.qiitausercontent.com/4e4844d6451a9f738c0ee0b016e4d4a38d4fa94f/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f37366137623130392d346163322d306565372d613464632d3838656335336330313666342e706e67" target="_blank" rel="nofollow noopener"><img width="588" alt="Screen Shot 2017-09-19 at 0.47.16.png" src="https://camo.qiitausercontent.com/4e4844d6451a9f738c0ee0b016e4d4a38d4fa94f/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f37366137623130392d346163322d306565372d613464632d3838656335336330313666342e706e67" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/62822/76a7b109-4ac2-0ee7-a4dc-88ec53c016f4.png"></a></p>

<ul>
<li>
<code>{元のプロゲクト名} copy</code> となるので、Dev{プロジェクト名}や、Stg{プロジェクト名}とします。</li>
</ul>

<h2>
<span id="plistを複製する" class="fragment"></span><a href="#plist%E3%82%92%E8%A4%87%E8%A3%BD%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>Plistを複製する</h2>

<ul>
<li>同じくPlistも新たに作成します。複製してもいいですし、新たに作成してもいいです。</li>
</ul>

<p><a href="https://camo.qiitausercontent.com/f8c7da9eae819c552baf2c40dd57db02573ac909/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f33666230373035302d323130612d363435662d303832342d6538656131626437353731352e706e67" target="_blank" rel="nofollow noopener"><img width="250" alt="Screen Shot 2017-09-19 at 0.53.44.png" src="https://camo.qiitausercontent.com/f8c7da9eae819c552baf2c40dd57db02573ac909/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f33666230373035302d323130612d363435662d303832342d6538656131626437353731352e706e67" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/62822/3fb07050-210a-645f-0824-e8ea1bd75715.png"></a></p>

<ul>
<li>
<code>Bundle display name</code> やその他の設定などをそれ用に変えると良いかもしれません。</li>
</ul>

<h2>
<span id="スキームを編集する" class="fragment"></span><a href="#%E3%82%B9%E3%82%AD%E3%83%BC%E3%83%A0%E3%82%92%E7%B7%A8%E9%9B%86%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>スキームを編集する</h2>

<ul>
<li>ManagementSchemeを押します。</li>
</ul>

<p><a href="https://camo.qiitausercontent.com/bbc7f740f207040c963ba526e925b7845324c113/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f62393233656333662d326239632d643033312d663835332d6463326631316538653437352e706e67" target="_blank" rel="nofollow noopener"><img width="357" alt="Screen Shot 2017-09-19 at 22.46.46.png" src="https://camo.qiitausercontent.com/bbc7f740f207040c963ba526e925b7845324c113/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f62393233656333662d326239632d643033312d663835332d6463326631316538653437352e706e67" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/62822/b923ec3f-2b9c-d031-f853-dc2f11e8e475.png"></a></p>

<p><a href="https://camo.qiitausercontent.com/c558a8f1c7212e0e832f8e1af96caca0153cf549/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f33326265643464622d313438342d663162392d386263642d3433646136386436623330642e706e67" target="_blank" rel="nofollow noopener"><img width="771" alt="Screen Shot 2017-09-19 at 22.49.11.png" src="https://camo.qiitausercontent.com/c558a8f1c7212e0e832f8e1af96caca0153cf549/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f33326265643464622d313438342d663162392d386263642d3433646136386436623330642e706e67" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/62822/32bed4db-1484-f1b9-8bcd-43da68d6b30d.png"></a></p>

<ul>
<li>{プロジェクト名} copyというスキームが自動作成されていますが、−で削除します。</li>
<li>そして、再度＋で追加すると、Dev{プロジェクト名}や、Stg{プロジェクト名}としてスキームを登録できます。</li>
<li>shared にもチェックを入れておきます。</li>
</ul>

<h2>
<span id="plistを関連付ける" class="fragment"></span><a href="#plist%E3%82%92%E9%96%A2%E9%80%A3%E4%BB%98%E3%81%91%E3%82%8B"><i class="fa fa-link"></i></a>Plistを関連付ける</h2>

<ul>
<li>作成したTargetを選択し、build settingsから Plistを検索すると、Info.plistのPathが{プロジェクト名} copy.plist となっているので、自分で作成したplistファイルに書き換えます。</li>
</ul>

<p><a href="https://camo.qiitausercontent.com/e9f9df4a96aa626c34d8d1df796af71faa562b0a/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f66386633663337372d396666372d633236302d316432302d3537666134663164373330342e706e67" target="_blank" rel="nofollow noopener"><img width="1100" alt="Screen Shot 2017-09-19 at 22.52.35.png" src="https://camo.qiitausercontent.com/e9f9df4a96aa626c34d8d1df796af71faa562b0a/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f66386633663337372d396666372d633236302d316432302d3537666134663164373330342e706e67" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/62822/f8f3f377-9ff7-c260-1d20-57fa4f1d7304.png"></a></p>

<ul>
<li>また、マクロ用の変数を追加してもいいと思います。</li>
</ul>

<p><a href="https://camo.qiitausercontent.com/41586d1e013328d4b9f652129046f7e7bfa3ab1c/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f32363336313033362d653834652d666637302d623861382d3337313764623632353164632e706e67" target="_blank" rel="nofollow noopener"><img width="1012" alt="Screen Shot 2017-09-19 at 22.56.39.png" src="https://camo.qiitausercontent.com/41586d1e013328d4b9f652129046f7e7bfa3ab1c/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f32363336313033362d653834652d666637302d623861382d3337313764623632353164632e706e67" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/62822/26361036-e84e-ff70-b8a8-3717db6251dc.png"></a></p>

<ul>
<li>DEV=1 STAGING=1などするのがおすすめです。</li>
</ul>

<h2>
<span id="apiをplistで管理してapiを出し分ける" class="fragment"></span><a href="#api%E3%82%92plist%E3%81%A7%E7%AE%A1%E7%90%86%E3%81%97%E3%81%A6api%E3%82%92%E5%87%BA%E3%81%97%E5%88%86%E3%81%91%E3%82%8B"><i class="fa fa-link"></i></a>APIをPlistで管理して、APIを出し分ける</h2>

<ul>
<li>これは完全に私の場合ですが、APIディレクトリを切ってそこにAPIのHOSTやバージョンを管理しています。</li>
<li><p>新規で、Plistを作成します。</p></li>
<li><p>API.plist<br>
<a href="https://camo.qiitausercontent.com/e3ca5f4383a12218bb30980800db8a484aad51f3/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f65616461363232622d363436352d626431372d643935652d6462323235643165353839622e706e67" target="_blank" rel="nofollow noopener"><img width="1359" alt="Screen Shot 2017-09-19 at 23.00.32.png" src="https://camo.qiitausercontent.com/e3ca5f4383a12218bb30980800db8a484aad51f3/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f65616461363232622d363436352d626431372d643935652d6462323235643165353839622e706e67" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/62822/eada622b-6465-bd17-d95e-db225d1e589b.png"></a></p></li>
<li><p>DevAPI.plit<br>
<a href="https://camo.qiitausercontent.com/ca43308eb4b471f9dd00a14774b04a600570ee30/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f62363837303338632d646263652d313865612d323861382d6233636531393135356230662e706e67" target="_blank" rel="nofollow noopener"><img width="1362" alt="Screen Shot 2017-09-19 at 23.01.57.png" src="https://camo.qiitausercontent.com/ca43308eb4b471f9dd00a14774b04a600570ee30/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f36323832322f62363837303338632d646263652d313865612d323861382d6233636531393135356230662e706e67" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/62822/b687038c-dbce-18ea-28a8-b3ce19155b0f.png"></a></p></li>
<li><p>今は変わってないですが、APIバージョンのv2とか、dev用のHOSTとか書いておきます</p></li>
</ul>

<h2>
<span id="configでapiplistを読む" class="fragment"></span><a href="#config%E3%81%A7apiplist%E3%82%92%E8%AA%AD%E3%82%80"><i class="fa fa-link"></i></a>ConfigでAPI.plistを読む</h2>

<div class="code-frame" data-lang="swift">
<div class="code-lang"><span class="bold">Config/Config.swift</span></div>
<div class="highlight"><pre><span></span><span class="kd">struct</span> <span class="nc">Config</span> <span class="p">{</span>
    <span class="kd">static</span> <span class="kd">let</span> <span class="nv">host</span>         <span class="p">=</span> <span class="n">Config</span><span class="p">.</span><span class="n">plist</span><span class="p">(</span><span class="n">property</span><span class="p">:</span> <span class="s">"host"</span><span class="p">)</span>
    <span class="kd">static</span> <span class="kd">let</span> <span class="nv">version</span>      <span class="p">=</span> <span class="n">Config</span><span class="p">.</span><span class="n">plist</span><span class="p">(</span><span class="n">property</span><span class="p">:</span> <span class="s">"version"</span><span class="p">)</span>
    <span class="kd">static</span> <span class="kd">let</span> <span class="nv">mode</span>         <span class="p">=</span> <span class="n">Config</span><span class="p">.</span><span class="n">plist</span><span class="p">(</span><span class="n">property</span><span class="p">:</span> <span class="s">"api"</span><span class="p">)</span>
    <span class="kd">static</span> <span class="kd">let</span> <span class="nv">socket</span>       <span class="p">=</span> <span class="n">Config</span><span class="p">.</span><span class="n">plist</span><span class="p">(</span><span class="n">property</span><span class="p">:</span> <span class="s">"socket"</span><span class="p">)</span>
    <span class="kd">static</span> <span class="kd">let</span> <span class="nv">bundleID</span>     <span class="p">=</span> <span class="n">Bundle</span><span class="p">.</span><span class="n">main</span><span class="p">.</span><span class="n">bundleIdentifier</span> <span class="p">??</span> <span class="n">Config</span><span class="p">.</span><span class="n">host</span>
    <span class="cp">#if</span> <span class="cp">DEMO</span>
    <span class="kd">static</span> <span class="kd">let</span> <span class="nv">plistPath</span> <span class="p">=</span> <span class="s">"DemoApi"</span>
    <span class="cp">#elseif</span> <span class="cp">DEV</span>
    <span class="kd">static</span>  <span class="kd">let</span> <span class="nv">plistPath</span> <span class="p">=</span> <span class="s">"DevApi"</span>
    <span class="cp">#else</span>
    <span class="kd">static</span> <span class="kd">let</span> <span class="nv">plistPath</span> <span class="p">=</span> <span class="s">"Api"</span>
    <span class="cp">#endif</span>
    <span class="kd">static</span> <span class="kd">let</span> <span class="nv">realmAccessToken</span><span class="p">:</span> <span class="nb">String</span> <span class="p">=</span> <span class="n">MonaKeys</span><span class="p">().</span><span class="n">realmAccessToken</span><span class="p">()</span> <span class="p">??</span> <span class="s">""</span>

    <span class="kd">static</span> <span class="kd">func</span> <span class="nf">plist</span><span class="p">(</span><span class="n">property</span><span class="p">:</span> <span class="nb">String</span><span class="p">)</span> <span class="p">-&gt;</span> <span class="nb">String</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="nv">pat</span> <span class="p">=</span> <span class="n">Config</span><span class="p">.</span><span class="n">plistPath</span>
        <span class="k">guard</span> <span class="kd">let</span> <span class="nv">path</span> <span class="p">=</span> <span class="n">Bundle</span><span class="p">.</span><span class="n">main</span><span class="p">.</span><span class="n">path</span><span class="p">(</span><span class="n">forResource</span><span class="p">:</span> <span class="n">pat</span><span class="p">,</span> <span class="n">ofType</span><span class="p">:</span> <span class="s">"plist"</span><span class="p">)</span> <span class="k">else</span> <span class="p">{</span> <span class="k">return</span> <span class="s">""</span> <span class="p">}</span>
        <span class="kd">var</span> <span class="nv">dict</span> <span class="p">=</span> <span class="bp">NSDictionary</span><span class="p">(</span><span class="n">contentsOfFile</span><span class="p">:</span> <span class="n">path</span><span class="p">)</span> <span class="k">as</span><span class="p">?</span> <span class="p">[</span><span class="nb">String</span><span class="p">:</span> <span class="nb">Any</span><span class="p">]</span>
        <span class="k">if</span> <span class="kd">let</span> <span class="nv">string</span> <span class="p">=</span> <span class="n">dict</span><span class="p">?.</span><span class="n">removeValue</span><span class="p">(</span><span class="n">forKey</span><span class="p">:</span> <span class="n">property</span><span class="p">)</span> <span class="k">as</span><span class="p">?</span> <span class="nb">String</span> <span class="p">{</span>
            <span class="k">return</span> <span class="n">string</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="s">""</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>

<ul>
<li>結局のところはここで出し分けているので、APIをPlistにする意味はあまりないんですねどね。</li>
</ul>

<h2>
<span id="まとめ" class="fragment"></span><a href="#%E3%81%BE%E3%81%A8%E3%82%81"><i class="fa fa-link"></i></a>まとめ</h2>

<ul>
<li>重要なのはTargetを切り替えて、そこでマクロを使って書き換えることができます。</li>
<li>フラグなどで切り替えてもいいですが、ソースコードの改変が生じるのでそこをなくせます。</li>
<li>また、読み込みたいソースなども切り替えられるので規模が大きくなると便利かと思います。</li>
<li>以上、swift関連の記事はまさかりが多く飛んできそうで怖いですが、<a href="https://qiita.com/okamu_/items/0b7c752fb809b3506704" id="reference-c9c374ded796be8d0954">1000いいねチャレンジ</a>の一環として書かせていただきました。ありがとうございました。</li>
</ul>
</div>
	</td>
</tr>
</table>
<br />
	</body>
</html>
