<html>
	<head><!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-110075493-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-110075493-1');
</script>
<!-- Google AdSense -->
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-6168511236629369",
    enable_page_level_ads: true
  });
</script>

		<meta charset="UTF-8" />
		<title>Qiita Ranking (somewhatgood@github)</title>
		<link rel="stylesheet" type="text/css" href="../qranking.css">
	</head>
	<body>
<div class="headerContainer">
<h1>Qiitaいいね数ランキング (somewhatgood@github さんの投稿分)</h1>
</div><!--class="headerContainer"-->
<p><i><img width="16" height="16" src="../thumb-up-120px.png" /></i>が同じ値の場合は投稿日時の新しいものが上位としています。</p>
<p><i><img width="16" height="16" src="../thumb-up-120px.png" /></i>がついていない記事は表示していません。</p>
<table border="1">
<tr>
	<td rowspan="3"><center>somewhatgood@githubさんの<br />1位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>787</kbd>
		<a target="_blank" href="https://qiita.com/somewhatgood@github/items/b74107480ee3821784e6">nil? empty? blank? present? の使い分け</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-01-24 16:43:15</center>
	</td>
	<td style="width:200px;">
		@somewhatgood@github<br><img width="80" height="80" src="https://secure.gravatar.com/avatar/69db5c8a8161b0abaeb8767fc6c983d8?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Ruby]</b> <b>[Rails]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p><a href="http://railsdoc.com/active_support" class="autolink" rel="nofollow noopener" target="_blank">http://railsdoc.com/active_support</a></p>

<p>まず、nil?とempty?はrubyのメソッドで、blank?とpresent?はrailsで拡張されたメソッド（つまりrubyでは使えない）ってことを覚えておく。</p>

<p>-</p>

<h1>
<span id="nilは存在しないという意味" class="fragment"></span><a href="#nil%E3%81%AF%E5%AD%98%E5%9C%A8%E3%81%97%E3%81%AA%E3%81%84%E3%81%A8%E3%81%84%E3%81%86%E6%84%8F%E5%91%B3"><i class="fa fa-link"></i></a>nilは存在しないという意味。</h1>

<p>対して　""は「何も無い」が存在している。空白の存在。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>book.nil?
</pre></div></div>

<p>もしbook自体が存在しないなら、上記はtrueを返す。</p>

<h1>
<span id="emptyは入れ物は存在するのが前提" class="fragment"></span><a href="#empty%E3%81%AF%E5%85%A5%E3%82%8C%E7%89%A9%E3%81%AF%E5%AD%98%E5%9C%A8%E3%81%99%E3%82%8B%E3%81%AE%E3%81%8C%E5%89%8D%E6%8F%90"><i class="fa fa-link"></i></a>empty?は「入れ物」は存在するのが前提。</h1>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>book.empty?
description.empty?
</pre></div></div>

<p>は、bookやdescriptionそのものは存在していることが前提で、その配列の中身が空か、文字列の中身が空の場合にtrueを返す。<br>
配列や文字列そのもの（入れ物）が無い場合にはNoMethodErrorが発生する。空ですか？と聞いてるわけだから、少なくとも「入れ物」が存在しないとダメってことか。</p>

<h1>
<span id="blankはnilとemptyの合わせ技" class="fragment"></span><a href="#blank%E3%81%AFnil%E3%81%A8empty%E3%81%AE%E5%90%88%E3%82%8F%E3%81%9B%E6%8A%80"><i class="fa fa-link"></i></a>blank?は、nil?とempty?の合わせ技</h1>

<p>では、中身が空か、または入れものそのものが存在しないときの判定はどうなるか。blank?が使える。empty?とnil?を足したようなものだ。<br>
nilと空のオブジェクトを判定できる。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>unless description.blank?
end
</pre></div></div>

<p>と書けば、descriptionの文字列が空か、そもそもdescription自体が存在しない場合に処理をスキップできる。</p>

<h1>
<span id="presentはblankと同じ意味" class="fragment"></span><a href="#present%E3%81%AFblank%E3%81%A8%E5%90%8C%E3%81%98%E6%84%8F%E5%91%B3"><i class="fa fa-link"></i></a>present?は、!blank?と同じ意味</h1>

<p>ちなみに上の処理は present?を使って</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>if description.present?
end
</pre></div></div>

<p>と書ける。</p>

<p>-</p>

<p>nil? すべてのオブジェクトに定義されている。nilのときのみtrueを返す。<br>
empty? 文字列の長さが0のとき、または配列が空のときにTrueを返す。もちろん数値には定義されていない。<br>
blank? railsの拡張。nil, "", " ", [], {} のいずれかでTrueを返す。</p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>somewhatgood@githubさんの<br />2位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>175</kbd>
		<a target="_blank" href="https://qiita.com/somewhatgood@github/items/113773747a6faa800366">jQuery内からRailsのActionを叩く</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-04-10 00:02:46</center>
	</td>
	<td style="width:200px;">
		@somewhatgood@github<br><img width="80" height="80" src="https://secure.gravatar.com/avatar/69db5c8a8161b0abaeb8767fc6c983d8?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Rails]</b> <b>[Ajax]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>JQueryとの連携方法でいつもとまどう点をまとめとこう。というよりも、jQueryからRailsのアクションを呼ぶ方法。初心者にはなかなか流れが掴みにくいです。<br>
用途は限定されるかもしれないですが、たとえばselectの変更をjQueryで検知したときに、RailsでActionを叩いてsessionの値を書き換えるときなどは次のようにする。</p>

<p>まず、流れ。<br>
１）jQueryでselectの変更を検知する<br>
２）jQuery内からURLを指定してAjax通信する<br>
３）２）のURLがActionを叩くようにルーティングを設定する<br>
４）２）のURLに従って、html.erbファイルを設置する<br>
５）後は好きなようにAction内で処理をする</p>

<div class="code-frame" data-lang="html+erb">
<div class="code-lang"><span class="bold">sample.html.erb</span></div>
<div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">select</span> <span class="na">id</span><span class="o">=</span><span class="s">"year_select"</span> <span class="na">name</span><span class="o">=</span><span class="s">"y"</span> <span class="na">style</span><span class="o">=</span><span class="s">"width:100px;"</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">"2011"</span><span class="p">&gt;</span>2011<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">"2012"</span><span class="p">&gt;</span>2012<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">"2013"</span> <span class="na">selected</span><span class="o">=</span><span class="s">"selected"</span><span class="p">&gt;</span>2013<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">"2014"</span><span class="p">&gt;</span>2014<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">select</span><span class="p">&gt;</span>
</pre></div>
</div>

<p>例えば上のようなviewがあったとします。<br>
#year_selectの変更を検知するjQueryが下記。</p>

<div class="code-frame" data-lang="javascript">
<div class="code-lang"><span class="bold">sample.js</span></div>
<div class="highlight"><pre><span></span><span class="nx">$</span><span class="p">(</span><span class="s2">"select#year_select"</span><span class="p">).</span><span class="nx">change</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
        <span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
            <span class="nx">url</span><span class="o">:</span> <span class="s2">"projects/change_session_year"</span><span class="p">,</span>
            <span class="nx">type</span><span class="o">:</span> <span class="s2">"GET"</span><span class="p">,</span>
            <span class="nx">data</span><span class="o">:</span> <span class="p">{</span><span class="nx">year</span> <span class="o">:</span> <span class="nx">$</span><span class="p">(</span><span class="s2">":selected"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"value"</span><span class="p">),</span>
                    <span class="nx">id</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
                    <span class="nx">mode</span><span class="o">:</span> <span class="s1">'hoge'</span><span class="p">,</span>
                    <span class="nx">type</span><span class="o">:</span> <span class="s1">'entry'</span>
                    <span class="p">},</span>
            <span class="nx">dataType</span><span class="o">:</span> <span class="s2">"html"</span><span class="p">,</span>
            <span class="nx">success</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">alert</span><span class="p">(</span><span class="s2">"success"</span><span class="p">);</span>
            <span class="p">},</span>
            <span class="nx">error</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">alert</span><span class="p">(</span><span class="s2">"errror"</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">});</span>
    <span class="p">});</span>
</pre></div>
</div>

<p>$.ajax はAjax通信するための構文。<br>
url: 通信先のURLを指定。ルートからの指定でいいはず<br>
data: 通信先に渡すパラメータ。Actionからはもちろんparams[]で取得できる<br>
success,error　通信成功、失敗時の処理</p>

<p>慣れないとわかりにくいけど、通信後、戻り値がfunction(data)として渡されます。このdataをいじくってテンプレートを書き換えるというのが王道の使い方だと思いますが、ここではテンプレートはいじりません。</p>

<p>で、projects/change_session_year　というURLでルーティングを設定します。</p>

<div class="code-frame" data-lang="ruby">
<div class="code-lang"><span class="bold">routes.rb</span></div>
<div class="highlight"><pre><span></span>    <span class="n">get</span> <span class="s2">"projects/change_session_year"</span>
</pre></div>
</div>

<p>次、要注意です。これを忘れたがために嵌って時間ロスるすことがよくあります。<br>
ルーティングに対応するテンプレートファイルを設置する！この例であれば、</p>

<p>projects/change_session_year.html.erb を忘れずに設置してください！中身は空でいいと思います。</p>

<p>$.ajaxで通信した際、このテンプレートが無いとエラーが返ってしまいます。普通のRailsの処理であれば、恐らく、missing_tamplateエラーが出るのですぐにわかるんだけど、Ajaxの場合は何も言わず失敗するので、気づくのに時間がかかるんです。</p>

<p>後は、projectsコントローラーにchange_session_yearアクションメソッドを用意して、好きなように処理を入れればOKです。</p>

<div class="code-frame" data-lang="ruby">
<div class="code-lang"><span class="bold">projects_controller.rb</span></div>
<div class="highlight"><pre><span></span>    <span class="k">def</span> <span class="nf">change_session_year</span>
        <span class="n">session</span><span class="o">[</span><span class="ss">:year</span><span class="o">]</span> <span class="o">=</span> <span class="mi">2013</span>
    <span class="k">end</span>
</pre></div>
</div>

<p>肝は４）のテンプレートを忘れないかどうか、じゃないでしょうか。</p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>somewhatgood@githubさんの<br />3位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>85</kbd>
		<a target="_blank" href="https://qiita.com/somewhatgood@github/items/9890e75b4c195d47715a">link_to の引数と展開の違いまとめ</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-01-11 18:15:27</center>
	</td>
	<td style="width:200px;">
		@somewhatgood@github<br><img width="80" height="80" src="https://secure.gravatar.com/avatar/69db5c8a8161b0abaeb8767fc6c983d8?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Rails]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>いつもわからなくなるのでまとめとく。</p>

<p>▼基本 コントローラやアクション、IDなど予約パラメータやルート定義にあるものはURLに含まれる<br>
&lt;%= link_to "TEST1-1", controller:"product", action:"edit" %&gt;<br>
&lt;%= link_to "TEST1-2", controller:"product", action:"edit", id: 1 %&gt;</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>&lt;a href="/product/edit"&gt;TEST1-1&lt;/a&gt;
&lt;a href="/product/edit/1"&gt;TEST1-2&lt;/a&gt;
</pre></div></div>

<p>-<br>
▼第２引数をハッシュにすればURL情報であることを明示でき、また第３引数が確実にhtml属性になる。<br>
「ハッシュの中のid」と「外のid」の扱いに注目。<br>
&lt;%= link_to "TEST2-1",{controller:"product", action:"edit"},  id:"title" %&gt;<br>
&lt;%= link_to "TEST2-2",{controller:"product", action:"edit", id:3}, id:"title" %&gt;</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>&lt;a href="/product/edit" id="title"&gt;TEST2-1&lt;/a&gt;
&lt;a href="/product/edit/3" id="title"&gt;TEST2-2&lt;/a&gt;
</pre></div></div>

<p>第２引数の中にある予約パラメータ以外のもの(book_author)は、クエリとして渡される。<br>
&lt;%= link_to "TEST2-3",{controller:"product", action:"edit",id:3, book_author:"Bob"},  id:"title" %&gt;</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>&lt;a href="/product/edit/3?book_author=Bob" id="title"&gt;TEST2-3&lt;/a&gt;
</pre></div></div>

<p>-</p>

<p>▼第３引数もちゃんとハッシュにしたほうがわかりやすい。<br>
&lt;%= link_to "TEST3",{controller:"product", action:"edit"}, {id:"title", class:"top"} %&gt;</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>&lt;a href="/product/edit" id="title"&gt;TEST3&lt;/a&gt;
</pre></div></div>

<p>-<br>
▼ハッシュにした場合、第３引数より後は無視される。<br>
&lt;%= link_to "TEST4",{controller: "product", action: "edit"}, {id: 1, class: "top"},{width: 100, height: 200} %&gt;</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>&lt;a href="/product/edit" class="top" id="1"&gt;TEST4&lt;/a&gt;

</pre></div></div>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>somewhatgood@githubさんの<br />4位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>16</kbd>
		<a target="_blank" href="https://qiita.com/somewhatgood@github/items/32b916ad91d556091d9d">モデルをサブディレクトリに分割する Rails 3.2	</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-02-08 13:39:21</center>
	</td>
	<td style="width:200px;">
		@somewhatgood@github<br><img width="80" height="80" src="https://secure.gravatar.com/avatar/69db5c8a8161b0abaeb8767fc6c983d8?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Rails]</b> <b>[ActiveRecord]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>プロジェクトが大きくなるにつれて、モデルクラスの数もどんどん多くなる。収拾がつかなくなる前に、モデルをディレクトリにわけて置いておく方法をまとめる。</p>

<p>参考にした書籍は「エンタープライズRails」の第三章だけど、内容が古くそのままではうまく動かなかったので、検討してみた結果が以下。</p>

<p>まず、/app/models/以下に、好きなようにディレクトリを作り、適当にモデルファイルを配置する。例えば、/app/models/physical/users/ と　/app/models/logical/のふたつのディレクトリを作り、それぞれuser.rbとrole.rbのモデルファイルを配置した。<br>
さらに、User belongs_to Role として関連を設定する。</p>

<div class="code-frame" data-lang="ruby">
<div class="code-lang"><span class="bold">/app/models/physical/users/user.rb</span></div>
<div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">User</span> <span class="o">&lt;</span> <span class="no">ActiveRecord</span><span class="o">::</span><span class="no">Base</span>
  <span class="n">belongs_to</span> <span class="ss">:role</span>
  <span class="c1">#以下省略</span>
<span class="k">end</span>
</pre></div>
</div>

<div class="code-frame" data-lang="ruby">
<div class="code-lang"><span class="bold">/app/models/logical/role.rb</span></div>
<div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Role</span> <span class="o">&lt;</span> <span class="no">ActiveRecord</span><span class="o">::</span><span class="no">Base</span>
  <span class="n">attr_accessible</span> <span class="ss">:name</span>
  <span class="c1">#以下省略</span>
<span class="k">end</span>
</pre></div>
</div>

<p>モデルの設定はこれでおしまい。<br>
ただ、このままだとアプリの起動時にモデルの読み込みに失敗する。そこで、/config/application.rbにローディングの記述を追加する。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>module YourAppName
    class Application &lt; Rails::Application
        #18行目あたり
        config.autoload_paths += %W(#{config.root}/app/models/logical)
        config.autoload_paths += %W(#{config.root}/app/models/physical/users)
    end
end
</pre></div></div>

<p>これですべて上手くいった。</p>

<p>-</p>

<p>ちなみに、書籍やブログで調べると、モデルクラスにはモジュールでラップし、関連の設定にはクラスのパスを明示的に知らせる必要があるというものがほとんどだったが、どれもうまくいかなかった。こんな感じ。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><span></span>※これはうまくいかなかった設定です
module Physical
    module users
        class User &lt; ActiveRecord::Base
            belongs_to :role, :class_name =&gt; '::Logical::Role'
            #以下省略
        end
    end
end
</pre></div></div>

<p>上記は結局上手く行かず、モジュールでのラップも、関連を設定する際のパスの指定も不要のようだ。Rails3.2からそのあたりが楽チンになったのだろうか？？</p>

<p>どなたか間違いがわかる方はご指摘ください！</p>
</div>
	</td>
</tr>
</table>
<br />
<table border="1">
<tr>
	<td rowspan="3"><center>somewhatgood@githubさんの<br />5位</center></td>
	<td colspan="3">
		<kbd><i><img alt="いいね" width="16" height="16" src="../thumb-up-120px.png" /></i>10</kbd>
		<a target="_blank" href="https://qiita.com/somewhatgood@github/items/c7f5e55dd3dd0129e3ee">SQALEでデプロイ時にやったことまとめ</a>
	</td>
</tr>
<tr>
	<td style="width:100px;"><center>投稿日時</center></td>
	<td style="width:200px;"><center>投稿者</center></td>
	<td style="width:150px;"><center>タグ</center></td>
	<td style="width:350px;"><center>本文</center></td>
</tr>
<tr>
	<td style="width:100px;">
		<!--投稿日時--><center>2013-05-20 16:16:56</center>
	</td>
	<td style="width:200px;">
		@somewhatgood@github<br><img width="80" height="80" src="https://secure.gravatar.com/avatar/69db5c8a8161b0abaeb8767fc6c983d8?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png">
	</td>
	<td style="width:150px;">
		<!--タグ-->
		<center><b>[Rails]</b> <b>[bootstrap]</b> <b>[sqale]</b> </center>
	</td>
	<td style="width:350px;">
		<!--本文-->
		<div style="width:350px;height:150px;overflow-x:hidden;overflow-y:scroll;"><p>SQALEにRailsアプリをデブロイした際に嵌ってしまったのでメモ。まだよくわかっていないことがあるので、訂正・ご指摘あればどしどしくださいませ。</p>

<p>■STEP1<br>
SQALEが用意してくれているマニュアルを見ながらデブロイをした。データはきちんとアップされたようだが、「Soryy, something went wrong.」と怒られてしまう。</p>

<p>■STEP2<br>
設定ファイルを見直した。</p>

<div class="code-frame" data-lang="ruby">
<div class="code-lang"><span class="bold">config/environments/production.rb</span></div>
<div class="highlight"><pre><span></span>   <span class="c1"># Don't fallback to assets pipeline if a precompiled asset is missed</span>
<span class="o">-</span>  <span class="n">config</span><span class="o">.</span><span class="n">assets</span><span class="o">.</span><span class="n">compile</span> <span class="o">=</span> <span class="kp">false</span>
<span class="o">+</span>  <span class="n">config</span><span class="o">.</span><span class="n">assets</span><span class="o">.</span><span class="n">compile</span> <span class="o">=</span> <span class="kp">true</span>
</pre></div>
</div>

<p>これでSTEP1のエラーは解消したが、また別のエラーが出てしまう。</p>

<p>■STEP3<br>
log/production.logを開いてエラーログを確認した。</p>

<div class="code-frame" data-lang="html+erb">
<div class="code-lang"><span class="bold">views/layout/application.html.erb</span></div>
<div class="highlight"><pre><span></span><span class="cp">&lt;%=</span> <span class="n">bootstrap_flash</span> <span class="cp">%&gt;</span>
<span class="cp">&lt;%=</span> <span class="k">yield</span> <span class="cp">%&gt;</span>
</pre></div>
</div>

<p>このbootstrap_flashというメソッドがないと怒られた。<br>
これはいつ追加したのか謎なんですが・・・<br>
bootstrapをベースにしたCSSフレームワークを導入したんですが、それを追加したときに追加されたのだろうか。↓がそのフレームワーク。<br>
<a href="http://wbpreview.com/previews/WB0GRG7H2/index.html" class="autolink" rel="nofollow noopener" target="_blank">http://wbpreview.com/previews/WB0GRG7H2/index.html</a></p>

<p>■STEP4<br>
bootstrap_flashでググると解決策が見つかった。<br>
<a href="https://codeclimate.com/github/seyhunak/twitter-bootstrap-rails/BootstrapFlashHelper" class="autolink" rel="nofollow noopener" target="_blank">https://codeclimate.com/github/seyhunak/twitter-bootstrap-rails/BootstrapFlashHelper</a></p>

<p>bootstrap_flash_helperを追加します。下記のディレクトリに新規にファイルを作り、ソースをそのまま貼付けることで、エラーが出なくなりました。</p>

<div class="code-frame" data-lang="ruby">
<div class="code-lang"><span class="bold">app/helpers/bootstrap_flash_helper.rb</span></div>
<div class="highlight"><pre><span></span><span class="k">module</span> <span class="nn">BootstrapFlashHelper</span>
  <span class="no">ALERT_TYPES</span> <span class="o">=</span> <span class="o">[</span><span class="ss">:error</span><span class="p">,</span> <span class="ss">:info</span><span class="p">,</span> <span class="ss">:success</span><span class="p">,</span> <span class="ss">:warning</span><span class="o">]</span>


  <span class="k">def</span> <span class="nf">bootstrap_flash</span>
    <span class="n">flash_messages</span> <span class="o">=</span> <span class="o">[]</span>
    <span class="n">flash</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">type</span><span class="p">,</span> <span class="n">message</span><span class="o">|</span>
      <span class="c1"># Skip empty messages, e.g. for devise messages set to nothing in a locale file.</span>
      <span class="k">next</span> <span class="k">if</span> <span class="n">message</span><span class="o">.</span><span class="n">blank?</span>


      <span class="n">type</span> <span class="o">=</span> <span class="ss">:success</span> <span class="k">if</span> <span class="n">type</span> <span class="o">==</span> <span class="ss">:notice</span>
      <span class="n">type</span> <span class="o">=</span> <span class="ss">:error</span>   <span class="k">if</span> <span class="n">type</span> <span class="o">==</span> <span class="ss">:alert</span>
      <span class="k">next</span> <span class="k">unless</span> <span class="no">ALERT_TYPES</span><span class="o">.</span><span class="n">include?</span><span class="p">(</span><span class="n">type</span><span class="p">)</span>


      <span class="nb">Array</span><span class="p">(</span><span class="n">message</span><span class="p">)</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">msg</span><span class="o">|</span>
        <span class="n">text</span> <span class="o">=</span> <span class="n">content_tag</span><span class="p">(</span><span class="ss">:div</span><span class="p">,</span>
                           <span class="n">content_tag</span><span class="p">(</span><span class="ss">:button</span><span class="p">,</span> <span class="n">raw</span><span class="p">(</span><span class="s2">"&amp;times;"</span><span class="p">),</span> <span class="ss">:class</span> <span class="o">=&gt;</span> <span class="s2">"close"</span><span class="p">,</span> <span class="s2">"data-dismiss"</span> <span class="o">=&gt;</span> <span class="s2">"alert"</span><span class="p">)</span> <span class="o">+</span>
                           <span class="n">msg</span><span class="o">.</span><span class="n">html_safe</span><span class="p">,</span> <span class="ss">:class</span> <span class="o">=&gt;</span> <span class="s2">"alert fade in alert-</span><span class="si">#{</span><span class="n">type</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
        <span class="n">flash_messages</span> <span class="o">&lt;&lt;</span> <span class="n">text</span> <span class="k">if</span> <span class="n">msg</span>
      <span class="k">end</span>
    <span class="k">end</span>
    <span class="n">flash_messages</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">)</span><span class="o">.</span><span class="n">html_safe</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</div>
</div>
	</td>
</tr>
</table>
<br />
	</body>
</html>
